/*! For license information please see main.js.LICENSE.txt */
(()=>{var e,g,l={6751:(e,g,l)=>{"use strict";l.d(g,{Z:()=>te});var t=function(){function e(e){var g=this;this._insertTag=function(e){var l;l=0===g.tags.length?g.insertionPoint?g.insertionPoint.nextSibling:g.prepend?g.container.firstChild:g.before:g.tags[g.tags.length-1].nextSibling,g.container.insertBefore(e,l),g.tags.push(e)},this.isSpeedy=void 0===e.speedy||e.speedy,this.tags=[],this.ctr=0,this.nonce=e.nonce,this.key=e.key,this.container=e.container,this.prepend=e.prepend,this.insertionPoint=e.insertionPoint,this.before=null}var g=e.prototype;return g.hydrate=function(e){e.forEach(this._insertTag)},g.insert=function(e){this.ctr%(this.isSpeedy?65e3:1)==0&&this._insertTag(function(e){var g=document.createElement("style");return g.setAttribute("data-emotion",e.key),void 0!==e.nonce&&g.setAttribute("nonce",e.nonce),g.appendChild(document.createTextNode("")),g.setAttribute("data-s",""),g}(this));var g=this.tags[this.tags.length-1];if(this.isSpeedy){var l=function(e){if(e.sheet)return e.sheet;for(var g=0;g<document.styleSheets.length;g++)if(document.styleSheets[g].ownerNode===e)return document.styleSheets[g]}(g);try{l.insertRule(e,l.cssRules.length)}catch(e){}}else g.appendChild(document.createTextNode(e));this.ctr++},g.flush=function(){this.tags.forEach((function(e){return e.parentNode&&e.parentNode.removeChild(e)})),this.tags=[],this.ctr=0},e}(),n=Math.abs,o=String.fromCharCode,I=Object.assign;function C(e){return e.trim()}function r(e,g,l){return e.replace(g,l)}function a(e,g){return e.indexOf(g)}function i(e,g){return 0|e.charCodeAt(g)}function c(e,g,l){return e.slice(g,l)}function s(e){return e.length}function d(e){return e.length}function u(e,g){return g.push(e),e}var A=1,m=1,b=0,p=0,Z=0,h="";function G(e,g,l,t,n,o,I){return{value:e,root:g,parent:l,type:t,props:n,children:o,line:A,column:m,length:I,return:""}}function y(e,g){return I(G("",null,null,"",null,null,0),e,{length:-e.length},g)}function B(){return Z=p>0?i(h,--p):0,m--,10===Z&&(m=1,A--),Z}function S(){return Z=p<b?i(h,p++):0,m++,10===Z&&(m=1,A++),Z}function V(){return i(h,p)}function W(){return p}function R(e,g){return c(h,e,g)}function f(e){switch(e){case 0:case 9:case 10:case 13:case 32:return 5;case 33:case 43:case 44:case 47:case 62:case 64:case 126:case 59:case 123:case 125:return 4;case 58:return 3;case 34:case 39:case 40:case 91:return 2;case 41:case 93:return 1}return 0}function v(e){return A=m=1,b=s(h=e),p=0,[]}function k(e){return h="",e}function X(e){return C(R(p-1,Y(91===e?e+2:40===e?e+1:e)))}function J(e){for(;(Z=V())&&Z<33;)S();return f(e)>2||f(Z)>3?"":" "}function w(e,g){for(;--g&&S()&&!(Z<48||Z>102||Z>57&&Z<65||Z>70&&Z<97););return R(e,W()+(g<6&&32==V()&&32==S()))}function Y(e){for(;S();)switch(Z){case e:return p;case 34:case 39:34!==e&&39!==e&&Y(Z);break;case 40:41===e&&Y(e);break;case 92:S()}return p}function H(e,g){for(;S()&&e+Z!==57&&(e+Z!==84||47!==V()););return"/*"+R(g,p-1)+"*"+o(47===e?e:S())}function F(e){for(;!f(V());)S();return R(e,p)}var N="-ms-",K="-moz-",x="-webkit-",M="comm",z="rule",E="decl",L="@keyframes";function U(e,g){for(var l="",t=d(e),n=0;n<t;n++)l+=g(e[n],n,e,g)||"";return l}function Q(e,g,l,t){switch(e.type){case"@layer":if(e.children.length)break;case"@import":case E:return e.return=e.return||e.value;case M:return"";case L:return e.return=e.value+"{"+U(e.children,t)+"}";case z:e.value=e.props.join(",")}return s(l=U(e.children,t))?e.return=e.value+"{"+l+"}":""}function D(e){return k(T("",null,null,null,[""],e=v(e),0,[0],e))}function T(e,g,l,t,n,I,C,c,d){for(var A=0,m=0,b=C,p=0,Z=0,h=0,G=1,y=1,R=1,f=0,v="",k=n,Y=I,N=t,K=v;y;)switch(h=f,f=S()){case 40:if(108!=h&&58==i(K,b-1)){-1!=a(K+=r(X(f),"&","&\f"),"&\f")&&(R=-1);break}case 34:case 39:case 91:K+=X(f);break;case 9:case 10:case 13:case 32:K+=J(h);break;case 92:K+=w(W()-1,7);continue;case 47:switch(V()){case 42:case 47:u(j(H(S(),W()),g,l),d);break;default:K+="/"}break;case 123*G:c[A++]=s(K)*R;case 125*G:case 59:case 0:switch(f){case 0:case 125:y=0;case 59+m:-1==R&&(K=r(K,/\f/g,"")),Z>0&&s(K)-b&&u(Z>32?O(K+";",t,l,b-1):O(r(K," ","")+";",t,l,b-2),d);break;case 59:K+=";";default:if(u(N=P(K,g,l,A,m,n,c,v,k=[],Y=[],b),I),123===f)if(0===m)T(K,g,N,N,k,I,b,c,Y);else switch(99===p&&110===i(K,3)?100:p){case 100:case 108:case 109:case 115:T(e,N,N,t&&u(P(e,N,N,0,0,n,c,v,n,k=[],b),Y),n,Y,b,c,t?k:Y);break;default:T(K,N,N,N,[""],Y,0,c,Y)}}A=m=Z=0,G=R=1,v=K="",b=C;break;case 58:b=1+s(K),Z=h;default:if(G<1)if(123==f)--G;else if(125==f&&0==G++&&125==B())continue;switch(K+=o(f),f*G){case 38:R=m>0?1:(K+="\f",-1);break;case 44:c[A++]=(s(K)-1)*R,R=1;break;case 64:45===V()&&(K+=X(S())),p=V(),m=b=s(v=K+=F(W())),f++;break;case 45:45===h&&2==s(K)&&(G=0)}}return I}function P(e,g,l,t,o,I,a,i,s,u,A){for(var m=o-1,b=0===o?I:[""],p=d(b),Z=0,h=0,y=0;Z<t;++Z)for(var B=0,S=c(e,m+1,m=n(h=a[Z])),V=e;B<p;++B)(V=C(h>0?b[B]+" "+S:r(S,/&\f/g,b[B])))&&(s[y++]=V);return G(e,g,l,0===o?z:i,s,u,A)}function j(e,g,l){return G(e,g,l,M,o(Z),c(e,2,-2),0)}function O(e,g,l,t){return G(e,g,l,E,c(e,0,t),c(e,t+1,-1),t)}var q=function(e,g,l){for(var t=0,n=0;t=n,n=V(),38===t&&12===n&&(g[l]=1),!f(n);)S();return R(e,p)},$=new WeakMap,_=function(e){if("rule"===e.type&&e.parent&&!(e.length<1)){for(var g=e.value,l=e.parent,t=e.column===l.column&&e.line===l.line;"rule"!==l.type;)if(!(l=l.parent))return;if((1!==e.props.length||58===g.charCodeAt(0)||$.get(l))&&!t){$.set(e,!0);for(var n=[],I=function(e,g){return k(function(e,g){var l=-1,t=44;do{switch(f(t)){case 0:38===t&&12===V()&&(g[l]=1),e[l]+=q(p-1,g,l);break;case 2:e[l]+=X(t);break;case 4:if(44===t){e[++l]=58===V()?"&\f":"",g[l]=e[l].length;break}default:e[l]+=o(t)}}while(t=S());return e}(v(e),g))}(g,n),C=l.props,r=0,a=0;r<I.length;r++)for(var i=0;i<C.length;i++,a++)e.props[a]=n[r]?I[r].replace(/&\f/g,C[i]):C[i]+" "+I[r]}}},ee=function(e){if("decl"===e.type){var g=e.value;108===g.charCodeAt(0)&&98===g.charCodeAt(2)&&(e.return="",e.value="")}};function ge(e,g){switch(function(e,g){return 45^i(e,0)?(((g<<2^i(e,0))<<2^i(e,1))<<2^i(e,2))<<2^i(e,3):0}(e,g)){case 5103:return x+"print-"+e+e;case 5737:case 4201:case 3177:case 3433:case 1641:case 4457:case 2921:case 5572:case 6356:case 5844:case 3191:case 6645:case 3005:case 6391:case 5879:case 5623:case 6135:case 4599:case 4855:case 4215:case 6389:case 5109:case 5365:case 5621:case 3829:return x+e+e;case 5349:case 4246:case 4810:case 6968:case 2756:return x+e+K+e+N+e+e;case 6828:case 4268:return x+e+N+e+e;case 6165:return x+e+N+"flex-"+e+e;case 5187:return x+e+r(e,/(\w+).+(:[^]+)/,x+"box-$1$2"+N+"flex-$1$2")+e;case 5443:return x+e+N+"flex-item-"+r(e,/flex-|-self/,"")+e;case 4675:return x+e+N+"flex-line-pack"+r(e,/align-content|flex-|-self/,"")+e;case 5548:return x+e+N+r(e,"shrink","negative")+e;case 5292:return x+e+N+r(e,"basis","preferred-size")+e;case 6060:return x+"box-"+r(e,"-grow","")+x+e+N+r(e,"grow","positive")+e;case 4554:return x+r(e,/([^-])(transform)/g,"$1"+x+"$2")+e;case 6187:return r(r(r(e,/(zoom-|grab)/,x+"$1"),/(image-set)/,x+"$1"),e,"")+e;case 5495:case 3959:return r(e,/(image-set\([^]*)/,x+"$1$`$1");case 4968:return r(r(e,/(.+:)(flex-)?(.*)/,x+"box-pack:$3"+N+"flex-pack:$3"),/s.+-b[^;]+/,"justify")+x+e+e;case 4095:case 3583:case 4068:case 2532:return r(e,/(.+)-inline(.+)/,x+"$1$2")+e;case 8116:case 7059:case 5753:case 5535:case 5445:case 5701:case 4933:case 4677:case 5533:case 5789:case 5021:case 4765:if(s(e)-1-g>6)switch(i(e,g+1)){case 109:if(45!==i(e,g+4))break;case 102:return r(e,/(.+:)(.+)-([^]+)/,"$1"+x+"$2-$3$1"+K+(108==i(e,g+3)?"$3":"$2-$3"))+e;case 115:return~a(e,"stretch")?ge(r(e,"stretch","fill-available"),g)+e:e}break;case 4949:if(115!==i(e,g+1))break;case 6444:switch(i(e,s(e)-3-(~a(e,"!important")&&10))){case 107:return r(e,":",":"+x)+e;case 101:return r(e,/(.+:)([^;!]+)(;|!.+)?/,"$1"+x+(45===i(e,14)?"inline-":"")+"box$3$1"+x+"$2$3$1"+N+"$2box$3")+e}break;case 5936:switch(i(e,g+11)){case 114:return x+e+N+r(e,/[svh]\w+-[tblr]{2}/,"tb")+e;case 108:return x+e+N+r(e,/[svh]\w+-[tblr]{2}/,"tb-rl")+e;case 45:return x+e+N+r(e,/[svh]\w+-[tblr]{2}/,"lr")+e}return x+e+N+e+e}return e}var le=[function(e,g,l,t){if(e.length>-1&&!e.return)switch(e.type){case E:e.return=ge(e.value,e.length);break;case L:return U([y(e,{value:r(e.value,"@","@"+x)})],t);case z:if(e.length)return function(e,g){return e.map(g).join("")}(e.props,(function(g){switch(function(e,g){return(e=/(::plac\w+|:read-\w+)/.exec(e))?e[0]:e}(g)){case":read-only":case":read-write":return U([y(e,{props:[r(g,/:(read-\w+)/,":-moz-$1")]})],t);case"::placeholder":return U([y(e,{props:[r(g,/:(plac\w+)/,":"+x+"input-$1")]}),y(e,{props:[r(g,/:(plac\w+)/,":-moz-$1")]}),y(e,{props:[r(g,/:(plac\w+)/,N+"input-$1")]})],t)}return""}))}}],te=function(e){var g=e.key;if("css"===g){var l=document.querySelectorAll("style[data-emotion]:not([data-s])");Array.prototype.forEach.call(l,(function(e){-1!==e.getAttribute("data-emotion").indexOf(" ")&&(document.head.appendChild(e),e.setAttribute("data-s",""))}))}var n,o,I=e.stylisPlugins||le,C={},r=[];n=e.container||document.head,Array.prototype.forEach.call(document.querySelectorAll('style[data-emotion^="'+g+' "]'),(function(e){for(var g=e.getAttribute("data-emotion").split(" "),l=1;l<g.length;l++)C[g[l]]=!0;r.push(e)}));var a,i,c,s,u=[Q,(s=function(e){a.insert(e)},function(e){e.root||(e=e.return)&&s(e)})],A=(i=[_,ee].concat(I,u),c=d(i),function(e,g,l,t){for(var n="",o=0;o<c;o++)n+=i[o](e,g,l,t)||"";return n});o=function(e,g,l,t){a=l,U(D(e?e+"{"+g.styles+"}":g.styles),A),t&&(m.inserted[g.name]=!0)};var m={key:g,sheet:new t({key:g,container:n,nonce:e.nonce,speedy:e.speedy,prepend:e.prepend,insertionPoint:e.insertionPoint}),nonce:e.nonce,inserted:C,registered:{},insert:o};return m.sheet.hydrate(r),m}},5042:(e,g,l)=>{"use strict";function t(e){var g=Object.create(null);return function(l){return void 0===g[l]&&(g[l]=e(l)),g[l]}}l.d(g,{Z:()=>t})},5260:(e,g,l)=>{"use strict";l.d(g,{T:()=>r,i:()=>o,w:()=>C});var t=l(7294),n=l(6751),o=(l(6797),l(7278),!0),I=t.createContext("undefined"!=typeof HTMLElement?(0,n.Z)({key:"css"}):null);I.Provider;var C=function(e){return(0,t.forwardRef)((function(g,l){var n=(0,t.useContext)(I);return e(g,n,l)}))};o||(C=function(e){return function(g){var l=(0,t.useContext)(I);return null===l?(l=(0,n.Z)({key:"css"}),t.createElement(I.Provider,{value:l},e(g,l))):e(g,l)}});var r=t.createContext({})},6797:(e,g,l)=>{"use strict";l.d(g,{O:()=>u});var t={animationIterationCount:1,aspectRatio:1,borderImageOutset:1,borderImageSlice:1,borderImageWidth:1,boxFlex:1,boxFlexGroup:1,boxOrdinalGroup:1,columnCount:1,columns:1,flex:1,flexGrow:1,flexPositive:1,flexShrink:1,flexNegative:1,flexOrder:1,gridRow:1,gridRowEnd:1,gridRowSpan:1,gridRowStart:1,gridColumn:1,gridColumnEnd:1,gridColumnSpan:1,gridColumnStart:1,msGridRow:1,msGridRowSpan:1,msGridColumn:1,msGridColumnSpan:1,fontWeight:1,lineHeight:1,opacity:1,order:1,orphans:1,tabSize:1,widows:1,zIndex:1,zoom:1,WebkitLineClamp:1,fillOpacity:1,floodOpacity:1,stopOpacity:1,strokeDasharray:1,strokeDashoffset:1,strokeMiterlimit:1,strokeOpacity:1,strokeWidth:1},n=l(5042),o=/[A-Z]|^ms/g,I=/_EMO_([^_]+?)_([^]*?)_EMO_/g,C=function(e){return 45===e.charCodeAt(1)},r=function(e){return null!=e&&"boolean"!=typeof e},a=(0,n.Z)((function(e){return C(e)?e:e.replace(o,"-$&").toLowerCase()})),i=function(e,g){switch(e){case"animation":case"animationName":if("string"==typeof g)return g.replace(I,(function(e,g,l){return s={name:g,styles:l,next:s},g}))}return 1===t[e]||C(e)||"number"!=typeof g||0===g?g:g+"px"};function c(e,g,l){if(null==l)return"";if(void 0!==l.__emotion_styles)return l;switch(typeof l){case"boolean":return"";case"object":if(1===l.anim)return s={name:l.name,styles:l.styles,next:s},l.name;if(void 0!==l.styles){var t=l.next;if(void 0!==t)for(;void 0!==t;)s={name:t.name,styles:t.styles,next:s},t=t.next;return l.styles+";"}return function(e,g,l){var t="";if(Array.isArray(l))for(var n=0;n<l.length;n++)t+=c(e,g,l[n])+";";else for(var o in l){var I=l[o];if("object"!=typeof I)null!=g&&void 0!==g[I]?t+=o+"{"+g[I]+"}":r(I)&&(t+=a(o)+":"+i(o,I)+";");else if(!Array.isArray(I)||"string"!=typeof I[0]||null!=g&&void 0!==g[I[0]]){var C=c(e,g,I);switch(o){case"animation":case"animationName":t+=a(o)+":"+C+";";break;default:t+=o+"{"+C+"}"}}else for(var s=0;s<I.length;s++)r(I[s])&&(t+=a(o)+":"+i(o,I[s])+";")}return t}(e,g,l);case"function":if(void 0!==e){var n=s,o=l(e);return s=n,c(e,g,o)}}if(null==g)return l;var I=g[l];return void 0!==I?I:l}var s,d=/label:\s*([^\s;\n{]+)\s*(;|$)/g,u=function(e,g,l){if(1===e.length&&"object"==typeof e[0]&&null!==e[0]&&void 0!==e[0].styles)return e[0];var t=!0,n="";s=void 0;var o=e[0];null==o||void 0===o.raw?(t=!1,n+=c(l,g,o)):n+=o[0];for(var I=1;I<e.length;I++)n+=c(l,g,e[I]),t&&(n+=o[I]);d.lastIndex=0;for(var C,r="";null!==(C=d.exec(n));)r+="-"+C[1];var a=function(e){for(var g,l=0,t=0,n=e.length;n>=4;++t,n-=4)g=1540483477*(65535&(g=255&e.charCodeAt(t)|(255&e.charCodeAt(++t))<<8|(255&e.charCodeAt(++t))<<16|(255&e.charCodeAt(++t))<<24))+(59797*(g>>>16)<<16),l=1540483477*(65535&(g^=g>>>24))+(59797*(g>>>16)<<16)^1540483477*(65535&l)+(59797*(l>>>16)<<16);switch(n){case 3:l^=(255&e.charCodeAt(t+2))<<16;case 2:l^=(255&e.charCodeAt(t+1))<<8;case 1:l=1540483477*(65535&(l^=255&e.charCodeAt(t)))+(59797*(l>>>16)<<16)}return(((l=1540483477*(65535&(l^=l>>>13))+(59797*(l>>>16)<<16))^l>>>15)>>>0).toString(36)}(n)+r;return{name:a,styles:n,next:s}}},7278:(e,g,l)=>{"use strict";var t;l.d(g,{L:()=>I,j:()=>C});var n=l(7294),o=!!(t||(t=l.t(n,2))).useInsertionEffect&&(t||(t=l.t(n,2))).useInsertionEffect,I=o||function(e){return e()},C=o||n.useLayoutEffect},444:(e,g,l)=>{"use strict";function t(e,g,l){var t="";return l.split(" ").forEach((function(l){void 0!==e[l]?g.push(e[l]+";"):t+=l+" "})),t}l.d(g,{My:()=>o,fp:()=>t,hC:()=>n});var n=function(e,g,l){var t=e.key+"-"+g.name;!1===l&&void 0===e.registered[t]&&(e.registered[t]=g.styles)},o=function(e,g,l){n(e,g,l);var t=e.key+"-"+g.name;if(void 0===e.inserted[g.name]){var o=g;do{e.insert(g===o?"."+t:"",o,e.sheet,!0),o=o.next}while(void 0!==o)}}},4900:(e,g,l)=>{"use strict";var t=l(4836);g.Z=void 0;var n=t(l(4938)),o=l(5893),I=(0,n.default)((0,o.jsx)("path",{d:"M16.5 6v11.5c0 2.21-1.79 4-4 4s-4-1.79-4-4V5c0-1.38 1.12-2.5 2.5-2.5s2.5 1.12 2.5 2.5v10.5c0 .55-.45 1-1 1s-1-.45-1-1V6H10v9.5c0 1.38 1.12 2.5 2.5 2.5s2.5-1.12 2.5-2.5V5c0-2.21-1.79-4-4-4S7 2.79 7 5v12.5c0 3.04 2.46 5.5 5.5 5.5s5.5-2.46 5.5-5.5V6h-1.5z"}),"AttachFile");g.Z=I},7913:(e,g,l)=>{"use strict";var t=l(4836);g.Z=void 0;var n=t(l(4938)),o=l(5893),I=(0,n.default)((0,o.jsx)("path",{d:"M3 11h8V3H3v8zm2-6h4v4H5V5zM3 21h8v-8H3v8zm2-6h4v4H5v-4zm8-12v8h8V3h-8zm6 6h-4V5h4v4zm0 10h2v2h-2zm-6-6h2v2h-2zm2 2h2v2h-2zm-2 2h2v2h-2zm2 2h2v2h-2zm2-2h2v2h-2zm0-4h2v2h-2zm2 2h2v2h-2z"}),"QrCode");g.Z=I},4938:(e,g,l)=>{"use strict";Object.defineProperty(g,"__esModule",{value:!0}),Object.defineProperty(g,"default",{enumerable:!0,get:function(){return t.createSvgIcon}});var t=l(1699)},9617:(e,g,l)=>{"use strict";l.d(g,{Z:()=>N});var t=l(7462),n=l(3366),o=l(6535),I=l(9766),C=l(6268),r=l(8010),a=l(6523),i=l(1796);const c={black:"#000",white:"#fff"},s={50:"#fafafa",100:"#f5f5f5",200:"#eeeeee",300:"#e0e0e0",400:"#bdbdbd",500:"#9e9e9e",600:"#757575",700:"#616161",800:"#424242",900:"#212121",A100:"#f5f5f5",A200:"#eeeeee",A400:"#bdbdbd",A700:"#616161"},d={50:"#f3e5f5",100:"#e1bee7",200:"#ce93d8",300:"#ba68c8",400:"#ab47bc",500:"#9c27b0",600:"#8e24aa",700:"#7b1fa2",800:"#6a1b9a",900:"#4a148c",A100:"#ea80fc",A200:"#e040fb",A400:"#d500f9",A700:"#aa00ff"},u={50:"#ffebee",100:"#ffcdd2",200:"#ef9a9a",300:"#e57373",400:"#ef5350",500:"#f44336",600:"#e53935",700:"#d32f2f",800:"#c62828",900:"#b71c1c",A100:"#ff8a80",A200:"#ff5252",A400:"#ff1744",A700:"#d50000"},A={50:"#fff3e0",100:"#ffe0b2",200:"#ffcc80",300:"#ffb74d",400:"#ffa726",500:"#ff9800",600:"#fb8c00",700:"#f57c00",800:"#ef6c00",900:"#e65100",A100:"#ffd180",A200:"#ffab40",A400:"#ff9100",A700:"#ff6d00"},m={50:"#e3f2fd",100:"#bbdefb",200:"#90caf9",300:"#64b5f6",400:"#42a5f5",500:"#2196f3",600:"#1e88e5",700:"#1976d2",800:"#1565c0",900:"#0d47a1",A100:"#82b1ff",A200:"#448aff",A400:"#2979ff",A700:"#2962ff"},b={50:"#e1f5fe",100:"#b3e5fc",200:"#81d4fa",300:"#4fc3f7",400:"#29b6f6",500:"#03a9f4",600:"#039be5",700:"#0288d1",800:"#0277bd",900:"#01579b",A100:"#80d8ff",A200:"#40c4ff",A400:"#00b0ff",A700:"#0091ea"},p={50:"#e8f5e9",100:"#c8e6c9",200:"#a5d6a7",300:"#81c784",400:"#66bb6a",500:"#4caf50",600:"#43a047",700:"#388e3c",800:"#2e7d32",900:"#1b5e20",A100:"#b9f6ca",A200:"#69f0ae",A400:"#00e676",A700:"#00c853"},Z=["mode","contrastThreshold","tonalOffset"],h={text:{primary:"rgba(0, 0, 0, 0.87)",secondary:"rgba(0, 0, 0, 0.6)",disabled:"rgba(0, 0, 0, 0.38)"},divider:"rgba(0, 0, 0, 0.12)",background:{paper:c.white,default:c.white},action:{active:"rgba(0, 0, 0, 0.54)",hover:"rgba(0, 0, 0, 0.04)",hoverOpacity:.04,selected:"rgba(0, 0, 0, 0.08)",selectedOpacity:.08,disabled:"rgba(0, 0, 0, 0.26)",disabledBackground:"rgba(0, 0, 0, 0.12)",disabledOpacity:.38,focus:"rgba(0, 0, 0, 0.12)",focusOpacity:.12,activatedOpacity:.12}},G={text:{primary:c.white,secondary:"rgba(255, 255, 255, 0.7)",disabled:"rgba(255, 255, 255, 0.5)",icon:"rgba(255, 255, 255, 0.5)"},divider:"rgba(255, 255, 255, 0.12)",background:{paper:"#121212",default:"#121212"},action:{active:c.white,hover:"rgba(255, 255, 255, 0.08)",hoverOpacity:.08,selected:"rgba(255, 255, 255, 0.16)",selectedOpacity:.16,disabled:"rgba(255, 255, 255, 0.3)",disabledBackground:"rgba(255, 255, 255, 0.12)",disabledOpacity:.38,focus:"rgba(255, 255, 255, 0.12)",focusOpacity:.12,activatedOpacity:.24}};function y(e,g,l,t){const n=t.light||t,o=t.dark||1.5*t;e[g]||(e.hasOwnProperty(l)?e[g]=e[l]:"light"===g?e.light=(0,i.$n)(e.main,n):"dark"===g&&(e.dark=(0,i._j)(e.main,o)))}const B=["fontFamily","fontSize","fontWeightLight","fontWeightRegular","fontWeightMedium","fontWeightBold","htmlFontSize","allVariants","pxToRem"],S={textTransform:"uppercase"},V='"Roboto", "Helvetica", "Arial", sans-serif';function W(e,g){const l="function"==typeof g?g(e):g,{fontFamily:o=V,fontSize:C=14,fontWeightLight:r=300,fontWeightRegular:a=400,fontWeightMedium:i=500,fontWeightBold:c=700,htmlFontSize:s=16,allVariants:d,pxToRem:u}=l,A=(0,n.Z)(l,B),m=C/14,b=u||(e=>e/s*m+"rem"),p=(e,g,l,n,I)=>{return(0,t.Z)({fontFamily:o,fontWeight:e,fontSize:b(g),lineHeight:l},o===V?{letterSpacing:(C=n/g,Math.round(1e5*C)/1e5+"em")}:{},I,d);var C},Z={h1:p(r,96,1.167,-1.5),h2:p(r,60,1.2,-.5),h3:p(a,48,1.167,0),h4:p(a,34,1.235,.25),h5:p(a,24,1.334,0),h6:p(i,20,1.6,.15),subtitle1:p(a,16,1.75,.15),subtitle2:p(i,14,1.57,.1),body1:p(a,16,1.5,.15),body2:p(a,14,1.43,.15),button:p(i,14,1.75,.4,S),caption:p(a,12,1.66,.4),overline:p(a,12,2.66,1,S),inherit:{fontFamily:"inherit",fontWeight:"inherit",fontSize:"inherit",lineHeight:"inherit",letterSpacing:"inherit"}};return(0,I.Z)((0,t.Z)({htmlFontSize:s,pxToRem:b,fontFamily:o,fontSize:C,fontWeightLight:r,fontWeightRegular:a,fontWeightMedium:i,fontWeightBold:c},Z),A,{clone:!1})}function R(...e){return[`${e[0]}px ${e[1]}px ${e[2]}px ${e[3]}px rgba(0,0,0,0.2)`,`${e[4]}px ${e[5]}px ${e[6]}px ${e[7]}px rgba(0,0,0,0.14)`,`${e[8]}px ${e[9]}px ${e[10]}px ${e[11]}px rgba(0,0,0,0.12)`].join(",")}const f=["none",R(0,2,1,-1,0,1,1,0,0,1,3,0),R(0,3,1,-2,0,2,2,0,0,1,5,0),R(0,3,3,-2,0,3,4,0,0,1,8,0),R(0,2,4,-1,0,4,5,0,0,1,10,0),R(0,3,5,-1,0,5,8,0,0,1,14,0),R(0,3,5,-1,0,6,10,0,0,1,18,0),R(0,4,5,-2,0,7,10,1,0,2,16,1),R(0,5,5,-3,0,8,10,1,0,3,14,2),R(0,5,6,-3,0,9,12,1,0,3,16,2),R(0,6,6,-3,0,10,14,1,0,4,18,3),R(0,6,7,-4,0,11,15,1,0,4,20,3),R(0,7,8,-4,0,12,17,2,0,5,22,4),R(0,7,8,-4,0,13,19,2,0,5,24,4),R(0,7,9,-4,0,14,21,2,0,5,26,4),R(0,8,9,-5,0,15,22,2,0,6,28,5),R(0,8,10,-5,0,16,24,2,0,6,30,5),R(0,8,11,-5,0,17,26,2,0,6,32,5),R(0,9,11,-5,0,18,28,2,0,7,34,6),R(0,9,12,-6,0,19,29,2,0,7,36,6),R(0,10,13,-6,0,20,31,3,0,8,38,7),R(0,10,13,-6,0,21,33,3,0,8,40,7),R(0,10,14,-6,0,22,35,3,0,8,42,7),R(0,11,14,-7,0,23,36,3,0,9,44,8),R(0,11,15,-7,0,24,38,3,0,9,46,8)],v=["duration","easing","delay"],k={easeInOut:"cubic-bezier(0.4, 0, 0.2, 1)",easeOut:"cubic-bezier(0.0, 0, 0.2, 1)",easeIn:"cubic-bezier(0.4, 0, 1, 1)",sharp:"cubic-bezier(0.4, 0, 0.6, 1)"},X={shortest:150,shorter:200,short:250,standard:300,complex:375,enteringScreen:225,leavingScreen:195};function J(e){return`${Math.round(e)}ms`}function w(e){if(!e)return 0;const g=e/36;return Math.round(10*(4+15*g**.25+g/5))}function Y(e){const g=(0,t.Z)({},k,e.easing),l=(0,t.Z)({},X,e.duration);return(0,t.Z)({getAutoHeightDuration:w,create:(e=["all"],t={})=>{const{duration:o=l.standard,easing:I=g.easeInOut,delay:C=0}=t;return(0,n.Z)(t,v),(Array.isArray(e)?e:[e]).map((e=>`${e} ${"string"==typeof o?o:J(o)} ${I} ${"string"==typeof C?C:J(C)}`)).join(",")}},e,{easing:g,duration:l})}const H={mobileStepper:1e3,fab:1050,speedDial:1050,appBar:1100,drawer:1200,modal:1300,snackbar:1400,tooltip:1500},F=["breakpoints","mixins","spacing","palette","transitions","typography","shape"];const N=function(e={},...g){const{mixins:l={},palette:B={},transitions:S={},typography:V={}}=e,R=(0,n.Z)(e,F);if(e.vars)throw new Error((0,o.Z)(18));const v=function(e){const{mode:g="light",contrastThreshold:l=3,tonalOffset:C=.2}=e,r=(0,n.Z)(e,Z),a=e.primary||function(e="light"){return"dark"===e?{main:m[200],light:m[50],dark:m[400]}:{main:m[700],light:m[400],dark:m[800]}}(g),B=e.secondary||function(e="light"){return"dark"===e?{main:d[200],light:d[50],dark:d[400]}:{main:d[500],light:d[300],dark:d[700]}}(g),S=e.error||function(e="light"){return"dark"===e?{main:u[500],light:u[300],dark:u[700]}:{main:u[700],light:u[400],dark:u[800]}}(g),V=e.info||function(e="light"){return"dark"===e?{main:b[400],light:b[300],dark:b[700]}:{main:b[700],light:b[500],dark:b[900]}}(g),W=e.success||function(e="light"){return"dark"===e?{main:p[400],light:p[300],dark:p[700]}:{main:p[800],light:p[500],dark:p[900]}}(g),R=e.warning||function(e="light"){return"dark"===e?{main:A[400],light:A[300],dark:A[700]}:{main:"#ed6c02",light:A[500],dark:A[900]}}(g);function f(e){return(0,i.mi)(e,G.text.primary)>=l?G.text.primary:h.text.primary}const v=({color:e,name:g,mainShade:l=500,lightShade:n=300,darkShade:I=700})=>{if(!(e=(0,t.Z)({},e)).main&&e[l]&&(e.main=e[l]),!e.hasOwnProperty("main"))throw new Error((0,o.Z)(11,g?` (${g})`:"",l));if("string"!=typeof e.main)throw new Error((0,o.Z)(12,g?` (${g})`:"",JSON.stringify(e.main)));return y(e,"light",n,C),y(e,"dark",I,C),e.contrastText||(e.contrastText=f(e.main)),e},k={dark:G,light:h};return(0,I.Z)((0,t.Z)({common:(0,t.Z)({},c),mode:g,primary:v({color:a,name:"primary"}),secondary:v({color:B,name:"secondary",mainShade:"A400",lightShade:"A200",darkShade:"A700"}),error:v({color:S,name:"error"}),warning:v({color:R,name:"warning"}),info:v({color:V,name:"info"}),success:v({color:W,name:"success"}),grey:s,contrastThreshold:l,getContrastText:f,augmentColor:v,tonalOffset:C},k[g]),r)}(B),k=(0,C.Z)(e);let X=(0,I.Z)(k,{mixins:(J=k.breakpoints,w=l,(0,t.Z)({toolbar:{minHeight:56,[J.up("xs")]:{"@media (orientation: landscape)":{minHeight:48}},[J.up("sm")]:{minHeight:64}}},w)),palette:v,shadows:f.slice(),typography:W(v,V),transitions:Y(S),zIndex:(0,t.Z)({},H)});var J,w;return X=(0,I.Z)(X,R),X=g.reduce(((e,g)=>(0,I.Z)(e,g)),X),X.unstable_sxConfig=(0,t.Z)({},r.Z,null==R?void 0:R.unstable_sxConfig),X.unstable_sx=function(e){return(0,a.Z)({sx:e,theme:this})},X}},247:(e,g,l)=>{"use strict";l.d(g,{Z:()=>t});const t=(0,l(9617).Z)()},606:(e,g,l)=>{"use strict";l.d(g,{Z:()=>t});const t="$$material"},948:(e,g,l)=>{"use strict";l.d(g,{Dz:()=>C,FO:()=>I,ZP:()=>r});var t=l(2360),n=l(247),o=l(606);const I=e=>(0,t.x9)(e)&&"classes"!==e,C=t.x9,r=(0,t.ZP)({themeId:o.Z,defaultTheme:n.Z,rootShouldForwardProp:I})},1657:(e,g,l)=>{"use strict";l.d(g,{Z:()=>I});var t=l(7333),n=l(247),o=l(606);function I({props:e,name:g}){return(0,t.Z)({props:e,name:g,defaultTheme:n.Z,themeId:o.Z})}},8216:(e,g,l)=>{"use strict";l.d(g,{Z:()=>t});const t=l(4142).Z},5949:(e,g,l)=>{"use strict";l.d(g,{Z:()=>Z});var t=l(7462),n=l(7294),o=l(3366),I=l(512),C=l(4780),r=l(8216),a=l(1657),i=l(948),c=l(1588),s=l(4867);function d(e){return(0,s.Z)("MuiSvgIcon",e)}(0,c.Z)("MuiSvgIcon",["root","colorPrimary","colorSecondary","colorAction","colorError","colorDisabled","fontSizeInherit","fontSizeSmall","fontSizeMedium","fontSizeLarge"]);var u=l(5893);const A=["children","className","color","component","fontSize","htmlColor","inheritViewBox","titleAccess","viewBox"],m=(0,i.ZP)("svg",{name:"MuiSvgIcon",slot:"Root",overridesResolver:(e,g)=>{const{ownerState:l}=e;return[g.root,"inherit"!==l.color&&g[`color${(0,r.Z)(l.color)}`],g[`fontSize${(0,r.Z)(l.fontSize)}`]]}})((({theme:e,ownerState:g})=>{var l,t,n,o,I,C,r,a,i,c,s,d,u;return{userSelect:"none",width:"1em",height:"1em",display:"inline-block",fill:g.hasSvgAsChild?void 0:"currentColor",flexShrink:0,transition:null==(l=e.transitions)||null==(t=l.create)?void 0:t.call(l,"fill",{duration:null==(n=e.transitions)||null==(n=n.duration)?void 0:n.shorter}),fontSize:{inherit:"inherit",small:(null==(o=e.typography)||null==(I=o.pxToRem)?void 0:I.call(o,20))||"1.25rem",medium:(null==(C=e.typography)||null==(r=C.pxToRem)?void 0:r.call(C,24))||"1.5rem",large:(null==(a=e.typography)||null==(i=a.pxToRem)?void 0:i.call(a,35))||"2.1875rem"}[g.fontSize],color:null!=(c=null==(s=(e.vars||e).palette)||null==(s=s[g.color])?void 0:s.main)?c:{action:null==(d=(e.vars||e).palette)||null==(d=d.action)?void 0:d.active,disabled:null==(u=(e.vars||e).palette)||null==(u=u.action)?void 0:u.disabled,inherit:void 0}[g.color]}})),b=n.forwardRef((function(e,g){const l=(0,a.Z)({props:e,name:"MuiSvgIcon"}),{children:i,className:c,color:s="inherit",component:b="svg",fontSize:p="medium",htmlColor:Z,inheritViewBox:h=!1,titleAccess:G,viewBox:y="0 0 24 24"}=l,B=(0,o.Z)(l,A),S=n.isValidElement(i)&&"svg"===i.type,V=(0,t.Z)({},l,{color:s,component:b,fontSize:p,instanceFontSize:e.fontSize,inheritViewBox:h,viewBox:y,hasSvgAsChild:S}),W={};h||(W.viewBox=y);const R=(e=>{const{color:g,fontSize:l,classes:t}=e,n={root:["root","inherit"!==g&&`color${(0,r.Z)(g)}`,`fontSize${(0,r.Z)(l)}`]};return(0,C.Z)(n,d,t)})(V);return(0,u.jsxs)(m,(0,t.Z)({as:b,className:(0,I.Z)(R.root,c),focusable:"false",color:Z,"aria-hidden":!G||void 0,role:G?"img":void 0,ref:g},W,B,S&&i.props,{ownerState:V,children:[S?i.props.children:i,G?(0,u.jsx)("title",{children:G}):null]}))}));b.muiName="SvgIcon";const p=b;function Z(e,g){function l(l,n){return(0,u.jsx)(p,(0,t.Z)({"data-testid":`${g}Icon`,ref:n},l,{children:e}))}return l.muiName=p.muiName,n.memo(n.forwardRef(l))}},7144:(e,g,l)=>{"use strict";l.d(g,{Z:()=>t});const t=l(9336).Z},1699:(e,g,l)=>{"use strict";l.r(g),l.d(g,{capitalize:()=>n.Z,createChainedFunction:()=>o,createSvgIcon:()=>I.Z,debounce:()=>C.Z,deprecatedPropType:()=>r,isMuiElement:()=>a.Z,ownerDocument:()=>i.Z,ownerWindow:()=>c.Z,requirePropFactory:()=>s,setRef:()=>d,unstable_ClassNameGenerator:()=>G,unstable_useEnhancedEffect:()=>u.Z,unstable_useId:()=>A.Z,unsupportedProp:()=>m,useControlled:()=>b.Z,useEventCallback:()=>p.Z,useForkRef:()=>Z.Z,useIsFocusVisible:()=>h.Z});var t=l(7078),n=l(8216);const o=l(9064).Z;var I=l(5949),C=l(7144);const r=function(e,g){return()=>null};var a=l(8502),i=l(8038),c=l(5340);l(7462);const s=function(e,g){return()=>null},d=l(7960).Z;var u=l(8974),A=l(7909);const m=function(e,g,l,t,n){return null};var b=l(9299),p=l(2068),Z=l(1705),h=l(3511);const G={configure:e=>{t.Z.configure(e)}}},8502:(e,g,l)=>{"use strict";l.d(g,{Z:()=>n});var t=l(7294);const n=function(e,g){var l,n;return t.isValidElement(e)&&-1!==g.indexOf(null!=(l=e.type.muiName)?l:null==(n=e.type)||null==(n=n._payload)||null==(n=n.value)?void 0:n.muiName)}},8038:(e,g,l)=>{"use strict";l.d(g,{Z:()=>t});const t=l(2690).Z},5340:(e,g,l)=>{"use strict";l.d(g,{Z:()=>t});const t=l(4161).Z},9299:(e,g,l)=>{"use strict";l.d(g,{Z:()=>t});const t=l(9032).Z},8974:(e,g,l)=>{"use strict";l.d(g,{Z:()=>t});const t=l(3546).Z},2068:(e,g,l)=>{"use strict";l.d(g,{Z:()=>t});const t=l(9948).Z},1705:(e,g,l)=>{"use strict";l.d(g,{Z:()=>t});const t=l(3703).Z},7909:(e,g,l)=>{"use strict";l.d(g,{Z:()=>t});const t=l(2996).Z},3511:(e,g,l)=>{"use strict";l.d(g,{Z:()=>c});var t=l(7294);let n,o=!0,I=!1;const C={text:!0,search:!0,url:!0,tel:!0,email:!0,password:!0,number:!0,date:!0,month:!0,week:!0,time:!0,datetime:!0,"datetime-local":!0};function r(e){e.metaKey||e.altKey||e.ctrlKey||(o=!0)}function a(){o=!1}function i(){"hidden"===this.visibilityState&&I&&(o=!0)}const c=function(){const e=t.useCallback((e=>{var g;null!=e&&((g=e.ownerDocument).addEventListener("keydown",r,!0),g.addEventListener("mousedown",a,!0),g.addEventListener("pointerdown",a,!0),g.addEventListener("touchstart",a,!0),g.addEventListener("visibilitychange",i,!0))}),[]),g=t.useRef(!1);return{isFocusVisibleRef:g,onFocus:function(e){return!!function(e){const{target:g}=e;try{return g.matches(":focus-visible")}catch(e){}return o||function(e){const{type:g,tagName:l}=e;return!("INPUT"!==l||!C[g]||e.readOnly)||"TEXTAREA"===l&&!e.readOnly||!!e.isContentEditable}(g)}(e)&&(g.current=!0,!0)},onBlur:function(){return!!g.current&&(I=!0,window.clearTimeout(n),n=window.setTimeout((()=>{I=!1}),100),g.current=!1,!0)},ref:e}}},5408:(e,g,l)=>{"use strict";l.d(g,{L7:()=>r,P$:()=>i,VO:()=>n,W8:()=>C,dt:()=>a,k9:()=>I});var t=l(9766);const n={xs:0,sm:600,md:900,lg:1200,xl:1536},o={keys:["xs","sm","md","lg","xl"],up:e=>`@media (min-width:${n[e]}px)`};function I(e,g,l){const t=e.theme||{};if(Array.isArray(g)){const e=t.breakpoints||o;return g.reduce(((t,n,o)=>(t[e.up(e.keys[o])]=l(g[o]),t)),{})}if("object"==typeof g){const e=t.breakpoints||o;return Object.keys(g).reduce(((t,o)=>{if(-1!==Object.keys(e.values||n).indexOf(o))t[e.up(o)]=l(g[o],o);else{const e=o;t[e]=g[e]}return t}),{})}return l(g)}function C(e={}){var g;return(null==(g=e.keys)?void 0:g.reduce(((g,l)=>(g[e.up(l)]={},g)),{}))||{}}function r(e,g){return e.reduce(((e,g)=>{const l=e[g];return(!l||0===Object.keys(l).length)&&delete e[g],e}),g)}function a(e,...g){const l=C(e),n=[l,...g].reduce(((e,g)=>(0,t.Z)(e,g)),{});return r(Object.keys(l),n)}function i({values:e,breakpoints:g,base:l}){const t=l||function(e,g){if("object"!=typeof e)return{};const l={},t=Object.keys(g);return Array.isArray(e)?t.forEach(((g,t)=>{t<e.length&&(l[g]=!0)})):t.forEach((g=>{null!=e[g]&&(l[g]=!0)})),l}(e,g),n=Object.keys(t);if(0===n.length)return e;let o;return n.reduce(((g,l,t)=>(Array.isArray(e)?(g[l]=null!=e[t]?e[t]:e[o],o=t):"object"==typeof e?(g[l]=null!=e[l]?e[l]:e[o],o=l):g[l]=e,g)),{})}},1796:(e,g,l)=>{"use strict";l.d(g,{$n:()=>c,Fq:()=>a,_j:()=>i,mi:()=>r});var t=l(6535);function n(e,g=0,l=1){return Math.min(Math.max(g,e),l)}function o(e){if(e.type)return e;if("#"===e.charAt(0))return o(function(e){e=e.slice(1);const g=new RegExp(`.{1,${e.length>=6?2:1}}`,"g");let l=e.match(g);return l&&1===l[0].length&&(l=l.map((e=>e+e))),l?`rgb${4===l.length?"a":""}(${l.map(((e,g)=>g<3?parseInt(e,16):Math.round(parseInt(e,16)/255*1e3)/1e3)).join(", ")})`:""}(e));const g=e.indexOf("("),l=e.substring(0,g);if(-1===["rgb","rgba","hsl","hsla","color"].indexOf(l))throw new Error((0,t.Z)(9,e));let n,I=e.substring(g+1,e.length-1);if("color"===l){if(I=I.split(" "),n=I.shift(),4===I.length&&"/"===I[3].charAt(0)&&(I[3]=I[3].slice(1)),-1===["srgb","display-p3","a98-rgb","prophoto-rgb","rec-2020"].indexOf(n))throw new Error((0,t.Z)(10,n))}else I=I.split(",");return I=I.map((e=>parseFloat(e))),{type:l,values:I,colorSpace:n}}function I(e){const{type:g,colorSpace:l}=e;let{values:t}=e;return-1!==g.indexOf("rgb")?t=t.map(((e,g)=>g<3?parseInt(e,10):e)):-1!==g.indexOf("hsl")&&(t[1]=`${t[1]}%`,t[2]=`${t[2]}%`),t=-1!==g.indexOf("color")?`${l} ${t.join(" ")}`:`${t.join(", ")}`,`${g}(${t})`}function C(e){let g="hsl"===(e=o(e)).type||"hsla"===e.type?o(function(e){e=o(e);const{values:g}=e,l=g[0],t=g[1]/100,n=g[2]/100,C=t*Math.min(n,1-n),r=(e,g=(e+l/30)%12)=>n-C*Math.max(Math.min(g-3,9-g,1),-1);let a="rgb";const i=[Math.round(255*r(0)),Math.round(255*r(8)),Math.round(255*r(4))];return"hsla"===e.type&&(a+="a",i.push(g[3])),I({type:a,values:i})}(e)).values:e.values;return g=g.map((g=>("color"!==e.type&&(g/=255),g<=.03928?g/12.92:((g+.055)/1.055)**2.4))),Number((.2126*g[0]+.7152*g[1]+.0722*g[2]).toFixed(3))}function r(e,g){const l=C(e),t=C(g);return(Math.max(l,t)+.05)/(Math.min(l,t)+.05)}function a(e,g){return e=o(e),g=n(g),"rgb"!==e.type&&"hsl"!==e.type||(e.type+="a"),"color"===e.type?e.values[3]=`/${g}`:e.values[3]=g,I(e)}function i(e,g){if(e=o(e),g=n(g),-1!==e.type.indexOf("hsl"))e.values[2]*=1-g;else if(-1!==e.type.indexOf("rgb")||-1!==e.type.indexOf("color"))for(let l=0;l<3;l+=1)e.values[l]*=1-g;return I(e)}function c(e,g){if(e=o(e),g=n(g),-1!==e.type.indexOf("hsl"))e.values[2]+=(100-e.values[2])*g;else if(-1!==e.type.indexOf("rgb"))for(let l=0;l<3;l+=1)e.values[l]+=(255-e.values[l])*g;else if(-1!==e.type.indexOf("color"))for(let l=0;l<3;l+=1)e.values[l]+=(1-e.values[l])*g;return I(e)}},2360:(e,g,l)=>{"use strict";l.d(g,{ZP:()=>x,x9:()=>w});var t=l(3366),n=l(7462),o=l(7294),I=l(5042),C=/^((children|dangerouslySetInnerHTML|key|ref|autoFocus|defaultValue|defaultChecked|innerHTML|suppressContentEditableWarning|suppressHydrationWarning|valueLink|abbr|accept|acceptCharset|accessKey|action|allow|allowUserMedia|allowPaymentRequest|allowFullScreen|allowTransparency|alt|async|autoComplete|autoPlay|capture|cellPadding|cellSpacing|challenge|charSet|checked|cite|classID|className|cols|colSpan|content|contentEditable|contextMenu|controls|controlsList|coords|crossOrigin|data|dateTime|decoding|default|defer|dir|disabled|disablePictureInPicture|download|draggable|encType|enterKeyHint|form|formAction|formEncType|formMethod|formNoValidate|formTarget|frameBorder|headers|height|hidden|high|href|hrefLang|htmlFor|httpEquiv|id|inputMode|integrity|is|keyParams|keyType|kind|label|lang|list|loading|loop|low|marginHeight|marginWidth|max|maxLength|media|mediaGroup|method|min|minLength|multiple|muted|name|nonce|noValidate|open|optimum|pattern|placeholder|playsInline|poster|preload|profile|radioGroup|readOnly|referrerPolicy|rel|required|reversed|role|rows|rowSpan|sandbox|scope|scoped|scrolling|seamless|selected|shape|size|sizes|slot|span|spellCheck|src|srcDoc|srcLang|srcSet|start|step|style|summary|tabIndex|target|title|translate|type|useMap|value|width|wmode|wrap|about|datatype|inlist|prefix|property|resource|typeof|vocab|autoCapitalize|autoCorrect|autoSave|color|incremental|fallback|inert|itemProp|itemScope|itemType|itemID|itemRef|on|option|results|security|unselectable|accentHeight|accumulate|additive|alignmentBaseline|allowReorder|alphabetic|amplitude|arabicForm|ascent|attributeName|attributeType|autoReverse|azimuth|baseFrequency|baselineShift|baseProfile|bbox|begin|bias|by|calcMode|capHeight|clip|clipPathUnits|clipPath|clipRule|colorInterpolation|colorInterpolationFilters|colorProfile|colorRendering|contentScriptType|contentStyleType|cursor|cx|cy|d|decelerate|descent|diffuseConstant|direction|display|divisor|dominantBaseline|dur|dx|dy|edgeMode|elevation|enableBackground|end|exponent|externalResourcesRequired|fill|fillOpacity|fillRule|filter|filterRes|filterUnits|floodColor|floodOpacity|focusable|fontFamily|fontSize|fontSizeAdjust|fontStretch|fontStyle|fontVariant|fontWeight|format|from|fr|fx|fy|g1|g2|glyphName|glyphOrientationHorizontal|glyphOrientationVertical|glyphRef|gradientTransform|gradientUnits|hanging|horizAdvX|horizOriginX|ideographic|imageRendering|in|in2|intercept|k|k1|k2|k3|k4|kernelMatrix|kernelUnitLength|kerning|keyPoints|keySplines|keyTimes|lengthAdjust|letterSpacing|lightingColor|limitingConeAngle|local|markerEnd|markerMid|markerStart|markerHeight|markerUnits|markerWidth|mask|maskContentUnits|maskUnits|mathematical|mode|numOctaves|offset|opacity|operator|order|orient|orientation|origin|overflow|overlinePosition|overlineThickness|panose1|paintOrder|pathLength|patternContentUnits|patternTransform|patternUnits|pointerEvents|points|pointsAtX|pointsAtY|pointsAtZ|preserveAlpha|preserveAspectRatio|primitiveUnits|r|radius|refX|refY|renderingIntent|repeatCount|repeatDur|requiredExtensions|requiredFeatures|restart|result|rotate|rx|ry|scale|seed|shapeRendering|slope|spacing|specularConstant|specularExponent|speed|spreadMethod|startOffset|stdDeviation|stemh|stemv|stitchTiles|stopColor|stopOpacity|strikethroughPosition|strikethroughThickness|string|stroke|strokeDasharray|strokeDashoffset|strokeLinecap|strokeLinejoin|strokeMiterlimit|strokeOpacity|strokeWidth|surfaceScale|systemLanguage|tableValues|targetX|targetY|textAnchor|textDecoration|textRendering|textLength|to|transform|u1|u2|underlinePosition|underlineThickness|unicode|unicodeBidi|unicodeRange|unitsPerEm|vAlphabetic|vHanging|vIdeographic|vMathematical|values|vectorEffect|version|vertAdvY|vertOriginX|vertOriginY|viewBox|viewTarget|visibility|widths|wordSpacing|writingMode|x|xHeight|x1|x2|xChannelSelector|xlinkActuate|xlinkArcrole|xlinkHref|xlinkRole|xlinkShow|xlinkTitle|xlinkType|xmlBase|xmlns|xmlnsXlink|xmlLang|xmlSpace|y|y1|y2|yChannelSelector|z|zoomAndPan|for|class|autofocus)|(([Dd][Aa][Tt][Aa]|[Aa][Rr][Ii][Aa]|x)-.*))$/,r=(0,I.Z)((function(e){return C.test(e)||111===e.charCodeAt(0)&&110===e.charCodeAt(1)&&e.charCodeAt(2)<91})),a=l(5260),i=l(444),c=l(6797),s=l(7278),d=r,u=function(e){return"theme"!==e},A=function(e){return"string"==typeof e&&e.charCodeAt(0)>96?d:u},m=function(e,g,l){var t;if(g){var n=g.shouldForwardProp;t=e.__emotion_forwardProp&&n?function(g){return e.__emotion_forwardProp(g)&&n(g)}:n}return"function"!=typeof t&&l&&(t=e.__emotion_forwardProp),t},b=function(e){var g=e.cache,l=e.serialized,t=e.isStringTag;return(0,i.hC)(g,l,t),(0,s.L)((function(){return(0,i.My)(g,l,t)})),null},p=function e(g,l){var t,I,C=g.__emotion_real===g,r=C&&g.__emotion_base||g;void 0!==l&&(t=l.label,I=l.target);var s=m(g,l,C),d=s||A(r),u=!d("as");return function(){var p=arguments,Z=C&&void 0!==g.__emotion_styles?g.__emotion_styles.slice(0):[];if(void 0!==t&&Z.push("label:"+t+";"),null==p[0]||void 0===p[0].raw)Z.push.apply(Z,p);else{Z.push(p[0][0]);for(var h=p.length,G=1;G<h;G++)Z.push(p[G],p[0][G])}var y=(0,a.w)((function(e,g,l){var t=u&&e.as||r,n="",C=[],m=e;if(null==e.theme){for(var p in m={},e)m[p]=e[p];m.theme=o.useContext(a.T)}"string"==typeof e.className?n=(0,i.fp)(g.registered,C,e.className):null!=e.className&&(n=e.className+" ");var h=(0,c.O)(Z.concat(C),g.registered,m);n+=g.key+"-"+h.name,void 0!==I&&(n+=" "+I);var G=u&&void 0===s?A(t):d,y={};for(var B in e)u&&"as"===B||G(B)&&(y[B]=e[B]);return y.className=n,y.ref=l,o.createElement(o.Fragment,null,o.createElement(b,{cache:g,serialized:h,isStringTag:"string"==typeof t}),o.createElement(t,y))}));return y.displayName=void 0!==t?t:"Styled("+("string"==typeof r?r:r.displayName||r.name||"Component")+")",y.defaultProps=g.defaultProps,y.__emotion_real=y,y.__emotion_base=r,y.__emotion_styles=Z,y.__emotion_forwardProp=s,Object.defineProperty(y,"toString",{value:function(){return"."+I}}),y.withComponent=function(g,t){return e(g,(0,n.Z)({},l,t,{shouldForwardProp:m(y,t,!0)})).apply(void 0,Z)},y}}.bind();["a","abbr","address","area","article","aside","audio","b","base","bdi","bdo","big","blockquote","body","br","button","canvas","caption","cite","code","col","colgroup","data","datalist","dd","del","details","dfn","dialog","div","dl","dt","em","embed","fieldset","figcaption","figure","footer","form","h1","h2","h3","h4","h5","h6","head","header","hgroup","hr","html","i","iframe","img","input","ins","kbd","keygen","label","legend","li","link","main","map","mark","marquee","menu","menuitem","meta","meter","nav","noscript","object","ol","optgroup","option","output","p","param","picture","pre","progress","q","rp","rt","ruby","s","samp","script","section","select","small","source","span","strong","style","sub","summary","sup","table","tbody","td","textarea","tfoot","th","thead","time","title","tr","track","u","ul","var","video","wbr","circle","clipPath","defs","ellipse","foreignObject","g","image","line","linearGradient","mask","path","pattern","polygon","polyline","radialGradient","rect","stop","svg","text","tspan"].forEach((function(e){p[e]=p(e)}));const Z=(e,g)=>{Array.isArray(e.__emotion_styles)&&(e.__emotion_styles=g(e.__emotion_styles))};var h=l(9766),G=l(6268),y=l(4142);const B=["variant"];function S(e){return 0===e.length}function V(e){const{variant:g}=e,l=(0,t.Z)(e,B);let n=g||"";return Object.keys(l).sort().forEach((g=>{n+="color"===g?S(n)?e[g]:(0,y.Z)(e[g]):`${S(n)?g:(0,y.Z)(g)}${(0,y.Z)(e[g].toString())}`})),n}var W=l(6523);const R=["name","slot","skipVariantsResolver","skipSx","overridesResolver"],f=(e,g)=>g.components&&g.components[e]&&g.components[e].styleOverrides?g.components[e].styleOverrides:null,v=e=>{let g=0;const l={};return e&&e.forEach((e=>{let t="";"function"==typeof e.props?(t=`callback${g}`,g+=1):t=V(e.props),l[t]=e.style})),l},k=(e,g)=>{let l=[];return g&&g.components&&g.components[e]&&g.components[e].variants&&(l=g.components[e].variants),v(l)},X=(e,g,l)=>{const{ownerState:t={}}=e,o=[];let I=0;return l&&l.forEach((l=>{let C=!0;if("function"==typeof l.props){const g=(0,n.Z)({},e,t);C=l.props(g)}else Object.keys(l.props).forEach((g=>{t[g]!==l.props[g]&&e[g]!==l.props[g]&&(C=!1)}));C&&("function"==typeof l.props?o.push(g[`callback${I}`]):o.push(g[V(l.props)])),"function"==typeof l.props&&(I+=1)})),o},J=(e,g,l,t)=>{var n;const o=null==l||null==(n=l.components)||null==(n=n[t])?void 0:n.variants;return X(e,g,o)};function w(e){return"ownerState"!==e&&"theme"!==e&&"sx"!==e&&"as"!==e}const Y=(0,G.Z)(),H=e=>e?e.charAt(0).toLowerCase()+e.slice(1):e;function F({defaultTheme:e,theme:g,themeId:l}){return t=g,0===Object.keys(t).length?e:g[l]||g;var t}function N(e){return e?(g,l)=>l[e]:null}const K=({styledArg:e,props:g,defaultTheme:l,themeId:t})=>{const o=e((0,n.Z)({},g,{theme:F((0,n.Z)({},g,{defaultTheme:l,themeId:t}))}));let I;return o&&o.variants&&(I=o.variants,delete o.variants),I?[o,...X(g,v(I),I)]:o};function x(e={}){const{themeId:g,defaultTheme:l=Y,rootShouldForwardProp:o=w,slotShouldForwardProp:I=w}=e,C=e=>(0,W.Z)((0,n.Z)({},e,{theme:F((0,n.Z)({},e,{defaultTheme:l,themeId:g}))}));return C.__mui_systemSx=!0,(e,r={})=>{Z(e,(e=>e.filter((e=>!(null!=e&&e.__mui_systemSx)))));const{name:a,slot:i,skipVariantsResolver:c,skipSx:s,overridesResolver:d=N(H(i))}=r,u=(0,t.Z)(r,R),A=void 0!==c?c:i&&"Root"!==i&&"root"!==i||!1,m=s||!1;let b=w;"Root"===i||"root"===i?b=o:i?b=I:function(e){return"string"==typeof e&&e.charCodeAt(0)>96}(e)&&(b=void 0);const G=function(e,g){return p(e,g)}(e,(0,n.Z)({shouldForwardProp:b,label:void 0},u)),y=(t,...o)=>{const I=o?o.map((e=>{if("function"==typeof e&&e.__emotion_real!==e)return t=>K({styledArg:e,props:t,defaultTheme:l,themeId:g});if((0,h.P)(e)){let g,l=e;return e&&e.variants&&(g=e.variants,delete l.variants,l=l=>{let t=e;return X(l,v(g),g).forEach((e=>{t=(0,h.Z)(t,e)})),t}),l}return e})):[];let r=t;if((0,h.P)(t)){let e;t&&t.variants&&(e=t.variants,delete r.variants,r=g=>{let l=t;return X(g,v(e),e).forEach((e=>{l=(0,h.Z)(l,e)})),l})}else"function"==typeof t&&t.__emotion_real!==t&&(r=e=>K({styledArg:t,props:e,defaultTheme:l,themeId:g}));a&&d&&I.push((e=>{const t=F((0,n.Z)({},e,{defaultTheme:l,themeId:g})),o=f(a,t);if(o){const g={};return Object.entries(o).forEach((([l,o])=>{g[l]="function"==typeof o?o((0,n.Z)({},e,{theme:t})):o})),d(e,g)}return null})),a&&!A&&I.push((e=>{const t=F((0,n.Z)({},e,{defaultTheme:l,themeId:g}));return J(e,k(a,t),t,a)})),m||I.push(C);const i=I.length-o.length;if(Array.isArray(t)&&i>0){const e=new Array(i).fill("");r=[...t,...e],r.raw=[...t.raw,...e]}const c=G(r,...I);return e.muiName&&(c.muiName=e.muiName),c};return G.withConfig&&(y.withConfig=G.withConfig),y}}},6268:(e,g,l)=>{"use strict";l.d(g,{Z:()=>s});var t=l(7462),n=l(3366),o=l(9766);const I=["values","unit","step"],C={borderRadius:4};var r=l(2605),a=l(6523),i=l(8010);const c=["breakpoints","palette","spacing","shape"],s=function(e={},...g){const{breakpoints:l={},palette:s={},spacing:d,shape:u={}}=e,A=(0,n.Z)(e,c),m=function(e){const{values:g={xs:0,sm:600,md:900,lg:1200,xl:1536},unit:l="px",step:o=5}=e,C=(0,n.Z)(e,I),r=(e=>{const g=Object.keys(e).map((g=>({key:g,val:e[g]})))||[];return g.sort(((e,g)=>e.val-g.val)),g.reduce(((e,g)=>(0,t.Z)({},e,{[g.key]:g.val})),{})})(g),a=Object.keys(r);function i(e){return`@media (min-width:${"number"==typeof g[e]?g[e]:e}${l})`}function c(e){return`@media (max-width:${("number"==typeof g[e]?g[e]:e)-o/100}${l})`}function s(e,t){const n=a.indexOf(t);return`@media (min-width:${"number"==typeof g[e]?g[e]:e}${l}) and (max-width:${(-1!==n&&"number"==typeof g[a[n]]?g[a[n]]:t)-o/100}${l})`}return(0,t.Z)({keys:a,values:r,up:i,down:c,between:s,only:function(e){return a.indexOf(e)+1<a.length?s(e,a[a.indexOf(e)+1]):i(e)},not:function(e){const g=a.indexOf(e);return 0===g?i(a[1]):g===a.length-1?c(a[g]):s(e,a[a.indexOf(e)+1]).replace("@media","@media not all and")},unit:l},C)}(l),b=function(e=8){if(e.mui)return e;const g=(0,r.hB)({spacing:e}),l=(...e)=>(0===e.length?[1]:e).map((e=>{const l=g(e);return"number"==typeof l?`${l}px`:l})).join(" ");return l.mui=!0,l}(d);let p=(0,o.Z)({breakpoints:m,direction:"ltr",components:{},palette:(0,t.Z)({mode:"light"},s),spacing:b,shape:(0,t.Z)({},C,u)},A);return p=g.reduce(((e,g)=>(0,o.Z)(e,g)),p),p.unstable_sxConfig=(0,t.Z)({},i.Z,null==A?void 0:A.unstable_sxConfig),p.unstable_sx=function(e){return(0,a.Z)({sx:e,theme:this})},p}},7730:(e,g,l)=>{"use strict";l.d(g,{Z:()=>n});var t=l(9766);const n=function(e,g){return g?(0,t.Z)(e,g,{clone:!1}):e}},2605:(e,g,l)=>{"use strict";l.d(g,{hB:()=>u,eI:()=>d,NA:()=>A,e6:()=>b,o3:()=>p});var t=l(5408),n=l(4844),o=l(7730);const I={m:"margin",p:"padding"},C={t:"Top",r:"Right",b:"Bottom",l:"Left",x:["Left","Right"],y:["Top","Bottom"]},r={marginX:"mx",marginY:"my",paddingX:"px",paddingY:"py"},a=function(e){const g={};return e=>(void 0===g[e]&&(g[e]=(e=>{if(e.length>2){if(!r[e])return[e];e=r[e]}const[g,l]=e.split(""),t=I[g],n=C[l]||"";return Array.isArray(n)?n.map((e=>t+e)):[t+n]})(e)),g[e])}(),i=["m","mt","mr","mb","ml","mx","my","margin","marginTop","marginRight","marginBottom","marginLeft","marginX","marginY","marginInline","marginInlineStart","marginInlineEnd","marginBlock","marginBlockStart","marginBlockEnd"],c=["p","pt","pr","pb","pl","px","py","padding","paddingTop","paddingRight","paddingBottom","paddingLeft","paddingX","paddingY","paddingInline","paddingInlineStart","paddingInlineEnd","paddingBlock","paddingBlockStart","paddingBlockEnd"],s=[...i,...c];function d(e,g,l,t){var o;const I=null!=(o=(0,n.DW)(e,g,!1))?o:l;return"number"==typeof I?e=>"string"==typeof e?e:I*e:Array.isArray(I)?e=>"string"==typeof e?e:I[e]:"function"==typeof I?I:()=>{}}function u(e){return d(e,"spacing",8)}function A(e,g){if("string"==typeof g||null==g)return g;const l=e(Math.abs(g));return g>=0?l:"number"==typeof l?-l:`-${l}`}function m(e,g){const l=u(e.theme);return Object.keys(e).map((n=>function(e,g,l,n){if(-1===g.indexOf(l))return null;const o=function(e,g){return l=>e.reduce(((e,t)=>(e[t]=A(g,l),e)),{})}(a(l),n),I=e[l];return(0,t.k9)(e,I,o)}(e,g,n,l))).reduce(o.Z,{})}function b(e){return m(e,i)}function p(e){return m(e,c)}function Z(e){return m(e,s)}b.propTypes={},b.filterProps=i,p.propTypes={},p.filterProps=c,Z.propTypes={},Z.filterProps=s},4844:(e,g,l)=>{"use strict";l.d(g,{DW:()=>o,Jq:()=>I,ZP:()=>C});var t=l(4142),n=l(5408);function o(e,g,l=!0){if(!g||"string"!=typeof g)return null;if(e&&e.vars&&l){const l=`vars.${g}`.split(".").reduce(((e,g)=>e&&e[g]?e[g]:null),e);if(null!=l)return l}return g.split(".").reduce(((e,g)=>e&&null!=e[g]?e[g]:null),e)}function I(e,g,l,t=l){let n;return n="function"==typeof e?e(l):Array.isArray(e)?e[l]||t:o(e,l)||t,g&&(n=g(n,t,e)),n}const C=function(e){const{prop:g,cssProperty:l=e.prop,themeKey:C,transform:r}=e,a=e=>{if(null==e[g])return null;const a=e[g],i=o(e.theme,C)||{};return(0,n.k9)(e,a,(e=>{let n=I(i,r,e);return e===n&&"string"==typeof e&&(n=I(i,r,`${g}${"default"===e?"":(0,t.Z)(e)}`,e)),!1===l?n:{[l]:n}}))};return a.propTypes={},a.filterProps=[g],a}},8010:(e,g,l)=>{"use strict";l.d(g,{Z:()=>Y});var t=l(2605),n=l(4844),o=l(7730);const I=function(...e){const g=e.reduce(((e,g)=>(g.filterProps.forEach((l=>{e[l]=g})),e)),{}),l=e=>Object.keys(e).reduce(((l,t)=>g[t]?(0,o.Z)(l,g[t](e)):l),{});return l.propTypes={},l.filterProps=e.reduce(((e,g)=>e.concat(g.filterProps)),[]),l};var C=l(5408);function r(e){return"number"!=typeof e?e:`${e}px solid`}function a(e,g){return(0,n.ZP)({prop:e,themeKey:"borders",transform:g})}const i=a("border",r),c=a("borderTop",r),s=a("borderRight",r),d=a("borderBottom",r),u=a("borderLeft",r),A=a("borderColor"),m=a("borderTopColor"),b=a("borderRightColor"),p=a("borderBottomColor"),Z=a("borderLeftColor"),h=a("outline",r),G=a("outlineColor"),y=e=>{if(void 0!==e.borderRadius&&null!==e.borderRadius){const g=(0,t.eI)(e.theme,"shape.borderRadius",4,"borderRadius"),l=e=>({borderRadius:(0,t.NA)(g,e)});return(0,C.k9)(e,e.borderRadius,l)}return null};y.propTypes={},y.filterProps=["borderRadius"],I(i,c,s,d,u,A,m,b,p,Z,y,h,G);const B=e=>{if(void 0!==e.gap&&null!==e.gap){const g=(0,t.eI)(e.theme,"spacing",8,"gap"),l=e=>({gap:(0,t.NA)(g,e)});return(0,C.k9)(e,e.gap,l)}return null};B.propTypes={},B.filterProps=["gap"];const S=e=>{if(void 0!==e.columnGap&&null!==e.columnGap){const g=(0,t.eI)(e.theme,"spacing",8,"columnGap"),l=e=>({columnGap:(0,t.NA)(g,e)});return(0,C.k9)(e,e.columnGap,l)}return null};S.propTypes={},S.filterProps=["columnGap"];const V=e=>{if(void 0!==e.rowGap&&null!==e.rowGap){const g=(0,t.eI)(e.theme,"spacing",8,"rowGap"),l=e=>({rowGap:(0,t.NA)(g,e)});return(0,C.k9)(e,e.rowGap,l)}return null};function W(e,g){return"grey"===g?g:e}function R(e){return e<=1&&0!==e?100*e+"%":e}V.propTypes={},V.filterProps=["rowGap"],I(B,S,V,(0,n.ZP)({prop:"gridColumn"}),(0,n.ZP)({prop:"gridRow"}),(0,n.ZP)({prop:"gridAutoFlow"}),(0,n.ZP)({prop:"gridAutoColumns"}),(0,n.ZP)({prop:"gridAutoRows"}),(0,n.ZP)({prop:"gridTemplateColumns"}),(0,n.ZP)({prop:"gridTemplateRows"}),(0,n.ZP)({prop:"gridTemplateAreas"}),(0,n.ZP)({prop:"gridArea"})),I((0,n.ZP)({prop:"color",themeKey:"palette",transform:W}),(0,n.ZP)({prop:"bgcolor",cssProperty:"backgroundColor",themeKey:"palette",transform:W}),(0,n.ZP)({prop:"backgroundColor",themeKey:"palette",transform:W}));const f=(0,n.ZP)({prop:"width",transform:R}),v=e=>{if(void 0!==e.maxWidth&&null!==e.maxWidth){const g=g=>{var l,t;const n=(null==(l=e.theme)||null==(l=l.breakpoints)||null==(l=l.values)?void 0:l[g])||C.VO[g];return n?"px"!==(null==(t=e.theme)||null==(t=t.breakpoints)?void 0:t.unit)?{maxWidth:`${n}${e.theme.breakpoints.unit}`}:{maxWidth:n}:{maxWidth:R(g)}};return(0,C.k9)(e,e.maxWidth,g)}return null};v.filterProps=["maxWidth"];const k=(0,n.ZP)({prop:"minWidth",transform:R}),X=(0,n.ZP)({prop:"height",transform:R}),J=(0,n.ZP)({prop:"maxHeight",transform:R}),w=(0,n.ZP)({prop:"minHeight",transform:R}),Y=((0,n.ZP)({prop:"size",cssProperty:"width",transform:R}),(0,n.ZP)({prop:"size",cssProperty:"height",transform:R}),I(f,v,k,X,J,w,(0,n.ZP)({prop:"boxSizing"})),{border:{themeKey:"borders",transform:r},borderTop:{themeKey:"borders",transform:r},borderRight:{themeKey:"borders",transform:r},borderBottom:{themeKey:"borders",transform:r},borderLeft:{themeKey:"borders",transform:r},borderColor:{themeKey:"palette"},borderTopColor:{themeKey:"palette"},borderRightColor:{themeKey:"palette"},borderBottomColor:{themeKey:"palette"},borderLeftColor:{themeKey:"palette"},outline:{themeKey:"borders",transform:r},outlineColor:{themeKey:"palette"},borderRadius:{themeKey:"shape.borderRadius",style:y},color:{themeKey:"palette",transform:W},bgcolor:{themeKey:"palette",cssProperty:"backgroundColor",transform:W},backgroundColor:{themeKey:"palette",transform:W},p:{style:t.o3},pt:{style:t.o3},pr:{style:t.o3},pb:{style:t.o3},pl:{style:t.o3},px:{style:t.o3},py:{style:t.o3},padding:{style:t.o3},paddingTop:{style:t.o3},paddingRight:{style:t.o3},paddingBottom:{style:t.o3},paddingLeft:{style:t.o3},paddingX:{style:t.o3},paddingY:{style:t.o3},paddingInline:{style:t.o3},paddingInlineStart:{style:t.o3},paddingInlineEnd:{style:t.o3},paddingBlock:{style:t.o3},paddingBlockStart:{style:t.o3},paddingBlockEnd:{style:t.o3},m:{style:t.e6},mt:{style:t.e6},mr:{style:t.e6},mb:{style:t.e6},ml:{style:t.e6},mx:{style:t.e6},my:{style:t.e6},margin:{style:t.e6},marginTop:{style:t.e6},marginRight:{style:t.e6},marginBottom:{style:t.e6},marginLeft:{style:t.e6},marginX:{style:t.e6},marginY:{style:t.e6},marginInline:{style:t.e6},marginInlineStart:{style:t.e6},marginInlineEnd:{style:t.e6},marginBlock:{style:t.e6},marginBlockStart:{style:t.e6},marginBlockEnd:{style:t.e6},displayPrint:{cssProperty:!1,transform:e=>({"@media print":{display:e}})},display:{},overflow:{},textOverflow:{},visibility:{},whiteSpace:{},flexBasis:{},flexDirection:{},flexWrap:{},justifyContent:{},alignItems:{},alignContent:{},order:{},flex:{},flexGrow:{},flexShrink:{},alignSelf:{},justifyItems:{},justifySelf:{},gap:{style:B},rowGap:{style:V},columnGap:{style:S},gridColumn:{},gridRow:{},gridAutoFlow:{},gridAutoColumns:{},gridAutoRows:{},gridTemplateColumns:{},gridTemplateRows:{},gridTemplateAreas:{},gridArea:{},position:{},zIndex:{themeKey:"zIndex"},top:{},right:{},bottom:{},left:{},boxShadow:{themeKey:"shadows"},width:{transform:R},maxWidth:{style:v},minWidth:{transform:R},height:{transform:R},maxHeight:{transform:R},minHeight:{transform:R},boxSizing:{},fontFamily:{themeKey:"typography"},fontSize:{themeKey:"typography"},fontStyle:{themeKey:"typography"},fontWeight:{themeKey:"typography"},letterSpacing:{},textTransform:{},lineHeight:{},textAlign:{},typography:{cssProperty:!1,themeKey:"typography"}})},6523:(e,g,l)=>{"use strict";l.d(g,{Z:()=>a});var t=l(4142),n=l(7730),o=l(4844),I=l(5408),C=l(8010);const r=function(){function e(e,g,l,n){const C={[e]:g,theme:l},r=n[e];if(!r)return{[e]:g};const{cssProperty:a=e,themeKey:i,transform:c,style:s}=r;if(null==g)return null;if("typography"===i&&"inherit"===g)return{[e]:g};const d=(0,o.DW)(l,i)||{};return s?s(C):(0,I.k9)(C,g,(g=>{let l=(0,o.Jq)(d,c,g);return g===l&&"string"==typeof g&&(l=(0,o.Jq)(d,c,`${e}${"default"===g?"":(0,t.Z)(g)}`,g)),!1===a?l:{[a]:l}}))}return function g(l){var t;const{sx:o,theme:r={}}=l||{};if(!o)return null;const a=null!=(t=r.unstable_sxConfig)?t:C.Z;function i(l){let t=l;if("function"==typeof l)t=l(r);else if("object"!=typeof l)return l;if(!t)return null;const o=(0,I.W8)(r.breakpoints),C=Object.keys(o);let i=o;return Object.keys(t).forEach((l=>{const o="function"==typeof(C=t[l])?C(r):C;var C;if(null!=o)if("object"==typeof o)if(a[l])i=(0,n.Z)(i,e(l,o,r,a));else{const e=(0,I.k9)({theme:r},o,(e=>({[l]:e})));!function(...e){const g=e.reduce(((e,g)=>e.concat(Object.keys(g))),[]),l=new Set(g);return e.every((e=>l.size===Object.keys(e).length))}(e,o)?i=(0,n.Z)(i,e):i[l]=g({sx:o,theme:r})}else i=(0,n.Z)(i,e(l,o,r,a))})),(0,I.L7)(C,i)}return Array.isArray(o)?o.map(i):i(o)}}();r.filterProps=["sx"];const a=r},6682:(e,g,l)=>{"use strict";l.d(g,{Z:()=>I});var t=l(6268),n=l(4168);const o=(0,t.Z)(),I=function(e=o){return(0,n.Z)(e)}},7333:(e,g,l)=>{"use strict";l.d(g,{Z:()=>o});var t=l(7925),n=l(6682);function o({props:e,name:g,defaultTheme:l,themeId:o}){let I=(0,n.Z)(l);o&&(I=I[o]||I);const C=function(e){const{theme:g,name:l,props:n}=e;return g&&g.components&&g.components[l]&&g.components[l].defaultProps?(0,t.Z)(g.components[l].defaultProps,n):n}({theme:I,name:g,props:e});return C}},4168:(e,g,l)=>{"use strict";l.d(g,{Z:()=>o});var t=l(7294),n=l(5260);const o=function(e=null){const g=t.useContext(n.T);return g&&(l=g,0!==Object.keys(l).length)?g:e;var l}},7078:(e,g,l)=>{"use strict";l.d(g,{Z:()=>n});const t=e=>e,n=(()=>{let e=t;return{configure(g){e=g},generate:g=>e(g),reset(){e=t}}})()},4142:(e,g,l)=>{"use strict";l.d(g,{Z:()=>n});var t=l(6535);function n(e){if("string"!=typeof e)throw new Error((0,t.Z)(7));return e.charAt(0).toUpperCase()+e.slice(1)}},4780:(e,g,l)=>{"use strict";function t(e,g,l=void 0){const t={};return Object.keys(e).forEach((n=>{t[n]=e[n].reduce(((e,t)=>{if(t){const n=g(t);""!==n&&e.push(n),l&&l[t]&&e.push(l[t])}return e}),[]).join(" ")})),t}l.d(g,{Z:()=>t})},9064:(e,g,l)=>{"use strict";function t(...e){return e.reduce(((e,g)=>null==g?e:function(...l){e.apply(this,l),g.apply(this,l)}),(()=>{}))}l.d(g,{Z:()=>t})},9336:(e,g,l)=>{"use strict";function t(e,g=166){let l;function t(...t){clearTimeout(l),l=setTimeout((()=>{e.apply(this,t)}),g)}return t.clear=()=>{clearTimeout(l)},t}l.d(g,{Z:()=>t})},9766:(e,g,l)=>{"use strict";l.d(g,{P:()=>n,Z:()=>I});var t=l(7462);function n(e){return null!==e&&"object"==typeof e&&e.constructor===Object}function o(e){if(!n(e))return e;const g={};return Object.keys(e).forEach((l=>{g[l]=o(e[l])})),g}function I(e,g,l={clone:!0}){const C=l.clone?(0,t.Z)({},e):e;return n(e)&&n(g)&&Object.keys(g).forEach((t=>{"__proto__"!==t&&(n(g[t])&&t in e&&n(e[t])?C[t]=I(e[t],g[t],l):l.clone?C[t]=n(g[t])?o(g[t]):g[t]:C[t]=g[t])})),C}},6535:(e,g,l)=>{"use strict";function t(e){let g="https://mui.com/production-error/?code="+e;for(let e=1;e<arguments.length;e+=1)g+="&args[]="+encodeURIComponent(arguments[e]);return"Minified MUI error #"+e+"; visit "+g+" for the full message."}l.d(g,{Z:()=>t})},4867:(e,g,l)=>{"use strict";l.d(g,{Z:()=>o});var t=l(7078);const n={active:"active",checked:"checked",completed:"completed",disabled:"disabled",error:"error",expanded:"expanded",focused:"focused",focusVisible:"focusVisible",open:"open",readOnly:"readOnly",required:"required",selected:"selected"};function o(e,g,l="Mui"){const o=n[g];return o?`${l}-${o}`:`${t.Z.generate(e)}-${g}`}},1588:(e,g,l)=>{"use strict";l.d(g,{Z:()=>n});var t=l(4867);function n(e,g,l="Mui"){const n={};return g.forEach((g=>{n[g]=(0,t.Z)(e,g,l)})),n}},2690:(e,g,l)=>{"use strict";function t(e){return e&&e.ownerDocument||document}l.d(g,{Z:()=>t})},4161:(e,g,l)=>{"use strict";l.d(g,{Z:()=>n});var t=l(2690);function n(e){return(0,t.Z)(e).defaultView||window}},7925:(e,g,l)=>{"use strict";l.d(g,{Z:()=>n});var t=l(7462);function n(e,g){const l=(0,t.Z)({},g);return Object.keys(e).forEach((o=>{if(o.toString().match(/^(components|slots)$/))l[o]=(0,t.Z)({},e[o],l[o]);else if(o.toString().match(/^(componentsProps|slotProps)$/)){const I=e[o]||{},C=g[o];l[o]={},C&&Object.keys(C)?I&&Object.keys(I)?(l[o]=(0,t.Z)({},C),Object.keys(I).forEach((e=>{l[o][e]=n(I[e],C[e])}))):l[o]=C:l[o]=I}else void 0===l[o]&&(l[o]=e[o])})),l}},7960:(e,g,l)=>{"use strict";function t(e,g){"function"==typeof e?e(g):e&&(e.current=g)}l.d(g,{Z:()=>t})},9032:(e,g,l)=>{"use strict";l.d(g,{Z:()=>n});var t=l(7294);function n({controlled:e,default:g,name:l,state:n="value"}){const{current:o}=t.useRef(void 0!==e),[I,C]=t.useState(g);return[o?e:I,t.useCallback((e=>{o||C(e)}),[])]}},3546:(e,g,l)=>{"use strict";l.d(g,{Z:()=>n});var t=l(7294);const n="undefined"!=typeof window?t.useLayoutEffect:t.useEffect},9948:(e,g,l)=>{"use strict";l.d(g,{Z:()=>o});var t=l(7294),n=l(3546);const o=function(e){const g=t.useRef(e);return(0,n.Z)((()=>{g.current=e})),t.useRef(((...e)=>(0,g.current)(...e))).current}},3703:(e,g,l)=>{"use strict";l.d(g,{Z:()=>o});var t=l(7294),n=l(7960);function o(...e){return t.useMemo((()=>e.every((e=>null==e))?null:g=>{e.forEach((e=>{(0,n.Z)(e,g)}))}),e)}},2996:(e,g,l)=>{"use strict";var t;l.d(g,{Z:()=>C});var n=l(7294);let o=0;const I=(t||(t=l.t(n,2)))["useId".toString()];function C(e){if(void 0!==I){const g=I();return null!=e?e:g}return function(e){const[g,l]=n.useState(e),t=e||g;return n.useEffect((()=>{null==g&&(o+=1,l(`mui-${o}`))}),[g]),t}(e)}},8679:(e,g,l)=>{"use strict";var t=l(1296),n={childContextTypes:!0,contextType:!0,contextTypes:!0,defaultProps:!0,displayName:!0,getDefaultProps:!0,getDerivedStateFromError:!0,getDerivedStateFromProps:!0,mixins:!0,propTypes:!0,type:!0},o={name:!0,length:!0,prototype:!0,caller:!0,callee:!0,arguments:!0,arity:!0},I={$$typeof:!0,compare:!0,defaultProps:!0,displayName:!0,propTypes:!0,type:!0},C={};function r(e){return t.isMemo(e)?I:C[e.$$typeof]||n}C[t.ForwardRef]={$$typeof:!0,render:!0,defaultProps:!0,displayName:!0,propTypes:!0},C[t.Memo]=I;var a=Object.defineProperty,i=Object.getOwnPropertyNames,c=Object.getOwnPropertySymbols,s=Object.getOwnPropertyDescriptor,d=Object.getPrototypeOf,u=Object.prototype;e.exports=function e(g,l,t){if("string"!=typeof l){if(u){var n=d(l);n&&n!==u&&e(g,n,t)}var I=i(l);c&&(I=I.concat(c(l)));for(var C=r(g),A=r(l),m=0;m<I.length;++m){var b=I[m];if(!(o[b]||t&&t[b]||A&&A[b]||C&&C[b])){var p=s(l,b);try{a(g,b,p)}catch(e){}}}}return g}},6103:(e,g)=>{"use strict";var l="function"==typeof Symbol&&Symbol.for,t=l?Symbol.for("react.element"):60103,n=l?Symbol.for("react.portal"):60106,o=l?Symbol.for("react.fragment"):60107,I=l?Symbol.for("react.strict_mode"):60108,C=l?Symbol.for("react.profiler"):60114,r=l?Symbol.for("react.provider"):60109,a=l?Symbol.for("react.context"):60110,i=l?Symbol.for("react.async_mode"):60111,c=l?Symbol.for("react.concurrent_mode"):60111,s=l?Symbol.for("react.forward_ref"):60112,d=l?Symbol.for("react.suspense"):60113,u=l?Symbol.for("react.suspense_list"):60120,A=l?Symbol.for("react.memo"):60115,m=l?Symbol.for("react.lazy"):60116,b=l?Symbol.for("react.block"):60121,p=l?Symbol.for("react.fundamental"):60117,Z=l?Symbol.for("react.responder"):60118,h=l?Symbol.for("react.scope"):60119;function G(e){if("object"==typeof e&&null!==e){var g=e.$$typeof;switch(g){case t:switch(e=e.type){case i:case c:case o:case C:case I:case d:return e;default:switch(e=e&&e.$$typeof){case a:case s:case m:case A:case r:return e;default:return g}}case n:return g}}}function y(e){return G(e)===c}g.AsyncMode=i,g.ConcurrentMode=c,g.ContextConsumer=a,g.ContextProvider=r,g.Element=t,g.ForwardRef=s,g.Fragment=o,g.Lazy=m,g.Memo=A,g.Portal=n,g.Profiler=C,g.StrictMode=I,g.Suspense=d,g.isAsyncMode=function(e){return y(e)||G(e)===i},g.isConcurrentMode=y,g.isContextConsumer=function(e){return G(e)===a},g.isContextProvider=function(e){return G(e)===r},g.isElement=function(e){return"object"==typeof e&&null!==e&&e.$$typeof===t},g.isForwardRef=function(e){return G(e)===s},g.isFragment=function(e){return G(e)===o},g.isLazy=function(e){return G(e)===m},g.isMemo=function(e){return G(e)===A},g.isPortal=function(e){return G(e)===n},g.isProfiler=function(e){return G(e)===C},g.isStrictMode=function(e){return G(e)===I},g.isSuspense=function(e){return G(e)===d},g.isValidElementType=function(e){return"string"==typeof e||"function"==typeof e||e===o||e===c||e===C||e===I||e===d||e===u||"object"==typeof e&&null!==e&&(e.$$typeof===m||e.$$typeof===A||e.$$typeof===r||e.$$typeof===a||e.$$typeof===s||e.$$typeof===p||e.$$typeof===Z||e.$$typeof===h||e.$$typeof===b)},g.typeOf=G},1296:(e,g,l)=>{"use strict";e.exports=l(6103)},7460:function(e,g){var l,t;l=function e(){"use strict";var g="undefined"!=typeof self?self:"undefined"!=typeof window?window:void 0!==g?g:{},l=!g.document&&!!g.postMessage,t=g.IS_PAPA_WORKER||!1,n={},o=0,I={parse:function(l,t){var C=(t=t||{}).dynamicTyping||!1;if(G(C)&&(t.dynamicTypingFunction=C,C={}),t.dynamicTyping=C,t.transform=!!G(t.transform)&&t.transform,t.worker&&I.WORKERS_SUPPORTED){var r=function(){if(!I.WORKERS_SUPPORTED)return!1;var l,t,C=(l=g.URL||g.webkitURL||null,t=e.toString(),I.BLOB_URL||(I.BLOB_URL=l.createObjectURL(new Blob(["var global = (function() { if (typeof self !== 'undefined') { return self; } if (typeof window !== 'undefined') { return window; } if (typeof global !== 'undefined') { return global; } return {}; })(); global.IS_PAPA_WORKER=true; ","(",t,")();"],{type:"text/javascript"})))),r=new g.Worker(C);return r.onmessage=m,r.id=o++,n[r.id]=r}();return r.userStep=t.step,r.userChunk=t.chunk,r.userComplete=t.complete,r.userError=t.error,t.step=G(t.step),t.chunk=G(t.chunk),t.complete=G(t.complete),t.error=G(t.error),delete t.worker,void r.postMessage({input:l,config:t,workerId:r.id})}var d=null;return I.NODE_STREAM_INPUT,"string"==typeof l?(l=function(e){return 65279===e.charCodeAt(0)?e.slice(1):e}(l),d=t.download?new a(t):new c(t)):!0===l.readable&&G(l.read)&&G(l.on)?d=new s(t):(g.File&&l instanceof File||l instanceof Object)&&(d=new i(t)),d.stream(l)},unparse:function(e,g){var l=!1,t=!0,n=",",o="\r\n",C='"',r=C+C,a=!1,i=null,c=!1;!function(){if("object"==typeof g){if("string"!=typeof g.delimiter||I.BAD_DELIMITERS.filter((function(e){return-1!==g.delimiter.indexOf(e)})).length||(n=g.delimiter),("boolean"==typeof g.quotes||"function"==typeof g.quotes||Array.isArray(g.quotes))&&(l=g.quotes),"boolean"!=typeof g.skipEmptyLines&&"string"!=typeof g.skipEmptyLines||(a=g.skipEmptyLines),"string"==typeof g.newline&&(o=g.newline),"string"==typeof g.quoteChar&&(C=g.quoteChar),"boolean"==typeof g.header&&(t=g.header),Array.isArray(g.columns)){if(0===g.columns.length)throw new Error("Option columns is empty");i=g.columns}void 0!==g.escapeChar&&(r=g.escapeChar+C),("boolean"==typeof g.escapeFormulae||g.escapeFormulae instanceof RegExp)&&(c=g.escapeFormulae instanceof RegExp?g.escapeFormulae:/^[=+\-@\t\r].*$/)}}();var s=new RegExp(u(C),"g");if("string"==typeof e&&(e=JSON.parse(e)),Array.isArray(e)){if(!e.length||Array.isArray(e[0]))return d(null,e,a);if("object"==typeof e[0])return d(i||Object.keys(e[0]),e,a)}else if("object"==typeof e)return"string"==typeof e.data&&(e.data=JSON.parse(e.data)),Array.isArray(e.data)&&(e.fields||(e.fields=e.meta&&e.meta.fields||i),e.fields||(e.fields=Array.isArray(e.data[0])?e.fields:"object"==typeof e.data[0]?Object.keys(e.data[0]):[]),Array.isArray(e.data[0])||"object"==typeof e.data[0]||(e.data=[e.data])),d(e.fields||[],e.data||[],a);throw new Error("Unable to serialize unrecognized input");function d(e,g,l){var I="";"string"==typeof e&&(e=JSON.parse(e)),"string"==typeof g&&(g=JSON.parse(g));var C=Array.isArray(e)&&0<e.length,r=!Array.isArray(g[0]);if(C&&t){for(var a=0;a<e.length;a++)0<a&&(I+=n),I+=A(e[a],a);0<g.length&&(I+=o)}for(var i=0;i<g.length;i++){var c=C?e.length:g[i].length,s=!1,d=C?0===Object.keys(g[i]).length:0===g[i].length;if(l&&!C&&(s="greedy"===l?""===g[i].join("").trim():1===g[i].length&&0===g[i][0].length),"greedy"===l&&C){for(var u=[],m=0;m<c;m++){var b=r?e[m]:m;u.push(g[i][b])}s=""===u.join("").trim()}if(!s){for(var p=0;p<c;p++){0<p&&!d&&(I+=n);var Z=C&&r?e[p]:p;I+=A(g[i][Z],p)}i<g.length-1&&(!l||0<c&&!d)&&(I+=o)}}return I}function A(e,g){if(null==e)return"";if(e.constructor===Date)return JSON.stringify(e).slice(1,25);var t=!1;c&&"string"==typeof e&&c.test(e)&&(e="'"+e,t=!0);var o=e.toString().replace(s,r);return(t=t||!0===l||"function"==typeof l&&l(e,g)||Array.isArray(l)&&l[g]||function(e,g){for(var l=0;l<g.length;l++)if(-1<e.indexOf(g[l]))return!0;return!1}(o,I.BAD_DELIMITERS)||-1<o.indexOf(n)||" "===o.charAt(0)||" "===o.charAt(o.length-1))?C+o+C:o}}};if(I.RECORD_SEP=String.fromCharCode(30),I.UNIT_SEP=String.fromCharCode(31),I.BYTE_ORDER_MARK="\ufeff",I.BAD_DELIMITERS=["\r","\n",'"',I.BYTE_ORDER_MARK],I.WORKERS_SUPPORTED=!l&&!!g.Worker,I.NODE_STREAM_INPUT=1,I.LocalChunkSize=10485760,I.RemoteChunkSize=5242880,I.DefaultDelimiter=",",I.Parser=A,I.ParserHandle=d,I.NetworkStreamer=a,I.FileStreamer=i,I.StringStreamer=c,I.ReadableStreamStreamer=s,g.jQuery){var C=g.jQuery;C.fn.parse=function(e){var l=e.config||{},t=[];return this.each((function(e){if("INPUT"!==C(this).prop("tagName").toUpperCase()||"file"!==C(this).attr("type").toLowerCase()||!g.FileReader||!this.files||0===this.files.length)return!0;for(var n=0;n<this.files.length;n++)t.push({file:this.files[n],inputElem:this,instanceConfig:C.extend({},l)})})),n(),this;function n(){if(0!==t.length){var g,l,n,r=t[0];if(G(e.before)){var a=e.before(r.file,r.inputElem);if("object"==typeof a){if("abort"===a.action)return"AbortError",g=r.file,l=r.inputElem,n=a.reason,void(G(e.error)&&e.error({name:"AbortError"},g,l,n));if("skip"===a.action)return void o();"object"==typeof a.config&&(r.instanceConfig=C.extend(r.instanceConfig,a.config))}else if("skip"===a)return void o()}var i=r.instanceConfig.complete;r.instanceConfig.complete=function(e){G(i)&&i(e,r.file,r.inputElem),o()},I.parse(r.file,r.instanceConfig)}else G(e.complete)&&e.complete()}function o(){t.splice(0,1),n()}}}function r(e){this._handle=null,this._finished=!1,this._completed=!1,this._halted=!1,this._input=null,this._baseIndex=0,this._partialLine="",this._rowCount=0,this._start=0,this._nextChunk=null,this.isFirstChunk=!0,this._completeResults={data:[],errors:[],meta:{}},function(e){var g=Z(e);g.chunkSize=parseInt(g.chunkSize),e.step||e.chunk||(g.chunkSize=null),this._handle=new d(g),(this._handle.streamer=this)._config=g}.call(this,e),this.parseChunk=function(e,l){if(this.isFirstChunk&&G(this._config.beforeFirstChunk)){var n=this._config.beforeFirstChunk(e);void 0!==n&&(e=n)}this.isFirstChunk=!1,this._halted=!1;var o=this._partialLine+e;this._partialLine="";var C=this._handle.parse(o,this._baseIndex,!this._finished);if(!this._handle.paused()&&!this._handle.aborted()){var r=C.meta.cursor;this._finished||(this._partialLine=o.substring(r-this._baseIndex),this._baseIndex=r),C&&C.data&&(this._rowCount+=C.data.length);var a=this._finished||this._config.preview&&this._rowCount>=this._config.preview;if(t)g.postMessage({results:C,workerId:I.WORKER_ID,finished:a});else if(G(this._config.chunk)&&!l){if(this._config.chunk(C,this._handle),this._handle.paused()||this._handle.aborted())return void(this._halted=!0);C=void 0,this._completeResults=void 0}return this._config.step||this._config.chunk||(this._completeResults.data=this._completeResults.data.concat(C.data),this._completeResults.errors=this._completeResults.errors.concat(C.errors),this._completeResults.meta=C.meta),this._completed||!a||!G(this._config.complete)||C&&C.meta.aborted||(this._config.complete(this._completeResults,this._input),this._completed=!0),a||C&&C.meta.paused||this._nextChunk(),C}this._halted=!0},this._sendError=function(e){G(this._config.error)?this._config.error(e):t&&this._config.error&&g.postMessage({workerId:I.WORKER_ID,error:e,finished:!1})}}function a(e){var g;(e=e||{}).chunkSize||(e.chunkSize=I.RemoteChunkSize),r.call(this,e),this._nextChunk=l?function(){this._readChunk(),this._chunkLoaded()}:function(){this._readChunk()},this.stream=function(e){this._input=e,this._nextChunk()},this._readChunk=function(){if(this._finished)this._chunkLoaded();else{if(g=new XMLHttpRequest,this._config.withCredentials&&(g.withCredentials=this._config.withCredentials),l||(g.onload=h(this._chunkLoaded,this),g.onerror=h(this._chunkError,this)),g.open(this._config.downloadRequestBody?"POST":"GET",this._input,!l),this._config.downloadRequestHeaders){var e=this._config.downloadRequestHeaders;for(var t in e)g.setRequestHeader(t,e[t])}if(this._config.chunkSize){var n=this._start+this._config.chunkSize-1;g.setRequestHeader("Range","bytes="+this._start+"-"+n)}try{g.send(this._config.downloadRequestBody)}catch(e){this._chunkError(e.message)}l&&0===g.status&&this._chunkError()}},this._chunkLoaded=function(){4===g.readyState&&(g.status<200||400<=g.status?this._chunkError():(this._start+=this._config.chunkSize?this._config.chunkSize:g.responseText.length,this._finished=!this._config.chunkSize||this._start>=function(e){var g=e.getResponseHeader("Content-Range");return null===g?-1:parseInt(g.substring(g.lastIndexOf("/")+1))}(g),this.parseChunk(g.responseText)))},this._chunkError=function(e){var l=g.statusText||e;this._sendError(new Error(l))}}function i(e){var g,l;(e=e||{}).chunkSize||(e.chunkSize=I.LocalChunkSize),r.call(this,e);var t="undefined"!=typeof FileReader;this.stream=function(e){this._input=e,l=e.slice||e.webkitSlice||e.mozSlice,t?((g=new FileReader).onload=h(this._chunkLoaded,this),g.onerror=h(this._chunkError,this)):g=new FileReaderSync,this._nextChunk()},this._nextChunk=function(){this._finished||this._config.preview&&!(this._rowCount<this._config.preview)||this._readChunk()},this._readChunk=function(){var e=this._input;if(this._config.chunkSize){var n=Math.min(this._start+this._config.chunkSize,this._input.size);e=l.call(e,this._start,n)}var o=g.readAsText(e,this._config.encoding);t||this._chunkLoaded({target:{result:o}})},this._chunkLoaded=function(e){this._start+=this._config.chunkSize,this._finished=!this._config.chunkSize||this._start>=this._input.size,this.parseChunk(e.target.result)},this._chunkError=function(){this._sendError(g.error)}}function c(e){var g;r.call(this,e=e||{}),this.stream=function(e){return g=e,this._nextChunk()},this._nextChunk=function(){if(!this._finished){var e,l=this._config.chunkSize;return l?(e=g.substring(0,l),g=g.substring(l)):(e=g,g=""),this._finished=!g,this.parseChunk(e)}}}function s(e){r.call(this,e=e||{});var g=[],l=!0,t=!1;this.pause=function(){r.prototype.pause.apply(this,arguments),this._input.pause()},this.resume=function(){r.prototype.resume.apply(this,arguments),this._input.resume()},this.stream=function(e){this._input=e,this._input.on("data",this._streamData),this._input.on("end",this._streamEnd),this._input.on("error",this._streamError)},this._checkIsFinished=function(){t&&1===g.length&&(this._finished=!0)},this._nextChunk=function(){this._checkIsFinished(),g.length?this.parseChunk(g.shift()):l=!0},this._streamData=h((function(e){try{g.push("string"==typeof e?e:e.toString(this._config.encoding)),l&&(l=!1,this._checkIsFinished(),this.parseChunk(g.shift()))}catch(e){this._streamError(e)}}),this),this._streamError=h((function(e){this._streamCleanUp(),this._sendError(e)}),this),this._streamEnd=h((function(){this._streamCleanUp(),t=!0,this._streamData("")}),this),this._streamCleanUp=h((function(){this._input.removeListener("data",this._streamData),this._input.removeListener("end",this._streamEnd),this._input.removeListener("error",this._streamError)}),this)}function d(e){var g,l,t,n=Math.pow(2,53),o=-n,C=/^\s*-?(\d+\.?|\.\d+|\d+\.\d+)([eE][-+]?\d+)?\s*$/,r=/^((\d{4}-[01]\d-[0-3]\dT[0-2]\d:[0-5]\d:[0-5]\d\.\d+([+-][0-2]\d:[0-5]\d|Z))|(\d{4}-[01]\d-[0-3]\dT[0-2]\d:[0-5]\d:[0-5]\d([+-][0-2]\d:[0-5]\d|Z))|(\d{4}-[01]\d-[0-3]\dT[0-2]\d:[0-5]\d([+-][0-2]\d:[0-5]\d|Z)))$/,a=this,i=0,c=0,s=!1,d=!1,m=[],b={data:[],errors:[],meta:{}};if(G(e.step)){var p=e.step;e.step=function(g){if(b=g,B())y();else{if(y(),0===b.data.length)return;i+=g.data.length,e.preview&&i>e.preview?l.abort():(b.data=b.data[0],p(b,a))}}}function h(g){return"greedy"===e.skipEmptyLines?""===g.join("").trim():1===g.length&&0===g[0].length}function y(){return b&&t&&(V("Delimiter","UndetectableDelimiter","Unable to auto-detect delimiting character; defaulted to '"+I.DefaultDelimiter+"'"),t=!1),e.skipEmptyLines&&(b.data=b.data.filter((function(e){return!h(e)}))),B()&&function(){if(b)if(Array.isArray(b.data[0])){for(var g=0;B()&&g<b.data.length;g++)b.data[g].forEach(l);b.data.splice(0,1)}else b.data.forEach(l);function l(g,l){G(e.transformHeader)&&(g=e.transformHeader(g,l)),m.push(g)}}(),function(){if(!b||!e.header&&!e.dynamicTyping&&!e.transform)return b;function g(g,l){var t,n=e.header?{}:[];for(t=0;t<g.length;t++){var o=t,I=g[t];e.header&&(o=t>=m.length?"__parsed_extra":m[t]),e.transform&&(I=e.transform(I,o)),I=S(o,I),"__parsed_extra"===o?(n[o]=n[o]||[],n[o].push(I)):n[o]=I}return e.header&&(t>m.length?V("FieldMismatch","TooManyFields","Too many fields: expected "+m.length+" fields but parsed "+t,c+l):t<m.length&&V("FieldMismatch","TooFewFields","Too few fields: expected "+m.length+" fields but parsed "+t,c+l)),n}var l=1;return!b.data.length||Array.isArray(b.data[0])?(b.data=b.data.map(g),l=b.data.length):b.data=g(b.data,0),e.header&&b.meta&&(b.meta.fields=m),c+=l,b}()}function B(){return e.header&&0===m.length}function S(g,l){return t=g,e.dynamicTypingFunction&&void 0===e.dynamicTyping[t]&&(e.dynamicTyping[t]=e.dynamicTypingFunction(t)),!0===(e.dynamicTyping[t]||e.dynamicTyping)?"true"===l||"TRUE"===l||"false"!==l&&"FALSE"!==l&&(function(e){if(C.test(e)){var g=parseFloat(e);if(o<g&&g<n)return!0}return!1}(l)?parseFloat(l):r.test(l)?new Date(l):""===l?null:l):l;var t}function V(e,g,l,t){var n={type:e,code:g,message:l};void 0!==t&&(n.row=t),b.errors.push(n)}this.parse=function(n,o,C){var r=e.quoteChar||'"';if(e.newline||(e.newline=function(e,g){e=e.substring(0,1048576);var l=new RegExp(u(g)+"([^]*?)"+u(g),"gm"),t=(e=e.replace(l,"")).split("\r"),n=e.split("\n"),o=1<n.length&&n[0].length<t[0].length;if(1===t.length||o)return"\n";for(var I=0,C=0;C<t.length;C++)"\n"===t[C][0]&&I++;return I>=t.length/2?"\r\n":"\r"}(n,r)),t=!1,e.delimiter)G(e.delimiter)&&(e.delimiter=e.delimiter(n),b.meta.delimiter=e.delimiter);else{var a=function(g,l,t,n,o){var C,r,a,i;o=o||[",","\t","|",";",I.RECORD_SEP,I.UNIT_SEP];for(var c=0;c<o.length;c++){var s=o[c],d=0,u=0,m=0;a=void 0;for(var b=new A({comments:n,delimiter:s,newline:l,preview:10}).parse(g),p=0;p<b.data.length;p++)if(t&&h(b.data[p]))m++;else{var Z=b.data[p].length;u+=Z,void 0!==a?0<Z&&(d+=Math.abs(Z-a),a=Z):a=Z}0<b.data.length&&(u/=b.data.length-m),(void 0===r||d<=r)&&(void 0===i||i<u)&&1.99<u&&(r=d,C=s,i=u)}return{successful:!!(e.delimiter=C),bestDelimiter:C}}(n,e.newline,e.skipEmptyLines,e.comments,e.delimitersToGuess);a.successful?e.delimiter=a.bestDelimiter:(t=!0,e.delimiter=I.DefaultDelimiter),b.meta.delimiter=e.delimiter}var i=Z(e);return e.preview&&e.header&&i.preview++,g=n,l=new A(i),b=l.parse(g,o,C),y(),s?{meta:{paused:!0}}:b||{meta:{paused:!1}}},this.paused=function(){return s},this.pause=function(){s=!0,l.abort(),g=G(e.chunk)?"":g.substring(l.getCharIndex())},this.resume=function(){a.streamer._halted?(s=!1,a.streamer.parseChunk(g,!0)):setTimeout(a.resume,3)},this.aborted=function(){return d},this.abort=function(){d=!0,l.abort(),b.meta.aborted=!0,G(e.complete)&&e.complete(b),g=""}}function u(e){return e.replace(/[.*+?^${}()|[\]\\]/g,"\\$&")}function A(e){var g,l=(e=e||{}).delimiter,t=e.newline,n=e.comments,o=e.step,C=e.preview,r=e.fastMode,a=g=void 0===e.quoteChar||null===e.quoteChar?'"':e.quoteChar;if(void 0!==e.escapeChar&&(a=e.escapeChar),("string"!=typeof l||-1<I.BAD_DELIMITERS.indexOf(l))&&(l=","),n===l)throw new Error("Comment character same as delimiter");!0===n?n="#":("string"!=typeof n||-1<I.BAD_DELIMITERS.indexOf(n))&&(n=!1),"\n"!==t&&"\r"!==t&&"\r\n"!==t&&(t="\n");var i=0,c=!1;this.parse=function(I,s,d){if("string"!=typeof I)throw new Error("Input must be a string");var A=I.length,m=l.length,b=t.length,p=n.length,Z=G(o),h=[],y=[],B=[],S=i=0;if(!I)return D();if(e.header&&!s){var V=I.split(t)[0].split(l),W=[],R={},f=!1;for(var v in V){var k=V[v];G(e.transformHeader)&&(k=e.transformHeader(k,v));var X=k,J=R[k]||0;for(0<J&&(f=!0,X=k+"_"+J),R[k]=J+1;W.includes(X);)X=X+"_"+J;W.push(X)}if(f){var w=I.split(t);w[0]=W.join(l),I=w.join(t)}}if(r||!1!==r&&-1===I.indexOf(g)){for(var Y=I.split(t),H=0;H<Y.length;H++){if(B=Y[H],i+=B.length,H!==Y.length-1)i+=t.length;else if(d)return D();if(!n||B.substring(0,p)!==n){if(Z){if(h=[],E(B.split(l)),T(),c)return D()}else E(B.split(l));if(C&&C<=H)return h=h.slice(0,C),D(!0)}}return D()}for(var F=I.indexOf(l,i),N=I.indexOf(t,i),K=new RegExp(u(a)+u(g),"g"),x=I.indexOf(g,i);;)if(I[i]!==g)if(n&&0===B.length&&I.substring(i,i+p)===n){if(-1===N)return D();i=N+b,N=I.indexOf(t,i),F=I.indexOf(l,i)}else if(-1!==F&&(F<N||-1===N))B.push(I.substring(i,F)),i=F+m,F=I.indexOf(l,i);else{if(-1===N)break;if(B.push(I.substring(i,N)),Q(N+b),Z&&(T(),c))return D();if(C&&h.length>=C)return D(!0)}else for(x=i,i++;;){if(-1===(x=I.indexOf(g,x+1)))return d||y.push({type:"Quotes",code:"MissingQuotes",message:"Quoted field unterminated",row:h.length,index:i}),U();if(x===A-1)return U(I.substring(i,x).replace(K,g));if(g!==a||I[x+1]!==a){if(g===a||0===x||I[x-1]!==a){-1!==F&&F<x+1&&(F=I.indexOf(l,x+1)),-1!==N&&N<x+1&&(N=I.indexOf(t,x+1));var M=L(-1===N?F:Math.min(F,N));if(I.substr(x+1+M,m)===l){B.push(I.substring(i,x).replace(K,g)),I[i=x+1+M+m]!==g&&(x=I.indexOf(g,i)),F=I.indexOf(l,i),N=I.indexOf(t,i);break}var z=L(N);if(I.substring(x+1+z,x+1+z+b)===t){if(B.push(I.substring(i,x).replace(K,g)),Q(x+1+z+b),F=I.indexOf(l,i),x=I.indexOf(g,i),Z&&(T(),c))return D();if(C&&h.length>=C)return D(!0);break}y.push({type:"Quotes",code:"InvalidQuotes",message:"Trailing quote on quoted field is malformed",row:h.length,index:i}),x++}}else x++}return U();function E(e){h.push(e),S=i}function L(e){var g=0;if(-1!==e){var l=I.substring(x+1,e);l&&""===l.trim()&&(g=l.length)}return g}function U(e){return d||(void 0===e&&(e=I.substring(i)),B.push(e),i=A,E(B),Z&&T()),D()}function Q(e){i=e,E(B),B=[],N=I.indexOf(t,i)}function D(e){return{data:h,errors:y,meta:{delimiter:l,linebreak:t,aborted:c,truncated:!!e,cursor:S+(s||0)}}}function T(){o(D()),h=[],y=[]}},this.abort=function(){c=!0},this.getCharIndex=function(){return i}}function m(e){var g=e.data,l=n[g.workerId],t=!1;if(g.error)l.userError(g.error,g.file);else if(g.results&&g.results.data){var o={abort:function(){t=!0,b(g.workerId,{data:[],errors:[],meta:{aborted:!0}})},pause:p,resume:p};if(G(l.userStep)){for(var I=0;I<g.results.data.length&&(l.userStep({data:g.results.data[I],errors:g.results.errors,meta:g.results.meta},o),!t);I++);delete g.results}else G(l.userChunk)&&(l.userChunk(g.results,o,g.file),delete g.results)}g.finished&&!t&&b(g.workerId,g.results)}function b(e,g){var l=n[e];G(l.userComplete)&&l.userComplete(g),l.terminate(),delete n[e]}function p(){throw new Error("Not implemented.")}function Z(e){if("object"!=typeof e||null===e)return e;var g=Array.isArray(e)?[]:{};for(var l in e)g[l]=Z(e[l]);return g}function h(e,g){return function(){e.apply(g,arguments)}}function G(e){return"function"==typeof e}return t&&(g.onmessage=function(e){var l=e.data;if(void 0===I.WORKER_ID&&l&&(I.WORKER_ID=l.workerId),"string"==typeof l.input)g.postMessage({workerId:I.WORKER_ID,results:I.parse(l.input,l.config),finished:!0});else if(g.File&&l.input instanceof File||l.input instanceof Object){var t=I.parse(l.input,l.config);t&&g.postMessage({workerId:I.WORKER_ID,results:t,finished:!0})}}),(a.prototype=Object.create(r.prototype)).constructor=a,(i.prototype=Object.create(r.prototype)).constructor=i,(c.prototype=Object.create(c.prototype)).constructor=c,(s.prototype=Object.create(r.prototype)).constructor=s,I},void 0===(t=l.apply(g,[]))||(e.exports=t)},2703:(e,g,l)=>{"use strict";var t=l(414);function n(){}function o(){}o.resetWarningCache=n,e.exports=function(){function e(e,g,l,n,o,I){if(I!==t){var C=new Error("Calling PropTypes validators directly is not supported by the `prop-types` package. Use PropTypes.checkPropTypes() to call them. Read more at http://fb.me/use-check-prop-types");throw C.name="Invariant Violation",C}}function g(){return e}e.isRequired=e;var l={array:e,bigint:e,bool:e,func:e,number:e,object:e,string:e,symbol:e,any:e,arrayOf:g,element:e,elementType:e,instanceOf:g,node:e,objectOf:g,oneOf:g,oneOfType:g,shape:g,exact:g,checkPropTypes:o,resetWarningCache:n};return l.PropTypes=l,l}},5697:(e,g,l)=>{e.exports=l(2703)()},414:e=>{"use strict";e.exports="SECRET_DO_NOT_PASS_THIS_OR_YOU_WILL_BE_FIRED"},4448:(e,g,l)=>{"use strict";var t=l(7294),n=l(3840);function o(e){for(var g="https://reactjs.org/docs/error-decoder.html?invariant="+e,l=1;l<arguments.length;l++)g+="&args[]="+encodeURIComponent(arguments[l]);return"Minified React error #"+e+"; visit "+g+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}var I=new Set,C={};function r(e,g){a(e,g),a(e+"Capture",g)}function a(e,g){for(C[e]=g,e=0;e<g.length;e++)I.add(g[e])}var i=!("undefined"==typeof window||void 0===window.document||void 0===window.document.createElement),c=Object.prototype.hasOwnProperty,s=/^[:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD][:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD\-.0-9\u00B7\u0300-\u036F\u203F-\u2040]*$/,d={},u={};function A(e,g,l,t,n,o,I){this.acceptsBooleans=2===g||3===g||4===g,this.attributeName=t,this.attributeNamespace=n,this.mustUseProperty=l,this.propertyName=e,this.type=g,this.sanitizeURL=o,this.removeEmptyString=I}var m={};"children dangerouslySetInnerHTML defaultValue defaultChecked innerHTML suppressContentEditableWarning suppressHydrationWarning style".split(" ").forEach((function(e){m[e]=new A(e,0,!1,e,null,!1,!1)})),[["acceptCharset","accept-charset"],["className","class"],["htmlFor","for"],["httpEquiv","http-equiv"]].forEach((function(e){var g=e[0];m[g]=new A(g,1,!1,e[1],null,!1,!1)})),["contentEditable","draggable","spellCheck","value"].forEach((function(e){m[e]=new A(e,2,!1,e.toLowerCase(),null,!1,!1)})),["autoReverse","externalResourcesRequired","focusable","preserveAlpha"].forEach((function(e){m[e]=new A(e,2,!1,e,null,!1,!1)})),"allowFullScreen async autoFocus autoPlay controls default defer disabled disablePictureInPicture disableRemotePlayback formNoValidate hidden loop noModule noValidate open playsInline readOnly required reversed scoped seamless itemScope".split(" ").forEach((function(e){m[e]=new A(e,3,!1,e.toLowerCase(),null,!1,!1)})),["checked","multiple","muted","selected"].forEach((function(e){m[e]=new A(e,3,!0,e,null,!1,!1)})),["capture","download"].forEach((function(e){m[e]=new A(e,4,!1,e,null,!1,!1)})),["cols","rows","size","span"].forEach((function(e){m[e]=new A(e,6,!1,e,null,!1,!1)})),["rowSpan","start"].forEach((function(e){m[e]=new A(e,5,!1,e.toLowerCase(),null,!1,!1)}));var b=/[\-:]([a-z])/g;function p(e){return e[1].toUpperCase()}function Z(e,g,l,t){var n=m.hasOwnProperty(g)?m[g]:null;(null!==n?0!==n.type:t||!(2<g.length)||"o"!==g[0]&&"O"!==g[0]||"n"!==g[1]&&"N"!==g[1])&&(function(e,g,l,t){if(null==g||function(e,g,l,t){if(null!==l&&0===l.type)return!1;switch(typeof g){case"function":case"symbol":return!0;case"boolean":return!t&&(null!==l?!l.acceptsBooleans:"data-"!==(e=e.toLowerCase().slice(0,5))&&"aria-"!==e);default:return!1}}(e,g,l,t))return!0;if(t)return!1;if(null!==l)switch(l.type){case 3:return!g;case 4:return!1===g;case 5:return isNaN(g);case 6:return isNaN(g)||1>g}return!1}(g,l,n,t)&&(l=null),t||null===n?function(e){return!!c.call(u,e)||!c.call(d,e)&&(s.test(e)?u[e]=!0:(d[e]=!0,!1))}(g)&&(null===l?e.removeAttribute(g):e.setAttribute(g,""+l)):n.mustUseProperty?e[n.propertyName]=null===l?3!==n.type&&"":l:(g=n.attributeName,t=n.attributeNamespace,null===l?e.removeAttribute(g):(l=3===(n=n.type)||4===n&&!0===l?"":""+l,t?e.setAttributeNS(t,g,l):e.setAttribute(g,l))))}"accent-height alignment-baseline arabic-form baseline-shift cap-height clip-path clip-rule color-interpolation color-interpolation-filters color-profile color-rendering dominant-baseline enable-background fill-opacity fill-rule flood-color flood-opacity font-family font-size font-size-adjust font-stretch font-style font-variant font-weight glyph-name glyph-orientation-horizontal glyph-orientation-vertical horiz-adv-x horiz-origin-x image-rendering letter-spacing lighting-color marker-end marker-mid marker-start overline-position overline-thickness paint-order panose-1 pointer-events rendering-intent shape-rendering stop-color stop-opacity strikethrough-position strikethrough-thickness stroke-dasharray stroke-dashoffset stroke-linecap stroke-linejoin stroke-miterlimit stroke-opacity stroke-width text-anchor text-decoration text-rendering underline-position underline-thickness unicode-bidi unicode-range units-per-em v-alphabetic v-hanging v-ideographic v-mathematical vector-effect vert-adv-y vert-origin-x vert-origin-y word-spacing writing-mode xmlns:xlink x-height".split(" ").forEach((function(e){var g=e.replace(b,p);m[g]=new A(g,1,!1,e,null,!1,!1)})),"xlink:actuate xlink:arcrole xlink:role xlink:show xlink:title xlink:type".split(" ").forEach((function(e){var g=e.replace(b,p);m[g]=new A(g,1,!1,e,"http://www.w3.org/1999/xlink",!1,!1)})),["xml:base","xml:lang","xml:space"].forEach((function(e){var g=e.replace(b,p);m[g]=new A(g,1,!1,e,"http://www.w3.org/XML/1998/namespace",!1,!1)})),["tabIndex","crossOrigin"].forEach((function(e){m[e]=new A(e,1,!1,e.toLowerCase(),null,!1,!1)})),m.xlinkHref=new A("xlinkHref",1,!1,"xlink:href","http://www.w3.org/1999/xlink",!0,!1),["src","href","action","formAction"].forEach((function(e){m[e]=new A(e,1,!1,e.toLowerCase(),null,!0,!0)}));var h=t.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED,G=Symbol.for("react.element"),y=Symbol.for("react.portal"),B=Symbol.for("react.fragment"),S=Symbol.for("react.strict_mode"),V=Symbol.for("react.profiler"),W=Symbol.for("react.provider"),R=Symbol.for("react.context"),f=Symbol.for("react.forward_ref"),v=Symbol.for("react.suspense"),k=Symbol.for("react.suspense_list"),X=Symbol.for("react.memo"),J=Symbol.for("react.lazy");Symbol.for("react.scope"),Symbol.for("react.debug_trace_mode");var w=Symbol.for("react.offscreen");Symbol.for("react.legacy_hidden"),Symbol.for("react.cache"),Symbol.for("react.tracing_marker");var Y=Symbol.iterator;function H(e){return null===e||"object"!=typeof e?null:"function"==typeof(e=Y&&e[Y]||e["@@iterator"])?e:null}var F,N=Object.assign;function K(e){if(void 0===F)try{throw Error()}catch(e){var g=e.stack.trim().match(/\n( *(at )?)/);F=g&&g[1]||""}return"\n"+F+e}var x=!1;function M(e,g){if(!e||x)return"";x=!0;var l=Error.prepareStackTrace;Error.prepareStackTrace=void 0;try{if(g)if(g=function(){throw Error()},Object.defineProperty(g.prototype,"props",{set:function(){throw Error()}}),"object"==typeof Reflect&&Reflect.construct){try{Reflect.construct(g,[])}catch(e){var t=e}Reflect.construct(e,[],g)}else{try{g.call()}catch(e){t=e}e.call(g.prototype)}else{try{throw Error()}catch(e){t=e}e()}}catch(g){if(g&&t&&"string"==typeof g.stack){for(var n=g.stack.split("\n"),o=t.stack.split("\n"),I=n.length-1,C=o.length-1;1<=I&&0<=C&&n[I]!==o[C];)C--;for(;1<=I&&0<=C;I--,C--)if(n[I]!==o[C]){if(1!==I||1!==C)do{if(I--,0>--C||n[I]!==o[C]){var r="\n"+n[I].replace(" at new "," at ");return e.displayName&&r.includes("<anonymous>")&&(r=r.replace("<anonymous>",e.displayName)),r}}while(1<=I&&0<=C);break}}}finally{x=!1,Error.prepareStackTrace=l}return(e=e?e.displayName||e.name:"")?K(e):""}function z(e){switch(e.tag){case 5:return K(e.type);case 16:return K("Lazy");case 13:return K("Suspense");case 19:return K("SuspenseList");case 0:case 2:case 15:return M(e.type,!1);case 11:return M(e.type.render,!1);case 1:return M(e.type,!0);default:return""}}function E(e){if(null==e)return null;if("function"==typeof e)return e.displayName||e.name||null;if("string"==typeof e)return e;switch(e){case B:return"Fragment";case y:return"Portal";case V:return"Profiler";case S:return"StrictMode";case v:return"Suspense";case k:return"SuspenseList"}if("object"==typeof e)switch(e.$$typeof){case R:return(e.displayName||"Context")+".Consumer";case W:return(e._context.displayName||"Context")+".Provider";case f:var g=e.render;return(e=e.displayName)||(e=""!==(e=g.displayName||g.name||"")?"ForwardRef("+e+")":"ForwardRef"),e;case X:return null!==(g=e.displayName||null)?g:E(e.type)||"Memo";case J:g=e._payload,e=e._init;try{return E(e(g))}catch(e){}}return null}function L(e){var g=e.type;switch(e.tag){case 24:return"Cache";case 9:return(g.displayName||"Context")+".Consumer";case 10:return(g._context.displayName||"Context")+".Provider";case 18:return"DehydratedFragment";case 11:return e=(e=g.render).displayName||e.name||"",g.displayName||(""!==e?"ForwardRef("+e+")":"ForwardRef");case 7:return"Fragment";case 5:return g;case 4:return"Portal";case 3:return"Root";case 6:return"Text";case 16:return E(g);case 8:return g===S?"StrictMode":"Mode";case 22:return"Offscreen";case 12:return"Profiler";case 21:return"Scope";case 13:return"Suspense";case 19:return"SuspenseList";case 25:return"TracingMarker";case 1:case 0:case 17:case 2:case 14:case 15:if("function"==typeof g)return g.displayName||g.name||null;if("string"==typeof g)return g}return null}function U(e){switch(typeof e){case"boolean":case"number":case"string":case"undefined":case"object":return e;default:return""}}function Q(e){var g=e.type;return(e=e.nodeName)&&"input"===e.toLowerCase()&&("checkbox"===g||"radio"===g)}function D(e){e._valueTracker||(e._valueTracker=function(e){var g=Q(e)?"checked":"value",l=Object.getOwnPropertyDescriptor(e.constructor.prototype,g),t=""+e[g];if(!e.hasOwnProperty(g)&&void 0!==l&&"function"==typeof l.get&&"function"==typeof l.set){var n=l.get,o=l.set;return Object.defineProperty(e,g,{configurable:!0,get:function(){return n.call(this)},set:function(e){t=""+e,o.call(this,e)}}),Object.defineProperty(e,g,{enumerable:l.enumerable}),{getValue:function(){return t},setValue:function(e){t=""+e},stopTracking:function(){e._valueTracker=null,delete e[g]}}}}(e))}function T(e){if(!e)return!1;var g=e._valueTracker;if(!g)return!0;var l=g.getValue(),t="";return e&&(t=Q(e)?e.checked?"true":"false":e.value),(e=t)!==l&&(g.setValue(e),!0)}function P(e){if(void 0===(e=e||("undefined"!=typeof document?document:void 0)))return null;try{return e.activeElement||e.body}catch(g){return e.body}}function j(e,g){var l=g.checked;return N({},g,{defaultChecked:void 0,defaultValue:void 0,value:void 0,checked:null!=l?l:e._wrapperState.initialChecked})}function O(e,g){var l=null==g.defaultValue?"":g.defaultValue,t=null!=g.checked?g.checked:g.defaultChecked;l=U(null!=g.value?g.value:l),e._wrapperState={initialChecked:t,initialValue:l,controlled:"checkbox"===g.type||"radio"===g.type?null!=g.checked:null!=g.value}}function q(e,g){null!=(g=g.checked)&&Z(e,"checked",g,!1)}function $(e,g){q(e,g);var l=U(g.value),t=g.type;if(null!=l)"number"===t?(0===l&&""===e.value||e.value!=l)&&(e.value=""+l):e.value!==""+l&&(e.value=""+l);else if("submit"===t||"reset"===t)return void e.removeAttribute("value");g.hasOwnProperty("value")?ee(e,g.type,l):g.hasOwnProperty("defaultValue")&&ee(e,g.type,U(g.defaultValue)),null==g.checked&&null!=g.defaultChecked&&(e.defaultChecked=!!g.defaultChecked)}function _(e,g,l){if(g.hasOwnProperty("value")||g.hasOwnProperty("defaultValue")){var t=g.type;if(!("submit"!==t&&"reset"!==t||void 0!==g.value&&null!==g.value))return;g=""+e._wrapperState.initialValue,l||g===e.value||(e.value=g),e.defaultValue=g}""!==(l=e.name)&&(e.name=""),e.defaultChecked=!!e._wrapperState.initialChecked,""!==l&&(e.name=l)}function ee(e,g,l){"number"===g&&P(e.ownerDocument)===e||(null==l?e.defaultValue=""+e._wrapperState.initialValue:e.defaultValue!==""+l&&(e.defaultValue=""+l))}var ge=Array.isArray;function le(e,g,l,t){if(e=e.options,g){g={};for(var n=0;n<l.length;n++)g["$"+l[n]]=!0;for(l=0;l<e.length;l++)n=g.hasOwnProperty("$"+e[l].value),e[l].selected!==n&&(e[l].selected=n),n&&t&&(e[l].defaultSelected=!0)}else{for(l=""+U(l),g=null,n=0;n<e.length;n++){if(e[n].value===l)return e[n].selected=!0,void(t&&(e[n].defaultSelected=!0));null!==g||e[n].disabled||(g=e[n])}null!==g&&(g.selected=!0)}}function te(e,g){if(null!=g.dangerouslySetInnerHTML)throw Error(o(91));return N({},g,{value:void 0,defaultValue:void 0,children:""+e._wrapperState.initialValue})}function ne(e,g){var l=g.value;if(null==l){if(l=g.children,g=g.defaultValue,null!=l){if(null!=g)throw Error(o(92));if(ge(l)){if(1<l.length)throw Error(o(93));l=l[0]}g=l}null==g&&(g=""),l=g}e._wrapperState={initialValue:U(l)}}function oe(e,g){var l=U(g.value),t=U(g.defaultValue);null!=l&&((l=""+l)!==e.value&&(e.value=l),null==g.defaultValue&&e.defaultValue!==l&&(e.defaultValue=l)),null!=t&&(e.defaultValue=""+t)}function Ie(e){var g=e.textContent;g===e._wrapperState.initialValue&&""!==g&&null!==g&&(e.value=g)}function Ce(e){switch(e){case"svg":return"http://www.w3.org/2000/svg";case"math":return"http://www.w3.org/1998/Math/MathML";default:return"http://www.w3.org/1999/xhtml"}}function re(e,g){return null==e||"http://www.w3.org/1999/xhtml"===e?Ce(g):"http://www.w3.org/2000/svg"===e&&"foreignObject"===g?"http://www.w3.org/1999/xhtml":e}var ae,ie,ce=(ie=function(e,g){if("http://www.w3.org/2000/svg"!==e.namespaceURI||"innerHTML"in e)e.innerHTML=g;else{for((ae=ae||document.createElement("div")).innerHTML="<svg>"+g.valueOf().toString()+"</svg>",g=ae.firstChild;e.firstChild;)e.removeChild(e.firstChild);for(;g.firstChild;)e.appendChild(g.firstChild)}},"undefined"!=typeof MSApp&&MSApp.execUnsafeLocalFunction?function(e,g,l,t){MSApp.execUnsafeLocalFunction((function(){return ie(e,g)}))}:ie);function se(e,g){if(g){var l=e.firstChild;if(l&&l===e.lastChild&&3===l.nodeType)return void(l.nodeValue=g)}e.textContent=g}var de={animationIterationCount:!0,aspectRatio:!0,borderImageOutset:!0,borderImageSlice:!0,borderImageWidth:!0,boxFlex:!0,boxFlexGroup:!0,boxOrdinalGroup:!0,columnCount:!0,columns:!0,flex:!0,flexGrow:!0,flexPositive:!0,flexShrink:!0,flexNegative:!0,flexOrder:!0,gridArea:!0,gridRow:!0,gridRowEnd:!0,gridRowSpan:!0,gridRowStart:!0,gridColumn:!0,gridColumnEnd:!0,gridColumnSpan:!0,gridColumnStart:!0,fontWeight:!0,lineClamp:!0,lineHeight:!0,opacity:!0,order:!0,orphans:!0,tabSize:!0,widows:!0,zIndex:!0,zoom:!0,fillOpacity:!0,floodOpacity:!0,stopOpacity:!0,strokeDasharray:!0,strokeDashoffset:!0,strokeMiterlimit:!0,strokeOpacity:!0,strokeWidth:!0},ue=["Webkit","ms","Moz","O"];function Ae(e,g,l){return null==g||"boolean"==typeof g||""===g?"":l||"number"!=typeof g||0===g||de.hasOwnProperty(e)&&de[e]?(""+g).trim():g+"px"}function me(e,g){for(var l in e=e.style,g)if(g.hasOwnProperty(l)){var t=0===l.indexOf("--"),n=Ae(l,g[l],t);"float"===l&&(l="cssFloat"),t?e.setProperty(l,n):e[l]=n}}Object.keys(de).forEach((function(e){ue.forEach((function(g){g=g+e.charAt(0).toUpperCase()+e.substring(1),de[g]=de[e]}))}));var be=N({menuitem:!0},{area:!0,base:!0,br:!0,col:!0,embed:!0,hr:!0,img:!0,input:!0,keygen:!0,link:!0,meta:!0,param:!0,source:!0,track:!0,wbr:!0});function pe(e,g){if(g){if(be[e]&&(null!=g.children||null!=g.dangerouslySetInnerHTML))throw Error(o(137,e));if(null!=g.dangerouslySetInnerHTML){if(null!=g.children)throw Error(o(60));if("object"!=typeof g.dangerouslySetInnerHTML||!("__html"in g.dangerouslySetInnerHTML))throw Error(o(61))}if(null!=g.style&&"object"!=typeof g.style)throw Error(o(62))}}function Ze(e,g){if(-1===e.indexOf("-"))return"string"==typeof g.is;switch(e){case"annotation-xml":case"color-profile":case"font-face":case"font-face-src":case"font-face-uri":case"font-face-format":case"font-face-name":case"missing-glyph":return!1;default:return!0}}var he=null;function Ge(e){return(e=e.target||e.srcElement||window).correspondingUseElement&&(e=e.correspondingUseElement),3===e.nodeType?e.parentNode:e}var ye=null,Be=null,Se=null;function Ve(e){if(e=Zn(e)){if("function"!=typeof ye)throw Error(o(280));var g=e.stateNode;g&&(g=Gn(g),ye(e.stateNode,e.type,g))}}function We(e){Be?Se?Se.push(e):Se=[e]:Be=e}function Re(){if(Be){var e=Be,g=Se;if(Se=Be=null,Ve(e),g)for(e=0;e<g.length;e++)Ve(g[e])}}function fe(e,g){return e(g)}function ve(){}var ke=!1;function Xe(e,g,l){if(ke)return e(g,l);ke=!0;try{return fe(e,g,l)}finally{ke=!1,(null!==Be||null!==Se)&&(ve(),Re())}}function Je(e,g){var l=e.stateNode;if(null===l)return null;var t=Gn(l);if(null===t)return null;l=t[g];e:switch(g){case"onClick":case"onClickCapture":case"onDoubleClick":case"onDoubleClickCapture":case"onMouseDown":case"onMouseDownCapture":case"onMouseMove":case"onMouseMoveCapture":case"onMouseUp":case"onMouseUpCapture":case"onMouseEnter":(t=!t.disabled)||(t=!("button"===(e=e.type)||"input"===e||"select"===e||"textarea"===e)),e=!t;break e;default:e=!1}if(e)return null;if(l&&"function"!=typeof l)throw Error(o(231,g,typeof l));return l}var we=!1;if(i)try{var Ye={};Object.defineProperty(Ye,"passive",{get:function(){we=!0}}),window.addEventListener("test",Ye,Ye),window.removeEventListener("test",Ye,Ye)}catch(ie){we=!1}function He(e,g,l,t,n,o,I,C,r){var a=Array.prototype.slice.call(arguments,3);try{g.apply(l,a)}catch(e){this.onError(e)}}var Fe=!1,Ne=null,Ke=!1,xe=null,Me={onError:function(e){Fe=!0,Ne=e}};function ze(e,g,l,t,n,o,I,C,r){Fe=!1,Ne=null,He.apply(Me,arguments)}function Ee(e){var g=e,l=e;if(e.alternate)for(;g.return;)g=g.return;else{e=g;do{0!=(4098&(g=e).flags)&&(l=g.return),e=g.return}while(e)}return 3===g.tag?l:null}function Le(e){if(13===e.tag){var g=e.memoizedState;if(null===g&&null!==(e=e.alternate)&&(g=e.memoizedState),null!==g)return g.dehydrated}return null}function Ue(e){if(Ee(e)!==e)throw Error(o(188))}function Qe(e){return null!==(e=function(e){var g=e.alternate;if(!g){if(null===(g=Ee(e)))throw Error(o(188));return g!==e?null:e}for(var l=e,t=g;;){var n=l.return;if(null===n)break;var I=n.alternate;if(null===I){if(null!==(t=n.return)){l=t;continue}break}if(n.child===I.child){for(I=n.child;I;){if(I===l)return Ue(n),e;if(I===t)return Ue(n),g;I=I.sibling}throw Error(o(188))}if(l.return!==t.return)l=n,t=I;else{for(var C=!1,r=n.child;r;){if(r===l){C=!0,l=n,t=I;break}if(r===t){C=!0,t=n,l=I;break}r=r.sibling}if(!C){for(r=I.child;r;){if(r===l){C=!0,l=I,t=n;break}if(r===t){C=!0,t=I,l=n;break}r=r.sibling}if(!C)throw Error(o(189))}}if(l.alternate!==t)throw Error(o(190))}if(3!==l.tag)throw Error(o(188));return l.stateNode.current===l?e:g}(e))?De(e):null}function De(e){if(5===e.tag||6===e.tag)return e;for(e=e.child;null!==e;){var g=De(e);if(null!==g)return g;e=e.sibling}return null}var Te=n.unstable_scheduleCallback,Pe=n.unstable_cancelCallback,je=n.unstable_shouldYield,Oe=n.unstable_requestPaint,qe=n.unstable_now,$e=n.unstable_getCurrentPriorityLevel,_e=n.unstable_ImmediatePriority,eg=n.unstable_UserBlockingPriority,gg=n.unstable_NormalPriority,lg=n.unstable_LowPriority,tg=n.unstable_IdlePriority,ng=null,og=null,Ig=Math.clz32?Math.clz32:function(e){return 0===(e>>>=0)?32:31-(Cg(e)/rg|0)|0},Cg=Math.log,rg=Math.LN2,ag=64,ig=4194304;function cg(e){switch(e&-e){case 1:return 1;case 2:return 2;case 4:return 4;case 8:return 8;case 16:return 16;case 32:return 32;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return 4194240&e;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return 130023424&e;case 134217728:return 134217728;case 268435456:return 268435456;case 536870912:return 536870912;case 1073741824:return 1073741824;default:return e}}function sg(e,g){var l=e.pendingLanes;if(0===l)return 0;var t=0,n=e.suspendedLanes,o=e.pingedLanes,I=268435455&l;if(0!==I){var C=I&~n;0!==C?t=cg(C):0!=(o&=I)&&(t=cg(o))}else 0!=(I=l&~n)?t=cg(I):0!==o&&(t=cg(o));if(0===t)return 0;if(0!==g&&g!==t&&0==(g&n)&&((n=t&-t)>=(o=g&-g)||16===n&&0!=(4194240&o)))return g;if(0!=(4&t)&&(t|=16&l),0!==(g=e.entangledLanes))for(e=e.entanglements,g&=t;0<g;)n=1<<(l=31-Ig(g)),t|=e[l],g&=~n;return t}function dg(e,g){switch(e){case 1:case 2:case 4:return g+250;case 8:case 16:case 32:case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return g+5e3;default:return-1}}function ug(e){return 0!=(e=-1073741825&e.pendingLanes)?e:1073741824&e?1073741824:0}function Ag(){var e=ag;return 0==(4194240&(ag<<=1))&&(ag=64),e}function mg(e){for(var g=[],l=0;31>l;l++)g.push(e);return g}function bg(e,g,l){e.pendingLanes|=g,536870912!==g&&(e.suspendedLanes=0,e.pingedLanes=0),(e=e.eventTimes)[g=31-Ig(g)]=l}function pg(e,g){var l=e.entangledLanes|=g;for(e=e.entanglements;l;){var t=31-Ig(l),n=1<<t;n&g|e[t]&g&&(e[t]|=g),l&=~n}}var Zg=0;function hg(e){return 1<(e&=-e)?4<e?0!=(268435455&e)?16:536870912:4:1}var Gg,yg,Bg,Sg,Vg,Wg=!1,Rg=[],fg=null,vg=null,kg=null,Xg=new Map,Jg=new Map,wg=[],Yg="mousedown mouseup touchcancel touchend touchstart auxclick dblclick pointercancel pointerdown pointerup dragend dragstart drop compositionend compositionstart keydown keypress keyup input textInput copy cut paste click change contextmenu reset submit".split(" ");function Hg(e,g){switch(e){case"focusin":case"focusout":fg=null;break;case"dragenter":case"dragleave":vg=null;break;case"mouseover":case"mouseout":kg=null;break;case"pointerover":case"pointerout":Xg.delete(g.pointerId);break;case"gotpointercapture":case"lostpointercapture":Jg.delete(g.pointerId)}}function Fg(e,g,l,t,n,o){return null===e||e.nativeEvent!==o?(e={blockedOn:g,domEventName:l,eventSystemFlags:t,nativeEvent:o,targetContainers:[n]},null!==g&&null!==(g=Zn(g))&&yg(g),e):(e.eventSystemFlags|=t,g=e.targetContainers,null!==n&&-1===g.indexOf(n)&&g.push(n),e)}function Ng(e){var g=pn(e.target);if(null!==g){var l=Ee(g);if(null!==l)if(13===(g=l.tag)){if(null!==(g=Le(l)))return e.blockedOn=g,void Vg(e.priority,(function(){Bg(l)}))}else if(3===g&&l.stateNode.current.memoizedState.isDehydrated)return void(e.blockedOn=3===l.tag?l.stateNode.containerInfo:null)}e.blockedOn=null}function Kg(e){if(null!==e.blockedOn)return!1;for(var g=e.targetContainers;0<g.length;){var l=jg(e.domEventName,e.eventSystemFlags,g[0],e.nativeEvent);if(null!==l)return null!==(g=Zn(l))&&yg(g),e.blockedOn=l,!1;var t=new(l=e.nativeEvent).constructor(l.type,l);he=t,l.target.dispatchEvent(t),he=null,g.shift()}return!0}function xg(e,g,l){Kg(e)&&l.delete(g)}function Mg(){Wg=!1,null!==fg&&Kg(fg)&&(fg=null),null!==vg&&Kg(vg)&&(vg=null),null!==kg&&Kg(kg)&&(kg=null),Xg.forEach(xg),Jg.forEach(xg)}function zg(e,g){e.blockedOn===g&&(e.blockedOn=null,Wg||(Wg=!0,n.unstable_scheduleCallback(n.unstable_NormalPriority,Mg)))}function Eg(e){function g(g){return zg(g,e)}if(0<Rg.length){zg(Rg[0],e);for(var l=1;l<Rg.length;l++){var t=Rg[l];t.blockedOn===e&&(t.blockedOn=null)}}for(null!==fg&&zg(fg,e),null!==vg&&zg(vg,e),null!==kg&&zg(kg,e),Xg.forEach(g),Jg.forEach(g),l=0;l<wg.length;l++)(t=wg[l]).blockedOn===e&&(t.blockedOn=null);for(;0<wg.length&&null===(l=wg[0]).blockedOn;)Ng(l),null===l.blockedOn&&wg.shift()}var Lg=h.ReactCurrentBatchConfig,Ug=!0;function Qg(e,g,l,t){var n=Zg,o=Lg.transition;Lg.transition=null;try{Zg=1,Tg(e,g,l,t)}finally{Zg=n,Lg.transition=o}}function Dg(e,g,l,t){var n=Zg,o=Lg.transition;Lg.transition=null;try{Zg=4,Tg(e,g,l,t)}finally{Zg=n,Lg.transition=o}}function Tg(e,g,l,t){if(Ug){var n=jg(e,g,l,t);if(null===n)Lt(e,g,t,Pg,l),Hg(e,t);else if(function(e,g,l,t,n){switch(g){case"focusin":return fg=Fg(fg,e,g,l,t,n),!0;case"dragenter":return vg=Fg(vg,e,g,l,t,n),!0;case"mouseover":return kg=Fg(kg,e,g,l,t,n),!0;case"pointerover":var o=n.pointerId;return Xg.set(o,Fg(Xg.get(o)||null,e,g,l,t,n)),!0;case"gotpointercapture":return o=n.pointerId,Jg.set(o,Fg(Jg.get(o)||null,e,g,l,t,n)),!0}return!1}(n,e,g,l,t))t.stopPropagation();else if(Hg(e,t),4&g&&-1<Yg.indexOf(e)){for(;null!==n;){var o=Zn(n);if(null!==o&&Gg(o),null===(o=jg(e,g,l,t))&&Lt(e,g,t,Pg,l),o===n)break;n=o}null!==n&&t.stopPropagation()}else Lt(e,g,t,null,l)}}var Pg=null;function jg(e,g,l,t){if(Pg=null,null!==(e=pn(e=Ge(t))))if(null===(g=Ee(e)))e=null;else if(13===(l=g.tag)){if(null!==(e=Le(g)))return e;e=null}else if(3===l){if(g.stateNode.current.memoizedState.isDehydrated)return 3===g.tag?g.stateNode.containerInfo:null;e=null}else g!==e&&(e=null);return Pg=e,null}function Og(e){switch(e){case"cancel":case"click":case"close":case"contextmenu":case"copy":case"cut":case"auxclick":case"dblclick":case"dragend":case"dragstart":case"drop":case"focusin":case"focusout":case"input":case"invalid":case"keydown":case"keypress":case"keyup":case"mousedown":case"mouseup":case"paste":case"pause":case"play":case"pointercancel":case"pointerdown":case"pointerup":case"ratechange":case"reset":case"resize":case"seeked":case"submit":case"touchcancel":case"touchend":case"touchstart":case"volumechange":case"change":case"selectionchange":case"textInput":case"compositionstart":case"compositionend":case"compositionupdate":case"beforeblur":case"afterblur":case"beforeinput":case"blur":case"fullscreenchange":case"focus":case"hashchange":case"popstate":case"select":case"selectstart":return 1;case"drag":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"mousemove":case"mouseout":case"mouseover":case"pointermove":case"pointerout":case"pointerover":case"scroll":case"toggle":case"touchmove":case"wheel":case"mouseenter":case"mouseleave":case"pointerenter":case"pointerleave":return 4;case"message":switch($e()){case _e:return 1;case eg:return 4;case gg:case lg:return 16;case tg:return 536870912;default:return 16}default:return 16}}var qg=null,$g=null,_g=null;function el(){if(_g)return _g;var e,g,l=$g,t=l.length,n="value"in qg?qg.value:qg.textContent,o=n.length;for(e=0;e<t&&l[e]===n[e];e++);var I=t-e;for(g=1;g<=I&&l[t-g]===n[o-g];g++);return _g=n.slice(e,1<g?1-g:void 0)}function gl(e){var g=e.keyCode;return"charCode"in e?0===(e=e.charCode)&&13===g&&(e=13):e=g,10===e&&(e=13),32<=e||13===e?e:0}function ll(){return!0}function tl(){return!1}function nl(e){function g(g,l,t,n,o){for(var I in this._reactName=g,this._targetInst=t,this.type=l,this.nativeEvent=n,this.target=o,this.currentTarget=null,e)e.hasOwnProperty(I)&&(g=e[I],this[I]=g?g(n):n[I]);return this.isDefaultPrevented=(null!=n.defaultPrevented?n.defaultPrevented:!1===n.returnValue)?ll:tl,this.isPropagationStopped=tl,this}return N(g.prototype,{preventDefault:function(){this.defaultPrevented=!0;var e=this.nativeEvent;e&&(e.preventDefault?e.preventDefault():"unknown"!=typeof e.returnValue&&(e.returnValue=!1),this.isDefaultPrevented=ll)},stopPropagation:function(){var e=this.nativeEvent;e&&(e.stopPropagation?e.stopPropagation():"unknown"!=typeof e.cancelBubble&&(e.cancelBubble=!0),this.isPropagationStopped=ll)},persist:function(){},isPersistent:ll}),g}var ol,Il,Cl,rl={eventPhase:0,bubbles:0,cancelable:0,timeStamp:function(e){return e.timeStamp||Date.now()},defaultPrevented:0,isTrusted:0},al=nl(rl),il=N({},rl,{view:0,detail:0}),cl=nl(il),sl=N({},il,{screenX:0,screenY:0,clientX:0,clientY:0,pageX:0,pageY:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,getModifierState:Sl,button:0,buttons:0,relatedTarget:function(e){return void 0===e.relatedTarget?e.fromElement===e.srcElement?e.toElement:e.fromElement:e.relatedTarget},movementX:function(e){return"movementX"in e?e.movementX:(e!==Cl&&(Cl&&"mousemove"===e.type?(ol=e.screenX-Cl.screenX,Il=e.screenY-Cl.screenY):Il=ol=0,Cl=e),ol)},movementY:function(e){return"movementY"in e?e.movementY:Il}}),dl=nl(sl),ul=nl(N({},sl,{dataTransfer:0})),Al=nl(N({},il,{relatedTarget:0})),ml=nl(N({},rl,{animationName:0,elapsedTime:0,pseudoElement:0})),bl=N({},rl,{clipboardData:function(e){return"clipboardData"in e?e.clipboardData:window.clipboardData}}),pl=nl(bl),Zl=nl(N({},rl,{data:0})),hl={Esc:"Escape",Spacebar:" ",Left:"ArrowLeft",Up:"ArrowUp",Right:"ArrowRight",Down:"ArrowDown",Del:"Delete",Win:"OS",Menu:"ContextMenu",Apps:"ContextMenu",Scroll:"ScrollLock",MozPrintableKey:"Unidentified"},Gl={8:"Backspace",9:"Tab",12:"Clear",13:"Enter",16:"Shift",17:"Control",18:"Alt",19:"Pause",20:"CapsLock",27:"Escape",32:" ",33:"PageUp",34:"PageDown",35:"End",36:"Home",37:"ArrowLeft",38:"ArrowUp",39:"ArrowRight",40:"ArrowDown",45:"Insert",46:"Delete",112:"F1",113:"F2",114:"F3",115:"F4",116:"F5",117:"F6",118:"F7",119:"F8",120:"F9",121:"F10",122:"F11",123:"F12",144:"NumLock",145:"ScrollLock",224:"Meta"},yl={Alt:"altKey",Control:"ctrlKey",Meta:"metaKey",Shift:"shiftKey"};function Bl(e){var g=this.nativeEvent;return g.getModifierState?g.getModifierState(e):!!(e=yl[e])&&!!g[e]}function Sl(){return Bl}var Vl=N({},il,{key:function(e){if(e.key){var g=hl[e.key]||e.key;if("Unidentified"!==g)return g}return"keypress"===e.type?13===(e=gl(e))?"Enter":String.fromCharCode(e):"keydown"===e.type||"keyup"===e.type?Gl[e.keyCode]||"Unidentified":""},code:0,location:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,repeat:0,locale:0,getModifierState:Sl,charCode:function(e){return"keypress"===e.type?gl(e):0},keyCode:function(e){return"keydown"===e.type||"keyup"===e.type?e.keyCode:0},which:function(e){return"keypress"===e.type?gl(e):"keydown"===e.type||"keyup"===e.type?e.keyCode:0}}),Wl=nl(Vl),Rl=nl(N({},sl,{pointerId:0,width:0,height:0,pressure:0,tangentialPressure:0,tiltX:0,tiltY:0,twist:0,pointerType:0,isPrimary:0})),fl=nl(N({},il,{touches:0,targetTouches:0,changedTouches:0,altKey:0,metaKey:0,ctrlKey:0,shiftKey:0,getModifierState:Sl})),vl=nl(N({},rl,{propertyName:0,elapsedTime:0,pseudoElement:0})),kl=N({},sl,{deltaX:function(e){return"deltaX"in e?e.deltaX:"wheelDeltaX"in e?-e.wheelDeltaX:0},deltaY:function(e){return"deltaY"in e?e.deltaY:"wheelDeltaY"in e?-e.wheelDeltaY:"wheelDelta"in e?-e.wheelDelta:0},deltaZ:0,deltaMode:0}),Xl=nl(kl),Jl=[9,13,27,32],wl=i&&"CompositionEvent"in window,Yl=null;i&&"documentMode"in document&&(Yl=document.documentMode);var Hl=i&&"TextEvent"in window&&!Yl,Fl=i&&(!wl||Yl&&8<Yl&&11>=Yl),Nl=String.fromCharCode(32),Kl=!1;function xl(e,g){switch(e){case"keyup":return-1!==Jl.indexOf(g.keyCode);case"keydown":return 229!==g.keyCode;case"keypress":case"mousedown":case"focusout":return!0;default:return!1}}function Ml(e){return"object"==typeof(e=e.detail)&&"data"in e?e.data:null}var zl=!1,El={color:!0,date:!0,datetime:!0,"datetime-local":!0,email:!0,month:!0,number:!0,password:!0,range:!0,search:!0,tel:!0,text:!0,time:!0,url:!0,week:!0};function Ll(e){var g=e&&e.nodeName&&e.nodeName.toLowerCase();return"input"===g?!!El[e.type]:"textarea"===g}function Ul(e,g,l,t){We(t),0<(g=Qt(g,"onChange")).length&&(l=new al("onChange","change",null,l,t),e.push({event:l,listeners:g}))}var Ql=null,Dl=null;function Tl(e){Nt(e,0)}function Pl(e){if(T(hn(e)))return e}function jl(e,g){if("change"===e)return g}var Ol=!1;if(i){var ql;if(i){var $l="oninput"in document;if(!$l){var _l=document.createElement("div");_l.setAttribute("oninput","return;"),$l="function"==typeof _l.oninput}ql=$l}else ql=!1;Ol=ql&&(!document.documentMode||9<document.documentMode)}function et(){Ql&&(Ql.detachEvent("onpropertychange",gt),Dl=Ql=null)}function gt(e){if("value"===e.propertyName&&Pl(Dl)){var g=[];Ul(g,Dl,e,Ge(e)),Xe(Tl,g)}}function lt(e,g,l){"focusin"===e?(et(),Dl=l,(Ql=g).attachEvent("onpropertychange",gt)):"focusout"===e&&et()}function tt(e){if("selectionchange"===e||"keyup"===e||"keydown"===e)return Pl(Dl)}function nt(e,g){if("click"===e)return Pl(g)}function ot(e,g){if("input"===e||"change"===e)return Pl(g)}var It="function"==typeof Object.is?Object.is:function(e,g){return e===g&&(0!==e||1/e==1/g)||e!=e&&g!=g};function Ct(e,g){if(It(e,g))return!0;if("object"!=typeof e||null===e||"object"!=typeof g||null===g)return!1;var l=Object.keys(e),t=Object.keys(g);if(l.length!==t.length)return!1;for(t=0;t<l.length;t++){var n=l[t];if(!c.call(g,n)||!It(e[n],g[n]))return!1}return!0}function rt(e){for(;e&&e.firstChild;)e=e.firstChild;return e}function at(e,g){var l,t=rt(e);for(e=0;t;){if(3===t.nodeType){if(l=e+t.textContent.length,e<=g&&l>=g)return{node:t,offset:g-e};e=l}e:{for(;t;){if(t.nextSibling){t=t.nextSibling;break e}t=t.parentNode}t=void 0}t=rt(t)}}function it(e,g){return!(!e||!g)&&(e===g||(!e||3!==e.nodeType)&&(g&&3===g.nodeType?it(e,g.parentNode):"contains"in e?e.contains(g):!!e.compareDocumentPosition&&!!(16&e.compareDocumentPosition(g))))}function ct(){for(var e=window,g=P();g instanceof e.HTMLIFrameElement;){try{var l="string"==typeof g.contentWindow.location.href}catch(e){l=!1}if(!l)break;g=P((e=g.contentWindow).document)}return g}function st(e){var g=e&&e.nodeName&&e.nodeName.toLowerCase();return g&&("input"===g&&("text"===e.type||"search"===e.type||"tel"===e.type||"url"===e.type||"password"===e.type)||"textarea"===g||"true"===e.contentEditable)}function dt(e){var g=ct(),l=e.focusedElem,t=e.selectionRange;if(g!==l&&l&&l.ownerDocument&&it(l.ownerDocument.documentElement,l)){if(null!==t&&st(l))if(g=t.start,void 0===(e=t.end)&&(e=g),"selectionStart"in l)l.selectionStart=g,l.selectionEnd=Math.min(e,l.value.length);else if((e=(g=l.ownerDocument||document)&&g.defaultView||window).getSelection){e=e.getSelection();var n=l.textContent.length,o=Math.min(t.start,n);t=void 0===t.end?o:Math.min(t.end,n),!e.extend&&o>t&&(n=t,t=o,o=n),n=at(l,o);var I=at(l,t);n&&I&&(1!==e.rangeCount||e.anchorNode!==n.node||e.anchorOffset!==n.offset||e.focusNode!==I.node||e.focusOffset!==I.offset)&&((g=g.createRange()).setStart(n.node,n.offset),e.removeAllRanges(),o>t?(e.addRange(g),e.extend(I.node,I.offset)):(g.setEnd(I.node,I.offset),e.addRange(g)))}for(g=[],e=l;e=e.parentNode;)1===e.nodeType&&g.push({element:e,left:e.scrollLeft,top:e.scrollTop});for("function"==typeof l.focus&&l.focus(),l=0;l<g.length;l++)(e=g[l]).element.scrollLeft=e.left,e.element.scrollTop=e.top}}var ut=i&&"documentMode"in document&&11>=document.documentMode,At=null,mt=null,bt=null,pt=!1;function Zt(e,g,l){var t=l.window===l?l.document:9===l.nodeType?l:l.ownerDocument;pt||null==At||At!==P(t)||(t="selectionStart"in(t=At)&&st(t)?{start:t.selectionStart,end:t.selectionEnd}:{anchorNode:(t=(t.ownerDocument&&t.ownerDocument.defaultView||window).getSelection()).anchorNode,anchorOffset:t.anchorOffset,focusNode:t.focusNode,focusOffset:t.focusOffset},bt&&Ct(bt,t)||(bt=t,0<(t=Qt(mt,"onSelect")).length&&(g=new al("onSelect","select",null,g,l),e.push({event:g,listeners:t}),g.target=At)))}function ht(e,g){var l={};return l[e.toLowerCase()]=g.toLowerCase(),l["Webkit"+e]="webkit"+g,l["Moz"+e]="moz"+g,l}var Gt={animationend:ht("Animation","AnimationEnd"),animationiteration:ht("Animation","AnimationIteration"),animationstart:ht("Animation","AnimationStart"),transitionend:ht("Transition","TransitionEnd")},yt={},Bt={};function St(e){if(yt[e])return yt[e];if(!Gt[e])return e;var g,l=Gt[e];for(g in l)if(l.hasOwnProperty(g)&&g in Bt)return yt[e]=l[g];return e}i&&(Bt=document.createElement("div").style,"AnimationEvent"in window||(delete Gt.animationend.animation,delete Gt.animationiteration.animation,delete Gt.animationstart.animation),"TransitionEvent"in window||delete Gt.transitionend.transition);var Vt=St("animationend"),Wt=St("animationiteration"),Rt=St("animationstart"),ft=St("transitionend"),vt=new Map,kt="abort auxClick cancel canPlay canPlayThrough click close contextMenu copy cut drag dragEnd dragEnter dragExit dragLeave dragOver dragStart drop durationChange emptied encrypted ended error gotPointerCapture input invalid keyDown keyPress keyUp load loadedData loadedMetadata loadStart lostPointerCapture mouseDown mouseMove mouseOut mouseOver mouseUp paste pause play playing pointerCancel pointerDown pointerMove pointerOut pointerOver pointerUp progress rateChange reset resize seeked seeking stalled submit suspend timeUpdate touchCancel touchEnd touchStart volumeChange scroll toggle touchMove waiting wheel".split(" ");function Xt(e,g){vt.set(e,g),r(g,[e])}for(var Jt=0;Jt<kt.length;Jt++){var wt=kt[Jt];Xt(wt.toLowerCase(),"on"+(wt[0].toUpperCase()+wt.slice(1)))}Xt(Vt,"onAnimationEnd"),Xt(Wt,"onAnimationIteration"),Xt(Rt,"onAnimationStart"),Xt("dblclick","onDoubleClick"),Xt("focusin","onFocus"),Xt("focusout","onBlur"),Xt(ft,"onTransitionEnd"),a("onMouseEnter",["mouseout","mouseover"]),a("onMouseLeave",["mouseout","mouseover"]),a("onPointerEnter",["pointerout","pointerover"]),a("onPointerLeave",["pointerout","pointerover"]),r("onChange","change click focusin focusout input keydown keyup selectionchange".split(" ")),r("onSelect","focusout contextmenu dragend focusin keydown keyup mousedown mouseup selectionchange".split(" ")),r("onBeforeInput",["compositionend","keypress","textInput","paste"]),r("onCompositionEnd","compositionend focusout keydown keypress keyup mousedown".split(" ")),r("onCompositionStart","compositionstart focusout keydown keypress keyup mousedown".split(" ")),r("onCompositionUpdate","compositionupdate focusout keydown keypress keyup mousedown".split(" "));var Yt="abort canplay canplaythrough durationchange emptied encrypted ended error loadeddata loadedmetadata loadstart pause play playing progress ratechange resize seeked seeking stalled suspend timeupdate volumechange waiting".split(" "),Ht=new Set("cancel close invalid load scroll toggle".split(" ").concat(Yt));function Ft(e,g,l){var t=e.type||"unknown-event";e.currentTarget=l,function(e,g,l,t,n,I,C,r,a){if(ze.apply(this,arguments),Fe){if(!Fe)throw Error(o(198));var i=Ne;Fe=!1,Ne=null,Ke||(Ke=!0,xe=i)}}(t,g,void 0,e),e.currentTarget=null}function Nt(e,g){g=0!=(4&g);for(var l=0;l<e.length;l++){var t=e[l],n=t.event;t=t.listeners;e:{var o=void 0;if(g)for(var I=t.length-1;0<=I;I--){var C=t[I],r=C.instance,a=C.currentTarget;if(C=C.listener,r!==o&&n.isPropagationStopped())break e;Ft(n,C,a),o=r}else for(I=0;I<t.length;I++){if(r=(C=t[I]).instance,a=C.currentTarget,C=C.listener,r!==o&&n.isPropagationStopped())break e;Ft(n,C,a),o=r}}}if(Ke)throw e=xe,Ke=!1,xe=null,e}function Kt(e,g){var l=g[An];void 0===l&&(l=g[An]=new Set);var t=e+"__bubble";l.has(t)||(Et(g,e,2,!1),l.add(t))}function xt(e,g,l){var t=0;g&&(t|=4),Et(l,e,t,g)}var Mt="_reactListening"+Math.random().toString(36).slice(2);function zt(e){if(!e[Mt]){e[Mt]=!0,I.forEach((function(g){"selectionchange"!==g&&(Ht.has(g)||xt(g,!1,e),xt(g,!0,e))}));var g=9===e.nodeType?e:e.ownerDocument;null===g||g[Mt]||(g[Mt]=!0,xt("selectionchange",!1,g))}}function Et(e,g,l,t){switch(Og(g)){case 1:var n=Qg;break;case 4:n=Dg;break;default:n=Tg}l=n.bind(null,g,l,e),n=void 0,!we||"touchstart"!==g&&"touchmove"!==g&&"wheel"!==g||(n=!0),t?void 0!==n?e.addEventListener(g,l,{capture:!0,passive:n}):e.addEventListener(g,l,!0):void 0!==n?e.addEventListener(g,l,{passive:n}):e.addEventListener(g,l,!1)}function Lt(e,g,l,t,n){var o=t;if(0==(1&g)&&0==(2&g)&&null!==t)e:for(;;){if(null===t)return;var I=t.tag;if(3===I||4===I){var C=t.stateNode.containerInfo;if(C===n||8===C.nodeType&&C.parentNode===n)break;if(4===I)for(I=t.return;null!==I;){var r=I.tag;if((3===r||4===r)&&((r=I.stateNode.containerInfo)===n||8===r.nodeType&&r.parentNode===n))return;I=I.return}for(;null!==C;){if(null===(I=pn(C)))return;if(5===(r=I.tag)||6===r){t=o=I;continue e}C=C.parentNode}}t=t.return}Xe((function(){var t=o,n=Ge(l),I=[];e:{var C=vt.get(e);if(void 0!==C){var r=al,a=e;switch(e){case"keypress":if(0===gl(l))break e;case"keydown":case"keyup":r=Wl;break;case"focusin":a="focus",r=Al;break;case"focusout":a="blur",r=Al;break;case"beforeblur":case"afterblur":r=Al;break;case"click":if(2===l.button)break e;case"auxclick":case"dblclick":case"mousedown":case"mousemove":case"mouseup":case"mouseout":case"mouseover":case"contextmenu":r=dl;break;case"drag":case"dragend":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"dragstart":case"drop":r=ul;break;case"touchcancel":case"touchend":case"touchmove":case"touchstart":r=fl;break;case Vt:case Wt:case Rt:r=ml;break;case ft:r=vl;break;case"scroll":r=cl;break;case"wheel":r=Xl;break;case"copy":case"cut":case"paste":r=pl;break;case"gotpointercapture":case"lostpointercapture":case"pointercancel":case"pointerdown":case"pointermove":case"pointerout":case"pointerover":case"pointerup":r=Rl}var i=0!=(4&g),c=!i&&"scroll"===e,s=i?null!==C?C+"Capture":null:C;i=[];for(var d,u=t;null!==u;){var A=(d=u).stateNode;if(5===d.tag&&null!==A&&(d=A,null!==s&&null!=(A=Je(u,s))&&i.push(Ut(u,A,d))),c)break;u=u.return}0<i.length&&(C=new r(C,a,null,l,n),I.push({event:C,listeners:i}))}}if(0==(7&g)){if(r="mouseout"===e||"pointerout"===e,(!(C="mouseover"===e||"pointerover"===e)||l===he||!(a=l.relatedTarget||l.fromElement)||!pn(a)&&!a[un])&&(r||C)&&(C=n.window===n?n:(C=n.ownerDocument)?C.defaultView||C.parentWindow:window,r?(r=t,null!==(a=(a=l.relatedTarget||l.toElement)?pn(a):null)&&(a!==(c=Ee(a))||5!==a.tag&&6!==a.tag)&&(a=null)):(r=null,a=t),r!==a)){if(i=dl,A="onMouseLeave",s="onMouseEnter",u="mouse","pointerout"!==e&&"pointerover"!==e||(i=Rl,A="onPointerLeave",s="onPointerEnter",u="pointer"),c=null==r?C:hn(r),d=null==a?C:hn(a),(C=new i(A,u+"leave",r,l,n)).target=c,C.relatedTarget=d,A=null,pn(n)===t&&((i=new i(s,u+"enter",a,l,n)).target=d,i.relatedTarget=c,A=i),c=A,r&&a)e:{for(s=a,u=0,d=i=r;d;d=Dt(d))u++;for(d=0,A=s;A;A=Dt(A))d++;for(;0<u-d;)i=Dt(i),u--;for(;0<d-u;)s=Dt(s),d--;for(;u--;){if(i===s||null!==s&&i===s.alternate)break e;i=Dt(i),s=Dt(s)}i=null}else i=null;null!==r&&Tt(I,C,r,i,!1),null!==a&&null!==c&&Tt(I,c,a,i,!0)}if("select"===(r=(C=t?hn(t):window).nodeName&&C.nodeName.toLowerCase())||"input"===r&&"file"===C.type)var m=jl;else if(Ll(C))if(Ol)m=ot;else{m=tt;var b=lt}else(r=C.nodeName)&&"input"===r.toLowerCase()&&("checkbox"===C.type||"radio"===C.type)&&(m=nt);switch(m&&(m=m(e,t))?Ul(I,m,l,n):(b&&b(e,C,t),"focusout"===e&&(b=C._wrapperState)&&b.controlled&&"number"===C.type&&ee(C,"number",C.value)),b=t?hn(t):window,e){case"focusin":(Ll(b)||"true"===b.contentEditable)&&(At=b,mt=t,bt=null);break;case"focusout":bt=mt=At=null;break;case"mousedown":pt=!0;break;case"contextmenu":case"mouseup":case"dragend":pt=!1,Zt(I,l,n);break;case"selectionchange":if(ut)break;case"keydown":case"keyup":Zt(I,l,n)}var p;if(wl)e:{switch(e){case"compositionstart":var Z="onCompositionStart";break e;case"compositionend":Z="onCompositionEnd";break e;case"compositionupdate":Z="onCompositionUpdate";break e}Z=void 0}else zl?xl(e,l)&&(Z="onCompositionEnd"):"keydown"===e&&229===l.keyCode&&(Z="onCompositionStart");Z&&(Fl&&"ko"!==l.locale&&(zl||"onCompositionStart"!==Z?"onCompositionEnd"===Z&&zl&&(p=el()):($g="value"in(qg=n)?qg.value:qg.textContent,zl=!0)),0<(b=Qt(t,Z)).length&&(Z=new Zl(Z,e,null,l,n),I.push({event:Z,listeners:b}),(p||null!==(p=Ml(l)))&&(Z.data=p))),(p=Hl?function(e,g){switch(e){case"compositionend":return Ml(g);case"keypress":return 32!==g.which?null:(Kl=!0,Nl);case"textInput":return(e=g.data)===Nl&&Kl?null:e;default:return null}}(e,l):function(e,g){if(zl)return"compositionend"===e||!wl&&xl(e,g)?(e=el(),_g=$g=qg=null,zl=!1,e):null;switch(e){case"paste":default:return null;case"keypress":if(!(g.ctrlKey||g.altKey||g.metaKey)||g.ctrlKey&&g.altKey){if(g.char&&1<g.char.length)return g.char;if(g.which)return String.fromCharCode(g.which)}return null;case"compositionend":return Fl&&"ko"!==g.locale?null:g.data}}(e,l))&&0<(t=Qt(t,"onBeforeInput")).length&&(n=new Zl("onBeforeInput","beforeinput",null,l,n),I.push({event:n,listeners:t}),n.data=p)}Nt(I,g)}))}function Ut(e,g,l){return{instance:e,listener:g,currentTarget:l}}function Qt(e,g){for(var l=g+"Capture",t=[];null!==e;){var n=e,o=n.stateNode;5===n.tag&&null!==o&&(n=o,null!=(o=Je(e,l))&&t.unshift(Ut(e,o,n)),null!=(o=Je(e,g))&&t.push(Ut(e,o,n))),e=e.return}return t}function Dt(e){if(null===e)return null;do{e=e.return}while(e&&5!==e.tag);return e||null}function Tt(e,g,l,t,n){for(var o=g._reactName,I=[];null!==l&&l!==t;){var C=l,r=C.alternate,a=C.stateNode;if(null!==r&&r===t)break;5===C.tag&&null!==a&&(C=a,n?null!=(r=Je(l,o))&&I.unshift(Ut(l,r,C)):n||null!=(r=Je(l,o))&&I.push(Ut(l,r,C))),l=l.return}0!==I.length&&e.push({event:g,listeners:I})}var Pt=/\r\n?/g,jt=/\u0000|\uFFFD/g;function Ot(e){return("string"==typeof e?e:""+e).replace(Pt,"\n").replace(jt,"")}function qt(e,g,l){if(g=Ot(g),Ot(e)!==g&&l)throw Error(o(425))}function $t(){}var _t=null,en=null;function gn(e,g){return"textarea"===e||"noscript"===e||"string"==typeof g.children||"number"==typeof g.children||"object"==typeof g.dangerouslySetInnerHTML&&null!==g.dangerouslySetInnerHTML&&null!=g.dangerouslySetInnerHTML.__html}var ln="function"==typeof setTimeout?setTimeout:void 0,tn="function"==typeof clearTimeout?clearTimeout:void 0,nn="function"==typeof Promise?Promise:void 0,on="function"==typeof queueMicrotask?queueMicrotask:void 0!==nn?function(e){return nn.resolve(null).then(e).catch(In)}:ln;function In(e){setTimeout((function(){throw e}))}function Cn(e,g){var l=g,t=0;do{var n=l.nextSibling;if(e.removeChild(l),n&&8===n.nodeType)if("/$"===(l=n.data)){if(0===t)return e.removeChild(n),void Eg(g);t--}else"$"!==l&&"$?"!==l&&"$!"!==l||t++;l=n}while(l);Eg(g)}function rn(e){for(;null!=e;e=e.nextSibling){var g=e.nodeType;if(1===g||3===g)break;if(8===g){if("$"===(g=e.data)||"$!"===g||"$?"===g)break;if("/$"===g)return null}}return e}function an(e){e=e.previousSibling;for(var g=0;e;){if(8===e.nodeType){var l=e.data;if("$"===l||"$!"===l||"$?"===l){if(0===g)return e;g--}else"/$"===l&&g++}e=e.previousSibling}return null}var cn=Math.random().toString(36).slice(2),sn="__reactFiber$"+cn,dn="__reactProps$"+cn,un="__reactContainer$"+cn,An="__reactEvents$"+cn,mn="__reactListeners$"+cn,bn="__reactHandles$"+cn;function pn(e){var g=e[sn];if(g)return g;for(var l=e.parentNode;l;){if(g=l[un]||l[sn]){if(l=g.alternate,null!==g.child||null!==l&&null!==l.child)for(e=an(e);null!==e;){if(l=e[sn])return l;e=an(e)}return g}l=(e=l).parentNode}return null}function Zn(e){return!(e=e[sn]||e[un])||5!==e.tag&&6!==e.tag&&13!==e.tag&&3!==e.tag?null:e}function hn(e){if(5===e.tag||6===e.tag)return e.stateNode;throw Error(o(33))}function Gn(e){return e[dn]||null}var yn=[],Bn=-1;function Sn(e){return{current:e}}function Vn(e){0>Bn||(e.current=yn[Bn],yn[Bn]=null,Bn--)}function Wn(e,g){Bn++,yn[Bn]=e.current,e.current=g}var Rn={},fn=Sn(Rn),vn=Sn(!1),kn=Rn;function Xn(e,g){var l=e.type.contextTypes;if(!l)return Rn;var t=e.stateNode;if(t&&t.__reactInternalMemoizedUnmaskedChildContext===g)return t.__reactInternalMemoizedMaskedChildContext;var n,o={};for(n in l)o[n]=g[n];return t&&((e=e.stateNode).__reactInternalMemoizedUnmaskedChildContext=g,e.__reactInternalMemoizedMaskedChildContext=o),o}function Jn(e){return null!=e.childContextTypes}function wn(){Vn(vn),Vn(fn)}function Yn(e,g,l){if(fn.current!==Rn)throw Error(o(168));Wn(fn,g),Wn(vn,l)}function Hn(e,g,l){var t=e.stateNode;if(g=g.childContextTypes,"function"!=typeof t.getChildContext)return l;for(var n in t=t.getChildContext())if(!(n in g))throw Error(o(108,L(e)||"Unknown",n));return N({},l,t)}function Fn(e){return e=(e=e.stateNode)&&e.__reactInternalMemoizedMergedChildContext||Rn,kn=fn.current,Wn(fn,e),Wn(vn,vn.current),!0}function Nn(e,g,l){var t=e.stateNode;if(!t)throw Error(o(169));l?(e=Hn(e,g,kn),t.__reactInternalMemoizedMergedChildContext=e,Vn(vn),Vn(fn),Wn(fn,e)):Vn(vn),Wn(vn,l)}var Kn=null,xn=!1,Mn=!1;function zn(e){null===Kn?Kn=[e]:Kn.push(e)}function En(){if(!Mn&&null!==Kn){Mn=!0;var e=0,g=Zg;try{var l=Kn;for(Zg=1;e<l.length;e++){var t=l[e];do{t=t(!0)}while(null!==t)}Kn=null,xn=!1}catch(g){throw null!==Kn&&(Kn=Kn.slice(e+1)),Te(_e,En),g}finally{Zg=g,Mn=!1}}return null}var Ln=[],Un=0,Qn=null,Dn=0,Tn=[],Pn=0,jn=null,On=1,qn="";function $n(e,g){Ln[Un++]=Dn,Ln[Un++]=Qn,Qn=e,Dn=g}function _n(e,g,l){Tn[Pn++]=On,Tn[Pn++]=qn,Tn[Pn++]=jn,jn=e;var t=On;e=qn;var n=32-Ig(t)-1;t&=~(1<<n),l+=1;var o=32-Ig(g)+n;if(30<o){var I=n-n%5;o=(t&(1<<I)-1).toString(32),t>>=I,n-=I,On=1<<32-Ig(g)+n|l<<n|t,qn=o+e}else On=1<<o|l<<n|t,qn=e}function eo(e){null!==e.return&&($n(e,1),_n(e,1,0))}function go(e){for(;e===Qn;)Qn=Ln[--Un],Ln[Un]=null,Dn=Ln[--Un],Ln[Un]=null;for(;e===jn;)jn=Tn[--Pn],Tn[Pn]=null,qn=Tn[--Pn],Tn[Pn]=null,On=Tn[--Pn],Tn[Pn]=null}var lo=null,to=null,no=!1,oo=null;function Io(e,g){var l=Ja(5,null,null,0);l.elementType="DELETED",l.stateNode=g,l.return=e,null===(g=e.deletions)?(e.deletions=[l],e.flags|=16):g.push(l)}function Co(e,g){switch(e.tag){case 5:var l=e.type;return null!==(g=1!==g.nodeType||l.toLowerCase()!==g.nodeName.toLowerCase()?null:g)&&(e.stateNode=g,lo=e,to=rn(g.firstChild),!0);case 6:return null!==(g=""===e.pendingProps||3!==g.nodeType?null:g)&&(e.stateNode=g,lo=e,to=null,!0);case 13:return null!==(g=8!==g.nodeType?null:g)&&(l=null!==jn?{id:On,overflow:qn}:null,e.memoizedState={dehydrated:g,treeContext:l,retryLane:1073741824},(l=Ja(18,null,null,0)).stateNode=g,l.return=e,e.child=l,lo=e,to=null,!0);default:return!1}}function ro(e){return 0!=(1&e.mode)&&0==(128&e.flags)}function ao(e){if(no){var g=to;if(g){var l=g;if(!Co(e,g)){if(ro(e))throw Error(o(418));g=rn(l.nextSibling);var t=lo;g&&Co(e,g)?Io(t,l):(e.flags=-4097&e.flags|2,no=!1,lo=e)}}else{if(ro(e))throw Error(o(418));e.flags=-4097&e.flags|2,no=!1,lo=e}}}function io(e){for(e=e.return;null!==e&&5!==e.tag&&3!==e.tag&&13!==e.tag;)e=e.return;lo=e}function co(e){if(e!==lo)return!1;if(!no)return io(e),no=!0,!1;var g;if((g=3!==e.tag)&&!(g=5!==e.tag)&&(g="head"!==(g=e.type)&&"body"!==g&&!gn(e.type,e.memoizedProps)),g&&(g=to)){if(ro(e))throw so(),Error(o(418));for(;g;)Io(e,g),g=rn(g.nextSibling)}if(io(e),13===e.tag){if(!(e=null!==(e=e.memoizedState)?e.dehydrated:null))throw Error(o(317));e:{for(e=e.nextSibling,g=0;e;){if(8===e.nodeType){var l=e.data;if("/$"===l){if(0===g){to=rn(e.nextSibling);break e}g--}else"$"!==l&&"$!"!==l&&"$?"!==l||g++}e=e.nextSibling}to=null}}else to=lo?rn(e.stateNode.nextSibling):null;return!0}function so(){for(var e=to;e;)e=rn(e.nextSibling)}function uo(){to=lo=null,no=!1}function Ao(e){null===oo?oo=[e]:oo.push(e)}var mo=h.ReactCurrentBatchConfig;function bo(e,g){if(e&&e.defaultProps){for(var l in g=N({},g),e=e.defaultProps)void 0===g[l]&&(g[l]=e[l]);return g}return g}var po=Sn(null),Zo=null,ho=null,Go=null;function yo(){Go=ho=Zo=null}function Bo(e){var g=po.current;Vn(po),e._currentValue=g}function So(e,g,l){for(;null!==e;){var t=e.alternate;if((e.childLanes&g)!==g?(e.childLanes|=g,null!==t&&(t.childLanes|=g)):null!==t&&(t.childLanes&g)!==g&&(t.childLanes|=g),e===l)break;e=e.return}}function Vo(e,g){Zo=e,Go=ho=null,null!==(e=e.dependencies)&&null!==e.firstContext&&(0!=(e.lanes&g)&&(hC=!0),e.firstContext=null)}function Wo(e){var g=e._currentValue;if(Go!==e)if(e={context:e,memoizedValue:g,next:null},null===ho){if(null===Zo)throw Error(o(308));ho=e,Zo.dependencies={lanes:0,firstContext:e}}else ho=ho.next=e;return g}var Ro=null;function fo(e){null===Ro?Ro=[e]:Ro.push(e)}function vo(e,g,l,t){var n=g.interleaved;return null===n?(l.next=l,fo(g)):(l.next=n.next,n.next=l),g.interleaved=l,ko(e,t)}function ko(e,g){e.lanes|=g;var l=e.alternate;for(null!==l&&(l.lanes|=g),l=e,e=e.return;null!==e;)e.childLanes|=g,null!==(l=e.alternate)&&(l.childLanes|=g),l=e,e=e.return;return 3===l.tag?l.stateNode:null}var Xo=!1;function Jo(e){e.updateQueue={baseState:e.memoizedState,firstBaseUpdate:null,lastBaseUpdate:null,shared:{pending:null,interleaved:null,lanes:0},effects:null}}function wo(e,g){e=e.updateQueue,g.updateQueue===e&&(g.updateQueue={baseState:e.baseState,firstBaseUpdate:e.firstBaseUpdate,lastBaseUpdate:e.lastBaseUpdate,shared:e.shared,effects:e.effects})}function Yo(e,g){return{eventTime:e,lane:g,tag:0,payload:null,callback:null,next:null}}function Ho(e,g,l){var t=e.updateQueue;if(null===t)return null;if(t=t.shared,0!=(2&vr)){var n=t.pending;return null===n?g.next=g:(g.next=n.next,n.next=g),t.pending=g,ko(e,l)}return null===(n=t.interleaved)?(g.next=g,fo(t)):(g.next=n.next,n.next=g),t.interleaved=g,ko(e,l)}function Fo(e,g,l){if(null!==(g=g.updateQueue)&&(g=g.shared,0!=(4194240&l))){var t=g.lanes;l|=t&=e.pendingLanes,g.lanes=l,pg(e,l)}}function No(e,g){var l=e.updateQueue,t=e.alternate;if(null!==t&&l===(t=t.updateQueue)){var n=null,o=null;if(null!==(l=l.firstBaseUpdate)){do{var I={eventTime:l.eventTime,lane:l.lane,tag:l.tag,payload:l.payload,callback:l.callback,next:null};null===o?n=o=I:o=o.next=I,l=l.next}while(null!==l);null===o?n=o=g:o=o.next=g}else n=o=g;return l={baseState:t.baseState,firstBaseUpdate:n,lastBaseUpdate:o,shared:t.shared,effects:t.effects},void(e.updateQueue=l)}null===(e=l.lastBaseUpdate)?l.firstBaseUpdate=g:e.next=g,l.lastBaseUpdate=g}function Ko(e,g,l,t){var n=e.updateQueue;Xo=!1;var o=n.firstBaseUpdate,I=n.lastBaseUpdate,C=n.shared.pending;if(null!==C){n.shared.pending=null;var r=C,a=r.next;r.next=null,null===I?o=a:I.next=a,I=r;var i=e.alternate;null!==i&&(C=(i=i.updateQueue).lastBaseUpdate)!==I&&(null===C?i.firstBaseUpdate=a:C.next=a,i.lastBaseUpdate=r)}if(null!==o){var c=n.baseState;for(I=0,i=a=r=null,C=o;;){var s=C.lane,d=C.eventTime;if((t&s)===s){null!==i&&(i=i.next={eventTime:d,lane:0,tag:C.tag,payload:C.payload,callback:C.callback,next:null});e:{var u=e,A=C;switch(s=g,d=l,A.tag){case 1:if("function"==typeof(u=A.payload)){c=u.call(d,c,s);break e}c=u;break e;case 3:u.flags=-65537&u.flags|128;case 0:if(null==(s="function"==typeof(u=A.payload)?u.call(d,c,s):u))break e;c=N({},c,s);break e;case 2:Xo=!0}}null!==C.callback&&0!==C.lane&&(e.flags|=64,null===(s=n.effects)?n.effects=[C]:s.push(C))}else d={eventTime:d,lane:s,tag:C.tag,payload:C.payload,callback:C.callback,next:null},null===i?(a=i=d,r=c):i=i.next=d,I|=s;if(null===(C=C.next)){if(null===(C=n.shared.pending))break;C=(s=C).next,s.next=null,n.lastBaseUpdate=s,n.shared.pending=null}}if(null===i&&(r=c),n.baseState=r,n.firstBaseUpdate=a,n.lastBaseUpdate=i,null!==(g=n.shared.interleaved)){n=g;do{I|=n.lane,n=n.next}while(n!==g)}else null===o&&(n.shared.lanes=0);Nr|=I,e.lanes=I,e.memoizedState=c}}function xo(e,g,l){if(e=g.effects,g.effects=null,null!==e)for(g=0;g<e.length;g++){var t=e[g],n=t.callback;if(null!==n){if(t.callback=null,t=l,"function"!=typeof n)throw Error(o(191,n));n.call(t)}}}var Mo=(new t.Component).refs;function zo(e,g,l,t){l=null==(l=l(t,g=e.memoizedState))?g:N({},g,l),e.memoizedState=l,0===e.lanes&&(e.updateQueue.baseState=l)}var Eo={isMounted:function(e){return!!(e=e._reactInternals)&&Ee(e)===e},enqueueSetState:function(e,g,l){e=e._reactInternals;var t=ga(),n=la(e),o=Yo(t,n);o.payload=g,null!=l&&(o.callback=l),null!==(g=Ho(e,o,n))&&(ta(g,e,n,t),Fo(g,e,n))},enqueueReplaceState:function(e,g,l){e=e._reactInternals;var t=ga(),n=la(e),o=Yo(t,n);o.tag=1,o.payload=g,null!=l&&(o.callback=l),null!==(g=Ho(e,o,n))&&(ta(g,e,n,t),Fo(g,e,n))},enqueueForceUpdate:function(e,g){e=e._reactInternals;var l=ga(),t=la(e),n=Yo(l,t);n.tag=2,null!=g&&(n.callback=g),null!==(g=Ho(e,n,t))&&(ta(g,e,t,l),Fo(g,e,t))}};function Lo(e,g,l,t,n,o,I){return"function"==typeof(e=e.stateNode).shouldComponentUpdate?e.shouldComponentUpdate(t,o,I):!(g.prototype&&g.prototype.isPureReactComponent&&Ct(l,t)&&Ct(n,o))}function Uo(e,g,l){var t=!1,n=Rn,o=g.contextType;return"object"==typeof o&&null!==o?o=Wo(o):(n=Jn(g)?kn:fn.current,o=(t=null!=(t=g.contextTypes))?Xn(e,n):Rn),g=new g(l,o),e.memoizedState=null!==g.state&&void 0!==g.state?g.state:null,g.updater=Eo,e.stateNode=g,g._reactInternals=e,t&&((e=e.stateNode).__reactInternalMemoizedUnmaskedChildContext=n,e.__reactInternalMemoizedMaskedChildContext=o),g}function Qo(e,g,l,t){e=g.state,"function"==typeof g.componentWillReceiveProps&&g.componentWillReceiveProps(l,t),"function"==typeof g.UNSAFE_componentWillReceiveProps&&g.UNSAFE_componentWillReceiveProps(l,t),g.state!==e&&Eo.enqueueReplaceState(g,g.state,null)}function Do(e,g,l,t){var n=e.stateNode;n.props=l,n.state=e.memoizedState,n.refs=Mo,Jo(e);var o=g.contextType;"object"==typeof o&&null!==o?n.context=Wo(o):(o=Jn(g)?kn:fn.current,n.context=Xn(e,o)),n.state=e.memoizedState,"function"==typeof(o=g.getDerivedStateFromProps)&&(zo(e,g,o,l),n.state=e.memoizedState),"function"==typeof g.getDerivedStateFromProps||"function"==typeof n.getSnapshotBeforeUpdate||"function"!=typeof n.UNSAFE_componentWillMount&&"function"!=typeof n.componentWillMount||(g=n.state,"function"==typeof n.componentWillMount&&n.componentWillMount(),"function"==typeof n.UNSAFE_componentWillMount&&n.UNSAFE_componentWillMount(),g!==n.state&&Eo.enqueueReplaceState(n,n.state,null),Ko(e,l,n,t),n.state=e.memoizedState),"function"==typeof n.componentDidMount&&(e.flags|=4194308)}function To(e,g,l){if(null!==(e=l.ref)&&"function"!=typeof e&&"object"!=typeof e){if(l._owner){if(l=l._owner){if(1!==l.tag)throw Error(o(309));var t=l.stateNode}if(!t)throw Error(o(147,e));var n=t,I=""+e;return null!==g&&null!==g.ref&&"function"==typeof g.ref&&g.ref._stringRef===I?g.ref:(g=function(e){var g=n.refs;g===Mo&&(g=n.refs={}),null===e?delete g[I]:g[I]=e},g._stringRef=I,g)}if("string"!=typeof e)throw Error(o(284));if(!l._owner)throw Error(o(290,e))}return e}function Po(e,g){throw e=Object.prototype.toString.call(g),Error(o(31,"[object Object]"===e?"object with keys {"+Object.keys(g).join(", ")+"}":e))}function jo(e){return(0,e._init)(e._payload)}function Oo(e){function g(g,l){if(e){var t=g.deletions;null===t?(g.deletions=[l],g.flags|=16):t.push(l)}}function l(l,t){if(!e)return null;for(;null!==t;)g(l,t),t=t.sibling;return null}function t(e,g){for(e=new Map;null!==g;)null!==g.key?e.set(g.key,g):e.set(g.index,g),g=g.sibling;return e}function n(e,g){return(e=Ya(e,g)).index=0,e.sibling=null,e}function I(g,l,t){return g.index=t,e?null!==(t=g.alternate)?(t=t.index)<l?(g.flags|=2,l):t:(g.flags|=2,l):(g.flags|=1048576,l)}function C(g){return e&&null===g.alternate&&(g.flags|=2),g}function r(e,g,l,t){return null===g||6!==g.tag?((g=Ka(l,e.mode,t)).return=e,g):((g=n(g,l)).return=e,g)}function a(e,g,l,t){var o=l.type;return o===B?c(e,g,l.props.children,t,l.key):null!==g&&(g.elementType===o||"object"==typeof o&&null!==o&&o.$$typeof===J&&jo(o)===g.type)?((t=n(g,l.props)).ref=To(e,g,l),t.return=e,t):((t=Ha(l.type,l.key,l.props,null,e.mode,t)).ref=To(e,g,l),t.return=e,t)}function i(e,g,l,t){return null===g||4!==g.tag||g.stateNode.containerInfo!==l.containerInfo||g.stateNode.implementation!==l.implementation?((g=xa(l,e.mode,t)).return=e,g):((g=n(g,l.children||[])).return=e,g)}function c(e,g,l,t,o){return null===g||7!==g.tag?((g=Fa(l,e.mode,t,o)).return=e,g):((g=n(g,l)).return=e,g)}function s(e,g,l){if("string"==typeof g&&""!==g||"number"==typeof g)return(g=Ka(""+g,e.mode,l)).return=e,g;if("object"==typeof g&&null!==g){switch(g.$$typeof){case G:return(l=Ha(g.type,g.key,g.props,null,e.mode,l)).ref=To(e,null,g),l.return=e,l;case y:return(g=xa(g,e.mode,l)).return=e,g;case J:return s(e,(0,g._init)(g._payload),l)}if(ge(g)||H(g))return(g=Fa(g,e.mode,l,null)).return=e,g;Po(e,g)}return null}function d(e,g,l,t){var n=null!==g?g.key:null;if("string"==typeof l&&""!==l||"number"==typeof l)return null!==n?null:r(e,g,""+l,t);if("object"==typeof l&&null!==l){switch(l.$$typeof){case G:return l.key===n?a(e,g,l,t):null;case y:return l.key===n?i(e,g,l,t):null;case J:return d(e,g,(n=l._init)(l._payload),t)}if(ge(l)||H(l))return null!==n?null:c(e,g,l,t,null);Po(e,l)}return null}function u(e,g,l,t,n){if("string"==typeof t&&""!==t||"number"==typeof t)return r(g,e=e.get(l)||null,""+t,n);if("object"==typeof t&&null!==t){switch(t.$$typeof){case G:return a(g,e=e.get(null===t.key?l:t.key)||null,t,n);case y:return i(g,e=e.get(null===t.key?l:t.key)||null,t,n);case J:return u(e,g,l,(0,t._init)(t._payload),n)}if(ge(t)||H(t))return c(g,e=e.get(l)||null,t,n,null);Po(g,t)}return null}function A(n,o,C,r){for(var a=null,i=null,c=o,A=o=0,m=null;null!==c&&A<C.length;A++){c.index>A?(m=c,c=null):m=c.sibling;var b=d(n,c,C[A],r);if(null===b){null===c&&(c=m);break}e&&c&&null===b.alternate&&g(n,c),o=I(b,o,A),null===i?a=b:i.sibling=b,i=b,c=m}if(A===C.length)return l(n,c),no&&$n(n,A),a;if(null===c){for(;A<C.length;A++)null!==(c=s(n,C[A],r))&&(o=I(c,o,A),null===i?a=c:i.sibling=c,i=c);return no&&$n(n,A),a}for(c=t(n,c);A<C.length;A++)null!==(m=u(c,n,A,C[A],r))&&(e&&null!==m.alternate&&c.delete(null===m.key?A:m.key),o=I(m,o,A),null===i?a=m:i.sibling=m,i=m);return e&&c.forEach((function(e){return g(n,e)})),no&&$n(n,A),a}function m(n,C,r,a){var i=H(r);if("function"!=typeof i)throw Error(o(150));if(null==(r=i.call(r)))throw Error(o(151));for(var c=i=null,A=C,m=C=0,b=null,p=r.next();null!==A&&!p.done;m++,p=r.next()){A.index>m?(b=A,A=null):b=A.sibling;var Z=d(n,A,p.value,a);if(null===Z){null===A&&(A=b);break}e&&A&&null===Z.alternate&&g(n,A),C=I(Z,C,m),null===c?i=Z:c.sibling=Z,c=Z,A=b}if(p.done)return l(n,A),no&&$n(n,m),i;if(null===A){for(;!p.done;m++,p=r.next())null!==(p=s(n,p.value,a))&&(C=I(p,C,m),null===c?i=p:c.sibling=p,c=p);return no&&$n(n,m),i}for(A=t(n,A);!p.done;m++,p=r.next())null!==(p=u(A,n,m,p.value,a))&&(e&&null!==p.alternate&&A.delete(null===p.key?m:p.key),C=I(p,C,m),null===c?i=p:c.sibling=p,c=p);return e&&A.forEach((function(e){return g(n,e)})),no&&$n(n,m),i}return function e(t,o,I,r){if("object"==typeof I&&null!==I&&I.type===B&&null===I.key&&(I=I.props.children),"object"==typeof I&&null!==I){switch(I.$$typeof){case G:e:{for(var a=I.key,i=o;null!==i;){if(i.key===a){if((a=I.type)===B){if(7===i.tag){l(t,i.sibling),(o=n(i,I.props.children)).return=t,t=o;break e}}else if(i.elementType===a||"object"==typeof a&&null!==a&&a.$$typeof===J&&jo(a)===i.type){l(t,i.sibling),(o=n(i,I.props)).ref=To(t,i,I),o.return=t,t=o;break e}l(t,i);break}g(t,i),i=i.sibling}I.type===B?((o=Fa(I.props.children,t.mode,r,I.key)).return=t,t=o):((r=Ha(I.type,I.key,I.props,null,t.mode,r)).ref=To(t,o,I),r.return=t,t=r)}return C(t);case y:e:{for(i=I.key;null!==o;){if(o.key===i){if(4===o.tag&&o.stateNode.containerInfo===I.containerInfo&&o.stateNode.implementation===I.implementation){l(t,o.sibling),(o=n(o,I.children||[])).return=t,t=o;break e}l(t,o);break}g(t,o),o=o.sibling}(o=xa(I,t.mode,r)).return=t,t=o}return C(t);case J:return e(t,o,(i=I._init)(I._payload),r)}if(ge(I))return A(t,o,I,r);if(H(I))return m(t,o,I,r);Po(t,I)}return"string"==typeof I&&""!==I||"number"==typeof I?(I=""+I,null!==o&&6===o.tag?(l(t,o.sibling),(o=n(o,I)).return=t,t=o):(l(t,o),(o=Ka(I,t.mode,r)).return=t,t=o),C(t)):l(t,o)}}var qo=Oo(!0),$o=Oo(!1),_o={},eI=Sn(_o),gI=Sn(_o),lI=Sn(_o);function tI(e){if(e===_o)throw Error(o(174));return e}function nI(e,g){switch(Wn(lI,g),Wn(gI,e),Wn(eI,_o),e=g.nodeType){case 9:case 11:g=(g=g.documentElement)?g.namespaceURI:re(null,"");break;default:g=re(g=(e=8===e?g.parentNode:g).namespaceURI||null,e=e.tagName)}Vn(eI),Wn(eI,g)}function oI(){Vn(eI),Vn(gI),Vn(lI)}function II(e){tI(lI.current);var g=tI(eI.current),l=re(g,e.type);g!==l&&(Wn(gI,e),Wn(eI,l))}function CI(e){gI.current===e&&(Vn(eI),Vn(gI))}var rI=Sn(0);function aI(e){for(var g=e;null!==g;){if(13===g.tag){var l=g.memoizedState;if(null!==l&&(null===(l=l.dehydrated)||"$?"===l.data||"$!"===l.data))return g}else if(19===g.tag&&void 0!==g.memoizedProps.revealOrder){if(0!=(128&g.flags))return g}else if(null!==g.child){g.child.return=g,g=g.child;continue}if(g===e)break;for(;null===g.sibling;){if(null===g.return||g.return===e)return null;g=g.return}g.sibling.return=g.return,g=g.sibling}return null}var iI=[];function cI(){for(var e=0;e<iI.length;e++)iI[e]._workInProgressVersionPrimary=null;iI.length=0}var sI=h.ReactCurrentDispatcher,dI=h.ReactCurrentBatchConfig,uI=0,AI=null,mI=null,bI=null,pI=!1,ZI=!1,hI=0,GI=0;function yI(){throw Error(o(321))}function BI(e,g){if(null===g)return!1;for(var l=0;l<g.length&&l<e.length;l++)if(!It(e[l],g[l]))return!1;return!0}function SI(e,g,l,t,n,I){if(uI=I,AI=g,g.memoizedState=null,g.updateQueue=null,g.lanes=0,sI.current=null===e||null===e.memoizedState?CC:rC,e=l(t,n),ZI){I=0;do{if(ZI=!1,hI=0,25<=I)throw Error(o(301));I+=1,bI=mI=null,g.updateQueue=null,sI.current=aC,e=l(t,n)}while(ZI)}if(sI.current=IC,g=null!==mI&&null!==mI.next,uI=0,bI=mI=AI=null,pI=!1,g)throw Error(o(300));return e}function VI(){var e=0!==hI;return hI=0,e}function WI(){var e={memoizedState:null,baseState:null,baseQueue:null,queue:null,next:null};return null===bI?AI.memoizedState=bI=e:bI=bI.next=e,bI}function RI(){if(null===mI){var e=AI.alternate;e=null!==e?e.memoizedState:null}else e=mI.next;var g=null===bI?AI.memoizedState:bI.next;if(null!==g)bI=g,mI=e;else{if(null===e)throw Error(o(310));e={memoizedState:(mI=e).memoizedState,baseState:mI.baseState,baseQueue:mI.baseQueue,queue:mI.queue,next:null},null===bI?AI.memoizedState=bI=e:bI=bI.next=e}return bI}function fI(e,g){return"function"==typeof g?g(e):g}function vI(e){var g=RI(),l=g.queue;if(null===l)throw Error(o(311));l.lastRenderedReducer=e;var t=mI,n=t.baseQueue,I=l.pending;if(null!==I){if(null!==n){var C=n.next;n.next=I.next,I.next=C}t.baseQueue=n=I,l.pending=null}if(null!==n){I=n.next,t=t.baseState;var r=C=null,a=null,i=I;do{var c=i.lane;if((uI&c)===c)null!==a&&(a=a.next={lane:0,action:i.action,hasEagerState:i.hasEagerState,eagerState:i.eagerState,next:null}),t=i.hasEagerState?i.eagerState:e(t,i.action);else{var s={lane:c,action:i.action,hasEagerState:i.hasEagerState,eagerState:i.eagerState,next:null};null===a?(r=a=s,C=t):a=a.next=s,AI.lanes|=c,Nr|=c}i=i.next}while(null!==i&&i!==I);null===a?C=t:a.next=r,It(t,g.memoizedState)||(hC=!0),g.memoizedState=t,g.baseState=C,g.baseQueue=a,l.lastRenderedState=t}if(null!==(e=l.interleaved)){n=e;do{I=n.lane,AI.lanes|=I,Nr|=I,n=n.next}while(n!==e)}else null===n&&(l.lanes=0);return[g.memoizedState,l.dispatch]}function kI(e){var g=RI(),l=g.queue;if(null===l)throw Error(o(311));l.lastRenderedReducer=e;var t=l.dispatch,n=l.pending,I=g.memoizedState;if(null!==n){l.pending=null;var C=n=n.next;do{I=e(I,C.action),C=C.next}while(C!==n);It(I,g.memoizedState)||(hC=!0),g.memoizedState=I,null===g.baseQueue&&(g.baseState=I),l.lastRenderedState=I}return[I,t]}function XI(){}function JI(e,g){var l=AI,t=RI(),n=g(),I=!It(t.memoizedState,n);if(I&&(t.memoizedState=n,hC=!0),t=t.queue,UI(HI.bind(null,l,t,e),[e]),t.getSnapshot!==g||I||null!==bI&&1&bI.memoizedState.tag){if(l.flags|=2048,xI(9,YI.bind(null,l,t,n,g),void 0,null),null===kr)throw Error(o(349));0!=(30&uI)||wI(l,g,n)}return n}function wI(e,g,l){e.flags|=16384,e={getSnapshot:g,value:l},null===(g=AI.updateQueue)?(g={lastEffect:null,stores:null},AI.updateQueue=g,g.stores=[e]):null===(l=g.stores)?g.stores=[e]:l.push(e)}function YI(e,g,l,t){g.value=l,g.getSnapshot=t,FI(g)&&NI(e)}function HI(e,g,l){return l((function(){FI(g)&&NI(e)}))}function FI(e){var g=e.getSnapshot;e=e.value;try{var l=g();return!It(e,l)}catch(e){return!0}}function NI(e){var g=ko(e,1);null!==g&&ta(g,e,1,-1)}function KI(e){var g=WI();return"function"==typeof e&&(e=e()),g.memoizedState=g.baseState=e,e={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:fI,lastRenderedState:e},g.queue=e,e=e.dispatch=lC.bind(null,AI,e),[g.memoizedState,e]}function xI(e,g,l,t){return e={tag:e,create:g,destroy:l,deps:t,next:null},null===(g=AI.updateQueue)?(g={lastEffect:null,stores:null},AI.updateQueue=g,g.lastEffect=e.next=e):null===(l=g.lastEffect)?g.lastEffect=e.next=e:(t=l.next,l.next=e,e.next=t,g.lastEffect=e),e}function MI(){return RI().memoizedState}function zI(e,g,l,t){var n=WI();AI.flags|=e,n.memoizedState=xI(1|g,l,void 0,void 0===t?null:t)}function EI(e,g,l,t){var n=RI();t=void 0===t?null:t;var o=void 0;if(null!==mI){var I=mI.memoizedState;if(o=I.destroy,null!==t&&BI(t,I.deps))return void(n.memoizedState=xI(g,l,o,t))}AI.flags|=e,n.memoizedState=xI(1|g,l,o,t)}function LI(e,g){return zI(8390656,8,e,g)}function UI(e,g){return EI(2048,8,e,g)}function QI(e,g){return EI(4,2,e,g)}function DI(e,g){return EI(4,4,e,g)}function TI(e,g){return"function"==typeof g?(e=e(),g(e),function(){g(null)}):null!=g?(e=e(),g.current=e,function(){g.current=null}):void 0}function PI(e,g,l){return l=null!=l?l.concat([e]):null,EI(4,4,TI.bind(null,g,e),l)}function jI(){}function OI(e,g){var l=RI();g=void 0===g?null:g;var t=l.memoizedState;return null!==t&&null!==g&&BI(g,t[1])?t[0]:(l.memoizedState=[e,g],e)}function qI(e,g){var l=RI();g=void 0===g?null:g;var t=l.memoizedState;return null!==t&&null!==g&&BI(g,t[1])?t[0]:(e=e(),l.memoizedState=[e,g],e)}function $I(e,g,l){return 0==(21&uI)?(e.baseState&&(e.baseState=!1,hC=!0),e.memoizedState=l):(It(l,g)||(l=Ag(),AI.lanes|=l,Nr|=l,e.baseState=!0),g)}function _I(e,g){var l=Zg;Zg=0!==l&&4>l?l:4,e(!0);var t=dI.transition;dI.transition={};try{e(!1),g()}finally{Zg=l,dI.transition=t}}function eC(){return RI().memoizedState}function gC(e,g,l){var t=la(e);l={lane:t,action:l,hasEagerState:!1,eagerState:null,next:null},tC(e)?nC(g,l):null!==(l=vo(e,g,l,t))&&(ta(l,e,t,ga()),oC(l,g,t))}function lC(e,g,l){var t=la(e),n={lane:t,action:l,hasEagerState:!1,eagerState:null,next:null};if(tC(e))nC(g,n);else{var o=e.alternate;if(0===e.lanes&&(null===o||0===o.lanes)&&null!==(o=g.lastRenderedReducer))try{var I=g.lastRenderedState,C=o(I,l);if(n.hasEagerState=!0,n.eagerState=C,It(C,I)){var r=g.interleaved;return null===r?(n.next=n,fo(g)):(n.next=r.next,r.next=n),void(g.interleaved=n)}}catch(e){}null!==(l=vo(e,g,n,t))&&(ta(l,e,t,n=ga()),oC(l,g,t))}}function tC(e){var g=e.alternate;return e===AI||null!==g&&g===AI}function nC(e,g){ZI=pI=!0;var l=e.pending;null===l?g.next=g:(g.next=l.next,l.next=g),e.pending=g}function oC(e,g,l){if(0!=(4194240&l)){var t=g.lanes;l|=t&=e.pendingLanes,g.lanes=l,pg(e,l)}}var IC={readContext:Wo,useCallback:yI,useContext:yI,useEffect:yI,useImperativeHandle:yI,useInsertionEffect:yI,useLayoutEffect:yI,useMemo:yI,useReducer:yI,useRef:yI,useState:yI,useDebugValue:yI,useDeferredValue:yI,useTransition:yI,useMutableSource:yI,useSyncExternalStore:yI,useId:yI,unstable_isNewReconciler:!1},CC={readContext:Wo,useCallback:function(e,g){return WI().memoizedState=[e,void 0===g?null:g],e},useContext:Wo,useEffect:LI,useImperativeHandle:function(e,g,l){return l=null!=l?l.concat([e]):null,zI(4194308,4,TI.bind(null,g,e),l)},useLayoutEffect:function(e,g){return zI(4194308,4,e,g)},useInsertionEffect:function(e,g){return zI(4,2,e,g)},useMemo:function(e,g){var l=WI();return g=void 0===g?null:g,e=e(),l.memoizedState=[e,g],e},useReducer:function(e,g,l){var t=WI();return g=void 0!==l?l(g):g,t.memoizedState=t.baseState=g,e={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:e,lastRenderedState:g},t.queue=e,e=e.dispatch=gC.bind(null,AI,e),[t.memoizedState,e]},useRef:function(e){return e={current:e},WI().memoizedState=e},useState:KI,useDebugValue:jI,useDeferredValue:function(e){return WI().memoizedState=e},useTransition:function(){var e=KI(!1),g=e[0];return e=_I.bind(null,e[1]),WI().memoizedState=e,[g,e]},useMutableSource:function(){},useSyncExternalStore:function(e,g,l){var t=AI,n=WI();if(no){if(void 0===l)throw Error(o(407));l=l()}else{if(l=g(),null===kr)throw Error(o(349));0!=(30&uI)||wI(t,g,l)}n.memoizedState=l;var I={value:l,getSnapshot:g};return n.queue=I,LI(HI.bind(null,t,I,e),[e]),t.flags|=2048,xI(9,YI.bind(null,t,I,l,g),void 0,null),l},useId:function(){var e=WI(),g=kr.identifierPrefix;if(no){var l=qn;g=":"+g+"R"+(l=(On&~(1<<32-Ig(On)-1)).toString(32)+l),0<(l=hI++)&&(g+="H"+l.toString(32)),g+=":"}else g=":"+g+"r"+(l=GI++).toString(32)+":";return e.memoizedState=g},unstable_isNewReconciler:!1},rC={readContext:Wo,useCallback:OI,useContext:Wo,useEffect:UI,useImperativeHandle:PI,useInsertionEffect:QI,useLayoutEffect:DI,useMemo:qI,useReducer:vI,useRef:MI,useState:function(){return vI(fI)},useDebugValue:jI,useDeferredValue:function(e){return $I(RI(),mI.memoizedState,e)},useTransition:function(){return[vI(fI)[0],RI().memoizedState]},useMutableSource:XI,useSyncExternalStore:JI,useId:eC,unstable_isNewReconciler:!1},aC={readContext:Wo,useCallback:OI,useContext:Wo,useEffect:UI,useImperativeHandle:PI,useInsertionEffect:QI,useLayoutEffect:DI,useMemo:qI,useReducer:kI,useRef:MI,useState:function(){return kI(fI)},useDebugValue:jI,useDeferredValue:function(e){var g=RI();return null===mI?g.memoizedState=e:$I(g,mI.memoizedState,e)},useTransition:function(){return[kI(fI)[0],RI().memoizedState]},useMutableSource:XI,useSyncExternalStore:JI,useId:eC,unstable_isNewReconciler:!1};function iC(e,g){try{var l="",t=g;do{l+=z(t),t=t.return}while(t);var n=l}catch(e){n="\nError generating stack: "+e.message+"\n"+e.stack}return{value:e,source:g,stack:n,digest:null}}function cC(e,g,l){return{value:e,source:null,stack:null!=l?l:null,digest:null!=g?g:null}}function sC(e,g){try{console.error(g.value)}catch(e){setTimeout((function(){throw e}))}}var dC="function"==typeof WeakMap?WeakMap:Map;function uC(e,g,l){(l=Yo(-1,l)).tag=3,l.payload={element:null};var t=g.value;return l.callback=function(){Qr||(Qr=!0,Dr=t),sC(0,g)},l}function AC(e,g,l){(l=Yo(-1,l)).tag=3;var t=e.type.getDerivedStateFromError;if("function"==typeof t){var n=g.value;l.payload=function(){return t(n)},l.callback=function(){sC(0,g)}}var o=e.stateNode;return null!==o&&"function"==typeof o.componentDidCatch&&(l.callback=function(){sC(0,g),"function"!=typeof t&&(null===Tr?Tr=new Set([this]):Tr.add(this));var e=g.stack;this.componentDidCatch(g.value,{componentStack:null!==e?e:""})}),l}function mC(e,g,l){var t=e.pingCache;if(null===t){t=e.pingCache=new dC;var n=new Set;t.set(g,n)}else void 0===(n=t.get(g))&&(n=new Set,t.set(g,n));n.has(l)||(n.add(l),e=Wa.bind(null,e,g,l),g.then(e,e))}function bC(e){do{var g;if((g=13===e.tag)&&(g=null===(g=e.memoizedState)||null!==g.dehydrated),g)return e;e=e.return}while(null!==e);return null}function pC(e,g,l,t,n){return 0==(1&e.mode)?(e===g?e.flags|=65536:(e.flags|=128,l.flags|=131072,l.flags&=-52805,1===l.tag&&(null===l.alternate?l.tag=17:((g=Yo(-1,1)).tag=2,Ho(l,g,1))),l.lanes|=1),e):(e.flags|=65536,e.lanes=n,e)}var ZC=h.ReactCurrentOwner,hC=!1;function GC(e,g,l,t){g.child=null===e?$o(g,null,l,t):qo(g,e.child,l,t)}function yC(e,g,l,t,n){l=l.render;var o=g.ref;return Vo(g,n),t=SI(e,g,l,t,o,n),l=VI(),null===e||hC?(no&&l&&eo(g),g.flags|=1,GC(e,g,t,n),g.child):(g.updateQueue=e.updateQueue,g.flags&=-2053,e.lanes&=~n,QC(e,g,n))}function BC(e,g,l,t,n){if(null===e){var o=l.type;return"function"!=typeof o||wa(o)||void 0!==o.defaultProps||null!==l.compare||void 0!==l.defaultProps?((e=Ha(l.type,null,t,g,g.mode,n)).ref=g.ref,e.return=g,g.child=e):(g.tag=15,g.type=o,SC(e,g,o,t,n))}if(o=e.child,0==(e.lanes&n)){var I=o.memoizedProps;if((l=null!==(l=l.compare)?l:Ct)(I,t)&&e.ref===g.ref)return QC(e,g,n)}return g.flags|=1,(e=Ya(o,t)).ref=g.ref,e.return=g,g.child=e}function SC(e,g,l,t,n){if(null!==e){var o=e.memoizedProps;if(Ct(o,t)&&e.ref===g.ref){if(hC=!1,g.pendingProps=t=o,0==(e.lanes&n))return g.lanes=e.lanes,QC(e,g,n);0!=(131072&e.flags)&&(hC=!0)}}return RC(e,g,l,t,n)}function VC(e,g,l){var t=g.pendingProps,n=t.children,o=null!==e?e.memoizedState:null;if("hidden"===t.mode)if(0==(1&g.mode))g.memoizedState={baseLanes:0,cachePool:null,transitions:null},Wn(Yr,wr),wr|=l;else{if(0==(1073741824&l))return e=null!==o?o.baseLanes|l:l,g.lanes=g.childLanes=1073741824,g.memoizedState={baseLanes:e,cachePool:null,transitions:null},g.updateQueue=null,Wn(Yr,wr),wr|=e,null;g.memoizedState={baseLanes:0,cachePool:null,transitions:null},t=null!==o?o.baseLanes:l,Wn(Yr,wr),wr|=t}else null!==o?(t=o.baseLanes|l,g.memoizedState=null):t=l,Wn(Yr,wr),wr|=t;return GC(e,g,n,l),g.child}function WC(e,g){var l=g.ref;(null===e&&null!==l||null!==e&&e.ref!==l)&&(g.flags|=512,g.flags|=2097152)}function RC(e,g,l,t,n){var o=Jn(l)?kn:fn.current;return o=Xn(g,o),Vo(g,n),l=SI(e,g,l,t,o,n),t=VI(),null===e||hC?(no&&t&&eo(g),g.flags|=1,GC(e,g,l,n),g.child):(g.updateQueue=e.updateQueue,g.flags&=-2053,e.lanes&=~n,QC(e,g,n))}function fC(e,g,l,t,n){if(Jn(l)){var o=!0;Fn(g)}else o=!1;if(Vo(g,n),null===g.stateNode)UC(e,g),Uo(g,l,t),Do(g,l,t,n),t=!0;else if(null===e){var I=g.stateNode,C=g.memoizedProps;I.props=C;var r=I.context,a=l.contextType;a="object"==typeof a&&null!==a?Wo(a):Xn(g,a=Jn(l)?kn:fn.current);var i=l.getDerivedStateFromProps,c="function"==typeof i||"function"==typeof I.getSnapshotBeforeUpdate;c||"function"!=typeof I.UNSAFE_componentWillReceiveProps&&"function"!=typeof I.componentWillReceiveProps||(C!==t||r!==a)&&Qo(g,I,t,a),Xo=!1;var s=g.memoizedState;I.state=s,Ko(g,t,I,n),r=g.memoizedState,C!==t||s!==r||vn.current||Xo?("function"==typeof i&&(zo(g,l,i,t),r=g.memoizedState),(C=Xo||Lo(g,l,C,t,s,r,a))?(c||"function"!=typeof I.UNSAFE_componentWillMount&&"function"!=typeof I.componentWillMount||("function"==typeof I.componentWillMount&&I.componentWillMount(),"function"==typeof I.UNSAFE_componentWillMount&&I.UNSAFE_componentWillMount()),"function"==typeof I.componentDidMount&&(g.flags|=4194308)):("function"==typeof I.componentDidMount&&(g.flags|=4194308),g.memoizedProps=t,g.memoizedState=r),I.props=t,I.state=r,I.context=a,t=C):("function"==typeof I.componentDidMount&&(g.flags|=4194308),t=!1)}else{I=g.stateNode,wo(e,g),C=g.memoizedProps,a=g.type===g.elementType?C:bo(g.type,C),I.props=a,c=g.pendingProps,s=I.context,r="object"==typeof(r=l.contextType)&&null!==r?Wo(r):Xn(g,r=Jn(l)?kn:fn.current);var d=l.getDerivedStateFromProps;(i="function"==typeof d||"function"==typeof I.getSnapshotBeforeUpdate)||"function"!=typeof I.UNSAFE_componentWillReceiveProps&&"function"!=typeof I.componentWillReceiveProps||(C!==c||s!==r)&&Qo(g,I,t,r),Xo=!1,s=g.memoizedState,I.state=s,Ko(g,t,I,n);var u=g.memoizedState;C!==c||s!==u||vn.current||Xo?("function"==typeof d&&(zo(g,l,d,t),u=g.memoizedState),(a=Xo||Lo(g,l,a,t,s,u,r)||!1)?(i||"function"!=typeof I.UNSAFE_componentWillUpdate&&"function"!=typeof I.componentWillUpdate||("function"==typeof I.componentWillUpdate&&I.componentWillUpdate(t,u,r),"function"==typeof I.UNSAFE_componentWillUpdate&&I.UNSAFE_componentWillUpdate(t,u,r)),"function"==typeof I.componentDidUpdate&&(g.flags|=4),"function"==typeof I.getSnapshotBeforeUpdate&&(g.flags|=1024)):("function"!=typeof I.componentDidUpdate||C===e.memoizedProps&&s===e.memoizedState||(g.flags|=4),"function"!=typeof I.getSnapshotBeforeUpdate||C===e.memoizedProps&&s===e.memoizedState||(g.flags|=1024),g.memoizedProps=t,g.memoizedState=u),I.props=t,I.state=u,I.context=r,t=a):("function"!=typeof I.componentDidUpdate||C===e.memoizedProps&&s===e.memoizedState||(g.flags|=4),"function"!=typeof I.getSnapshotBeforeUpdate||C===e.memoizedProps&&s===e.memoizedState||(g.flags|=1024),t=!1)}return vC(e,g,l,t,o,n)}function vC(e,g,l,t,n,o){WC(e,g);var I=0!=(128&g.flags);if(!t&&!I)return n&&Nn(g,l,!1),QC(e,g,o);t=g.stateNode,ZC.current=g;var C=I&&"function"!=typeof l.getDerivedStateFromError?null:t.render();return g.flags|=1,null!==e&&I?(g.child=qo(g,e.child,null,o),g.child=qo(g,null,C,o)):GC(e,g,C,o),g.memoizedState=t.state,n&&Nn(g,l,!0),g.child}function kC(e){var g=e.stateNode;g.pendingContext?Yn(0,g.pendingContext,g.pendingContext!==g.context):g.context&&Yn(0,g.context,!1),nI(e,g.containerInfo)}function XC(e,g,l,t,n){return uo(),Ao(n),g.flags|=256,GC(e,g,l,t),g.child}var JC,wC,YC,HC,FC={dehydrated:null,treeContext:null,retryLane:0};function NC(e){return{baseLanes:e,cachePool:null,transitions:null}}function KC(e,g,l){var t,n=g.pendingProps,I=rI.current,C=!1,r=0!=(128&g.flags);if((t=r)||(t=(null===e||null!==e.memoizedState)&&0!=(2&I)),t?(C=!0,g.flags&=-129):null!==e&&null===e.memoizedState||(I|=1),Wn(rI,1&I),null===e)return ao(g),null!==(e=g.memoizedState)&&null!==(e=e.dehydrated)?(0==(1&g.mode)?g.lanes=1:"$!"===e.data?g.lanes=8:g.lanes=1073741824,null):(r=n.children,e=n.fallback,C?(n=g.mode,C=g.child,r={mode:"hidden",children:r},0==(1&n)&&null!==C?(C.childLanes=0,C.pendingProps=r):C=Na(r,n,0,null),e=Fa(e,n,l,null),C.return=g,e.return=g,C.sibling=e,g.child=C,g.child.memoizedState=NC(l),g.memoizedState=FC,e):xC(g,r));if(null!==(I=e.memoizedState)&&null!==(t=I.dehydrated))return function(e,g,l,t,n,I,C){if(l)return 256&g.flags?(g.flags&=-257,MC(e,g,C,t=cC(Error(o(422))))):null!==g.memoizedState?(g.child=e.child,g.flags|=128,null):(I=t.fallback,n=g.mode,t=Na({mode:"visible",children:t.children},n,0,null),(I=Fa(I,n,C,null)).flags|=2,t.return=g,I.return=g,t.sibling=I,g.child=t,0!=(1&g.mode)&&qo(g,e.child,null,C),g.child.memoizedState=NC(C),g.memoizedState=FC,I);if(0==(1&g.mode))return MC(e,g,C,null);if("$!"===n.data){if(t=n.nextSibling&&n.nextSibling.dataset)var r=t.dgst;return t=r,MC(e,g,C,t=cC(I=Error(o(419)),t,void 0))}if(r=0!=(C&e.childLanes),hC||r){if(null!==(t=kr)){switch(C&-C){case 4:n=2;break;case 16:n=8;break;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:n=32;break;case 536870912:n=268435456;break;default:n=0}0!==(n=0!=(n&(t.suspendedLanes|C))?0:n)&&n!==I.retryLane&&(I.retryLane=n,ko(e,n),ta(t,e,n,-1))}return ma(),MC(e,g,C,t=cC(Error(o(421))))}return"$?"===n.data?(g.flags|=128,g.child=e.child,g=fa.bind(null,e),n._reactRetry=g,null):(e=I.treeContext,to=rn(n.nextSibling),lo=g,no=!0,oo=null,null!==e&&(Tn[Pn++]=On,Tn[Pn++]=qn,Tn[Pn++]=jn,On=e.id,qn=e.overflow,jn=g),(g=xC(g,t.children)).flags|=4096,g)}(e,g,r,n,t,I,l);if(C){C=n.fallback,r=g.mode,t=(I=e.child).sibling;var a={mode:"hidden",children:n.children};return 0==(1&r)&&g.child!==I?((n=g.child).childLanes=0,n.pendingProps=a,g.deletions=null):(n=Ya(I,a)).subtreeFlags=14680064&I.subtreeFlags,null!==t?C=Ya(t,C):(C=Fa(C,r,l,null)).flags|=2,C.return=g,n.return=g,n.sibling=C,g.child=n,n=C,C=g.child,r=null===(r=e.child.memoizedState)?NC(l):{baseLanes:r.baseLanes|l,cachePool:null,transitions:r.transitions},C.memoizedState=r,C.childLanes=e.childLanes&~l,g.memoizedState=FC,n}return e=(C=e.child).sibling,n=Ya(C,{mode:"visible",children:n.children}),0==(1&g.mode)&&(n.lanes=l),n.return=g,n.sibling=null,null!==e&&(null===(l=g.deletions)?(g.deletions=[e],g.flags|=16):l.push(e)),g.child=n,g.memoizedState=null,n}function xC(e,g){return(g=Na({mode:"visible",children:g},e.mode,0,null)).return=e,e.child=g}function MC(e,g,l,t){return null!==t&&Ao(t),qo(g,e.child,null,l),(e=xC(g,g.pendingProps.children)).flags|=2,g.memoizedState=null,e}function zC(e,g,l){e.lanes|=g;var t=e.alternate;null!==t&&(t.lanes|=g),So(e.return,g,l)}function EC(e,g,l,t,n){var o=e.memoizedState;null===o?e.memoizedState={isBackwards:g,rendering:null,renderingStartTime:0,last:t,tail:l,tailMode:n}:(o.isBackwards=g,o.rendering=null,o.renderingStartTime=0,o.last=t,o.tail=l,o.tailMode=n)}function LC(e,g,l){var t=g.pendingProps,n=t.revealOrder,o=t.tail;if(GC(e,g,t.children,l),0!=(2&(t=rI.current)))t=1&t|2,g.flags|=128;else{if(null!==e&&0!=(128&e.flags))e:for(e=g.child;null!==e;){if(13===e.tag)null!==e.memoizedState&&zC(e,l,g);else if(19===e.tag)zC(e,l,g);else if(null!==e.child){e.child.return=e,e=e.child;continue}if(e===g)break e;for(;null===e.sibling;){if(null===e.return||e.return===g)break e;e=e.return}e.sibling.return=e.return,e=e.sibling}t&=1}if(Wn(rI,t),0==(1&g.mode))g.memoizedState=null;else switch(n){case"forwards":for(l=g.child,n=null;null!==l;)null!==(e=l.alternate)&&null===aI(e)&&(n=l),l=l.sibling;null===(l=n)?(n=g.child,g.child=null):(n=l.sibling,l.sibling=null),EC(g,!1,n,l,o);break;case"backwards":for(l=null,n=g.child,g.child=null;null!==n;){if(null!==(e=n.alternate)&&null===aI(e)){g.child=n;break}e=n.sibling,n.sibling=l,l=n,n=e}EC(g,!0,l,null,o);break;case"together":EC(g,!1,null,null,void 0);break;default:g.memoizedState=null}return g.child}function UC(e,g){0==(1&g.mode)&&null!==e&&(e.alternate=null,g.alternate=null,g.flags|=2)}function QC(e,g,l){if(null!==e&&(g.dependencies=e.dependencies),Nr|=g.lanes,0==(l&g.childLanes))return null;if(null!==e&&g.child!==e.child)throw Error(o(153));if(null!==g.child){for(l=Ya(e=g.child,e.pendingProps),g.child=l,l.return=g;null!==e.sibling;)e=e.sibling,(l=l.sibling=Ya(e,e.pendingProps)).return=g;l.sibling=null}return g.child}function DC(e,g){if(!no)switch(e.tailMode){case"hidden":g=e.tail;for(var l=null;null!==g;)null!==g.alternate&&(l=g),g=g.sibling;null===l?e.tail=null:l.sibling=null;break;case"collapsed":l=e.tail;for(var t=null;null!==l;)null!==l.alternate&&(t=l),l=l.sibling;null===t?g||null===e.tail?e.tail=null:e.tail.sibling=null:t.sibling=null}}function TC(e){var g=null!==e.alternate&&e.alternate.child===e.child,l=0,t=0;if(g)for(var n=e.child;null!==n;)l|=n.lanes|n.childLanes,t|=14680064&n.subtreeFlags,t|=14680064&n.flags,n.return=e,n=n.sibling;else for(n=e.child;null!==n;)l|=n.lanes|n.childLanes,t|=n.subtreeFlags,t|=n.flags,n.return=e,n=n.sibling;return e.subtreeFlags|=t,e.childLanes=l,g}function PC(e,g,l){var t=g.pendingProps;switch(go(g),g.tag){case 2:case 16:case 15:case 0:case 11:case 7:case 8:case 12:case 9:case 14:return TC(g),null;case 1:case 17:return Jn(g.type)&&wn(),TC(g),null;case 3:return t=g.stateNode,oI(),Vn(vn),Vn(fn),cI(),t.pendingContext&&(t.context=t.pendingContext,t.pendingContext=null),null!==e&&null!==e.child||(co(g)?g.flags|=4:null===e||e.memoizedState.isDehydrated&&0==(256&g.flags)||(g.flags|=1024,null!==oo&&(Ca(oo),oo=null))),wC(e,g),TC(g),null;case 5:CI(g);var n=tI(lI.current);if(l=g.type,null!==e&&null!=g.stateNode)YC(e,g,l,t,n),e.ref!==g.ref&&(g.flags|=512,g.flags|=2097152);else{if(!t){if(null===g.stateNode)throw Error(o(166));return TC(g),null}if(e=tI(eI.current),co(g)){t=g.stateNode,l=g.type;var I=g.memoizedProps;switch(t[sn]=g,t[dn]=I,e=0!=(1&g.mode),l){case"dialog":Kt("cancel",t),Kt("close",t);break;case"iframe":case"object":case"embed":Kt("load",t);break;case"video":case"audio":for(n=0;n<Yt.length;n++)Kt(Yt[n],t);break;case"source":Kt("error",t);break;case"img":case"image":case"link":Kt("error",t),Kt("load",t);break;case"details":Kt("toggle",t);break;case"input":O(t,I),Kt("invalid",t);break;case"select":t._wrapperState={wasMultiple:!!I.multiple},Kt("invalid",t);break;case"textarea":ne(t,I),Kt("invalid",t)}for(var r in pe(l,I),n=null,I)if(I.hasOwnProperty(r)){var a=I[r];"children"===r?"string"==typeof a?t.textContent!==a&&(!0!==I.suppressHydrationWarning&&qt(t.textContent,a,e),n=["children",a]):"number"==typeof a&&t.textContent!==""+a&&(!0!==I.suppressHydrationWarning&&qt(t.textContent,a,e),n=["children",""+a]):C.hasOwnProperty(r)&&null!=a&&"onScroll"===r&&Kt("scroll",t)}switch(l){case"input":D(t),_(t,I,!0);break;case"textarea":D(t),Ie(t);break;case"select":case"option":break;default:"function"==typeof I.onClick&&(t.onclick=$t)}t=n,g.updateQueue=t,null!==t&&(g.flags|=4)}else{r=9===n.nodeType?n:n.ownerDocument,"http://www.w3.org/1999/xhtml"===e&&(e=Ce(l)),"http://www.w3.org/1999/xhtml"===e?"script"===l?((e=r.createElement("div")).innerHTML="<script><\/script>",e=e.removeChild(e.firstChild)):"string"==typeof t.is?e=r.createElement(l,{is:t.is}):(e=r.createElement(l),"select"===l&&(r=e,t.multiple?r.multiple=!0:t.size&&(r.size=t.size))):e=r.createElementNS(e,l),e[sn]=g,e[dn]=t,JC(e,g,!1,!1),g.stateNode=e;e:{switch(r=Ze(l,t),l){case"dialog":Kt("cancel",e),Kt("close",e),n=t;break;case"iframe":case"object":case"embed":Kt("load",e),n=t;break;case"video":case"audio":for(n=0;n<Yt.length;n++)Kt(Yt[n],e);n=t;break;case"source":Kt("error",e),n=t;break;case"img":case"image":case"link":Kt("error",e),Kt("load",e),n=t;break;case"details":Kt("toggle",e),n=t;break;case"input":O(e,t),n=j(e,t),Kt("invalid",e);break;case"option":default:n=t;break;case"select":e._wrapperState={wasMultiple:!!t.multiple},n=N({},t,{value:void 0}),Kt("invalid",e);break;case"textarea":ne(e,t),n=te(e,t),Kt("invalid",e)}for(I in pe(l,n),a=n)if(a.hasOwnProperty(I)){var i=a[I];"style"===I?me(e,i):"dangerouslySetInnerHTML"===I?null!=(i=i?i.__html:void 0)&&ce(e,i):"children"===I?"string"==typeof i?("textarea"!==l||""!==i)&&se(e,i):"number"==typeof i&&se(e,""+i):"suppressContentEditableWarning"!==I&&"suppressHydrationWarning"!==I&&"autoFocus"!==I&&(C.hasOwnProperty(I)?null!=i&&"onScroll"===I&&Kt("scroll",e):null!=i&&Z(e,I,i,r))}switch(l){case"input":D(e),_(e,t,!1);break;case"textarea":D(e),Ie(e);break;case"option":null!=t.value&&e.setAttribute("value",""+U(t.value));break;case"select":e.multiple=!!t.multiple,null!=(I=t.value)?le(e,!!t.multiple,I,!1):null!=t.defaultValue&&le(e,!!t.multiple,t.defaultValue,!0);break;default:"function"==typeof n.onClick&&(e.onclick=$t)}switch(l){case"button":case"input":case"select":case"textarea":t=!!t.autoFocus;break e;case"img":t=!0;break e;default:t=!1}}t&&(g.flags|=4)}null!==g.ref&&(g.flags|=512,g.flags|=2097152)}return TC(g),null;case 6:if(e&&null!=g.stateNode)HC(e,g,e.memoizedProps,t);else{if("string"!=typeof t&&null===g.stateNode)throw Error(o(166));if(l=tI(lI.current),tI(eI.current),co(g)){if(t=g.stateNode,l=g.memoizedProps,t[sn]=g,(I=t.nodeValue!==l)&&null!==(e=lo))switch(e.tag){case 3:qt(t.nodeValue,l,0!=(1&e.mode));break;case 5:!0!==e.memoizedProps.suppressHydrationWarning&&qt(t.nodeValue,l,0!=(1&e.mode))}I&&(g.flags|=4)}else(t=(9===l.nodeType?l:l.ownerDocument).createTextNode(t))[sn]=g,g.stateNode=t}return TC(g),null;case 13:if(Vn(rI),t=g.memoizedState,null===e||null!==e.memoizedState&&null!==e.memoizedState.dehydrated){if(no&&null!==to&&0!=(1&g.mode)&&0==(128&g.flags))so(),uo(),g.flags|=98560,I=!1;else if(I=co(g),null!==t&&null!==t.dehydrated){if(null===e){if(!I)throw Error(o(318));if(!(I=null!==(I=g.memoizedState)?I.dehydrated:null))throw Error(o(317));I[sn]=g}else uo(),0==(128&g.flags)&&(g.memoizedState=null),g.flags|=4;TC(g),I=!1}else null!==oo&&(Ca(oo),oo=null),I=!0;if(!I)return 65536&g.flags?g:null}return 0!=(128&g.flags)?(g.lanes=l,g):((t=null!==t)!=(null!==e&&null!==e.memoizedState)&&t&&(g.child.flags|=8192,0!=(1&g.mode)&&(null===e||0!=(1&rI.current)?0===Hr&&(Hr=3):ma())),null!==g.updateQueue&&(g.flags|=4),TC(g),null);case 4:return oI(),wC(e,g),null===e&&zt(g.stateNode.containerInfo),TC(g),null;case 10:return Bo(g.type._context),TC(g),null;case 19:if(Vn(rI),null===(I=g.memoizedState))return TC(g),null;if(t=0!=(128&g.flags),null===(r=I.rendering))if(t)DC(I,!1);else{if(0!==Hr||null!==e&&0!=(128&e.flags))for(e=g.child;null!==e;){if(null!==(r=aI(e))){for(g.flags|=128,DC(I,!1),null!==(t=r.updateQueue)&&(g.updateQueue=t,g.flags|=4),g.subtreeFlags=0,t=l,l=g.child;null!==l;)e=t,(I=l).flags&=14680066,null===(r=I.alternate)?(I.childLanes=0,I.lanes=e,I.child=null,I.subtreeFlags=0,I.memoizedProps=null,I.memoizedState=null,I.updateQueue=null,I.dependencies=null,I.stateNode=null):(I.childLanes=r.childLanes,I.lanes=r.lanes,I.child=r.child,I.subtreeFlags=0,I.deletions=null,I.memoizedProps=r.memoizedProps,I.memoizedState=r.memoizedState,I.updateQueue=r.updateQueue,I.type=r.type,e=r.dependencies,I.dependencies=null===e?null:{lanes:e.lanes,firstContext:e.firstContext}),l=l.sibling;return Wn(rI,1&rI.current|2),g.child}e=e.sibling}null!==I.tail&&qe()>Lr&&(g.flags|=128,t=!0,DC(I,!1),g.lanes=4194304)}else{if(!t)if(null!==(e=aI(r))){if(g.flags|=128,t=!0,null!==(l=e.updateQueue)&&(g.updateQueue=l,g.flags|=4),DC(I,!0),null===I.tail&&"hidden"===I.tailMode&&!r.alternate&&!no)return TC(g),null}else 2*qe()-I.renderingStartTime>Lr&&1073741824!==l&&(g.flags|=128,t=!0,DC(I,!1),g.lanes=4194304);I.isBackwards?(r.sibling=g.child,g.child=r):(null!==(l=I.last)?l.sibling=r:g.child=r,I.last=r)}return null!==I.tail?(g=I.tail,I.rendering=g,I.tail=g.sibling,I.renderingStartTime=qe(),g.sibling=null,l=rI.current,Wn(rI,t?1&l|2:1&l),g):(TC(g),null);case 22:case 23:return sa(),t=null!==g.memoizedState,null!==e&&null!==e.memoizedState!==t&&(g.flags|=8192),t&&0!=(1&g.mode)?0!=(1073741824&wr)&&(TC(g),6&g.subtreeFlags&&(g.flags|=8192)):TC(g),null;case 24:case 25:return null}throw Error(o(156,g.tag))}function jC(e,g){switch(go(g),g.tag){case 1:return Jn(g.type)&&wn(),65536&(e=g.flags)?(g.flags=-65537&e|128,g):null;case 3:return oI(),Vn(vn),Vn(fn),cI(),0!=(65536&(e=g.flags))&&0==(128&e)?(g.flags=-65537&e|128,g):null;case 5:return CI(g),null;case 13:if(Vn(rI),null!==(e=g.memoizedState)&&null!==e.dehydrated){if(null===g.alternate)throw Error(o(340));uo()}return 65536&(e=g.flags)?(g.flags=-65537&e|128,g):null;case 19:return Vn(rI),null;case 4:return oI(),null;case 10:return Bo(g.type._context),null;case 22:case 23:return sa(),null;default:return null}}JC=function(e,g){for(var l=g.child;null!==l;){if(5===l.tag||6===l.tag)e.appendChild(l.stateNode);else if(4!==l.tag&&null!==l.child){l.child.return=l,l=l.child;continue}if(l===g)break;for(;null===l.sibling;){if(null===l.return||l.return===g)return;l=l.return}l.sibling.return=l.return,l=l.sibling}},wC=function(){},YC=function(e,g,l,t){var n=e.memoizedProps;if(n!==t){e=g.stateNode,tI(eI.current);var o,I=null;switch(l){case"input":n=j(e,n),t=j(e,t),I=[];break;case"select":n=N({},n,{value:void 0}),t=N({},t,{value:void 0}),I=[];break;case"textarea":n=te(e,n),t=te(e,t),I=[];break;default:"function"!=typeof n.onClick&&"function"==typeof t.onClick&&(e.onclick=$t)}for(i in pe(l,t),l=null,n)if(!t.hasOwnProperty(i)&&n.hasOwnProperty(i)&&null!=n[i])if("style"===i){var r=n[i];for(o in r)r.hasOwnProperty(o)&&(l||(l={}),l[o]="")}else"dangerouslySetInnerHTML"!==i&&"children"!==i&&"suppressContentEditableWarning"!==i&&"suppressHydrationWarning"!==i&&"autoFocus"!==i&&(C.hasOwnProperty(i)?I||(I=[]):(I=I||[]).push(i,null));for(i in t){var a=t[i];if(r=null!=n?n[i]:void 0,t.hasOwnProperty(i)&&a!==r&&(null!=a||null!=r))if("style"===i)if(r){for(o in r)!r.hasOwnProperty(o)||a&&a.hasOwnProperty(o)||(l||(l={}),l[o]="");for(o in a)a.hasOwnProperty(o)&&r[o]!==a[o]&&(l||(l={}),l[o]=a[o])}else l||(I||(I=[]),I.push(i,l)),l=a;else"dangerouslySetInnerHTML"===i?(a=a?a.__html:void 0,r=r?r.__html:void 0,null!=a&&r!==a&&(I=I||[]).push(i,a)):"children"===i?"string"!=typeof a&&"number"!=typeof a||(I=I||[]).push(i,""+a):"suppressContentEditableWarning"!==i&&"suppressHydrationWarning"!==i&&(C.hasOwnProperty(i)?(null!=a&&"onScroll"===i&&Kt("scroll",e),I||r===a||(I=[])):(I=I||[]).push(i,a))}l&&(I=I||[]).push("style",l);var i=I;(g.updateQueue=i)&&(g.flags|=4)}},HC=function(e,g,l,t){l!==t&&(g.flags|=4)};var OC=!1,qC=!1,$C="function"==typeof WeakSet?WeakSet:Set,_C=null;function er(e,g){var l=e.ref;if(null!==l)if("function"==typeof l)try{l(null)}catch(l){Va(e,g,l)}else l.current=null}function gr(e,g,l){try{l()}catch(l){Va(e,g,l)}}var lr=!1;function tr(e,g,l){var t=g.updateQueue;if(null!==(t=null!==t?t.lastEffect:null)){var n=t=t.next;do{if((n.tag&e)===e){var o=n.destroy;n.destroy=void 0,void 0!==o&&gr(g,l,o)}n=n.next}while(n!==t)}}function nr(e,g){if(null!==(g=null!==(g=g.updateQueue)?g.lastEffect:null)){var l=g=g.next;do{if((l.tag&e)===e){var t=l.create;l.destroy=t()}l=l.next}while(l!==g)}}function or(e){var g=e.ref;if(null!==g){var l=e.stateNode;e.tag,e=l,"function"==typeof g?g(e):g.current=e}}function Ir(e){var g=e.alternate;null!==g&&(e.alternate=null,Ir(g)),e.child=null,e.deletions=null,e.sibling=null,5===e.tag&&null!==(g=e.stateNode)&&(delete g[sn],delete g[dn],delete g[An],delete g[mn],delete g[bn]),e.stateNode=null,e.return=null,e.dependencies=null,e.memoizedProps=null,e.memoizedState=null,e.pendingProps=null,e.stateNode=null,e.updateQueue=null}function Cr(e){return 5===e.tag||3===e.tag||4===e.tag}function rr(e){e:for(;;){for(;null===e.sibling;){if(null===e.return||Cr(e.return))return null;e=e.return}for(e.sibling.return=e.return,e=e.sibling;5!==e.tag&&6!==e.tag&&18!==e.tag;){if(2&e.flags)continue e;if(null===e.child||4===e.tag)continue e;e.child.return=e,e=e.child}if(!(2&e.flags))return e.stateNode}}function ar(e,g,l){var t=e.tag;if(5===t||6===t)e=e.stateNode,g?8===l.nodeType?l.parentNode.insertBefore(e,g):l.insertBefore(e,g):(8===l.nodeType?(g=l.parentNode).insertBefore(e,l):(g=l).appendChild(e),null!=(l=l._reactRootContainer)||null!==g.onclick||(g.onclick=$t));else if(4!==t&&null!==(e=e.child))for(ar(e,g,l),e=e.sibling;null!==e;)ar(e,g,l),e=e.sibling}function ir(e,g,l){var t=e.tag;if(5===t||6===t)e=e.stateNode,g?l.insertBefore(e,g):l.appendChild(e);else if(4!==t&&null!==(e=e.child))for(ir(e,g,l),e=e.sibling;null!==e;)ir(e,g,l),e=e.sibling}var cr=null,sr=!1;function dr(e,g,l){for(l=l.child;null!==l;)ur(e,g,l),l=l.sibling}function ur(e,g,l){if(og&&"function"==typeof og.onCommitFiberUnmount)try{og.onCommitFiberUnmount(ng,l)}catch(e){}switch(l.tag){case 5:qC||er(l,g);case 6:var t=cr,n=sr;cr=null,dr(e,g,l),sr=n,null!==(cr=t)&&(sr?(e=cr,l=l.stateNode,8===e.nodeType?e.parentNode.removeChild(l):e.removeChild(l)):cr.removeChild(l.stateNode));break;case 18:null!==cr&&(sr?(e=cr,l=l.stateNode,8===e.nodeType?Cn(e.parentNode,l):1===e.nodeType&&Cn(e,l),Eg(e)):Cn(cr,l.stateNode));break;case 4:t=cr,n=sr,cr=l.stateNode.containerInfo,sr=!0,dr(e,g,l),cr=t,sr=n;break;case 0:case 11:case 14:case 15:if(!qC&&null!==(t=l.updateQueue)&&null!==(t=t.lastEffect)){n=t=t.next;do{var o=n,I=o.destroy;o=o.tag,void 0!==I&&(0!=(2&o)||0!=(4&o))&&gr(l,g,I),n=n.next}while(n!==t)}dr(e,g,l);break;case 1:if(!qC&&(er(l,g),"function"==typeof(t=l.stateNode).componentWillUnmount))try{t.props=l.memoizedProps,t.state=l.memoizedState,t.componentWillUnmount()}catch(e){Va(l,g,e)}dr(e,g,l);break;case 21:dr(e,g,l);break;case 22:1&l.mode?(qC=(t=qC)||null!==l.memoizedState,dr(e,g,l),qC=t):dr(e,g,l);break;default:dr(e,g,l)}}function Ar(e){var g=e.updateQueue;if(null!==g){e.updateQueue=null;var l=e.stateNode;null===l&&(l=e.stateNode=new $C),g.forEach((function(g){var t=va.bind(null,e,g);l.has(g)||(l.add(g),g.then(t,t))}))}}function mr(e,g){var l=g.deletions;if(null!==l)for(var t=0;t<l.length;t++){var n=l[t];try{var I=e,C=g,r=C;e:for(;null!==r;){switch(r.tag){case 5:cr=r.stateNode,sr=!1;break e;case 3:case 4:cr=r.stateNode.containerInfo,sr=!0;break e}r=r.return}if(null===cr)throw Error(o(160));ur(I,C,n),cr=null,sr=!1;var a=n.alternate;null!==a&&(a.return=null),n.return=null}catch(e){Va(n,g,e)}}if(12854&g.subtreeFlags)for(g=g.child;null!==g;)br(g,e),g=g.sibling}function br(e,g){var l=e.alternate,t=e.flags;switch(e.tag){case 0:case 11:case 14:case 15:if(mr(g,e),pr(e),4&t){try{tr(3,e,e.return),nr(3,e)}catch(g){Va(e,e.return,g)}try{tr(5,e,e.return)}catch(g){Va(e,e.return,g)}}break;case 1:mr(g,e),pr(e),512&t&&null!==l&&er(l,l.return);break;case 5:if(mr(g,e),pr(e),512&t&&null!==l&&er(l,l.return),32&e.flags){var n=e.stateNode;try{se(n,"")}catch(g){Va(e,e.return,g)}}if(4&t&&null!=(n=e.stateNode)){var I=e.memoizedProps,C=null!==l?l.memoizedProps:I,r=e.type,a=e.updateQueue;if(e.updateQueue=null,null!==a)try{"input"===r&&"radio"===I.type&&null!=I.name&&q(n,I),Ze(r,C);var i=Ze(r,I);for(C=0;C<a.length;C+=2){var c=a[C],s=a[C+1];"style"===c?me(n,s):"dangerouslySetInnerHTML"===c?ce(n,s):"children"===c?se(n,s):Z(n,c,s,i)}switch(r){case"input":$(n,I);break;case"textarea":oe(n,I);break;case"select":var d=n._wrapperState.wasMultiple;n._wrapperState.wasMultiple=!!I.multiple;var u=I.value;null!=u?le(n,!!I.multiple,u,!1):d!==!!I.multiple&&(null!=I.defaultValue?le(n,!!I.multiple,I.defaultValue,!0):le(n,!!I.multiple,I.multiple?[]:"",!1))}n[dn]=I}catch(g){Va(e,e.return,g)}}break;case 6:if(mr(g,e),pr(e),4&t){if(null===e.stateNode)throw Error(o(162));n=e.stateNode,I=e.memoizedProps;try{n.nodeValue=I}catch(g){Va(e,e.return,g)}}break;case 3:if(mr(g,e),pr(e),4&t&&null!==l&&l.memoizedState.isDehydrated)try{Eg(g.containerInfo)}catch(g){Va(e,e.return,g)}break;case 4:default:mr(g,e),pr(e);break;case 13:mr(g,e),pr(e),8192&(n=e.child).flags&&(I=null!==n.memoizedState,n.stateNode.isHidden=I,!I||null!==n.alternate&&null!==n.alternate.memoizedState||(Er=qe())),4&t&&Ar(e);break;case 22:if(c=null!==l&&null!==l.memoizedState,1&e.mode?(qC=(i=qC)||c,mr(g,e),qC=i):mr(g,e),pr(e),8192&t){if(i=null!==e.memoizedState,(e.stateNode.isHidden=i)&&!c&&0!=(1&e.mode))for(_C=e,c=e.child;null!==c;){for(s=_C=c;null!==_C;){switch(u=(d=_C).child,d.tag){case 0:case 11:case 14:case 15:tr(4,d,d.return);break;case 1:er(d,d.return);var A=d.stateNode;if("function"==typeof A.componentWillUnmount){t=d,l=d.return;try{g=t,A.props=g.memoizedProps,A.state=g.memoizedState,A.componentWillUnmount()}catch(e){Va(t,l,e)}}break;case 5:er(d,d.return);break;case 22:if(null!==d.memoizedState){yr(s);continue}}null!==u?(u.return=d,_C=u):yr(s)}c=c.sibling}e:for(c=null,s=e;;){if(5===s.tag){if(null===c){c=s;try{n=s.stateNode,i?"function"==typeof(I=n.style).setProperty?I.setProperty("display","none","important"):I.display="none":(r=s.stateNode,C=null!=(a=s.memoizedProps.style)&&a.hasOwnProperty("display")?a.display:null,r.style.display=Ae("display",C))}catch(g){Va(e,e.return,g)}}}else if(6===s.tag){if(null===c)try{s.stateNode.nodeValue=i?"":s.memoizedProps}catch(g){Va(e,e.return,g)}}else if((22!==s.tag&&23!==s.tag||null===s.memoizedState||s===e)&&null!==s.child){s.child.return=s,s=s.child;continue}if(s===e)break e;for(;null===s.sibling;){if(null===s.return||s.return===e)break e;c===s&&(c=null),s=s.return}c===s&&(c=null),s.sibling.return=s.return,s=s.sibling}}break;case 19:mr(g,e),pr(e),4&t&&Ar(e);case 21:}}function pr(e){var g=e.flags;if(2&g){try{e:{for(var l=e.return;null!==l;){if(Cr(l)){var t=l;break e}l=l.return}throw Error(o(160))}switch(t.tag){case 5:var n=t.stateNode;32&t.flags&&(se(n,""),t.flags&=-33),ir(e,rr(e),n);break;case 3:case 4:var I=t.stateNode.containerInfo;ar(e,rr(e),I);break;default:throw Error(o(161))}}catch(g){Va(e,e.return,g)}e.flags&=-3}4096&g&&(e.flags&=-4097)}function Zr(e,g,l){_C=e,hr(e,g,l)}function hr(e,g,l){for(var t=0!=(1&e.mode);null!==_C;){var n=_C,o=n.child;if(22===n.tag&&t){var I=null!==n.memoizedState||OC;if(!I){var C=n.alternate,r=null!==C&&null!==C.memoizedState||qC;C=OC;var a=qC;if(OC=I,(qC=r)&&!a)for(_C=n;null!==_C;)r=(I=_C).child,22===I.tag&&null!==I.memoizedState?Br(n):null!==r?(r.return=I,_C=r):Br(n);for(;null!==o;)_C=o,hr(o,g,l),o=o.sibling;_C=n,OC=C,qC=a}Gr(e)}else 0!=(8772&n.subtreeFlags)&&null!==o?(o.return=n,_C=o):Gr(e)}}function Gr(e){for(;null!==_C;){var g=_C;if(0!=(8772&g.flags)){var l=g.alternate;try{if(0!=(8772&g.flags))switch(g.tag){case 0:case 11:case 15:qC||nr(5,g);break;case 1:var t=g.stateNode;if(4&g.flags&&!qC)if(null===l)t.componentDidMount();else{var n=g.elementType===g.type?l.memoizedProps:bo(g.type,l.memoizedProps);t.componentDidUpdate(n,l.memoizedState,t.__reactInternalSnapshotBeforeUpdate)}var I=g.updateQueue;null!==I&&xo(g,I,t);break;case 3:var C=g.updateQueue;if(null!==C){if(l=null,null!==g.child)switch(g.child.tag){case 5:case 1:l=g.child.stateNode}xo(g,C,l)}break;case 5:var r=g.stateNode;if(null===l&&4&g.flags){l=r;var a=g.memoizedProps;switch(g.type){case"button":case"input":case"select":case"textarea":a.autoFocus&&l.focus();break;case"img":a.src&&(l.src=a.src)}}break;case 6:case 4:case 12:case 19:case 17:case 21:case 22:case 23:case 25:break;case 13:if(null===g.memoizedState){var i=g.alternate;if(null!==i){var c=i.memoizedState;if(null!==c){var s=c.dehydrated;null!==s&&Eg(s)}}}break;default:throw Error(o(163))}qC||512&g.flags&&or(g)}catch(e){Va(g,g.return,e)}}if(g===e){_C=null;break}if(null!==(l=g.sibling)){l.return=g.return,_C=l;break}_C=g.return}}function yr(e){for(;null!==_C;){var g=_C;if(g===e){_C=null;break}var l=g.sibling;if(null!==l){l.return=g.return,_C=l;break}_C=g.return}}function Br(e){for(;null!==_C;){var g=_C;try{switch(g.tag){case 0:case 11:case 15:var l=g.return;try{nr(4,g)}catch(e){Va(g,l,e)}break;case 1:var t=g.stateNode;if("function"==typeof t.componentDidMount){var n=g.return;try{t.componentDidMount()}catch(e){Va(g,n,e)}}var o=g.return;try{or(g)}catch(e){Va(g,o,e)}break;case 5:var I=g.return;try{or(g)}catch(e){Va(g,I,e)}}}catch(e){Va(g,g.return,e)}if(g===e){_C=null;break}var C=g.sibling;if(null!==C){C.return=g.return,_C=C;break}_C=g.return}}var Sr,Vr=Math.ceil,Wr=h.ReactCurrentDispatcher,Rr=h.ReactCurrentOwner,fr=h.ReactCurrentBatchConfig,vr=0,kr=null,Xr=null,Jr=0,wr=0,Yr=Sn(0),Hr=0,Fr=null,Nr=0,Kr=0,xr=0,Mr=null,zr=null,Er=0,Lr=1/0,Ur=null,Qr=!1,Dr=null,Tr=null,Pr=!1,jr=null,Or=0,qr=0,$r=null,_r=-1,ea=0;function ga(){return 0!=(6&vr)?qe():-1!==_r?_r:_r=qe()}function la(e){return 0==(1&e.mode)?1:0!=(2&vr)&&0!==Jr?Jr&-Jr:null!==mo.transition?(0===ea&&(ea=Ag()),ea):0!==(e=Zg)?e:e=void 0===(e=window.event)?16:Og(e.type)}function ta(e,g,l,t){if(50<qr)throw qr=0,$r=null,Error(o(185));bg(e,l,t),0!=(2&vr)&&e===kr||(e===kr&&(0==(2&vr)&&(Kr|=l),4===Hr&&ra(e,Jr)),na(e,t),1===l&&0===vr&&0==(1&g.mode)&&(Lr=qe()+500,xn&&En()))}function na(e,g){var l=e.callbackNode;!function(e,g){for(var l=e.suspendedLanes,t=e.pingedLanes,n=e.expirationTimes,o=e.pendingLanes;0<o;){var I=31-Ig(o),C=1<<I,r=n[I];-1===r?0!=(C&l)&&0==(C&t)||(n[I]=dg(C,g)):r<=g&&(e.expiredLanes|=C),o&=~C}}(e,g);var t=sg(e,e===kr?Jr:0);if(0===t)null!==l&&Pe(l),e.callbackNode=null,e.callbackPriority=0;else if(g=t&-t,e.callbackPriority!==g){if(null!=l&&Pe(l),1===g)0===e.tag?function(e){xn=!0,zn(e)}(aa.bind(null,e)):zn(aa.bind(null,e)),on((function(){0==(6&vr)&&En()})),l=null;else{switch(hg(t)){case 1:l=_e;break;case 4:l=eg;break;case 16:default:l=gg;break;case 536870912:l=tg}l=ka(l,oa.bind(null,e))}e.callbackPriority=g,e.callbackNode=l}}function oa(e,g){if(_r=-1,ea=0,0!=(6&vr))throw Error(o(327));var l=e.callbackNode;if(Ba()&&e.callbackNode!==l)return null;var t=sg(e,e===kr?Jr:0);if(0===t)return null;if(0!=(30&t)||0!=(t&e.expiredLanes)||g)g=ba(e,t);else{g=t;var n=vr;vr|=2;var I=Aa();for(kr===e&&Jr===g||(Ur=null,Lr=qe()+500,da(e,g));;)try{Za();break}catch(g){ua(e,g)}yo(),Wr.current=I,vr=n,null!==Xr?g=0:(kr=null,Jr=0,g=Hr)}if(0!==g){if(2===g&&0!==(n=ug(e))&&(t=n,g=Ia(e,n)),1===g)throw l=Fr,da(e,0),ra(e,t),na(e,qe()),l;if(6===g)ra(e,t);else{if(n=e.current.alternate,0==(30&t)&&!function(e){for(var g=e;;){if(16384&g.flags){var l=g.updateQueue;if(null!==l&&null!==(l=l.stores))for(var t=0;t<l.length;t++){var n=l[t],o=n.getSnapshot;n=n.value;try{if(!It(o(),n))return!1}catch(e){return!1}}}if(l=g.child,16384&g.subtreeFlags&&null!==l)l.return=g,g=l;else{if(g===e)break;for(;null===g.sibling;){if(null===g.return||g.return===e)return!0;g=g.return}g.sibling.return=g.return,g=g.sibling}}return!0}(n)&&(2===(g=ba(e,t))&&0!==(I=ug(e))&&(t=I,g=Ia(e,I)),1===g))throw l=Fr,da(e,0),ra(e,t),na(e,qe()),l;switch(e.finishedWork=n,e.finishedLanes=t,g){case 0:case 1:throw Error(o(345));case 2:case 5:ya(e,zr,Ur);break;case 3:if(ra(e,t),(130023424&t)===t&&10<(g=Er+500-qe())){if(0!==sg(e,0))break;if(((n=e.suspendedLanes)&t)!==t){ga(),e.pingedLanes|=e.suspendedLanes&n;break}e.timeoutHandle=ln(ya.bind(null,e,zr,Ur),g);break}ya(e,zr,Ur);break;case 4:if(ra(e,t),(4194240&t)===t)break;for(g=e.eventTimes,n=-1;0<t;){var C=31-Ig(t);I=1<<C,(C=g[C])>n&&(n=C),t&=~I}if(t=n,10<(t=(120>(t=qe()-t)?120:480>t?480:1080>t?1080:1920>t?1920:3e3>t?3e3:4320>t?4320:1960*Vr(t/1960))-t)){e.timeoutHandle=ln(ya.bind(null,e,zr,Ur),t);break}ya(e,zr,Ur);break;default:throw Error(o(329))}}}return na(e,qe()),e.callbackNode===l?oa.bind(null,e):null}function Ia(e,g){var l=Mr;return e.current.memoizedState.isDehydrated&&(da(e,g).flags|=256),2!==(e=ba(e,g))&&(g=zr,zr=l,null!==g&&Ca(g)),e}function Ca(e){null===zr?zr=e:zr.push.apply(zr,e)}function ra(e,g){for(g&=~xr,g&=~Kr,e.suspendedLanes|=g,e.pingedLanes&=~g,e=e.expirationTimes;0<g;){var l=31-Ig(g),t=1<<l;e[l]=-1,g&=~t}}function aa(e){if(0!=(6&vr))throw Error(o(327));Ba();var g=sg(e,0);if(0==(1&g))return na(e,qe()),null;var l=ba(e,g);if(0!==e.tag&&2===l){var t=ug(e);0!==t&&(g=t,l=Ia(e,t))}if(1===l)throw l=Fr,da(e,0),ra(e,g),na(e,qe()),l;if(6===l)throw Error(o(345));return e.finishedWork=e.current.alternate,e.finishedLanes=g,ya(e,zr,Ur),na(e,qe()),null}function ia(e,g){var l=vr;vr|=1;try{return e(g)}finally{0===(vr=l)&&(Lr=qe()+500,xn&&En())}}function ca(e){null!==jr&&0===jr.tag&&0==(6&vr)&&Ba();var g=vr;vr|=1;var l=fr.transition,t=Zg;try{if(fr.transition=null,Zg=1,e)return e()}finally{Zg=t,fr.transition=l,0==(6&(vr=g))&&En()}}function sa(){wr=Yr.current,Vn(Yr)}function da(e,g){e.finishedWork=null,e.finishedLanes=0;var l=e.timeoutHandle;if(-1!==l&&(e.timeoutHandle=-1,tn(l)),null!==Xr)for(l=Xr.return;null!==l;){var t=l;switch(go(t),t.tag){case 1:null!=(t=t.type.childContextTypes)&&wn();break;case 3:oI(),Vn(vn),Vn(fn),cI();break;case 5:CI(t);break;case 4:oI();break;case 13:case 19:Vn(rI);break;case 10:Bo(t.type._context);break;case 22:case 23:sa()}l=l.return}if(kr=e,Xr=e=Ya(e.current,null),Jr=wr=g,Hr=0,Fr=null,xr=Kr=Nr=0,zr=Mr=null,null!==Ro){for(g=0;g<Ro.length;g++)if(null!==(t=(l=Ro[g]).interleaved)){l.interleaved=null;var n=t.next,o=l.pending;if(null!==o){var I=o.next;o.next=n,t.next=I}l.pending=t}Ro=null}return e}function ua(e,g){for(;;){var l=Xr;try{if(yo(),sI.current=IC,pI){for(var t=AI.memoizedState;null!==t;){var n=t.queue;null!==n&&(n.pending=null),t=t.next}pI=!1}if(uI=0,bI=mI=AI=null,ZI=!1,hI=0,Rr.current=null,null===l||null===l.return){Hr=1,Fr=g,Xr=null;break}e:{var I=e,C=l.return,r=l,a=g;if(g=Jr,r.flags|=32768,null!==a&&"object"==typeof a&&"function"==typeof a.then){var i=a,c=r,s=c.tag;if(0==(1&c.mode)&&(0===s||11===s||15===s)){var d=c.alternate;d?(c.updateQueue=d.updateQueue,c.memoizedState=d.memoizedState,c.lanes=d.lanes):(c.updateQueue=null,c.memoizedState=null)}var u=bC(C);if(null!==u){u.flags&=-257,pC(u,C,r,0,g),1&u.mode&&mC(I,i,g),a=i;var A=(g=u).updateQueue;if(null===A){var m=new Set;m.add(a),g.updateQueue=m}else A.add(a);break e}if(0==(1&g)){mC(I,i,g),ma();break e}a=Error(o(426))}else if(no&&1&r.mode){var b=bC(C);if(null!==b){0==(65536&b.flags)&&(b.flags|=256),pC(b,C,r,0,g),Ao(iC(a,r));break e}}I=a=iC(a,r),4!==Hr&&(Hr=2),null===Mr?Mr=[I]:Mr.push(I),I=C;do{switch(I.tag){case 3:I.flags|=65536,g&=-g,I.lanes|=g,No(I,uC(0,a,g));break e;case 1:r=a;var p=I.type,Z=I.stateNode;if(0==(128&I.flags)&&("function"==typeof p.getDerivedStateFromError||null!==Z&&"function"==typeof Z.componentDidCatch&&(null===Tr||!Tr.has(Z)))){I.flags|=65536,g&=-g,I.lanes|=g,No(I,AC(I,r,g));break e}}I=I.return}while(null!==I)}Ga(l)}catch(e){g=e,Xr===l&&null!==l&&(Xr=l=l.return);continue}break}}function Aa(){var e=Wr.current;return Wr.current=IC,null===e?IC:e}function ma(){0!==Hr&&3!==Hr&&2!==Hr||(Hr=4),null===kr||0==(268435455&Nr)&&0==(268435455&Kr)||ra(kr,Jr)}function ba(e,g){var l=vr;vr|=2;var t=Aa();for(kr===e&&Jr===g||(Ur=null,da(e,g));;)try{pa();break}catch(g){ua(e,g)}if(yo(),vr=l,Wr.current=t,null!==Xr)throw Error(o(261));return kr=null,Jr=0,Hr}function pa(){for(;null!==Xr;)ha(Xr)}function Za(){for(;null!==Xr&&!je();)ha(Xr)}function ha(e){var g=Sr(e.alternate,e,wr);e.memoizedProps=e.pendingProps,null===g?Ga(e):Xr=g,Rr.current=null}function Ga(e){var g=e;do{var l=g.alternate;if(e=g.return,0==(32768&g.flags)){if(null!==(l=PC(l,g,wr)))return void(Xr=l)}else{if(null!==(l=jC(l,g)))return l.flags&=32767,void(Xr=l);if(null===e)return Hr=6,void(Xr=null);e.flags|=32768,e.subtreeFlags=0,e.deletions=null}if(null!==(g=g.sibling))return void(Xr=g);Xr=g=e}while(null!==g);0===Hr&&(Hr=5)}function ya(e,g,l){var t=Zg,n=fr.transition;try{fr.transition=null,Zg=1,function(e,g,l,t){do{Ba()}while(null!==jr);if(0!=(6&vr))throw Error(o(327));l=e.finishedWork;var n=e.finishedLanes;if(null===l)return null;if(e.finishedWork=null,e.finishedLanes=0,l===e.current)throw Error(o(177));e.callbackNode=null,e.callbackPriority=0;var I=l.lanes|l.childLanes;if(function(e,g){var l=e.pendingLanes&~g;e.pendingLanes=g,e.suspendedLanes=0,e.pingedLanes=0,e.expiredLanes&=g,e.mutableReadLanes&=g,e.entangledLanes&=g,g=e.entanglements;var t=e.eventTimes;for(e=e.expirationTimes;0<l;){var n=31-Ig(l),o=1<<n;g[n]=0,t[n]=-1,e[n]=-1,l&=~o}}(e,I),e===kr&&(Xr=kr=null,Jr=0),0==(2064&l.subtreeFlags)&&0==(2064&l.flags)||Pr||(Pr=!0,ka(gg,(function(){return Ba(),null}))),I=0!=(15990&l.flags),0!=(15990&l.subtreeFlags)||I){I=fr.transition,fr.transition=null;var C=Zg;Zg=1;var r=vr;vr|=4,Rr.current=null,function(e,g){if(_t=Ug,st(e=ct())){if("selectionStart"in e)var l={start:e.selectionStart,end:e.selectionEnd};else e:{var t=(l=(l=e.ownerDocument)&&l.defaultView||window).getSelection&&l.getSelection();if(t&&0!==t.rangeCount){l=t.anchorNode;var n=t.anchorOffset,I=t.focusNode;t=t.focusOffset;try{l.nodeType,I.nodeType}catch(e){l=null;break e}var C=0,r=-1,a=-1,i=0,c=0,s=e,d=null;g:for(;;){for(var u;s!==l||0!==n&&3!==s.nodeType||(r=C+n),s!==I||0!==t&&3!==s.nodeType||(a=C+t),3===s.nodeType&&(C+=s.nodeValue.length),null!==(u=s.firstChild);)d=s,s=u;for(;;){if(s===e)break g;if(d===l&&++i===n&&(r=C),d===I&&++c===t&&(a=C),null!==(u=s.nextSibling))break;d=(s=d).parentNode}s=u}l=-1===r||-1===a?null:{start:r,end:a}}else l=null}l=l||{start:0,end:0}}else l=null;for(en={focusedElem:e,selectionRange:l},Ug=!1,_C=g;null!==_C;)if(e=(g=_C).child,0!=(1028&g.subtreeFlags)&&null!==e)e.return=g,_C=e;else for(;null!==_C;){g=_C;try{var A=g.alternate;if(0!=(1024&g.flags))switch(g.tag){case 0:case 11:case 15:case 5:case 6:case 4:case 17:break;case 1:if(null!==A){var m=A.memoizedProps,b=A.memoizedState,p=g.stateNode,Z=p.getSnapshotBeforeUpdate(g.elementType===g.type?m:bo(g.type,m),b);p.__reactInternalSnapshotBeforeUpdate=Z}break;case 3:var h=g.stateNode.containerInfo;1===h.nodeType?h.textContent="":9===h.nodeType&&h.documentElement&&h.removeChild(h.documentElement);break;default:throw Error(o(163))}}catch(e){Va(g,g.return,e)}if(null!==(e=g.sibling)){e.return=g.return,_C=e;break}_C=g.return}A=lr,lr=!1}(e,l),br(l,e),dt(en),Ug=!!_t,en=_t=null,e.current=l,Zr(l,e,n),Oe(),vr=r,Zg=C,fr.transition=I}else e.current=l;if(Pr&&(Pr=!1,jr=e,Or=n),0===(I=e.pendingLanes)&&(Tr=null),function(e){if(og&&"function"==typeof og.onCommitFiberRoot)try{og.onCommitFiberRoot(ng,e,void 0,128==(128&e.current.flags))}catch(e){}}(l.stateNode),na(e,qe()),null!==g)for(t=e.onRecoverableError,l=0;l<g.length;l++)t((n=g[l]).value,{componentStack:n.stack,digest:n.digest});if(Qr)throw Qr=!1,e=Dr,Dr=null,e;0!=(1&Or)&&0!==e.tag&&Ba(),0!=(1&(I=e.pendingLanes))?e===$r?qr++:(qr=0,$r=e):qr=0,En()}(e,g,l,t)}finally{fr.transition=n,Zg=t}return null}function Ba(){if(null!==jr){var e=hg(Or),g=fr.transition,l=Zg;try{if(fr.transition=null,Zg=16>e?16:e,null===jr)var t=!1;else{if(e=jr,jr=null,Or=0,0!=(6&vr))throw Error(o(331));var n=vr;for(vr|=4,_C=e.current;null!==_C;){var I=_C,C=I.child;if(0!=(16&_C.flags)){var r=I.deletions;if(null!==r){for(var a=0;a<r.length;a++){var i=r[a];for(_C=i;null!==_C;){var c=_C;switch(c.tag){case 0:case 11:case 15:tr(8,c,I)}var s=c.child;if(null!==s)s.return=c,_C=s;else for(;null!==_C;){var d=(c=_C).sibling,u=c.return;if(Ir(c),c===i){_C=null;break}if(null!==d){d.return=u,_C=d;break}_C=u}}}var A=I.alternate;if(null!==A){var m=A.child;if(null!==m){A.child=null;do{var b=m.sibling;m.sibling=null,m=b}while(null!==m)}}_C=I}}if(0!=(2064&I.subtreeFlags)&&null!==C)C.return=I,_C=C;else e:for(;null!==_C;){if(0!=(2048&(I=_C).flags))switch(I.tag){case 0:case 11:case 15:tr(9,I,I.return)}var p=I.sibling;if(null!==p){p.return=I.return,_C=p;break e}_C=I.return}}var Z=e.current;for(_C=Z;null!==_C;){var h=(C=_C).child;if(0!=(2064&C.subtreeFlags)&&null!==h)h.return=C,_C=h;else e:for(C=Z;null!==_C;){if(0!=(2048&(r=_C).flags))try{switch(r.tag){case 0:case 11:case 15:nr(9,r)}}catch(e){Va(r,r.return,e)}if(r===C){_C=null;break e}var G=r.sibling;if(null!==G){G.return=r.return,_C=G;break e}_C=r.return}}if(vr=n,En(),og&&"function"==typeof og.onPostCommitFiberRoot)try{og.onPostCommitFiberRoot(ng,e)}catch(e){}t=!0}return t}finally{Zg=l,fr.transition=g}}return!1}function Sa(e,g,l){e=Ho(e,g=uC(0,g=iC(l,g),1),1),g=ga(),null!==e&&(bg(e,1,g),na(e,g))}function Va(e,g,l){if(3===e.tag)Sa(e,e,l);else for(;null!==g;){if(3===g.tag){Sa(g,e,l);break}if(1===g.tag){var t=g.stateNode;if("function"==typeof g.type.getDerivedStateFromError||"function"==typeof t.componentDidCatch&&(null===Tr||!Tr.has(t))){g=Ho(g,e=AC(g,e=iC(l,e),1),1),e=ga(),null!==g&&(bg(g,1,e),na(g,e));break}}g=g.return}}function Wa(e,g,l){var t=e.pingCache;null!==t&&t.delete(g),g=ga(),e.pingedLanes|=e.suspendedLanes&l,kr===e&&(Jr&l)===l&&(4===Hr||3===Hr&&(130023424&Jr)===Jr&&500>qe()-Er?da(e,0):xr|=l),na(e,g)}function Ra(e,g){0===g&&(0==(1&e.mode)?g=1:(g=ig,0==(130023424&(ig<<=1))&&(ig=4194304)));var l=ga();null!==(e=ko(e,g))&&(bg(e,g,l),na(e,l))}function fa(e){var g=e.memoizedState,l=0;null!==g&&(l=g.retryLane),Ra(e,l)}function va(e,g){var l=0;switch(e.tag){case 13:var t=e.stateNode,n=e.memoizedState;null!==n&&(l=n.retryLane);break;case 19:t=e.stateNode;break;default:throw Error(o(314))}null!==t&&t.delete(g),Ra(e,l)}function ka(e,g){return Te(e,g)}function Xa(e,g,l,t){this.tag=e,this.key=l,this.sibling=this.child=this.return=this.stateNode=this.type=this.elementType=null,this.index=0,this.ref=null,this.pendingProps=g,this.dependencies=this.memoizedState=this.updateQueue=this.memoizedProps=null,this.mode=t,this.subtreeFlags=this.flags=0,this.deletions=null,this.childLanes=this.lanes=0,this.alternate=null}function Ja(e,g,l,t){return new Xa(e,g,l,t)}function wa(e){return!(!(e=e.prototype)||!e.isReactComponent)}function Ya(e,g){var l=e.alternate;return null===l?((l=Ja(e.tag,g,e.key,e.mode)).elementType=e.elementType,l.type=e.type,l.stateNode=e.stateNode,l.alternate=e,e.alternate=l):(l.pendingProps=g,l.type=e.type,l.flags=0,l.subtreeFlags=0,l.deletions=null),l.flags=14680064&e.flags,l.childLanes=e.childLanes,l.lanes=e.lanes,l.child=e.child,l.memoizedProps=e.memoizedProps,l.memoizedState=e.memoizedState,l.updateQueue=e.updateQueue,g=e.dependencies,l.dependencies=null===g?null:{lanes:g.lanes,firstContext:g.firstContext},l.sibling=e.sibling,l.index=e.index,l.ref=e.ref,l}function Ha(e,g,l,t,n,I){var C=2;if(t=e,"function"==typeof e)wa(e)&&(C=1);else if("string"==typeof e)C=5;else e:switch(e){case B:return Fa(l.children,n,I,g);case S:C=8,n|=8;break;case V:return(e=Ja(12,l,g,2|n)).elementType=V,e.lanes=I,e;case v:return(e=Ja(13,l,g,n)).elementType=v,e.lanes=I,e;case k:return(e=Ja(19,l,g,n)).elementType=k,e.lanes=I,e;case w:return Na(l,n,I,g);default:if("object"==typeof e&&null!==e)switch(e.$$typeof){case W:C=10;break e;case R:C=9;break e;case f:C=11;break e;case X:C=14;break e;case J:C=16,t=null;break e}throw Error(o(130,null==e?e:typeof e,""))}return(g=Ja(C,l,g,n)).elementType=e,g.type=t,g.lanes=I,g}function Fa(e,g,l,t){return(e=Ja(7,e,t,g)).lanes=l,e}function Na(e,g,l,t){return(e=Ja(22,e,t,g)).elementType=w,e.lanes=l,e.stateNode={isHidden:!1},e}function Ka(e,g,l){return(e=Ja(6,e,null,g)).lanes=l,e}function xa(e,g,l){return(g=Ja(4,null!==e.children?e.children:[],e.key,g)).lanes=l,g.stateNode={containerInfo:e.containerInfo,pendingChildren:null,implementation:e.implementation},g}function Ma(e,g,l,t,n){this.tag=g,this.containerInfo=e,this.finishedWork=this.pingCache=this.current=this.pendingChildren=null,this.timeoutHandle=-1,this.callbackNode=this.pendingContext=this.context=null,this.callbackPriority=0,this.eventTimes=mg(0),this.expirationTimes=mg(-1),this.entangledLanes=this.finishedLanes=this.mutableReadLanes=this.expiredLanes=this.pingedLanes=this.suspendedLanes=this.pendingLanes=0,this.entanglements=mg(0),this.identifierPrefix=t,this.onRecoverableError=n,this.mutableSourceEagerHydrationData=null}function za(e,g,l,t,n,o,I,C,r){return e=new Ma(e,g,l,C,r),1===g?(g=1,!0===o&&(g|=8)):g=0,o=Ja(3,null,null,g),e.current=o,o.stateNode=e,o.memoizedState={element:t,isDehydrated:l,cache:null,transitions:null,pendingSuspenseBoundaries:null},Jo(o),e}function Ea(e){if(!e)return Rn;e:{if(Ee(e=e._reactInternals)!==e||1!==e.tag)throw Error(o(170));var g=e;do{switch(g.tag){case 3:g=g.stateNode.context;break e;case 1:if(Jn(g.type)){g=g.stateNode.__reactInternalMemoizedMergedChildContext;break e}}g=g.return}while(null!==g);throw Error(o(171))}if(1===e.tag){var l=e.type;if(Jn(l))return Hn(e,l,g)}return g}function La(e,g,l,t,n,o,I,C,r){return(e=za(l,t,!0,e,0,o,0,C,r)).context=Ea(null),l=e.current,(o=Yo(t=ga(),n=la(l))).callback=null!=g?g:null,Ho(l,o,n),e.current.lanes=n,bg(e,n,t),na(e,t),e}function Ua(e,g,l,t){var n=g.current,o=ga(),I=la(n);return l=Ea(l),null===g.context?g.context=l:g.pendingContext=l,(g=Yo(o,I)).payload={element:e},null!==(t=void 0===t?null:t)&&(g.callback=t),null!==(e=Ho(n,g,I))&&(ta(e,n,I,o),Fo(e,n,I)),I}function Qa(e){return(e=e.current).child?(e.child.tag,e.child.stateNode):null}function Da(e,g){if(null!==(e=e.memoizedState)&&null!==e.dehydrated){var l=e.retryLane;e.retryLane=0!==l&&l<g?l:g}}function Ta(e,g){Da(e,g),(e=e.alternate)&&Da(e,g)}Sr=function(e,g,l){if(null!==e)if(e.memoizedProps!==g.pendingProps||vn.current)hC=!0;else{if(0==(e.lanes&l)&&0==(128&g.flags))return hC=!1,function(e,g,l){switch(g.tag){case 3:kC(g),uo();break;case 5:II(g);break;case 1:Jn(g.type)&&Fn(g);break;case 4:nI(g,g.stateNode.containerInfo);break;case 10:var t=g.type._context,n=g.memoizedProps.value;Wn(po,t._currentValue),t._currentValue=n;break;case 13:if(null!==(t=g.memoizedState))return null!==t.dehydrated?(Wn(rI,1&rI.current),g.flags|=128,null):0!=(l&g.child.childLanes)?KC(e,g,l):(Wn(rI,1&rI.current),null!==(e=QC(e,g,l))?e.sibling:null);Wn(rI,1&rI.current);break;case 19:if(t=0!=(l&g.childLanes),0!=(128&e.flags)){if(t)return LC(e,g,l);g.flags|=128}if(null!==(n=g.memoizedState)&&(n.rendering=null,n.tail=null,n.lastEffect=null),Wn(rI,rI.current),t)break;return null;case 22:case 23:return g.lanes=0,VC(e,g,l)}return QC(e,g,l)}(e,g,l);hC=0!=(131072&e.flags)}else hC=!1,no&&0!=(1048576&g.flags)&&_n(g,Dn,g.index);switch(g.lanes=0,g.tag){case 2:var t=g.type;UC(e,g),e=g.pendingProps;var n=Xn(g,fn.current);Vo(g,l),n=SI(null,g,t,e,n,l);var I=VI();return g.flags|=1,"object"==typeof n&&null!==n&&"function"==typeof n.render&&void 0===n.$$typeof?(g.tag=1,g.memoizedState=null,g.updateQueue=null,Jn(t)?(I=!0,Fn(g)):I=!1,g.memoizedState=null!==n.state&&void 0!==n.state?n.state:null,Jo(g),n.updater=Eo,g.stateNode=n,n._reactInternals=g,Do(g,t,e,l),g=vC(null,g,t,!0,I,l)):(g.tag=0,no&&I&&eo(g),GC(null,g,n,l),g=g.child),g;case 16:t=g.elementType;e:{switch(UC(e,g),e=g.pendingProps,t=(n=t._init)(t._payload),g.type=t,n=g.tag=function(e){if("function"==typeof e)return wa(e)?1:0;if(null!=e){if((e=e.$$typeof)===f)return 11;if(e===X)return 14}return 2}(t),e=bo(t,e),n){case 0:g=RC(null,g,t,e,l);break e;case 1:g=fC(null,g,t,e,l);break e;case 11:g=yC(null,g,t,e,l);break e;case 14:g=BC(null,g,t,bo(t.type,e),l);break e}throw Error(o(306,t,""))}return g;case 0:return t=g.type,n=g.pendingProps,RC(e,g,t,n=g.elementType===t?n:bo(t,n),l);case 1:return t=g.type,n=g.pendingProps,fC(e,g,t,n=g.elementType===t?n:bo(t,n),l);case 3:e:{if(kC(g),null===e)throw Error(o(387));t=g.pendingProps,n=(I=g.memoizedState).element,wo(e,g),Ko(g,t,null,l);var C=g.memoizedState;if(t=C.element,I.isDehydrated){if(I={element:t,isDehydrated:!1,cache:C.cache,pendingSuspenseBoundaries:C.pendingSuspenseBoundaries,transitions:C.transitions},g.updateQueue.baseState=I,g.memoizedState=I,256&g.flags){g=XC(e,g,t,l,n=iC(Error(o(423)),g));break e}if(t!==n){g=XC(e,g,t,l,n=iC(Error(o(424)),g));break e}for(to=rn(g.stateNode.containerInfo.firstChild),lo=g,no=!0,oo=null,l=$o(g,null,t,l),g.child=l;l;)l.flags=-3&l.flags|4096,l=l.sibling}else{if(uo(),t===n){g=QC(e,g,l);break e}GC(e,g,t,l)}g=g.child}return g;case 5:return II(g),null===e&&ao(g),t=g.type,n=g.pendingProps,I=null!==e?e.memoizedProps:null,C=n.children,gn(t,n)?C=null:null!==I&&gn(t,I)&&(g.flags|=32),WC(e,g),GC(e,g,C,l),g.child;case 6:return null===e&&ao(g),null;case 13:return KC(e,g,l);case 4:return nI(g,g.stateNode.containerInfo),t=g.pendingProps,null===e?g.child=qo(g,null,t,l):GC(e,g,t,l),g.child;case 11:return t=g.type,n=g.pendingProps,yC(e,g,t,n=g.elementType===t?n:bo(t,n),l);case 7:return GC(e,g,g.pendingProps,l),g.child;case 8:case 12:return GC(e,g,g.pendingProps.children,l),g.child;case 10:e:{if(t=g.type._context,n=g.pendingProps,I=g.memoizedProps,C=n.value,Wn(po,t._currentValue),t._currentValue=C,null!==I)if(It(I.value,C)){if(I.children===n.children&&!vn.current){g=QC(e,g,l);break e}}else for(null!==(I=g.child)&&(I.return=g);null!==I;){var r=I.dependencies;if(null!==r){C=I.child;for(var a=r.firstContext;null!==a;){if(a.context===t){if(1===I.tag){(a=Yo(-1,l&-l)).tag=2;var i=I.updateQueue;if(null!==i){var c=(i=i.shared).pending;null===c?a.next=a:(a.next=c.next,c.next=a),i.pending=a}}I.lanes|=l,null!==(a=I.alternate)&&(a.lanes|=l),So(I.return,l,g),r.lanes|=l;break}a=a.next}}else if(10===I.tag)C=I.type===g.type?null:I.child;else if(18===I.tag){if(null===(C=I.return))throw Error(o(341));C.lanes|=l,null!==(r=C.alternate)&&(r.lanes|=l),So(C,l,g),C=I.sibling}else C=I.child;if(null!==C)C.return=I;else for(C=I;null!==C;){if(C===g){C=null;break}if(null!==(I=C.sibling)){I.return=C.return,C=I;break}C=C.return}I=C}GC(e,g,n.children,l),g=g.child}return g;case 9:return n=g.type,t=g.pendingProps.children,Vo(g,l),t=t(n=Wo(n)),g.flags|=1,GC(e,g,t,l),g.child;case 14:return n=bo(t=g.type,g.pendingProps),BC(e,g,t,n=bo(t.type,n),l);case 15:return SC(e,g,g.type,g.pendingProps,l);case 17:return t=g.type,n=g.pendingProps,n=g.elementType===t?n:bo(t,n),UC(e,g),g.tag=1,Jn(t)?(e=!0,Fn(g)):e=!1,Vo(g,l),Uo(g,t,n),Do(g,t,n,l),vC(null,g,t,!0,e,l);case 19:return LC(e,g,l);case 22:return VC(e,g,l)}throw Error(o(156,g.tag))};var Pa="function"==typeof reportError?reportError:function(e){console.error(e)};function ja(e){this._internalRoot=e}function Oa(e){this._internalRoot=e}function qa(e){return!(!e||1!==e.nodeType&&9!==e.nodeType&&11!==e.nodeType)}function $a(e){return!(!e||1!==e.nodeType&&9!==e.nodeType&&11!==e.nodeType&&(8!==e.nodeType||" react-mount-point-unstable "!==e.nodeValue))}function _a(){}function ei(e,g,l,t,n){var o=l._reactRootContainer;if(o){var I=o;if("function"==typeof n){var C=n;n=function(){var e=Qa(I);C.call(e)}}Ua(g,I,e,n)}else I=function(e,g,l,t,n){if(n){if("function"==typeof t){var o=t;t=function(){var e=Qa(I);o.call(e)}}var I=La(g,t,e,0,null,!1,0,"",_a);return e._reactRootContainer=I,e[un]=I.current,zt(8===e.nodeType?e.parentNode:e),ca(),I}for(;n=e.lastChild;)e.removeChild(n);if("function"==typeof t){var C=t;t=function(){var e=Qa(r);C.call(e)}}var r=za(e,0,!1,null,0,!1,0,"",_a);return e._reactRootContainer=r,e[un]=r.current,zt(8===e.nodeType?e.parentNode:e),ca((function(){Ua(g,r,l,t)})),r}(l,g,e,n,t);return Qa(I)}Oa.prototype.render=ja.prototype.render=function(e){var g=this._internalRoot;if(null===g)throw Error(o(409));Ua(e,g,null,null)},Oa.prototype.unmount=ja.prototype.unmount=function(){var e=this._internalRoot;if(null!==e){this._internalRoot=null;var g=e.containerInfo;ca((function(){Ua(null,e,null,null)})),g[un]=null}},Oa.prototype.unstable_scheduleHydration=function(e){if(e){var g=Sg();e={blockedOn:null,target:e,priority:g};for(var l=0;l<wg.length&&0!==g&&g<wg[l].priority;l++);wg.splice(l,0,e),0===l&&Ng(e)}},Gg=function(e){switch(e.tag){case 3:var g=e.stateNode;if(g.current.memoizedState.isDehydrated){var l=cg(g.pendingLanes);0!==l&&(pg(g,1|l),na(g,qe()),0==(6&vr)&&(Lr=qe()+500,En()))}break;case 13:ca((function(){var g=ko(e,1);if(null!==g){var l=ga();ta(g,e,1,l)}})),Ta(e,1)}},yg=function(e){if(13===e.tag){var g=ko(e,134217728);null!==g&&ta(g,e,134217728,ga()),Ta(e,134217728)}},Bg=function(e){if(13===e.tag){var g=la(e),l=ko(e,g);null!==l&&ta(l,e,g,ga()),Ta(e,g)}},Sg=function(){return Zg},Vg=function(e,g){var l=Zg;try{return Zg=e,g()}finally{Zg=l}},ye=function(e,g,l){switch(g){case"input":if($(e,l),g=l.name,"radio"===l.type&&null!=g){for(l=e;l.parentNode;)l=l.parentNode;for(l=l.querySelectorAll("input[name="+JSON.stringify(""+g)+'][type="radio"]'),g=0;g<l.length;g++){var t=l[g];if(t!==e&&t.form===e.form){var n=Gn(t);if(!n)throw Error(o(90));T(t),$(t,n)}}}break;case"textarea":oe(e,l);break;case"select":null!=(g=l.value)&&le(e,!!l.multiple,g,!1)}},fe=ia,ve=ca;var gi={usingClientEntryPoint:!1,Events:[Zn,hn,Gn,We,Re,ia]},li={findFiberByHostInstance:pn,bundleType:0,version:"18.2.0",rendererPackageName:"react-dom"},ti={bundleType:li.bundleType,version:li.version,rendererPackageName:li.rendererPackageName,rendererConfig:li.rendererConfig,overrideHookState:null,overrideHookStateDeletePath:null,overrideHookStateRenamePath:null,overrideProps:null,overridePropsDeletePath:null,overridePropsRenamePath:null,setErrorHandler:null,setSuspenseHandler:null,scheduleUpdate:null,currentDispatcherRef:h.ReactCurrentDispatcher,findHostInstanceByFiber:function(e){return null===(e=Qe(e))?null:e.stateNode},findFiberByHostInstance:li.findFiberByHostInstance||function(){return null},findHostInstancesForRefresh:null,scheduleRefresh:null,scheduleRoot:null,setRefreshHandler:null,getCurrentFiber:null,reconcilerVersion:"18.2.0-next-9e3b772b8-20220608"};if("undefined"!=typeof __REACT_DEVTOOLS_GLOBAL_HOOK__){var ni=__REACT_DEVTOOLS_GLOBAL_HOOK__;if(!ni.isDisabled&&ni.supportsFiber)try{ng=ni.inject(ti),og=ni}catch(ie){}}g.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=gi,g.createPortal=function(e,g){var l=2<arguments.length&&void 0!==arguments[2]?arguments[2]:null;if(!qa(g))throw Error(o(200));return function(e,g,l){var t=3<arguments.length&&void 0!==arguments[3]?arguments[3]:null;return{$$typeof:y,key:null==t?null:""+t,children:e,containerInfo:g,implementation:l}}(e,g,null,l)},g.createRoot=function(e,g){if(!qa(e))throw Error(o(299));var l=!1,t="",n=Pa;return null!=g&&(!0===g.unstable_strictMode&&(l=!0),void 0!==g.identifierPrefix&&(t=g.identifierPrefix),void 0!==g.onRecoverableError&&(n=g.onRecoverableError)),g=za(e,1,!1,null,0,l,0,t,n),e[un]=g.current,zt(8===e.nodeType?e.parentNode:e),new ja(g)},g.findDOMNode=function(e){if(null==e)return null;if(1===e.nodeType)return e;var g=e._reactInternals;if(void 0===g){if("function"==typeof e.render)throw Error(o(188));throw e=Object.keys(e).join(","),Error(o(268,e))}return null===(e=Qe(g))?null:e.stateNode},g.flushSync=function(e){return ca(e)},g.hydrate=function(e,g,l){if(!$a(g))throw Error(o(200));return ei(null,e,g,!0,l)},g.hydrateRoot=function(e,g,l){if(!qa(e))throw Error(o(405));var t=null!=l&&l.hydratedSources||null,n=!1,I="",C=Pa;if(null!=l&&(!0===l.unstable_strictMode&&(n=!0),void 0!==l.identifierPrefix&&(I=l.identifierPrefix),void 0!==l.onRecoverableError&&(C=l.onRecoverableError)),g=La(g,null,e,1,null!=l?l:null,n,0,I,C),e[un]=g.current,zt(e),t)for(e=0;e<t.length;e++)n=(n=(l=t[e])._getVersion)(l._source),null==g.mutableSourceEagerHydrationData?g.mutableSourceEagerHydrationData=[l,n]:g.mutableSourceEagerHydrationData.push(l,n);return new Oa(g)},g.render=function(e,g,l){if(!$a(g))throw Error(o(200));return ei(null,e,g,!1,l)},g.unmountComponentAtNode=function(e){if(!$a(e))throw Error(o(40));return!!e._reactRootContainer&&(ca((function(){ei(null,null,e,!1,(function(){e._reactRootContainer=null,e[un]=null}))})),!0)},g.unstable_batchedUpdates=ia,g.unstable_renderSubtreeIntoContainer=function(e,g,l,t){if(!$a(l))throw Error(o(200));if(null==e||void 0===e._reactInternals)throw Error(o(38));return ei(e,g,l,!1,t)},g.version="18.2.0-next-9e3b772b8-20220608"},3935:(e,g,l)=>{"use strict";!function e(){if("undefined"!=typeof __REACT_DEVTOOLS_GLOBAL_HOOK__&&"function"==typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE)try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(e)}catch(e){console.error(e)}}(),e.exports=l(4448)},9921:(e,g)=>{"use strict";Symbol.for("react.element"),Symbol.for("react.portal"),Symbol.for("react.fragment"),Symbol.for("react.strict_mode"),Symbol.for("react.profiler"),Symbol.for("react.provider"),Symbol.for("react.context"),Symbol.for("react.server_context"),Symbol.for("react.forward_ref"),Symbol.for("react.suspense"),Symbol.for("react.suspense_list"),Symbol.for("react.memo"),Symbol.for("react.lazy"),Symbol.for("react.offscreen");Symbol.for("react.module.reference")},9864:(e,g,l)=>{"use strict";l(9921)},2090:function(e,g,l){e.exports=function(e){"use strict";function g(e){if(e&&e.__esModule)return e;var g=Object.create(null);return e&&Object.keys(e).forEach((function(l){if("default"!==l){var t=Object.getOwnPropertyDescriptor(e,l);Object.defineProperty(g,l,t.get?t:{enumerable:!0,get:function(){return e[l]}})}})),g.default=e,Object.freeze(g)}var l=g(e);function t(){return t=Object.assign?Object.assign.bind():function(e){for(var g=1;g<arguments.length;g++){var l=arguments[g];for(var t in l)Object.prototype.hasOwnProperty.call(l,t)&&(e[t]=l[t])}return e},t.apply(this,arguments)}function n(e,g,l){return g in e?Object.defineProperty(e,g,{value:l,enumerable:!0,configurable:!0,writable:!0}):e[g]=l,e}function o(e,g){(null==g||g>e.length)&&(g=e.length);for(var l=0,t=new Array(g);l<g;l++)t[l]=e[l];return t}function I(e,g){return function(e){if(Array.isArray(e))return e}(e)||function(e,g){var l=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=l){var t,n,o=[],I=!0,C=!1;try{for(l=l.call(e);!(I=(t=l.next()).done)&&(o.push(t.value),!g||o.length!==g);I=!0);}catch(e){C=!0,n=e}finally{try{I||null==l.return||l.return()}finally{if(C)throw n}}return o}}(e,g)||function(e,g){if(e){if("string"==typeof e)return o(e,g);var l=Object.prototype.toString.call(e).slice(8,-1);return"Object"===l&&e.constructor&&(l=e.constructor.name),"Map"===l||"Set"===l?Array.from(e):"Arguments"===l||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(l)?o(e,g):void 0}}(e,g)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function C(e,g){if(null==e)return{};var l,t,n=function(e,g){if(null==e)return{};var l,t,n={},o=Object.keys(e);for(t=0;t<o.length;t++)l=o[t],g.indexOf(l)>=0||(n[l]=e[l]);return n}(e,g);if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(e);for(t=0;t<o.length;t++)l=o[t],g.indexOf(l)>=0||Object.prototype.propertyIsEnumerable.call(e,l)&&(n[l]=e[l])}return n}var r={exports:{}},a={exports:{}},i={},c="function"==typeof Symbol&&Symbol.for,s=c?Symbol.for("react.element"):60103,d=c?Symbol.for("react.portal"):60106,u=c?Symbol.for("react.fragment"):60107,A=c?Symbol.for("react.strict_mode"):60108,m=c?Symbol.for("react.profiler"):60114,b=c?Symbol.for("react.provider"):60109,p=c?Symbol.for("react.context"):60110,Z=c?Symbol.for("react.async_mode"):60111,h=c?Symbol.for("react.concurrent_mode"):60111,G=c?Symbol.for("react.forward_ref"):60112,y=c?Symbol.for("react.suspense"):60113,B=c?Symbol.for("react.suspense_list"):60120,S=c?Symbol.for("react.memo"):60115,V=c?Symbol.for("react.lazy"):60116,W=c?Symbol.for("react.block"):60121,R=c?Symbol.for("react.fundamental"):60117,f=c?Symbol.for("react.responder"):60118,v=c?Symbol.for("react.scope"):60119;function k(e){if("object"==typeof e&&null!==e){var g=e.$$typeof;switch(g){case s:switch(e=e.type){case Z:case h:case u:case m:case A:case y:return e;default:switch(e=e&&e.$$typeof){case p:case G:case V:case S:case b:return e;default:return g}}case d:return g}}}function X(e){return k(e)===h}i.AsyncMode=Z,i.ConcurrentMode=h,i.ContextConsumer=p,i.ContextProvider=b,i.Element=s,i.ForwardRef=G,i.Fragment=u,i.Lazy=V,i.Memo=S,i.Portal=d,i.Profiler=m,i.StrictMode=A,i.Suspense=y,i.isAsyncMode=function(e){return X(e)||k(e)===Z},i.isConcurrentMode=X,i.isContextConsumer=function(e){return k(e)===p},i.isContextProvider=function(e){return k(e)===b},i.isElement=function(e){return"object"==typeof e&&null!==e&&e.$$typeof===s},i.isForwardRef=function(e){return k(e)===G},i.isFragment=function(e){return k(e)===u},i.isLazy=function(e){return k(e)===V},i.isMemo=function(e){return k(e)===S},i.isPortal=function(e){return k(e)===d},i.isProfiler=function(e){return k(e)===m},i.isStrictMode=function(e){return k(e)===A},i.isSuspense=function(e){return k(e)===y},i.isValidElementType=function(e){return"string"==typeof e||"function"==typeof e||e===u||e===h||e===m||e===A||e===y||e===B||"object"==typeof e&&null!==e&&(e.$$typeof===V||e.$$typeof===S||e.$$typeof===b||e.$$typeof===p||e.$$typeof===G||e.$$typeof===R||e.$$typeof===f||e.$$typeof===v||e.$$typeof===W)},i.typeOf=k,a.exports=i,Object.getOwnPropertySymbols,Object.prototype.hasOwnProperty,Object.prototype.propertyIsEnumerable,function(){try{if(!Object.assign)return!1;var e=new String("abc");if(e[5]="de","5"===Object.getOwnPropertyNames(e)[0])return!1;for(var g={},l=0;l<10;l++)g["_"+String.fromCharCode(l)]=l;var t=Object.getOwnPropertyNames(g).map((function(e){return g[e]}));if("0123456789"!==t.join(""))return!1;var n={};return"abcdefghijklmnopqrst".split("").forEach((function(e){n[e]=e})),"abcdefghijklmnopqrst"===Object.keys(Object.assign({},n)).join("")}catch(e){return!1}}()&&Object.assign;Function.call.bind(Object.prototype.hasOwnProperty),a.exports;function J(){}function w(){}w.resetWarningCache=J;r.exports=function(){function e(e,g,l,t,n,o){if("SECRET_DO_NOT_PASS_THIS_OR_YOU_WILL_BE_FIRED"!==o){var I=new Error("Calling PropTypes validators directly is not supported by the `prop-types` package. Use PropTypes.checkPropTypes() to call them. Read more at http://fb.me/use-check-prop-types");throw I.name="Invariant Violation",I}}function g(){return e}e.isRequired=e;var l={array:e,bigint:e,bool:e,func:e,number:e,object:e,string:e,symbol:e,any:e,arrayOf:g,element:e,elementType:e,instanceOf:g,node:e,objectOf:g,oneOf:g,oneOfType:g,shape:g,exact:g,checkPropTypes:w,resetWarningCache:J};return l.PropTypes=l,l}();var Y=r.exports;function H(e,g,l){var t=void 0===g?null:g,n=function(e,g){var l=atob(e);if(g){for(var t=new Uint8Array(l.length),n=0,o=l.length;n<o;++n)t[n]=l.charCodeAt(n);return String.fromCharCode.apply(null,new Uint16Array(t.buffer))}return l}(e,void 0!==l&&l),o=n.indexOf("\n",10)+1,I=n.substring(o)+(t?"//# sourceMappingURL="+t:""),C=new Blob([I],{type:"application/javascript"});return URL.createObjectURL(C)}var F,N,K,x,M=(F="Lyogcm9sbHVwLXBsdWdpbi13ZWItd29ya2VyLWxvYWRlciAqLwooZnVuY3Rpb24gKCkgewoJJ3VzZSBzdHJpY3QnOwoKCXZhciBjb21tb25qc0dsb2JhbCA9IHR5cGVvZiBnbG9iYWxUaGlzICE9PSAndW5kZWZpbmVkJyA/IGdsb2JhbFRoaXMgOiB0eXBlb2Ygd2luZG93ICE9PSAndW5kZWZpbmVkJyA/IHdpbmRvdyA6IHR5cGVvZiBnbG9iYWwgIT09ICd1bmRlZmluZWQnID8gZ2xvYmFsIDogdHlwZW9mIHNlbGYgIT09ICd1bmRlZmluZWQnID8gc2VsZiA6IHt9OwoKCWZ1bmN0aW9uIGdldEF1Z21lbnRlZE5hbWVzcGFjZShuKSB7CgkJaWYgKG4uX19lc01vZHVsZSkgcmV0dXJuIG47CgkJdmFyIGEgPSBPYmplY3QuZGVmaW5lUHJvcGVydHkoe30sICdfX2VzTW9kdWxlJywge3ZhbHVlOiB0cnVlfSk7CgkJT2JqZWN0LmtleXMobikuZm9yRWFjaChmdW5jdGlvbiAoaykgewoJCQl2YXIgZCA9IE9iamVjdC5nZXRPd25Qcm9wZXJ0eURlc2NyaXB0b3Iobiwgayk7CgkJCU9iamVjdC5kZWZpbmVQcm9wZXJ0eShhLCBrLCBkLmdldCA/IGQgOiB7CgkJCQllbnVtZXJhYmxlOiB0cnVlLAoJCQkJZ2V0OiBmdW5jdGlvbiAoKSB7CgkJCQkJcmV0dXJuIG5ba107CgkJCQl9CgkJCX0pOwoJCX0pOwoJCXJldHVybiBhOwoJfQoKCXZhciBCaW5hcnlCaXRtYXAkMSA9IHt9OwoKCXZhciBJbGxlZ2FsQXJndW1lbnRFeGNlcHRpb24kMSA9IHt9OwoKCXZhciBFeGNlcHRpb24kMSA9IHt9OwoKCWZ1bmN0aW9uIGZpeFByb3RvKHRhcmdldCwgcHJvdG90eXBlKSB7CgkgIHZhciBzZXRQcm90b3R5cGVPZiA9IE9iamVjdC5zZXRQcm90b3R5cGVPZjsKCSAgc2V0UHJvdG90eXBlT2YgPyBzZXRQcm90b3R5cGVPZih0YXJnZXQsIHByb3RvdHlwZSkgOiB0YXJnZXQuX19wcm90b19fID0gcHJvdG90eXBlOwoJfQoJZnVuY3Rpb24gZml4U3RhY2sodGFyZ2V0LCBmbikgewoJICBpZiAoZm4gPT09IHZvaWQgMCkgewoJICAgIGZuID0gdGFyZ2V0LmNvbnN0cnVjdG9yOwoJICB9CgoJICB2YXIgY2FwdHVyZVN0YWNrVHJhY2UgPSBFcnJvci5jYXB0dXJlU3RhY2tUcmFjZTsKCSAgY2FwdHVyZVN0YWNrVHJhY2UgJiYgY2FwdHVyZVN0YWNrVHJhY2UodGFyZ2V0LCBmbik7Cgl9CgoJdmFyIF9fZXh0ZW5kcyRrID0gZnVuY3Rpb24gKCkgewoJICB2YXIgZXh0ZW5kU3RhdGljcyA9IGZ1bmN0aW9uIChkLCBiKSB7CgkgICAgZXh0ZW5kU3RhdGljcyA9IE9iamVjdC5zZXRQcm90b3R5cGVPZiB8fCB7CgkgICAgICBfX3Byb3RvX186IFtdCgkgICAgfSBpbnN0YW5jZW9mIEFycmF5ICYmIGZ1bmN0aW9uIChkLCBiKSB7CgkgICAgICBkLl9fcHJvdG9fXyA9IGI7CgkgICAgfSB8fCBmdW5jdGlvbiAoZCwgYikgewoJICAgICAgZm9yICh2YXIgcCBpbiBiKSB7IGlmIChiLmhhc093blByb3BlcnR5KHApKSB7IGRbcF0gPSBiW3BdOyB9IH0KCSAgICB9OwoKCSAgICByZXR1cm4gZXh0ZW5kU3RhdGljcyhkLCBiKTsKCSAgfTsKCgkgIHJldHVybiBmdW5jdGlvbiAoZCwgYikgewoJICAgIGV4dGVuZFN0YXRpY3MoZCwgYik7CgoJICAgIGZ1bmN0aW9uIF9fKCkgewoJICAgICAgdGhpcy5jb25zdHJ1Y3RvciA9IGQ7CgkgICAgfQoKCSAgICBkLnByb3RvdHlwZSA9IGIgPT09IG51bGwgPyBPYmplY3QuY3JlYXRlKGIpIDogKF9fLnByb3RvdHlwZSA9IGIucHJvdG90eXBlLCBuZXcgX18oKSk7CgkgIH07Cgl9KCk7CgoJdmFyIEN1c3RvbUVycm9yID0gZnVuY3Rpb24gKF9zdXBlcikgewoJICBfX2V4dGVuZHMkayhDdXN0b21FcnJvciwgX3N1cGVyKTsKCgkgIGZ1bmN0aW9uIEN1c3RvbUVycm9yKG1lc3NhZ2UpIHsKCSAgICB2YXIgX25ld1RhcmdldCA9IHRoaXMuY29uc3RydWN0b3I7CgoJICAgIHZhciBfdGhpcyA9IF9zdXBlci5jYWxsKHRoaXMsIG1lc3NhZ2UpIHx8IHRoaXM7CgoJICAgIE9iamVjdC5kZWZpbmVQcm9wZXJ0eShfdGhpcywgJ25hbWUnLCB7CgkgICAgICB2YWx1ZTogX25ld1RhcmdldC5uYW1lLAoJICAgICAgZW51bWVyYWJsZTogZmFsc2UsCgkgICAgICBjb25maWd1cmFibGU6IHRydWUKCSAgICB9KTsKCSAgICBmaXhQcm90byhfdGhpcywgX25ld1RhcmdldC5wcm90b3R5cGUpOwoJICAgIGZpeFN0YWNrKF90aGlzKTsKCSAgICByZXR1cm4gX3RoaXM7CgkgIH0KCgkgIHJldHVybiBDdXN0b21FcnJvcjsKCX0oRXJyb3IpOwoKCXZhciBfX3NwcmVhZEFycmF5cyA9IGZ1bmN0aW9uICgpIHsKCSAgdmFyIGFyZ3VtZW50cyQxID0gYXJndW1lbnRzOwoKCSAgZm9yICh2YXIgcyA9IDAsIGkgPSAwLCBpbCA9IGFyZ3VtZW50cy5sZW5ndGg7IGkgPCBpbDsgaSsrKSB7IHMgKz0gYXJndW1lbnRzJDFbaV0ubGVuZ3RoOyB9CgoJICBmb3IgKHZhciByID0gQXJyYXkocyksIGsgPSAwLCBpID0gMDsgaSA8IGlsOyBpKyspIHsgZm9yICh2YXIgYSA9IGFyZ3VtZW50c1tpXSwgaiA9IDAsIGpsID0gYS5sZW5ndGg7IGogPCBqbDsgaisrLCBrKyspIHsgcltrXSA9IGFbal07IH0gfQoKCSAgcmV0dXJuIHI7Cgl9OwoJZnVuY3Rpb24gY3VzdG9tRXJyb3JGYWN0b3J5KGZuLCBwYXJlbnQpIHsKCSAgaWYgKHBhcmVudCA9PT0gdm9pZCAwKSB7CgkgICAgcGFyZW50ID0gRXJyb3I7CgkgIH0KCgkgIGZ1bmN0aW9uIEN1c3RvbUVycm9yKCkgewoJICAgIHZhciBhcmd1bWVudHMkMSA9IGFyZ3VtZW50czsKCgkgICAgdmFyIGFyZ3MgPSBbXTsKCgkgICAgZm9yICh2YXIgX2kgPSAwOyBfaSA8IGFyZ3VtZW50cy5sZW5ndGg7IF9pKyspIHsKCSAgICAgIGFyZ3NbX2ldID0gYXJndW1lbnRzJDFbX2ldOwoJICAgIH0KCgkgICAgaWYgKCEodGhpcyBpbnN0YW5jZW9mIEN1c3RvbUVycm9yKSkgeyByZXR1cm4gbmV3IChDdXN0b21FcnJvci5iaW5kLmFwcGx5KEN1c3RvbUVycm9yLCBfX3NwcmVhZEFycmF5cyhbdm9pZCAwXSwgYXJncykpKSgpOyB9CgkgICAgcGFyZW50LmFwcGx5KHRoaXMsIGFyZ3MpOwoJICAgIE9iamVjdC5kZWZpbmVQcm9wZXJ0eSh0aGlzLCAnbmFtZScsIHsKCSAgICAgIHZhbHVlOiBmbi5uYW1lIHx8IHBhcmVudC5uYW1lLAoJICAgICAgZW51bWVyYWJsZTogZmFsc2UsCgkgICAgICBjb25maWd1cmFibGU6IHRydWUKCSAgICB9KTsKCSAgICBmbi5hcHBseSh0aGlzLCBhcmdzKTsKCSAgICBmaXhTdGFjayh0aGlzLCBDdXN0b21FcnJvcik7CgkgIH0KCgkgIHJldHVybiBPYmplY3QuZGVmaW5lUHJvcGVydGllcyhDdXN0b21FcnJvciwgewoJICAgIHByb3RvdHlwZTogewoJICAgICAgdmFsdWU6IE9iamVjdC5jcmVhdGUocGFyZW50LnByb3RvdHlwZSwgewoJICAgICAgICBjb25zdHJ1Y3RvcjogewoJICAgICAgICAgIHZhbHVlOiBDdXN0b21FcnJvciwKCSAgICAgICAgICB3cml0YWJsZTogdHJ1ZSwKCSAgICAgICAgICBjb25maWd1cmFibGU6IHRydWUKCSAgICAgICAgfQoJICAgICAgfSkKCSAgICB9CgkgIH0pOwoJfQoKCXZhciBjdXN0b21FcnJvciA9IC8qI19fUFVSRV9fKi9PYmplY3QuZnJlZXplKHsKCQlfX3Byb3RvX186IG51bGwsCgkJQ3VzdG9tRXJyb3I6IEN1c3RvbUVycm9yLAoJCWN1c3RvbUVycm9yRmFjdG9yeTogY3VzdG9tRXJyb3JGYWN0b3J5Cgl9KTsKCgl2YXIgcmVxdWlyZSQkMCA9IC8qQF9fUFVSRV9fKi9nZXRBdWdtZW50ZWROYW1lc3BhY2UoY3VzdG9tRXJyb3IpOwoKCXZhciBfX2V4dGVuZHMkaiA9IChjb21tb25qc0dsb2JhbCAmJiBjb21tb25qc0dsb2JhbC5fX2V4dGVuZHMpIHx8IChmdW5jdGlvbiAoKSB7CgkgICAgdmFyIGV4dGVuZFN0YXRpY3MgPSBmdW5jdGlvbiAoZCwgYikgewoJICAgICAgICBleHRlbmRTdGF0aWNzID0gT2JqZWN0LnNldFByb3RvdHlwZU9mIHx8CgkgICAgICAgICAgICAoeyBfX3Byb3RvX186IFtdIH0gaW5zdGFuY2VvZiBBcnJheSAmJiBmdW5jdGlvbiAoZCwgYikgeyBkLl9fcHJvdG9fXyA9IGI7IH0pIHx8CgkgICAgICAgICAgICBmdW5jdGlvbiAoZCwgYikgeyBmb3IgKHZhciBwIGluIGIpIGlmIChiLmhhc093blByb3BlcnR5KHApKSBkW3BdID0gYltwXTsgfTsKCSAgICAgICAgcmV0dXJuIGV4dGVuZFN0YXRpY3MoZCwgYik7CgkgICAgfTsKCSAgICByZXR1cm4gZnVuY3Rpb24gKGQsIGIpIHsKCSAgICAgICAgZXh0ZW5kU3RhdGljcyhkLCBiKTsKCSAgICAgICAgZnVuY3Rpb24gX18oKSB7IHRoaXMuY29uc3RydWN0b3IgPSBkOyB9CgkgICAgICAgIGQucHJvdG90eXBlID0gYiA9PT0gbnVsbCA/IE9iamVjdC5jcmVhdGUoYikgOiAoX18ucHJvdG90eXBlID0gYi5wcm90b3R5cGUsIG5ldyBfXygpKTsKCSAgICB9OwoJfSkoKTsKCU9iamVjdC5kZWZpbmVQcm9wZXJ0eShFeGNlcHRpb24kMSwgIl9fZXNNb2R1bGUiLCB7IHZhbHVlOiB0cnVlIH0pOwoJdmFyIHRzX2N1c3RvbV9lcnJvcl8xID0gcmVxdWlyZSQkMDsKCS8qKgoJICogQ3VzdG9tIEVycm9yIGNsYXNzIG9mIHR5cGUgRXhjZXB0aW9uLgoJICovCgl2YXIgRXhjZXB0aW9uID0gLyoqIEBjbGFzcyAqLyAoZnVuY3Rpb24gKF9zdXBlcikgewoJICAgIF9fZXh0ZW5kcyRqKEV4Y2VwdGlvbiwgX3N1cGVyKTsKCSAgICAvKioKCSAgICAgKiBBbGxvd3MgRXhjZXB0aW9uIHRvIGJlIGNvbnN0cnVjdGVkIGRpcmVjdGx5CgkgICAgICogd2l0aCBzb21lIG1lc3NhZ2UgYW5kIHByb3RvdHlwZSBkZWZpbml0aW9uLgoJICAgICAqLwoJICAgIGZ1bmN0aW9uIEV4Y2VwdGlvbihtZXNzYWdlKSB7CgkgICAgICAgIGlmIChtZXNzYWdlID09PSB2b2lkIDApIHsgbWVzc2FnZSA9IHVuZGVmaW5lZDsgfQoJICAgICAgICB2YXIgX3RoaXMgPSBfc3VwZXIuY2FsbCh0aGlzLCBtZXNzYWdlKSB8fCB0aGlzOwoJICAgICAgICBfdGhpcy5tZXNzYWdlID0gbWVzc2FnZTsKCSAgICAgICAgcmV0dXJuIF90aGlzOwoJICAgIH0KCSAgICBFeGNlcHRpb24ucHJvdG90eXBlLmdldEtpbmQgPSBmdW5jdGlvbiAoKSB7CgkgICAgICAgIHZhciBleCA9IHRoaXMuY29uc3RydWN0b3I7CgkgICAgICAgIHJldHVybiBleC5raW5kOwoJICAgIH07CgkgICAgLyoqCgkgICAgICogSXQncyB0eXBlZCBhcyBzdHJpbmcgc28gaXQgY2FuIGJlIGV4dGVuZGVkIGFuZCBvdmVycmlkZW4uCgkgICAgICovCgkgICAgRXhjZXB0aW9uLmtpbmQgPSAnRXhjZXB0aW9uJzsKCSAgICByZXR1cm4gRXhjZXB0aW9uOwoJfSh0c19jdXN0b21fZXJyb3JfMS5DdXN0b21FcnJvcikpOwoJRXhjZXB0aW9uJDEuZGVmYXVsdCA9IEV4Y2VwdGlvbjsKCgl2YXIgX19leHRlbmRzJGkgPSAoY29tbW9uanNHbG9iYWwgJiYgY29tbW9uanNHbG9iYWwuX19leHRlbmRzKSB8fCAoZnVuY3Rpb24gKCkgewoJICAgIHZhciBleHRlbmRTdGF0aWNzID0gZnVuY3Rpb24gKGQsIGIpIHsKCSAgICAgICAgZXh0ZW5kU3RhdGljcyA9IE9iamVjdC5zZXRQcm90b3R5cGVPZiB8fAoJICAgICAgICAgICAgKHsgX19wcm90b19fOiBbXSB9IGluc3RhbmNlb2YgQXJyYXkgJiYgZnVuY3Rpb24gKGQsIGIpIHsgZC5fX3Byb3RvX18gPSBiOyB9KSB8fAoJICAgICAgICAgICAgZnVuY3Rpb24gKGQsIGIpIHsgZm9yICh2YXIgcCBpbiBiKSBpZiAoYi5oYXNPd25Qcm9wZXJ0eShwKSkgZFtwXSA9IGJbcF07IH07CgkgICAgICAgIHJldHVybiBleHRlbmRTdGF0aWNzKGQsIGIpOwoJICAgIH07CgkgICAgcmV0dXJuIGZ1bmN0aW9uIChkLCBiKSB7CgkgICAgICAgIGV4dGVuZFN0YXRpY3MoZCwgYik7CgkgICAgICAgIGZ1bmN0aW9uIF9fKCkgeyB0aGlzLmNvbnN0cnVjdG9yID0gZDsgfQoJICAgICAgICBkLnByb3RvdHlwZSA9IGIgPT09IG51bGwgPyBPYmplY3QuY3JlYXRlKGIpIDogKF9fLnByb3RvdHlwZSA9IGIucHJvdG90eXBlLCBuZXcgX18oKSk7CgkgICAgfTsKCX0pKCk7CglPYmplY3QuZGVmaW5lUHJvcGVydHkoSWxsZWdhbEFyZ3VtZW50RXhjZXB0aW9uJDEsICJfX2VzTW9kdWxlIiwgeyB2YWx1ZTogdHJ1ZSB9KTsKCXZhciBFeGNlcHRpb25fMSQ5ID0gRXhjZXB0aW9uJDE7CgkvKioKCSAqIEN1c3RvbSBFcnJvciBjbGFzcyBvZiB0eXBlIEV4Y2VwdGlvbi4KCSAqLwoJdmFyIElsbGVnYWxBcmd1bWVudEV4Y2VwdGlvbiA9IC8qKiBAY2xhc3MgKi8gKGZ1bmN0aW9uIChfc3VwZXIpIHsKCSAgICBfX2V4dGVuZHMkaShJbGxlZ2FsQXJndW1lbnRFeGNlcHRpb24sIF9zdXBlcik7CgkgICAgZnVuY3Rpb24gSWxsZWdhbEFyZ3VtZW50RXhjZXB0aW9uKCkgewoJICAgICAgICByZXR1cm4gX3N1cGVyICE9PSBudWxsICYmIF9zdXBlci5hcHBseSh0aGlzLCBhcmd1bWVudHMpIHx8IHRoaXM7CgkgICAgfQoJICAgIElsbGVnYWxBcmd1bWVudEV4Y2VwdGlvbi5raW5kID0gJ0lsbGVnYWxBcmd1bWVudEV4Y2VwdGlvbic7CgkgICAgcmV0dXJuIElsbGVnYWxBcmd1bWVudEV4Y2VwdGlvbjsKCX0oRXhjZXB0aW9uXzEkOS5kZWZhdWx0KSk7CglJbGxlZ2FsQXJndW1lbnRFeGNlcHRpb24kMS5kZWZhdWx0ID0gSWxsZWdhbEFyZ3VtZW50RXhjZXB0aW9uOwoKCS8qCgkgKiBDb3B5cmlnaHQgMjAwOSBaWGluZyBhdXRob3JzCgkgKgoJICogTGljZW5zZWQgdW5kZXIgdGhlIEFwYWNoZSBMaWNlbnNlLCBWZXJzaW9uIDIuMCAodGhlICJMaWNlbnNlIik7CgkgKiB5b3UgbWF5IG5vdCB1c2UgdGhpcyBmaWxlIGV4Y2VwdCBpbiBjb21wbGlhbmNlIHdpdGggdGhlIExpY2Vuc2UuCgkgKiBZb3UgbWF5IG9idGFpbiBhIGNvcHkgb2YgdGhlIExpY2Vuc2UgYXQKCSAqCgkgKiAgICAgIGh0dHA6Ly93d3cuYXBhY2hlLm9yZy9saWNlbnNlcy9MSUNFTlNFLTIuMAoJICoKCSAqIFVubGVzcyByZXF1aXJlZCBieSBhcHBsaWNhYmxlIGxhdyBvciBhZ3JlZWQgdG8gaW4gd3JpdGluZywgc29mdHdhcmUKCSAqIGRpc3RyaWJ1dGVkIHVuZGVyIHRoZSBMaWNlbnNlIGlzIGRpc3RyaWJ1dGVkIG9uIGFuICJBUyBJUyIgQkFTSVMsCgkgKiBXSVRIT1VUIFdBUlJBTlRJRVMgT1IgQ09ORElUSU9OUyBPRiBBTlkgS0lORCwgZWl0aGVyIGV4cHJlc3Mgb3IgaW1wbGllZC4KCSAqIFNlZSB0aGUgTGljZW5zZSBmb3IgdGhlIHNwZWNpZmljIGxhbmd1YWdlIGdvdmVybmluZyBwZXJtaXNzaW9ucyBhbmQKCSAqIGxpbWl0YXRpb25zIHVuZGVyIHRoZSBMaWNlbnNlLgoJICovCglPYmplY3QuZGVmaW5lUHJvcGVydHkoQmluYXJ5Qml0bWFwJDEsICJfX2VzTW9kdWxlIiwgeyB2YWx1ZTogdHJ1ZSB9KTsKCXZhciBJbGxlZ2FsQXJndW1lbnRFeGNlcHRpb25fMSRhID0gSWxsZWdhbEFyZ3VtZW50RXhjZXB0aW9uJDE7Cgl2YXIgQmluYXJ5Qml0bWFwID0gLyoqIEBjbGFzcyAqLyAoZnVuY3Rpb24gKCkgewoJICAgIGZ1bmN0aW9uIEJpbmFyeUJpdG1hcChiaW5hcml6ZXIpIHsKCSAgICAgICAgdGhpcy5iaW5hcml6ZXIgPSBiaW5hcml6ZXI7CgkgICAgICAgIGlmIChiaW5hcml6ZXIgPT09IG51bGwpIHsKCSAgICAgICAgICAgIHRocm93IG5ldyBJbGxlZ2FsQXJndW1lbnRFeGNlcHRpb25fMSRhLmRlZmF1bHQoJ0JpbmFyaXplciBtdXN0IGJlIG5vbi1udWxsLicpOwoJICAgICAgICB9CgkgICAgfQoJICAgIC8qKgoJICAgICAqIEByZXR1cm4gVGhlIHdpZHRoIG9mIHRoZSBiaXRtYXAuCgkgICAgICovCgkgICAgQmluYXJ5Qml0bWFwLnByb3RvdHlwZS5nZXRXaWR0aCA9IGZ1bmN0aW9uICgpIHsKCSAgICAgICAgcmV0dXJuIHRoaXMuYmluYXJpemVyLmdldFdpZHRoKCk7CgkgICAgfTsKCSAgICAvKioKCSAgICAgKiBAcmV0dXJuIFRoZSBoZWlnaHQgb2YgdGhlIGJpdG1hcC4KCSAgICAgKi8KCSAgICBCaW5hcnlCaXRtYXAucHJvdG90eXBlLmdldEhlaWdodCA9IGZ1bmN0aW9uICgpIHsKCSAgICAgICAgcmV0dXJuIHRoaXMuYmluYXJpemVyLmdldEhlaWdodCgpOwoJICAgIH07CgkgICAgLyoqCgkgICAgICogQ29udmVydHMgb25lIHJvdyBvZiBsdW1pbmFuY2UgZGF0YSB0byAxIGJpdCBkYXRhLiBNYXkgYWN0dWFsbHkgZG8gdGhlIGNvbnZlcnNpb24sIG9yIHJldHVybgoJICAgICAqIGNhY2hlZCBkYXRhLiBDYWxsZXJzIHNob3VsZCBhc3N1bWUgdGhpcyBtZXRob2QgaXMgZXhwZW5zaXZlIGFuZCBjYWxsIGl0IGFzIHNlbGRvbSBhcyBwb3NzaWJsZS4KCSAgICAgKiBUaGlzIG1ldGhvZCBpcyBpbnRlbmRlZCBmb3IgZGVjb2RpbmcgMUQgYmFyY29kZXMgYW5kIG1heSBjaG9vc2UgdG8gYXBwbHkgc2hhcnBlbmluZy4KCSAgICAgKgoJICAgICAqIEBwYXJhbSB5IFRoZSByb3cgdG8gZmV0Y2gsIHdoaWNoIG11c3QgYmUgaW4gWzAsIGJpdG1hcCBoZWlnaHQpCgkgICAgICogQHBhcmFtIHJvdyBBbiBvcHRpb25hbCBwcmVhbGxvY2F0ZWQgYXJyYXkuIElmIG51bGwgb3IgdG9vIHNtYWxsLCBpdCB3aWxsIGJlIGlnbm9yZWQuCgkgICAgICogICAgICAgICAgICBJZiB1c2VkLCB0aGUgQmluYXJpemVyIHdpbGwgY2FsbCBCaXRBcnJheS5jbGVhcigpLiBBbHdheXMgdXNlIHRoZSByZXR1cm5lZCBvYmplY3QuCgkgICAgICogQHJldHVybiBUaGUgYXJyYXkgb2YgYml0cyBmb3IgdGhpcyByb3cgKHRydWUgbWVhbnMgYmxhY2spLgoJICAgICAqIEB0aHJvd3MgTm90Rm91bmRFeGNlcHRpb24gaWYgcm93IGNhbid0IGJlIGJpbmFyaXplZAoJICAgICAqLwoJICAgIEJpbmFyeUJpdG1hcC5wcm90b3R5cGUuZ2V0QmxhY2tSb3cgPSBmdW5jdGlvbiAoeSAvKmludCovLCByb3cpIHsKCSAgICAgICAgcmV0dXJuIHRoaXMuYmluYXJpemVyLmdldEJsYWNrUm93KHksIHJvdyk7CgkgICAgfTsKCSAgICAvKioKCSAgICAgKiBDb252ZXJ0cyBhIDJEIGFycmF5IG9mIGx1bWluYW5jZSBkYXRhIHRvIDEgYml0LiBBcyBhYm92ZSwgYXNzdW1lIHRoaXMgbWV0aG9kIGlzIGV4cGVuc2l2ZQoJICAgICAqIGFuZCBkbyBub3QgY2FsbCBpdCByZXBlYXRlZGx5LiBUaGlzIG1ldGhvZCBpcyBpbnRlbmRlZCBmb3IgZGVjb2RpbmcgMkQgYmFyY29kZXMgYW5kIG1heSBvcgoJICAgICAqIG1heSBub3QgYXBwbHkgc2hhcnBlbmluZy4gVGhlcmVmb3JlLCBhIHJvdyBmcm9tIHRoaXMgbWF0cml4IG1heSBub3QgYmUgaWRlbnRpY2FsIHRvIG9uZQoJICAgICAqIGZldGNoZWQgdXNpbmcgZ2V0QmxhY2tSb3coKSwgc28gZG9uJ3QgbWl4IGFuZCBtYXRjaCBiZXR3ZWVuIHRoZW0uCgkgICAgICoKCSAgICAgKiBAcmV0dXJuIFRoZSAyRCBhcnJheSBvZiBiaXRzIGZvciB0aGUgaW1hZ2UgKHRydWUgbWVhbnMgYmxhY2spLgoJICAgICAqIEB0aHJvd3MgTm90Rm91bmRFeGNlcHRpb24gaWYgaW1hZ2UgY2FuJ3QgYmUgYmluYXJpemVkIHRvIG1ha2UgYSBtYXRyaXgKCSAgICAgKi8KCSAgICBCaW5hcnlCaXRtYXAucHJvdG90eXBlLmdldEJsYWNrTWF0cml4ID0gZnVuY3Rpb24gKCkgewoJICAgICAgICAvLyBUaGUgbWF0cml4IGlzIGNyZWF0ZWQgb24gZGVtYW5kIHRoZSBmaXJzdCB0aW1lIGl0IGlzIHJlcXVlc3RlZCwgdGhlbiBjYWNoZWQuIFRoZXJlIGFyZSB0d28KCSAgICAgICAgLy8gcmVhc29ucyBmb3IgdGhpczoKCSAgICAgICAgLy8gMS4gVGhpcyB3b3JrIHdpbGwgbmV2ZXIgYmUgZG9uZSBpZiB0aGUgY2FsbGVyIG9ubHkgaW5zdGFsbHMgMUQgUmVhZGVyIG9iamVjdHMsIG9yIGlmIGEKCSAgICAgICAgLy8gICAgMUQgUmVhZGVyIGZpbmRzIGEgYmFyY29kZSBiZWZvcmUgdGhlIDJEIFJlYWRlcnMgcnVuLgoJICAgICAgICAvLyAyLiBUaGlzIHdvcmsgd2lsbCBvbmx5IGJlIGRvbmUgb25jZSBldmVuIGlmIHRoZSBjYWxsZXIgaW5zdGFsbHMgbXVsdGlwbGUgMkQgUmVhZGVycy4KCSAgICAgICAgaWYgKHRoaXMubWF0cml4ID09PSBudWxsIHx8IHRoaXMubWF0cml4ID09PSB1bmRlZmluZWQpIHsKCSAgICAgICAgICAgIHRoaXMubWF0cml4ID0gdGhpcy5iaW5hcml6ZXIuZ2V0QmxhY2tNYXRyaXgoKTsKCSAgICAgICAgfQoJICAgICAgICByZXR1cm4gdGhpcy5tYXRyaXg7CgkgICAgfTsKCSAgICAvKioKCSAgICAgKiBAcmV0dXJuIFdoZXRoZXIgdGhpcyBiaXRtYXAgY2FuIGJlIGNyb3BwZWQuCgkgICAgICovCgkgICAgQmluYXJ5Qml0bWFwLnByb3RvdHlwZS5pc0Nyb3BTdXBwb3J0ZWQgPSBmdW5jdGlvbiAoKSB7CgkgICAgICAgIHJldHVybiB0aGlzLmJpbmFyaXplci5nZXRMdW1pbmFuY2VTb3VyY2UoKS5pc0Nyb3BTdXBwb3J0ZWQoKTsKCSAgICB9OwoJICAgIC8qKgoJICAgICAqIFJldHVybnMgYSBuZXcgb2JqZWN0IHdpdGggY3JvcHBlZCBpbWFnZSBkYXRhLiBJbXBsZW1lbnRhdGlvbnMgbWF5IGtlZXAgYSByZWZlcmVuY2UgdG8gdGhlCgkgICAgICogb3JpZ2luYWwgZGF0YSByYXRoZXIgdGhhbiBhIGNvcHkuIE9ubHkgY2FsbGFibGUgaWYgaXNDcm9wU3VwcG9ydGVkKCkgaXMgdHJ1ZS4KCSAgICAgKgoJICAgICAqIEBwYXJhbSBsZWZ0IFRoZSBsZWZ0IGNvb3JkaW5hdGUsIHdoaWNoIG11c3QgYmUgaW4gWzAsZ2V0V2lkdGgoKSkKCSAgICAgKiBAcGFyYW0gdG9wIFRoZSB0b3AgY29vcmRpbmF0ZSwgd2hpY2ggbXVzdCBiZSBpbiBbMCxnZXRIZWlnaHQoKSkKCSAgICAgKiBAcGFyYW0gd2lkdGggVGhlIHdpZHRoIG9mIHRoZSByZWN0YW5nbGUgdG8gY3JvcC4KCSAgICAgKiBAcGFyYW0gaGVpZ2h0IFRoZSBoZWlnaHQgb2YgdGhlIHJlY3RhbmdsZSB0byBjcm9wLgoJICAgICAqIEByZXR1cm4gQSBjcm9wcGVkIHZlcnNpb24gb2YgdGhpcyBvYmplY3QuCgkgICAgICovCgkgICAgQmluYXJ5Qml0bWFwLnByb3RvdHlwZS5jcm9wID0gZnVuY3Rpb24gKGxlZnQgLyppbnQqLywgdG9wIC8qaW50Ki8sIHdpZHRoIC8qaW50Ki8sIGhlaWdodCAvKmludCovKSB7CgkgICAgICAgIHZhciBuZXdTb3VyY2UgPSB0aGlzLmJpbmFyaXplci5nZXRMdW1pbmFuY2VTb3VyY2UoKS5jcm9wKGxlZnQsIHRvcCwgd2lkdGgsIGhlaWdodCk7CgkgICAgICAgIHJldHVybiBuZXcgQmluYXJ5Qml0bWFwKHRoaXMuYmluYXJpemVyLmNyZWF0ZUJpbmFyaXplcihuZXdTb3VyY2UpKTsKCSAgICB9OwoJICAgIC8qKgoJICAgICAqIEByZXR1cm4gV2hldGhlciB0aGlzIGJpdG1hcCBzdXBwb3J0cyBjb3VudGVyLWNsb2Nrd2lzZSByb3RhdGlvbi4KCSAgICAgKi8KCSAgICBCaW5hcnlCaXRtYXAucHJvdG90eXBlLmlzUm90YXRlU3VwcG9ydGVkID0gZnVuY3Rpb24gKCkgewoJICAgICAgICByZXR1cm4gdGhpcy5iaW5hcml6ZXIuZ2V0THVtaW5hbmNlU291cmNlKCkuaXNSb3RhdGVTdXBwb3J0ZWQoKTsKCSAgICB9OwoJICAgIC8qKgoJICAgICAqIFJldHVybnMgYSBuZXcgb2JqZWN0IHdpdGggcm90YXRlZCBpbWFnZSBkYXRhIGJ5IDkwIGRlZ3JlZXMgY291bnRlcmNsb2Nrd2lzZS4KCSAgICAgKiBPbmx5IGNhbGxhYmxlIGlmIHtAbGluayAjaXNSb3RhdGVTdXBwb3J0ZWQoKX0gaXMgdHJ1ZS4KCSAgICAgKgoJICAgICAqIEByZXR1cm4gQSByb3RhdGVkIHZlcnNpb24gb2YgdGhpcyBvYmplY3QuCgkgICAgICovCgkgICAgQmluYXJ5Qml0bWFwLnByb3RvdHlwZS5yb3RhdGVDb3VudGVyQ2xvY2t3aXNlID0gZnVuY3Rpb24gKCkgewoJICAgICAgICB2YXIgbmV3U291cmNlID0gdGhpcy5iaW5hcml6ZXIuZ2V0THVtaW5hbmNlU291cmNlKCkucm90YXRlQ291bnRlckNsb2Nrd2lzZSgpOwoJICAgICAgICByZXR1cm4gbmV3IEJpbmFyeUJpdG1hcCh0aGlzLmJpbmFyaXplci5jcmVhdGVCaW5hcml6ZXIobmV3U291cmNlKSk7CgkgICAgfTsKCSAgICAvKioKCSAgICAgKiBSZXR1cm5zIGEgbmV3IG9iamVjdCB3aXRoIHJvdGF0ZWQgaW1hZ2UgZGF0YSBieSA0NSBkZWdyZWVzIGNvdW50ZXJjbG9ja3dpc2UuCgkgICAgICogT25seSBjYWxsYWJsZSBpZiB7QGxpbmsgI2lzUm90YXRlU3VwcG9ydGVkKCl9IGlzIHRydWUuCgkgICAgICoKCSAgICAgKiBAcmV0dXJuIEEgcm90YXRlZCB2ZXJzaW9uIG9mIHRoaXMgb2JqZWN0LgoJICAgICAqLwoJICAgIEJpbmFyeUJpdG1hcC5wcm90b3R5cGUucm90YXRlQ291bnRlckNsb2Nrd2lzZTQ1ID0gZnVuY3Rpb24gKCkgewoJICAgICAgICB2YXIgbmV3U291cmNlID0gdGhpcy5iaW5hcml6ZXIuZ2V0THVtaW5hbmNlU291cmNlKCkucm90YXRlQ291bnRlckNsb2Nrd2lzZTQ1KCk7CgkgICAgICAgIHJldHVybiBuZXcgQmluYXJ5Qml0bWFwKHRoaXMuYmluYXJpemVyLmNyZWF0ZUJpbmFyaXplcihuZXdTb3VyY2UpKTsKCSAgICB9OwoJICAgIC8qQE92ZXJyaWRlKi8KCSAgICBCaW5hcnlCaXRtYXAucHJvdG90eXBlLnRvU3RyaW5nID0gZnVuY3Rpb24gKCkgewoJICAgICAgICB0cnkgewoJICAgICAgICAgICAgcmV0dXJuIHRoaXMuZ2V0QmxhY2tNYXRyaXgoKS50b1N0cmluZygpOwoJICAgICAgICB9CgkgICAgICAgIGNhdGNoIChlIC8qOiBOb3RGb3VuZEV4Y2VwdGlvbiovKSB7CgkgICAgICAgICAgICByZXR1cm4gJyc7CgkgICAgICAgIH0KCSAgICB9OwoJICAgIHJldHVybiBCaW5hcnlCaXRtYXA7Cgl9KCkpOwoJdmFyIF9kZWZhdWx0JDMgPSBCaW5hcnlCaXRtYXAkMS5kZWZhdWx0ID0gQmluYXJ5Qml0bWFwOwoKCXZhciBIeWJyaWRCaW5hcml6ZXIkMSA9IHt9OwoKCXZhciBHbG9iYWxIaXN0b2dyYW1CaW5hcml6ZXIkMSA9IHt9OwoKCXZhciBCaW5hcml6ZXIkMSA9IHt9OwoKCS8qCgkgKiBDb3B5cmlnaHQgMjAwOSBaWGluZyBhdXRob3JzCgkgKgoJICogTGljZW5zZWQgdW5kZXIgdGhlIEFwYWNoZSBMaWNlbnNlLCBWZXJzaW9uIDIuMCAodGhlICJMaWNlbnNlIik7CgkgKiB5b3UgbWF5IG5vdCB1c2UgdGhpcyBmaWxlIGV4Y2VwdCBpbiBjb21wbGlhbmNlIHdpdGggdGhlIExpY2Vuc2UuCgkgKiBZb3UgbWF5IG9idGFpbiBhIGNvcHkgb2YgdGhlIExpY2Vuc2UgYXQKCSAqCgkgKiAgICAgIGh0dHA6Ly93d3cuYXBhY2hlLm9yZy9saWNlbnNlcy9MSUNFTlNFLTIuMAoJICoKCSAqIFVubGVzcyByZXF1aXJlZCBieSBhcHBsaWNhYmxlIGxhdyBvciBhZ3JlZWQgdG8gaW4gd3JpdGluZywgc29mdHdhcmUKCSAqIGRpc3RyaWJ1dGVkIHVuZGVyIHRoZSBMaWNlbnNlIGlzIGRpc3RyaWJ1dGVkIG9uIGFuICJBUyBJUyIgQkFTSVMsCgkgKiBXSVRIT1VUIFdBUlJBTlRJRVMgT1IgQ09ORElUSU9OUyBPRiBBTlkgS0lORCwgZWl0aGVyIGV4cHJlc3Mgb3IgaW1wbGllZC4KCSAqIFNlZSB0aGUgTGljZW5zZSBmb3IgdGhlIHNwZWNpZmljIGxhbmd1YWdlIGdvdmVybmluZyBwZXJtaXNzaW9ucyBhbmQKCSAqIGxpbWl0YXRpb25zIHVuZGVyIHRoZSBMaWNlbnNlLgoJICovCglPYmplY3QuZGVmaW5lUHJvcGVydHkoQmluYXJpemVyJDEsICJfX2VzTW9kdWxlIiwgeyB2YWx1ZTogdHJ1ZSB9KTsKCS8qKgoJICogVGhpcyBjbGFzcyBoaWVyYXJjaHkgcHJvdmlkZXMgYSBzZXQgb2YgbWV0aG9kcyB0byBjb252ZXJ0IGx1bWluYW5jZSBkYXRhIHRvIDEgYml0IGRhdGEuCgkgKiBJdCBhbGxvd3MgdGhlIGFsZ29yaXRobSB0byB2YXJ5IHBvbHltb3JwaGljYWxseSwgZm9yIGV4YW1wbGUgYWxsb3dpbmcgYSB2ZXJ5IGV4cGVuc2l2ZQoJICogdGhyZXNob2xkaW5nIHRlY2huaXF1ZSBmb3Igc2VydmVycyBhbmQgYSBmYXN0IG9uZSBmb3IgbW9iaWxlLiBJdCBhbHNvIHBlcm1pdHMgdGhlIGltcGxlbWVudGF0aW9uCgkgKiB0byB2YXJ5LCBlLmcuIGEgSk5JIHZlcnNpb24gZm9yIEFuZHJvaWQgYW5kIGEgSmF2YSBmYWxsYmFjayB2ZXJzaW9uIGZvciBvdGhlciBwbGF0Zm9ybXMuCgkgKgoJICogQGF1dGhvciBkc3dpdGtpbkBnb29nbGUuY29tIChEYW5pZWwgU3dpdGtpbikKCSAqLwoJdmFyIEJpbmFyaXplciA9IC8qKiBAY2xhc3MgKi8gKGZ1bmN0aW9uICgpIHsKCSAgICBmdW5jdGlvbiBCaW5hcml6ZXIoc291cmNlKSB7CgkgICAgICAgIHRoaXMuc291cmNlID0gc291cmNlOwoJICAgIH0KCSAgICBCaW5hcml6ZXIucHJvdG90eXBlLmdldEx1bWluYW5jZVNvdXJjZSA9IGZ1bmN0aW9uICgpIHsKCSAgICAgICAgcmV0dXJuIHRoaXMuc291cmNlOwoJICAgIH07CgkgICAgQmluYXJpemVyLnByb3RvdHlwZS5nZXRXaWR0aCA9IGZ1bmN0aW9uICgpIHsKCSAgICAgICAgcmV0dXJuIHRoaXMuc291cmNlLmdldFdpZHRoKCk7CgkgICAgfTsKCSAgICBCaW5hcml6ZXIucHJvdG90eXBlLmdldEhlaWdodCA9IGZ1bmN0aW9uICgpIHsKCSAgICAgICAgcmV0dXJuIHRoaXMuc291cmNlLmdldEhlaWdodCgpOwoJICAgIH07CgkgICAgcmV0dXJuIEJpbmFyaXplcjsKCX0oKSk7CglCaW5hcml6ZXIkMS5kZWZhdWx0ID0gQmluYXJpemVyOwoKCXZhciBCaXRBcnJheSQxID0ge307CgoJdmFyIEFycmF5cyQxID0ge307CgoJdmFyIFN5c3RlbSQxID0ge307CgoJT2JqZWN0LmRlZmluZVByb3BlcnR5KFN5c3RlbSQxLCAiX19lc01vZHVsZSIsIHsgdmFsdWU6IHRydWUgfSk7Cgl2YXIgU3lzdGVtID0gLyoqIEBjbGFzcyAqLyAoZnVuY3Rpb24gKCkgewoJICAgIGZ1bmN0aW9uIFN5c3RlbSgpIHsKCSAgICB9CgkgICAgLy8gcHVibGljIHN0YXRpYyB2b2lkIGFycmF5Y29weShPYmplY3Qgc3JjLCBpbnQgc3JjUG9zLCBPYmplY3QgZGVzdCwgaW50IGRlc3RQb3MsIGludCBsZW5ndGgpCgkgICAgLyoqCgkgICAgICogTWFrZXMgYSBjb3B5IG9mIGEgYXJyYXkuCgkgICAgICovCgkgICAgU3lzdGVtLmFycmF5Y29weSA9IGZ1bmN0aW9uIChzcmMsIHNyY1BvcywgZGVzdCwgZGVzdFBvcywgbGVuZ3RoKSB7CgkgICAgICAgIC8vIFRPRE86IGJldHRlciB1c2Ugc3BsaXQgb3Igc2V0PwoJICAgICAgICB3aGlsZSAobGVuZ3RoLS0pIHsKCSAgICAgICAgICAgIGRlc3RbZGVzdFBvcysrXSA9IHNyY1tzcmNQb3MrK107CgkgICAgICAgIH0KCSAgICB9OwoJICAgIC8qKgoJICAgICAqIFJldHVybnMgdGhlIGN1cnJlbnQgdGltZSBpbiBtaWxsaXNlY29uZHMuCgkgICAgICovCgkgICAgU3lzdGVtLmN1cnJlbnRUaW1lTWlsbGlzID0gZnVuY3Rpb24gKCkgewoJICAgICAgICByZXR1cm4gRGF0ZS5ub3coKTsKCSAgICB9OwoJICAgIHJldHVybiBTeXN0ZW07Cgl9KCkpOwoJU3lzdGVtJDEuZGVmYXVsdCA9IFN5c3RlbTsKCgl2YXIgQXJyYXlJbmRleE91dE9mQm91bmRzRXhjZXB0aW9uJDEgPSB7fTsKCgl2YXIgSW5kZXhPdXRPZkJvdW5kc0V4Y2VwdGlvbiQxID0ge307CgoJdmFyIF9fZXh0ZW5kcyRoID0gKGNvbW1vbmpzR2xvYmFsICYmIGNvbW1vbmpzR2xvYmFsLl9fZXh0ZW5kcykgfHwgKGZ1bmN0aW9uICgpIHsKCSAgICB2YXIgZXh0ZW5kU3RhdGljcyA9IGZ1bmN0aW9uIChkLCBiKSB7CgkgICAgICAgIGV4dGVuZFN0YXRpY3MgPSBPYmplY3Quc2V0UHJvdG90eXBlT2YgfHwKCSAgICAgICAgICAgICh7IF9fcHJvdG9fXzogW10gfSBpbnN0YW5jZW9mIEFycmF5ICYmIGZ1bmN0aW9uIChkLCBiKSB7IGQuX19wcm90b19fID0gYjsgfSkgfHwKCSAgICAgICAgICAgIGZ1bmN0aW9uIChkLCBiKSB7IGZvciAodmFyIHAgaW4gYikgaWYgKGIuaGFzT3duUHJvcGVydHkocCkpIGRbcF0gPSBiW3BdOyB9OwoJICAgICAgICByZXR1cm4gZXh0ZW5kU3RhdGljcyhkLCBiKTsKCSAgICB9OwoJICAgIHJldHVybiBmdW5jdGlvbiAoZCwgYikgewoJICAgICAgICBleHRlbmRTdGF0aWNzKGQsIGIpOwoJICAgICAgICBmdW5jdGlvbiBfXygpIHsgdGhpcy5jb25zdHJ1Y3RvciA9IGQ7IH0KCSAgICAgICAgZC5wcm90b3R5cGUgPSBiID09PSBudWxsID8gT2JqZWN0LmNyZWF0ZShiKSA6IChfXy5wcm90b3R5cGUgPSBiLnByb3RvdHlwZSwgbmV3IF9fKCkpOwoJICAgIH07Cgl9KSgpOwoJT2JqZWN0LmRlZmluZVByb3BlcnR5KEluZGV4T3V0T2ZCb3VuZHNFeGNlcHRpb24kMSwgIl9fZXNNb2R1bGUiLCB7IHZhbHVlOiB0cnVlIH0pOwoJdmFyIEV4Y2VwdGlvbl8xJDggPSBFeGNlcHRpb24kMTsKCS8qKgoJICogQ3VzdG9tIEVycm9yIGNsYXNzIG9mIHR5cGUgRXhjZXB0aW9uLgoJICovCgl2YXIgSW5kZXhPdXRPZkJvdW5kc0V4Y2VwdGlvbiA9IC8qKiBAY2xhc3MgKi8gKGZ1bmN0aW9uIChfc3VwZXIpIHsKCSAgICBfX2V4dGVuZHMkaChJbmRleE91dE9mQm91bmRzRXhjZXB0aW9uLCBfc3VwZXIpOwoJICAgIGZ1bmN0aW9uIEluZGV4T3V0T2ZCb3VuZHNFeGNlcHRpb24oKSB7CgkgICAgICAgIHJldHVybiBfc3VwZXIgIT09IG51bGwgJiYgX3N1cGVyLmFwcGx5KHRoaXMsIGFyZ3VtZW50cykgfHwgdGhpczsKCSAgICB9CgkgICAgSW5kZXhPdXRPZkJvdW5kc0V4Y2VwdGlvbi5raW5kID0gJ0luZGV4T3V0T2ZCb3VuZHNFeGNlcHRpb24nOwoJICAgIHJldHVybiBJbmRleE91dE9mQm91bmRzRXhjZXB0aW9uOwoJfShFeGNlcHRpb25fMSQ4LmRlZmF1bHQpKTsKCUluZGV4T3V0T2ZCb3VuZHNFeGNlcHRpb24kMS5kZWZhdWx0ID0gSW5kZXhPdXRPZkJvdW5kc0V4Y2VwdGlvbjsKCgl2YXIgX19leHRlbmRzJGcgPSAoY29tbW9uanNHbG9iYWwgJiYgY29tbW9uanNHbG9iYWwuX19leHRlbmRzKSB8fCAoZnVuY3Rpb24gKCkgewoJICAgIHZhciBleHRlbmRTdGF0aWNzID0gZnVuY3Rpb24gKGQsIGIpIHsKCSAgICAgICAgZXh0ZW5kU3RhdGljcyA9IE9iamVjdC5zZXRQcm90b3R5cGVPZiB8fAoJICAgICAgICAgICAgKHsgX19wcm90b19fOiBbXSB9IGluc3RhbmNlb2YgQXJyYXkgJiYgZnVuY3Rpb24gKGQsIGIpIHsgZC5fX3Byb3RvX18gPSBiOyB9KSB8fAoJICAgICAgICAgICAgZnVuY3Rpb24gKGQsIGIpIHsgZm9yICh2YXIgcCBpbiBiKSBpZiAoYi5oYXNPd25Qcm9wZXJ0eShwKSkgZFtwXSA9IGJbcF07IH07CgkgICAgICAgIHJldHVybiBleHRlbmRTdGF0aWNzKGQsIGIpOwoJICAgIH07CgkgICAgcmV0dXJuIGZ1bmN0aW9uIChkLCBiKSB7CgkgICAgICAgIGV4dGVuZFN0YXRpY3MoZCwgYik7CgkgICAgICAgIGZ1bmN0aW9uIF9fKCkgeyB0aGlzLmNvbnN0cnVjdG9yID0gZDsgfQoJICAgICAgICBkLnByb3RvdHlwZSA9IGIgPT09IG51bGwgPyBPYmplY3QuY3JlYXRlKGIpIDogKF9fLnByb3RvdHlwZSA9IGIucHJvdG90eXBlLCBuZXcgX18oKSk7CgkgICAgfTsKCX0pKCk7CglPYmplY3QuZGVmaW5lUHJvcGVydHkoQXJyYXlJbmRleE91dE9mQm91bmRzRXhjZXB0aW9uJDEsICJfX2VzTW9kdWxlIiwgeyB2YWx1ZTogdHJ1ZSB9KTsKCXZhciBJbmRleE91dE9mQm91bmRzRXhjZXB0aW9uXzEgPSBJbmRleE91dE9mQm91bmRzRXhjZXB0aW9uJDE7CgkvKioKCSAqIEN1c3RvbSBFcnJvciBjbGFzcyBvZiB0eXBlIEV4Y2VwdGlvbi4KCSAqLwoJdmFyIEFycmF5SW5kZXhPdXRPZkJvdW5kc0V4Y2VwdGlvbiA9IC8qKiBAY2xhc3MgKi8gKGZ1bmN0aW9uIChfc3VwZXIpIHsKCSAgICBfX2V4dGVuZHMkZyhBcnJheUluZGV4T3V0T2ZCb3VuZHNFeGNlcHRpb24sIF9zdXBlcik7CgkgICAgZnVuY3Rpb24gQXJyYXlJbmRleE91dE9mQm91bmRzRXhjZXB0aW9uKGluZGV4LCBtZXNzYWdlKSB7CgkgICAgICAgIGlmIChpbmRleCA9PT0gdm9pZCAwKSB7IGluZGV4ID0gdW5kZWZpbmVkOyB9CgkgICAgICAgIGlmIChtZXNzYWdlID09PSB2b2lkIDApIHsgbWVzc2FnZSA9IHVuZGVmaW5lZDsgfQoJICAgICAgICB2YXIgX3RoaXMgPSBfc3VwZXIuY2FsbCh0aGlzLCBtZXNzYWdlKSB8fCB0aGlzOwoJICAgICAgICBfdGhpcy5pbmRleCA9IGluZGV4OwoJICAgICAgICBfdGhpcy5tZXNzYWdlID0gbWVzc2FnZTsKCSAgICAgICAgcmV0dXJuIF90aGlzOwoJICAgIH0KCSAgICBBcnJheUluZGV4T3V0T2ZCb3VuZHNFeGNlcHRpb24ua2luZCA9ICdBcnJheUluZGV4T3V0T2ZCb3VuZHNFeGNlcHRpb24nOwoJICAgIHJldHVybiBBcnJheUluZGV4T3V0T2ZCb3VuZHNFeGNlcHRpb247Cgl9KEluZGV4T3V0T2ZCb3VuZHNFeGNlcHRpb25fMS5kZWZhdWx0KSk7CglBcnJheUluZGV4T3V0T2ZCb3VuZHNFeGNlcHRpb24kMS5kZWZhdWx0ID0gQXJyYXlJbmRleE91dE9mQm91bmRzRXhjZXB0aW9uOwoKCXZhciBfX3ZhbHVlcyQ3ID0gKGNvbW1vbmpzR2xvYmFsICYmIGNvbW1vbmpzR2xvYmFsLl9fdmFsdWVzKSB8fCBmdW5jdGlvbihvKSB7CgkgICAgdmFyIHMgPSB0eXBlb2YgU3ltYm9sID09PSAiZnVuY3Rpb24iICYmIFN5bWJvbC5pdGVyYXRvciwgbSA9IHMgJiYgb1tzXSwgaSA9IDA7CgkgICAgaWYgKG0pIHJldHVybiBtLmNhbGwobyk7CgkgICAgaWYgKG8gJiYgdHlwZW9mIG8ubGVuZ3RoID09PSAibnVtYmVyIikgcmV0dXJuIHsKCSAgICAgICAgbmV4dDogZnVuY3Rpb24gKCkgewoJICAgICAgICAgICAgaWYgKG8gJiYgaSA+PSBvLmxlbmd0aCkgbyA9IHZvaWQgMDsKCSAgICAgICAgICAgIHJldHVybiB7IHZhbHVlOiBvICYmIG9baSsrXSwgZG9uZTogIW8gfTsKCSAgICAgICAgfQoJICAgIH07CgkgICAgdGhyb3cgbmV3IFR5cGVFcnJvcihzID8gIk9iamVjdCBpcyBub3QgaXRlcmFibGUuIiA6ICJTeW1ib2wuaXRlcmF0b3IgaXMgbm90IGRlZmluZWQuIik7Cgl9OwoJT2JqZWN0LmRlZmluZVByb3BlcnR5KEFycmF5cyQxLCAiX19lc01vZHVsZSIsIHsgdmFsdWU6IHRydWUgfSk7Cgl2YXIgU3lzdGVtXzEkNSA9IFN5c3RlbSQxOwoJdmFyIElsbGVnYWxBcmd1bWVudEV4Y2VwdGlvbl8xJDkgPSBJbGxlZ2FsQXJndW1lbnRFeGNlcHRpb24kMTsKCXZhciBBcnJheUluZGV4T3V0T2ZCb3VuZHNFeGNlcHRpb25fMSA9IEFycmF5SW5kZXhPdXRPZkJvdW5kc0V4Y2VwdGlvbiQxOwoJdmFyIEFycmF5cyA9IC8qKiBAY2xhc3MgKi8gKGZ1bmN0aW9uICgpIHsKCSAgICBmdW5jdGlvbiBBcnJheXMoKSB7CgkgICAgfQoJICAgIC8qKgoJICAgICAqIEFzc2lnbnMgdGhlIHNwZWNpZmllZCBpbnQgdmFsdWUgdG8gZWFjaCBlbGVtZW50IG9mIHRoZSBzcGVjaWZpZWQgYXJyYXkKCSAgICAgKiBvZiBpbnRzLgoJICAgICAqCgkgICAgICogQHBhcmFtIGEgdGhlIGFycmF5IHRvIGJlIGZpbGxlZAoJICAgICAqIEBwYXJhbSB2YWwgdGhlIHZhbHVlIHRvIGJlIHN0b3JlZCBpbiBhbGwgZWxlbWVudHMgb2YgdGhlIGFycmF5CgkgICAgICovCgkgICAgQXJyYXlzLmZpbGwgPSBmdW5jdGlvbiAoYSwgdmFsKSB7CgkgICAgICAgIGZvciAodmFyIGkgPSAwLCBsZW4gPSBhLmxlbmd0aDsgaSA8IGxlbjsgaSsrKQoJICAgICAgICAgICAgYVtpXSA9IHZhbDsKCSAgICB9OwoJICAgIC8qKgoJICAgICAqIEFzc2lnbnMgdGhlIHNwZWNpZmllZCBpbnQgdmFsdWUgdG8gZWFjaCBlbGVtZW50IG9mIHRoZSBzcGVjaWZpZWQKCSAgICAgKiByYW5nZSBvZiB0aGUgc3BlY2lmaWVkIGFycmF5IG9mIGludHMuICBUaGUgcmFuZ2UgdG8gYmUgZmlsbGVkCgkgICAgICogZXh0ZW5kcyBmcm9tIGluZGV4IHtAY29kZSBmcm9tSW5kZXh9LCBpbmNsdXNpdmUsIHRvIGluZGV4CgkgICAgICoge0Bjb2RlIHRvSW5kZXh9LCBleGNsdXNpdmUuICAoSWYge0Bjb2RlIGZyb21JbmRleD09dG9JbmRleH0sIHRoZQoJICAgICAqIHJhbmdlIHRvIGJlIGZpbGxlZCBpcyBlbXB0eS4pCgkgICAgICoKCSAgICAgKiBAcGFyYW0gYSB0aGUgYXJyYXkgdG8gYmUgZmlsbGVkCgkgICAgICogQHBhcmFtIGZyb21JbmRleCB0aGUgaW5kZXggb2YgdGhlIGZpcnN0IGVsZW1lbnQgKGluY2x1c2l2ZSkgdG8gYmUKCSAgICAgKiAgICAgICAgZmlsbGVkIHdpdGggdGhlIHNwZWNpZmllZCB2YWx1ZQoJICAgICAqIEBwYXJhbSB0b0luZGV4IHRoZSBpbmRleCBvZiB0aGUgbGFzdCBlbGVtZW50IChleGNsdXNpdmUpIHRvIGJlCgkgICAgICogICAgICAgIGZpbGxlZCB3aXRoIHRoZSBzcGVjaWZpZWQgdmFsdWUKCSAgICAgKiBAcGFyYW0gdmFsIHRoZSB2YWx1ZSB0byBiZSBzdG9yZWQgaW4gYWxsIGVsZW1lbnRzIG9mIHRoZSBhcnJheQoJICAgICAqIEB0aHJvd3MgSWxsZWdhbEFyZ3VtZW50RXhjZXB0aW9uIGlmIHtAY29kZSBmcm9tSW5kZXggPiB0b0luZGV4fQoJICAgICAqIEB0aHJvd3MgQXJyYXlJbmRleE91dE9mQm91bmRzRXhjZXB0aW9uIGlmIHtAY29kZSBmcm9tSW5kZXggPCAwfSBvcgoJICAgICAqICAgICAgICAge0Bjb2RlIHRvSW5kZXggPiBhLmxlbmd0aH0KCSAgICAgKi8KCSAgICBBcnJheXMuZmlsbFdpdGhpbiA9IGZ1bmN0aW9uIChhLCBmcm9tSW5kZXgsIHRvSW5kZXgsIHZhbCkgewoJICAgICAgICBBcnJheXMucmFuZ2VDaGVjayhhLmxlbmd0aCwgZnJvbUluZGV4LCB0b0luZGV4KTsKCSAgICAgICAgZm9yICh2YXIgaSA9IGZyb21JbmRleDsgaSA8IHRvSW5kZXg7IGkrKykKCSAgICAgICAgICAgIGFbaV0gPSB2YWw7CgkgICAgfTsKCSAgICAvKioKCSAgICAgKiBDaGVja3MgdGhhdCB7QGNvZGUgZnJvbUluZGV4fSBhbmQge0Bjb2RlIHRvSW5kZXh9IGFyZSBpbgoJICAgICAqIHRoZSByYW5nZSBhbmQgdGhyb3dzIGFuIGV4Y2VwdGlvbiBpZiB0aGV5IGFyZW4ndC4KCSAgICAgKi8KCSAgICBBcnJheXMucmFuZ2VDaGVjayA9IGZ1bmN0aW9uIChhcnJheUxlbmd0aCwgZnJvbUluZGV4LCB0b0luZGV4KSB7CgkgICAgICAgIGlmIChmcm9tSW5kZXggPiB0b0luZGV4KSB7CgkgICAgICAgICAgICB0aHJvdyBuZXcgSWxsZWdhbEFyZ3VtZW50RXhjZXB0aW9uXzEkOS5kZWZhdWx0KCdmcm9tSW5kZXgoJyArIGZyb21JbmRleCArICcpID4gdG9JbmRleCgnICsgdG9JbmRleCArICcpJyk7CgkgICAgICAgIH0KCSAgICAgICAgaWYgKGZyb21JbmRleCA8IDApIHsKCSAgICAgICAgICAgIHRocm93IG5ldyBBcnJheUluZGV4T3V0T2ZCb3VuZHNFeGNlcHRpb25fMS5kZWZhdWx0KGZyb21JbmRleCk7CgkgICAgICAgIH0KCSAgICAgICAgaWYgKHRvSW5kZXggPiBhcnJheUxlbmd0aCkgewoJICAgICAgICAgICAgdGhyb3cgbmV3IEFycmF5SW5kZXhPdXRPZkJvdW5kc0V4Y2VwdGlvbl8xLmRlZmF1bHQodG9JbmRleCk7CgkgICAgICAgIH0KCSAgICB9OwoJICAgIEFycmF5cy5hc0xpc3QgPSBmdW5jdGlvbiAoKSB7CgkgICAgICAgIHZhciBhcmdzID0gW107CgkgICAgICAgIGZvciAodmFyIF9pID0gMDsgX2kgPCBhcmd1bWVudHMubGVuZ3RoOyBfaSsrKSB7CgkgICAgICAgICAgICBhcmdzW19pXSA9IGFyZ3VtZW50c1tfaV07CgkgICAgICAgIH0KCSAgICAgICAgcmV0dXJuIGFyZ3M7CgkgICAgfTsKCSAgICBBcnJheXMuY3JlYXRlID0gZnVuY3Rpb24gKHJvd3MsIGNvbHMsIHZhbHVlKSB7CgkgICAgICAgIHZhciBhcnIgPSBBcnJheS5mcm9tKHsgbGVuZ3RoOiByb3dzIH0pOwoJICAgICAgICByZXR1cm4gYXJyLm1hcChmdW5jdGlvbiAoeCkgeyByZXR1cm4gQXJyYXkuZnJvbSh7IGxlbmd0aDogY29scyB9KS5maWxsKHZhbHVlKTsgfSk7CgkgICAgfTsKCSAgICBBcnJheXMuY3JlYXRlSW50MzJBcnJheSA9IGZ1bmN0aW9uIChyb3dzLCBjb2xzLCB2YWx1ZSkgewoJICAgICAgICB2YXIgYXJyID0gQXJyYXkuZnJvbSh7IGxlbmd0aDogcm93cyB9KTsKCSAgICAgICAgcmV0dXJuIGFyci5tYXAoZnVuY3Rpb24gKHgpIHsgcmV0dXJuIEludDMyQXJyYXkuZnJvbSh7IGxlbmd0aDogY29scyB9KS5maWxsKHZhbHVlKTsgfSk7CgkgICAgfTsKCSAgICBBcnJheXMuZXF1YWxzID0gZnVuY3Rpb24gKGZpcnN0LCBzZWNvbmQpIHsKCSAgICAgICAgaWYgKCFmaXJzdCkgewoJICAgICAgICAgICAgcmV0dXJuIGZhbHNlOwoJICAgICAgICB9CgkgICAgICAgIGlmICghc2Vjb25kKSB7CgkgICAgICAgICAgICByZXR1cm4gZmFsc2U7CgkgICAgICAgIH0KCSAgICAgICAgaWYgKCFmaXJzdC5sZW5ndGgpIHsKCSAgICAgICAgICAgIHJldHVybiBmYWxzZTsKCSAgICAgICAgfQoJICAgICAgICBpZiAoIXNlY29uZC5sZW5ndGgpIHsKCSAgICAgICAgICAgIHJldHVybiBmYWxzZTsKCSAgICAgICAgfQoJICAgICAgICBpZiAoZmlyc3QubGVuZ3RoICE9PSBzZWNvbmQubGVuZ3RoKSB7CgkgICAgICAgICAgICByZXR1cm4gZmFsc2U7CgkgICAgICAgIH0KCSAgICAgICAgZm9yICh2YXIgaSA9IDAsIGxlbmd0aF8xID0gZmlyc3QubGVuZ3RoOyBpIDwgbGVuZ3RoXzE7IGkrKykgewoJICAgICAgICAgICAgaWYgKGZpcnN0W2ldICE9PSBzZWNvbmRbaV0pIHsKCSAgICAgICAgICAgICAgICByZXR1cm4gZmFsc2U7CgkgICAgICAgICAgICB9CgkgICAgICAgIH0KCSAgICAgICAgcmV0dXJuIHRydWU7CgkgICAgfTsKCSAgICBBcnJheXMuaGFzaENvZGUgPSBmdW5jdGlvbiAoYSkgewoJICAgICAgICB2YXIgZV8xLCBfYTsKCSAgICAgICAgaWYgKGEgPT09IG51bGwpIHsKCSAgICAgICAgICAgIHJldHVybiAwOwoJICAgICAgICB9CgkgICAgICAgIHZhciByZXN1bHQgPSAxOwoJICAgICAgICB0cnkgewoJICAgICAgICAgICAgZm9yICh2YXIgYV8xID0gX192YWx1ZXMkNyhhKSwgYV8xXzEgPSBhXzEubmV4dCgpOyAhYV8xXzEuZG9uZTsgYV8xXzEgPSBhXzEubmV4dCgpKSB7CgkgICAgICAgICAgICAgICAgdmFyIGVsZW1lbnQgPSBhXzFfMS52YWx1ZTsKCSAgICAgICAgICAgICAgICByZXN1bHQgPSAzMSAqIHJlc3VsdCArIGVsZW1lbnQ7CgkgICAgICAgICAgICB9CgkgICAgICAgIH0KCSAgICAgICAgY2F0Y2ggKGVfMV8xKSB7IGVfMSA9IHsgZXJyb3I6IGVfMV8xIH07IH0KCSAgICAgICAgZmluYWxseSB7CgkgICAgICAgICAgICB0cnkgewoJICAgICAgICAgICAgICAgIGlmIChhXzFfMSAmJiAhYV8xXzEuZG9uZSAmJiAoX2EgPSBhXzEucmV0dXJuKSkgX2EuY2FsbChhXzEpOwoJICAgICAgICAgICAgfQoJICAgICAgICAgICAgZmluYWxseSB7IGlmIChlXzEpIHRocm93IGVfMS5lcnJvcjsgfQoJICAgICAgICB9CgkgICAgICAgIHJldHVybiByZXN1bHQ7CgkgICAgfTsKCSAgICBBcnJheXMuZmlsbFVpbnQ4QXJyYXkgPSBmdW5jdGlvbiAoYSwgdmFsdWUpIHsKCSAgICAgICAgZm9yICh2YXIgaSA9IDA7IGkgIT09IGEubGVuZ3RoOyBpKyspIHsKCSAgICAgICAgICAgIGFbaV0gPSB2YWx1ZTsKCSAgICAgICAgfQoJICAgIH07CgkgICAgQXJyYXlzLmNvcHlPZiA9IGZ1bmN0aW9uIChvcmlnaW5hbCwgbmV3TGVuZ3RoKSB7CgkgICAgICAgIHJldHVybiBvcmlnaW5hbC5zbGljZSgwLCBuZXdMZW5ndGgpOwoJICAgIH07CgkgICAgQXJyYXlzLmNvcHlPZlVpbnQ4QXJyYXkgPSBmdW5jdGlvbiAob3JpZ2luYWwsIG5ld0xlbmd0aCkgewoJICAgICAgICBpZiAob3JpZ2luYWwubGVuZ3RoIDw9IG5ld0xlbmd0aCkgewoJICAgICAgICAgICAgdmFyIG5ld0FycmF5ID0gbmV3IFVpbnQ4QXJyYXkobmV3TGVuZ3RoKTsKCSAgICAgICAgICAgIG5ld0FycmF5LnNldChvcmlnaW5hbCk7CgkgICAgICAgICAgICByZXR1cm4gbmV3QXJyYXk7CgkgICAgICAgIH0KCSAgICAgICAgcmV0dXJuIG9yaWdpbmFsLnNsaWNlKDAsIG5ld0xlbmd0aCk7CgkgICAgfTsKCSAgICBBcnJheXMuY29weU9mUmFuZ2UgPSBmdW5jdGlvbiAob3JpZ2luYWwsIGZyb20sIHRvKSB7CgkgICAgICAgIHZhciBuZXdMZW5ndGggPSB0byAtIGZyb207CgkgICAgICAgIHZhciBjb3B5ID0gbmV3IEludDMyQXJyYXkobmV3TGVuZ3RoKTsKCSAgICAgICAgU3lzdGVtXzEkNS5kZWZhdWx0LmFycmF5Y29weShvcmlnaW5hbCwgZnJvbSwgY29weSwgMCwgbmV3TGVuZ3RoKTsKCSAgICAgICAgcmV0dXJuIGNvcHk7CgkgICAgfTsKCSAgICAvKgoJICAgICogUmV0dXJucyB0aGUgaW5kZXggb2Ygb2YgdGhlIGVsZW1lbnQgaW4gYSBzb3J0ZWQgYXJyYXkgb3IgKC1uLTEpIHdoZXJlIG4gaXMgdGhlIGluc2VydGlvbiBwb2ludAoJICAgICogZm9yIHRoZSBuZXcgZWxlbWVudC4KCSAgICAqIFBhcmFtZXRlcnM6CgkgICAgKiAgICAgYXIgLSBBIHNvcnRlZCBhcnJheQoJICAgICogICAgIGVsIC0gQW4gZWxlbWVudCB0byBzZWFyY2ggZm9yCgkgICAgKiAgICAgY29tcGFyYXRvciAtIEEgY29tcGFyYXRvciBmdW5jdGlvbi4gVGhlIGZ1bmN0aW9uIHRha2VzIHR3byBhcmd1bWVudHM6IChhLCBiKSBhbmQgcmV0dXJuczoKCSAgICAqICAgICAgICBhIG5lZ2F0aXZlIG51bWJlciAgaWYgYSBpcyBsZXNzIHRoYW4gYjsKCSAgICAqICAgICAgICAwIGlmIGEgaXMgZXF1YWwgdG8gYjsKCSAgICAqICAgICAgICBhIHBvc2l0aXZlIG51bWJlciBvZiBhIGlzIGdyZWF0ZXIgdGhhbiBiLgoJICAgICogVGhlIGFycmF5IG1heSBjb250YWluIGR1cGxpY2F0ZSBlbGVtZW50cy4gSWYgdGhlcmUgYXJlIG1vcmUgdGhhbiBvbmUgZXF1YWwgZWxlbWVudHMgaW4gdGhlIGFycmF5LAoJICAgICogdGhlIHJldHVybmVkIHZhbHVlIGNhbiBiZSB0aGUgaW5kZXggb2YgYW55IG9uZSBvZiB0aGUgZXF1YWwgZWxlbWVudHMuCgkgICAgKgoJICAgICogaHR0cDovL2pzZmlkZGxlLm5ldC9hcnl6aG92L3BrZnN0NTUwLwoJICAgICovCgkgICAgQXJyYXlzLmJpbmFyeVNlYXJjaCA9IGZ1bmN0aW9uIChhciwgZWwsIGNvbXBhcmF0b3IpIHsKCSAgICAgICAgaWYgKHVuZGVmaW5lZCA9PT0gY29tcGFyYXRvcikgewoJICAgICAgICAgICAgY29tcGFyYXRvciA9IEFycmF5cy5udW1iZXJDb21wYXJhdG9yOwoJICAgICAgICB9CgkgICAgICAgIHZhciBtID0gMDsKCSAgICAgICAgdmFyIG4gPSBhci5sZW5ndGggLSAxOwoJICAgICAgICB3aGlsZSAobSA8PSBuKSB7CgkgICAgICAgICAgICB2YXIgayA9IChuICsgbSkgPj4gMTsKCSAgICAgICAgICAgIHZhciBjbXAgPSBjb21wYXJhdG9yKGVsLCBhcltrXSk7CgkgICAgICAgICAgICBpZiAoY21wID4gMCkgewoJICAgICAgICAgICAgICAgIG0gPSBrICsgMTsKCSAgICAgICAgICAgIH0KCSAgICAgICAgICAgIGVsc2UgaWYgKGNtcCA8IDApIHsKCSAgICAgICAgICAgICAgICBuID0gayAtIDE7CgkgICAgICAgICAgICB9CgkgICAgICAgICAgICBlbHNlIHsKCSAgICAgICAgICAgICAgICByZXR1cm4gazsKCSAgICAgICAgICAgIH0KCSAgICAgICAgfQoJICAgICAgICByZXR1cm4gLW0gLSAxOwoJICAgIH07CgkgICAgQXJyYXlzLm51bWJlckNvbXBhcmF0b3IgPSBmdW5jdGlvbiAoYSwgYikgewoJICAgICAgICByZXR1cm4gYSAtIGI7CgkgICAgfTsKCSAgICByZXR1cm4gQXJyYXlzOwoJfSgpKTsKCUFycmF5cyQxLmRlZmF1bHQgPSBBcnJheXM7CgoJdmFyIEludGVnZXIkMSA9IHt9OwoKCU9iamVjdC5kZWZpbmVQcm9wZXJ0eShJbnRlZ2VyJDEsICJfX2VzTW9kdWxlIiwgeyB2YWx1ZTogdHJ1ZSB9KTsKCS8qKgoJICogUG9ueWZpbGwgZm9yIEphdmEncyBJbnRlZ2VyIGNsYXNzLgoJICovCgl2YXIgSW50ZWdlciA9IC8qKiBAY2xhc3MgKi8gKGZ1bmN0aW9uICgpIHsKCSAgICBmdW5jdGlvbiBJbnRlZ2VyKCkgewoJICAgIH0KCSAgICBJbnRlZ2VyLm51bWJlck9mVHJhaWxpbmdaZXJvcyA9IGZ1bmN0aW9uIChpKSB7CgkgICAgICAgIHZhciB5OwoJICAgICAgICBpZiAoaSA9PT0gMCkKCSAgICAgICAgICAgIHJldHVybiAzMjsKCSAgICAgICAgdmFyIG4gPSAzMTsKCSAgICAgICAgeSA9IGkgPDwgMTY7CgkgICAgICAgIGlmICh5ICE9PSAwKSB7CgkgICAgICAgICAgICBuIC09IDE2OwoJICAgICAgICAgICAgaSA9IHk7CgkgICAgICAgIH0KCSAgICAgICAgeSA9IGkgPDwgODsKCSAgICAgICAgaWYgKHkgIT09IDApIHsKCSAgICAgICAgICAgIG4gLT0gODsKCSAgICAgICAgICAgIGkgPSB5OwoJICAgICAgICB9CgkgICAgICAgIHkgPSBpIDw8IDQ7CgkgICAgICAgIGlmICh5ICE9PSAwKSB7CgkgICAgICAgICAgICBuIC09IDQ7CgkgICAgICAgICAgICBpID0geTsKCSAgICAgICAgfQoJICAgICAgICB5ID0gaSA8PCAyOwoJICAgICAgICBpZiAoeSAhPT0gMCkgewoJICAgICAgICAgICAgbiAtPSAyOwoJICAgICAgICAgICAgaSA9IHk7CgkgICAgICAgIH0KCSAgICAgICAgcmV0dXJuIG4gLSAoKGkgPDwgMSkgPj4+IDMxKTsKCSAgICB9OwoJICAgIEludGVnZXIubnVtYmVyT2ZMZWFkaW5nWmVyb3MgPSBmdW5jdGlvbiAoaSkgewoJICAgICAgICAvLyBIRCwgRmlndXJlIDUtNgoJICAgICAgICBpZiAoaSA9PT0gMCkgewoJICAgICAgICAgICAgcmV0dXJuIDMyOwoJICAgICAgICB9CgkgICAgICAgIHZhciBuID0gMTsKCSAgICAgICAgaWYgKGkgPj4+IDE2ID09PSAwKSB7CgkgICAgICAgICAgICBuICs9IDE2OwoJICAgICAgICAgICAgaSA8PD0gMTY7CgkgICAgICAgIH0KCSAgICAgICAgaWYgKGkgPj4+IDI0ID09PSAwKSB7CgkgICAgICAgICAgICBuICs9IDg7CgkgICAgICAgICAgICBpIDw8PSA4OwoJICAgICAgICB9CgkgICAgICAgIGlmIChpID4+PiAyOCA9PT0gMCkgewoJICAgICAgICAgICAgbiArPSA0OwoJICAgICAgICAgICAgaSA8PD0gNDsKCSAgICAgICAgfQoJICAgICAgICBpZiAoaSA+Pj4gMzAgPT09IDApIHsKCSAgICAgICAgICAgIG4gKz0gMjsKCSAgICAgICAgICAgIGkgPDw9IDI7CgkgICAgICAgIH0KCSAgICAgICAgbiAtPSBpID4+PiAzMTsKCSAgICAgICAgcmV0dXJuIG47CgkgICAgfTsKCSAgICBJbnRlZ2VyLnRvSGV4U3RyaW5nID0gZnVuY3Rpb24gKGkpIHsKCSAgICAgICAgcmV0dXJuIGkudG9TdHJpbmcoMTYpOwoJICAgIH07CgkgICAgSW50ZWdlci50b0JpbmFyeVN0cmluZyA9IGZ1bmN0aW9uIChpbnROdW1iZXIpIHsKCSAgICAgICAgcmV0dXJuIFN0cmluZyhwYXJzZUludChTdHJpbmcoaW50TnVtYmVyKSwgMikpOwoJICAgIH07CgkgICAgLy8gUmV0dXJucyB0aGUgbnVtYmVyIG9mIG9uZS1iaXRzIGluIHRoZSB0d28ncyBjb21wbGVtZW50IGJpbmFyeSByZXByZXNlbnRhdGlvbiBvZiB0aGUgc3BlY2lmaWVkIGludCB2YWx1ZS4gVGhpcyBmdW5jdGlvbiBpcyBzb21ldGltZXMgcmVmZXJyZWQgdG8gYXMgdGhlIHBvcHVsYXRpb24gY291bnQuCgkgICAgLy8gUmV0dXJuczoKCSAgICAvLyB0aGUgbnVtYmVyIG9mIG9uZS1iaXRzIGluIHRoZSB0d28ncyBjb21wbGVtZW50IGJpbmFyeSByZXByZXNlbnRhdGlvbiBvZiB0aGUgc3BlY2lmaWVkIGludCB2YWx1ZS4KCSAgICBJbnRlZ2VyLmJpdENvdW50ID0gZnVuY3Rpb24gKGkpIHsKCSAgICAgICAgLy8gSEQsIEZpZ3VyZSA1LTIKCSAgICAgICAgaSA9IGkgLSAoKGkgPj4+IDEpICYgMHg1NTU1NTU1NSk7CgkgICAgICAgIGkgPSAoaSAmIDB4MzMzMzMzMzMpICsgKChpID4+PiAyKSAmIDB4MzMzMzMzMzMpOwoJICAgICAgICBpID0gKGkgKyAoaSA+Pj4gNCkpICYgMHgwZjBmMGYwZjsKCSAgICAgICAgaSA9IGkgKyAoaSA+Pj4gOCk7CgkgICAgICAgIGkgPSBpICsgKGkgPj4+IDE2KTsKCSAgICAgICAgcmV0dXJuIGkgJiAweDNmOwoJICAgIH07CgkgICAgSW50ZWdlci50cnVuY0RpdmlzaW9uID0gZnVuY3Rpb24gKGRpdmlkZW5kLCBkaXZpc29yKSB7CgkgICAgICAgIHJldHVybiBNYXRoLnRydW5jKGRpdmlkZW5kIC8gZGl2aXNvcik7CgkgICAgfTsKCSAgICAvKioKCSAgICAgKiBDb252ZXJ0cyBBIHN0cmluZyB0byBhbiBpbnRlZ2VyLgoJICAgICAqIEBwYXJhbSBzIEEgc3RyaW5nIHRvIGNvbnZlcnQgaW50byBhIG51bWJlci4KCSAgICAgKiBAcGFyYW0gcmFkaXggQSB2YWx1ZSBiZXR3ZWVuIDIgYW5kIDM2IHRoYXQgc3BlY2lmaWVzIHRoZSBiYXNlIG9mIHRoZSBudW1iZXIgaW4gbnVtU3RyaW5nLiBJZiB0aGlzIGFyZ3VtZW50IGlzIG5vdCBzdXBwbGllZCwgc3RyaW5ncyB3aXRoIGEgcHJlZml4IG9mICcweCcgYXJlIGNvbnNpZGVyZWQgaGV4YWRlY2ltYWwuIEFsbCBvdGhlciBzdHJpbmdzIGFyZSBjb25zaWRlcmVkIGRlY2ltYWwuCgkgICAgICovCgkgICAgSW50ZWdlci5wYXJzZUludCA9IGZ1bmN0aW9uIChudW0sIHJhZGl4KSB7CgkgICAgICAgIGlmIChyYWRpeCA9PT0gdm9pZCAwKSB7IHJhZGl4ID0gdW5kZWZpbmVkOyB9CgkgICAgICAgIHJldHVybiBwYXJzZUludChudW0sIHJhZGl4KTsKCSAgICB9OwoJICAgIEludGVnZXIuTUlOX1ZBTFVFXzMyX0JJVFMgPSAtMjE0NzQ4MzY0ODsKCSAgICBJbnRlZ2VyLk1BWF9WQUxVRSA9IE51bWJlci5NQVhfU0FGRV9JTlRFR0VSOwoJICAgIHJldHVybiBJbnRlZ2VyOwoJfSgpKTsKCUludGVnZXIkMS5kZWZhdWx0ID0gSW50ZWdlcjsKCgkvKgoJICogQ29weXJpZ2h0IDIwMDcgWlhpbmcgYXV0aG9ycwoJICoKCSAqIExpY2Vuc2VkIHVuZGVyIHRoZSBBcGFjaGUgTGljZW5zZSwgVmVyc2lvbiAyLjAgKHRoZSAiTGljZW5zZSIpOwoJICogeW91IG1heSBub3QgdXNlIHRoaXMgZmlsZSBleGNlcHQgaW4gY29tcGxpYW5jZSB3aXRoIHRoZSBMaWNlbnNlLgoJICogWW91IG1heSBvYnRhaW4gYSBjb3B5IG9mIHRoZSBMaWNlbnNlIGF0CgkgKgoJICogICAgICBodHRwOi8vd3d3LmFwYWNoZS5vcmcvbGljZW5zZXMvTElDRU5TRS0yLjAKCSAqCgkgKiBVbmxlc3MgcmVxdWlyZWQgYnkgYXBwbGljYWJsZSBsYXcgb3IgYWdyZWVkIHRvIGluIHdyaXRpbmcsIHNvZnR3YXJlCgkgKiBkaXN0cmlidXRlZCB1bmRlciB0aGUgTGljZW5zZSBpcyBkaXN0cmlidXRlZCBvbiBhbiAiQVMgSVMiIEJBU0lTLAoJICogV0lUSE9VVCBXQVJSQU5USUVTIE9SIENPTkRJVElPTlMgT0YgQU5ZIEtJTkQsIGVpdGhlciBleHByZXNzIG9yIGltcGxpZWQuCgkgKiBTZWUgdGhlIExpY2Vuc2UgZm9yIHRoZSBzcGVjaWZpYyBsYW5ndWFnZSBnb3Zlcm5pbmcgcGVybWlzc2lvbnMgYW5kCgkgKiBsaW1pdGF0aW9ucyB1bmRlciB0aGUgTGljZW5zZS4KCSAqLwoJT2JqZWN0LmRlZmluZVByb3BlcnR5KEJpdEFycmF5JDEsICJfX2VzTW9kdWxlIiwgeyB2YWx1ZTogdHJ1ZSB9KTsKCS8qbmFtZXNwYWNlIGNvbS5nb29nbGUuenhpbmcuY29tbW9uIHsqLwoJLyppbXBvcnQgamF2YS51dGlsLkFycmF5czsqLwoJdmFyIElsbGVnYWxBcmd1bWVudEV4Y2VwdGlvbl8xJDggPSBJbGxlZ2FsQXJndW1lbnRFeGNlcHRpb24kMTsKCXZhciBBcnJheXNfMSQxID0gQXJyYXlzJDE7Cgl2YXIgSW50ZWdlcl8xJDIgPSBJbnRlZ2VyJDE7Cgl2YXIgU3lzdGVtXzEkNCA9IFN5c3RlbSQxOwoJLyoqCgkgKiA8cD5BIHNpbXBsZSwgZmFzdCBhcnJheSBvZiBiaXRzLCByZXByZXNlbnRlZCBjb21wYWN0bHkgYnkgYW4gYXJyYXkgb2YgaW50cyBpbnRlcm5hbGx5LjwvcD4KCSAqCgkgKiBAYXV0aG9yIFNlYW4gT3dlbgoJICovCgl2YXIgQml0QXJyYXkgLyppbXBsZW1lbnRzIENsb25lYWJsZSovID0gLyoqIEBjbGFzcyAqLyAoZnVuY3Rpb24gKCkgewoJICAgIC8vIHB1YmxpYyBjb25zdHJ1Y3RvcigpIHsKCSAgICAvLyAgIHRoaXMuc2l6ZSA9IDAKCSAgICAvLyAgIHRoaXMuYml0cyA9IG5ldyBJbnQzMkFycmF5KDEpCgkgICAgLy8gfQoJICAgIC8vIHB1YmxpYyBjb25zdHJ1Y3RvcihzaXplPzogbnVtYmVyIC8qaW50Ki8pIHsKCSAgICAvLyAgIGlmICh1bmRlZmluZWQgPT09IHNpemUpIHsKCSAgICAvLyAgICAgdGhpcy5zaXplID0gMAoJICAgIC8vICAgfSBlbHNlIHsKCSAgICAvLyAgICAgdGhpcy5zaXplID0gc2l6ZQoJICAgIC8vICAgfQoJICAgIC8vICAgdGhpcy5iaXRzID0gdGhpcy5tYWtlQXJyYXkoc2l6ZSkKCSAgICAvLyB9CgkgICAgLy8gRm9yIHRlc3Rpbmcgb25seQoJICAgIGZ1bmN0aW9uIEJpdEFycmF5KHNpemUgLyppbnQqLywgYml0cykgewoJICAgICAgICBpZiAodW5kZWZpbmVkID09PSBzaXplKSB7CgkgICAgICAgICAgICB0aGlzLnNpemUgPSAwOwoJICAgICAgICAgICAgdGhpcy5iaXRzID0gbmV3IEludDMyQXJyYXkoMSk7CgkgICAgICAgIH0KCSAgICAgICAgZWxzZSB7CgkgICAgICAgICAgICB0aGlzLnNpemUgPSBzaXplOwoJICAgICAgICAgICAgaWYgKHVuZGVmaW5lZCA9PT0gYml0cyB8fCBudWxsID09PSBiaXRzKSB7CgkgICAgICAgICAgICAgICAgdGhpcy5iaXRzID0gQml0QXJyYXkubWFrZUFycmF5KHNpemUpOwoJICAgICAgICAgICAgfQoJICAgICAgICAgICAgZWxzZSB7CgkgICAgICAgICAgICAgICAgdGhpcy5iaXRzID0gYml0czsKCSAgICAgICAgICAgIH0KCSAgICAgICAgfQoJICAgIH0KCSAgICBCaXRBcnJheS5wcm90b3R5cGUuZ2V0U2l6ZSA9IGZ1bmN0aW9uICgpIHsKCSAgICAgICAgcmV0dXJuIHRoaXMuc2l6ZTsKCSAgICB9OwoJICAgIEJpdEFycmF5LnByb3RvdHlwZS5nZXRTaXplSW5CeXRlcyA9IGZ1bmN0aW9uICgpIHsKCSAgICAgICAgcmV0dXJuIE1hdGguZmxvb3IoKHRoaXMuc2l6ZSArIDcpIC8gOCk7CgkgICAgfTsKCSAgICBCaXRBcnJheS5wcm90b3R5cGUuZW5zdXJlQ2FwYWNpdHkgPSBmdW5jdGlvbiAoc2l6ZSAvKmludCovKSB7CgkgICAgICAgIGlmIChzaXplID4gdGhpcy5iaXRzLmxlbmd0aCAqIDMyKSB7CgkgICAgICAgICAgICB2YXIgbmV3Qml0cyA9IEJpdEFycmF5Lm1ha2VBcnJheShzaXplKTsKCSAgICAgICAgICAgIFN5c3RlbV8xJDQuZGVmYXVsdC5hcnJheWNvcHkodGhpcy5iaXRzLCAwLCBuZXdCaXRzLCAwLCB0aGlzLmJpdHMubGVuZ3RoKTsKCSAgICAgICAgICAgIHRoaXMuYml0cyA9IG5ld0JpdHM7CgkgICAgICAgIH0KCSAgICB9OwoJICAgIC8qKgoJICAgICAqIEBwYXJhbSBpIGJpdCB0byBnZXQKCSAgICAgKiBAcmV0dXJuIHRydWUgaWZmIGJpdCBpIGlzIHNldAoJICAgICAqLwoJICAgIEJpdEFycmF5LnByb3RvdHlwZS5nZXQgPSBmdW5jdGlvbiAoaSAvKmludCovKSB7CgkgICAgICAgIHJldHVybiAodGhpcy5iaXRzW01hdGguZmxvb3IoaSAvIDMyKV0gJiAoMSA8PCAoaSAmIDB4MUYpKSkgIT09IDA7CgkgICAgfTsKCSAgICAvKioKCSAgICAgKiBTZXRzIGJpdCBpLgoJICAgICAqCgkgICAgICogQHBhcmFtIGkgYml0IHRvIHNldAoJICAgICAqLwoJICAgIEJpdEFycmF5LnByb3RvdHlwZS5zZXQgPSBmdW5jdGlvbiAoaSAvKmludCovKSB7CgkgICAgICAgIHRoaXMuYml0c1tNYXRoLmZsb29yKGkgLyAzMildIHw9IDEgPDwgKGkgJiAweDFGKTsKCSAgICB9OwoJICAgIC8qKgoJICAgICAqIEZsaXBzIGJpdCBpLgoJICAgICAqCgkgICAgICogQHBhcmFtIGkgYml0IHRvIHNldAoJICAgICAqLwoJICAgIEJpdEFycmF5LnByb3RvdHlwZS5mbGlwID0gZnVuY3Rpb24gKGkgLyppbnQqLykgewoJICAgICAgICB0aGlzLmJpdHNbTWF0aC5mbG9vcihpIC8gMzIpXSBePSAxIDw8IChpICYgMHgxRik7CgkgICAgfTsKCSAgICAvKioKCSAgICAgKiBAcGFyYW0gZnJvbSBmaXJzdCBiaXQgdG8gY2hlY2sKCSAgICAgKiBAcmV0dXJuIGluZGV4IG9mIGZpcnN0IGJpdCB0aGF0IGlzIHNldCwgc3RhcnRpbmcgZnJvbSB0aGUgZ2l2ZW4gaW5kZXgsIG9yIHNpemUgaWYgbm9uZSBhcmUgc2V0CgkgICAgICogIGF0IG9yIGJleW9uZCB0aGlzIGdpdmVuIGluZGV4CgkgICAgICogQHNlZSAjZ2V0TmV4dFVuc2V0KGludCkKCSAgICAgKi8KCSAgICBCaXRBcnJheS5wcm90b3R5cGUuZ2V0TmV4dFNldCA9IGZ1bmN0aW9uIChmcm9tIC8qaW50Ki8pIHsKCSAgICAgICAgdmFyIHNpemUgPSB0aGlzLnNpemU7CgkgICAgICAgIGlmIChmcm9tID49IHNpemUpIHsKCSAgICAgICAgICAgIHJldHVybiBzaXplOwoJICAgICAgICB9CgkgICAgICAgIHZhciBiaXRzID0gdGhpcy5iaXRzOwoJICAgICAgICB2YXIgYml0c09mZnNldCA9IE1hdGguZmxvb3IoZnJvbSAvIDMyKTsKCSAgICAgICAgdmFyIGN1cnJlbnRCaXRzID0gYml0c1tiaXRzT2Zmc2V0XTsKCSAgICAgICAgLy8gbWFzayBvZmYgbGVzc2VyIGJpdHMgZmlyc3QKCSAgICAgICAgY3VycmVudEJpdHMgJj0gfigoMSA8PCAoZnJvbSAmIDB4MUYpKSAtIDEpOwoJICAgICAgICB2YXIgbGVuZ3RoID0gYml0cy5sZW5ndGg7CgkgICAgICAgIHdoaWxlIChjdXJyZW50Qml0cyA9PT0gMCkgewoJICAgICAgICAgICAgaWYgKCsrYml0c09mZnNldCA9PT0gbGVuZ3RoKSB7CgkgICAgICAgICAgICAgICAgcmV0dXJuIHNpemU7CgkgICAgICAgICAgICB9CgkgICAgICAgICAgICBjdXJyZW50Qml0cyA9IGJpdHNbYml0c09mZnNldF07CgkgICAgICAgIH0KCSAgICAgICAgdmFyIHJlc3VsdCA9IChiaXRzT2Zmc2V0ICogMzIpICsgSW50ZWdlcl8xJDIuZGVmYXVsdC5udW1iZXJPZlRyYWlsaW5nWmVyb3MoY3VycmVudEJpdHMpOwoJICAgICAgICByZXR1cm4gcmVzdWx0ID4gc2l6ZSA/IHNpemUgOiByZXN1bHQ7CgkgICAgfTsKCSAgICAvKioKCSAgICAgKiBAcGFyYW0gZnJvbSBpbmRleCB0byBzdGFydCBsb29raW5nIGZvciB1bnNldCBiaXQKCSAgICAgKiBAcmV0dXJuIGluZGV4IG9mIG5leHQgdW5zZXQgYml0LCBvciB7QGNvZGUgc2l6ZX0gaWYgbm9uZSBhcmUgdW5zZXQgdW50aWwgdGhlIGVuZAoJICAgICAqIEBzZWUgI2dldE5leHRTZXQoaW50KQoJICAgICAqLwoJICAgIEJpdEFycmF5LnByb3RvdHlwZS5nZXROZXh0VW5zZXQgPSBmdW5jdGlvbiAoZnJvbSAvKmludCovKSB7CgkgICAgICAgIHZhciBzaXplID0gdGhpcy5zaXplOwoJICAgICAgICBpZiAoZnJvbSA+PSBzaXplKSB7CgkgICAgICAgICAgICByZXR1cm4gc2l6ZTsKCSAgICAgICAgfQoJICAgICAgICB2YXIgYml0cyA9IHRoaXMuYml0czsKCSAgICAgICAgdmFyIGJpdHNPZmZzZXQgPSBNYXRoLmZsb29yKGZyb20gLyAzMik7CgkgICAgICAgIHZhciBjdXJyZW50Qml0cyA9IH5iaXRzW2JpdHNPZmZzZXRdOwoJICAgICAgICAvLyBtYXNrIG9mZiBsZXNzZXIgYml0cyBmaXJzdAoJICAgICAgICBjdXJyZW50Qml0cyAmPSB+KCgxIDw8IChmcm9tICYgMHgxRikpIC0gMSk7CgkgICAgICAgIHZhciBsZW5ndGggPSBiaXRzLmxlbmd0aDsKCSAgICAgICAgd2hpbGUgKGN1cnJlbnRCaXRzID09PSAwKSB7CgkgICAgICAgICAgICBpZiAoKytiaXRzT2Zmc2V0ID09PSBsZW5ndGgpIHsKCSAgICAgICAgICAgICAgICByZXR1cm4gc2l6ZTsKCSAgICAgICAgICAgIH0KCSAgICAgICAgICAgIGN1cnJlbnRCaXRzID0gfmJpdHNbYml0c09mZnNldF07CgkgICAgICAgIH0KCSAgICAgICAgdmFyIHJlc3VsdCA9IChiaXRzT2Zmc2V0ICogMzIpICsgSW50ZWdlcl8xJDIuZGVmYXVsdC5udW1iZXJPZlRyYWlsaW5nWmVyb3MoY3VycmVudEJpdHMpOwoJICAgICAgICByZXR1cm4gcmVzdWx0ID4gc2l6ZSA/IHNpemUgOiByZXN1bHQ7CgkgICAgfTsKCSAgICAvKioKCSAgICAgKiBTZXRzIGEgYmxvY2sgb2YgMzIgYml0cywgc3RhcnRpbmcgYXQgYml0IGkuCgkgICAgICoKCSAgICAgKiBAcGFyYW0gaSBmaXJzdCBiaXQgdG8gc2V0CgkgICAgICogQHBhcmFtIG5ld0JpdHMgdGhlIG5ldyB2YWx1ZSBvZiB0aGUgbmV4dCAzMiBiaXRzLiBOb3RlIGFnYWluIHRoYXQgdGhlIGxlYXN0LXNpZ25pZmljYW50IGJpdAoJICAgICAqIGNvcnJlc3BvbmRzIHRvIGJpdCBpLCB0aGUgbmV4dC1sZWFzdC1zaWduaWZpY2FudCB0byBpKzEsIGFuZCBzbyBvbi4KCSAgICAgKi8KCSAgICBCaXRBcnJheS5wcm90b3R5cGUuc2V0QnVsayA9IGZ1bmN0aW9uIChpIC8qaW50Ki8sIG5ld0JpdHMgLyppbnQqLykgewoJICAgICAgICB0aGlzLmJpdHNbTWF0aC5mbG9vcihpIC8gMzIpXSA9IG5ld0JpdHM7CgkgICAgfTsKCSAgICAvKioKCSAgICAgKiBTZXRzIGEgcmFuZ2Ugb2YgYml0cy4KCSAgICAgKgoJICAgICAqIEBwYXJhbSBzdGFydCBzdGFydCBvZiByYW5nZSwgaW5jbHVzaXZlLgoJICAgICAqIEBwYXJhbSBlbmQgZW5kIG9mIHJhbmdlLCBleGNsdXNpdmUKCSAgICAgKi8KCSAgICBCaXRBcnJheS5wcm90b3R5cGUuc2V0UmFuZ2UgPSBmdW5jdGlvbiAoc3RhcnQgLyppbnQqLywgZW5kIC8qaW50Ki8pIHsKCSAgICAgICAgaWYgKGVuZCA8IHN0YXJ0IHx8IHN0YXJ0IDwgMCB8fCBlbmQgPiB0aGlzLnNpemUpIHsKCSAgICAgICAgICAgIHRocm93IG5ldyBJbGxlZ2FsQXJndW1lbnRFeGNlcHRpb25fMSQ4LmRlZmF1bHQoKTsKCSAgICAgICAgfQoJICAgICAgICBpZiAoZW5kID09PSBzdGFydCkgewoJICAgICAgICAgICAgcmV0dXJuOwoJICAgICAgICB9CgkgICAgICAgIGVuZC0tOyAvLyB3aWxsIGJlIGVhc2llciB0byB0cmVhdCB0aGlzIGFzIHRoZSBsYXN0IGFjdHVhbGx5IHNldCBiaXQgLS0gaW5jbHVzaXZlCgkgICAgICAgIHZhciBmaXJzdEludCA9IE1hdGguZmxvb3Ioc3RhcnQgLyAzMik7CgkgICAgICAgIHZhciBsYXN0SW50ID0gTWF0aC5mbG9vcihlbmQgLyAzMik7CgkgICAgICAgIHZhciBiaXRzID0gdGhpcy5iaXRzOwoJICAgICAgICBmb3IgKHZhciBpID0gZmlyc3RJbnQ7IGkgPD0gbGFzdEludDsgaSsrKSB7CgkgICAgICAgICAgICB2YXIgZmlyc3RCaXQgPSBpID4gZmlyc3RJbnQgPyAwIDogc3RhcnQgJiAweDFGOwoJICAgICAgICAgICAgdmFyIGxhc3RCaXQgPSBpIDwgbGFzdEludCA/IDMxIDogZW5kICYgMHgxRjsKCSAgICAgICAgICAgIC8vIE9uZXMgZnJvbSBmaXJzdEJpdCB0byBsYXN0Qml0LCBpbmNsdXNpdmUKCSAgICAgICAgICAgIHZhciBtYXNrID0gKDIgPDwgbGFzdEJpdCkgLSAoMSA8PCBmaXJzdEJpdCk7CgkgICAgICAgICAgICBiaXRzW2ldIHw9IG1hc2s7CgkgICAgICAgIH0KCSAgICB9OwoJICAgIC8qKgoJICAgICAqIENsZWFycyBhbGwgYml0cyAoc2V0cyB0byBmYWxzZSkuCgkgICAgICovCgkgICAgQml0QXJyYXkucHJvdG90eXBlLmNsZWFyID0gZnVuY3Rpb24gKCkgewoJICAgICAgICB2YXIgbWF4ID0gdGhpcy5iaXRzLmxlbmd0aDsKCSAgICAgICAgdmFyIGJpdHMgPSB0aGlzLmJpdHM7CgkgICAgICAgIGZvciAodmFyIGkgPSAwOyBpIDwgbWF4OyBpKyspIHsKCSAgICAgICAgICAgIGJpdHNbaV0gPSAwOwoJICAgICAgICB9CgkgICAgfTsKCSAgICAvKioKCSAgICAgKiBFZmZpY2llbnQgbWV0aG9kIHRvIGNoZWNrIGlmIGEgcmFuZ2Ugb2YgYml0cyBpcyBzZXQsIG9yIG5vdCBzZXQuCgkgICAgICoKCSAgICAgKiBAcGFyYW0gc3RhcnQgc3RhcnQgb2YgcmFuZ2UsIGluY2x1c2l2ZS4KCSAgICAgKiBAcGFyYW0gZW5kIGVuZCBvZiByYW5nZSwgZXhjbHVzaXZlCgkgICAgICogQHBhcmFtIHZhbHVlIGlmIHRydWUsIGNoZWNrcyB0aGF0IGJpdHMgaW4gcmFuZ2UgYXJlIHNldCwgb3RoZXJ3aXNlIGNoZWNrcyB0aGF0IHRoZXkgYXJlIG5vdCBzZXQKCSAgICAgKiBAcmV0dXJuIHRydWUgaWZmIGFsbCBiaXRzIGFyZSBzZXQgb3Igbm90IHNldCBpbiByYW5nZSwgYWNjb3JkaW5nIHRvIHZhbHVlIGFyZ3VtZW50CgkgICAgICogQHRocm93cyBJbGxlZ2FsQXJndW1lbnRFeGNlcHRpb24gaWYgZW5kIGlzIGxlc3MgdGhhbiBzdGFydCBvciB0aGUgcmFuZ2UgaXMgbm90IGNvbnRhaW5lZCBpbiB0aGUgYXJyYXkKCSAgICAgKi8KCSAgICBCaXRBcnJheS5wcm90b3R5cGUuaXNSYW5nZSA9IGZ1bmN0aW9uIChzdGFydCAvKmludCovLCBlbmQgLyppbnQqLywgdmFsdWUpIHsKCSAgICAgICAgaWYgKGVuZCA8IHN0YXJ0IHx8IHN0YXJ0IDwgMCB8fCBlbmQgPiB0aGlzLnNpemUpIHsKCSAgICAgICAgICAgIHRocm93IG5ldyBJbGxlZ2FsQXJndW1lbnRFeGNlcHRpb25fMSQ4LmRlZmF1bHQoKTsKCSAgICAgICAgfQoJICAgICAgICBpZiAoZW5kID09PSBzdGFydCkgewoJICAgICAgICAgICAgcmV0dXJuIHRydWU7IC8vIGVtcHR5IHJhbmdlIG1hdGNoZXMKCSAgICAgICAgfQoJICAgICAgICBlbmQtLTsgLy8gd2lsbCBiZSBlYXNpZXIgdG8gdHJlYXQgdGhpcyBhcyB0aGUgbGFzdCBhY3R1YWxseSBzZXQgYml0IC0tIGluY2x1c2l2ZQoJICAgICAgICB2YXIgZmlyc3RJbnQgPSBNYXRoLmZsb29yKHN0YXJ0IC8gMzIpOwoJICAgICAgICB2YXIgbGFzdEludCA9IE1hdGguZmxvb3IoZW5kIC8gMzIpOwoJICAgICAgICB2YXIgYml0cyA9IHRoaXMuYml0czsKCSAgICAgICAgZm9yICh2YXIgaSA9IGZpcnN0SW50OyBpIDw9IGxhc3RJbnQ7IGkrKykgewoJICAgICAgICAgICAgdmFyIGZpcnN0Qml0ID0gaSA+IGZpcnN0SW50ID8gMCA6IHN0YXJ0ICYgMHgxRjsKCSAgICAgICAgICAgIHZhciBsYXN0Qml0ID0gaSA8IGxhc3RJbnQgPyAzMSA6IGVuZCAmIDB4MUY7CgkgICAgICAgICAgICAvLyBPbmVzIGZyb20gZmlyc3RCaXQgdG8gbGFzdEJpdCwgaW5jbHVzaXZlCgkgICAgICAgICAgICB2YXIgbWFzayA9ICgyIDw8IGxhc3RCaXQpIC0gKDEgPDwgZmlyc3RCaXQpICYgMHhGRkZGRkZGRjsKCSAgICAgICAgICAgIC8vIFRZUEVTQ1JJUFRQT1JUOiAmIDB4RkZGRkZGRkYgYWRkZWQgdG8gZGlzY2FyZCBhbnl0aGluZyBhZnRlciAzMiBiaXRzLCBhcyBFUyBoYXMgNTMgYml0cwoJICAgICAgICAgICAgLy8gUmV0dXJuIGZhbHNlIGlmIHdlJ3JlIGxvb2tpbmcgZm9yIDFzIGFuZCB0aGUgbWFza2VkIGJpdHNbaV0gaXNuJ3QgYWxsIDFzIChpczogdGhhdCwKCSAgICAgICAgICAgIC8vIGVxdWFscyB0aGUgbWFzaywgb3Igd2UncmUgbG9va2luZyBmb3IgMHMgYW5kIHRoZSBtYXNrZWQgcG9ydGlvbiBpcyBub3QgYWxsIDBzCgkgICAgICAgICAgICBpZiAoKGJpdHNbaV0gJiBtYXNrKSAhPT0gKHZhbHVlID8gbWFzayA6IDApKSB7CgkgICAgICAgICAgICAgICAgcmV0dXJuIGZhbHNlOwoJICAgICAgICAgICAgfQoJICAgICAgICB9CgkgICAgICAgIHJldHVybiB0cnVlOwoJICAgIH07CgkgICAgQml0QXJyYXkucHJvdG90eXBlLmFwcGVuZEJpdCA9IGZ1bmN0aW9uIChiaXQpIHsKCSAgICAgICAgdGhpcy5lbnN1cmVDYXBhY2l0eSh0aGlzLnNpemUgKyAxKTsKCSAgICAgICAgaWYgKGJpdCkgewoJICAgICAgICAgICAgdGhpcy5iaXRzW01hdGguZmxvb3IodGhpcy5zaXplIC8gMzIpXSB8PSAxIDw8ICh0aGlzLnNpemUgJiAweDFGKTsKCSAgICAgICAgfQoJICAgICAgICB0aGlzLnNpemUrKzsKCSAgICB9OwoJICAgIC8qKgoJICAgICAqIEFwcGVuZHMgdGhlIGxlYXN0LXNpZ25pZmljYW50IGJpdHMsIGZyb20gdmFsdWUsIGluIG9yZGVyIGZyb20gbW9zdC1zaWduaWZpY2FudCB0bwoJICAgICAqIGxlYXN0LXNpZ25pZmljYW50LiBGb3IgZXhhbXBsZSwgYXBwZW5kaW5nIDYgYml0cyBmcm9tIDB4MDAwMDAxRSB3aWxsIGFwcGVuZCB0aGUgYml0cwoJICAgICAqIDAsIDEsIDEsIDEsIDEsIDAgaW4gdGhhdCBvcmRlci4KCSAgICAgKgoJICAgICAqIEBwYXJhbSB2YWx1ZSB7QGNvZGUgaW50fSBjb250YWluaW5nIGJpdHMgdG8gYXBwZW5kCgkgICAgICogQHBhcmFtIG51bUJpdHMgYml0cyBmcm9tIHZhbHVlIHRvIGFwcGVuZAoJICAgICAqLwoJICAgIEJpdEFycmF5LnByb3RvdHlwZS5hcHBlbmRCaXRzID0gZnVuY3Rpb24gKHZhbHVlIC8qaW50Ki8sIG51bUJpdHMgLyppbnQqLykgewoJICAgICAgICBpZiAobnVtQml0cyA8IDAgfHwgbnVtQml0cyA+IDMyKSB7CgkgICAgICAgICAgICB0aHJvdyBuZXcgSWxsZWdhbEFyZ3VtZW50RXhjZXB0aW9uXzEkOC5kZWZhdWx0KCdOdW0gYml0cyBtdXN0IGJlIGJldHdlZW4gMCBhbmQgMzInKTsKCSAgICAgICAgfQoJICAgICAgICB0aGlzLmVuc3VyZUNhcGFjaXR5KHRoaXMuc2l6ZSArIG51bUJpdHMpOwoJICAgICAgICAvLyBjb25zdCBhcHBlbmRCaXQgPSB0aGlzLmFwcGVuZEJpdDsKCSAgICAgICAgZm9yICh2YXIgbnVtQml0c0xlZnQgPSBudW1CaXRzOyBudW1CaXRzTGVmdCA+IDA7IG51bUJpdHNMZWZ0LS0pIHsKCSAgICAgICAgICAgIHRoaXMuYXBwZW5kQml0KCgodmFsdWUgPj4gKG51bUJpdHNMZWZ0IC0gMSkpICYgMHgwMSkgPT09IDEpOwoJICAgICAgICB9CgkgICAgfTsKCSAgICBCaXRBcnJheS5wcm90b3R5cGUuYXBwZW5kQml0QXJyYXkgPSBmdW5jdGlvbiAob3RoZXIpIHsKCSAgICAgICAgdmFyIG90aGVyU2l6ZSA9IG90aGVyLnNpemU7CgkgICAgICAgIHRoaXMuZW5zdXJlQ2FwYWNpdHkodGhpcy5zaXplICsgb3RoZXJTaXplKTsKCSAgICAgICAgLy8gY29uc3QgYXBwZW5kQml0ID0gdGhpcy5hcHBlbmRCaXQ7CgkgICAgICAgIGZvciAodmFyIGkgPSAwOyBpIDwgb3RoZXJTaXplOyBpKyspIHsKCSAgICAgICAgICAgIHRoaXMuYXBwZW5kQml0KG90aGVyLmdldChpKSk7CgkgICAgICAgIH0KCSAgICB9OwoJICAgIEJpdEFycmF5LnByb3RvdHlwZS54b3IgPSBmdW5jdGlvbiAob3RoZXIpIHsKCSAgICAgICAgaWYgKHRoaXMuc2l6ZSAhPT0gb3RoZXIuc2l6ZSkgewoJICAgICAgICAgICAgdGhyb3cgbmV3IElsbGVnYWxBcmd1bWVudEV4Y2VwdGlvbl8xJDguZGVmYXVsdCgnU2l6ZXMgZG9uXCd0IG1hdGNoJyk7CgkgICAgICAgIH0KCSAgICAgICAgdmFyIGJpdHMgPSB0aGlzLmJpdHM7CgkgICAgICAgIGZvciAodmFyIGkgPSAwLCBsZW5ndGhfMSA9IGJpdHMubGVuZ3RoOyBpIDwgbGVuZ3RoXzE7IGkrKykgewoJICAgICAgICAgICAgLy8gVGhlIGxhc3QgaW50IGNvdWxkIGJlIGluY29tcGxldGUgKGkuZS4gbm90IGhhdmUgMzIgYml0cyBpbgoJICAgICAgICAgICAgLy8gaXQpIGJ1dCB0aGVyZSBpcyBubyBwcm9ibGVtIHNpbmNlIDAgWE9SIDAgPT0gMC4KCSAgICAgICAgICAgIGJpdHNbaV0gXj0gb3RoZXIuYml0c1tpXTsKCSAgICAgICAgfQoJICAgIH07CgkgICAgLyoqCgkgICAgICoKCSAgICAgKiBAcGFyYW0gYml0T2Zmc2V0IGZpcnN0IGJpdCB0byBzdGFydCB3cml0aW5nCgkgICAgICogQHBhcmFtIGFycmF5IGFycmF5IHRvIHdyaXRlIGludG8uIEJ5dGVzIGFyZSB3cml0dGVuIG1vc3Qtc2lnbmlmaWNhbnQgYnl0ZSBmaXJzdC4gVGhpcyBpcyB0aGUgb3Bwb3NpdGUKCSAgICAgKiAgb2YgdGhlIGludGVybmFsIHJlcHJlc2VudGF0aW9uLCB3aGljaCBpcyBleHBvc2VkIGJ5IHtAbGluayAjZ2V0Qml0QXJyYXkoKX0KCSAgICAgKiBAcGFyYW0gb2Zmc2V0IHBvc2l0aW9uIGluIGFycmF5IHRvIHN0YXJ0IHdyaXRpbmcKCSAgICAgKiBAcGFyYW0gbnVtQnl0ZXMgaG93IG1hbnkgYnl0ZXMgdG8gd3JpdGUKCSAgICAgKi8KCSAgICBCaXRBcnJheS5wcm90b3R5cGUudG9CeXRlcyA9IGZ1bmN0aW9uIChiaXRPZmZzZXQgLyppbnQqLywgYXJyYXksIG9mZnNldCAvKmludCovLCBudW1CeXRlcyAvKmludCovKSB7CgkgICAgICAgIGZvciAodmFyIGkgPSAwOyBpIDwgbnVtQnl0ZXM7IGkrKykgewoJICAgICAgICAgICAgdmFyIHRoZUJ5dGUgPSAwOwoJICAgICAgICAgICAgZm9yICh2YXIgaiA9IDA7IGogPCA4OyBqKyspIHsKCSAgICAgICAgICAgICAgICBpZiAodGhpcy5nZXQoYml0T2Zmc2V0KSkgewoJICAgICAgICAgICAgICAgICAgICB0aGVCeXRlIHw9IDEgPDwgKDcgLSBqKTsKCSAgICAgICAgICAgICAgICB9CgkgICAgICAgICAgICAgICAgYml0T2Zmc2V0Kys7CgkgICAgICAgICAgICB9CgkgICAgICAgICAgICBhcnJheVtvZmZzZXQgKyBpXSA9IC8qKGJ5dGUpKi8gdGhlQnl0ZTsKCSAgICAgICAgfQoJICAgIH07CgkgICAgLyoqCgkgICAgICogQHJldHVybiB1bmRlcmx5aW5nIGFycmF5IG9mIGludHMuIFRoZSBmaXJzdCBlbGVtZW50IGhvbGRzIHRoZSBmaXJzdCAzMiBiaXRzLCBhbmQgdGhlIGxlYXN0CgkgICAgICogICAgICAgICBzaWduaWZpY2FudCBiaXQgaXMgYml0IDAuCgkgICAgICovCgkgICAgQml0QXJyYXkucHJvdG90eXBlLmdldEJpdEFycmF5ID0gZnVuY3Rpb24gKCkgewoJICAgICAgICByZXR1cm4gdGhpcy5iaXRzOwoJICAgIH07CgkgICAgLyoqCgkgICAgICogUmV2ZXJzZXMgYWxsIGJpdHMgaW4gdGhlIGFycmF5LgoJICAgICAqLwoJICAgIEJpdEFycmF5LnByb3RvdHlwZS5yZXZlcnNlID0gZnVuY3Rpb24gKCkgewoJICAgICAgICB2YXIgbmV3Qml0cyA9IG5ldyBJbnQzMkFycmF5KHRoaXMuYml0cy5sZW5ndGgpOwoJICAgICAgICAvLyByZXZlcnNlIGFsbCBpbnQncyBmaXJzdAoJICAgICAgICB2YXIgbGVuID0gTWF0aC5mbG9vcigodGhpcy5zaXplIC0gMSkgLyAzMik7CgkgICAgICAgIHZhciBvbGRCaXRzTGVuID0gbGVuICsgMTsKCSAgICAgICAgdmFyIGJpdHMgPSB0aGlzLmJpdHM7CgkgICAgICAgIGZvciAodmFyIGkgPSAwOyBpIDwgb2xkQml0c0xlbjsgaSsrKSB7CgkgICAgICAgICAgICB2YXIgeCA9IGJpdHNbaV07CgkgICAgICAgICAgICB4ID0gKCh4ID4+IDEpICYgMHg1NTU1NTU1NSkgfCAoKHggJiAweDU1NTU1NTU1KSA8PCAxKTsKCSAgICAgICAgICAgIHggPSAoKHggPj4gMikgJiAweDMzMzMzMzMzKSB8ICgoeCAmIDB4MzMzMzMzMzMpIDw8IDIpOwoJICAgICAgICAgICAgeCA9ICgoeCA+PiA0KSAmIDB4MGYwZjBmMGYpIHwgKCh4ICYgMHgwZjBmMGYwZikgPDwgNCk7CgkgICAgICAgICAgICB4ID0gKCh4ID4+IDgpICYgMHgwMGZmMDBmZikgfCAoKHggJiAweDAwZmYwMGZmKSA8PCA4KTsKCSAgICAgICAgICAgIHggPSAoKHggPj4gMTYpICYgMHgwMDAwZmZmZikgfCAoKHggJiAweDAwMDBmZmZmKSA8PCAxNik7CgkgICAgICAgICAgICBuZXdCaXRzW2xlbiAtIGldID0gLyooaW50KSovIHg7CgkgICAgICAgIH0KCSAgICAgICAgLy8gbm93IGNvcnJlY3QgdGhlIGludCdzIGlmIHRoZSBiaXQgc2l6ZSBpc24ndCBhIG11bHRpcGxlIG9mIDMyCgkgICAgICAgIGlmICh0aGlzLnNpemUgIT09IG9sZEJpdHNMZW4gKiAzMikgewoJICAgICAgICAgICAgdmFyIGxlZnRPZmZzZXQgPSBvbGRCaXRzTGVuICogMzIgLSB0aGlzLnNpemU7CgkgICAgICAgICAgICB2YXIgY3VycmVudEludCA9IG5ld0JpdHNbMF0gPj4+IGxlZnRPZmZzZXQ7CgkgICAgICAgICAgICBmb3IgKHZhciBpID0gMTsgaSA8IG9sZEJpdHNMZW47IGkrKykgewoJICAgICAgICAgICAgICAgIHZhciBuZXh0SW50ID0gbmV3Qml0c1tpXTsKCSAgICAgICAgICAgICAgICBjdXJyZW50SW50IHw9IG5leHRJbnQgPDwgKDMyIC0gbGVmdE9mZnNldCk7CgkgICAgICAgICAgICAgICAgbmV3Qml0c1tpIC0gMV0gPSBjdXJyZW50SW50OwoJICAgICAgICAgICAgICAgIGN1cnJlbnRJbnQgPSBuZXh0SW50ID4+PiBsZWZ0T2Zmc2V0OwoJICAgICAgICAgICAgfQoJICAgICAgICAgICAgbmV3Qml0c1tvbGRCaXRzTGVuIC0gMV0gPSBjdXJyZW50SW50OwoJICAgICAgICB9CgkgICAgICAgIHRoaXMuYml0cyA9IG5ld0JpdHM7CgkgICAgfTsKCSAgICBCaXRBcnJheS5tYWtlQXJyYXkgPSBmdW5jdGlvbiAoc2l6ZSAvKmludCovKSB7CgkgICAgICAgIHJldHVybiBuZXcgSW50MzJBcnJheShNYXRoLmZsb29yKChzaXplICsgMzEpIC8gMzIpKTsKCSAgICB9OwoJICAgIC8qQE92ZXJyaWRlKi8KCSAgICBCaXRBcnJheS5wcm90b3R5cGUuZXF1YWxzID0gZnVuY3Rpb24gKG8pIHsKCSAgICAgICAgaWYgKCEobyBpbnN0YW5jZW9mIEJpdEFycmF5KSkgewoJICAgICAgICAgICAgcmV0dXJuIGZhbHNlOwoJICAgICAgICB9CgkgICAgICAgIHZhciBvdGhlciA9IG87CgkgICAgICAgIHJldHVybiB0aGlzLnNpemUgPT09IG90aGVyLnNpemUgJiYgQXJyYXlzXzEkMS5kZWZhdWx0LmVxdWFscyh0aGlzLmJpdHMsIG90aGVyLmJpdHMpOwoJICAgIH07CgkgICAgLypAT3ZlcnJpZGUqLwoJICAgIEJpdEFycmF5LnByb3RvdHlwZS5oYXNoQ29kZSA9IGZ1bmN0aW9uICgpIHsKCSAgICAgICAgcmV0dXJuIDMxICogdGhpcy5zaXplICsgQXJyYXlzXzEkMS5kZWZhdWx0Lmhhc2hDb2RlKHRoaXMuYml0cyk7CgkgICAgfTsKCSAgICAvKkBPdmVycmlkZSovCgkgICAgQml0QXJyYXkucHJvdG90eXBlLnRvU3RyaW5nID0gZnVuY3Rpb24gKCkgewoJICAgICAgICB2YXIgcmVzdWx0ID0gJyc7CgkgICAgICAgIGZvciAodmFyIGkgPSAwLCBzaXplID0gdGhpcy5zaXplOyBpIDwgc2l6ZTsgaSsrKSB7CgkgICAgICAgICAgICBpZiAoKGkgJiAweDA3KSA9PT0gMCkgewoJICAgICAgICAgICAgICAgIHJlc3VsdCArPSAnICc7CgkgICAgICAgICAgICB9CgkgICAgICAgICAgICByZXN1bHQgKz0gdGhpcy5nZXQoaSkgPyAnWCcgOiAnLic7CgkgICAgICAgIH0KCSAgICAgICAgcmV0dXJuIHJlc3VsdDsKCSAgICB9OwoJICAgIC8qQE92ZXJyaWRlKi8KCSAgICBCaXRBcnJheS5wcm90b3R5cGUuY2xvbmUgPSBmdW5jdGlvbiAoKSB7CgkgICAgICAgIHJldHVybiBuZXcgQml0QXJyYXkodGhpcy5zaXplLCB0aGlzLmJpdHMuc2xpY2UoKSk7CgkgICAgfTsKCSAgICByZXR1cm4gQml0QXJyYXk7Cgl9KCkpOwoJQml0QXJyYXkkMS5kZWZhdWx0ID0gQml0QXJyYXk7CgoJdmFyIEJpdE1hdHJpeCQxID0ge307CgoJdmFyIFN0cmluZ0J1aWxkZXIkMSA9IHt9OwoKCXZhciBTdHJpbmdVdGlscyQxID0ge307CgoJdmFyIERlY29kZUhpbnRUeXBlJDEgPSB7fTsKCgkvKgoJICogQ29weXJpZ2h0IDIwMDkgWlhpbmcgYXV0aG9ycwoJICoKCSAqIExpY2Vuc2VkIHVuZGVyIHRoZSBBcGFjaGUgTGljZW5zZSwgVmVyc2lvbiAyLjAgKHRoZSAiTGljZW5zZSIpOwoJICogeW91IG1heSBub3QgdXNlIHRoaXMgZmlsZSBleGNlcHQgaW4gY29tcGxpYW5jZSB3aXRoIHRoZSBMaWNlbnNlLgoJICogWW91IG1heSBvYnRhaW4gYSBjb3B5IG9mIHRoZSBMaWNlbnNlIGF0CgkgKgoJICogICAgICBodHRwOi8vd3d3LmFwYWNoZS5vcmcvbGljZW5zZXMvTElDRU5TRS0yLjAKCSAqCgkgKiBVbmxlc3MgcmVxdWlyZWQgYnkgYXBwbGljYWJsZSBsYXcgb3IgYWdyZWVkIHRvIGluIHdyaXRpbmcsIHNvZnR3YXJlCgkgKiBkaXN0cmlidXRlZCB1bmRlciB0aGUgTGljZW5zZSBpcyBkaXN0cmlidXRlZCBvbiBhbiAiQVMgSVMiIEJBU0lTLAoJICogV0lUSE9VVCBXQVJSQU5USUVTIE9SIENPTkRJVElPTlMgT0YgQU5ZIEtJTkQsIGVpdGhlciBleHByZXNzIG9yIGltcGxpZWQuCgkgKiBTZWUgdGhlIExpY2Vuc2UgZm9yIHRoZSBzcGVjaWZpYyBsYW5ndWFnZSBnb3Zlcm5pbmcgcGVybWlzc2lvbnMgYW5kCgkgKiBsaW1pdGF0aW9ucyB1bmRlciB0aGUgTGljZW5zZS4KCSAqLwoJT2JqZWN0LmRlZmluZVByb3BlcnR5KERlY29kZUhpbnRUeXBlJDEsICJfX2VzTW9kdWxlIiwgeyB2YWx1ZTogdHJ1ZSB9KTsKCS8qbmFtZXNwYWNlIGNvbS5nb29nbGUuenhpbmcgeyovCgkvKioKCSAqIEVuY2Fwc3VsYXRlcyBhIHR5cGUgb2YgaGludCB0aGF0IGEgY2FsbGVyIG1heSBwYXNzIHRvIGEgYmFyY29kZSByZWFkZXIgdG8gaGVscCBpdAoJICogbW9yZSBxdWlja2x5IG9yIGFjY3VyYXRlbHkgZGVjb2RlIGl0LiBJdCBpcyB1cCB0byBpbXBsZW1lbnRhdGlvbnMgdG8gZGVjaWRlIHdoYXQsCgkgKiBpZiBhbnl0aGluZywgdG8gZG8gd2l0aCB0aGUgaW5mb3JtYXRpb24gdGhhdCBpcyBzdXBwbGllZC4KCSAqCgkgKiBAYXV0aG9yIFNlYW4gT3dlbgoJICogQGF1dGhvciBkc3dpdGtpbkBnb29nbGUuY29tIChEYW5pZWwgU3dpdGtpbikKCSAqIEBzZWUgUmVhZGVyI2RlY29kZShCaW5hcnlCaXRtYXAsamF2YS51dGlsLk1hcCkKCSAqLwoJdmFyIERlY29kZUhpbnRUeXBlOwoJKGZ1bmN0aW9uIChEZWNvZGVIaW50VHlwZSkgewoJICAgIC8qKgoJICAgICAqIFVuc3BlY2lmaWVkLCBhcHBsaWNhdGlvbi1zcGVjaWZpYyBoaW50LiBNYXBzIHRvIGFuIHVuc3BlY2lmaWVkIHtAbGluayBPYmplY3R9LgoJICAgICAqLwoJICAgIERlY29kZUhpbnRUeXBlW0RlY29kZUhpbnRUeXBlWyJPVEhFUiJdID0gMF0gPSAiT1RIRVIiOyAvKihPYmplY3QuY2xhc3MpKi8KCSAgICAvKioKCSAgICAgKiBJbWFnZSBpcyBhIHB1cmUgbW9ub2Nocm9tZSBpbWFnZSBvZiBhIGJhcmNvZGUuIERvZXNuJ3QgbWF0dGVyIHdoYXQgaXQgbWFwcyB0bzsKCSAgICAgKiB1c2Uge0BsaW5rIEJvb2xlYW4jVFJVRX0uCgkgICAgICovCgkgICAgRGVjb2RlSGludFR5cGVbRGVjb2RlSGludFR5cGVbIlBVUkVfQkFSQ09ERSJdID0gMV0gPSAiUFVSRV9CQVJDT0RFIjsgLyooVm9pZC5jbGFzcykqLwoJICAgIC8qKgoJICAgICAqIEltYWdlIGlzIGtub3duIHRvIGJlIG9mIG9uZSBvZiBhIGZldyBwb3NzaWJsZSBmb3JtYXRzLgoJICAgICAqIE1hcHMgdG8gYSB7QGxpbmsgTGlzdH0gb2Yge0BsaW5rIEJhcmNvZGVGb3JtYXR9cy4KCSAgICAgKi8KCSAgICBEZWNvZGVIaW50VHlwZVtEZWNvZGVIaW50VHlwZVsiUE9TU0lCTEVfRk9STUFUUyJdID0gMl0gPSAiUE9TU0lCTEVfRk9STUFUUyI7IC8qKExpc3QuY2xhc3MpKi8KCSAgICAvKioKCSAgICAgKiBTcGVuZCBtb3JlIHRpbWUgdG8gdHJ5IHRvIGZpbmQgYSBiYXJjb2RlOyBvcHRpbWl6ZSBmb3IgYWNjdXJhY3ksIG5vdCBzcGVlZC4KCSAgICAgKiBEb2Vzbid0IG1hdHRlciB3aGF0IGl0IG1hcHMgdG87IHVzZSB7QGxpbmsgQm9vbGVhbiNUUlVFfS4KCSAgICAgKi8KCSAgICBEZWNvZGVIaW50VHlwZVtEZWNvZGVIaW50VHlwZVsiVFJZX0hBUkRFUiJdID0gM10gPSAiVFJZX0hBUkRFUiI7IC8qKFZvaWQuY2xhc3MpKi8KCSAgICAvKioKCSAgICAgKiBTcGVjaWZpZXMgd2hhdCBjaGFyYWN0ZXIgZW5jb2RpbmcgdG8gdXNlIHdoZW4gZGVjb2RpbmcsIHdoZXJlIGFwcGxpY2FibGUgKHR5cGUgU3RyaW5nKQoJICAgICAqLwoJICAgIERlY29kZUhpbnRUeXBlW0RlY29kZUhpbnRUeXBlWyJDSEFSQUNURVJfU0VUIl0gPSA0XSA9ICJDSEFSQUNURVJfU0VUIjsgLyooU3RyaW5nLmNsYXNzKSovCgkgICAgLyoqCgkgICAgICogQWxsb3dlZCBsZW5ndGhzIG9mIGVuY29kZWQgZGF0YSAtLSByZWplY3QgYW55dGhpbmcgZWxzZS4gTWFwcyB0byBhbiB7QGNvZGUgSW50MzJBcnJheX0uCgkgICAgICovCgkgICAgRGVjb2RlSGludFR5cGVbRGVjb2RlSGludFR5cGVbIkFMTE9XRURfTEVOR1RIUyJdID0gNV0gPSAiQUxMT1dFRF9MRU5HVEhTIjsgLyooSW50MzJBcnJheS5jbGFzcykqLwoJICAgIC8qKgoJICAgICAqIEFzc3VtZSBDb2RlIDM5IGNvZGVzIGVtcGxveSBhIGNoZWNrIGRpZ2l0LiBEb2Vzbid0IG1hdHRlciB3aGF0IGl0IG1hcHMgdG87CgkgICAgICogdXNlIHtAbGluayBCb29sZWFuI1RSVUV9LgoJICAgICAqLwoJICAgIERlY29kZUhpbnRUeXBlW0RlY29kZUhpbnRUeXBlWyJBU1NVTUVfQ09ERV8zOV9DSEVDS19ESUdJVCJdID0gNl0gPSAiQVNTVU1FX0NPREVfMzlfQ0hFQ0tfRElHSVQiOyAvKihWb2lkLmNsYXNzKSovCgkgICAgLyoqCgkgICAgICogQXNzdW1lIHRoZSBiYXJjb2RlIGlzIGJlaW5nIHByb2Nlc3NlZCBhcyBhIEdTMSBiYXJjb2RlLCBhbmQgbW9kaWZ5IGJlaGF2aW9yIGFzIG5lZWRlZC4KCSAgICAgKiBGb3IgZXhhbXBsZSB0aGlzIGFmZmVjdHMgRk5DMSBoYW5kbGluZyBmb3IgQ29kZSAxMjggKGFrYSBHUzEtMTI4KS4gRG9lc24ndCBtYXR0ZXIgd2hhdCBpdCBtYXBzIHRvOwoJICAgICAqIHVzZSB7QGxpbmsgQm9vbGVhbiNUUlVFfS4KCSAgICAgKi8KCSAgICBEZWNvZGVIaW50VHlwZVtEZWNvZGVIaW50VHlwZVsiQVNTVU1FX0dTMSJdID0gN10gPSAiQVNTVU1FX0dTMSI7IC8qKFZvaWQuY2xhc3MpKi8KCSAgICAvKioKCSAgICAgKiBJZiB0cnVlLCByZXR1cm4gdGhlIHN0YXJ0IGFuZCBlbmQgZGlnaXRzIGluIGEgQ29kYWJhciBiYXJjb2RlIGluc3RlYWQgb2Ygc3RyaXBwaW5nIHRoZW0uIFRoZXkKCSAgICAgKiBhcmUgYWxwaGEsIHdoZXJlYXMgdGhlIHJlc3QgYXJlIG51bWVyaWMuIEJ5IGRlZmF1bHQsIHRoZXkgYXJlIHN0cmlwcGVkLCBidXQgdGhpcyBjYXVzZXMgdGhlbQoJICAgICAqIHRvIG5vdCBiZS4gRG9lc24ndCBtYXR0ZXIgd2hhdCBpdCBtYXBzIHRvOyB1c2Uge0BsaW5rIEJvb2xlYW4jVFJVRX0uCgkgICAgICovCgkgICAgRGVjb2RlSGludFR5cGVbRGVjb2RlSGludFR5cGVbIlJFVFVSTl9DT0RBQkFSX1NUQVJUX0VORCJdID0gOF0gPSAiUkVUVVJOX0NPREFCQVJfU1RBUlRfRU5EIjsgLyooVm9pZC5jbGFzcykqLwoJICAgIC8qKgoJICAgICAqIFRoZSBjYWxsZXIgbmVlZHMgdG8gYmUgbm90aWZpZWQgdmlhIGNhbGxiYWNrIHdoZW4gYSBwb3NzaWJsZSB7QGxpbmsgUmVzdWx0UG9pbnR9CgkgICAgICogaXMgZm91bmQuIE1hcHMgdG8gYSB7QGxpbmsgUmVzdWx0UG9pbnRDYWxsYmFja30uCgkgICAgICovCgkgICAgRGVjb2RlSGludFR5cGVbRGVjb2RlSGludFR5cGVbIk5FRURfUkVTVUxUX1BPSU5UX0NBTExCQUNLIl0gPSA5XSA9ICJORUVEX1JFU1VMVF9QT0lOVF9DQUxMQkFDSyI7IC8qKFJlc3VsdFBvaW50Q2FsbGJhY2suY2xhc3MpKi8KCSAgICAvKioKCSAgICAgKiBBbGxvd2VkIGV4dGVuc2lvbiBsZW5ndGhzIGZvciBFQU4gb3IgVVBDIGJhcmNvZGVzLiBPdGhlciBmb3JtYXRzIHdpbGwgaWdub3JlIHRoaXMuCgkgICAgICogTWFwcyB0byBhbiB7QGNvZGUgSW50MzJBcnJheX0gb2YgdGhlIGFsbG93ZWQgZXh0ZW5zaW9uIGxlbmd0aHMsIGZvciBleGFtcGxlIFsyXSwgWzVdLCBvciBbMiwgNV0uCgkgICAgICogSWYgaXQgaXMgb3B0aW9uYWwgdG8gaGF2ZSBhbiBleHRlbnNpb24sIGRvIG5vdCBzZXQgdGhpcyBoaW50LiBJZiB0aGlzIGlzIHNldCwKCSAgICAgKiBhbmQgYSBVUEMgb3IgRUFOIGJhcmNvZGUgaXMgZm91bmQgYnV0IGFuIGV4dGVuc2lvbiBpcyBub3QsIHRoZW4gbm8gcmVzdWx0IHdpbGwgYmUgcmV0dXJuZWQKCSAgICAgKiBhdCBhbGwuCgkgICAgICovCgkgICAgRGVjb2RlSGludFR5cGVbRGVjb2RlSGludFR5cGVbIkFMTE9XRURfRUFOX0VYVEVOU0lPTlMiXSA9IDEwXSA9ICJBTExPV0VEX0VBTl9FWFRFTlNJT05TIjsgLyooSW50MzJBcnJheS5jbGFzcykqLwoJICAgIC8vIEVuZCBvZiBlbnVtZXJhdGlvbiB2YWx1ZXMuCgkgICAgLyoqCgkgICAgICogRGF0YSB0eXBlIHRoZSBoaW50IGlzIGV4cGVjdGluZy4KCSAgICAgKiBBbW9uZyB0aGUgcG9zc2libGUgdmFsdWVzIHRoZSB7QGxpbmsgVm9pZH0gc3RhbmRzIG91dCBhcyBiZWluZyB1c2VkIGZvcgoJICAgICAqIGhpbnRzIHRoYXQgZG8gbm90IGV4cGVjdCBhIHZhbHVlIHRvIGJlIHN1cHBsaWVkIChmbGFnIGhpbnRzKS4gU3VjaCBoaW50cwoJICAgICAqIHdpbGwgcG9zc2libHkgaGF2ZSB0aGVpciB2YWx1ZSBpZ25vcmVkLCBvciByZXBsYWNlZCBieSBhCgkgICAgICoge0BsaW5rIEJvb2xlYW4jVFJVRX0uIEhpbnQgc3VwcGxpZXJzIHNob3VsZCBwcm9iYWJseSB1c2UKCSAgICAgKiB7QGxpbmsgQm9vbGVhbiNUUlVFfSBhcyBkaXJlY3RlZCBieSB0aGUgYWN0dWFsIGhpbnQgZG9jdW1lbnRhdGlvbi4KCSAgICAgKi8KCSAgICAvLyBwcml2YXRlIHZhbHVlVHlwZTogQ2xhc3M8Pz4KCSAgICAvLyBEZWNvZGVIaW50VHlwZSh2YWx1ZVR5cGU6IENsYXNzPD8+KSB7CgkgICAgLy8gICB0aGlzLnZhbHVlVHlwZSA9IHZhbHVlVHlwZQoJICAgIC8vIH0KCSAgICAvLyBwdWJsaWMgZ2V0VmFsdWVUeXBlKCk6IENsYXNzPD8+IHsKCSAgICAvLyAgIHJldHVybiB2YWx1ZVR5cGUKCSAgICAvLyB9Cgl9KShEZWNvZGVIaW50VHlwZSB8fCAoRGVjb2RlSGludFR5cGUgPSB7fSkpOwoJRGVjb2RlSGludFR5cGUkMS5kZWZhdWx0ID0gRGVjb2RlSGludFR5cGU7CgoJdmFyIENoYXJhY3RlclNldEVDSSA9IHt9OwoKCXZhciBGb3JtYXRFeGNlcHRpb24kMSA9IHt9OwoKCXZhciBfX2V4dGVuZHMkZiA9IChjb21tb25qc0dsb2JhbCAmJiBjb21tb25qc0dsb2JhbC5fX2V4dGVuZHMpIHx8IChmdW5jdGlvbiAoKSB7CgkgICAgdmFyIGV4dGVuZFN0YXRpY3MgPSBmdW5jdGlvbiAoZCwgYikgewoJICAgICAgICBleHRlbmRTdGF0aWNzID0gT2JqZWN0LnNldFByb3RvdHlwZU9mIHx8CgkgICAgICAgICAgICAoeyBfX3Byb3RvX186IFtdIH0gaW5zdGFuY2VvZiBBcnJheSAmJiBmdW5jdGlvbiAoZCwgYikgeyBkLl9fcHJvdG9fXyA9IGI7IH0pIHx8CgkgICAgICAgICAgICBmdW5jdGlvbiAoZCwgYikgeyBmb3IgKHZhciBwIGluIGIpIGlmIChiLmhhc093blByb3BlcnR5KHApKSBkW3BdID0gYltwXTsgfTsKCSAgICAgICAgcmV0dXJuIGV4dGVuZFN0YXRpY3MoZCwgYik7CgkgICAgfTsKCSAgICByZXR1cm4gZnVuY3Rpb24gKGQsIGIpIHsKCSAgICAgICAgZXh0ZW5kU3RhdGljcyhkLCBiKTsKCSAgICAgICAgZnVuY3Rpb24gX18oKSB7IHRoaXMuY29uc3RydWN0b3IgPSBkOyB9CgkgICAgICAgIGQucHJvdG90eXBlID0gYiA9PT0gbnVsbCA/IE9iamVjdC5jcmVhdGUoYikgOiAoX18ucHJvdG90eXBlID0gYi5wcm90b3R5cGUsIG5ldyBfXygpKTsKCSAgICB9OwoJfSkoKTsKCU9iamVjdC5kZWZpbmVQcm9wZXJ0eShGb3JtYXRFeGNlcHRpb24kMSwgIl9fZXNNb2R1bGUiLCB7IHZhbHVlOiB0cnVlIH0pOwoJdmFyIEV4Y2VwdGlvbl8xJDcgPSBFeGNlcHRpb24kMTsKCS8qKgoJICogQ3VzdG9tIEVycm9yIGNsYXNzIG9mIHR5cGUgRXhjZXB0aW9uLgoJICovCgl2YXIgRm9ybWF0RXhjZXB0aW9uID0gLyoqIEBjbGFzcyAqLyAoZnVuY3Rpb24gKF9zdXBlcikgewoJICAgIF9fZXh0ZW5kcyRmKEZvcm1hdEV4Y2VwdGlvbiwgX3N1cGVyKTsKCSAgICBmdW5jdGlvbiBGb3JtYXRFeGNlcHRpb24oKSB7CgkgICAgICAgIHJldHVybiBfc3VwZXIgIT09IG51bGwgJiYgX3N1cGVyLmFwcGx5KHRoaXMsIGFyZ3VtZW50cykgfHwgdGhpczsKCSAgICB9CgkgICAgRm9ybWF0RXhjZXB0aW9uLmdldEZvcm1hdEluc3RhbmNlID0gZnVuY3Rpb24gKCkgewoJICAgICAgICByZXR1cm4gbmV3IEZvcm1hdEV4Y2VwdGlvbigpOwoJICAgIH07CgkgICAgRm9ybWF0RXhjZXB0aW9uLmtpbmQgPSAnRm9ybWF0RXhjZXB0aW9uJzsKCSAgICByZXR1cm4gRm9ybWF0RXhjZXB0aW9uOwoJfShFeGNlcHRpb25fMSQ3LmRlZmF1bHQpKTsKCUZvcm1hdEV4Y2VwdGlvbiQxLmRlZmF1bHQgPSBGb3JtYXRFeGNlcHRpb247CgoJKGZ1bmN0aW9uIChleHBvcnRzKSB7CgkvKgoJICogQ29weXJpZ2h0IDIwMDggWlhpbmcgYXV0aG9ycwoJICoKCSAqIExpY2Vuc2VkIHVuZGVyIHRoZSBBcGFjaGUgTGljZW5zZSwgVmVyc2lvbiAyLjAgKHRoZSAiTGljZW5zZSIpOwoJICogeW91IG1heSBub3QgdXNlIHRoaXMgZmlsZSBleGNlcHQgaW4gY29tcGxpYW5jZSB3aXRoIHRoZSBMaWNlbnNlLgoJICogWW91IG1heSBvYnRhaW4gYSBjb3B5IG9mIHRoZSBMaWNlbnNlIGF0CgkgKgoJICogICAgICBodHRwOi8vd3d3LmFwYWNoZS5vcmcvbGljZW5zZXMvTElDRU5TRS0yLjAKCSAqCgkgKiBVbmxlc3MgcmVxdWlyZWQgYnkgYXBwbGljYWJsZSBsYXcgb3IgYWdyZWVkIHRvIGluIHdyaXRpbmcsIHNvZnR3YXJlCgkgKiBkaXN0cmlidXRlZCB1bmRlciB0aGUgTGljZW5zZSBpcyBkaXN0cmlidXRlZCBvbiBhbiAiQVMgSVMiIEJBU0lTLAoJICogV0lUSE9VVCBXQVJSQU5USUVTIE9SIENPTkRJVElPTlMgT0YgQU5ZIEtJTkQsIGVpdGhlciBleHByZXNzIG9yIGltcGxpZWQuCgkgKiBTZWUgdGhlIExpY2Vuc2UgZm9yIHRoZSBzcGVjaWZpYyBsYW5ndWFnZSBnb3Zlcm5pbmcgcGVybWlzc2lvbnMgYW5kCgkgKiBsaW1pdGF0aW9ucyB1bmRlciB0aGUgTGljZW5zZS4KCSAqLwoJdmFyIF9fdmFsdWVzID0gKGNvbW1vbmpzR2xvYmFsICYmIGNvbW1vbmpzR2xvYmFsLl9fdmFsdWVzKSB8fCBmdW5jdGlvbihvKSB7CgkgICAgdmFyIHMgPSB0eXBlb2YgU3ltYm9sID09PSAiZnVuY3Rpb24iICYmIFN5bWJvbC5pdGVyYXRvciwgbSA9IHMgJiYgb1tzXSwgaSA9IDA7CgkgICAgaWYgKG0pIHJldHVybiBtLmNhbGwobyk7CgkgICAgaWYgKG8gJiYgdHlwZW9mIG8ubGVuZ3RoID09PSAibnVtYmVyIikgcmV0dXJuIHsKCSAgICAgICAgbmV4dDogZnVuY3Rpb24gKCkgewoJICAgICAgICAgICAgaWYgKG8gJiYgaSA+PSBvLmxlbmd0aCkgbyA9IHZvaWQgMDsKCSAgICAgICAgICAgIHJldHVybiB7IHZhbHVlOiBvICYmIG9baSsrXSwgZG9uZTogIW8gfTsKCSAgICAgICAgfQoJICAgIH07CgkgICAgdGhyb3cgbmV3IFR5cGVFcnJvcihzID8gIk9iamVjdCBpcyBub3QgaXRlcmFibGUuIiA6ICJTeW1ib2wuaXRlcmF0b3IgaXMgbm90IGRlZmluZWQuIik7Cgl9OwoJT2JqZWN0LmRlZmluZVByb3BlcnR5KGV4cG9ydHMsICJfX2VzTW9kdWxlIiwgeyB2YWx1ZTogdHJ1ZSB9KTsKCWV4cG9ydHMuQ2hhcmFjdGVyU2V0VmFsdWVJZGVudGlmaWVycyA9IHZvaWQgMDsKCS8qbmFtZXNwYWNlIGNvbS5nb29nbGUuenhpbmcuY29tbW9uIHsqLwoJdmFyIEZvcm1hdEV4Y2VwdGlvbl8xID0gRm9ybWF0RXhjZXB0aW9uJDE7CgkvKmltcG9ydCBqYXZhLnV0aWwuSGFzaE1hcDsqLwoJLyppbXBvcnQgamF2YS51dGlsLk1hcDsqLwoJdmFyIENoYXJhY3RlclNldFZhbHVlSWRlbnRpZmllcnM7CgkoZnVuY3Rpb24gKENoYXJhY3RlclNldFZhbHVlSWRlbnRpZmllcnMpIHsKCSAgICBDaGFyYWN0ZXJTZXRWYWx1ZUlkZW50aWZpZXJzW0NoYXJhY3RlclNldFZhbHVlSWRlbnRpZmllcnNbIkNwNDM3Il0gPSAwXSA9ICJDcDQzNyI7CgkgICAgQ2hhcmFjdGVyU2V0VmFsdWVJZGVudGlmaWVyc1tDaGFyYWN0ZXJTZXRWYWx1ZUlkZW50aWZpZXJzWyJJU084ODU5XzEiXSA9IDFdID0gIklTTzg4NTlfMSI7CgkgICAgQ2hhcmFjdGVyU2V0VmFsdWVJZGVudGlmaWVyc1tDaGFyYWN0ZXJTZXRWYWx1ZUlkZW50aWZpZXJzWyJJU084ODU5XzIiXSA9IDJdID0gIklTTzg4NTlfMiI7CgkgICAgQ2hhcmFjdGVyU2V0VmFsdWVJZGVudGlmaWVyc1tDaGFyYWN0ZXJTZXRWYWx1ZUlkZW50aWZpZXJzWyJJU084ODU5XzMiXSA9IDNdID0gIklTTzg4NTlfMyI7CgkgICAgQ2hhcmFjdGVyU2V0VmFsdWVJZGVudGlmaWVyc1tDaGFyYWN0ZXJTZXRWYWx1ZUlkZW50aWZpZXJzWyJJU084ODU5XzQiXSA9IDRdID0gIklTTzg4NTlfNCI7CgkgICAgQ2hhcmFjdGVyU2V0VmFsdWVJZGVudGlmaWVyc1tDaGFyYWN0ZXJTZXRWYWx1ZUlkZW50aWZpZXJzWyJJU084ODU5XzUiXSA9IDVdID0gIklTTzg4NTlfNSI7CgkgICAgQ2hhcmFjdGVyU2V0VmFsdWVJZGVudGlmaWVyc1tDaGFyYWN0ZXJTZXRWYWx1ZUlkZW50aWZpZXJzWyJJU084ODU5XzYiXSA9IDZdID0gIklTTzg4NTlfNiI7CgkgICAgQ2hhcmFjdGVyU2V0VmFsdWVJZGVudGlmaWVyc1tDaGFyYWN0ZXJTZXRWYWx1ZUlkZW50aWZpZXJzWyJJU084ODU5XzciXSA9IDddID0gIklTTzg4NTlfNyI7CgkgICAgQ2hhcmFjdGVyU2V0VmFsdWVJZGVudGlmaWVyc1tDaGFyYWN0ZXJTZXRWYWx1ZUlkZW50aWZpZXJzWyJJU084ODU5XzgiXSA9IDhdID0gIklTTzg4NTlfOCI7CgkgICAgQ2hhcmFjdGVyU2V0VmFsdWVJZGVudGlmaWVyc1tDaGFyYWN0ZXJTZXRWYWx1ZUlkZW50aWZpZXJzWyJJU084ODU5XzkiXSA9IDldID0gIklTTzg4NTlfOSI7CgkgICAgQ2hhcmFjdGVyU2V0VmFsdWVJZGVudGlmaWVyc1tDaGFyYWN0ZXJTZXRWYWx1ZUlkZW50aWZpZXJzWyJJU084ODU5XzEwIl0gPSAxMF0gPSAiSVNPODg1OV8xMCI7CgkgICAgQ2hhcmFjdGVyU2V0VmFsdWVJZGVudGlmaWVyc1tDaGFyYWN0ZXJTZXRWYWx1ZUlkZW50aWZpZXJzWyJJU084ODU5XzExIl0gPSAxMV0gPSAiSVNPODg1OV8xMSI7CgkgICAgQ2hhcmFjdGVyU2V0VmFsdWVJZGVudGlmaWVyc1tDaGFyYWN0ZXJTZXRWYWx1ZUlkZW50aWZpZXJzWyJJU084ODU5XzEzIl0gPSAxMl0gPSAiSVNPODg1OV8xMyI7CgkgICAgQ2hhcmFjdGVyU2V0VmFsdWVJZGVudGlmaWVyc1tDaGFyYWN0ZXJTZXRWYWx1ZUlkZW50aWZpZXJzWyJJU084ODU5XzE0Il0gPSAxM10gPSAiSVNPODg1OV8xNCI7CgkgICAgQ2hhcmFjdGVyU2V0VmFsdWVJZGVudGlmaWVyc1tDaGFyYWN0ZXJTZXRWYWx1ZUlkZW50aWZpZXJzWyJJU084ODU5XzE1Il0gPSAxNF0gPSAiSVNPODg1OV8xNSI7CgkgICAgQ2hhcmFjdGVyU2V0VmFsdWVJZGVudGlmaWVyc1tDaGFyYWN0ZXJTZXRWYWx1ZUlkZW50aWZpZXJzWyJJU084ODU5XzE2Il0gPSAxNV0gPSAiSVNPODg1OV8xNiI7CgkgICAgQ2hhcmFjdGVyU2V0VmFsdWVJZGVudGlmaWVyc1tDaGFyYWN0ZXJTZXRWYWx1ZUlkZW50aWZpZXJzWyJTSklTIl0gPSAxNl0gPSAiU0pJUyI7CgkgICAgQ2hhcmFjdGVyU2V0VmFsdWVJZGVudGlmaWVyc1tDaGFyYWN0ZXJTZXRWYWx1ZUlkZW50aWZpZXJzWyJDcDEyNTAiXSA9IDE3XSA9ICJDcDEyNTAiOwoJICAgIENoYXJhY3RlclNldFZhbHVlSWRlbnRpZmllcnNbQ2hhcmFjdGVyU2V0VmFsdWVJZGVudGlmaWVyc1siQ3AxMjUxIl0gPSAxOF0gPSAiQ3AxMjUxIjsKCSAgICBDaGFyYWN0ZXJTZXRWYWx1ZUlkZW50aWZpZXJzW0NoYXJhY3RlclNldFZhbHVlSWRlbnRpZmllcnNbIkNwMTI1MiJdID0gMTldID0gIkNwMTI1MiI7CgkgICAgQ2hhcmFjdGVyU2V0VmFsdWVJZGVudGlmaWVyc1tDaGFyYWN0ZXJTZXRWYWx1ZUlkZW50aWZpZXJzWyJDcDEyNTYiXSA9IDIwXSA9ICJDcDEyNTYiOwoJICAgIENoYXJhY3RlclNldFZhbHVlSWRlbnRpZmllcnNbQ2hhcmFjdGVyU2V0VmFsdWVJZGVudGlmaWVyc1siVW5pY29kZUJpZ1VubWFya2VkIl0gPSAyMV0gPSAiVW5pY29kZUJpZ1VubWFya2VkIjsKCSAgICBDaGFyYWN0ZXJTZXRWYWx1ZUlkZW50aWZpZXJzW0NoYXJhY3RlclNldFZhbHVlSWRlbnRpZmllcnNbIlVURjgiXSA9IDIyXSA9ICJVVEY4IjsKCSAgICBDaGFyYWN0ZXJTZXRWYWx1ZUlkZW50aWZpZXJzW0NoYXJhY3RlclNldFZhbHVlSWRlbnRpZmllcnNbIkFTQ0lJIl0gPSAyM10gPSAiQVNDSUkiOwoJICAgIENoYXJhY3RlclNldFZhbHVlSWRlbnRpZmllcnNbQ2hhcmFjdGVyU2V0VmFsdWVJZGVudGlmaWVyc1siQmlnNSJdID0gMjRdID0gIkJpZzUiOwoJICAgIENoYXJhY3RlclNldFZhbHVlSWRlbnRpZmllcnNbQ2hhcmFjdGVyU2V0VmFsdWVJZGVudGlmaWVyc1siR0IxODAzMCJdID0gMjVdID0gIkdCMTgwMzAiOwoJICAgIENoYXJhY3RlclNldFZhbHVlSWRlbnRpZmllcnNbQ2hhcmFjdGVyU2V0VmFsdWVJZGVudGlmaWVyc1siRVVDX0tSIl0gPSAyNl0gPSAiRVVDX0tSIjsKCX0pKENoYXJhY3RlclNldFZhbHVlSWRlbnRpZmllcnMgPSBleHBvcnRzLkNoYXJhY3RlclNldFZhbHVlSWRlbnRpZmllcnMgfHwgKGV4cG9ydHMuQ2hhcmFjdGVyU2V0VmFsdWVJZGVudGlmaWVycyA9IHt9KSk7CgkvKioKCSAqIEVuY2Fwc3VsYXRlcyBhIENoYXJhY3RlciBTZXQgRUNJLCBhY2NvcmRpbmcgdG8gIkV4dGVuZGVkIENoYW5uZWwgSW50ZXJwcmV0YXRpb25zIiA1LjMuMS4xCgkgKiBvZiBJU08gMTgwMDQuCgkgKgoJICogQGF1dGhvciBTZWFuIE93ZW4KCSAqLwoJdmFyIENoYXJhY3RlclNldEVDSSA9IC8qKiBAY2xhc3MgKi8gKGZ1bmN0aW9uICgpIHsKCSAgICBmdW5jdGlvbiBDaGFyYWN0ZXJTZXRFQ0kodmFsdWVJZGVudGlmaWVyLCB2YWx1ZXNQYXJhbSwgbmFtZSkgewoJICAgICAgICB2YXIgZV8xLCBfYTsKCSAgICAgICAgdmFyIG90aGVyRW5jb2RpbmdOYW1lcyA9IFtdOwoJICAgICAgICBmb3IgKHZhciBfaSA9IDM7IF9pIDwgYXJndW1lbnRzLmxlbmd0aDsgX2krKykgewoJICAgICAgICAgICAgb3RoZXJFbmNvZGluZ05hbWVzW19pIC0gM10gPSBhcmd1bWVudHNbX2ldOwoJICAgICAgICB9CgkgICAgICAgIHRoaXMudmFsdWVJZGVudGlmaWVyID0gdmFsdWVJZGVudGlmaWVyOwoJICAgICAgICB0aGlzLm5hbWUgPSBuYW1lOwoJICAgICAgICBpZiAodHlwZW9mIHZhbHVlc1BhcmFtID09PSAnbnVtYmVyJykgewoJICAgICAgICAgICAgdGhpcy52YWx1ZXMgPSBJbnQzMkFycmF5LmZyb20oW3ZhbHVlc1BhcmFtXSk7CgkgICAgICAgIH0KCSAgICAgICAgZWxzZSB7CgkgICAgICAgICAgICB0aGlzLnZhbHVlcyA9IHZhbHVlc1BhcmFtOwoJICAgICAgICB9CgkgICAgICAgIHRoaXMub3RoZXJFbmNvZGluZ05hbWVzID0gb3RoZXJFbmNvZGluZ05hbWVzOwoJICAgICAgICBDaGFyYWN0ZXJTZXRFQ0kuVkFMVUVfSURFTlRJRklFUl9UT19FQ0kuc2V0KHZhbHVlSWRlbnRpZmllciwgdGhpcyk7CgkgICAgICAgIENoYXJhY3RlclNldEVDSS5OQU1FX1RPX0VDSS5zZXQobmFtZSwgdGhpcyk7CgkgICAgICAgIHZhciB2YWx1ZXMgPSB0aGlzLnZhbHVlczsKCSAgICAgICAgZm9yICh2YXIgaSA9IDAsIGxlbmd0aF8xID0gdmFsdWVzLmxlbmd0aDsgaSAhPT0gbGVuZ3RoXzE7IGkrKykgewoJICAgICAgICAgICAgdmFyIHYgPSB2YWx1ZXNbaV07CgkgICAgICAgICAgICBDaGFyYWN0ZXJTZXRFQ0kuVkFMVUVTX1RPX0VDSS5zZXQodiwgdGhpcyk7CgkgICAgICAgIH0KCSAgICAgICAgdHJ5IHsKCSAgICAgICAgICAgIGZvciAodmFyIG90aGVyRW5jb2RpbmdOYW1lc18xID0gX192YWx1ZXMob3RoZXJFbmNvZGluZ05hbWVzKSwgb3RoZXJFbmNvZGluZ05hbWVzXzFfMSA9IG90aGVyRW5jb2RpbmdOYW1lc18xLm5leHQoKTsgIW90aGVyRW5jb2RpbmdOYW1lc18xXzEuZG9uZTsgb3RoZXJFbmNvZGluZ05hbWVzXzFfMSA9IG90aGVyRW5jb2RpbmdOYW1lc18xLm5leHQoKSkgewoJICAgICAgICAgICAgICAgIHZhciBvdGhlck5hbWUgPSBvdGhlckVuY29kaW5nTmFtZXNfMV8xLnZhbHVlOwoJICAgICAgICAgICAgICAgIENoYXJhY3RlclNldEVDSS5OQU1FX1RPX0VDSS5zZXQob3RoZXJOYW1lLCB0aGlzKTsKCSAgICAgICAgICAgIH0KCSAgICAgICAgfQoJICAgICAgICBjYXRjaCAoZV8xXzEpIHsgZV8xID0geyBlcnJvcjogZV8xXzEgfTsgfQoJICAgICAgICBmaW5hbGx5IHsKCSAgICAgICAgICAgIHRyeSB7CgkgICAgICAgICAgICAgICAgaWYgKG90aGVyRW5jb2RpbmdOYW1lc18xXzEgJiYgIW90aGVyRW5jb2RpbmdOYW1lc18xXzEuZG9uZSAmJiAoX2EgPSBvdGhlckVuY29kaW5nTmFtZXNfMS5yZXR1cm4pKSBfYS5jYWxsKG90aGVyRW5jb2RpbmdOYW1lc18xKTsKCSAgICAgICAgICAgIH0KCSAgICAgICAgICAgIGZpbmFsbHkgeyBpZiAoZV8xKSB0aHJvdyBlXzEuZXJyb3I7IH0KCSAgICAgICAgfQoJICAgIH0KCSAgICAvLyBDaGFyYWN0ZXJTZXRFQ0kodmFsdWU6IG51bWJlciAvKmludCovKSB7CgkgICAgLy8gICB0aGlzKG5ldyBJbnQzMkFycmF5IHt2YWx1ZX0pCgkgICAgLy8gfQoJICAgIC8vIENoYXJhY3RlclNldEVDSSh2YWx1ZTogbnVtYmVyIC8qaW50Ki8sIFN0cmluZy4uLiBvdGhlckVuY29kaW5nTmFtZXMpIHsKCSAgICAvLyAgIHRoaXMudmFsdWVzID0gbmV3IEludDMyQXJyYXkge3ZhbHVlfQoJICAgIC8vICAgdGhpcy5vdGhlckVuY29kaW5nTmFtZXMgPSBvdGhlckVuY29kaW5nTmFtZXMKCSAgICAvLyB9CgkgICAgLy8gQ2hhcmFjdGVyU2V0RUNJKHZhbHVlczogSW50MzJBcnJheSwgU3RyaW5nLi4uIG90aGVyRW5jb2RpbmdOYW1lcykgewoJICAgIC8vICAgdGhpcy52YWx1ZXMgPSB2YWx1ZXMKCSAgICAvLyAgIHRoaXMub3RoZXJFbmNvZGluZ05hbWVzID0gb3RoZXJFbmNvZGluZ05hbWVzCgkgICAgLy8gfQoJICAgIENoYXJhY3RlclNldEVDSS5wcm90b3R5cGUuZ2V0VmFsdWVJZGVudGlmaWVyID0gZnVuY3Rpb24gKCkgewoJICAgICAgICByZXR1cm4gdGhpcy52YWx1ZUlkZW50aWZpZXI7CgkgICAgfTsKCSAgICBDaGFyYWN0ZXJTZXRFQ0kucHJvdG90eXBlLmdldE5hbWUgPSBmdW5jdGlvbiAoKSB7CgkgICAgICAgIHJldHVybiB0aGlzLm5hbWU7CgkgICAgfTsKCSAgICBDaGFyYWN0ZXJTZXRFQ0kucHJvdG90eXBlLmdldFZhbHVlID0gZnVuY3Rpb24gKCkgewoJICAgICAgICByZXR1cm4gdGhpcy52YWx1ZXNbMF07CgkgICAgfTsKCSAgICAvKioKCSAgICAgKiBAcGFyYW0gdmFsdWUgY2hhcmFjdGVyIHNldCBFQ0kgdmFsdWUKCSAgICAgKiBAcmV0dXJuIHtAY29kZSBDaGFyYWN0ZXJTZXRFQ0l9IHJlcHJlc2VudGluZyBFQ0kgb2YgZ2l2ZW4gdmFsdWUsIG9yIG51bGwgaWYgaXQgaXMgbGVnYWwgYnV0CgkgICAgICogICB1bnN1cHBvcnRlZAoJICAgICAqIEB0aHJvd3MgRm9ybWF0RXhjZXB0aW9uIGlmIEVDSSB2YWx1ZSBpcyBpbnZhbGlkCgkgICAgICovCgkgICAgQ2hhcmFjdGVyU2V0RUNJLmdldENoYXJhY3RlclNldEVDSUJ5VmFsdWUgPSBmdW5jdGlvbiAodmFsdWUgLyppbnQqLykgewoJICAgICAgICBpZiAodmFsdWUgPCAwIHx8IHZhbHVlID49IDkwMCkgewoJICAgICAgICAgICAgdGhyb3cgbmV3IEZvcm1hdEV4Y2VwdGlvbl8xLmRlZmF1bHQoJ2luY29yZWN0IHZhbHVlJyk7CgkgICAgICAgIH0KCSAgICAgICAgdmFyIGNoYXJhY3RlclNldCA9IENoYXJhY3RlclNldEVDSS5WQUxVRVNfVE9fRUNJLmdldCh2YWx1ZSk7CgkgICAgICAgIGlmICh1bmRlZmluZWQgPT09IGNoYXJhY3RlclNldCkgewoJICAgICAgICAgICAgdGhyb3cgbmV3IEZvcm1hdEV4Y2VwdGlvbl8xLmRlZmF1bHQoJ2luY29yZWN0IHZhbHVlJyk7CgkgICAgICAgIH0KCSAgICAgICAgcmV0dXJuIGNoYXJhY3RlclNldDsKCSAgICB9OwoJICAgIC8qKgoJICAgICAqIEBwYXJhbSBuYW1lIGNoYXJhY3RlciBzZXQgRUNJIGVuY29kaW5nIG5hbWUKCSAgICAgKiBAcmV0dXJuIENoYXJhY3RlclNldEVDSSByZXByZXNlbnRpbmcgRUNJIGZvciBjaGFyYWN0ZXIgZW5jb2RpbmcsIG9yIG51bGwgaWYgaXQgaXMgbGVnYWwKCSAgICAgKiAgIGJ1dCB1bnN1cHBvcnRlZAoJICAgICAqLwoJICAgIENoYXJhY3RlclNldEVDSS5nZXRDaGFyYWN0ZXJTZXRFQ0lCeU5hbWUgPSBmdW5jdGlvbiAobmFtZSkgewoJICAgICAgICB2YXIgY2hhcmFjdGVyU2V0ID0gQ2hhcmFjdGVyU2V0RUNJLk5BTUVfVE9fRUNJLmdldChuYW1lKTsKCSAgICAgICAgaWYgKHVuZGVmaW5lZCA9PT0gY2hhcmFjdGVyU2V0KSB7CgkgICAgICAgICAgICB0aHJvdyBuZXcgRm9ybWF0RXhjZXB0aW9uXzEuZGVmYXVsdCgnaW5jb3JlY3QgdmFsdWUnKTsKCSAgICAgICAgfQoJICAgICAgICByZXR1cm4gY2hhcmFjdGVyU2V0OwoJICAgIH07CgkgICAgQ2hhcmFjdGVyU2V0RUNJLnByb3RvdHlwZS5lcXVhbHMgPSBmdW5jdGlvbiAobykgewoJICAgICAgICBpZiAoIShvIGluc3RhbmNlb2YgQ2hhcmFjdGVyU2V0RUNJKSkgewoJICAgICAgICAgICAgcmV0dXJuIGZhbHNlOwoJICAgICAgICB9CgkgICAgICAgIHZhciBvdGhlciA9IG87CgkgICAgICAgIHJldHVybiB0aGlzLmdldE5hbWUoKSA9PT0gb3RoZXIuZ2V0TmFtZSgpOwoJICAgIH07CgkgICAgQ2hhcmFjdGVyU2V0RUNJLlZBTFVFX0lERU5USUZJRVJfVE9fRUNJID0gbmV3IE1hcCgpOwoJICAgIENoYXJhY3RlclNldEVDSS5WQUxVRVNfVE9fRUNJID0gbmV3IE1hcCgpOwoJICAgIENoYXJhY3RlclNldEVDSS5OQU1FX1RPX0VDSSA9IG5ldyBNYXAoKTsKCSAgICAvLyBFbnVtIG5hbWUgaXMgYSBKYXZhIGVuY29kaW5nIHZhbGlkIGZvciBqYXZhLmxhbmcgYW5kIGphdmEuaW8KCSAgICAvLyBUWVBFU0NSSVBUUE9SVDogY2hhbmdlZCB0aGUgbWFpbiBsYWJlbCBmb3IgSVNPIGFzIHRoZSBUZXh0RW5jb2RlciBkaWQgbm90IHJlY29nbml6ZWQgdGhlbSBpbiB0aGUgZm9ybSBmcm9tIGphdmEKCSAgICAvLyAoZWcgSVNPODg1OV8xIG11c3QgYmUgSVNPODg1OTEgb3IgSVNPODg1OS0xIG9yIElTTy04ODU5LTEpCgkgICAgLy8gbGF0ZXIgb246IHdlbGwsIGV4Y2VwdCAxNiB3aWNoIGRvZXMgbm90IHdvcmsgd2l0aCBJU084ODU5MTYgc28gdXNlZCBJU08tODg1OS0xIGZvcm0gZm9yIGRlZmF1bHQKCSAgICBDaGFyYWN0ZXJTZXRFQ0kuQ3A0MzcgPSBuZXcgQ2hhcmFjdGVyU2V0RUNJKENoYXJhY3RlclNldFZhbHVlSWRlbnRpZmllcnMuQ3A0MzcsIEludDMyQXJyYXkuZnJvbShbMCwgMl0pLCAnQ3A0MzcnKTsKCSAgICBDaGFyYWN0ZXJTZXRFQ0kuSVNPODg1OV8xID0gbmV3IENoYXJhY3RlclNldEVDSShDaGFyYWN0ZXJTZXRWYWx1ZUlkZW50aWZpZXJzLklTTzg4NTlfMSwgSW50MzJBcnJheS5mcm9tKFsxLCAzXSksICdJU08tODg1OS0xJywgJ0lTTzg4NTkxJywgJ0lTTzg4NTlfMScpOwoJICAgIENoYXJhY3RlclNldEVDSS5JU084ODU5XzIgPSBuZXcgQ2hhcmFjdGVyU2V0RUNJKENoYXJhY3RlclNldFZhbHVlSWRlbnRpZmllcnMuSVNPODg1OV8yLCA0LCAnSVNPLTg4NTktMicsICdJU084ODU5MicsICdJU084ODU5XzInKTsKCSAgICBDaGFyYWN0ZXJTZXRFQ0kuSVNPODg1OV8zID0gbmV3IENoYXJhY3RlclNldEVDSShDaGFyYWN0ZXJTZXRWYWx1ZUlkZW50aWZpZXJzLklTTzg4NTlfMywgNSwgJ0lTTy04ODU5LTMnLCAnSVNPODg1OTMnLCAnSVNPODg1OV8zJyk7CgkgICAgQ2hhcmFjdGVyU2V0RUNJLklTTzg4NTlfNCA9IG5ldyBDaGFyYWN0ZXJTZXRFQ0koQ2hhcmFjdGVyU2V0VmFsdWVJZGVudGlmaWVycy5JU084ODU5XzQsIDYsICdJU08tODg1OS00JywgJ0lTTzg4NTk0JywgJ0lTTzg4NTlfNCcpOwoJICAgIENoYXJhY3RlclNldEVDSS5JU084ODU5XzUgPSBuZXcgQ2hhcmFjdGVyU2V0RUNJKENoYXJhY3RlclNldFZhbHVlSWRlbnRpZmllcnMuSVNPODg1OV81LCA3LCAnSVNPLTg4NTktNScsICdJU084ODU5NScsICdJU084ODU5XzUnKTsKCSAgICBDaGFyYWN0ZXJTZXRFQ0kuSVNPODg1OV82ID0gbmV3IENoYXJhY3RlclNldEVDSShDaGFyYWN0ZXJTZXRWYWx1ZUlkZW50aWZpZXJzLklTTzg4NTlfNiwgOCwgJ0lTTy04ODU5LTYnLCAnSVNPODg1OTYnLCAnSVNPODg1OV82Jyk7CgkgICAgQ2hhcmFjdGVyU2V0RUNJLklTTzg4NTlfNyA9IG5ldyBDaGFyYWN0ZXJTZXRFQ0koQ2hhcmFjdGVyU2V0VmFsdWVJZGVudGlmaWVycy5JU084ODU5XzcsIDksICdJU08tODg1OS03JywgJ0lTTzg4NTk3JywgJ0lTTzg4NTlfNycpOwoJICAgIENoYXJhY3RlclNldEVDSS5JU084ODU5XzggPSBuZXcgQ2hhcmFjdGVyU2V0RUNJKENoYXJhY3RlclNldFZhbHVlSWRlbnRpZmllcnMuSVNPODg1OV84LCAxMCwgJ0lTTy04ODU5LTgnLCAnSVNPODg1OTgnLCAnSVNPODg1OV84Jyk7CgkgICAgQ2hhcmFjdGVyU2V0RUNJLklTTzg4NTlfOSA9IG5ldyBDaGFyYWN0ZXJTZXRFQ0koQ2hhcmFjdGVyU2V0VmFsdWVJZGVudGlmaWVycy5JU084ODU5XzksIDExLCAnSVNPLTg4NTktOScsICdJU084ODU5OScsICdJU084ODU5XzknKTsKCSAgICBDaGFyYWN0ZXJTZXRFQ0kuSVNPODg1OV8xMCA9IG5ldyBDaGFyYWN0ZXJTZXRFQ0koQ2hhcmFjdGVyU2V0VmFsdWVJZGVudGlmaWVycy5JU084ODU5XzEwLCAxMiwgJ0lTTy04ODU5LTEwJywgJ0lTTzg4NTkxMCcsICdJU084ODU5XzEwJyk7CgkgICAgQ2hhcmFjdGVyU2V0RUNJLklTTzg4NTlfMTEgPSBuZXcgQ2hhcmFjdGVyU2V0RUNJKENoYXJhY3RlclNldFZhbHVlSWRlbnRpZmllcnMuSVNPODg1OV8xMSwgMTMsICdJU08tODg1OS0xMScsICdJU084ODU5MTEnLCAnSVNPODg1OV8xMScpOwoJICAgIENoYXJhY3RlclNldEVDSS5JU084ODU5XzEzID0gbmV3IENoYXJhY3RlclNldEVDSShDaGFyYWN0ZXJTZXRWYWx1ZUlkZW50aWZpZXJzLklTTzg4NTlfMTMsIDE1LCAnSVNPLTg4NTktMTMnLCAnSVNPODg1OTEzJywgJ0lTTzg4NTlfMTMnKTsKCSAgICBDaGFyYWN0ZXJTZXRFQ0kuSVNPODg1OV8xNCA9IG5ldyBDaGFyYWN0ZXJTZXRFQ0koQ2hhcmFjdGVyU2V0VmFsdWVJZGVudGlmaWVycy5JU084ODU5XzE0LCAxNiwgJ0lTTy04ODU5LTE0JywgJ0lTTzg4NTkxNCcsICdJU084ODU5XzE0Jyk7CgkgICAgQ2hhcmFjdGVyU2V0RUNJLklTTzg4NTlfMTUgPSBuZXcgQ2hhcmFjdGVyU2V0RUNJKENoYXJhY3RlclNldFZhbHVlSWRlbnRpZmllcnMuSVNPODg1OV8xNSwgMTcsICdJU08tODg1OS0xNScsICdJU084ODU5MTUnLCAnSVNPODg1OV8xNScpOwoJICAgIENoYXJhY3RlclNldEVDSS5JU084ODU5XzE2ID0gbmV3IENoYXJhY3RlclNldEVDSShDaGFyYWN0ZXJTZXRWYWx1ZUlkZW50aWZpZXJzLklTTzg4NTlfMTYsIDE4LCAnSVNPLTg4NTktMTYnLCAnSVNPODg1OTE2JywgJ0lTTzg4NTlfMTYnKTsKCSAgICBDaGFyYWN0ZXJTZXRFQ0kuU0pJUyA9IG5ldyBDaGFyYWN0ZXJTZXRFQ0koQ2hhcmFjdGVyU2V0VmFsdWVJZGVudGlmaWVycy5TSklTLCAyMCwgJ1NKSVMnLCAnU2hpZnRfSklTJyk7CgkgICAgQ2hhcmFjdGVyU2V0RUNJLkNwMTI1MCA9IG5ldyBDaGFyYWN0ZXJTZXRFQ0koQ2hhcmFjdGVyU2V0VmFsdWVJZGVudGlmaWVycy5DcDEyNTAsIDIxLCAnQ3AxMjUwJywgJ3dpbmRvd3MtMTI1MCcpOwoJICAgIENoYXJhY3RlclNldEVDSS5DcDEyNTEgPSBuZXcgQ2hhcmFjdGVyU2V0RUNJKENoYXJhY3RlclNldFZhbHVlSWRlbnRpZmllcnMuQ3AxMjUxLCAyMiwgJ0NwMTI1MScsICd3aW5kb3dzLTEyNTEnKTsKCSAgICBDaGFyYWN0ZXJTZXRFQ0kuQ3AxMjUyID0gbmV3IENoYXJhY3RlclNldEVDSShDaGFyYWN0ZXJTZXRWYWx1ZUlkZW50aWZpZXJzLkNwMTI1MiwgMjMsICdDcDEyNTInLCAnd2luZG93cy0xMjUyJyk7CgkgICAgQ2hhcmFjdGVyU2V0RUNJLkNwMTI1NiA9IG5ldyBDaGFyYWN0ZXJTZXRFQ0koQ2hhcmFjdGVyU2V0VmFsdWVJZGVudGlmaWVycy5DcDEyNTYsIDI0LCAnQ3AxMjU2JywgJ3dpbmRvd3MtMTI1NicpOwoJICAgIENoYXJhY3RlclNldEVDSS5Vbmljb2RlQmlnVW5tYXJrZWQgPSBuZXcgQ2hhcmFjdGVyU2V0RUNJKENoYXJhY3RlclNldFZhbHVlSWRlbnRpZmllcnMuVW5pY29kZUJpZ1VubWFya2VkLCAyNSwgJ1VuaWNvZGVCaWdVbm1hcmtlZCcsICdVVEYtMTZCRScsICdVbmljb2RlQmlnJyk7CgkgICAgQ2hhcmFjdGVyU2V0RUNJLlVURjggPSBuZXcgQ2hhcmFjdGVyU2V0RUNJKENoYXJhY3RlclNldFZhbHVlSWRlbnRpZmllcnMuVVRGOCwgMjYsICdVVEY4JywgJ1VURi04Jyk7CgkgICAgQ2hhcmFjdGVyU2V0RUNJLkFTQ0lJID0gbmV3IENoYXJhY3RlclNldEVDSShDaGFyYWN0ZXJTZXRWYWx1ZUlkZW50aWZpZXJzLkFTQ0lJLCBJbnQzMkFycmF5LmZyb20oWzI3LCAxNzBdKSwgJ0FTQ0lJJywgJ1VTLUFTQ0lJJyk7CgkgICAgQ2hhcmFjdGVyU2V0RUNJLkJpZzUgPSBuZXcgQ2hhcmFjdGVyU2V0RUNJKENoYXJhY3RlclNldFZhbHVlSWRlbnRpZmllcnMuQmlnNSwgMjgsICdCaWc1Jyk7CgkgICAgQ2hhcmFjdGVyU2V0RUNJLkdCMTgwMzAgPSBuZXcgQ2hhcmFjdGVyU2V0RUNJKENoYXJhY3RlclNldFZhbHVlSWRlbnRpZmllcnMuR0IxODAzMCwgMjksICdHQjE4MDMwJywgJ0dCMjMxMicsICdFVUNfQ04nLCAnR0JLJyk7CgkgICAgQ2hhcmFjdGVyU2V0RUNJLkVVQ19LUiA9IG5ldyBDaGFyYWN0ZXJTZXRFQ0koQ2hhcmFjdGVyU2V0VmFsdWVJZGVudGlmaWVycy5FVUNfS1IsIDMwLCAnRVVDX0tSJywgJ0VVQy1LUicpOwoJICAgIHJldHVybiBDaGFyYWN0ZXJTZXRFQ0k7Cgl9KCkpOwoJZXhwb3J0cy5kZWZhdWx0ID0gQ2hhcmFjdGVyU2V0RUNJOwoKCX0oQ2hhcmFjdGVyU2V0RUNJKSk7CgoJdmFyIFN0cmluZ0VuY29kaW5nJDEgPSB7fTsKCgl2YXIgVW5zdXBwb3J0ZWRPcGVyYXRpb25FeGNlcHRpb24kMSA9IHt9OwoKCXZhciBfX2V4dGVuZHMkZSA9IChjb21tb25qc0dsb2JhbCAmJiBjb21tb25qc0dsb2JhbC5fX2V4dGVuZHMpIHx8IChmdW5jdGlvbiAoKSB7CgkgICAgdmFyIGV4dGVuZFN0YXRpY3MgPSBmdW5jdGlvbiAoZCwgYikgewoJICAgICAgICBleHRlbmRTdGF0aWNzID0gT2JqZWN0LnNldFByb3RvdHlwZU9mIHx8CgkgICAgICAgICAgICAoeyBfX3Byb3RvX186IFtdIH0gaW5zdGFuY2VvZiBBcnJheSAmJiBmdW5jdGlvbiAoZCwgYikgeyBkLl9fcHJvdG9fXyA9IGI7IH0pIHx8CgkgICAgICAgICAgICBmdW5jdGlvbiAoZCwgYikgeyBmb3IgKHZhciBwIGluIGIpIGlmIChiLmhhc093blByb3BlcnR5KHApKSBkW3BdID0gYltwXTsgfTsKCSAgICAgICAgcmV0dXJuIGV4dGVuZFN0YXRpY3MoZCwgYik7CgkgICAgfTsKCSAgICByZXR1cm4gZnVuY3Rpb24gKGQsIGIpIHsKCSAgICAgICAgZXh0ZW5kU3RhdGljcyhkLCBiKTsKCSAgICAgICAgZnVuY3Rpb24gX18oKSB7IHRoaXMuY29uc3RydWN0b3IgPSBkOyB9CgkgICAgICAgIGQucHJvdG90eXBlID0gYiA9PT0gbnVsbCA/IE9iamVjdC5jcmVhdGUoYikgOiAoX18ucHJvdG90eXBlID0gYi5wcm90b3R5cGUsIG5ldyBfXygpKTsKCSAgICB9OwoJfSkoKTsKCU9iamVjdC5kZWZpbmVQcm9wZXJ0eShVbnN1cHBvcnRlZE9wZXJhdGlvbkV4Y2VwdGlvbiQxLCAiX19lc01vZHVsZSIsIHsgdmFsdWU6IHRydWUgfSk7Cgl2YXIgRXhjZXB0aW9uXzEkNiA9IEV4Y2VwdGlvbiQxOwoJLyoqCgkgKiBDdXN0b20gRXJyb3IgY2xhc3Mgb2YgdHlwZSBFeGNlcHRpb24uCgkgKi8KCXZhciBVbnN1cHBvcnRlZE9wZXJhdGlvbkV4Y2VwdGlvbiA9IC8qKiBAY2xhc3MgKi8gKGZ1bmN0aW9uIChfc3VwZXIpIHsKCSAgICBfX2V4dGVuZHMkZShVbnN1cHBvcnRlZE9wZXJhdGlvbkV4Y2VwdGlvbiwgX3N1cGVyKTsKCSAgICBmdW5jdGlvbiBVbnN1cHBvcnRlZE9wZXJhdGlvbkV4Y2VwdGlvbigpIHsKCSAgICAgICAgcmV0dXJuIF9zdXBlciAhPT0gbnVsbCAmJiBfc3VwZXIuYXBwbHkodGhpcywgYXJndW1lbnRzKSB8fCB0aGlzOwoJICAgIH0KCSAgICBVbnN1cHBvcnRlZE9wZXJhdGlvbkV4Y2VwdGlvbi5raW5kID0gJ1Vuc3VwcG9ydGVkT3BlcmF0aW9uRXhjZXB0aW9uJzsKCSAgICByZXR1cm4gVW5zdXBwb3J0ZWRPcGVyYXRpb25FeGNlcHRpb247Cgl9KEV4Y2VwdGlvbl8xJDYuZGVmYXVsdCkpOwoJVW5zdXBwb3J0ZWRPcGVyYXRpb25FeGNlcHRpb24kMS5kZWZhdWx0ID0gVW5zdXBwb3J0ZWRPcGVyYXRpb25FeGNlcHRpb247CgoJT2JqZWN0LmRlZmluZVByb3BlcnR5KFN0cmluZ0VuY29kaW5nJDEsICJfX2VzTW9kdWxlIiwgeyB2YWx1ZTogdHJ1ZSB9KTsKCXZhciBVbnN1cHBvcnRlZE9wZXJhdGlvbkV4Y2VwdGlvbl8xJDEgPSBVbnN1cHBvcnRlZE9wZXJhdGlvbkV4Y2VwdGlvbiQxOwoJdmFyIENoYXJhY3RlclNldEVDSV8xJDIgPSBDaGFyYWN0ZXJTZXRFQ0k7CgkvKioKCSAqIFJlc3BvbnNpYmxlIGZvciBlbi9kZWNvZGluZyBzdHJpbmdzLgoJICovCgl2YXIgU3RyaW5nRW5jb2RpbmcgPSAvKiogQGNsYXNzICovIChmdW5jdGlvbiAoKSB7CgkgICAgZnVuY3Rpb24gU3RyaW5nRW5jb2RpbmcoKSB7CgkgICAgfQoJICAgIC8qKgoJICAgICAqIERlY29kZXMgc29tZSBVaW50OEFycmF5IHRvIGEgc3RyaW5nIGZvcm1hdC4KCSAgICAgKi8KCSAgICBTdHJpbmdFbmNvZGluZy5kZWNvZGUgPSBmdW5jdGlvbiAoYnl0ZXMsIGVuY29kaW5nKSB7CgkgICAgICAgIHZhciBlbmNvZGluZ05hbWUgPSB0aGlzLmVuY29kaW5nTmFtZShlbmNvZGluZyk7CgkgICAgICAgIGlmICh0aGlzLmN1c3RvbURlY29kZXIpIHsKCSAgICAgICAgICAgIHJldHVybiB0aGlzLmN1c3RvbURlY29kZXIoYnl0ZXMsIGVuY29kaW5nTmFtZSk7CgkgICAgICAgIH0KCSAgICAgICAgLy8gSW5jcmVhc2VzIGJyb3dzZXIgc3VwcG9ydC4KCSAgICAgICAgaWYgKHR5cGVvZiBUZXh0RGVjb2RlciA9PT0gJ3VuZGVmaW5lZCcgfHwgdGhpcy5zaG91bGREZWNvZGVPbkZhbGxiYWNrKGVuY29kaW5nTmFtZSkpIHsKCSAgICAgICAgICAgIHJldHVybiB0aGlzLmRlY29kZUZhbGxiYWNrKGJ5dGVzLCBlbmNvZGluZ05hbWUpOwoJICAgICAgICB9CgkgICAgICAgIHJldHVybiBuZXcgVGV4dERlY29kZXIoZW5jb2RpbmdOYW1lKS5kZWNvZGUoYnl0ZXMpOwoJICAgIH07CgkgICAgLyoqCgkgICAgICogQ2hlY2tzIGlmIHRoZSBkZWNvZGluZyBtZXRob2Qgc2hvdWxkIHVzZSB0aGUgZmFsbGJhY2sgZm9yIGRlY29kaW5nCgkgICAgICogb25jZSBOb2RlIFRleHREZWNvZGVyIGRvZXNuJ3Qgc3VwcG9ydCBhbGwgZW5jb2RpbmcgZm9ybWF0cy4KCSAgICAgKgoJICAgICAqIEBwYXJhbSBlbmNvZGluZ05hbWUKCSAgICAgKi8KCSAgICBTdHJpbmdFbmNvZGluZy5zaG91bGREZWNvZGVPbkZhbGxiYWNrID0gZnVuY3Rpb24gKGVuY29kaW5nTmFtZSkgewoJICAgICAgICByZXR1cm4gIVN0cmluZ0VuY29kaW5nLmlzQnJvd3NlcigpICYmIGVuY29kaW5nTmFtZSA9PT0gJ0lTTy04ODU5LTEnOwoJICAgIH07CgkgICAgLyoqCgkgICAgICogRW5jb2RlcyBzb21lIHN0cmluZyBpbnRvIGEgVWludDhBcnJheS4KCSAgICAgKi8KCSAgICBTdHJpbmdFbmNvZGluZy5lbmNvZGUgPSBmdW5jdGlvbiAocywgZW5jb2RpbmcpIHsKCSAgICAgICAgdmFyIGVuY29kaW5nTmFtZSA9IHRoaXMuZW5jb2RpbmdOYW1lKGVuY29kaW5nKTsKCSAgICAgICAgaWYgKHRoaXMuY3VzdG9tRW5jb2RlcikgewoJICAgICAgICAgICAgcmV0dXJuIHRoaXMuY3VzdG9tRW5jb2RlcihzLCBlbmNvZGluZ05hbWUpOwoJICAgICAgICB9CgkgICAgICAgIC8vIEluY3JlYXNlcyBicm93c2VyIHN1cHBvcnQuCgkgICAgICAgIGlmICh0eXBlb2YgVGV4dEVuY29kZXIgPT09ICd1bmRlZmluZWQnKSB7CgkgICAgICAgICAgICByZXR1cm4gdGhpcy5lbmNvZGVGYWxsYmFjayhzKTsKCSAgICAgICAgfQoJICAgICAgICAvLyBUZXh0RW5jb2RlciBvbmx5IGVuY29kZXMgdG8gVVRGOCBieSBkZWZhdWx0IGFzIHNwZWNpZmllZCBieSBlbmNvZGluZy5zcGVjLndoYXR3Zy5vcmcKCSAgICAgICAgcmV0dXJuIG5ldyBUZXh0RW5jb2RlcigpLmVuY29kZShzKTsKCSAgICB9OwoJICAgIFN0cmluZ0VuY29kaW5nLmlzQnJvd3NlciA9IGZ1bmN0aW9uICgpIHsKCSAgICAgICAgcmV0dXJuICh0eXBlb2Ygd2luZG93ICE9PSAndW5kZWZpbmVkJyAmJiB7fS50b1N0cmluZy5jYWxsKHdpbmRvdykgPT09ICdbb2JqZWN0IFdpbmRvd10nKTsKCSAgICB9OwoJICAgIC8qKgoJICAgICAqIFJldHVybnMgdGhlIHN0cmluZyB2YWx1ZSBmcm9tIHNvbWUgZW5jb2RpbmcgY2hhcmFjdGVyIHNldC4KCSAgICAgKi8KCSAgICBTdHJpbmdFbmNvZGluZy5lbmNvZGluZ05hbWUgPSBmdW5jdGlvbiAoZW5jb2RpbmcpIHsKCSAgICAgICAgcmV0dXJuIHR5cGVvZiBlbmNvZGluZyA9PT0gJ3N0cmluZycKCSAgICAgICAgICAgID8gZW5jb2RpbmcKCSAgICAgICAgICAgIDogZW5jb2RpbmcuZ2V0TmFtZSgpOwoJICAgIH07CgkgICAgLyoqCgkgICAgICogUmV0dXJucyBjaGFyYWN0ZXIgc2V0IGZyb20gc29tZSBlbmNvZGluZyBjaGFyYWN0ZXIgc2V0LgoJICAgICAqLwoJICAgIFN0cmluZ0VuY29kaW5nLmVuY29kaW5nQ2hhcmFjdGVyU2V0ID0gZnVuY3Rpb24gKGVuY29kaW5nKSB7CgkgICAgICAgIGlmIChlbmNvZGluZyBpbnN0YW5jZW9mIENoYXJhY3RlclNldEVDSV8xJDIuZGVmYXVsdCkgewoJICAgICAgICAgICAgcmV0dXJuIGVuY29kaW5nOwoJICAgICAgICB9CgkgICAgICAgIHJldHVybiBDaGFyYWN0ZXJTZXRFQ0lfMSQyLmRlZmF1bHQuZ2V0Q2hhcmFjdGVyU2V0RUNJQnlOYW1lKGVuY29kaW5nKTsKCSAgICB9OwoJICAgIC8qKgoJICAgICAqIFJ1bnMgYSBmYWxsYmFjayBmb3IgdGhlIG5hdGl2ZSBkZWNvZGluZyBmdW5jaW9uLgoJICAgICAqLwoJICAgIFN0cmluZ0VuY29kaW5nLmRlY29kZUZhbGxiYWNrID0gZnVuY3Rpb24gKGJ5dGVzLCBlbmNvZGluZykgewoJICAgICAgICB2YXIgY2hhcmFjdGVyU2V0ID0gdGhpcy5lbmNvZGluZ0NoYXJhY3RlclNldChlbmNvZGluZyk7CgkgICAgICAgIGlmIChTdHJpbmdFbmNvZGluZy5pc0RlY29kZUZhbGxiYWNrU3VwcG9ydGVkKGNoYXJhY3RlclNldCkpIHsKCSAgICAgICAgICAgIHZhciBzID0gJyc7CgkgICAgICAgICAgICBmb3IgKHZhciBpID0gMCwgbGVuZ3RoXzEgPSBieXRlcy5sZW5ndGg7IGkgPCBsZW5ndGhfMTsgaSsrKSB7CgkgICAgICAgICAgICAgICAgdmFyIGggPSBieXRlc1tpXS50b1N0cmluZygxNik7CgkgICAgICAgICAgICAgICAgaWYgKGgubGVuZ3RoIDwgMikgewoJICAgICAgICAgICAgICAgICAgICBoID0gJzAnICsgaDsKCSAgICAgICAgICAgICAgICB9CgkgICAgICAgICAgICAgICAgcyArPSAnJScgKyBoOwoJICAgICAgICAgICAgfQoJICAgICAgICAgICAgcmV0dXJuIGRlY29kZVVSSUNvbXBvbmVudChzKTsKCSAgICAgICAgfQoJICAgICAgICBpZiAoY2hhcmFjdGVyU2V0LmVxdWFscyhDaGFyYWN0ZXJTZXRFQ0lfMSQyLmRlZmF1bHQuVW5pY29kZUJpZ1VubWFya2VkKSkgewoJICAgICAgICAgICAgcmV0dXJuIFN0cmluZy5mcm9tQ2hhckNvZGUuYXBwbHkobnVsbCwgbmV3IFVpbnQxNkFycmF5KGJ5dGVzLmJ1ZmZlcikpOwoJICAgICAgICB9CgkgICAgICAgIHRocm93IG5ldyBVbnN1cHBvcnRlZE9wZXJhdGlvbkV4Y2VwdGlvbl8xJDEuZGVmYXVsdCgiRW5jb2RpbmcgIiArIHRoaXMuZW5jb2RpbmdOYW1lKGVuY29kaW5nKSArICIgbm90IHN1cHBvcnRlZCBieSBmYWxsYmFjay4iKTsKCSAgICB9OwoJICAgIFN0cmluZ0VuY29kaW5nLmlzRGVjb2RlRmFsbGJhY2tTdXBwb3J0ZWQgPSBmdW5jdGlvbiAoY2hhcmFjdGVyU2V0KSB7CgkgICAgICAgIHJldHVybiBjaGFyYWN0ZXJTZXQuZXF1YWxzKENoYXJhY3RlclNldEVDSV8xJDIuZGVmYXVsdC5VVEY4KSB8fAoJICAgICAgICAgICAgY2hhcmFjdGVyU2V0LmVxdWFscyhDaGFyYWN0ZXJTZXRFQ0lfMSQyLmRlZmF1bHQuSVNPODg1OV8xKSB8fAoJICAgICAgICAgICAgY2hhcmFjdGVyU2V0LmVxdWFscyhDaGFyYWN0ZXJTZXRFQ0lfMSQyLmRlZmF1bHQuQVNDSUkpOwoJICAgIH07CgkgICAgLyoqCgkgICAgICogUnVucyBhIGZhbGxiYWNrIGZvciB0aGUgbmF0aXZlIGVuY29kaW5nIGZ1bmNpb24uCgkgICAgICoKCSAgICAgKiBAc2VlIGh0dHBzOi8vc3RhY2tvdmVyZmxvdy5jb20vYS8xNzE5Mjg0NS80MzY3NjgzCgkgICAgICovCgkgICAgU3RyaW5nRW5jb2RpbmcuZW5jb2RlRmFsbGJhY2sgPSBmdW5jdGlvbiAocykgewoJICAgICAgICB2YXIgZW5jb2RlZFVSSXN0cmluZyA9IGJ0b2EodW5lc2NhcGUoZW5jb2RlVVJJQ29tcG9uZW50KHMpKSk7CgkgICAgICAgIHZhciBjaGFyTGlzdCA9IGVuY29kZWRVUklzdHJpbmcuc3BsaXQoJycpOwoJICAgICAgICB2YXIgdWludEFycmF5ID0gW107CgkgICAgICAgIGZvciAodmFyIGkgPSAwOyBpIDwgY2hhckxpc3QubGVuZ3RoOyBpKyspIHsKCSAgICAgICAgICAgIHVpbnRBcnJheS5wdXNoKGNoYXJMaXN0W2ldLmNoYXJDb2RlQXQoMCkpOwoJICAgICAgICB9CgkgICAgICAgIHJldHVybiBuZXcgVWludDhBcnJheSh1aW50QXJyYXkpOwoJICAgIH07CgkgICAgcmV0dXJuIFN0cmluZ0VuY29kaW5nOwoJfSgpKTsKCVN0cmluZ0VuY29kaW5nJDEuZGVmYXVsdCA9IFN0cmluZ0VuY29kaW5nOwoKCS8qCgkgKiBDb3B5cmlnaHQgKEMpIDIwMTAgWlhpbmcgYXV0aG9ycwoJICoKCSAqIExpY2Vuc2VkIHVuZGVyIHRoZSBBcGFjaGUgTGljZW5zZSwgVmVyc2lvbiAyLjAgKHRoZSAiTGljZW5zZSIpOwoJICogeW91IG1heSBub3QgdXNlIHRoaXMgZmlsZSBleGNlcHQgaW4gY29tcGxpYW5jZSB3aXRoIHRoZSBMaWNlbnNlLgoJICogWW91IG1heSBvYnRhaW4gYSBjb3B5IG9mIHRoZSBMaWNlbnNlIGF0CgkgKgoJICogICAgICBodHRwOi8vd3d3LmFwYWNoZS5vcmcvbGljZW5zZXMvTElDRU5TRS0yLjAKCSAqCgkgKiBVbmxlc3MgcmVxdWlyZWQgYnkgYXBwbGljYWJsZSBsYXcgb3IgYWdyZWVkIHRvIGluIHdyaXRpbmcsIHNvZnR3YXJlCgkgKiBkaXN0cmlidXRlZCB1bmRlciB0aGUgTGljZW5zZSBpcyBkaXN0cmlidXRlZCBvbiBhbiAiQVMgSVMiIEJBU0lTLAoJICogV0lUSE9VVCBXQVJSQU5USUVTIE9SIENPTkRJVElPTlMgT0YgQU5ZIEtJTkQsIGVpdGhlciBleHByZXNzIG9yIGltcGxpZWQuCgkgKiBTZWUgdGhlIExpY2Vuc2UgZm9yIHRoZSBzcGVjaWZpYyBsYW5ndWFnZSBnb3Zlcm5pbmcgcGVybWlzc2lvbnMgYW5kCgkgKiBsaW1pdGF0aW9ucyB1bmRlciB0aGUgTGljZW5zZS4KCSAqLwoJT2JqZWN0LmRlZmluZVByb3BlcnR5KFN0cmluZ1V0aWxzJDEsICJfX2VzTW9kdWxlIiwgeyB2YWx1ZTogdHJ1ZSB9KTsKCS8qbmFtZXNwYWNlIGNvbS5nb29nbGUuenhpbmcuY29tbW9uIHsqLwoJLyppbXBvcnQgamF2YS5uaW8uY2hhcnNldC5DaGFyc2V0OyovCgkvKmltcG9ydCBqYXZhLnV0aWwuTWFwOyovCgl2YXIgRGVjb2RlSGludFR5cGVfMSQzID0gRGVjb2RlSGludFR5cGUkMTsKCXZhciBDaGFyYWN0ZXJTZXRFQ0lfMSQxID0gQ2hhcmFjdGVyU2V0RUNJOwoJdmFyIFN0cmluZ0VuY29kaW5nXzEkMSA9IFN0cmluZ0VuY29kaW5nJDE7CgkvKioKCSAqIENvbW1vbiBzdHJpbmctcmVsYXRlZCBmdW5jdGlvbnMuCgkgKgoJICogQGF1dGhvciBTZWFuIE93ZW4KCSAqIEBhdXRob3IgQWxleCBEdXByZQoJICovCgl2YXIgU3RyaW5nVXRpbHMgPSAvKiogQGNsYXNzICovIChmdW5jdGlvbiAoKSB7CgkgICAgZnVuY3Rpb24gU3RyaW5nVXRpbHMoKSB7CgkgICAgfQoJICAgIC8vIFNISUZUX0pJUy5lcXVhbHNJZ25vcmVDYXNlKFBMQVRGT1JNX0RFRkFVTFRfRU5DT0RJTkcpIHx8CgkgICAgLy8gRVVDX0pQLmVxdWFsc0lnbm9yZUNhc2UoUExBVEZPUk1fREVGQVVMVF9FTkNPRElORyk7CgkgICAgU3RyaW5nVXRpbHMuY2FzdEFzTm9uVXRmOENoYXIgPSBmdW5jdGlvbiAoY29kZSwgZW5jb2RpbmcpIHsKCSAgICAgICAgaWYgKGVuY29kaW5nID09PSB2b2lkIDApIHsgZW5jb2RpbmcgPSBudWxsOyB9CgkgICAgICAgIC8vIElTTyA4ODU5LTEgaXMgdGhlIEphdmEgZGVmYXVsdCBhcyBVVEYtOCBpcyBKYXZhU2NyaXB0cwoJICAgICAgICAvLyB5b3UgY2FuIHNlZSB0aGlzIG1ldGhvZCBhcyBhIEphdmEgdmVyc2lvbiBvZiBTdHJpbmcuZnJvbUNoYXJDb2RlCgkgICAgICAgIHZhciBlID0gZW5jb2RpbmcgPyBlbmNvZGluZy5nZXROYW1lKCkgOiB0aGlzLklTTzg4NTkxOwoJICAgICAgICAvLyB1c2UgcGFzc2VkIGZvcm1hdCAoZnJvbUNoYXJDb2RlIHdpbGwgcmV0dXJuIFVURjggZW5jb2RpbmcpCgkgICAgICAgIHJldHVybiBTdHJpbmdFbmNvZGluZ18xJDEuZGVmYXVsdC5kZWNvZGUobmV3IFVpbnQ4QXJyYXkoW2NvZGVdKSwgZSk7CgkgICAgfTsKCSAgICAvKioKCSAgICAgKiBAcGFyYW0gYnl0ZXMgYnl0ZXMgZW5jb2RpbmcgYSBzdHJpbmcsIHdob3NlIGVuY29kaW5nIHNob3VsZCBiZSBndWVzc2VkCgkgICAgICogQHBhcmFtIGhpbnRzIGRlY29kZSBoaW50cyBpZiBhcHBsaWNhYmxlCgkgICAgICogQHJldHVybiBuYW1lIG9mIGd1ZXNzZWQgZW5jb2Rpbmc7IGF0IHRoZSBtb21lbnQgd2lsbCBvbmx5IGd1ZXNzIG9uZSBvZjoKCSAgICAgKiAge0BsaW5rICNTSElGVF9KSVN9LCB7QGxpbmsgI1VURjh9LCB7QGxpbmsgI0lTTzg4NTkxfSwgb3IgdGhlIHBsYXRmb3JtCgkgICAgICogIGRlZmF1bHQgZW5jb2RpbmcgaWYgbm9uZSBvZiB0aGVzZSBjYW4gcG9zc2libHkgYmUgY29ycmVjdAoJICAgICAqLwoJICAgIFN0cmluZ1V0aWxzLmd1ZXNzRW5jb2RpbmcgPSBmdW5jdGlvbiAoYnl0ZXMsIGhpbnRzKSB7CgkgICAgICAgIGlmIChoaW50cyAhPT0gbnVsbCAmJiBoaW50cyAhPT0gdW5kZWZpbmVkICYmIHVuZGVmaW5lZCAhPT0gaGludHMuZ2V0KERlY29kZUhpbnRUeXBlXzEkMy5kZWZhdWx0LkNIQVJBQ1RFUl9TRVQpKSB7CgkgICAgICAgICAgICByZXR1cm4gaGludHMuZ2V0KERlY29kZUhpbnRUeXBlXzEkMy5kZWZhdWx0LkNIQVJBQ1RFUl9TRVQpLnRvU3RyaW5nKCk7CgkgICAgICAgIH0KCSAgICAgICAgLy8gRm9yIG5vdywgbWVyZWx5IHRyaWVzIHRvIGRpc3Rpbmd1aXNoIElTTy04ODU5LTEsIFVURi04IGFuZCBTaGlmdF9KSVMsCgkgICAgICAgIC8vIHdoaWNoIHNob3VsZCBiZSBieSBmYXIgdGhlIG1vc3QgY29tbW9uIGVuY29kaW5ncy4KCSAgICAgICAgdmFyIGxlbmd0aCA9IGJ5dGVzLmxlbmd0aDsKCSAgICAgICAgdmFyIGNhbkJlSVNPODg1OTEgPSB0cnVlOwoJICAgICAgICB2YXIgY2FuQmVTaGlmdEpJUyA9IHRydWU7CgkgICAgICAgIHZhciBjYW5CZVVURjggPSB0cnVlOwoJICAgICAgICB2YXIgdXRmOEJ5dGVzTGVmdCA9IDA7CgkgICAgICAgIC8vIGludCB1dGY4TG93Q2hhcnMgPSAwCgkgICAgICAgIHZhciB1dGYyQnl0ZXNDaGFycyA9IDA7CgkgICAgICAgIHZhciB1dGYzQnl0ZXNDaGFycyA9IDA7CgkgICAgICAgIHZhciB1dGY0Qnl0ZXNDaGFycyA9IDA7CgkgICAgICAgIHZhciBzamlzQnl0ZXNMZWZ0ID0gMDsKCSAgICAgICAgLy8gaW50IHNqaXNMb3dDaGFycyA9IDAKCSAgICAgICAgdmFyIHNqaXNLYXRha2FuYUNoYXJzID0gMDsKCSAgICAgICAgLy8gaW50IHNqaXNEb3VibGVCeXRlc0NoYXJzID0gMAoJICAgICAgICB2YXIgc2ppc0N1ckthdGFrYW5hV29yZExlbmd0aCA9IDA7CgkgICAgICAgIHZhciBzamlzQ3VyRG91YmxlQnl0ZXNXb3JkTGVuZ3RoID0gMDsKCSAgICAgICAgdmFyIHNqaXNNYXhLYXRha2FuYVdvcmRMZW5ndGggPSAwOwoJICAgICAgICB2YXIgc2ppc01heERvdWJsZUJ5dGVzV29yZExlbmd0aCA9IDA7CgkgICAgICAgIC8vIGludCBpc29Mb3dDaGFycyA9IDAKCSAgICAgICAgLy8gaW50IGlzb0hpZ2hDaGFycyA9IDAKCSAgICAgICAgdmFyIGlzb0hpZ2hPdGhlciA9IDA7CgkgICAgICAgIHZhciB1dGY4Ym9tID0gYnl0ZXMubGVuZ3RoID4gMyAmJgoJICAgICAgICAgICAgYnl0ZXNbMF0gPT09IC8qKGJ5dGUpICovIDB4RUYgJiYKCSAgICAgICAgICAgIGJ5dGVzWzFdID09PSAvKihieXRlKSAqLyAweEJCICYmCgkgICAgICAgICAgICBieXRlc1syXSA9PT0gLyooYnl0ZSkgKi8gMHhCRjsKCSAgICAgICAgZm9yICh2YXIgaSA9IDA7IGkgPCBsZW5ndGggJiYgKGNhbkJlSVNPODg1OTEgfHwgY2FuQmVTaGlmdEpJUyB8fCBjYW5CZVVURjgpOyBpKyspIHsKCSAgICAgICAgICAgIHZhciB2YWx1ZSA9IGJ5dGVzW2ldICYgMHhGRjsKCSAgICAgICAgICAgIC8vIFVURi04IHN0dWZmCgkgICAgICAgICAgICBpZiAoY2FuQmVVVEY4KSB7CgkgICAgICAgICAgICAgICAgaWYgKHV0ZjhCeXRlc0xlZnQgPiAwKSB7CgkgICAgICAgICAgICAgICAgICAgIGlmICgodmFsdWUgJiAweDgwKSA9PT0gMCkgewoJICAgICAgICAgICAgICAgICAgICAgICAgY2FuQmVVVEY4ID0gZmFsc2U7CgkgICAgICAgICAgICAgICAgICAgIH0KCSAgICAgICAgICAgICAgICAgICAgZWxzZSB7CgkgICAgICAgICAgICAgICAgICAgICAgICB1dGY4Qnl0ZXNMZWZ0LS07CgkgICAgICAgICAgICAgICAgICAgIH0KCSAgICAgICAgICAgICAgICB9CgkgICAgICAgICAgICAgICAgZWxzZSBpZiAoKHZhbHVlICYgMHg4MCkgIT09IDApIHsKCSAgICAgICAgICAgICAgICAgICAgaWYgKCh2YWx1ZSAmIDB4NDApID09PSAwKSB7CgkgICAgICAgICAgICAgICAgICAgICAgICBjYW5CZVVURjggPSBmYWxzZTsKCSAgICAgICAgICAgICAgICAgICAgfQoJICAgICAgICAgICAgICAgICAgICBlbHNlIHsKCSAgICAgICAgICAgICAgICAgICAgICAgIHV0ZjhCeXRlc0xlZnQrKzsKCSAgICAgICAgICAgICAgICAgICAgICAgIGlmICgodmFsdWUgJiAweDIwKSA9PT0gMCkgewoJICAgICAgICAgICAgICAgICAgICAgICAgICAgIHV0ZjJCeXRlc0NoYXJzKys7CgkgICAgICAgICAgICAgICAgICAgICAgICB9CgkgICAgICAgICAgICAgICAgICAgICAgICBlbHNlIHsKCSAgICAgICAgICAgICAgICAgICAgICAgICAgICB1dGY4Qnl0ZXNMZWZ0Kys7CgkgICAgICAgICAgICAgICAgICAgICAgICAgICAgaWYgKCh2YWx1ZSAmIDB4MTApID09PSAwKSB7CgkgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHV0ZjNCeXRlc0NoYXJzKys7CgkgICAgICAgICAgICAgICAgICAgICAgICAgICAgfQoJICAgICAgICAgICAgICAgICAgICAgICAgICAgIGVsc2UgewoJICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB1dGY4Qnl0ZXNMZWZ0Kys7CgkgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGlmICgodmFsdWUgJiAweDA4KSA9PT0gMCkgewoJICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgdXRmNEJ5dGVzQ2hhcnMrKzsKCSAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgfQoJICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBlbHNlIHsKCSAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGNhbkJlVVRGOCA9IGZhbHNlOwoJICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB9CgkgICAgICAgICAgICAgICAgICAgICAgICAgICAgfQoJICAgICAgICAgICAgICAgICAgICAgICAgfQoJICAgICAgICAgICAgICAgICAgICB9CgkgICAgICAgICAgICAgICAgfSAvLyBlbHNlIHsKCSAgICAgICAgICAgICAgICAvLyB1dGY4TG93Q2hhcnMrKwoJICAgICAgICAgICAgICAgIC8vIH0KCSAgICAgICAgICAgIH0KCSAgICAgICAgICAgIC8vIElTTy04ODU5LTEgc3R1ZmYKCSAgICAgICAgICAgIGlmIChjYW5CZUlTTzg4NTkxKSB7CgkgICAgICAgICAgICAgICAgaWYgKHZhbHVlID4gMHg3RiAmJiB2YWx1ZSA8IDB4QTApIHsKCSAgICAgICAgICAgICAgICAgICAgY2FuQmVJU084ODU5MSA9IGZhbHNlOwoJICAgICAgICAgICAgICAgIH0KCSAgICAgICAgICAgICAgICBlbHNlIGlmICh2YWx1ZSA+IDB4OUYpIHsKCSAgICAgICAgICAgICAgICAgICAgaWYgKHZhbHVlIDwgMHhDMCB8fCB2YWx1ZSA9PT0gMHhENyB8fCB2YWx1ZSA9PT0gMHhGNykgewoJICAgICAgICAgICAgICAgICAgICAgICAgaXNvSGlnaE90aGVyKys7CgkgICAgICAgICAgICAgICAgICAgIH0gLy8gZWxzZSB7CgkgICAgICAgICAgICAgICAgICAgIC8vIGlzb0hpZ2hDaGFycysrCgkgICAgICAgICAgICAgICAgICAgIC8vIH0KCSAgICAgICAgICAgICAgICB9IC8vIGVsc2UgewoJICAgICAgICAgICAgICAgIC8vIGlzb0xvd0NoYXJzKysKCSAgICAgICAgICAgICAgICAvLyB9CgkgICAgICAgICAgICB9CgkgICAgICAgICAgICAvLyBTaGlmdF9KSVMgc3R1ZmYKCSAgICAgICAgICAgIGlmIChjYW5CZVNoaWZ0SklTKSB7CgkgICAgICAgICAgICAgICAgaWYgKHNqaXNCeXRlc0xlZnQgPiAwKSB7CgkgICAgICAgICAgICAgICAgICAgIGlmICh2YWx1ZSA8IDB4NDAgfHwgdmFsdWUgPT09IDB4N0YgfHwgdmFsdWUgPiAweEZDKSB7CgkgICAgICAgICAgICAgICAgICAgICAgICBjYW5CZVNoaWZ0SklTID0gZmFsc2U7CgkgICAgICAgICAgICAgICAgICAgIH0KCSAgICAgICAgICAgICAgICAgICAgZWxzZSB7CgkgICAgICAgICAgICAgICAgICAgICAgICBzamlzQnl0ZXNMZWZ0LS07CgkgICAgICAgICAgICAgICAgICAgIH0KCSAgICAgICAgICAgICAgICB9CgkgICAgICAgICAgICAgICAgZWxzZSBpZiAodmFsdWUgPT09IDB4ODAgfHwgdmFsdWUgPT09IDB4QTAgfHwgdmFsdWUgPiAweEVGKSB7CgkgICAgICAgICAgICAgICAgICAgIGNhbkJlU2hpZnRKSVMgPSBmYWxzZTsKCSAgICAgICAgICAgICAgICB9CgkgICAgICAgICAgICAgICAgZWxzZSBpZiAodmFsdWUgPiAweEEwICYmIHZhbHVlIDwgMHhFMCkgewoJICAgICAgICAgICAgICAgICAgICBzamlzS2F0YWthbmFDaGFycysrOwoJICAgICAgICAgICAgICAgICAgICBzamlzQ3VyRG91YmxlQnl0ZXNXb3JkTGVuZ3RoID0gMDsKCSAgICAgICAgICAgICAgICAgICAgc2ppc0N1ckthdGFrYW5hV29yZExlbmd0aCsrOwoJICAgICAgICAgICAgICAgICAgICBpZiAoc2ppc0N1ckthdGFrYW5hV29yZExlbmd0aCA+IHNqaXNNYXhLYXRha2FuYVdvcmRMZW5ndGgpIHsKCSAgICAgICAgICAgICAgICAgICAgICAgIHNqaXNNYXhLYXRha2FuYVdvcmRMZW5ndGggPSBzamlzQ3VyS2F0YWthbmFXb3JkTGVuZ3RoOwoJICAgICAgICAgICAgICAgICAgICB9CgkgICAgICAgICAgICAgICAgfQoJICAgICAgICAgICAgICAgIGVsc2UgaWYgKHZhbHVlID4gMHg3RikgewoJICAgICAgICAgICAgICAgICAgICBzamlzQnl0ZXNMZWZ0Kys7CgkgICAgICAgICAgICAgICAgICAgIC8vIHNqaXNEb3VibGVCeXRlc0NoYXJzKysKCSAgICAgICAgICAgICAgICAgICAgc2ppc0N1ckthdGFrYW5hV29yZExlbmd0aCA9IDA7CgkgICAgICAgICAgICAgICAgICAgIHNqaXNDdXJEb3VibGVCeXRlc1dvcmRMZW5ndGgrKzsKCSAgICAgICAgICAgICAgICAgICAgaWYgKHNqaXNDdXJEb3VibGVCeXRlc1dvcmRMZW5ndGggPiBzamlzTWF4RG91YmxlQnl0ZXNXb3JkTGVuZ3RoKSB7CgkgICAgICAgICAgICAgICAgICAgICAgICBzamlzTWF4RG91YmxlQnl0ZXNXb3JkTGVuZ3RoID0gc2ppc0N1ckRvdWJsZUJ5dGVzV29yZExlbmd0aDsKCSAgICAgICAgICAgICAgICAgICAgfQoJICAgICAgICAgICAgICAgIH0KCSAgICAgICAgICAgICAgICBlbHNlIHsKCSAgICAgICAgICAgICAgICAgICAgLy8gc2ppc0xvd0NoYXJzKysKCSAgICAgICAgICAgICAgICAgICAgc2ppc0N1ckthdGFrYW5hV29yZExlbmd0aCA9IDA7CgkgICAgICAgICAgICAgICAgICAgIHNqaXNDdXJEb3VibGVCeXRlc1dvcmRMZW5ndGggPSAwOwoJICAgICAgICAgICAgICAgIH0KCSAgICAgICAgICAgIH0KCSAgICAgICAgfQoJICAgICAgICBpZiAoY2FuQmVVVEY4ICYmIHV0ZjhCeXRlc0xlZnQgPiAwKSB7CgkgICAgICAgICAgICBjYW5CZVVURjggPSBmYWxzZTsKCSAgICAgICAgfQoJICAgICAgICBpZiAoY2FuQmVTaGlmdEpJUyAmJiBzamlzQnl0ZXNMZWZ0ID4gMCkgewoJICAgICAgICAgICAgY2FuQmVTaGlmdEpJUyA9IGZhbHNlOwoJICAgICAgICB9CgkgICAgICAgIC8vIEVhc3kgLS0gaWYgdGhlcmUgaXMgQk9NIG9yIGF0IGxlYXN0IDEgdmFsaWQgbm90LXNpbmdsZSBieXRlIGNoYXJhY3RlciAoYW5kIG5vIGV2aWRlbmNlIGl0IGNhbid0IGJlIFVURi04KSwgZG9uZQoJICAgICAgICBpZiAoY2FuQmVVVEY4ICYmICh1dGY4Ym9tIHx8IHV0ZjJCeXRlc0NoYXJzICsgdXRmM0J5dGVzQ2hhcnMgKyB1dGY0Qnl0ZXNDaGFycyA+IDApKSB7CgkgICAgICAgICAgICByZXR1cm4gU3RyaW5nVXRpbHMuVVRGODsKCSAgICAgICAgfQoJICAgICAgICAvLyBFYXN5IC0tIGlmIGFzc3VtaW5nIFNoaWZ0X0pJUyBvciBhdCBsZWFzdCAzIHZhbGlkIGNvbnNlY3V0aXZlIG5vdC1hc2NpaSBjaGFyYWN0ZXJzIChhbmQgbm8gZXZpZGVuY2UgaXQgY2FuJ3QgYmUpLCBkb25lCgkgICAgICAgIGlmIChjYW5CZVNoaWZ0SklTICYmIChTdHJpbmdVdGlscy5BU1NVTUVfU0hJRlRfSklTIHx8IHNqaXNNYXhLYXRha2FuYVdvcmRMZW5ndGggPj0gMyB8fCBzamlzTWF4RG91YmxlQnl0ZXNXb3JkTGVuZ3RoID49IDMpKSB7CgkgICAgICAgICAgICByZXR1cm4gU3RyaW5nVXRpbHMuU0hJRlRfSklTOwoJICAgICAgICB9CgkgICAgICAgIC8vIERpc3Rpbmd1aXNoaW5nIFNoaWZ0X0pJUyBhbmQgSVNPLTg4NTktMSBjYW4gYmUgYSBsaXR0bGUgdG91Z2ggZm9yIHNob3J0IHdvcmRzLiBUaGUgY3J1ZGUgaGV1cmlzdGljIGlzOgoJICAgICAgICAvLyAtIElmIHdlIHNhdwoJICAgICAgICAvLyAgIC0gb25seSB0d28gY29uc2VjdXRpdmUga2F0YWthbmEgY2hhcnMgaW4gdGhlIHdob2xlIHRleHQsIG9yCgkgICAgICAgIC8vICAgLSBhdCBsZWFzdCAxMCUgb2YgYnl0ZXMgdGhhdCBjb3VsZCBiZSAidXBwZXIiIG5vdC1hbHBoYW51bWVyaWMgTGF0aW4xLAoJICAgICAgICAvLyAtIHRoZW4gd2UgY29uY2x1ZGUgU2hpZnRfSklTLCBlbHNlIElTTy04ODU5LTEKCSAgICAgICAgaWYgKGNhbkJlSVNPODg1OTEgJiYgY2FuQmVTaGlmdEpJUykgewoJICAgICAgICAgICAgcmV0dXJuIChzamlzTWF4S2F0YWthbmFXb3JkTGVuZ3RoID09PSAyICYmIHNqaXNLYXRha2FuYUNoYXJzID09PSAyKSB8fCBpc29IaWdoT3RoZXIgKiAxMCA+PSBsZW5ndGgKCSAgICAgICAgICAgICAgICA/IFN0cmluZ1V0aWxzLlNISUZUX0pJUyA6IFN0cmluZ1V0aWxzLklTTzg4NTkxOwoJICAgICAgICB9CgkgICAgICAgIC8vIE90aGVyd2lzZSwgdHJ5IGluIG9yZGVyIElTTy04ODU5LTEsIFNoaWZ0IEpJUywgVVRGLTggYW5kIGZhbGwgYmFjayB0byBkZWZhdWx0IHBsYXRmb3JtIGVuY29kaW5nCgkgICAgICAgIGlmIChjYW5CZUlTTzg4NTkxKSB7CgkgICAgICAgICAgICByZXR1cm4gU3RyaW5nVXRpbHMuSVNPODg1OTE7CgkgICAgICAgIH0KCSAgICAgICAgaWYgKGNhbkJlU2hpZnRKSVMpIHsKCSAgICAgICAgICAgIHJldHVybiBTdHJpbmdVdGlscy5TSElGVF9KSVM7CgkgICAgICAgIH0KCSAgICAgICAgaWYgKGNhbkJlVVRGOCkgewoJICAgICAgICAgICAgcmV0dXJuIFN0cmluZ1V0aWxzLlVURjg7CgkgICAgICAgIH0KCSAgICAgICAgLy8gT3RoZXJ3aXNlLCB3ZSB0YWtlIGEgd2lsZCBndWVzcyB3aXRoIHBsYXRmb3JtIGVuY29kaW5nCgkgICAgICAgIHJldHVybiBTdHJpbmdVdGlscy5QTEFURk9STV9ERUZBVUxUX0VOQ09ESU5HOwoJICAgIH07CgkgICAgLyoqCgkgICAgICoKCSAgICAgKiBAc2VlIGh0dHBzOi8vc3RhY2tvdmVyZmxvdy5jb20vYS8xMzQzOTcxMS80MzY3NjgzCgkgICAgICoKCSAgICAgKiBAcGFyYW0gYXBwZW5kIFRoZSBuZXcgc3RyaW5nIHRvIGFwcGVuZC4KCSAgICAgKiBAcGFyYW0gYXJncyBBcmd1bWV0cyB2YWx1ZXMgdG8gYmUgZm9ybWF0ZWQuCgkgICAgICovCgkgICAgU3RyaW5nVXRpbHMuZm9ybWF0ID0gZnVuY3Rpb24gKGFwcGVuZCkgewoJICAgICAgICB2YXIgYXJncyA9IFtdOwoJICAgICAgICBmb3IgKHZhciBfaSA9IDE7IF9pIDwgYXJndW1lbnRzLmxlbmd0aDsgX2krKykgewoJICAgICAgICAgICAgYXJnc1tfaSAtIDFdID0gYXJndW1lbnRzW19pXTsKCSAgICAgICAgfQoJICAgICAgICB2YXIgaSA9IC0xOwoJICAgICAgICBmdW5jdGlvbiBjYWxsYmFjayhleHAsIHAwLCBwMSwgcDIsIHAzLCBwNCkgewoJICAgICAgICAgICAgaWYgKGV4cCA9PT0gJyUlJykKCSAgICAgICAgICAgICAgICByZXR1cm4gJyUnOwoJICAgICAgICAgICAgaWYgKGFyZ3NbKytpXSA9PT0gdW5kZWZpbmVkKQoJICAgICAgICAgICAgICAgIHJldHVybiB1bmRlZmluZWQ7CgkgICAgICAgICAgICBleHAgPSBwMiA/IHBhcnNlSW50KHAyLnN1YnN0cigxKSkgOiB1bmRlZmluZWQ7CgkgICAgICAgICAgICB2YXIgYmFzZSA9IHAzID8gcGFyc2VJbnQocDMuc3Vic3RyKDEpKSA6IHVuZGVmaW5lZDsKCSAgICAgICAgICAgIHZhciB2YWw7CgkgICAgICAgICAgICBzd2l0Y2ggKHA0KSB7CgkgICAgICAgICAgICAgICAgY2FzZSAncyc6CgkgICAgICAgICAgICAgICAgICAgIHZhbCA9IGFyZ3NbaV07CgkgICAgICAgICAgICAgICAgICAgIGJyZWFrOwoJICAgICAgICAgICAgICAgIGNhc2UgJ2MnOgoJICAgICAgICAgICAgICAgICAgICB2YWwgPSBhcmdzW2ldWzBdOwoJICAgICAgICAgICAgICAgICAgICBicmVhazsKCSAgICAgICAgICAgICAgICBjYXNlICdmJzoKCSAgICAgICAgICAgICAgICAgICAgdmFsID0gcGFyc2VGbG9hdChhcmdzW2ldKS50b0ZpeGVkKGV4cCk7CgkgICAgICAgICAgICAgICAgICAgIGJyZWFrOwoJICAgICAgICAgICAgICAgIGNhc2UgJ3AnOgoJICAgICAgICAgICAgICAgICAgICB2YWwgPSBwYXJzZUZsb2F0KGFyZ3NbaV0pLnRvUHJlY2lzaW9uKGV4cCk7CgkgICAgICAgICAgICAgICAgICAgIGJyZWFrOwoJICAgICAgICAgICAgICAgIGNhc2UgJ2UnOgoJICAgICAgICAgICAgICAgICAgICB2YWwgPSBwYXJzZUZsb2F0KGFyZ3NbaV0pLnRvRXhwb25lbnRpYWwoZXhwKTsKCSAgICAgICAgICAgICAgICAgICAgYnJlYWs7CgkgICAgICAgICAgICAgICAgY2FzZSAneCc6CgkgICAgICAgICAgICAgICAgICAgIHZhbCA9IHBhcnNlSW50KGFyZ3NbaV0pLnRvU3RyaW5nKGJhc2UgPyBiYXNlIDogMTYpOwoJICAgICAgICAgICAgICAgICAgICBicmVhazsKCSAgICAgICAgICAgICAgICBjYXNlICdkJzoKCSAgICAgICAgICAgICAgICAgICAgdmFsID0gcGFyc2VGbG9hdChwYXJzZUludChhcmdzW2ldLCBiYXNlID8gYmFzZSA6IDEwKS50b1ByZWNpc2lvbihleHApKS50b0ZpeGVkKDApOwoJICAgICAgICAgICAgICAgICAgICBicmVhazsKCSAgICAgICAgICAgIH0KCSAgICAgICAgICAgIHZhbCA9IHR5cGVvZiB2YWwgPT09ICdvYmplY3QnID8gSlNPTi5zdHJpbmdpZnkodmFsKSA6ICgrdmFsKS50b1N0cmluZyhiYXNlKTsKCSAgICAgICAgICAgIHZhciBzaXplID0gcGFyc2VJbnQocDEpOyAvKiBwYWRkaW5nIHNpemUgKi8KCSAgICAgICAgICAgIHZhciBjaCA9IHAxICYmIChwMVswXSArICcnKSA9PT0gJzAnID8gJzAnIDogJyAnOyAvKiBpc251bGw/ICovCgkgICAgICAgICAgICB3aGlsZSAodmFsLmxlbmd0aCA8IHNpemUpCgkgICAgICAgICAgICAgICAgdmFsID0gcDAgIT09IHVuZGVmaW5lZCA/IHZhbCArIGNoIDogY2ggKyB2YWw7IC8qIGlzbWludXM/ICovCgkgICAgICAgICAgICByZXR1cm4gdmFsOwoJICAgICAgICB9CgkgICAgICAgIHZhciByZWdleCA9IC8lKC0pPygwP1swLTldKyk/KFsuXVswLTldKyk/KFsjXVswLTldKyk/KFtzY2ZwZXhkJV0pL2c7CgkgICAgICAgIHJldHVybiBhcHBlbmQucmVwbGFjZShyZWdleCwgY2FsbGJhY2spOwoJICAgIH07CgkgICAgLyoqCgkgICAgICoKCSAgICAgKi8KCSAgICBTdHJpbmdVdGlscy5nZXRCeXRlcyA9IGZ1bmN0aW9uIChzdHIsIGVuY29kaW5nKSB7CgkgICAgICAgIHJldHVybiBTdHJpbmdFbmNvZGluZ18xJDEuZGVmYXVsdC5lbmNvZGUoc3RyLCBlbmNvZGluZyk7CgkgICAgfTsKCSAgICAvKioKCSAgICAgKiBSZXR1cm5zIHRoZSBjaGFyY29kZSBhdCB0aGUgc3BlY2lmaWVkIGluZGV4IG9yIGF0IGluZGV4IHplcm8uCgkgICAgICovCgkgICAgU3RyaW5nVXRpbHMuZ2V0Q2hhckNvZGUgPSBmdW5jdGlvbiAoc3RyLCBpbmRleCkgewoJICAgICAgICBpZiAoaW5kZXggPT09IHZvaWQgMCkgeyBpbmRleCA9IDA7IH0KCSAgICAgICAgcmV0dXJuIHN0ci5jaGFyQ29kZUF0KGluZGV4KTsKCSAgICB9OwoJICAgIC8qKgoJICAgICAqIFJldHVybnMgY2hhciBmb3IgZ2l2ZW4gY2hhcmNvZGUKCSAgICAgKi8KCSAgICBTdHJpbmdVdGlscy5nZXRDaGFyQXQgPSBmdW5jdGlvbiAoY2hhckNvZGUpIHsKCSAgICAgICAgcmV0dXJuIFN0cmluZy5mcm9tQ2hhckNvZGUoY2hhckNvZGUpOwoJICAgIH07CgkgICAgU3RyaW5nVXRpbHMuU0hJRlRfSklTID0gQ2hhcmFjdGVyU2V0RUNJXzEkMS5kZWZhdWx0LlNKSVMuZ2V0TmFtZSgpOyAvLyAiU0pJUyIKCSAgICBTdHJpbmdVdGlscy5HQjIzMTIgPSAnR0IyMzEyJzsKCSAgICBTdHJpbmdVdGlscy5JU084ODU5MSA9IENoYXJhY3RlclNldEVDSV8xJDEuZGVmYXVsdC5JU084ODU5XzEuZ2V0TmFtZSgpOyAvLyAiSVNPODg1OV8xIgoJICAgIFN0cmluZ1V0aWxzLkVVQ19KUCA9ICdFVUNfSlAnOwoJICAgIFN0cmluZ1V0aWxzLlVURjggPSBDaGFyYWN0ZXJTZXRFQ0lfMSQxLmRlZmF1bHQuVVRGOC5nZXROYW1lKCk7IC8vICJVVEY4IgoJICAgIFN0cmluZ1V0aWxzLlBMQVRGT1JNX0RFRkFVTFRfRU5DT0RJTkcgPSBTdHJpbmdVdGlscy5VVEY4OyAvLyAiVVRGOCIvL0NoYXJzZXQuZGVmYXVsdENoYXJzZXQoKS5uYW1lKCkKCSAgICBTdHJpbmdVdGlscy5BU1NVTUVfU0hJRlRfSklTID0gZmFsc2U7CgkgICAgcmV0dXJuIFN0cmluZ1V0aWxzOwoJfSgpKTsKCVN0cmluZ1V0aWxzJDEuZGVmYXVsdCA9IFN0cmluZ1V0aWxzOwoKCU9iamVjdC5kZWZpbmVQcm9wZXJ0eShTdHJpbmdCdWlsZGVyJDEsICJfX2VzTW9kdWxlIiwgeyB2YWx1ZTogdHJ1ZSB9KTsKCXZhciBTdHJpbmdVdGlsc18xJDEgPSBTdHJpbmdVdGlscyQxOwoJdmFyIFN0cmluZ0J1aWxkZXIgPSAvKiogQGNsYXNzICovIChmdW5jdGlvbiAoKSB7CgkgICAgZnVuY3Rpb24gU3RyaW5nQnVpbGRlcih2YWx1ZSkgewoJICAgICAgICBpZiAodmFsdWUgPT09IHZvaWQgMCkgeyB2YWx1ZSA9ICcnOyB9CgkgICAgICAgIHRoaXMudmFsdWUgPSB2YWx1ZTsKCSAgICB9CgkgICAgU3RyaW5nQnVpbGRlci5wcm90b3R5cGUuZW5hYmxlRGVjb2RpbmcgPSBmdW5jdGlvbiAoZW5jb2RpbmcpIHsKCSAgICAgICAgdGhpcy5lbmNvZGluZyA9IGVuY29kaW5nOwoJICAgICAgICByZXR1cm4gdGhpczsKCSAgICB9OwoJICAgIFN0cmluZ0J1aWxkZXIucHJvdG90eXBlLmFwcGVuZCA9IGZ1bmN0aW9uIChzKSB7CgkgICAgICAgIGlmICh0eXBlb2YgcyA9PT0gJ3N0cmluZycpIHsKCSAgICAgICAgICAgIHRoaXMudmFsdWUgKz0gcy50b1N0cmluZygpOwoJICAgICAgICB9CgkgICAgICAgIGVsc2UgaWYgKHRoaXMuZW5jb2RpbmcpIHsKCSAgICAgICAgICAgIC8vIHVzZSBwYXNzZWQgZm9ybWF0IChmcm9tQ2hhckNvZGUgd2lsbCByZXR1cm4gVVRGOCBlbmNvZGluZykKCSAgICAgICAgICAgIHRoaXMudmFsdWUgKz0gU3RyaW5nVXRpbHNfMSQxLmRlZmF1bHQuY2FzdEFzTm9uVXRmOENoYXIocywgdGhpcy5lbmNvZGluZyk7CgkgICAgICAgIH0KCSAgICAgICAgZWxzZSB7CgkgICAgICAgICAgICAvLyBjb3JyZWN0bHkgY29udmVydHMgZnJvbSBVVEYtOCwgYnV0IG5vdCBvdGhlciBlbmNvZGluZ3MKCSAgICAgICAgICAgIHRoaXMudmFsdWUgKz0gU3RyaW5nLmZyb21DaGFyQ29kZShzKTsKCSAgICAgICAgfQoJICAgICAgICByZXR1cm4gdGhpczsKCSAgICB9OwoJICAgIFN0cmluZ0J1aWxkZXIucHJvdG90eXBlLmFwcGVuZENoYXJzID0gZnVuY3Rpb24gKHN0ciwgb2Zmc2V0LCBsZW4pIHsKCSAgICAgICAgZm9yICh2YXIgaSA9IG9mZnNldDsgb2Zmc2V0IDwgb2Zmc2V0ICsgbGVuOyBpKyspIHsKCSAgICAgICAgICAgIHRoaXMuYXBwZW5kKHN0cltpXSk7CgkgICAgICAgIH0KCSAgICAgICAgcmV0dXJuIHRoaXM7CgkgICAgfTsKCSAgICBTdHJpbmdCdWlsZGVyLnByb3RvdHlwZS5sZW5ndGggPSBmdW5jdGlvbiAoKSB7CgkgICAgICAgIHJldHVybiB0aGlzLnZhbHVlLmxlbmd0aDsKCSAgICB9OwoJICAgIFN0cmluZ0J1aWxkZXIucHJvdG90eXBlLmNoYXJBdCA9IGZ1bmN0aW9uIChuKSB7CgkgICAgICAgIHJldHVybiB0aGlzLnZhbHVlLmNoYXJBdChuKTsKCSAgICB9OwoJICAgIFN0cmluZ0J1aWxkZXIucHJvdG90eXBlLmRlbGV0ZUNoYXJBdCA9IGZ1bmN0aW9uIChuKSB7CgkgICAgICAgIHRoaXMudmFsdWUgPSB0aGlzLnZhbHVlLnN1YnN0cigwLCBuKSArIHRoaXMudmFsdWUuc3Vic3RyaW5nKG4gKyAxKTsKCSAgICB9OwoJICAgIFN0cmluZ0J1aWxkZXIucHJvdG90eXBlLnNldENoYXJBdCA9IGZ1bmN0aW9uIChuLCBjKSB7CgkgICAgICAgIHRoaXMudmFsdWUgPSB0aGlzLnZhbHVlLnN1YnN0cigwLCBuKSArIGMgKyB0aGlzLnZhbHVlLnN1YnN0cihuICsgMSk7CgkgICAgfTsKCSAgICBTdHJpbmdCdWlsZGVyLnByb3RvdHlwZS5zdWJzdHJpbmcgPSBmdW5jdGlvbiAoc3RhcnQsIGVuZCkgewoJICAgICAgICByZXR1cm4gdGhpcy52YWx1ZS5zdWJzdHJpbmcoc3RhcnQsIGVuZCk7CgkgICAgfTsKCSAgICAvKioKCSAgICAgKiBAbm90ZSBoZWxwZXIgbWV0aG9kIGZvciBSU1MgRXhwYW5kZWQKCSAgICAgKi8KCSAgICBTdHJpbmdCdWlsZGVyLnByb3RvdHlwZS5zZXRMZW5ndGhUb1plcm8gPSBmdW5jdGlvbiAoKSB7CgkgICAgICAgIHRoaXMudmFsdWUgPSAnJzsKCSAgICB9OwoJICAgIFN0cmluZ0J1aWxkZXIucHJvdG90eXBlLnRvU3RyaW5nID0gZnVuY3Rpb24gKCkgewoJICAgICAgICByZXR1cm4gdGhpcy52YWx1ZTsKCSAgICB9OwoJICAgIFN0cmluZ0J1aWxkZXIucHJvdG90eXBlLmluc2VydCA9IGZ1bmN0aW9uIChuLCBjKSB7CgkgICAgICAgIHRoaXMudmFsdWUgPSB0aGlzLnZhbHVlLnN1YnN0cigwLCBuKSArIGMgKyB0aGlzLnZhbHVlLnN1YnN0cihuICsgYy5sZW5ndGgpOwoJICAgIH07CgkgICAgcmV0dXJuIFN0cmluZ0J1aWxkZXI7Cgl9KCkpOwoJU3RyaW5nQnVpbGRlciQxLmRlZmF1bHQgPSBTdHJpbmdCdWlsZGVyOwoKCS8qCgkgKiBDb3B5cmlnaHQgMjAwNyBaWGluZyBhdXRob3JzCgkgKgoJICogTGljZW5zZWQgdW5kZXIgdGhlIEFwYWNoZSBMaWNlbnNlLCBWZXJzaW9uIDIuMCAodGhlICJMaWNlbnNlIik7CgkgKiB5b3UgbWF5IG5vdCB1c2UgdGhpcyBmaWxlIGV4Y2VwdCBpbiBjb21wbGlhbmNlIHdpdGggdGhlIExpY2Vuc2UuCgkgKiBZb3UgbWF5IG9idGFpbiBhIGNvcHkgb2YgdGhlIExpY2Vuc2UgYXQKCSAqCgkgKiAgICAgIGh0dHA6Ly93d3cuYXBhY2hlLm9yZy9saWNlbnNlcy9MSUNFTlNFLTIuMAoJICoKCSAqIFVubGVzcyByZXF1aXJlZCBieSBhcHBsaWNhYmxlIGxhdyBvciBhZ3JlZWQgdG8gaW4gd3JpdGluZywgc29mdHdhcmUKCSAqIGRpc3RyaWJ1dGVkIHVuZGVyIHRoZSBMaWNlbnNlIGlzIGRpc3RyaWJ1dGVkIG9uIGFuICJBUyBJUyIgQkFTSVMsCgkgKiBXSVRIT1VUIFdBUlJBTlRJRVMgT1IgQ09ORElUSU9OUyBPRiBBTlkgS0lORCwgZWl0aGVyIGV4cHJlc3Mgb3IgaW1wbGllZC4KCSAqIFNlZSB0aGUgTGljZW5zZSBmb3IgdGhlIHNwZWNpZmljIGxhbmd1YWdlIGdvdmVybmluZyBwZXJtaXNzaW9ucyBhbmQKCSAqIGxpbWl0YXRpb25zIHVuZGVyIHRoZSBMaWNlbnNlLgoJICovCglPYmplY3QuZGVmaW5lUHJvcGVydHkoQml0TWF0cml4JDEsICJfX2VzTW9kdWxlIiwgeyB2YWx1ZTogdHJ1ZSB9KTsKCS8qbmFtZXNwYWNlIGNvbS5nb29nbGUuenhpbmcuY29tbW9uIHsqLwoJLyppbXBvcnQgamF2YS51dGlsLkFycmF5czsqLwoJdmFyIEJpdEFycmF5XzEkMSA9IEJpdEFycmF5JDE7Cgl2YXIgU3lzdGVtXzEkMyA9IFN5c3RlbSQxOwoJdmFyIEFycmF5c18xID0gQXJyYXlzJDE7Cgl2YXIgU3RyaW5nQnVpbGRlcl8xJDIgPSBTdHJpbmdCdWlsZGVyJDE7Cgl2YXIgSWxsZWdhbEFyZ3VtZW50RXhjZXB0aW9uXzEkNyA9IElsbGVnYWxBcmd1bWVudEV4Y2VwdGlvbiQxOwoJLyoqCgkgKiA8cD5SZXByZXNlbnRzIGEgMkQgbWF0cml4IG9mIGJpdHMuIEluIGZ1bmN0aW9uIGFyZ3VtZW50cyBiZWxvdywgYW5kIHRocm91Z2hvdXQgdGhlIGNvbW1vbgoJICogbW9kdWxlLCB4IGlzIHRoZSBjb2x1bW4gcG9zaXRpb24sIGFuZCB5IGlzIHRoZSByb3cgcG9zaXRpb24uIFRoZSBvcmRlcmluZyBpcyBhbHdheXMgeCwgeS4KCSAqIFRoZSBvcmlnaW4gaXMgYXQgdGhlIHRvcC1sZWZ0LjwvcD4KCSAqCgkgKiA8cD5JbnRlcm5hbGx5IHRoZSBiaXRzIGFyZSByZXByZXNlbnRlZCBpbiBhIDEtRCBhcnJheSBvZiAzMi1iaXQgaW50cy4gSG93ZXZlciwgZWFjaCByb3cgYmVnaW5zCgkgKiB3aXRoIGEgbmV3IGludC4gVGhpcyBpcyBkb25lIGludGVudGlvbmFsbHkgc28gdGhhdCB3ZSBjYW4gY29weSBvdXQgYSByb3cgaW50byBhIEJpdEFycmF5IHZlcnkKCSAqIGVmZmljaWVudGx5LjwvcD4KCSAqCgkgKiA8cD5UaGUgb3JkZXJpbmcgb2YgYml0cyBpcyByb3ctbWFqb3IuIFdpdGhpbiBlYWNoIGludCwgdGhlIGxlYXN0IHNpZ25pZmljYW50IGJpdHMgYXJlIHVzZWQgZmlyc3QsCgkgKiBtZWFuaW5nIHRoZXkgcmVwcmVzZW50IGxvd2VyIHggdmFsdWVzLiBUaGlzIGlzIGNvbXBhdGlibGUgd2l0aCBCaXRBcnJheSdzIGltcGxlbWVudGF0aW9uLjwvcD4KCSAqCgkgKiBAYXV0aG9yIFNlYW4gT3dlbgoJICogQGF1dGhvciBkc3dpdGtpbkBnb29nbGUuY29tIChEYW5pZWwgU3dpdGtpbikKCSAqLwoJdmFyIEJpdE1hdHJpeCAvKmltcGxlbWVudHMgQ2xvbmVhYmxlKi8gPSAvKiogQGNsYXNzICovIChmdW5jdGlvbiAoKSB7CgkgICAgLyoqCgkgICAgICogQ3JlYXRlcyBhbiBlbXB0eSBzcXVhcmUge0BsaW5rIEJpdE1hdHJpeH0uCgkgICAgICoKCSAgICAgKiBAcGFyYW0gZGltZW5zaW9uIGhlaWdodCBhbmQgd2lkdGgKCSAgICAgKi8KCSAgICAvLyBwdWJsaWMgY29uc3RydWN0b3IoZGltZW5zaW9uOiBudW1iZXIgLyppbnQqLykgewoJICAgIC8vICAgdGhpcyhkaW1lbnNpb24sIGRpbWVuc2lvbikKCSAgICAvLyB9CgkgICAgLyoqCgkgICAgICogQ3JlYXRlcyBhbiBlbXB0eSB7QGxpbmsgQml0TWF0cml4fS4KCSAgICAgKgoJICAgICAqIEBwYXJhbSB3aWR0aCBiaXQgbWF0cml4IHdpZHRoCgkgICAgICogQHBhcmFtIGhlaWdodCBiaXQgbWF0cml4IGhlaWdodAoJICAgICAqLwoJICAgIC8vIHB1YmxpYyBjb25zdHJ1Y3Rvcih3aWR0aDogbnVtYmVyIC8qaW50Ki8sIGhlaWdodDogbnVtYmVyIC8qaW50Ki8pIHsKCSAgICAvLyAgIGlmICh3aWR0aCA8IDEgfHwgaGVpZ2h0IDwgMSkgewoJICAgIC8vICAgICB0aHJvdyBuZXcgSWxsZWdhbEFyZ3VtZW50RXhjZXB0aW9uKCJCb3RoIGRpbWVuc2lvbnMgbXVzdCBiZSBncmVhdGVyIHRoYW4gMCIpCgkgICAgLy8gICB9CgkgICAgLy8gICB0aGlzLndpZHRoID0gd2lkdGgKCSAgICAvLyAgIHRoaXMuaGVpZ2h0ID0gaGVpZ2h0CgkgICAgLy8gICB0aGlzLnJvd1NpemUgPSAod2lkdGggKyAzMSkgLyAzMgoJICAgIC8vICAgYml0cyA9IG5ldyBpbnRbcm93U2l6ZSAqIGhlaWdodF07CgkgICAgLy8gfQoJICAgIGZ1bmN0aW9uIEJpdE1hdHJpeCh3aWR0aCAvKmludCovLCBoZWlnaHQgLyppbnQqLywgcm93U2l6ZSAvKmludCovLCBiaXRzKSB7CgkgICAgICAgIHRoaXMud2lkdGggPSB3aWR0aDsKCSAgICAgICAgdGhpcy5oZWlnaHQgPSBoZWlnaHQ7CgkgICAgICAgIHRoaXMucm93U2l6ZSA9IHJvd1NpemU7CgkgICAgICAgIHRoaXMuYml0cyA9IGJpdHM7CgkgICAgICAgIGlmICh1bmRlZmluZWQgPT09IGhlaWdodCB8fCBudWxsID09PSBoZWlnaHQpIHsKCSAgICAgICAgICAgIGhlaWdodCA9IHdpZHRoOwoJICAgICAgICB9CgkgICAgICAgIHRoaXMuaGVpZ2h0ID0gaGVpZ2h0OwoJICAgICAgICBpZiAod2lkdGggPCAxIHx8IGhlaWdodCA8IDEpIHsKCSAgICAgICAgICAgIHRocm93IG5ldyBJbGxlZ2FsQXJndW1lbnRFeGNlcHRpb25fMSQ3LmRlZmF1bHQoJ0JvdGggZGltZW5zaW9ucyBtdXN0IGJlIGdyZWF0ZXIgdGhhbiAwJyk7CgkgICAgICAgIH0KCSAgICAgICAgaWYgKHVuZGVmaW5lZCA9PT0gcm93U2l6ZSB8fCBudWxsID09PSByb3dTaXplKSB7CgkgICAgICAgICAgICByb3dTaXplID0gTWF0aC5mbG9vcigod2lkdGggKyAzMSkgLyAzMik7CgkgICAgICAgIH0KCSAgICAgICAgdGhpcy5yb3dTaXplID0gcm93U2l6ZTsKCSAgICAgICAgaWYgKHVuZGVmaW5lZCA9PT0gYml0cyB8fCBudWxsID09PSBiaXRzKSB7CgkgICAgICAgICAgICB0aGlzLmJpdHMgPSBuZXcgSW50MzJBcnJheSh0aGlzLnJvd1NpemUgKiB0aGlzLmhlaWdodCk7CgkgICAgICAgIH0KCSAgICB9CgkgICAgLyoqCgkgICAgICogSW50ZXJwcmV0cyBhIDJEIGFycmF5IG9mIGJvb2xlYW5zIGFzIGEge0BsaW5rIEJpdE1hdHJpeH0sIHdoZXJlICJ0cnVlIiBtZWFucyBhbiAib24iIGJpdC4KCSAgICAgKgoJICAgICAqIEBmdW5jdGlvbiBwYXJzZQoJICAgICAqIEBwYXJhbSBpbWFnZSBiaXRzIG9mIHRoZSBpbWFnZSwgYXMgYSByb3ctbWFqb3IgMkQgYXJyYXkuIEVsZW1lbnRzIGFyZSBhcnJheXMgcmVwcmVzZW50aW5nIHJvd3MKCSAgICAgKiBAcmV0dXJuIHtAbGluayBCaXRNYXRyaXh9IHJlcHJlc2VudGF0aW9uIG9mIGltYWdlCgkgICAgICovCgkgICAgQml0TWF0cml4LnBhcnNlRnJvbUJvb2xlYW5BcnJheSA9IGZ1bmN0aW9uIChpbWFnZSkgewoJICAgICAgICB2YXIgaGVpZ2h0ID0gaW1hZ2UubGVuZ3RoOwoJICAgICAgICB2YXIgd2lkdGggPSBpbWFnZVswXS5sZW5ndGg7CgkgICAgICAgIHZhciBiaXRzID0gbmV3IEJpdE1hdHJpeCh3aWR0aCwgaGVpZ2h0KTsKCSAgICAgICAgZm9yICh2YXIgaSA9IDA7IGkgPCBoZWlnaHQ7IGkrKykgewoJICAgICAgICAgICAgdmFyIGltYWdlSSA9IGltYWdlW2ldOwoJICAgICAgICAgICAgZm9yICh2YXIgaiA9IDA7IGogPCB3aWR0aDsgaisrKSB7CgkgICAgICAgICAgICAgICAgaWYgKGltYWdlSVtqXSkgewoJICAgICAgICAgICAgICAgICAgICBiaXRzLnNldChqLCBpKTsKCSAgICAgICAgICAgICAgICB9CgkgICAgICAgICAgICB9CgkgICAgICAgIH0KCSAgICAgICAgcmV0dXJuIGJpdHM7CgkgICAgfTsKCSAgICAvKioKCSAgICAgKgoJICAgICAqIEBmdW5jdGlvbiBwYXJzZQoJICAgICAqIEBwYXJhbSBzdHJpbmdSZXByZXNlbnRhdGlvbgoJICAgICAqIEBwYXJhbSBzZXRTdHJpbmcKCSAgICAgKiBAcGFyYW0gdW5zZXRTdHJpbmcKCSAgICAgKi8KCSAgICBCaXRNYXRyaXgucGFyc2VGcm9tU3RyaW5nID0gZnVuY3Rpb24gKHN0cmluZ1JlcHJlc2VudGF0aW9uLCBzZXRTdHJpbmcsIHVuc2V0U3RyaW5nKSB7CgkgICAgICAgIGlmIChzdHJpbmdSZXByZXNlbnRhdGlvbiA9PT0gbnVsbCkgewoJICAgICAgICAgICAgdGhyb3cgbmV3IElsbGVnYWxBcmd1bWVudEV4Y2VwdGlvbl8xJDcuZGVmYXVsdCgnc3RyaW5nUmVwcmVzZW50YXRpb24gY2Fubm90IGJlIG51bGwnKTsKCSAgICAgICAgfQoJICAgICAgICB2YXIgYml0cyA9IG5ldyBBcnJheShzdHJpbmdSZXByZXNlbnRhdGlvbi5sZW5ndGgpOwoJICAgICAgICB2YXIgYml0c1BvcyA9IDA7CgkgICAgICAgIHZhciByb3dTdGFydFBvcyA9IDA7CgkgICAgICAgIHZhciByb3dMZW5ndGggPSAtMTsKCSAgICAgICAgdmFyIG5Sb3dzID0gMDsKCSAgICAgICAgdmFyIHBvcyA9IDA7CgkgICAgICAgIHdoaWxlIChwb3MgPCBzdHJpbmdSZXByZXNlbnRhdGlvbi5sZW5ndGgpIHsKCSAgICAgICAgICAgIGlmIChzdHJpbmdSZXByZXNlbnRhdGlvbi5jaGFyQXQocG9zKSA9PT0gJ1xuJyB8fAoJICAgICAgICAgICAgICAgIHN0cmluZ1JlcHJlc2VudGF0aW9uLmNoYXJBdChwb3MpID09PSAnXHInKSB7CgkgICAgICAgICAgICAgICAgaWYgKGJpdHNQb3MgPiByb3dTdGFydFBvcykgewoJICAgICAgICAgICAgICAgICAgICBpZiAocm93TGVuZ3RoID09PSAtMSkgewoJICAgICAgICAgICAgICAgICAgICAgICAgcm93TGVuZ3RoID0gYml0c1BvcyAtIHJvd1N0YXJ0UG9zOwoJICAgICAgICAgICAgICAgICAgICB9CgkgICAgICAgICAgICAgICAgICAgIGVsc2UgaWYgKGJpdHNQb3MgLSByb3dTdGFydFBvcyAhPT0gcm93TGVuZ3RoKSB7CgkgICAgICAgICAgICAgICAgICAgICAgICB0aHJvdyBuZXcgSWxsZWdhbEFyZ3VtZW50RXhjZXB0aW9uXzEkNy5kZWZhdWx0KCdyb3cgbGVuZ3RocyBkbyBub3QgbWF0Y2gnKTsKCSAgICAgICAgICAgICAgICAgICAgfQoJICAgICAgICAgICAgICAgICAgICByb3dTdGFydFBvcyA9IGJpdHNQb3M7CgkgICAgICAgICAgICAgICAgICAgIG5Sb3dzKys7CgkgICAgICAgICAgICAgICAgfQoJICAgICAgICAgICAgICAgIHBvcysrOwoJICAgICAgICAgICAgfQoJICAgICAgICAgICAgZWxzZSBpZiAoc3RyaW5nUmVwcmVzZW50YXRpb24uc3Vic3RyaW5nKHBvcywgcG9zICsgc2V0U3RyaW5nLmxlbmd0aCkgPT09IHNldFN0cmluZykgewoJICAgICAgICAgICAgICAgIHBvcyArPSBzZXRTdHJpbmcubGVuZ3RoOwoJICAgICAgICAgICAgICAgIGJpdHNbYml0c1Bvc10gPSB0cnVlOwoJICAgICAgICAgICAgICAgIGJpdHNQb3MrKzsKCSAgICAgICAgICAgIH0KCSAgICAgICAgICAgIGVsc2UgaWYgKHN0cmluZ1JlcHJlc2VudGF0aW9uLnN1YnN0cmluZyhwb3MsIHBvcyArIHVuc2V0U3RyaW5nLmxlbmd0aCkgPT09IHVuc2V0U3RyaW5nKSB7CgkgICAgICAgICAgICAgICAgcG9zICs9IHVuc2V0U3RyaW5nLmxlbmd0aDsKCSAgICAgICAgICAgICAgICBiaXRzW2JpdHNQb3NdID0gZmFsc2U7CgkgICAgICAgICAgICAgICAgYml0c1BvcysrOwoJICAgICAgICAgICAgfQoJICAgICAgICAgICAgZWxzZSB7CgkgICAgICAgICAgICAgICAgdGhyb3cgbmV3IElsbGVnYWxBcmd1bWVudEV4Y2VwdGlvbl8xJDcuZGVmYXVsdCgnaWxsZWdhbCBjaGFyYWN0ZXIgZW5jb3VudGVyZWQ6ICcgKyBzdHJpbmdSZXByZXNlbnRhdGlvbi5zdWJzdHJpbmcocG9zKSk7CgkgICAgICAgICAgICB9CgkgICAgICAgIH0KCSAgICAgICAgLy8gbm8gRU9MIGF0IGVuZD8KCSAgICAgICAgaWYgKGJpdHNQb3MgPiByb3dTdGFydFBvcykgewoJICAgICAgICAgICAgaWYgKHJvd0xlbmd0aCA9PT0gLTEpIHsKCSAgICAgICAgICAgICAgICByb3dMZW5ndGggPSBiaXRzUG9zIC0gcm93U3RhcnRQb3M7CgkgICAgICAgICAgICB9CgkgICAgICAgICAgICBlbHNlIGlmIChiaXRzUG9zIC0gcm93U3RhcnRQb3MgIT09IHJvd0xlbmd0aCkgewoJICAgICAgICAgICAgICAgIHRocm93IG5ldyBJbGxlZ2FsQXJndW1lbnRFeGNlcHRpb25fMSQ3LmRlZmF1bHQoJ3JvdyBsZW5ndGhzIGRvIG5vdCBtYXRjaCcpOwoJICAgICAgICAgICAgfQoJICAgICAgICAgICAgblJvd3MrKzsKCSAgICAgICAgfQoJICAgICAgICB2YXIgbWF0cml4ID0gbmV3IEJpdE1hdHJpeChyb3dMZW5ndGgsIG5Sb3dzKTsKCSAgICAgICAgZm9yICh2YXIgaSA9IDA7IGkgPCBiaXRzUG9zOyBpKyspIHsKCSAgICAgICAgICAgIGlmIChiaXRzW2ldKSB7CgkgICAgICAgICAgICAgICAgbWF0cml4LnNldChNYXRoLmZsb29yKGkgJSByb3dMZW5ndGgpLCBNYXRoLmZsb29yKGkgLyByb3dMZW5ndGgpKTsKCSAgICAgICAgICAgIH0KCSAgICAgICAgfQoJICAgICAgICByZXR1cm4gbWF0cml4OwoJICAgIH07CgkgICAgLyoqCgkgICAgICogPHA+R2V0cyB0aGUgcmVxdWVzdGVkIGJpdCwgd2hlcmUgdHJ1ZSBtZWFucyBibGFjay48L3A+CgkgICAgICoKCSAgICAgKiBAcGFyYW0geCBUaGUgaG9yaXpvbnRhbCBjb21wb25lbnQgKGkuZS4gd2hpY2ggY29sdW1uKQoJICAgICAqIEBwYXJhbSB5IFRoZSB2ZXJ0aWNhbCBjb21wb25lbnQgKGkuZS4gd2hpY2ggcm93KQoJICAgICAqIEByZXR1cm4gdmFsdWUgb2YgZ2l2ZW4gYml0IGluIG1hdHJpeAoJICAgICAqLwoJICAgIEJpdE1hdHJpeC5wcm90b3R5cGUuZ2V0ID0gZnVuY3Rpb24gKHggLyppbnQqLywgeSAvKmludCovKSB7CgkgICAgICAgIHZhciBvZmZzZXQgPSB5ICogdGhpcy5yb3dTaXplICsgTWF0aC5mbG9vcih4IC8gMzIpOwoJICAgICAgICByZXR1cm4gKCh0aGlzLmJpdHNbb2Zmc2V0XSA+Pj4gKHggJiAweDFmKSkgJiAxKSAhPT0gMDsKCSAgICB9OwoJICAgIC8qKgoJICAgICAqIDxwPlNldHMgdGhlIGdpdmVuIGJpdCB0byB0cnVlLjwvcD4KCSAgICAgKgoJICAgICAqIEBwYXJhbSB4IFRoZSBob3Jpem9udGFsIGNvbXBvbmVudCAoaS5lLiB3aGljaCBjb2x1bW4pCgkgICAgICogQHBhcmFtIHkgVGhlIHZlcnRpY2FsIGNvbXBvbmVudCAoaS5lLiB3aGljaCByb3cpCgkgICAgICovCgkgICAgQml0TWF0cml4LnByb3RvdHlwZS5zZXQgPSBmdW5jdGlvbiAoeCAvKmludCovLCB5IC8qaW50Ki8pIHsKCSAgICAgICAgdmFyIG9mZnNldCA9IHkgKiB0aGlzLnJvd1NpemUgKyBNYXRoLmZsb29yKHggLyAzMik7CgkgICAgICAgIHRoaXMuYml0c1tvZmZzZXRdIHw9ICgxIDw8ICh4ICYgMHgxZikpICYgMHhGRkZGRkZGRjsKCSAgICB9OwoJICAgIEJpdE1hdHJpeC5wcm90b3R5cGUudW5zZXQgPSBmdW5jdGlvbiAoeCAvKmludCovLCB5IC8qaW50Ki8pIHsKCSAgICAgICAgdmFyIG9mZnNldCA9IHkgKiB0aGlzLnJvd1NpemUgKyBNYXRoLmZsb29yKHggLyAzMik7CgkgICAgICAgIHRoaXMuYml0c1tvZmZzZXRdICY9IH4oKDEgPDwgKHggJiAweDFmKSkgJiAweEZGRkZGRkZGKTsKCSAgICB9OwoJICAgIC8qKgoJICAgICAqIDxwPkZsaXBzIHRoZSBnaXZlbiBiaXQuPC9wPgoJICAgICAqCgkgICAgICogQHBhcmFtIHggVGhlIGhvcml6b250YWwgY29tcG9uZW50IChpLmUuIHdoaWNoIGNvbHVtbikKCSAgICAgKiBAcGFyYW0geSBUaGUgdmVydGljYWwgY29tcG9uZW50IChpLmUuIHdoaWNoIHJvdykKCSAgICAgKi8KCSAgICBCaXRNYXRyaXgucHJvdG90eXBlLmZsaXAgPSBmdW5jdGlvbiAoeCAvKmludCovLCB5IC8qaW50Ki8pIHsKCSAgICAgICAgdmFyIG9mZnNldCA9IHkgKiB0aGlzLnJvd1NpemUgKyBNYXRoLmZsb29yKHggLyAzMik7CgkgICAgICAgIHRoaXMuYml0c1tvZmZzZXRdIF49ICgoMSA8PCAoeCAmIDB4MWYpKSAmIDB4RkZGRkZGRkYpOwoJICAgIH07CgkgICAgLyoqCgkgICAgICogRXhjbHVzaXZlLW9yIChYT1IpOiBGbGlwIHRoZSBiaXQgaW4gdGhpcyB7QGNvZGUgQml0TWF0cml4fSBpZiB0aGUgY29ycmVzcG9uZGluZwoJICAgICAqIG1hc2sgYml0IGlzIHNldC4KCSAgICAgKgoJICAgICAqIEBwYXJhbSBtYXNrIFhPUiBtYXNrCgkgICAgICovCgkgICAgQml0TWF0cml4LnByb3RvdHlwZS54b3IgPSBmdW5jdGlvbiAobWFzaykgewoJICAgICAgICBpZiAodGhpcy53aWR0aCAhPT0gbWFzay5nZXRXaWR0aCgpIHx8IHRoaXMuaGVpZ2h0ICE9PSBtYXNrLmdldEhlaWdodCgpCgkgICAgICAgICAgICB8fCB0aGlzLnJvd1NpemUgIT09IG1hc2suZ2V0Um93U2l6ZSgpKSB7CgkgICAgICAgICAgICB0aHJvdyBuZXcgSWxsZWdhbEFyZ3VtZW50RXhjZXB0aW9uXzEkNy5kZWZhdWx0KCdpbnB1dCBtYXRyaXggZGltZW5zaW9ucyBkbyBub3QgbWF0Y2gnKTsKCSAgICAgICAgfQoJICAgICAgICB2YXIgcm93QXJyYXkgPSBuZXcgQml0QXJyYXlfMSQxLmRlZmF1bHQoTWF0aC5mbG9vcih0aGlzLndpZHRoIC8gMzIpICsgMSk7CgkgICAgICAgIHZhciByb3dTaXplID0gdGhpcy5yb3dTaXplOwoJICAgICAgICB2YXIgYml0cyA9IHRoaXMuYml0czsKCSAgICAgICAgZm9yICh2YXIgeSA9IDAsIGhlaWdodCA9IHRoaXMuaGVpZ2h0OyB5IDwgaGVpZ2h0OyB5KyspIHsKCSAgICAgICAgICAgIHZhciBvZmZzZXQgPSB5ICogcm93U2l6ZTsKCSAgICAgICAgICAgIHZhciByb3cgPSBtYXNrLmdldFJvdyh5LCByb3dBcnJheSkuZ2V0Qml0QXJyYXkoKTsKCSAgICAgICAgICAgIGZvciAodmFyIHggPSAwOyB4IDwgcm93U2l6ZTsgeCsrKSB7CgkgICAgICAgICAgICAgICAgYml0c1tvZmZzZXQgKyB4XSBePSByb3dbeF07CgkgICAgICAgICAgICB9CgkgICAgICAgIH0KCSAgICB9OwoJICAgIC8qKgoJICAgICAqIENsZWFycyBhbGwgYml0cyAoc2V0cyB0byBmYWxzZSkuCgkgICAgICovCgkgICAgQml0TWF0cml4LnByb3RvdHlwZS5jbGVhciA9IGZ1bmN0aW9uICgpIHsKCSAgICAgICAgdmFyIGJpdHMgPSB0aGlzLmJpdHM7CgkgICAgICAgIHZhciBtYXggPSBiaXRzLmxlbmd0aDsKCSAgICAgICAgZm9yICh2YXIgaSA9IDA7IGkgPCBtYXg7IGkrKykgewoJICAgICAgICAgICAgYml0c1tpXSA9IDA7CgkgICAgICAgIH0KCSAgICB9OwoJICAgIC8qKgoJICAgICAqIDxwPlNldHMgYSBzcXVhcmUgcmVnaW9uIG9mIHRoZSBiaXQgbWF0cml4IHRvIHRydWUuPC9wPgoJICAgICAqCgkgICAgICogQHBhcmFtIGxlZnQgVGhlIGhvcml6b250YWwgcG9zaXRpb24gdG8gYmVnaW4gYXQgKGluY2x1c2l2ZSkKCSAgICAgKiBAcGFyYW0gdG9wIFRoZSB2ZXJ0aWNhbCBwb3NpdGlvbiB0byBiZWdpbiBhdCAoaW5jbHVzaXZlKQoJICAgICAqIEBwYXJhbSB3aWR0aCBUaGUgd2lkdGggb2YgdGhlIHJlZ2lvbgoJICAgICAqIEBwYXJhbSBoZWlnaHQgVGhlIGhlaWdodCBvZiB0aGUgcmVnaW9uCgkgICAgICovCgkgICAgQml0TWF0cml4LnByb3RvdHlwZS5zZXRSZWdpb24gPSBmdW5jdGlvbiAobGVmdCAvKmludCovLCB0b3AgLyppbnQqLywgd2lkdGggLyppbnQqLywgaGVpZ2h0IC8qaW50Ki8pIHsKCSAgICAgICAgaWYgKHRvcCA8IDAgfHwgbGVmdCA8IDApIHsKCSAgICAgICAgICAgIHRocm93IG5ldyBJbGxlZ2FsQXJndW1lbnRFeGNlcHRpb25fMSQ3LmRlZmF1bHQoJ0xlZnQgYW5kIHRvcCBtdXN0IGJlIG5vbm5lZ2F0aXZlJyk7CgkgICAgICAgIH0KCSAgICAgICAgaWYgKGhlaWdodCA8IDEgfHwgd2lkdGggPCAxKSB7CgkgICAgICAgICAgICB0aHJvdyBuZXcgSWxsZWdhbEFyZ3VtZW50RXhjZXB0aW9uXzEkNy5kZWZhdWx0KCdIZWlnaHQgYW5kIHdpZHRoIG11c3QgYmUgYXQgbGVhc3QgMScpOwoJICAgICAgICB9CgkgICAgICAgIHZhciByaWdodCA9IGxlZnQgKyB3aWR0aDsKCSAgICAgICAgdmFyIGJvdHRvbSA9IHRvcCArIGhlaWdodDsKCSAgICAgICAgaWYgKGJvdHRvbSA+IHRoaXMuaGVpZ2h0IHx8IHJpZ2h0ID4gdGhpcy53aWR0aCkgewoJICAgICAgICAgICAgdGhyb3cgbmV3IElsbGVnYWxBcmd1bWVudEV4Y2VwdGlvbl8xJDcuZGVmYXVsdCgnVGhlIHJlZ2lvbiBtdXN0IGZpdCBpbnNpZGUgdGhlIG1hdHJpeCcpOwoJICAgICAgICB9CgkgICAgICAgIHZhciByb3dTaXplID0gdGhpcy5yb3dTaXplOwoJICAgICAgICB2YXIgYml0cyA9IHRoaXMuYml0czsKCSAgICAgICAgZm9yICh2YXIgeSA9IHRvcDsgeSA8IGJvdHRvbTsgeSsrKSB7CgkgICAgICAgICAgICB2YXIgb2Zmc2V0ID0geSAqIHJvd1NpemU7CgkgICAgICAgICAgICBmb3IgKHZhciB4ID0gbGVmdDsgeCA8IHJpZ2h0OyB4KyspIHsKCSAgICAgICAgICAgICAgICBiaXRzW29mZnNldCArIE1hdGguZmxvb3IoeCAvIDMyKV0gfD0gKCgxIDw8ICh4ICYgMHgxZikpICYgMHhGRkZGRkZGRik7CgkgICAgICAgICAgICB9CgkgICAgICAgIH0KCSAgICB9OwoJICAgIC8qKgoJICAgICAqIEEgZmFzdCBtZXRob2QgdG8gcmV0cmlldmUgb25lIHJvdyBvZiBkYXRhIGZyb20gdGhlIG1hdHJpeCBhcyBhIEJpdEFycmF5LgoJICAgICAqCgkgICAgICogQHBhcmFtIHkgVGhlIHJvdyB0byByZXRyaWV2ZQoJICAgICAqIEBwYXJhbSByb3cgQW4gb3B0aW9uYWwgY2FsbGVyLWFsbG9jYXRlZCBCaXRBcnJheSwgd2lsbCBiZSBhbGxvY2F0ZWQgaWYgbnVsbCBvciB0b28gc21hbGwKCSAgICAgKiBAcmV0dXJuIFRoZSByZXN1bHRpbmcgQml0QXJyYXkgLSB0aGlzIHJlZmVyZW5jZSBzaG91bGQgYWx3YXlzIGJlIHVzZWQgZXZlbiB3aGVuIHBhc3NpbmcKCSAgICAgKiAgICAgICAgIHlvdXIgb3duIHJvdwoJICAgICAqLwoJICAgIEJpdE1hdHJpeC5wcm90b3R5cGUuZ2V0Um93ID0gZnVuY3Rpb24gKHkgLyppbnQqLywgcm93KSB7CgkgICAgICAgIGlmIChyb3cgPT09IG51bGwgfHwgcm93ID09PSB1bmRlZmluZWQgfHwgcm93LmdldFNpemUoKSA8IHRoaXMud2lkdGgpIHsKCSAgICAgICAgICAgIHJvdyA9IG5ldyBCaXRBcnJheV8xJDEuZGVmYXVsdCh0aGlzLndpZHRoKTsKCSAgICAgICAgfQoJICAgICAgICBlbHNlIHsKCSAgICAgICAgICAgIHJvdy5jbGVhcigpOwoJICAgICAgICB9CgkgICAgICAgIHZhciByb3dTaXplID0gdGhpcy5yb3dTaXplOwoJICAgICAgICB2YXIgYml0cyA9IHRoaXMuYml0czsKCSAgICAgICAgdmFyIG9mZnNldCA9IHkgKiByb3dTaXplOwoJICAgICAgICBmb3IgKHZhciB4ID0gMDsgeCA8IHJvd1NpemU7IHgrKykgewoJICAgICAgICAgICAgcm93LnNldEJ1bGsoeCAqIDMyLCBiaXRzW29mZnNldCArIHhdKTsKCSAgICAgICAgfQoJICAgICAgICByZXR1cm4gcm93OwoJICAgIH07CgkgICAgLyoqCgkgICAgICogQHBhcmFtIHkgcm93IHRvIHNldAoJICAgICAqIEBwYXJhbSByb3cge0BsaW5rIEJpdEFycmF5fSB0byBjb3B5IGZyb20KCSAgICAgKi8KCSAgICBCaXRNYXRyaXgucHJvdG90eXBlLnNldFJvdyA9IGZ1bmN0aW9uICh5IC8qaW50Ki8sIHJvdykgewoJICAgICAgICBTeXN0ZW1fMSQzLmRlZmF1bHQuYXJyYXljb3B5KHJvdy5nZXRCaXRBcnJheSgpLCAwLCB0aGlzLmJpdHMsIHkgKiB0aGlzLnJvd1NpemUsIHRoaXMucm93U2l6ZSk7CgkgICAgfTsKCSAgICAvKioKCSAgICAgKiBNb2RpZmllcyB0aGlzIHtAY29kZSBCaXRNYXRyaXh9IHRvIHJlcHJlc2VudCB0aGUgc2FtZSBidXQgcm90YXRlZCAxODAgZGVncmVlcwoJICAgICAqLwoJICAgIEJpdE1hdHJpeC5wcm90b3R5cGUucm90YXRlMTgwID0gZnVuY3Rpb24gKCkgewoJICAgICAgICB2YXIgd2lkdGggPSB0aGlzLmdldFdpZHRoKCk7CgkgICAgICAgIHZhciBoZWlnaHQgPSB0aGlzLmdldEhlaWdodCgpOwoJICAgICAgICB2YXIgdG9wUm93ID0gbmV3IEJpdEFycmF5XzEkMS5kZWZhdWx0KHdpZHRoKTsKCSAgICAgICAgdmFyIGJvdHRvbVJvdyA9IG5ldyBCaXRBcnJheV8xJDEuZGVmYXVsdCh3aWR0aCk7CgkgICAgICAgIGZvciAodmFyIGkgPSAwLCBsZW5ndGhfMSA9IE1hdGguZmxvb3IoKGhlaWdodCArIDEpIC8gMik7IGkgPCBsZW5ndGhfMTsgaSsrKSB7CgkgICAgICAgICAgICB0b3BSb3cgPSB0aGlzLmdldFJvdyhpLCB0b3BSb3cpOwoJICAgICAgICAgICAgYm90dG9tUm93ID0gdGhpcy5nZXRSb3coaGVpZ2h0IC0gMSAtIGksIGJvdHRvbVJvdyk7CgkgICAgICAgICAgICB0b3BSb3cucmV2ZXJzZSgpOwoJICAgICAgICAgICAgYm90dG9tUm93LnJldmVyc2UoKTsKCSAgICAgICAgICAgIHRoaXMuc2V0Um93KGksIGJvdHRvbVJvdyk7CgkgICAgICAgICAgICB0aGlzLnNldFJvdyhoZWlnaHQgLSAxIC0gaSwgdG9wUm93KTsKCSAgICAgICAgfQoJICAgIH07CgkgICAgLyoqCgkgICAgICogVGhpcyBpcyB1c2VmdWwgaW4gZGV0ZWN0aW5nIHRoZSBlbmNsb3NpbmcgcmVjdGFuZ2xlIG9mIGEgJ3B1cmUnIGJhcmNvZGUuCgkgICAgICoKCSAgICAgKiBAcmV0dXJuIHtAY29kZSBsZWZ0LHRvcCx3aWR0aCxoZWlnaHR9IGVuY2xvc2luZyByZWN0YW5nbGUgb2YgYWxsIDEgYml0cywgb3IgbnVsbCBpZiBpdCBpcyBhbGwgd2hpdGUKCSAgICAgKi8KCSAgICBCaXRNYXRyaXgucHJvdG90eXBlLmdldEVuY2xvc2luZ1JlY3RhbmdsZSA9IGZ1bmN0aW9uICgpIHsKCSAgICAgICAgdmFyIHdpZHRoID0gdGhpcy53aWR0aDsKCSAgICAgICAgdmFyIGhlaWdodCA9IHRoaXMuaGVpZ2h0OwoJICAgICAgICB2YXIgcm93U2l6ZSA9IHRoaXMucm93U2l6ZTsKCSAgICAgICAgdmFyIGJpdHMgPSB0aGlzLmJpdHM7CgkgICAgICAgIHZhciBsZWZ0ID0gd2lkdGg7CgkgICAgICAgIHZhciB0b3AgPSBoZWlnaHQ7CgkgICAgICAgIHZhciByaWdodCA9IC0xOwoJICAgICAgICB2YXIgYm90dG9tID0gLTE7CgkgICAgICAgIGZvciAodmFyIHkgPSAwOyB5IDwgaGVpZ2h0OyB5KyspIHsKCSAgICAgICAgICAgIGZvciAodmFyIHgzMiA9IDA7IHgzMiA8IHJvd1NpemU7IHgzMisrKSB7CgkgICAgICAgICAgICAgICAgdmFyIHRoZUJpdHMgPSBiaXRzW3kgKiByb3dTaXplICsgeDMyXTsKCSAgICAgICAgICAgICAgICBpZiAodGhlQml0cyAhPT0gMCkgewoJICAgICAgICAgICAgICAgICAgICBpZiAoeSA8IHRvcCkgewoJICAgICAgICAgICAgICAgICAgICAgICAgdG9wID0geTsKCSAgICAgICAgICAgICAgICAgICAgfQoJICAgICAgICAgICAgICAgICAgICBpZiAoeSA+IGJvdHRvbSkgewoJICAgICAgICAgICAgICAgICAgICAgICAgYm90dG9tID0geTsKCSAgICAgICAgICAgICAgICAgICAgfQoJICAgICAgICAgICAgICAgICAgICBpZiAoeDMyICogMzIgPCBsZWZ0KSB7CgkgICAgICAgICAgICAgICAgICAgICAgICB2YXIgYml0ID0gMDsKCSAgICAgICAgICAgICAgICAgICAgICAgIHdoaWxlICgoKHRoZUJpdHMgPDwgKDMxIC0gYml0KSkgJiAweEZGRkZGRkZGKSA9PT0gMCkgewoJICAgICAgICAgICAgICAgICAgICAgICAgICAgIGJpdCsrOwoJICAgICAgICAgICAgICAgICAgICAgICAgfQoJICAgICAgICAgICAgICAgICAgICAgICAgaWYgKCh4MzIgKiAzMiArIGJpdCkgPCBsZWZ0KSB7CgkgICAgICAgICAgICAgICAgICAgICAgICAgICAgbGVmdCA9IHgzMiAqIDMyICsgYml0OwoJICAgICAgICAgICAgICAgICAgICAgICAgfQoJICAgICAgICAgICAgICAgICAgICB9CgkgICAgICAgICAgICAgICAgICAgIGlmICh4MzIgKiAzMiArIDMxID4gcmlnaHQpIHsKCSAgICAgICAgICAgICAgICAgICAgICAgIHZhciBiaXQgPSAzMTsKCSAgICAgICAgICAgICAgICAgICAgICAgIHdoaWxlICgodGhlQml0cyA+Pj4gYml0KSA9PT0gMCkgewoJICAgICAgICAgICAgICAgICAgICAgICAgICAgIGJpdC0tOwoJICAgICAgICAgICAgICAgICAgICAgICAgfQoJICAgICAgICAgICAgICAgICAgICAgICAgaWYgKCh4MzIgKiAzMiArIGJpdCkgPiByaWdodCkgewoJICAgICAgICAgICAgICAgICAgICAgICAgICAgIHJpZ2h0ID0geDMyICogMzIgKyBiaXQ7CgkgICAgICAgICAgICAgICAgICAgICAgICB9CgkgICAgICAgICAgICAgICAgICAgIH0KCSAgICAgICAgICAgICAgICB9CgkgICAgICAgICAgICB9CgkgICAgICAgIH0KCSAgICAgICAgaWYgKHJpZ2h0IDwgbGVmdCB8fCBib3R0b20gPCB0b3ApIHsKCSAgICAgICAgICAgIHJldHVybiBudWxsOwoJICAgICAgICB9CgkgICAgICAgIHJldHVybiBJbnQzMkFycmF5LmZyb20oW2xlZnQsIHRvcCwgcmlnaHQgLSBsZWZ0ICsgMSwgYm90dG9tIC0gdG9wICsgMV0pOwoJICAgIH07CgkgICAgLyoqCgkgICAgICogVGhpcyBpcyB1c2VmdWwgaW4gZGV0ZWN0aW5nIGEgY29ybmVyIG9mIGEgJ3B1cmUnIGJhcmNvZGUuCgkgICAgICoKCSAgICAgKiBAcmV0dXJuIHtAY29kZSB4LHl9IGNvb3JkaW5hdGUgb2YgdG9wLWxlZnQtbW9zdCAxIGJpdCwgb3IgbnVsbCBpZiBpdCBpcyBhbGwgd2hpdGUKCSAgICAgKi8KCSAgICBCaXRNYXRyaXgucHJvdG90eXBlLmdldFRvcExlZnRPbkJpdCA9IGZ1bmN0aW9uICgpIHsKCSAgICAgICAgdmFyIHJvd1NpemUgPSB0aGlzLnJvd1NpemU7CgkgICAgICAgIHZhciBiaXRzID0gdGhpcy5iaXRzOwoJICAgICAgICB2YXIgYml0c09mZnNldCA9IDA7CgkgICAgICAgIHdoaWxlIChiaXRzT2Zmc2V0IDwgYml0cy5sZW5ndGggJiYgYml0c1tiaXRzT2Zmc2V0XSA9PT0gMCkgewoJICAgICAgICAgICAgYml0c09mZnNldCsrOwoJICAgICAgICB9CgkgICAgICAgIGlmIChiaXRzT2Zmc2V0ID09PSBiaXRzLmxlbmd0aCkgewoJICAgICAgICAgICAgcmV0dXJuIG51bGw7CgkgICAgICAgIH0KCSAgICAgICAgdmFyIHkgPSBiaXRzT2Zmc2V0IC8gcm93U2l6ZTsKCSAgICAgICAgdmFyIHggPSAoYml0c09mZnNldCAlIHJvd1NpemUpICogMzI7CgkgICAgICAgIHZhciB0aGVCaXRzID0gYml0c1tiaXRzT2Zmc2V0XTsKCSAgICAgICAgdmFyIGJpdCA9IDA7CgkgICAgICAgIHdoaWxlICgoKHRoZUJpdHMgPDwgKDMxIC0gYml0KSkgJiAweEZGRkZGRkZGKSA9PT0gMCkgewoJICAgICAgICAgICAgYml0Kys7CgkgICAgICAgIH0KCSAgICAgICAgeCArPSBiaXQ7CgkgICAgICAgIHJldHVybiBJbnQzMkFycmF5LmZyb20oW3gsIHldKTsKCSAgICB9OwoJICAgIEJpdE1hdHJpeC5wcm90b3R5cGUuZ2V0Qm90dG9tUmlnaHRPbkJpdCA9IGZ1bmN0aW9uICgpIHsKCSAgICAgICAgdmFyIHJvd1NpemUgPSB0aGlzLnJvd1NpemU7CgkgICAgICAgIHZhciBiaXRzID0gdGhpcy5iaXRzOwoJICAgICAgICB2YXIgYml0c09mZnNldCA9IGJpdHMubGVuZ3RoIC0gMTsKCSAgICAgICAgd2hpbGUgKGJpdHNPZmZzZXQgPj0gMCAmJiBiaXRzW2JpdHNPZmZzZXRdID09PSAwKSB7CgkgICAgICAgICAgICBiaXRzT2Zmc2V0LS07CgkgICAgICAgIH0KCSAgICAgICAgaWYgKGJpdHNPZmZzZXQgPCAwKSB7CgkgICAgICAgICAgICByZXR1cm4gbnVsbDsKCSAgICAgICAgfQoJICAgICAgICB2YXIgeSA9IE1hdGguZmxvb3IoYml0c09mZnNldCAvIHJvd1NpemUpOwoJICAgICAgICB2YXIgeCA9IE1hdGguZmxvb3IoYml0c09mZnNldCAlIHJvd1NpemUpICogMzI7CgkgICAgICAgIHZhciB0aGVCaXRzID0gYml0c1tiaXRzT2Zmc2V0XTsKCSAgICAgICAgdmFyIGJpdCA9IDMxOwoJICAgICAgICB3aGlsZSAoKHRoZUJpdHMgPj4+IGJpdCkgPT09IDApIHsKCSAgICAgICAgICAgIGJpdC0tOwoJICAgICAgICB9CgkgICAgICAgIHggKz0gYml0OwoJICAgICAgICByZXR1cm4gSW50MzJBcnJheS5mcm9tKFt4LCB5XSk7CgkgICAgfTsKCSAgICAvKioKCSAgICAgKiBAcmV0dXJuIFRoZSB3aWR0aCBvZiB0aGUgbWF0cml4CgkgICAgICovCgkgICAgQml0TWF0cml4LnByb3RvdHlwZS5nZXRXaWR0aCA9IGZ1bmN0aW9uICgpIHsKCSAgICAgICAgcmV0dXJuIHRoaXMud2lkdGg7CgkgICAgfTsKCSAgICAvKioKCSAgICAgKiBAcmV0dXJuIFRoZSBoZWlnaHQgb2YgdGhlIG1hdHJpeAoJICAgICAqLwoJICAgIEJpdE1hdHJpeC5wcm90b3R5cGUuZ2V0SGVpZ2h0ID0gZnVuY3Rpb24gKCkgewoJICAgICAgICByZXR1cm4gdGhpcy5oZWlnaHQ7CgkgICAgfTsKCSAgICAvKioKCSAgICAgKiBAcmV0dXJuIFRoZSByb3cgc2l6ZSBvZiB0aGUgbWF0cml4CgkgICAgICovCgkgICAgQml0TWF0cml4LnByb3RvdHlwZS5nZXRSb3dTaXplID0gZnVuY3Rpb24gKCkgewoJICAgICAgICByZXR1cm4gdGhpcy5yb3dTaXplOwoJICAgIH07CgkgICAgLypAT3ZlcnJpZGUqLwoJICAgIEJpdE1hdHJpeC5wcm90b3R5cGUuZXF1YWxzID0gZnVuY3Rpb24gKG8pIHsKCSAgICAgICAgaWYgKCEobyBpbnN0YW5jZW9mIEJpdE1hdHJpeCkpIHsKCSAgICAgICAgICAgIHJldHVybiBmYWxzZTsKCSAgICAgICAgfQoJICAgICAgICB2YXIgb3RoZXIgPSBvOwoJICAgICAgICByZXR1cm4gdGhpcy53aWR0aCA9PT0gb3RoZXIud2lkdGggJiYgdGhpcy5oZWlnaHQgPT09IG90aGVyLmhlaWdodCAmJiB0aGlzLnJvd1NpemUgPT09IG90aGVyLnJvd1NpemUgJiYKCSAgICAgICAgICAgIEFycmF5c18xLmRlZmF1bHQuZXF1YWxzKHRoaXMuYml0cywgb3RoZXIuYml0cyk7CgkgICAgfTsKCSAgICAvKkBPdmVycmlkZSovCgkgICAgQml0TWF0cml4LnByb3RvdHlwZS5oYXNoQ29kZSA9IGZ1bmN0aW9uICgpIHsKCSAgICAgICAgdmFyIGhhc2ggPSB0aGlzLndpZHRoOwoJICAgICAgICBoYXNoID0gMzEgKiBoYXNoICsgdGhpcy53aWR0aDsKCSAgICAgICAgaGFzaCA9IDMxICogaGFzaCArIHRoaXMuaGVpZ2h0OwoJICAgICAgICBoYXNoID0gMzEgKiBoYXNoICsgdGhpcy5yb3dTaXplOwoJICAgICAgICBoYXNoID0gMzEgKiBoYXNoICsgQXJyYXlzXzEuZGVmYXVsdC5oYXNoQ29kZSh0aGlzLmJpdHMpOwoJICAgICAgICByZXR1cm4gaGFzaDsKCSAgICB9OwoJICAgIC8qKgoJICAgICAqIEByZXR1cm4gc3RyaW5nIHJlcHJlc2VudGF0aW9uIHVzaW5nICJYIiBmb3Igc2V0IGFuZCAiICIgZm9yIHVuc2V0IGJpdHMKCSAgICAgKi8KCSAgICAvKkBPdmVycmlkZSovCgkgICAgLy8gcHVibGljIHRvU3RyaW5nKCk6IHN0cmluZyB7CgkgICAgLy8gICByZXR1cm4gdG9TdHJpbmcoIjogIlgsICIgICIpCgkgICAgLy8gfQoJICAgIC8qKgoJICAgICAqIEBwYXJhbSBzZXRTdHJpbmcgcmVwcmVzZW50YXRpb24gb2YgYSBzZXQgYml0CgkgICAgICogQHBhcmFtIHVuc2V0U3RyaW5nIHJlcHJlc2VudGF0aW9uIG9mIGFuIHVuc2V0IGJpdAoJICAgICAqIEByZXR1cm4gc3RyaW5nIHJlcHJlc2VudGF0aW9uIG9mIGVudGlyZSBtYXRyaXggdXRpbGl6aW5nIGdpdmVuIHN0cmluZ3MKCSAgICAgKi8KCSAgICAvLyBwdWJsaWMgdG9TdHJpbmcoc2V0U3RyaW5nOiBzdHJpbmcgPSAiWCAiLCB1bnNldFN0cmluZzogc3RyaW5nID0gIiAgIik6IHN0cmluZyB7CgkgICAgLy8gICByZXR1cm4gdGhpcy5idWlsZFRvU3RyaW5nKHNldFN0cmluZywgdW5zZXRTdHJpbmcsICJcbiIpCgkgICAgLy8gfQoJICAgIC8qKgoJICAgICAqIEBwYXJhbSBzZXRTdHJpbmcgcmVwcmVzZW50YXRpb24gb2YgYSBzZXQgYml0CgkgICAgICogQHBhcmFtIHVuc2V0U3RyaW5nIHJlcHJlc2VudGF0aW9uIG9mIGFuIHVuc2V0IGJpdAoJICAgICAqIEBwYXJhbSBsaW5lU2VwYXJhdG9yIG5ld2xpbmUgY2hhcmFjdGVyIGluIHN0cmluZyByZXByZXNlbnRhdGlvbgoJICAgICAqIEByZXR1cm4gc3RyaW5nIHJlcHJlc2VudGF0aW9uIG9mIGVudGlyZSBtYXRyaXggdXRpbGl6aW5nIGdpdmVuIHN0cmluZ3MgYW5kIGxpbmUgc2VwYXJhdG9yCgkgICAgICogQGRlcHJlY2F0ZWQgY2FsbCB7QGxpbmsgI3RvU3RyaW5nKFN0cmluZyxTdHJpbmcpfSBvbmx5LCB3aGljaCB1c2VzIFxuIGxpbmUgc2VwYXJhdG9yIGFsd2F5cwoJICAgICAqLwoJICAgIC8vIEBEZXByZWNhdGVkCgkgICAgQml0TWF0cml4LnByb3RvdHlwZS50b1N0cmluZyA9IGZ1bmN0aW9uIChzZXRTdHJpbmcsIHVuc2V0U3RyaW5nLCBsaW5lU2VwYXJhdG9yKSB7CgkgICAgICAgIGlmIChzZXRTdHJpbmcgPT09IHZvaWQgMCkgeyBzZXRTdHJpbmcgPSAnWCAnOyB9CgkgICAgICAgIGlmICh1bnNldFN0cmluZyA9PT0gdm9pZCAwKSB7IHVuc2V0U3RyaW5nID0gJyAgJzsgfQoJICAgICAgICBpZiAobGluZVNlcGFyYXRvciA9PT0gdm9pZCAwKSB7IGxpbmVTZXBhcmF0b3IgPSAnXG4nOyB9CgkgICAgICAgIHJldHVybiB0aGlzLmJ1aWxkVG9TdHJpbmcoc2V0U3RyaW5nLCB1bnNldFN0cmluZywgbGluZVNlcGFyYXRvcik7CgkgICAgfTsKCSAgICBCaXRNYXRyaXgucHJvdG90eXBlLmJ1aWxkVG9TdHJpbmcgPSBmdW5jdGlvbiAoc2V0U3RyaW5nLCB1bnNldFN0cmluZywgbGluZVNlcGFyYXRvcikgewoJICAgICAgICB2YXIgcmVzdWx0ID0gbmV3IFN0cmluZ0J1aWxkZXJfMSQyLmRlZmF1bHQoKTsKCSAgICAgICAgLy8gcmVzdWx0LmFwcGVuZChsaW5lU2VwYXJhdG9yKTsKCSAgICAgICAgZm9yICh2YXIgeSA9IDAsIGhlaWdodCA9IHRoaXMuaGVpZ2h0OyB5IDwgaGVpZ2h0OyB5KyspIHsKCSAgICAgICAgICAgIGZvciAodmFyIHggPSAwLCB3aWR0aCA9IHRoaXMud2lkdGg7IHggPCB3aWR0aDsgeCsrKSB7CgkgICAgICAgICAgICAgICAgcmVzdWx0LmFwcGVuZCh0aGlzLmdldCh4LCB5KSA/IHNldFN0cmluZyA6IHVuc2V0U3RyaW5nKTsKCSAgICAgICAgICAgIH0KCSAgICAgICAgICAgIHJlc3VsdC5hcHBlbmQobGluZVNlcGFyYXRvcik7CgkgICAgICAgIH0KCSAgICAgICAgcmV0dXJuIHJlc3VsdC50b1N0cmluZygpOwoJICAgIH07CgkgICAgLypAT3ZlcnJpZGUqLwoJICAgIEJpdE1hdHJpeC5wcm90b3R5cGUuY2xvbmUgPSBmdW5jdGlvbiAoKSB7CgkgICAgICAgIHJldHVybiBuZXcgQml0TWF0cml4KHRoaXMud2lkdGgsIHRoaXMuaGVpZ2h0LCB0aGlzLnJvd1NpemUsIHRoaXMuYml0cy5zbGljZSgpKTsKCSAgICB9OwoJICAgIHJldHVybiBCaXRNYXRyaXg7Cgl9KCkpOwoJQml0TWF0cml4JDEuZGVmYXVsdCA9IEJpdE1hdHJpeDsKCgl2YXIgTm90Rm91bmRFeGNlcHRpb24kMSA9IHt9OwoKCXZhciBfX2V4dGVuZHMkZCA9IChjb21tb25qc0dsb2JhbCAmJiBjb21tb25qc0dsb2JhbC5fX2V4dGVuZHMpIHx8IChmdW5jdGlvbiAoKSB7CgkgICAgdmFyIGV4dGVuZFN0YXRpY3MgPSBmdW5jdGlvbiAoZCwgYikgewoJICAgICAgICBleHRlbmRTdGF0aWNzID0gT2JqZWN0LnNldFByb3RvdHlwZU9mIHx8CgkgICAgICAgICAgICAoeyBfX3Byb3RvX186IFtdIH0gaW5zdGFuY2VvZiBBcnJheSAmJiBmdW5jdGlvbiAoZCwgYikgeyBkLl9fcHJvdG9fXyA9IGI7IH0pIHx8CgkgICAgICAgICAgICBmdW5jdGlvbiAoZCwgYikgeyBmb3IgKHZhciBwIGluIGIpIGlmIChiLmhhc093blByb3BlcnR5KHApKSBkW3BdID0gYltwXTsgfTsKCSAgICAgICAgcmV0dXJuIGV4dGVuZFN0YXRpY3MoZCwgYik7CgkgICAgfTsKCSAgICByZXR1cm4gZnVuY3Rpb24gKGQsIGIpIHsKCSAgICAgICAgZXh0ZW5kU3RhdGljcyhkLCBiKTsKCSAgICAgICAgZnVuY3Rpb24gX18oKSB7IHRoaXMuY29uc3RydWN0b3IgPSBkOyB9CgkgICAgICAgIGQucHJvdG90eXBlID0gYiA9PT0gbnVsbCA/IE9iamVjdC5jcmVhdGUoYikgOiAoX18ucHJvdG90eXBlID0gYi5wcm90b3R5cGUsIG5ldyBfXygpKTsKCSAgICB9OwoJfSkoKTsKCU9iamVjdC5kZWZpbmVQcm9wZXJ0eShOb3RGb3VuZEV4Y2VwdGlvbiQxLCAiX19lc01vZHVsZSIsIHsgdmFsdWU6IHRydWUgfSk7Cgl2YXIgRXhjZXB0aW9uXzEkNSA9IEV4Y2VwdGlvbiQxOwoJLyoqCgkgKiBDdXN0b20gRXJyb3IgY2xhc3Mgb2YgdHlwZSBFeGNlcHRpb24uCgkgKi8KCXZhciBOb3RGb3VuZEV4Y2VwdGlvbiA9IC8qKiBAY2xhc3MgKi8gKGZ1bmN0aW9uIChfc3VwZXIpIHsKCSAgICBfX2V4dGVuZHMkZChOb3RGb3VuZEV4Y2VwdGlvbiwgX3N1cGVyKTsKCSAgICBmdW5jdGlvbiBOb3RGb3VuZEV4Y2VwdGlvbigpIHsKCSAgICAgICAgcmV0dXJuIF9zdXBlciAhPT0gbnVsbCAmJiBfc3VwZXIuYXBwbHkodGhpcywgYXJndW1lbnRzKSB8fCB0aGlzOwoJICAgIH0KCSAgICBOb3RGb3VuZEV4Y2VwdGlvbi5nZXROb3RGb3VuZEluc3RhbmNlID0gZnVuY3Rpb24gKCkgewoJICAgICAgICByZXR1cm4gbmV3IE5vdEZvdW5kRXhjZXB0aW9uKCk7CgkgICAgfTsKCSAgICBOb3RGb3VuZEV4Y2VwdGlvbi5raW5kID0gJ05vdEZvdW5kRXhjZXB0aW9uJzsKCSAgICByZXR1cm4gTm90Rm91bmRFeGNlcHRpb247Cgl9KEV4Y2VwdGlvbl8xJDUuZGVmYXVsdCkpOwoJTm90Rm91bmRFeGNlcHRpb24kMS5kZWZhdWx0ID0gTm90Rm91bmRFeGNlcHRpb247CgoJLyoKCSAqIENvcHlyaWdodCAyMDA5IFpYaW5nIGF1dGhvcnMKCSAqCgkgKiBMaWNlbnNlZCB1bmRlciB0aGUgQXBhY2hlIExpY2Vuc2UsIFZlcnNpb24gMi4wICh0aGUgIkxpY2Vuc2UiKTsKCSAqIHlvdSBtYXkgbm90IHVzZSB0aGlzIGZpbGUgZXhjZXB0IGluIGNvbXBsaWFuY2Ugd2l0aCB0aGUgTGljZW5zZS4KCSAqIFlvdSBtYXkgb2J0YWluIGEgY29weSBvZiB0aGUgTGljZW5zZSBhdAoJICoKCSAqICAgICAgaHR0cDovL3d3dy5hcGFjaGUub3JnL2xpY2Vuc2VzL0xJQ0VOU0UtMi4wCgkgKgoJICogVW5sZXNzIHJlcXVpcmVkIGJ5IGFwcGxpY2FibGUgbGF3IG9yIGFncmVlZCB0byBpbiB3cml0aW5nLCBzb2Z0d2FyZQoJICogZGlzdHJpYnV0ZWQgdW5kZXIgdGhlIExpY2Vuc2UgaXMgZGlzdHJpYnV0ZWQgb24gYW4gIkFTIElTIiBCQVNJUywKCSAqIFdJVEhPVVQgV0FSUkFOVElFUyBPUiBDT05ESVRJT05TIE9GIEFOWSBLSU5ELCBlaXRoZXIgZXhwcmVzcyBvciBpbXBsaWVkLgoJICogU2VlIHRoZSBMaWNlbnNlIGZvciB0aGUgc3BlY2lmaWMgbGFuZ3VhZ2UgZ292ZXJuaW5nIHBlcm1pc3Npb25zIGFuZAoJICogbGltaXRhdGlvbnMgdW5kZXIgdGhlIExpY2Vuc2UuCgkgKi8KCXZhciBfX2V4dGVuZHMkYyA9IChjb21tb25qc0dsb2JhbCAmJiBjb21tb25qc0dsb2JhbC5fX2V4dGVuZHMpIHx8IChmdW5jdGlvbiAoKSB7CgkgICAgdmFyIGV4dGVuZFN0YXRpY3MgPSBmdW5jdGlvbiAoZCwgYikgewoJICAgICAgICBleHRlbmRTdGF0aWNzID0gT2JqZWN0LnNldFByb3RvdHlwZU9mIHx8CgkgICAgICAgICAgICAoeyBfX3Byb3RvX186IFtdIH0gaW5zdGFuY2VvZiBBcnJheSAmJiBmdW5jdGlvbiAoZCwgYikgeyBkLl9fcHJvdG9fXyA9IGI7IH0pIHx8CgkgICAgICAgICAgICBmdW5jdGlvbiAoZCwgYikgeyBmb3IgKHZhciBwIGluIGIpIGlmIChiLmhhc093blByb3BlcnR5KHApKSBkW3BdID0gYltwXTsgfTsKCSAgICAgICAgcmV0dXJuIGV4dGVuZFN0YXRpY3MoZCwgYik7CgkgICAgfTsKCSAgICByZXR1cm4gZnVuY3Rpb24gKGQsIGIpIHsKCSAgICAgICAgZXh0ZW5kU3RhdGljcyhkLCBiKTsKCSAgICAgICAgZnVuY3Rpb24gX18oKSB7IHRoaXMuY29uc3RydWN0b3IgPSBkOyB9CgkgICAgICAgIGQucHJvdG90eXBlID0gYiA9PT0gbnVsbCA/IE9iamVjdC5jcmVhdGUoYikgOiAoX18ucHJvdG90eXBlID0gYi5wcm90b3R5cGUsIG5ldyBfXygpKTsKCSAgICB9OwoJfSkoKTsKCU9iamVjdC5kZWZpbmVQcm9wZXJ0eShHbG9iYWxIaXN0b2dyYW1CaW5hcml6ZXIkMSwgIl9fZXNNb2R1bGUiLCB7IHZhbHVlOiB0cnVlIH0pOwoJLypuYW1lc3BhY2UgY29tLmdvb2dsZS56eGluZy5jb21tb24geyovCgl2YXIgQmluYXJpemVyXzEgPSBCaW5hcml6ZXIkMTsKCXZhciBCaXRBcnJheV8xID0gQml0QXJyYXkkMTsKCXZhciBCaXRNYXRyaXhfMSQ1ID0gQml0TWF0cml4JDE7Cgl2YXIgTm90Rm91bmRFeGNlcHRpb25fMSQ2ID0gTm90Rm91bmRFeGNlcHRpb24kMTsKCS8qKgoJICogVGhpcyBCaW5hcml6ZXIgaW1wbGVtZW50YXRpb24gdXNlcyB0aGUgb2xkIFpYaW5nIGdsb2JhbCBoaXN0b2dyYW0gYXBwcm9hY2guIEl0IGlzIHN1aXRhYmxlCgkgKiBmb3IgbG93LWVuZCBtb2JpbGUgZGV2aWNlcyB3aGljaCBkb24ndCBoYXZlIGVub3VnaCBDUFUgb3IgbWVtb3J5IHRvIHVzZSBhIGxvY2FsIHRocmVzaG9sZGluZwoJICogYWxnb3JpdGhtLiBIb3dldmVyLCBiZWNhdXNlIGl0IHBpY2tzIGEgZ2xvYmFsIGJsYWNrIHBvaW50LCBpdCBjYW5ub3QgaGFuZGxlIGRpZmZpY3VsdCBzaGFkb3dzCgkgKiBhbmQgZ3JhZGllbnRzLgoJICoKCSAqIEZhc3RlciBtb2JpbGUgZGV2aWNlcyBhbmQgYWxsIGRlc2t0b3AgYXBwbGljYXRpb25zIHNob3VsZCBwcm9iYWJseSB1c2UgSHlicmlkQmluYXJpemVyIGluc3RlYWQuCgkgKgoJICogQGF1dGhvciBkc3dpdGtpbkBnb29nbGUuY29tIChEYW5pZWwgU3dpdGtpbikKCSAqIEBhdXRob3IgU2VhbiBPd2VuCgkgKi8KCXZhciBHbG9iYWxIaXN0b2dyYW1CaW5hcml6ZXIgPSAvKiogQGNsYXNzICovIChmdW5jdGlvbiAoX3N1cGVyKSB7CgkgICAgX19leHRlbmRzJGMoR2xvYmFsSGlzdG9ncmFtQmluYXJpemVyLCBfc3VwZXIpOwoJICAgIGZ1bmN0aW9uIEdsb2JhbEhpc3RvZ3JhbUJpbmFyaXplcihzb3VyY2UpIHsKCSAgICAgICAgdmFyIF90aGlzID0gX3N1cGVyLmNhbGwodGhpcywgc291cmNlKSB8fCB0aGlzOwoJICAgICAgICBfdGhpcy5sdW1pbmFuY2VzID0gR2xvYmFsSGlzdG9ncmFtQmluYXJpemVyLkVNUFRZOwoJICAgICAgICBfdGhpcy5idWNrZXRzID0gbmV3IEludDMyQXJyYXkoR2xvYmFsSGlzdG9ncmFtQmluYXJpemVyLkxVTUlOQU5DRV9CVUNLRVRTKTsKCSAgICAgICAgcmV0dXJuIF90aGlzOwoJICAgIH0KCSAgICAvLyBBcHBsaWVzIHNpbXBsZSBzaGFycGVuaW5nIHRvIHRoZSByb3cgZGF0YSB0byBpbXByb3ZlIHBlcmZvcm1hbmNlIG9mIHRoZSAxRCBSZWFkZXJzLgoJICAgIC8qQE92ZXJyaWRlKi8KCSAgICBHbG9iYWxIaXN0b2dyYW1CaW5hcml6ZXIucHJvdG90eXBlLmdldEJsYWNrUm93ID0gZnVuY3Rpb24gKHkgLyppbnQqLywgcm93KSB7CgkgICAgICAgIHZhciBzb3VyY2UgPSB0aGlzLmdldEx1bWluYW5jZVNvdXJjZSgpOwoJICAgICAgICB2YXIgd2lkdGggPSBzb3VyY2UuZ2V0V2lkdGgoKTsKCSAgICAgICAgaWYgKHJvdyA9PT0gdW5kZWZpbmVkIHx8IHJvdyA9PT0gbnVsbCB8fCByb3cuZ2V0U2l6ZSgpIDwgd2lkdGgpIHsKCSAgICAgICAgICAgIHJvdyA9IG5ldyBCaXRBcnJheV8xLmRlZmF1bHQod2lkdGgpOwoJICAgICAgICB9CgkgICAgICAgIGVsc2UgewoJICAgICAgICAgICAgcm93LmNsZWFyKCk7CgkgICAgICAgIH0KCSAgICAgICAgdGhpcy5pbml0QXJyYXlzKHdpZHRoKTsKCSAgICAgICAgdmFyIGxvY2FsTHVtaW5hbmNlcyA9IHNvdXJjZS5nZXRSb3coeSwgdGhpcy5sdW1pbmFuY2VzKTsKCSAgICAgICAgdmFyIGxvY2FsQnVja2V0cyA9IHRoaXMuYnVja2V0czsKCSAgICAgICAgZm9yICh2YXIgeCA9IDA7IHggPCB3aWR0aDsgeCsrKSB7CgkgICAgICAgICAgICBsb2NhbEJ1Y2tldHNbKGxvY2FsTHVtaW5hbmNlc1t4XSAmIDB4ZmYpID4+IEdsb2JhbEhpc3RvZ3JhbUJpbmFyaXplci5MVU1JTkFOQ0VfU0hJRlRdKys7CgkgICAgICAgIH0KCSAgICAgICAgdmFyIGJsYWNrUG9pbnQgPSBHbG9iYWxIaXN0b2dyYW1CaW5hcml6ZXIuZXN0aW1hdGVCbGFja1BvaW50KGxvY2FsQnVja2V0cyk7CgkgICAgICAgIGlmICh3aWR0aCA8IDMpIHsKCSAgICAgICAgICAgIC8vIFNwZWNpYWwgY2FzZSBmb3IgdmVyeSBzbWFsbCBpbWFnZXMKCSAgICAgICAgICAgIGZvciAodmFyIHggPSAwOyB4IDwgd2lkdGg7IHgrKykgewoJICAgICAgICAgICAgICAgIGlmICgobG9jYWxMdW1pbmFuY2VzW3hdICYgMHhmZikgPCBibGFja1BvaW50KSB7CgkgICAgICAgICAgICAgICAgICAgIHJvdy5zZXQoeCk7CgkgICAgICAgICAgICAgICAgfQoJICAgICAgICAgICAgfQoJICAgICAgICB9CgkgICAgICAgIGVsc2UgewoJICAgICAgICAgICAgdmFyIGxlZnQgPSBsb2NhbEx1bWluYW5jZXNbMF0gJiAweGZmOwoJICAgICAgICAgICAgdmFyIGNlbnRlciA9IGxvY2FsTHVtaW5hbmNlc1sxXSAmIDB4ZmY7CgkgICAgICAgICAgICBmb3IgKHZhciB4ID0gMTsgeCA8IHdpZHRoIC0gMTsgeCsrKSB7CgkgICAgICAgICAgICAgICAgdmFyIHJpZ2h0ID0gbG9jYWxMdW1pbmFuY2VzW3ggKyAxXSAmIDB4ZmY7CgkgICAgICAgICAgICAgICAgLy8gQSBzaW1wbGUgLTEgNCAtMSBib3ggZmlsdGVyIHdpdGggYSB3ZWlnaHQgb2YgMi4KCSAgICAgICAgICAgICAgICBpZiAoKChjZW50ZXIgKiA0KSAtIGxlZnQgLSByaWdodCkgLyAyIDwgYmxhY2tQb2ludCkgewoJICAgICAgICAgICAgICAgICAgICByb3cuc2V0KHgpOwoJICAgICAgICAgICAgICAgIH0KCSAgICAgICAgICAgICAgICBsZWZ0ID0gY2VudGVyOwoJICAgICAgICAgICAgICAgIGNlbnRlciA9IHJpZ2h0OwoJICAgICAgICAgICAgfQoJICAgICAgICB9CgkgICAgICAgIHJldHVybiByb3c7CgkgICAgfTsKCSAgICAvLyBEb2VzIG5vdCBzaGFycGVuIHRoZSBkYXRhLCBhcyB0aGlzIGNhbGwgaXMgaW50ZW5kZWQgdG8gb25seSBiZSB1c2VkIGJ5IDJEIFJlYWRlcnMuCgkgICAgLypAT3ZlcnJpZGUqLwoJICAgIEdsb2JhbEhpc3RvZ3JhbUJpbmFyaXplci5wcm90b3R5cGUuZ2V0QmxhY2tNYXRyaXggPSBmdW5jdGlvbiAoKSB7CgkgICAgICAgIHZhciBzb3VyY2UgPSB0aGlzLmdldEx1bWluYW5jZVNvdXJjZSgpOwoJICAgICAgICB2YXIgd2lkdGggPSBzb3VyY2UuZ2V0V2lkdGgoKTsKCSAgICAgICAgdmFyIGhlaWdodCA9IHNvdXJjZS5nZXRIZWlnaHQoKTsKCSAgICAgICAgdmFyIG1hdHJpeCA9IG5ldyBCaXRNYXRyaXhfMSQ1LmRlZmF1bHQod2lkdGgsIGhlaWdodCk7CgkgICAgICAgIC8vIFF1aWNrbHkgY2FsY3VsYXRlcyB0aGUgaGlzdG9ncmFtIGJ5IHNhbXBsaW5nIGZvdXIgcm93cyBmcm9tIHRoZSBpbWFnZS4gVGhpcyBwcm92ZWQgdG8gYmUKCSAgICAgICAgLy8gbW9yZSByb2J1c3Qgb24gdGhlIGJsYWNrYm94IHRlc3RzIHRoYW4gc2FtcGxpbmcgYSBkaWFnb25hbCBhcyB3ZSB1c2VkIHRvIGRvLgoJICAgICAgICB0aGlzLmluaXRBcnJheXMod2lkdGgpOwoJICAgICAgICB2YXIgbG9jYWxCdWNrZXRzID0gdGhpcy5idWNrZXRzOwoJICAgICAgICBmb3IgKHZhciB5ID0gMTsgeSA8IDU7IHkrKykgewoJICAgICAgICAgICAgdmFyIHJvdyA9IE1hdGguZmxvb3IoKGhlaWdodCAqIHkpIC8gNSk7CgkgICAgICAgICAgICB2YXIgbG9jYWxMdW1pbmFuY2VzXzEgPSBzb3VyY2UuZ2V0Um93KHJvdywgdGhpcy5sdW1pbmFuY2VzKTsKCSAgICAgICAgICAgIHZhciByaWdodCA9IE1hdGguZmxvb3IoKHdpZHRoICogNCkgLyA1KTsKCSAgICAgICAgICAgIGZvciAodmFyIHggPSBNYXRoLmZsb29yKHdpZHRoIC8gNSk7IHggPCByaWdodDsgeCsrKSB7CgkgICAgICAgICAgICAgICAgdmFyIHBpeGVsID0gbG9jYWxMdW1pbmFuY2VzXzFbeF0gJiAweGZmOwoJICAgICAgICAgICAgICAgIGxvY2FsQnVja2V0c1twaXhlbCA+PiBHbG9iYWxIaXN0b2dyYW1CaW5hcml6ZXIuTFVNSU5BTkNFX1NISUZUXSsrOwoJICAgICAgICAgICAgfQoJICAgICAgICB9CgkgICAgICAgIHZhciBibGFja1BvaW50ID0gR2xvYmFsSGlzdG9ncmFtQmluYXJpemVyLmVzdGltYXRlQmxhY2tQb2ludChsb2NhbEJ1Y2tldHMpOwoJICAgICAgICAvLyBXZSBkZWxheSByZWFkaW5nIHRoZSBlbnRpcmUgaW1hZ2UgbHVtaW5hbmNlIHVudGlsIHRoZSBibGFjayBwb2ludCBlc3RpbWF0aW9uIHN1Y2NlZWRzLgoJICAgICAgICAvLyBBbHRob3VnaCB3ZSBlbmQgdXAgcmVhZGluZyBmb3VyIHJvd3MgdHdpY2UsIGl0IGlzIGNvbnNpc3RlbnQgd2l0aCBvdXIgbW90dG8gb2YKCSAgICAgICAgLy8gImZhaWwgcXVpY2tseSIgd2hpY2ggaXMgbmVjZXNzYXJ5IGZvciBjb250aW51b3VzIHNjYW5uaW5nLgoJICAgICAgICB2YXIgbG9jYWxMdW1pbmFuY2VzID0gc291cmNlLmdldE1hdHJpeCgpOwoJICAgICAgICBmb3IgKHZhciB5ID0gMDsgeSA8IGhlaWdodDsgeSsrKSB7CgkgICAgICAgICAgICB2YXIgb2Zmc2V0ID0geSAqIHdpZHRoOwoJICAgICAgICAgICAgZm9yICh2YXIgeCA9IDA7IHggPCB3aWR0aDsgeCsrKSB7CgkgICAgICAgICAgICAgICAgdmFyIHBpeGVsID0gbG9jYWxMdW1pbmFuY2VzW29mZnNldCArIHhdICYgMHhmZjsKCSAgICAgICAgICAgICAgICBpZiAocGl4ZWwgPCBibGFja1BvaW50KSB7CgkgICAgICAgICAgICAgICAgICAgIG1hdHJpeC5zZXQoeCwgeSk7CgkgICAgICAgICAgICAgICAgfQoJICAgICAgICAgICAgfQoJICAgICAgICB9CgkgICAgICAgIHJldHVybiBtYXRyaXg7CgkgICAgfTsKCSAgICAvKkBPdmVycmlkZSovCgkgICAgR2xvYmFsSGlzdG9ncmFtQmluYXJpemVyLnByb3RvdHlwZS5jcmVhdGVCaW5hcml6ZXIgPSBmdW5jdGlvbiAoc291cmNlKSB7CgkgICAgICAgIHJldHVybiBuZXcgR2xvYmFsSGlzdG9ncmFtQmluYXJpemVyKHNvdXJjZSk7CgkgICAgfTsKCSAgICBHbG9iYWxIaXN0b2dyYW1CaW5hcml6ZXIucHJvdG90eXBlLmluaXRBcnJheXMgPSBmdW5jdGlvbiAobHVtaW5hbmNlU2l6ZSAvKmludCovKSB7CgkgICAgICAgIGlmICh0aGlzLmx1bWluYW5jZXMubGVuZ3RoIDwgbHVtaW5hbmNlU2l6ZSkgewoJICAgICAgICAgICAgdGhpcy5sdW1pbmFuY2VzID0gbmV3IFVpbnQ4Q2xhbXBlZEFycmF5KGx1bWluYW5jZVNpemUpOwoJICAgICAgICB9CgkgICAgICAgIHZhciBidWNrZXRzID0gdGhpcy5idWNrZXRzOwoJICAgICAgICBmb3IgKHZhciB4ID0gMDsgeCA8IEdsb2JhbEhpc3RvZ3JhbUJpbmFyaXplci5MVU1JTkFOQ0VfQlVDS0VUUzsgeCsrKSB7CgkgICAgICAgICAgICBidWNrZXRzW3hdID0gMDsKCSAgICAgICAgfQoJICAgIH07CgkgICAgR2xvYmFsSGlzdG9ncmFtQmluYXJpemVyLmVzdGltYXRlQmxhY2tQb2ludCA9IGZ1bmN0aW9uIChidWNrZXRzKSB7CgkgICAgICAgIC8vIEZpbmQgdGhlIHRhbGxlc3QgcGVhayBpbiB0aGUgaGlzdG9ncmFtLgoJICAgICAgICB2YXIgbnVtQnVja2V0cyA9IGJ1Y2tldHMubGVuZ3RoOwoJICAgICAgICB2YXIgbWF4QnVja2V0Q291bnQgPSAwOwoJICAgICAgICB2YXIgZmlyc3RQZWFrID0gMDsKCSAgICAgICAgdmFyIGZpcnN0UGVha1NpemUgPSAwOwoJICAgICAgICBmb3IgKHZhciB4ID0gMDsgeCA8IG51bUJ1Y2tldHM7IHgrKykgewoJICAgICAgICAgICAgaWYgKGJ1Y2tldHNbeF0gPiBmaXJzdFBlYWtTaXplKSB7CgkgICAgICAgICAgICAgICAgZmlyc3RQZWFrID0geDsKCSAgICAgICAgICAgICAgICBmaXJzdFBlYWtTaXplID0gYnVja2V0c1t4XTsKCSAgICAgICAgICAgIH0KCSAgICAgICAgICAgIGlmIChidWNrZXRzW3hdID4gbWF4QnVja2V0Q291bnQpIHsKCSAgICAgICAgICAgICAgICBtYXhCdWNrZXRDb3VudCA9IGJ1Y2tldHNbeF07CgkgICAgICAgICAgICB9CgkgICAgICAgIH0KCSAgICAgICAgLy8gRmluZCB0aGUgc2Vjb25kLXRhbGxlc3QgcGVhayB3aGljaCBpcyBzb21ld2hhdCBmYXIgZnJvbSB0aGUgdGFsbGVzdCBwZWFrLgoJICAgICAgICB2YXIgc2Vjb25kUGVhayA9IDA7CgkgICAgICAgIHZhciBzZWNvbmRQZWFrU2NvcmUgPSAwOwoJICAgICAgICBmb3IgKHZhciB4ID0gMDsgeCA8IG51bUJ1Y2tldHM7IHgrKykgewoJICAgICAgICAgICAgdmFyIGRpc3RhbmNlVG9CaWdnZXN0ID0geCAtIGZpcnN0UGVhazsKCSAgICAgICAgICAgIC8vIEVuY291cmFnZSBtb3JlIGRpc3RhbnQgc2Vjb25kIHBlYWtzIGJ5IG11bHRpcGx5aW5nIGJ5IHNxdWFyZSBvZiBkaXN0YW5jZS4KCSAgICAgICAgICAgIHZhciBzY29yZSA9IGJ1Y2tldHNbeF0gKiBkaXN0YW5jZVRvQmlnZ2VzdCAqIGRpc3RhbmNlVG9CaWdnZXN0OwoJICAgICAgICAgICAgaWYgKHNjb3JlID4gc2Vjb25kUGVha1Njb3JlKSB7CgkgICAgICAgICAgICAgICAgc2Vjb25kUGVhayA9IHg7CgkgICAgICAgICAgICAgICAgc2Vjb25kUGVha1Njb3JlID0gc2NvcmU7CgkgICAgICAgICAgICB9CgkgICAgICAgIH0KCSAgICAgICAgLy8gTWFrZSBzdXJlIGZpcnN0UGVhayBjb3JyZXNwb25kcyB0byB0aGUgYmxhY2sgcGVhay4KCSAgICAgICAgaWYgKGZpcnN0UGVhayA+IHNlY29uZFBlYWspIHsKCSAgICAgICAgICAgIHZhciB0ZW1wID0gZmlyc3RQZWFrOwoJICAgICAgICAgICAgZmlyc3RQZWFrID0gc2Vjb25kUGVhazsKCSAgICAgICAgICAgIHNlY29uZFBlYWsgPSB0ZW1wOwoJICAgICAgICB9CgkgICAgICAgIC8vIElmIHRoZXJlIGlzIHRvbyBsaXR0bGUgY29udHJhc3QgaW4gdGhlIGltYWdlIHRvIHBpY2sgYSBtZWFuaW5nZnVsIGJsYWNrIHBvaW50LCB0aHJvdyByYXRoZXIKCSAgICAgICAgLy8gdGhhbiB3YXN0ZSB0aW1lIHRyeWluZyB0byBkZWNvZGUgdGhlIGltYWdlLCBhbmQgcmlzayBmYWxzZSBwb3NpdGl2ZXMuCgkgICAgICAgIGlmIChzZWNvbmRQZWFrIC0gZmlyc3RQZWFrIDw9IG51bUJ1Y2tldHMgLyAxNikgewoJICAgICAgICAgICAgdGhyb3cgbmV3IE5vdEZvdW5kRXhjZXB0aW9uXzEkNi5kZWZhdWx0KCk7CgkgICAgICAgIH0KCSAgICAgICAgLy8gRmluZCBhIHZhbGxleSBiZXR3ZWVuIHRoZW0gdGhhdCBpcyBsb3cgYW5kIGNsb3NlciB0byB0aGUgd2hpdGUgcGVhay4KCSAgICAgICAgdmFyIGJlc3RWYWxsZXkgPSBzZWNvbmRQZWFrIC0gMTsKCSAgICAgICAgdmFyIGJlc3RWYWxsZXlTY29yZSA9IC0xOwoJICAgICAgICBmb3IgKHZhciB4ID0gc2Vjb25kUGVhayAtIDE7IHggPiBmaXJzdFBlYWs7IHgtLSkgewoJICAgICAgICAgICAgdmFyIGZyb21GaXJzdCA9IHggLSBmaXJzdFBlYWs7CgkgICAgICAgICAgICB2YXIgc2NvcmUgPSBmcm9tRmlyc3QgKiBmcm9tRmlyc3QgKiAoc2Vjb25kUGVhayAtIHgpICogKG1heEJ1Y2tldENvdW50IC0gYnVja2V0c1t4XSk7CgkgICAgICAgICAgICBpZiAoc2NvcmUgPiBiZXN0VmFsbGV5U2NvcmUpIHsKCSAgICAgICAgICAgICAgICBiZXN0VmFsbGV5ID0geDsKCSAgICAgICAgICAgICAgICBiZXN0VmFsbGV5U2NvcmUgPSBzY29yZTsKCSAgICAgICAgICAgIH0KCSAgICAgICAgfQoJICAgICAgICByZXR1cm4gYmVzdFZhbGxleSA8PCBHbG9iYWxIaXN0b2dyYW1CaW5hcml6ZXIuTFVNSU5BTkNFX1NISUZUOwoJICAgIH07CgkgICAgR2xvYmFsSGlzdG9ncmFtQmluYXJpemVyLkxVTUlOQU5DRV9CSVRTID0gNTsKCSAgICBHbG9iYWxIaXN0b2dyYW1CaW5hcml6ZXIuTFVNSU5BTkNFX1NISUZUID0gOCAtIEdsb2JhbEhpc3RvZ3JhbUJpbmFyaXplci5MVU1JTkFOQ0VfQklUUzsKCSAgICBHbG9iYWxIaXN0b2dyYW1CaW5hcml6ZXIuTFVNSU5BTkNFX0JVQ0tFVFMgPSAxIDw8IEdsb2JhbEhpc3RvZ3JhbUJpbmFyaXplci5MVU1JTkFOQ0VfQklUUzsKCSAgICBHbG9iYWxIaXN0b2dyYW1CaW5hcml6ZXIuRU1QVFkgPSBVaW50OENsYW1wZWRBcnJheS5mcm9tKFswXSk7CgkgICAgcmV0dXJuIEdsb2JhbEhpc3RvZ3JhbUJpbmFyaXplcjsKCX0oQmluYXJpemVyXzEuZGVmYXVsdCkpOwoJR2xvYmFsSGlzdG9ncmFtQmluYXJpemVyJDEuZGVmYXVsdCA9IEdsb2JhbEhpc3RvZ3JhbUJpbmFyaXplcjsKCgkvKgoJICogQ29weXJpZ2h0IDIwMDkgWlhpbmcgYXV0aG9ycwoJICoKCSAqIExpY2Vuc2VkIHVuZGVyIHRoZSBBcGFjaGUgTGljZW5zZSwgVmVyc2lvbiAyLjAgKHRoZSAiTGljZW5zZSIpOwoJICogeW91IG1heSBub3QgdXNlIHRoaXMgZmlsZSBleGNlcHQgaW4gY29tcGxpYW5jZSB3aXRoIHRoZSBMaWNlbnNlLgoJICogWW91IG1heSBvYnRhaW4gYSBjb3B5IG9mIHRoZSBMaWNlbnNlIGF0CgkgKgoJICogICAgICBodHRwOi8vd3d3LmFwYWNoZS5vcmcvbGljZW5zZXMvTElDRU5TRS0yLjAKCSAqCgkgKiBVbmxlc3MgcmVxdWlyZWQgYnkgYXBwbGljYWJsZSBsYXcgb3IgYWdyZWVkIHRvIGluIHdyaXRpbmcsIHNvZnR3YXJlCgkgKiBkaXN0cmlidXRlZCB1bmRlciB0aGUgTGljZW5zZSBpcyBkaXN0cmlidXRlZCBvbiBhbiAiQVMgSVMiIEJBU0lTLAoJICogV0lUSE9VVCBXQVJSQU5USUVTIE9SIENPTkRJVElPTlMgT0YgQU5ZIEtJTkQsIGVpdGhlciBleHByZXNzIG9yIGltcGxpZWQuCgkgKiBTZWUgdGhlIExpY2Vuc2UgZm9yIHRoZSBzcGVjaWZpYyBsYW5ndWFnZSBnb3Zlcm5pbmcgcGVybWlzc2lvbnMgYW5kCgkgKiBsaW1pdGF0aW9ucyB1bmRlciB0aGUgTGljZW5zZS4KCSAqLwoJdmFyIF9fZXh0ZW5kcyRiID0gKGNvbW1vbmpzR2xvYmFsICYmIGNvbW1vbmpzR2xvYmFsLl9fZXh0ZW5kcykgfHwgKGZ1bmN0aW9uICgpIHsKCSAgICB2YXIgZXh0ZW5kU3RhdGljcyA9IGZ1bmN0aW9uIChkLCBiKSB7CgkgICAgICAgIGV4dGVuZFN0YXRpY3MgPSBPYmplY3Quc2V0UHJvdG90eXBlT2YgfHwKCSAgICAgICAgICAgICh7IF9fcHJvdG9fXzogW10gfSBpbnN0YW5jZW9mIEFycmF5ICYmIGZ1bmN0aW9uIChkLCBiKSB7IGQuX19wcm90b19fID0gYjsgfSkgfHwKCSAgICAgICAgICAgIGZ1bmN0aW9uIChkLCBiKSB7IGZvciAodmFyIHAgaW4gYikgaWYgKGIuaGFzT3duUHJvcGVydHkocCkpIGRbcF0gPSBiW3BdOyB9OwoJICAgICAgICByZXR1cm4gZXh0ZW5kU3RhdGljcyhkLCBiKTsKCSAgICB9OwoJICAgIHJldHVybiBmdW5jdGlvbiAoZCwgYikgewoJICAgICAgICBleHRlbmRTdGF0aWNzKGQsIGIpOwoJICAgICAgICBmdW5jdGlvbiBfXygpIHsgdGhpcy5jb25zdHJ1Y3RvciA9IGQ7IH0KCSAgICAgICAgZC5wcm90b3R5cGUgPSBiID09PSBudWxsID8gT2JqZWN0LmNyZWF0ZShiKSA6IChfXy5wcm90b3R5cGUgPSBiLnByb3RvdHlwZSwgbmV3IF9fKCkpOwoJICAgIH07Cgl9KSgpOwoJT2JqZWN0LmRlZmluZVByb3BlcnR5KEh5YnJpZEJpbmFyaXplciQxLCAiX19lc01vZHVsZSIsIHsgdmFsdWU6IHRydWUgfSk7Cgl2YXIgR2xvYmFsSGlzdG9ncmFtQmluYXJpemVyXzEgPSBHbG9iYWxIaXN0b2dyYW1CaW5hcml6ZXIkMTsKCXZhciBCaXRNYXRyaXhfMSQ0ID0gQml0TWF0cml4JDE7CgkvKioKCSAqIFRoaXMgY2xhc3MgaW1wbGVtZW50cyBhIGxvY2FsIHRocmVzaG9sZGluZyBhbGdvcml0aG0sIHdoaWNoIHdoaWxlIHNsb3dlciB0aGFuIHRoZQoJICogR2xvYmFsSGlzdG9ncmFtQmluYXJpemVyLCBpcyBmYWlybHkgZWZmaWNpZW50IGZvciB3aGF0IGl0IGRvZXMuIEl0IGlzIGRlc2lnbmVkIGZvcgoJICogaGlnaCBmcmVxdWVuY3kgaW1hZ2VzIG9mIGJhcmNvZGVzIHdpdGggYmxhY2sgZGF0YSBvbiB3aGl0ZSBiYWNrZ3JvdW5kcy4gRm9yIHRoaXMgYXBwbGljYXRpb24sCgkgKiBpdCBkb2VzIGEgbXVjaCBiZXR0ZXIgam9iIHRoYW4gYSBnbG9iYWwgYmxhY2twb2ludCB3aXRoIHNldmVyZSBzaGFkb3dzIGFuZCBncmFkaWVudHMuCgkgKiBIb3dldmVyIGl0IHRlbmRzIHRvIHByb2R1Y2UgYXJ0aWZhY3RzIG9uIGxvd2VyIGZyZXF1ZW5jeSBpbWFnZXMgYW5kIGlzIHRoZXJlZm9yZSBub3QKCSAqIGEgZ29vZCBnZW5lcmFsIHB1cnBvc2UgYmluYXJpemVyIGZvciB1c2VzIG91dHNpZGUgWlhpbmcuCgkgKgoJICogVGhpcyBjbGFzcyBleHRlbmRzIEdsb2JhbEhpc3RvZ3JhbUJpbmFyaXplciwgdXNpbmcgdGhlIG9sZGVyIGhpc3RvZ3JhbSBhcHByb2FjaCBmb3IgMUQgcmVhZGVycywKCSAqIGFuZCB0aGUgbmV3ZXIgbG9jYWwgYXBwcm9hY2ggZm9yIDJEIHJlYWRlcnMuIDFEIGRlY29kaW5nIHVzaW5nIGEgcGVyLXJvdyBoaXN0b2dyYW0gaXMgYWxyZWFkeQoJICogaW5oZXJlbnRseSBsb2NhbCwgYW5kIG9ubHkgZmFpbHMgZm9yIGhvcml6b250YWwgZ3JhZGllbnRzLiBXZSBjYW4gcmV2aXNpdCB0aGF0IHByb2JsZW0gbGF0ZXIsCgkgKiBidXQgZm9yIG5vdyBpdCB3YXMgbm90IGEgd2luIHRvIHVzZSBsb2NhbCBibG9ja3MgZm9yIDFELgoJICoKCSAqIFRoaXMgQmluYXJpemVyIGlzIHRoZSBkZWZhdWx0IGZvciB0aGUgdW5pdCB0ZXN0cyBhbmQgdGhlIHJlY29tbWVuZGVkIGNsYXNzIGZvciBsaWJyYXJ5IHVzZXJzLgoJICoKCSAqIEBhdXRob3IgZHN3aXRraW5AZ29vZ2xlLmNvbSAoRGFuaWVsIFN3aXRraW4pCgkgKi8KCXZhciBIeWJyaWRCaW5hcml6ZXIgPSAvKiogQGNsYXNzICovIChmdW5jdGlvbiAoX3N1cGVyKSB7CgkgICAgX19leHRlbmRzJGIoSHlicmlkQmluYXJpemVyLCBfc3VwZXIpOwoJICAgIGZ1bmN0aW9uIEh5YnJpZEJpbmFyaXplcihzb3VyY2UpIHsKCSAgICAgICAgdmFyIF90aGlzID0gX3N1cGVyLmNhbGwodGhpcywgc291cmNlKSB8fCB0aGlzOwoJICAgICAgICBfdGhpcy5tYXRyaXggPSBudWxsOwoJICAgICAgICByZXR1cm4gX3RoaXM7CgkgICAgfQoJICAgIC8qKgoJICAgICAqIENhbGN1bGF0ZXMgdGhlIGZpbmFsIEJpdE1hdHJpeCBvbmNlIGZvciBhbGwgcmVxdWVzdHMuIFRoaXMgY291bGQgYmUgY2FsbGVkIG9uY2UgZnJvbSB0aGUKCSAgICAgKiBjb25zdHJ1Y3RvciBpbnN0ZWFkLCBidXQgdGhlcmUgYXJlIHNvbWUgYWR2YW50YWdlcyB0byBkb2luZyBpdCBsYXppbHksIHN1Y2ggYXMgbWFraW5nCgkgICAgICogcHJvZmlsaW5nIGVhc2llciwgYW5kIG5vdCBkb2luZyBoZWF2eSBsaWZ0aW5nIHdoZW4gY2FsbGVycyBkb24ndCBleHBlY3QgaXQuCgkgICAgICovCgkgICAgLypAT3ZlcnJpZGUqLwoJICAgIEh5YnJpZEJpbmFyaXplci5wcm90b3R5cGUuZ2V0QmxhY2tNYXRyaXggPSBmdW5jdGlvbiAoKSB7CgkgICAgICAgIGlmICh0aGlzLm1hdHJpeCAhPT0gbnVsbCkgewoJICAgICAgICAgICAgcmV0dXJuIHRoaXMubWF0cml4OwoJICAgICAgICB9CgkgICAgICAgIHZhciBzb3VyY2UgPSB0aGlzLmdldEx1bWluYW5jZVNvdXJjZSgpOwoJICAgICAgICB2YXIgd2lkdGggPSBzb3VyY2UuZ2V0V2lkdGgoKTsKCSAgICAgICAgdmFyIGhlaWdodCA9IHNvdXJjZS5nZXRIZWlnaHQoKTsKCSAgICAgICAgaWYgKHdpZHRoID49IEh5YnJpZEJpbmFyaXplci5NSU5JTVVNX0RJTUVOU0lPTiAmJiBoZWlnaHQgPj0gSHlicmlkQmluYXJpemVyLk1JTklNVU1fRElNRU5TSU9OKSB7CgkgICAgICAgICAgICB2YXIgbHVtaW5hbmNlcyA9IHNvdXJjZS5nZXRNYXRyaXgoKTsKCSAgICAgICAgICAgIHZhciBzdWJXaWR0aCA9IHdpZHRoID4+IEh5YnJpZEJpbmFyaXplci5CTE9DS19TSVpFX1BPV0VSOwoJICAgICAgICAgICAgaWYgKCh3aWR0aCAmIEh5YnJpZEJpbmFyaXplci5CTE9DS19TSVpFX01BU0spICE9PSAwKSB7CgkgICAgICAgICAgICAgICAgc3ViV2lkdGgrKzsKCSAgICAgICAgICAgIH0KCSAgICAgICAgICAgIHZhciBzdWJIZWlnaHQgPSBoZWlnaHQgPj4gSHlicmlkQmluYXJpemVyLkJMT0NLX1NJWkVfUE9XRVI7CgkgICAgICAgICAgICBpZiAoKGhlaWdodCAmIEh5YnJpZEJpbmFyaXplci5CTE9DS19TSVpFX01BU0spICE9PSAwKSB7CgkgICAgICAgICAgICAgICAgc3ViSGVpZ2h0Kys7CgkgICAgICAgICAgICB9CgkgICAgICAgICAgICB2YXIgYmxhY2tQb2ludHMgPSBIeWJyaWRCaW5hcml6ZXIuY2FsY3VsYXRlQmxhY2tQb2ludHMobHVtaW5hbmNlcywgc3ViV2lkdGgsIHN1YkhlaWdodCwgd2lkdGgsIGhlaWdodCk7CgkgICAgICAgICAgICB2YXIgbmV3TWF0cml4ID0gbmV3IEJpdE1hdHJpeF8xJDQuZGVmYXVsdCh3aWR0aCwgaGVpZ2h0KTsKCSAgICAgICAgICAgIEh5YnJpZEJpbmFyaXplci5jYWxjdWxhdGVUaHJlc2hvbGRGb3JCbG9jayhsdW1pbmFuY2VzLCBzdWJXaWR0aCwgc3ViSGVpZ2h0LCB3aWR0aCwgaGVpZ2h0LCBibGFja1BvaW50cywgbmV3TWF0cml4KTsKCSAgICAgICAgICAgIHRoaXMubWF0cml4ID0gbmV3TWF0cml4OwoJICAgICAgICB9CgkgICAgICAgIGVsc2UgewoJICAgICAgICAgICAgLy8gSWYgdGhlIGltYWdlIGlzIHRvbyBzbWFsbCwgZmFsbCBiYWNrIHRvIHRoZSBnbG9iYWwgaGlzdG9ncmFtIGFwcHJvYWNoLgoJICAgICAgICAgICAgdGhpcy5tYXRyaXggPSBfc3VwZXIucHJvdG90eXBlLmdldEJsYWNrTWF0cml4LmNhbGwodGhpcyk7CgkgICAgICAgIH0KCSAgICAgICAgcmV0dXJuIHRoaXMubWF0cml4OwoJICAgIH07CgkgICAgLypAT3ZlcnJpZGUqLwoJICAgIEh5YnJpZEJpbmFyaXplci5wcm90b3R5cGUuY3JlYXRlQmluYXJpemVyID0gZnVuY3Rpb24gKHNvdXJjZSkgewoJICAgICAgICByZXR1cm4gbmV3IEh5YnJpZEJpbmFyaXplcihzb3VyY2UpOwoJICAgIH07CgkgICAgLyoqCgkgICAgICogRm9yIGVhY2ggYmxvY2sgaW4gdGhlIGltYWdlLCBjYWxjdWxhdGUgdGhlIGF2ZXJhZ2UgYmxhY2sgcG9pbnQgdXNpbmcgYSA1eDUgZ3JpZAoJICAgICAqIG9mIHRoZSBibG9ja3MgYXJvdW5kIGl0LiBBbHNvIGhhbmRsZXMgdGhlIGNvcm5lciBjYXNlcyAoZnJhY3Rpb25hbCBibG9ja3MgYXJlIGNvbXB1dGVkIGJhc2VkCgkgICAgICogb24gdGhlIGxhc3QgcGl4ZWxzIGluIHRoZSByb3cvY29sdW1uIHdoaWNoIGFyZSBhbHNvIHVzZWQgaW4gdGhlIHByZXZpb3VzIGJsb2NrKS4KCSAgICAgKi8KCSAgICBIeWJyaWRCaW5hcml6ZXIuY2FsY3VsYXRlVGhyZXNob2xkRm9yQmxvY2sgPSBmdW5jdGlvbiAobHVtaW5hbmNlcywgc3ViV2lkdGggLyppbnQqLywgc3ViSGVpZ2h0IC8qaW50Ki8sIHdpZHRoIC8qaW50Ki8sIGhlaWdodCAvKmludCovLCBibGFja1BvaW50cywgbWF0cml4KSB7CgkgICAgICAgIHZhciBtYXhZT2Zmc2V0ID0gaGVpZ2h0IC0gSHlicmlkQmluYXJpemVyLkJMT0NLX1NJWkU7CgkgICAgICAgIHZhciBtYXhYT2Zmc2V0ID0gd2lkdGggLSBIeWJyaWRCaW5hcml6ZXIuQkxPQ0tfU0laRTsKCSAgICAgICAgZm9yICh2YXIgeSA9IDA7IHkgPCBzdWJIZWlnaHQ7IHkrKykgewoJICAgICAgICAgICAgdmFyIHlvZmZzZXQgPSB5IDw8IEh5YnJpZEJpbmFyaXplci5CTE9DS19TSVpFX1BPV0VSOwoJICAgICAgICAgICAgaWYgKHlvZmZzZXQgPiBtYXhZT2Zmc2V0KSB7CgkgICAgICAgICAgICAgICAgeW9mZnNldCA9IG1heFlPZmZzZXQ7CgkgICAgICAgICAgICB9CgkgICAgICAgICAgICB2YXIgdG9wXzEgPSBIeWJyaWRCaW5hcml6ZXIuY2FwKHksIDIsIHN1YkhlaWdodCAtIDMpOwoJICAgICAgICAgICAgZm9yICh2YXIgeCA9IDA7IHggPCBzdWJXaWR0aDsgeCsrKSB7CgkgICAgICAgICAgICAgICAgdmFyIHhvZmZzZXQgPSB4IDw8IEh5YnJpZEJpbmFyaXplci5CTE9DS19TSVpFX1BPV0VSOwoJICAgICAgICAgICAgICAgIGlmICh4b2Zmc2V0ID4gbWF4WE9mZnNldCkgewoJICAgICAgICAgICAgICAgICAgICB4b2Zmc2V0ID0gbWF4WE9mZnNldDsKCSAgICAgICAgICAgICAgICB9CgkgICAgICAgICAgICAgICAgdmFyIGxlZnQgPSBIeWJyaWRCaW5hcml6ZXIuY2FwKHgsIDIsIHN1YldpZHRoIC0gMyk7CgkgICAgICAgICAgICAgICAgdmFyIHN1bSA9IDA7CgkgICAgICAgICAgICAgICAgZm9yICh2YXIgeiA9IC0yOyB6IDw9IDI7IHorKykgewoJICAgICAgICAgICAgICAgICAgICB2YXIgYmxhY2tSb3cgPSBibGFja1BvaW50c1t0b3BfMSArIHpdOwoJICAgICAgICAgICAgICAgICAgICBzdW0gKz0gYmxhY2tSb3dbbGVmdCAtIDJdICsgYmxhY2tSb3dbbGVmdCAtIDFdICsgYmxhY2tSb3dbbGVmdF0gKyBibGFja1Jvd1tsZWZ0ICsgMV0gKyBibGFja1Jvd1tsZWZ0ICsgMl07CgkgICAgICAgICAgICAgICAgfQoJICAgICAgICAgICAgICAgIHZhciBhdmVyYWdlID0gc3VtIC8gMjU7CgkgICAgICAgICAgICAgICAgSHlicmlkQmluYXJpemVyLnRocmVzaG9sZEJsb2NrKGx1bWluYW5jZXMsIHhvZmZzZXQsIHlvZmZzZXQsIGF2ZXJhZ2UsIHdpZHRoLCBtYXRyaXgpOwoJICAgICAgICAgICAgfQoJICAgICAgICB9CgkgICAgfTsKCSAgICBIeWJyaWRCaW5hcml6ZXIuY2FwID0gZnVuY3Rpb24gKHZhbHVlIC8qaW50Ki8sIG1pbiAvKmludCovLCBtYXggLyppbnQqLykgewoJICAgICAgICByZXR1cm4gdmFsdWUgPCBtaW4gPyBtaW4gOiB2YWx1ZSA+IG1heCA/IG1heCA6IHZhbHVlOwoJICAgIH07CgkgICAgLyoqCgkgICAgICogQXBwbGllcyBhIHNpbmdsZSB0aHJlc2hvbGQgdG8gYSBibG9jayBvZiBwaXhlbHMuCgkgICAgICovCgkgICAgSHlicmlkQmluYXJpemVyLnRocmVzaG9sZEJsb2NrID0gZnVuY3Rpb24gKGx1bWluYW5jZXMsIHhvZmZzZXQgLyppbnQqLywgeW9mZnNldCAvKmludCovLCB0aHJlc2hvbGQgLyppbnQqLywgc3RyaWRlIC8qaW50Ki8sIG1hdHJpeCkgewoJICAgICAgICBmb3IgKHZhciB5ID0gMCwgb2Zmc2V0ID0geW9mZnNldCAqIHN0cmlkZSArIHhvZmZzZXQ7IHkgPCBIeWJyaWRCaW5hcml6ZXIuQkxPQ0tfU0laRTsgeSsrLCBvZmZzZXQgKz0gc3RyaWRlKSB7CgkgICAgICAgICAgICBmb3IgKHZhciB4ID0gMDsgeCA8IEh5YnJpZEJpbmFyaXplci5CTE9DS19TSVpFOyB4KyspIHsKCSAgICAgICAgICAgICAgICAvLyBDb21wYXJpc29uIG5lZWRzIHRvIGJlIDw9IHNvIHRoYXQgYmxhY2sgPT0gMCBwaXhlbHMgYXJlIGJsYWNrIGV2ZW4gaWYgdGhlIHRocmVzaG9sZCBpcyAwLgoJICAgICAgICAgICAgICAgIGlmICgobHVtaW5hbmNlc1tvZmZzZXQgKyB4XSAmIDB4RkYpIDw9IHRocmVzaG9sZCkgewoJICAgICAgICAgICAgICAgICAgICBtYXRyaXguc2V0KHhvZmZzZXQgKyB4LCB5b2Zmc2V0ICsgeSk7CgkgICAgICAgICAgICAgICAgfQoJICAgICAgICAgICAgfQoJICAgICAgICB9CgkgICAgfTsKCSAgICAvKioKCSAgICAgKiBDYWxjdWxhdGVzIGEgc2luZ2xlIGJsYWNrIHBvaW50IGZvciBlYWNoIGJsb2NrIG9mIHBpeGVscyBhbmQgc2F2ZXMgaXQgYXdheS4KCSAgICAgKiBTZWUgdGhlIGZvbGxvd2luZyB0aHJlYWQgZm9yIGEgZGlzY3Vzc2lvbiBvZiB0aGlzIGFsZ29yaXRobToKCSAgICAgKiAgaHR0cDovL2dyb3Vwcy5nb29nbGUuY29tL2dyb3VwL3p4aW5nL2Jyb3dzZV90aHJlYWQvdGhyZWFkL2QwNmVmYTJjMzVhN2RkYzAKCSAgICAgKi8KCSAgICBIeWJyaWRCaW5hcml6ZXIuY2FsY3VsYXRlQmxhY2tQb2ludHMgPSBmdW5jdGlvbiAobHVtaW5hbmNlcywgc3ViV2lkdGggLyppbnQqLywgc3ViSGVpZ2h0IC8qaW50Ki8sIHdpZHRoIC8qaW50Ki8sIGhlaWdodCAvKmludCovKSB7CgkgICAgICAgIHZhciBtYXhZT2Zmc2V0ID0gaGVpZ2h0IC0gSHlicmlkQmluYXJpemVyLkJMT0NLX1NJWkU7CgkgICAgICAgIHZhciBtYXhYT2Zmc2V0ID0gd2lkdGggLSBIeWJyaWRCaW5hcml6ZXIuQkxPQ0tfU0laRTsKCSAgICAgICAgLy8gdHNsaW50OmRpc2FibGUtbmV4dC1saW5lOndoaXRlc3BhY2UKCSAgICAgICAgdmFyIGJsYWNrUG9pbnRzID0gbmV3IEFycmF5KHN1YkhlaWdodCk7IC8vIHN1YldpZHRoCgkgICAgICAgIGZvciAodmFyIHkgPSAwOyB5IDwgc3ViSGVpZ2h0OyB5KyspIHsKCSAgICAgICAgICAgIGJsYWNrUG9pbnRzW3ldID0gbmV3IEludDMyQXJyYXkoc3ViV2lkdGgpOwoJICAgICAgICAgICAgdmFyIHlvZmZzZXQgPSB5IDw8IEh5YnJpZEJpbmFyaXplci5CTE9DS19TSVpFX1BPV0VSOwoJICAgICAgICAgICAgaWYgKHlvZmZzZXQgPiBtYXhZT2Zmc2V0KSB7CgkgICAgICAgICAgICAgICAgeW9mZnNldCA9IG1heFlPZmZzZXQ7CgkgICAgICAgICAgICB9CgkgICAgICAgICAgICBmb3IgKHZhciB4ID0gMDsgeCA8IHN1YldpZHRoOyB4KyspIHsKCSAgICAgICAgICAgICAgICB2YXIgeG9mZnNldCA9IHggPDwgSHlicmlkQmluYXJpemVyLkJMT0NLX1NJWkVfUE9XRVI7CgkgICAgICAgICAgICAgICAgaWYgKHhvZmZzZXQgPiBtYXhYT2Zmc2V0KSB7CgkgICAgICAgICAgICAgICAgICAgIHhvZmZzZXQgPSBtYXhYT2Zmc2V0OwoJICAgICAgICAgICAgICAgIH0KCSAgICAgICAgICAgICAgICB2YXIgc3VtID0gMDsKCSAgICAgICAgICAgICAgICB2YXIgbWluID0gMHhGRjsKCSAgICAgICAgICAgICAgICB2YXIgbWF4ID0gMDsKCSAgICAgICAgICAgICAgICBmb3IgKHZhciB5eSA9IDAsIG9mZnNldCA9IHlvZmZzZXQgKiB3aWR0aCArIHhvZmZzZXQ7IHl5IDwgSHlicmlkQmluYXJpemVyLkJMT0NLX1NJWkU7IHl5KyssIG9mZnNldCArPSB3aWR0aCkgewoJICAgICAgICAgICAgICAgICAgICBmb3IgKHZhciB4eCA9IDA7IHh4IDwgSHlicmlkQmluYXJpemVyLkJMT0NLX1NJWkU7IHh4KyspIHsKCSAgICAgICAgICAgICAgICAgICAgICAgIHZhciBwaXhlbCA9IGx1bWluYW5jZXNbb2Zmc2V0ICsgeHhdICYgMHhGRjsKCSAgICAgICAgICAgICAgICAgICAgICAgIHN1bSArPSBwaXhlbDsKCSAgICAgICAgICAgICAgICAgICAgICAgIC8vIHN0aWxsIGxvb2tpbmcgZm9yIGdvb2QgY29udHJhc3QKCSAgICAgICAgICAgICAgICAgICAgICAgIGlmIChwaXhlbCA8IG1pbikgewoJICAgICAgICAgICAgICAgICAgICAgICAgICAgIG1pbiA9IHBpeGVsOwoJICAgICAgICAgICAgICAgICAgICAgICAgfQoJICAgICAgICAgICAgICAgICAgICAgICAgaWYgKHBpeGVsID4gbWF4KSB7CgkgICAgICAgICAgICAgICAgICAgICAgICAgICAgbWF4ID0gcGl4ZWw7CgkgICAgICAgICAgICAgICAgICAgICAgICB9CgkgICAgICAgICAgICAgICAgICAgIH0KCSAgICAgICAgICAgICAgICAgICAgLy8gc2hvcnQtY2lyY3VpdCBtaW4vbWF4IHRlc3RzIG9uY2UgZHluYW1pYyByYW5nZSBpcyBtZXQKCSAgICAgICAgICAgICAgICAgICAgaWYgKG1heCAtIG1pbiA+IEh5YnJpZEJpbmFyaXplci5NSU5fRFlOQU1JQ19SQU5HRSkgewoJICAgICAgICAgICAgICAgICAgICAgICAgLy8gZmluaXNoIHRoZSByZXN0IG9mIHRoZSByb3dzIHF1aWNrbHkKCSAgICAgICAgICAgICAgICAgICAgICAgIGZvciAoeXkrKywgb2Zmc2V0ICs9IHdpZHRoOyB5eSA8IEh5YnJpZEJpbmFyaXplci5CTE9DS19TSVpFOyB5eSsrLCBvZmZzZXQgKz0gd2lkdGgpIHsKCSAgICAgICAgICAgICAgICAgICAgICAgICAgICBmb3IgKHZhciB4eCA9IDA7IHh4IDwgSHlicmlkQmluYXJpemVyLkJMT0NLX1NJWkU7IHh4KyspIHsKCSAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgc3VtICs9IGx1bWluYW5jZXNbb2Zmc2V0ICsgeHhdICYgMHhGRjsKCSAgICAgICAgICAgICAgICAgICAgICAgICAgICB9CgkgICAgICAgICAgICAgICAgICAgICAgICB9CgkgICAgICAgICAgICAgICAgICAgIH0KCSAgICAgICAgICAgICAgICB9CgkgICAgICAgICAgICAgICAgLy8gVGhlIGRlZmF1bHQgZXN0aW1hdGUgaXMgdGhlIGF2ZXJhZ2Ugb2YgdGhlIHZhbHVlcyBpbiB0aGUgYmxvY2suCgkgICAgICAgICAgICAgICAgdmFyIGF2ZXJhZ2UgPSBzdW0gPj4gKEh5YnJpZEJpbmFyaXplci5CTE9DS19TSVpFX1BPV0VSICogMik7CgkgICAgICAgICAgICAgICAgaWYgKG1heCAtIG1pbiA8PSBIeWJyaWRCaW5hcml6ZXIuTUlOX0RZTkFNSUNfUkFOR0UpIHsKCSAgICAgICAgICAgICAgICAgICAgLy8gSWYgdmFyaWF0aW9uIHdpdGhpbiB0aGUgYmxvY2sgaXMgbG93LCBhc3N1bWUgdGhpcyBpcyBhIGJsb2NrIHdpdGggb25seSBsaWdodCBvciBvbmx5CgkgICAgICAgICAgICAgICAgICAgIC8vIGRhcmsgcGl4ZWxzLiBJbiB0aGF0IGNhc2Ugd2UgZG8gbm90IHdhbnQgdG8gdXNlIHRoZSBhdmVyYWdlLCBhcyBpdCB3b3VsZCBkaXZpZGUgdGhpcwoJICAgICAgICAgICAgICAgICAgICAvLyBsb3cgY29udHJhc3QgYXJlYSBpbnRvIGJsYWNrIGFuZCB3aGl0ZSBwaXhlbHMsIGVzc2VudGlhbGx5IGNyZWF0aW5nIGRhdGEgb3V0IG9mIG5vaXNlLgoJICAgICAgICAgICAgICAgICAgICAvLwoJICAgICAgICAgICAgICAgICAgICAvLyBUaGUgZGVmYXVsdCBhc3N1bXB0aW9uIGlzIHRoYXQgdGhlIGJsb2NrIGlzIGxpZ2h0L2JhY2tncm91bmQuIFNpbmNlIG5vIGVzdGltYXRlIGZvcgoJICAgICAgICAgICAgICAgICAgICAvLyB0aGUgbGV2ZWwgb2YgZGFyayBwaXhlbHMgZXhpc3RzIGxvY2FsbHksIHVzZSBoYWxmIHRoZSBtaW4gZm9yIHRoZSBibG9jay4KCSAgICAgICAgICAgICAgICAgICAgYXZlcmFnZSA9IG1pbiAvIDI7CgkgICAgICAgICAgICAgICAgICAgIGlmICh5ID4gMCAmJiB4ID4gMCkgewoJICAgICAgICAgICAgICAgICAgICAgICAgLy8gQ29ycmVjdCB0aGUgIndoaXRlIGJhY2tncm91bmQiIGFzc3VtcHRpb24gZm9yIGJsb2NrcyB0aGF0IGhhdmUgbmVpZ2hib3JzIGJ5IGNvbXBhcmluZwoJICAgICAgICAgICAgICAgICAgICAgICAgLy8gdGhlIHBpeGVscyBpbiB0aGlzIGJsb2NrIHRvIHRoZSBwcmV2aW91c2x5IGNhbGN1bGF0ZWQgYmxhY2sgcG9pbnRzLiBUaGlzIGlzIGJhc2VkIG9uCgkgICAgICAgICAgICAgICAgICAgICAgICAvLyB0aGUgZmFjdCB0aGF0IGRhcmsgYmFyY29kZSBzeW1ib2xvZ3kgaXMgYWx3YXlzIHN1cnJvdW5kZWQgYnkgc29tZSBhbW91bnQgb2YgbGlnaHQKCSAgICAgICAgICAgICAgICAgICAgICAgIC8vIGJhY2tncm91bmQgZm9yIHdoaWNoIHJlYXNvbmFibGUgYmxhY2sgcG9pbnQgZXN0aW1hdGVzIHdlcmUgbWFkZS4gVGhlIGJwIGVzdGltYXRlZCBhdAoJICAgICAgICAgICAgICAgICAgICAgICAgLy8gdGhlIGJvdW5kYXJpZXMgaXMgdXNlZCBmb3IgdGhlIGludGVyaW9yLgoJICAgICAgICAgICAgICAgICAgICAgICAgLy8gVGhlIChtaW4gPCBicCkgaXMgYXJiaXRyYXJ5IGJ1dCB3b3JrcyBiZXR0ZXIgdGhhbiBvdGhlciBoZXVyaXN0aWNzIHRoYXQgd2VyZSB0cmllZC4KCSAgICAgICAgICAgICAgICAgICAgICAgIHZhciBhdmVyYWdlTmVpZ2hib3JCbGFja1BvaW50ID0gKGJsYWNrUG9pbnRzW3kgLSAxXVt4XSArICgyICogYmxhY2tQb2ludHNbeV1beCAtIDFdKSArIGJsYWNrUG9pbnRzW3kgLSAxXVt4IC0gMV0pIC8gNDsKCSAgICAgICAgICAgICAgICAgICAgICAgIGlmIChtaW4gPCBhdmVyYWdlTmVpZ2hib3JCbGFja1BvaW50KSB7CgkgICAgICAgICAgICAgICAgICAgICAgICAgICAgYXZlcmFnZSA9IGF2ZXJhZ2VOZWlnaGJvckJsYWNrUG9pbnQ7CgkgICAgICAgICAgICAgICAgICAgICAgICB9CgkgICAgICAgICAgICAgICAgICAgIH0KCSAgICAgICAgICAgICAgICB9CgkgICAgICAgICAgICAgICAgYmxhY2tQb2ludHNbeV1beF0gPSBhdmVyYWdlOwoJICAgICAgICAgICAgfQoJICAgICAgICB9CgkgICAgICAgIHJldHVybiBibGFja1BvaW50czsKCSAgICB9OwoJICAgIC8vIFRoaXMgY2xhc3MgdXNlcyA1eDUgYmxvY2tzIHRvIGNvbXB1dGUgbG9jYWwgbHVtaW5hbmNlLCB3aGVyZSBlYWNoIGJsb2NrIGlzIDh4OCBwaXhlbHMuCgkgICAgLy8gU28gdGhpcyBpcyB0aGUgc21hbGxlc3QgZGltZW5zaW9uIGluIGVhY2ggYXhpcyB3ZSBjYW4gYWNjZXB0LgoJICAgIEh5YnJpZEJpbmFyaXplci5CTE9DS19TSVpFX1BPV0VSID0gMzsKCSAgICBIeWJyaWRCaW5hcml6ZXIuQkxPQ0tfU0laRSA9IDEgPDwgSHlicmlkQmluYXJpemVyLkJMT0NLX1NJWkVfUE9XRVI7IC8vIC4uLjAxMDAuLi4wMAoJICAgIEh5YnJpZEJpbmFyaXplci5CTE9DS19TSVpFX01BU0sgPSBIeWJyaWRCaW5hcml6ZXIuQkxPQ0tfU0laRSAtIDE7IC8vIC4uLjAwMTEuLi4xMQoJICAgIEh5YnJpZEJpbmFyaXplci5NSU5JTVVNX0RJTUVOU0lPTiA9IEh5YnJpZEJpbmFyaXplci5CTE9DS19TSVpFICogNTsKCSAgICBIeWJyaWRCaW5hcml6ZXIuTUlOX0RZTkFNSUNfUkFOR0UgPSAyNDsKCSAgICByZXR1cm4gSHlicmlkQmluYXJpemVyOwoJfShHbG9iYWxIaXN0b2dyYW1CaW5hcml6ZXJfMS5kZWZhdWx0KSk7Cgl2YXIgX2RlZmF1bHQkMiA9IEh5YnJpZEJpbmFyaXplciQxLmRlZmF1bHQgPSBIeWJyaWRCaW5hcml6ZXI7CgoJdmFyIFJHQkx1bWluYW5jZVNvdXJjZSQxID0ge307CgoJdmFyIEludmVydGVkTHVtaW5hbmNlU291cmNlJDEgPSB7fTsKCgl2YXIgTHVtaW5hbmNlU291cmNlJDEgPSB7fTsKCgkvKgoJICogQ29weXJpZ2h0IDIwMDkgWlhpbmcgYXV0aG9ycwoJICoKCSAqIExpY2Vuc2VkIHVuZGVyIHRoZSBBcGFjaGUgTGljZW5zZSwgVmVyc2lvbiAyLjAgKHRoZSAiTGljZW5zZSIpOwoJICogeW91IG1heSBub3QgdXNlIHRoaXMgZmlsZSBleGNlcHQgaW4gY29tcGxpYW5jZSB3aXRoIHRoZSBMaWNlbnNlLgoJICogWW91IG1heSBvYnRhaW4gYSBjb3B5IG9mIHRoZSBMaWNlbnNlIGF0CgkgKgoJICogICAgICBodHRwOi8vd3d3LmFwYWNoZS5vcmcvbGljZW5zZXMvTElDRU5TRS0yLjAKCSAqCgkgKiBVbmxlc3MgcmVxdWlyZWQgYnkgYXBwbGljYWJsZSBsYXcgb3IgYWdyZWVkIHRvIGluIHdyaXRpbmcsIHNvZnR3YXJlCgkgKiBkaXN0cmlidXRlZCB1bmRlciB0aGUgTGljZW5zZSBpcyBkaXN0cmlidXRlZCBvbiBhbiAiQVMgSVMiIEJBU0lTLAoJICogV0lUSE9VVCBXQVJSQU5USUVTIE9SIENPTkRJVElPTlMgT0YgQU5ZIEtJTkQsIGVpdGhlciBleHByZXNzIG9yIGltcGxpZWQuCgkgKiBTZWUgdGhlIExpY2Vuc2UgZm9yIHRoZSBzcGVjaWZpYyBsYW5ndWFnZSBnb3Zlcm5pbmcgcGVybWlzc2lvbnMgYW5kCgkgKiBsaW1pdGF0aW9ucyB1bmRlciB0aGUgTGljZW5zZS4KCSAqLwoJT2JqZWN0LmRlZmluZVByb3BlcnR5KEx1bWluYW5jZVNvdXJjZSQxLCAiX19lc01vZHVsZSIsIHsgdmFsdWU6IHRydWUgfSk7Cgl2YXIgU3RyaW5nQnVpbGRlcl8xJDEgPSBTdHJpbmdCdWlsZGVyJDE7Cgl2YXIgVW5zdXBwb3J0ZWRPcGVyYXRpb25FeGNlcHRpb25fMSA9IFVuc3VwcG9ydGVkT3BlcmF0aW9uRXhjZXB0aW9uJDE7CgkvKm5hbWVzcGFjZSBjb20uZ29vZ2xlLnp4aW5nIHsqLwoJLyoqCgkgKiBUaGUgcHVycG9zZSBvZiB0aGlzIGNsYXNzIGhpZXJhcmNoeSBpcyB0byBhYnN0cmFjdCBkaWZmZXJlbnQgYml0bWFwIGltcGxlbWVudGF0aW9ucyBhY3Jvc3MKCSAqIHBsYXRmb3JtcyBpbnRvIGEgc3RhbmRhcmQgaW50ZXJmYWNlIGZvciByZXF1ZXN0aW5nIGdyZXlzY2FsZSBsdW1pbmFuY2UgdmFsdWVzLiBUaGUgaW50ZXJmYWNlCgkgKiBvbmx5IHByb3ZpZGVzIGltbXV0YWJsZSBtZXRob2RzOyB0aGVyZWZvcmUgY3JvcCBhbmQgcm90YXRpb24gY3JlYXRlIGNvcGllcy4gVGhpcyBpcyB0byBlbnN1cmUKCSAqIHRoYXQgb25lIFJlYWRlciBkb2VzIG5vdCBtb2RpZnkgdGhlIG9yaWdpbmFsIGx1bWluYW5jZSBzb3VyY2UgYW5kIGxlYXZlIGl0IGluIGFuIHVua25vd24gc3RhdGUKCSAqIGZvciBvdGhlciBSZWFkZXJzIGluIHRoZSBjaGFpbi4KCSAqCgkgKiBAYXV0aG9yIGRzd2l0a2luQGdvb2dsZS5jb20gKERhbmllbCBTd2l0a2luKQoJICovCgl2YXIgTHVtaW5hbmNlU291cmNlID0gLyoqIEBjbGFzcyAqLyAoZnVuY3Rpb24gKCkgewoJICAgIGZ1bmN0aW9uIEx1bWluYW5jZVNvdXJjZSh3aWR0aCAvKmludCovLCBoZWlnaHQgLyppbnQqLykgewoJICAgICAgICB0aGlzLndpZHRoID0gd2lkdGg7CgkgICAgICAgIHRoaXMuaGVpZ2h0ID0gaGVpZ2h0OwoJICAgIH0KCSAgICAvKioKCSAgICAgKiBAcmV0dXJuIFRoZSB3aWR0aCBvZiB0aGUgYml0bWFwLgoJICAgICAqLwoJICAgIEx1bWluYW5jZVNvdXJjZS5wcm90b3R5cGUuZ2V0V2lkdGggPSBmdW5jdGlvbiAoKSB7CgkgICAgICAgIHJldHVybiB0aGlzLndpZHRoOwoJICAgIH07CgkgICAgLyoqCgkgICAgICogQHJldHVybiBUaGUgaGVpZ2h0IG9mIHRoZSBiaXRtYXAuCgkgICAgICovCgkgICAgTHVtaW5hbmNlU291cmNlLnByb3RvdHlwZS5nZXRIZWlnaHQgPSBmdW5jdGlvbiAoKSB7CgkgICAgICAgIHJldHVybiB0aGlzLmhlaWdodDsKCSAgICB9OwoJICAgIC8qKgoJICAgICAqIEByZXR1cm4gV2hldGhlciB0aGlzIHN1YmNsYXNzIHN1cHBvcnRzIGNyb3BwaW5nLgoJICAgICAqLwoJICAgIEx1bWluYW5jZVNvdXJjZS5wcm90b3R5cGUuaXNDcm9wU3VwcG9ydGVkID0gZnVuY3Rpb24gKCkgewoJICAgICAgICByZXR1cm4gZmFsc2U7CgkgICAgfTsKCSAgICAvKioKCSAgICAgKiBSZXR1cm5zIGEgbmV3IG9iamVjdCB3aXRoIGNyb3BwZWQgaW1hZ2UgZGF0YS4gSW1wbGVtZW50YXRpb25zIG1heSBrZWVwIGEgcmVmZXJlbmNlIHRvIHRoZQoJICAgICAqIG9yaWdpbmFsIGRhdGEgcmF0aGVyIHRoYW4gYSBjb3B5LiBPbmx5IGNhbGxhYmxlIGlmIGlzQ3JvcFN1cHBvcnRlZCgpIGlzIHRydWUuCgkgICAgICoKCSAgICAgKiBAcGFyYW0gbGVmdCBUaGUgbGVmdCBjb29yZGluYXRlLCB3aGljaCBtdXN0IGJlIGluIFswLGdldFdpZHRoKCkpCgkgICAgICogQHBhcmFtIHRvcCBUaGUgdG9wIGNvb3JkaW5hdGUsIHdoaWNoIG11c3QgYmUgaW4gWzAsZ2V0SGVpZ2h0KCkpCgkgICAgICogQHBhcmFtIHdpZHRoIFRoZSB3aWR0aCBvZiB0aGUgcmVjdGFuZ2xlIHRvIGNyb3AuCgkgICAgICogQHBhcmFtIGhlaWdodCBUaGUgaGVpZ2h0IG9mIHRoZSByZWN0YW5nbGUgdG8gY3JvcC4KCSAgICAgKiBAcmV0dXJuIEEgY3JvcHBlZCB2ZXJzaW9uIG9mIHRoaXMgb2JqZWN0LgoJICAgICAqLwoJICAgIEx1bWluYW5jZVNvdXJjZS5wcm90b3R5cGUuY3JvcCA9IGZ1bmN0aW9uIChsZWZ0IC8qaW50Ki8sIHRvcCAvKmludCovLCB3aWR0aCAvKmludCovLCBoZWlnaHQgLyppbnQqLykgewoJICAgICAgICB0aHJvdyBuZXcgVW5zdXBwb3J0ZWRPcGVyYXRpb25FeGNlcHRpb25fMS5kZWZhdWx0KCdUaGlzIGx1bWluYW5jZSBzb3VyY2UgZG9lcyBub3Qgc3VwcG9ydCBjcm9wcGluZy4nKTsKCSAgICB9OwoJICAgIC8qKgoJICAgICAqIEByZXR1cm4gV2hldGhlciB0aGlzIHN1YmNsYXNzIHN1cHBvcnRzIGNvdW50ZXItY2xvY2t3aXNlIHJvdGF0aW9uLgoJICAgICAqLwoJICAgIEx1bWluYW5jZVNvdXJjZS5wcm90b3R5cGUuaXNSb3RhdGVTdXBwb3J0ZWQgPSBmdW5jdGlvbiAoKSB7CgkgICAgICAgIHJldHVybiBmYWxzZTsKCSAgICB9OwoJICAgIC8qKgoJICAgICAqIFJldHVybnMgYSBuZXcgb2JqZWN0IHdpdGggcm90YXRlZCBpbWFnZSBkYXRhIGJ5IDkwIGRlZ3JlZXMgY291bnRlcmNsb2Nrd2lzZS4KCSAgICAgKiBPbmx5IGNhbGxhYmxlIGlmIHtAbGluayAjaXNSb3RhdGVTdXBwb3J0ZWQoKX0gaXMgdHJ1ZS4KCSAgICAgKgoJICAgICAqIEByZXR1cm4gQSByb3RhdGVkIHZlcnNpb24gb2YgdGhpcyBvYmplY3QuCgkgICAgICovCgkgICAgTHVtaW5hbmNlU291cmNlLnByb3RvdHlwZS5yb3RhdGVDb3VudGVyQ2xvY2t3aXNlID0gZnVuY3Rpb24gKCkgewoJICAgICAgICB0aHJvdyBuZXcgVW5zdXBwb3J0ZWRPcGVyYXRpb25FeGNlcHRpb25fMS5kZWZhdWx0KCdUaGlzIGx1bWluYW5jZSBzb3VyY2UgZG9lcyBub3Qgc3VwcG9ydCByb3RhdGlvbiBieSA5MCBkZWdyZWVzLicpOwoJICAgIH07CgkgICAgLyoqCgkgICAgICogUmV0dXJucyBhIG5ldyBvYmplY3Qgd2l0aCByb3RhdGVkIGltYWdlIGRhdGEgYnkgNDUgZGVncmVlcyBjb3VudGVyY2xvY2t3aXNlLgoJICAgICAqIE9ubHkgY2FsbGFibGUgaWYge0BsaW5rICNpc1JvdGF0ZVN1cHBvcnRlZCgpfSBpcyB0cnVlLgoJICAgICAqCgkgICAgICogQHJldHVybiBBIHJvdGF0ZWQgdmVyc2lvbiBvZiB0aGlzIG9iamVjdC4KCSAgICAgKi8KCSAgICBMdW1pbmFuY2VTb3VyY2UucHJvdG90eXBlLnJvdGF0ZUNvdW50ZXJDbG9ja3dpc2U0NSA9IGZ1bmN0aW9uICgpIHsKCSAgICAgICAgdGhyb3cgbmV3IFVuc3VwcG9ydGVkT3BlcmF0aW9uRXhjZXB0aW9uXzEuZGVmYXVsdCgnVGhpcyBsdW1pbmFuY2Ugc291cmNlIGRvZXMgbm90IHN1cHBvcnQgcm90YXRpb24gYnkgNDUgZGVncmVlcy4nKTsKCSAgICB9OwoJICAgIC8qQE92ZXJyaWRlKi8KCSAgICBMdW1pbmFuY2VTb3VyY2UucHJvdG90eXBlLnRvU3RyaW5nID0gZnVuY3Rpb24gKCkgewoJICAgICAgICB2YXIgcm93ID0gbmV3IFVpbnQ4Q2xhbXBlZEFycmF5KHRoaXMud2lkdGgpOwoJICAgICAgICB2YXIgcmVzdWx0ID0gbmV3IFN0cmluZ0J1aWxkZXJfMSQxLmRlZmF1bHQoKTsKCSAgICAgICAgZm9yICh2YXIgeSA9IDA7IHkgPCB0aGlzLmhlaWdodDsgeSsrKSB7CgkgICAgICAgICAgICB2YXIgc291cmNlUm93ID0gdGhpcy5nZXRSb3coeSwgcm93KTsKCSAgICAgICAgICAgIGZvciAodmFyIHggPSAwOyB4IDwgdGhpcy53aWR0aDsgeCsrKSB7CgkgICAgICAgICAgICAgICAgdmFyIGx1bWluYW5jZSA9IHNvdXJjZVJvd1t4XSAmIDB4RkY7CgkgICAgICAgICAgICAgICAgdmFyIGMgPSB2b2lkIDA7CgkgICAgICAgICAgICAgICAgaWYgKGx1bWluYW5jZSA8IDB4NDApIHsKCSAgICAgICAgICAgICAgICAgICAgYyA9ICcjJzsKCSAgICAgICAgICAgICAgICB9CgkgICAgICAgICAgICAgICAgZWxzZSBpZiAobHVtaW5hbmNlIDwgMHg4MCkgewoJICAgICAgICAgICAgICAgICAgICBjID0gJysnOwoJICAgICAgICAgICAgICAgIH0KCSAgICAgICAgICAgICAgICBlbHNlIGlmIChsdW1pbmFuY2UgPCAweEMwKSB7CgkgICAgICAgICAgICAgICAgICAgIGMgPSAnLic7CgkgICAgICAgICAgICAgICAgfQoJICAgICAgICAgICAgICAgIGVsc2UgewoJICAgICAgICAgICAgICAgICAgICBjID0gJyAnOwoJICAgICAgICAgICAgICAgIH0KCSAgICAgICAgICAgICAgICByZXN1bHQuYXBwZW5kKGMpOwoJICAgICAgICAgICAgfQoJICAgICAgICAgICAgcmVzdWx0LmFwcGVuZCgnXG4nKTsKCSAgICAgICAgfQoJICAgICAgICByZXR1cm4gcmVzdWx0LnRvU3RyaW5nKCk7CgkgICAgfTsKCSAgICByZXR1cm4gTHVtaW5hbmNlU291cmNlOwoJfSgpKTsKCUx1bWluYW5jZVNvdXJjZSQxLmRlZmF1bHQgPSBMdW1pbmFuY2VTb3VyY2U7CgoJLyoKCSAqIENvcHlyaWdodCAyMDA5IFpYaW5nIGF1dGhvcnMKCSAqCgkgKiBMaWNlbnNlZCB1bmRlciB0aGUgQXBhY2hlIExpY2Vuc2UsIFZlcnNpb24gMi4wICh0aGUgIkxpY2Vuc2UiKTsKCSAqIHlvdSBtYXkgbm90IHVzZSB0aGlzIGZpbGUgZXhjZXB0IGluIGNvbXBsaWFuY2Ugd2l0aCB0aGUgTGljZW5zZS4KCSAqIFlvdSBtYXkgb2J0YWluIGEgY29weSBvZiB0aGUgTGljZW5zZSBhdAoJICoKCSAqICAgICAgaHR0cDovL3d3dy5hcGFjaGUub3JnL2xpY2Vuc2VzL0xJQ0VOU0UtMi4wCgkgKgoJICogVW5sZXNzIHJlcXVpcmVkIGJ5IGFwcGxpY2FibGUgbGF3IG9yIGFncmVlZCB0byBpbiB3cml0aW5nLCBzb2Z0d2FyZQoJICogZGlzdHJpYnV0ZWQgdW5kZXIgdGhlIExpY2Vuc2UgaXMgZGlzdHJpYnV0ZWQgb24gYW4gIkFTIElTIiBCQVNJUywKCSAqIFdJVEhPVVQgV0FSUkFOVElFUyBPUiBDT05ESVRJT05TIE9GIEFOWSBLSU5ELCBlaXRoZXIgZXhwcmVzcyBvciBpbXBsaWVkLgoJICogU2VlIHRoZSBMaWNlbnNlIGZvciB0aGUgc3BlY2lmaWMgbGFuZ3VhZ2UgZ292ZXJuaW5nIHBlcm1pc3Npb25zIGFuZAoJICogbGltaXRhdGlvbnMgdW5kZXIgdGhlIExpY2Vuc2UuCgkgKi8KCXZhciBfX2V4dGVuZHMkYSA9IChjb21tb25qc0dsb2JhbCAmJiBjb21tb25qc0dsb2JhbC5fX2V4dGVuZHMpIHx8IChmdW5jdGlvbiAoKSB7CgkgICAgdmFyIGV4dGVuZFN0YXRpY3MgPSBmdW5jdGlvbiAoZCwgYikgewoJICAgICAgICBleHRlbmRTdGF0aWNzID0gT2JqZWN0LnNldFByb3RvdHlwZU9mIHx8CgkgICAgICAgICAgICAoeyBfX3Byb3RvX186IFtdIH0gaW5zdGFuY2VvZiBBcnJheSAmJiBmdW5jdGlvbiAoZCwgYikgeyBkLl9fcHJvdG9fXyA9IGI7IH0pIHx8CgkgICAgICAgICAgICBmdW5jdGlvbiAoZCwgYikgeyBmb3IgKHZhciBwIGluIGIpIGlmIChiLmhhc093blByb3BlcnR5KHApKSBkW3BdID0gYltwXTsgfTsKCSAgICAgICAgcmV0dXJuIGV4dGVuZFN0YXRpY3MoZCwgYik7CgkgICAgfTsKCSAgICByZXR1cm4gZnVuY3Rpb24gKGQsIGIpIHsKCSAgICAgICAgZXh0ZW5kU3RhdGljcyhkLCBiKTsKCSAgICAgICAgZnVuY3Rpb24gX18oKSB7IHRoaXMuY29uc3RydWN0b3IgPSBkOyB9CgkgICAgICAgIGQucHJvdG90eXBlID0gYiA9PT0gbnVsbCA/IE9iamVjdC5jcmVhdGUoYikgOiAoX18ucHJvdG90eXBlID0gYi5wcm90b3R5cGUsIG5ldyBfXygpKTsKCSAgICB9OwoJfSkoKTsKCU9iamVjdC5kZWZpbmVQcm9wZXJ0eShJbnZlcnRlZEx1bWluYW5jZVNvdXJjZSQxLCAiX19lc01vZHVsZSIsIHsgdmFsdWU6IHRydWUgfSk7Cgl2YXIgTHVtaW5hbmNlU291cmNlXzEkMSA9IEx1bWluYW5jZVNvdXJjZSQxOwoJLypuYW1lc3BhY2UgY29tLmdvb2dsZS56eGluZyB7Ki8KCS8qKgoJICogQSB3cmFwcGVyIGltcGxlbWVudGF0aW9uIG9mIHtAbGluayBMdW1pbmFuY2VTb3VyY2V9IHdoaWNoIGludmVydHMgdGhlIGx1bWluYW5jZXMgaXQgcmV0dXJucyAtLSBibGFjayBiZWNvbWVzCgkgKiB3aGl0ZSBhbmQgdmljZSB2ZXJzYSwgYW5kIGVhY2ggdmFsdWUgYmVjb21lcyAoMjU1LXZhbHVlKS4KCSAqCgkgKiBAYXV0aG9yIFNlYW4gT3dlbgoJICovCgl2YXIgSW52ZXJ0ZWRMdW1pbmFuY2VTb3VyY2UgPSAvKiogQGNsYXNzICovIChmdW5jdGlvbiAoX3N1cGVyKSB7CgkgICAgX19leHRlbmRzJGEoSW52ZXJ0ZWRMdW1pbmFuY2VTb3VyY2UsIF9zdXBlcik7CgkgICAgZnVuY3Rpb24gSW52ZXJ0ZWRMdW1pbmFuY2VTb3VyY2UoZGVsZWdhdGUpIHsKCSAgICAgICAgdmFyIF90aGlzID0gX3N1cGVyLmNhbGwodGhpcywgZGVsZWdhdGUuZ2V0V2lkdGgoKSwgZGVsZWdhdGUuZ2V0SGVpZ2h0KCkpIHx8IHRoaXM7CgkgICAgICAgIF90aGlzLmRlbGVnYXRlID0gZGVsZWdhdGU7CgkgICAgICAgIHJldHVybiBfdGhpczsKCSAgICB9CgkgICAgLypAT3ZlcnJpZGUqLwoJICAgIEludmVydGVkTHVtaW5hbmNlU291cmNlLnByb3RvdHlwZS5nZXRSb3cgPSBmdW5jdGlvbiAoeSAvKmludCovLCByb3cpIHsKCSAgICAgICAgdmFyIHNvdXJjZVJvdyA9IHRoaXMuZGVsZWdhdGUuZ2V0Um93KHksIHJvdyk7CgkgICAgICAgIHZhciB3aWR0aCA9IHRoaXMuZ2V0V2lkdGgoKTsKCSAgICAgICAgZm9yICh2YXIgaSA9IDA7IGkgPCB3aWR0aDsgaSsrKSB7CgkgICAgICAgICAgICBzb3VyY2VSb3dbaV0gPSAvKihieXRlKSovICgyNTUgLSAoc291cmNlUm93W2ldICYgMHhGRikpOwoJICAgICAgICB9CgkgICAgICAgIHJldHVybiBzb3VyY2VSb3c7CgkgICAgfTsKCSAgICAvKkBPdmVycmlkZSovCgkgICAgSW52ZXJ0ZWRMdW1pbmFuY2VTb3VyY2UucHJvdG90eXBlLmdldE1hdHJpeCA9IGZ1bmN0aW9uICgpIHsKCSAgICAgICAgdmFyIG1hdHJpeCA9IHRoaXMuZGVsZWdhdGUuZ2V0TWF0cml4KCk7CgkgICAgICAgIHZhciBsZW5ndGggPSB0aGlzLmdldFdpZHRoKCkgKiB0aGlzLmdldEhlaWdodCgpOwoJICAgICAgICB2YXIgaW52ZXJ0ZWRNYXRyaXggPSBuZXcgVWludDhDbGFtcGVkQXJyYXkobGVuZ3RoKTsKCSAgICAgICAgZm9yICh2YXIgaSA9IDA7IGkgPCBsZW5ndGg7IGkrKykgewoJICAgICAgICAgICAgaW52ZXJ0ZWRNYXRyaXhbaV0gPSAvKihieXRlKSovICgyNTUgLSAobWF0cml4W2ldICYgMHhGRikpOwoJICAgICAgICB9CgkgICAgICAgIHJldHVybiBpbnZlcnRlZE1hdHJpeDsKCSAgICB9OwoJICAgIC8qQE92ZXJyaWRlKi8KCSAgICBJbnZlcnRlZEx1bWluYW5jZVNvdXJjZS5wcm90b3R5cGUuaXNDcm9wU3VwcG9ydGVkID0gZnVuY3Rpb24gKCkgewoJICAgICAgICByZXR1cm4gdGhpcy5kZWxlZ2F0ZS5pc0Nyb3BTdXBwb3J0ZWQoKTsKCSAgICB9OwoJICAgIC8qQE92ZXJyaWRlKi8KCSAgICBJbnZlcnRlZEx1bWluYW5jZVNvdXJjZS5wcm90b3R5cGUuY3JvcCA9IGZ1bmN0aW9uIChsZWZ0IC8qaW50Ki8sIHRvcCAvKmludCovLCB3aWR0aCAvKmludCovLCBoZWlnaHQgLyppbnQqLykgewoJICAgICAgICByZXR1cm4gbmV3IEludmVydGVkTHVtaW5hbmNlU291cmNlKHRoaXMuZGVsZWdhdGUuY3JvcChsZWZ0LCB0b3AsIHdpZHRoLCBoZWlnaHQpKTsKCSAgICB9OwoJICAgIC8qQE92ZXJyaWRlKi8KCSAgICBJbnZlcnRlZEx1bWluYW5jZVNvdXJjZS5wcm90b3R5cGUuaXNSb3RhdGVTdXBwb3J0ZWQgPSBmdW5jdGlvbiAoKSB7CgkgICAgICAgIHJldHVybiB0aGlzLmRlbGVnYXRlLmlzUm90YXRlU3VwcG9ydGVkKCk7CgkgICAgfTsKCSAgICAvKioKCSAgICAgKiBAcmV0dXJuIG9yaWdpbmFsIGRlbGVnYXRlIHtAbGluayBMdW1pbmFuY2VTb3VyY2V9IHNpbmNlIGludmVydCB1bmRvZXMgaXRzZWxmCgkgICAgICovCgkgICAgLypAT3ZlcnJpZGUqLwoJICAgIEludmVydGVkTHVtaW5hbmNlU291cmNlLnByb3RvdHlwZS5pbnZlcnQgPSBmdW5jdGlvbiAoKSB7CgkgICAgICAgIHJldHVybiB0aGlzLmRlbGVnYXRlOwoJICAgIH07CgkgICAgLypAT3ZlcnJpZGUqLwoJICAgIEludmVydGVkTHVtaW5hbmNlU291cmNlLnByb3RvdHlwZS5yb3RhdGVDb3VudGVyQ2xvY2t3aXNlID0gZnVuY3Rpb24gKCkgewoJICAgICAgICByZXR1cm4gbmV3IEludmVydGVkTHVtaW5hbmNlU291cmNlKHRoaXMuZGVsZWdhdGUucm90YXRlQ291bnRlckNsb2Nrd2lzZSgpKTsKCSAgICB9OwoJICAgIC8qQE92ZXJyaWRlKi8KCSAgICBJbnZlcnRlZEx1bWluYW5jZVNvdXJjZS5wcm90b3R5cGUucm90YXRlQ291bnRlckNsb2Nrd2lzZTQ1ID0gZnVuY3Rpb24gKCkgewoJICAgICAgICByZXR1cm4gbmV3IEludmVydGVkTHVtaW5hbmNlU291cmNlKHRoaXMuZGVsZWdhdGUucm90YXRlQ291bnRlckNsb2Nrd2lzZTQ1KCkpOwoJICAgIH07CgkgICAgcmV0dXJuIEludmVydGVkTHVtaW5hbmNlU291cmNlOwoJfShMdW1pbmFuY2VTb3VyY2VfMSQxLmRlZmF1bHQpKTsKCUludmVydGVkTHVtaW5hbmNlU291cmNlJDEuZGVmYXVsdCA9IEludmVydGVkTHVtaW5hbmNlU291cmNlOwoKCS8qCgkgKiBDb3B5cmlnaHQgMjAwOSBaWGluZyBhdXRob3JzCgkgKgoJICogTGljZW5zZWQgdW5kZXIgdGhlIEFwYWNoZSBMaWNlbnNlLCBWZXJzaW9uIDIuMCAodGhlICJMaWNlbnNlIik7CgkgKiB5b3UgbWF5IG5vdCB1c2UgdGhpcyBmaWxlIGV4Y2VwdCBpbiBjb21wbGlhbmNlIHdpdGggdGhlIExpY2Vuc2UuCgkgKiBZb3UgbWF5IG9idGFpbiBhIGNvcHkgb2YgdGhlIExpY2Vuc2UgYXQKCSAqCgkgKiAgICAgIGh0dHA6Ly93d3cuYXBhY2hlLm9yZy9saWNlbnNlcy9MSUNFTlNFLTIuMAoJICoKCSAqIFVubGVzcyByZXF1aXJlZCBieSBhcHBsaWNhYmxlIGxhdyBvciBhZ3JlZWQgdG8gaW4gd3JpdGluZywgc29mdHdhcmUKCSAqIGRpc3RyaWJ1dGVkIHVuZGVyIHRoZSBMaWNlbnNlIGlzIGRpc3RyaWJ1dGVkIG9uIGFuICJBUyBJUyIgQkFTSVMsCgkgKiBXSVRIT1VUIFdBUlJBTlRJRVMgT1IgQ09ORElUSU9OUyBPRiBBTlkgS0lORCwgZWl0aGVyIGV4cHJlc3Mgb3IgaW1wbGllZC4KCSAqIFNlZSB0aGUgTGljZW5zZSBmb3IgdGhlIHNwZWNpZmljIGxhbmd1YWdlIGdvdmVybmluZyBwZXJtaXNzaW9ucyBhbmQKCSAqIGxpbWl0YXRpb25zIHVuZGVyIHRoZSBMaWNlbnNlLgoJICovCgl2YXIgX19leHRlbmRzJDkgPSAoY29tbW9uanNHbG9iYWwgJiYgY29tbW9uanNHbG9iYWwuX19leHRlbmRzKSB8fCAoZnVuY3Rpb24gKCkgewoJICAgIHZhciBleHRlbmRTdGF0aWNzID0gZnVuY3Rpb24gKGQsIGIpIHsKCSAgICAgICAgZXh0ZW5kU3RhdGljcyA9IE9iamVjdC5zZXRQcm90b3R5cGVPZiB8fAoJICAgICAgICAgICAgKHsgX19wcm90b19fOiBbXSB9IGluc3RhbmNlb2YgQXJyYXkgJiYgZnVuY3Rpb24gKGQsIGIpIHsgZC5fX3Byb3RvX18gPSBiOyB9KSB8fAoJICAgICAgICAgICAgZnVuY3Rpb24gKGQsIGIpIHsgZm9yICh2YXIgcCBpbiBiKSBpZiAoYi5oYXNPd25Qcm9wZXJ0eShwKSkgZFtwXSA9IGJbcF07IH07CgkgICAgICAgIHJldHVybiBleHRlbmRTdGF0aWNzKGQsIGIpOwoJICAgIH07CgkgICAgcmV0dXJuIGZ1bmN0aW9uIChkLCBiKSB7CgkgICAgICAgIGV4dGVuZFN0YXRpY3MoZCwgYik7CgkgICAgICAgIGZ1bmN0aW9uIF9fKCkgeyB0aGlzLmNvbnN0cnVjdG9yID0gZDsgfQoJICAgICAgICBkLnByb3RvdHlwZSA9IGIgPT09IG51bGwgPyBPYmplY3QuY3JlYXRlKGIpIDogKF9fLnByb3RvdHlwZSA9IGIucHJvdG90eXBlLCBuZXcgX18oKSk7CgkgICAgfTsKCX0pKCk7CglPYmplY3QuZGVmaW5lUHJvcGVydHkoUkdCTHVtaW5hbmNlU291cmNlJDEsICJfX2VzTW9kdWxlIiwgeyB2YWx1ZTogdHJ1ZSB9KTsKCS8qbmFtZXNwYWNlIGNvbS5nb29nbGUuenhpbmcgeyovCgkgLy8gcmVxdWlyZWQgYmVjYXVzZSBvZiBjaXJjdWxhciBkZXBlbmRlbmNpZXMgYmV0d2VlbiBMdW1pbmFuY2VTb3VyY2UgYW5kIEludmVydGVkTHVtaW5hbmNlU291cmNlCgl2YXIgSW52ZXJ0ZWRMdW1pbmFuY2VTb3VyY2VfMSA9IEludmVydGVkTHVtaW5hbmNlU291cmNlJDE7Cgl2YXIgTHVtaW5hbmNlU291cmNlXzEgPSBMdW1pbmFuY2VTb3VyY2UkMTsKCXZhciBTeXN0ZW1fMSQyID0gU3lzdGVtJDE7Cgl2YXIgSWxsZWdhbEFyZ3VtZW50RXhjZXB0aW9uXzEkNiA9IElsbGVnYWxBcmd1bWVudEV4Y2VwdGlvbiQxOwoJLyoqCgkgKiBUaGlzIGNsYXNzIGlzIHVzZWQgdG8gaGVscCBkZWNvZGUgaW1hZ2VzIGZyb20gZmlsZXMgd2hpY2ggYXJyaXZlIGFzIFJHQiBkYXRhIGZyb20KCSAqIGFuIEFSR0IgcGl4ZWwgYXJyYXkuIEl0IGRvZXMgbm90IHN1cHBvcnQgcm90YXRpb24uCgkgKgoJICogQGF1dGhvciBkc3dpdGtpbkBnb29nbGUuY29tIChEYW5pZWwgU3dpdGtpbikKCSAqIEBhdXRob3IgQmV0YW1pbm9zCgkgKi8KCXZhciBSR0JMdW1pbmFuY2VTb3VyY2UgPSAvKiogQGNsYXNzICovIChmdW5jdGlvbiAoX3N1cGVyKSB7CgkgICAgX19leHRlbmRzJDkoUkdCTHVtaW5hbmNlU291cmNlLCBfc3VwZXIpOwoJICAgIGZ1bmN0aW9uIFJHQkx1bWluYW5jZVNvdXJjZShsdW1pbmFuY2VzLCB3aWR0aCAvKmludCovLCBoZWlnaHQgLyppbnQqLywgZGF0YVdpZHRoIC8qaW50Ki8sIGRhdGFIZWlnaHQgLyppbnQqLywgbGVmdCAvKmludCovLCB0b3AgLyppbnQqLykgewoJICAgICAgICB2YXIgX3RoaXMgPSBfc3VwZXIuY2FsbCh0aGlzLCB3aWR0aCwgaGVpZ2h0KSB8fCB0aGlzOwoJICAgICAgICBfdGhpcy5kYXRhV2lkdGggPSBkYXRhV2lkdGg7CgkgICAgICAgIF90aGlzLmRhdGFIZWlnaHQgPSBkYXRhSGVpZ2h0OwoJICAgICAgICBfdGhpcy5sZWZ0ID0gbGVmdDsKCSAgICAgICAgX3RoaXMudG9wID0gdG9wOwoJICAgICAgICBpZiAobHVtaW5hbmNlcy5CWVRFU19QRVJfRUxFTUVOVCA9PT0gNCkgeyAvLyBJbnQzMkFycmF5CgkgICAgICAgICAgICB2YXIgc2l6ZSA9IHdpZHRoICogaGVpZ2h0OwoJICAgICAgICAgICAgdmFyIGx1bWluYW5jZXNVaW50OEFycmF5ID0gbmV3IFVpbnQ4Q2xhbXBlZEFycmF5KHNpemUpOwoJICAgICAgICAgICAgZm9yICh2YXIgb2Zmc2V0ID0gMDsgb2Zmc2V0IDwgc2l6ZTsgb2Zmc2V0KyspIHsKCSAgICAgICAgICAgICAgICB2YXIgcGl4ZWwgPSBsdW1pbmFuY2VzW29mZnNldF07CgkgICAgICAgICAgICAgICAgdmFyIHIgPSAocGl4ZWwgPj4gMTYpICYgMHhmZjsgLy8gcmVkCgkgICAgICAgICAgICAgICAgdmFyIGcyID0gKHBpeGVsID4+IDcpICYgMHgxZmU7IC8vIDIgKiBncmVlbgoJICAgICAgICAgICAgICAgIHZhciBiID0gcGl4ZWwgJiAweGZmOyAvLyBibHVlCgkgICAgICAgICAgICAgICAgLy8gQ2FsY3VsYXRlIGdyZWVuLWZhdm91cmluZyBhdmVyYWdlIGNoZWFwbHkKCSAgICAgICAgICAgICAgICBsdW1pbmFuY2VzVWludDhBcnJheVtvZmZzZXRdID0gLyooYnl0ZSkgKi8gKChyICsgZzIgKyBiKSAvIDQpICYgMHhGRjsKCSAgICAgICAgICAgIH0KCSAgICAgICAgICAgIF90aGlzLmx1bWluYW5jZXMgPSBsdW1pbmFuY2VzVWludDhBcnJheTsKCSAgICAgICAgfQoJICAgICAgICBlbHNlIHsKCSAgICAgICAgICAgIF90aGlzLmx1bWluYW5jZXMgPSBsdW1pbmFuY2VzOwoJICAgICAgICB9CgkgICAgICAgIGlmICh1bmRlZmluZWQgPT09IGRhdGFXaWR0aCkgewoJICAgICAgICAgICAgX3RoaXMuZGF0YVdpZHRoID0gd2lkdGg7CgkgICAgICAgIH0KCSAgICAgICAgaWYgKHVuZGVmaW5lZCA9PT0gZGF0YUhlaWdodCkgewoJICAgICAgICAgICAgX3RoaXMuZGF0YUhlaWdodCA9IGhlaWdodDsKCSAgICAgICAgfQoJICAgICAgICBpZiAodW5kZWZpbmVkID09PSBsZWZ0KSB7CgkgICAgICAgICAgICBfdGhpcy5sZWZ0ID0gMDsKCSAgICAgICAgfQoJICAgICAgICBpZiAodW5kZWZpbmVkID09PSB0b3ApIHsKCSAgICAgICAgICAgIF90aGlzLnRvcCA9IDA7CgkgICAgICAgIH0KCSAgICAgICAgaWYgKF90aGlzLmxlZnQgKyB3aWR0aCA+IF90aGlzLmRhdGFXaWR0aCB8fCBfdGhpcy50b3AgKyBoZWlnaHQgPiBfdGhpcy5kYXRhSGVpZ2h0KSB7CgkgICAgICAgICAgICB0aHJvdyBuZXcgSWxsZWdhbEFyZ3VtZW50RXhjZXB0aW9uXzEkNi5kZWZhdWx0KCdDcm9wIHJlY3RhbmdsZSBkb2VzIG5vdCBmaXQgd2l0aGluIGltYWdlIGRhdGEuJyk7CgkgICAgICAgIH0KCSAgICAgICAgcmV0dXJuIF90aGlzOwoJICAgIH0KCSAgICAvKkBPdmVycmlkZSovCgkgICAgUkdCTHVtaW5hbmNlU291cmNlLnByb3RvdHlwZS5nZXRSb3cgPSBmdW5jdGlvbiAoeSAvKmludCovLCByb3cpIHsKCSAgICAgICAgaWYgKHkgPCAwIHx8IHkgPj0gdGhpcy5nZXRIZWlnaHQoKSkgewoJICAgICAgICAgICAgdGhyb3cgbmV3IElsbGVnYWxBcmd1bWVudEV4Y2VwdGlvbl8xJDYuZGVmYXVsdCgnUmVxdWVzdGVkIHJvdyBpcyBvdXRzaWRlIHRoZSBpbWFnZTogJyArIHkpOwoJICAgICAgICB9CgkgICAgICAgIHZhciB3aWR0aCA9IHRoaXMuZ2V0V2lkdGgoKTsKCSAgICAgICAgaWYgKHJvdyA9PT0gbnVsbCB8fCByb3cgPT09IHVuZGVmaW5lZCB8fCByb3cubGVuZ3RoIDwgd2lkdGgpIHsKCSAgICAgICAgICAgIHJvdyA9IG5ldyBVaW50OENsYW1wZWRBcnJheSh3aWR0aCk7CgkgICAgICAgIH0KCSAgICAgICAgdmFyIG9mZnNldCA9ICh5ICsgdGhpcy50b3ApICogdGhpcy5kYXRhV2lkdGggKyB0aGlzLmxlZnQ7CgkgICAgICAgIFN5c3RlbV8xJDIuZGVmYXVsdC5hcnJheWNvcHkodGhpcy5sdW1pbmFuY2VzLCBvZmZzZXQsIHJvdywgMCwgd2lkdGgpOwoJICAgICAgICByZXR1cm4gcm93OwoJICAgIH07CgkgICAgLypAT3ZlcnJpZGUqLwoJICAgIFJHQkx1bWluYW5jZVNvdXJjZS5wcm90b3R5cGUuZ2V0TWF0cml4ID0gZnVuY3Rpb24gKCkgewoJICAgICAgICB2YXIgd2lkdGggPSB0aGlzLmdldFdpZHRoKCk7CgkgICAgICAgIHZhciBoZWlnaHQgPSB0aGlzLmdldEhlaWdodCgpOwoJICAgICAgICAvLyBJZiB0aGUgY2FsbGVyIGFza3MgZm9yIHRoZSBlbnRpcmUgdW5kZXJseWluZyBpbWFnZSwgc2F2ZSB0aGUgY29weSBhbmQgZ2l2ZSB0aGVtIHRoZQoJICAgICAgICAvLyBvcmlnaW5hbCBkYXRhLiBUaGUgZG9jcyBzcGVjaWZpY2FsbHkgd2FybiB0aGF0IHJlc3VsdC5sZW5ndGggbXVzdCBiZSBpZ25vcmVkLgoJICAgICAgICBpZiAod2lkdGggPT09IHRoaXMuZGF0YVdpZHRoICYmIGhlaWdodCA9PT0gdGhpcy5kYXRhSGVpZ2h0KSB7CgkgICAgICAgICAgICByZXR1cm4gdGhpcy5sdW1pbmFuY2VzOwoJICAgICAgICB9CgkgICAgICAgIHZhciBhcmVhID0gd2lkdGggKiBoZWlnaHQ7CgkgICAgICAgIHZhciBtYXRyaXggPSBuZXcgVWludDhDbGFtcGVkQXJyYXkoYXJlYSk7CgkgICAgICAgIHZhciBpbnB1dE9mZnNldCA9IHRoaXMudG9wICogdGhpcy5kYXRhV2lkdGggKyB0aGlzLmxlZnQ7CgkgICAgICAgIC8vIElmIHRoZSB3aWR0aCBtYXRjaGVzIHRoZSBmdWxsIHdpZHRoIG9mIHRoZSB1bmRlcmx5aW5nIGRhdGEsIHBlcmZvcm0gYSBzaW5nbGUgY29weS4KCSAgICAgICAgaWYgKHdpZHRoID09PSB0aGlzLmRhdGFXaWR0aCkgewoJICAgICAgICAgICAgU3lzdGVtXzEkMi5kZWZhdWx0LmFycmF5Y29weSh0aGlzLmx1bWluYW5jZXMsIGlucHV0T2Zmc2V0LCBtYXRyaXgsIDAsIGFyZWEpOwoJICAgICAgICAgICAgcmV0dXJuIG1hdHJpeDsKCSAgICAgICAgfQoJICAgICAgICAvLyBPdGhlcndpc2UgY29weSBvbmUgY3JvcHBlZCByb3cgYXQgYSB0aW1lLgoJICAgICAgICBmb3IgKHZhciB5ID0gMDsgeSA8IGhlaWdodDsgeSsrKSB7CgkgICAgICAgICAgICB2YXIgb3V0cHV0T2Zmc2V0ID0geSAqIHdpZHRoOwoJICAgICAgICAgICAgU3lzdGVtXzEkMi5kZWZhdWx0LmFycmF5Y29weSh0aGlzLmx1bWluYW5jZXMsIGlucHV0T2Zmc2V0LCBtYXRyaXgsIG91dHB1dE9mZnNldCwgd2lkdGgpOwoJICAgICAgICAgICAgaW5wdXRPZmZzZXQgKz0gdGhpcy5kYXRhV2lkdGg7CgkgICAgICAgIH0KCSAgICAgICAgcmV0dXJuIG1hdHJpeDsKCSAgICB9OwoJICAgIC8qQE92ZXJyaWRlKi8KCSAgICBSR0JMdW1pbmFuY2VTb3VyY2UucHJvdG90eXBlLmlzQ3JvcFN1cHBvcnRlZCA9IGZ1bmN0aW9uICgpIHsKCSAgICAgICAgcmV0dXJuIHRydWU7CgkgICAgfTsKCSAgICAvKkBPdmVycmlkZSovCgkgICAgUkdCTHVtaW5hbmNlU291cmNlLnByb3RvdHlwZS5jcm9wID0gZnVuY3Rpb24gKGxlZnQgLyppbnQqLywgdG9wIC8qaW50Ki8sIHdpZHRoIC8qaW50Ki8sIGhlaWdodCAvKmludCovKSB7CgkgICAgICAgIHJldHVybiBuZXcgUkdCTHVtaW5hbmNlU291cmNlKHRoaXMubHVtaW5hbmNlcywgd2lkdGgsIGhlaWdodCwgdGhpcy5kYXRhV2lkdGgsIHRoaXMuZGF0YUhlaWdodCwgdGhpcy5sZWZ0ICsgbGVmdCwgdGhpcy50b3AgKyB0b3ApOwoJICAgIH07CgkgICAgUkdCTHVtaW5hbmNlU291cmNlLnByb3RvdHlwZS5pbnZlcnQgPSBmdW5jdGlvbiAoKSB7CgkgICAgICAgIHJldHVybiBuZXcgSW52ZXJ0ZWRMdW1pbmFuY2VTb3VyY2VfMS5kZWZhdWx0KHRoaXMpOwoJICAgIH07CgkgICAgcmV0dXJuIFJHQkx1bWluYW5jZVNvdXJjZTsKCX0oTHVtaW5hbmNlU291cmNlXzEuZGVmYXVsdCkpOwoJdmFyIF9kZWZhdWx0JDEgPSBSR0JMdW1pbmFuY2VTb3VyY2UkMS5kZWZhdWx0ID0gUkdCTHVtaW5hbmNlU291cmNlOwoKCXZhciBRUkNvZGVSZWFkZXIkMSA9IHt9OwoKCXZhciBCYXJjb2RlRm9ybWF0JDEgPSB7fTsKCgkvKgoJICogRGlyZWN0IHBvcnQgdG8gVHlwZVNjcmlwdCBvZiBaWGluZyBieSBBZHJpYW4gVG/ImWPEgwoJICovCglPYmplY3QuZGVmaW5lUHJvcGVydHkoQmFyY29kZUZvcm1hdCQxLCAiX19lc01vZHVsZSIsIHsgdmFsdWU6IHRydWUgfSk7CgkvKgoJICogQ29weXJpZ2h0IDIwMDkgWlhpbmcgYXV0aG9ycwoJICoKCSAqIExpY2Vuc2VkIHVuZGVyIHRoZSBBcGFjaGUgTGljZW5zZSwgVmVyc2lvbiAyLjAgKHRoZSAiTGljZW5zZSIpOwoJICogeW91IG1heSBub3QgdXNlIHRoaXMgZmlsZSBleGNlcHQgaW4gY29tcGxpYW5jZSB3aXRoIHRoZSBMaWNlbnNlLgoJICogWW91IG1heSBvYnRhaW4gYSBjb3B5IG9mIHRoZSBMaWNlbnNlIGF0CgkgKgoJICogICAgICBodHRwOi8vd3d3LmFwYWNoZS5vcmcvbGljZW5zZXMvTElDRU5TRS0yLjAKCSAqCgkgKiBVbmxlc3MgcmVxdWlyZWQgYnkgYXBwbGljYWJsZSBsYXcgb3IgYWdyZWVkIHRvIGluIHdyaXRpbmcsIHNvZnR3YXJlCgkgKiBkaXN0cmlidXRlZCB1bmRlciB0aGUgTGljZW5zZSBpcyBkaXN0cmlidXRlZCBvbiBhbiAiQVMgSVMiIEJBU0lTLAoJICogV0lUSE9VVCBXQVJSQU5USUVTIE9SIENPTkRJVElPTlMgT0YgQU5ZIEtJTkQsIGVpdGhlciBleHByZXNzIG9yIGltcGxpZWQuCgkgKiBTZWUgdGhlIExpY2Vuc2UgZm9yIHRoZSBzcGVjaWZpYyBsYW5ndWFnZSBnb3Zlcm5pbmcgcGVybWlzc2lvbnMgYW5kCgkgKiBsaW1pdGF0aW9ucyB1bmRlciB0aGUgTGljZW5zZS4KCSAqLwoJLypuYW1lc3BhY2UgY29tLmdvb2dsZS56eGluZyB7Ki8KCS8qKgoJICogRW51bWVyYXRlcyBiYXJjb2RlIGZvcm1hdHMga25vd24gdG8gdGhpcyBwYWNrYWdlLiBQbGVhc2Uga2VlcCBhbHBoYWJldGl6ZWQuCgkgKgoJICogQGF1dGhvciBTZWFuIE93ZW4KCSAqLwoJdmFyIEJhcmNvZGVGb3JtYXQ7CgkoZnVuY3Rpb24gKEJhcmNvZGVGb3JtYXQpIHsKCSAgICAvKiogQXp0ZWMgMkQgYmFyY29kZSBmb3JtYXQuICovCgkgICAgQmFyY29kZUZvcm1hdFtCYXJjb2RlRm9ybWF0WyJBWlRFQyJdID0gMF0gPSAiQVpURUMiOwoJICAgIC8qKiBDT0RBQkFSIDFEIGZvcm1hdC4gKi8KCSAgICBCYXJjb2RlRm9ybWF0W0JhcmNvZGVGb3JtYXRbIkNPREFCQVIiXSA9IDFdID0gIkNPREFCQVIiOwoJICAgIC8qKiBDb2RlIDM5IDFEIGZvcm1hdC4gKi8KCSAgICBCYXJjb2RlRm9ybWF0W0JhcmNvZGVGb3JtYXRbIkNPREVfMzkiXSA9IDJdID0gIkNPREVfMzkiOwoJICAgIC8qKiBDb2RlIDkzIDFEIGZvcm1hdC4gKi8KCSAgICBCYXJjb2RlRm9ybWF0W0JhcmNvZGVGb3JtYXRbIkNPREVfOTMiXSA9IDNdID0gIkNPREVfOTMiOwoJICAgIC8qKiBDb2RlIDEyOCAxRCBmb3JtYXQuICovCgkgICAgQmFyY29kZUZvcm1hdFtCYXJjb2RlRm9ybWF0WyJDT0RFXzEyOCJdID0gNF0gPSAiQ09ERV8xMjgiOwoJICAgIC8qKiBEYXRhIE1hdHJpeCAyRCBiYXJjb2RlIGZvcm1hdC4gKi8KCSAgICBCYXJjb2RlRm9ybWF0W0JhcmNvZGVGb3JtYXRbIkRBVEFfTUFUUklYIl0gPSA1XSA9ICJEQVRBX01BVFJJWCI7CgkgICAgLyoqIEVBTi04IDFEIGZvcm1hdC4gKi8KCSAgICBCYXJjb2RlRm9ybWF0W0JhcmNvZGVGb3JtYXRbIkVBTl84Il0gPSA2XSA9ICJFQU5fOCI7CgkgICAgLyoqIEVBTi0xMyAxRCBmb3JtYXQuICovCgkgICAgQmFyY29kZUZvcm1hdFtCYXJjb2RlRm9ybWF0WyJFQU5fMTMiXSA9IDddID0gIkVBTl8xMyI7CgkgICAgLyoqIElURiAoSW50ZXJsZWF2ZWQgVHdvIG9mIEZpdmUpIDFEIGZvcm1hdC4gKi8KCSAgICBCYXJjb2RlRm9ybWF0W0JhcmNvZGVGb3JtYXRbIklURiJdID0gOF0gPSAiSVRGIjsKCSAgICAvKiogTWF4aUNvZGUgMkQgYmFyY29kZSBmb3JtYXQuICovCgkgICAgQmFyY29kZUZvcm1hdFtCYXJjb2RlRm9ybWF0WyJNQVhJQ09ERSJdID0gOV0gPSAiTUFYSUNPREUiOwoJICAgIC8qKiBQREY0MTcgZm9ybWF0LiAqLwoJICAgIEJhcmNvZGVGb3JtYXRbQmFyY29kZUZvcm1hdFsiUERGXzQxNyJdID0gMTBdID0gIlBERl80MTciOwoJICAgIC8qKiBRUiBDb2RlIDJEIGJhcmNvZGUgZm9ybWF0LiAqLwoJICAgIEJhcmNvZGVGb3JtYXRbQmFyY29kZUZvcm1hdFsiUVJfQ09ERSJdID0gMTFdID0gIlFSX0NPREUiOwoJICAgIC8qKiBSU1MgMTQgKi8KCSAgICBCYXJjb2RlRm9ybWF0W0JhcmNvZGVGb3JtYXRbIlJTU18xNCJdID0gMTJdID0gIlJTU18xNCI7CgkgICAgLyoqIFJTUyBFWFBBTkRFRCAqLwoJICAgIEJhcmNvZGVGb3JtYXRbQmFyY29kZUZvcm1hdFsiUlNTX0VYUEFOREVEIl0gPSAxM10gPSAiUlNTX0VYUEFOREVEIjsKCSAgICAvKiogVVBDLUEgMUQgZm9ybWF0LiAqLwoJICAgIEJhcmNvZGVGb3JtYXRbQmFyY29kZUZvcm1hdFsiVVBDX0EiXSA9IDE0XSA9ICJVUENfQSI7CgkgICAgLyoqIFVQQy1FIDFEIGZvcm1hdC4gKi8KCSAgICBCYXJjb2RlRm9ybWF0W0JhcmNvZGVGb3JtYXRbIlVQQ19FIl0gPSAxNV0gPSAiVVBDX0UiOwoJICAgIC8qKiBVUEMvRUFOIGV4dGVuc2lvbiBmb3JtYXQuIE5vdCBhIHN0YW5kLWFsb25lIGZvcm1hdC4gKi8KCSAgICBCYXJjb2RlRm9ybWF0W0JhcmNvZGVGb3JtYXRbIlVQQ19FQU5fRVhURU5TSU9OIl0gPSAxNl0gPSAiVVBDX0VBTl9FWFRFTlNJT04iOwoJfSkoQmFyY29kZUZvcm1hdCB8fCAoQmFyY29kZUZvcm1hdCA9IHt9KSk7CglCYXJjb2RlRm9ybWF0JDEuZGVmYXVsdCA9IEJhcmNvZGVGb3JtYXQ7CgoJdmFyIFJlc3VsdCQxID0ge307CgoJLyoKCSAqIENvcHlyaWdodCAyMDA3IFpYaW5nIGF1dGhvcnMKCSAqCgkgKiBMaWNlbnNlZCB1bmRlciB0aGUgQXBhY2hlIExpY2Vuc2UsIFZlcnNpb24gMi4wICh0aGUgIkxpY2Vuc2UiKTsKCSAqIHlvdSBtYXkgbm90IHVzZSB0aGlzIGZpbGUgZXhjZXB0IGluIGNvbXBsaWFuY2Ugd2l0aCB0aGUgTGljZW5zZS4KCSAqIFlvdSBtYXkgb2J0YWluIGEgY29weSBvZiB0aGUgTGljZW5zZSBhdAoJICoKCSAqICAgICAgaHR0cDovL3d3dy5hcGFjaGUub3JnL2xpY2Vuc2VzL0xJQ0VOU0UtMi4wCgkgKgoJICogVW5sZXNzIHJlcXVpcmVkIGJ5IGFwcGxpY2FibGUgbGF3IG9yIGFncmVlZCB0byBpbiB3cml0aW5nLCBzb2Z0d2FyZQoJICogZGlzdHJpYnV0ZWQgdW5kZXIgdGhlIExpY2Vuc2UgaXMgZGlzdHJpYnV0ZWQgb24gYW4gIkFTIElTIiBCQVNJUywKCSAqIFdJVEhPVVQgV0FSUkFOVElFUyBPUiBDT05ESVRJT05TIE9GIEFOWSBLSU5ELCBlaXRoZXIgZXhwcmVzcyBvciBpbXBsaWVkLgoJICogU2VlIHRoZSBMaWNlbnNlIGZvciB0aGUgc3BlY2lmaWMgbGFuZ3VhZ2UgZ292ZXJuaW5nIHBlcm1pc3Npb25zIGFuZAoJICogbGltaXRhdGlvbnMgdW5kZXIgdGhlIExpY2Vuc2UuCgkgKi8KCU9iamVjdC5kZWZpbmVQcm9wZXJ0eShSZXN1bHQkMSwgIl9fZXNNb2R1bGUiLCB7IHZhbHVlOiB0cnVlIH0pOwoJdmFyIFN5c3RlbV8xJDEgPSBTeXN0ZW0kMTsKCS8qKgoJICogPHA+RW5jYXBzdWxhdGVzIHRoZSByZXN1bHQgb2YgZGVjb2RpbmcgYSBiYXJjb2RlIHdpdGhpbiBhbiBpbWFnZS48L3A+CgkgKgoJICogQGF1dGhvciBTZWFuIE93ZW4KCSAqLwoJdmFyIFJlc3VsdCA9IC8qKiBAY2xhc3MgKi8gKGZ1bmN0aW9uICgpIHsKCSAgICAvLyBwdWJsaWMgY29uc3RydWN0b3IocHJpdmF0ZSB0ZXh0OiBzdHJpbmcsCgkgICAgLy8gICAgICAgICAgICAgICBVaW50OEFycmF5IHJhd0J5dGVzLAoJICAgIC8vICAgICAgICAgICAgICAgUmVzdWx0UG9jb25zdCByZXN1bHRQb2ludHM6IEludDMyQXJyYXksCgkgICAgLy8gICAgICAgICAgICAgICBCYXJjb2RlRm9ybWF0IGZvcm1hdCkgewoJICAgIC8vICAgdGhpcyh0ZXh0LCByYXdCeXRlcywgcmVzdWx0UG9pbnRzLCBmb3JtYXQsIFN5c3RlbS5jdXJyZW50VGltZU1pbGxpcygpKQoJICAgIC8vIH0KCSAgICAvLyBwdWJsaWMgY29uc3RydWN0b3IodGV4dDogc3RyaW5nLAoJICAgIC8vICAgICAgICAgICAgICAgVWludDhBcnJheSByYXdCeXRlcywKCSAgICAvLyAgICAgICAgICAgICAgIFJlc3VsdFBvY29uc3QgcmVzdWx0UG9pbnRzOiBJbnQzMkFycmF5LAoJICAgIC8vICAgICAgICAgICAgICAgQmFyY29kZUZvcm1hdCBmb3JtYXQsCgkgICAgLy8gICAgICAgICAgICAgICBsb25nIHRpbWVzdGFtcCkgewoJICAgIC8vICAgdGhpcyh0ZXh0LCByYXdCeXRlcywgcmF3Qnl0ZXMgPT0gbnVsbCA/IDAgOiA4ICogcmF3Qnl0ZXMubGVuZ3RoLAoJICAgIC8vICAgICAgICByZXN1bHRQb2ludHMsIGZvcm1hdCwgdGltZXN0YW1wKQoJICAgIC8vIH0KCSAgICBmdW5jdGlvbiBSZXN1bHQodGV4dCwgcmF3Qnl0ZXMsIG51bUJpdHMsIHJlc3VsdFBvaW50cywgZm9ybWF0LCB0aW1lc3RhbXApIHsKCSAgICAgICAgaWYgKG51bUJpdHMgPT09IHZvaWQgMCkgeyBudW1CaXRzID0gcmF3Qnl0ZXMgPT0gbnVsbCA/IDAgOiA4ICogcmF3Qnl0ZXMubGVuZ3RoOyB9CgkgICAgICAgIGlmICh0aW1lc3RhbXAgPT09IHZvaWQgMCkgeyB0aW1lc3RhbXAgPSBTeXN0ZW1fMSQxLmRlZmF1bHQuY3VycmVudFRpbWVNaWxsaXMoKTsgfQoJICAgICAgICB0aGlzLnRleHQgPSB0ZXh0OwoJICAgICAgICB0aGlzLnJhd0J5dGVzID0gcmF3Qnl0ZXM7CgkgICAgICAgIHRoaXMubnVtQml0cyA9IG51bUJpdHM7CgkgICAgICAgIHRoaXMucmVzdWx0UG9pbnRzID0gcmVzdWx0UG9pbnRzOwoJICAgICAgICB0aGlzLmZvcm1hdCA9IGZvcm1hdDsKCSAgICAgICAgdGhpcy50aW1lc3RhbXAgPSB0aW1lc3RhbXA7CgkgICAgICAgIHRoaXMudGV4dCA9IHRleHQ7CgkgICAgICAgIHRoaXMucmF3Qnl0ZXMgPSByYXdCeXRlczsKCSAgICAgICAgaWYgKHVuZGVmaW5lZCA9PT0gbnVtQml0cyB8fCBudWxsID09PSBudW1CaXRzKSB7CgkgICAgICAgICAgICB0aGlzLm51bUJpdHMgPSAocmF3Qnl0ZXMgPT09IG51bGwgfHwgcmF3Qnl0ZXMgPT09IHVuZGVmaW5lZCkgPyAwIDogOCAqIHJhd0J5dGVzLmxlbmd0aDsKCSAgICAgICAgfQoJICAgICAgICBlbHNlIHsKCSAgICAgICAgICAgIHRoaXMubnVtQml0cyA9IG51bUJpdHM7CgkgICAgICAgIH0KCSAgICAgICAgdGhpcy5yZXN1bHRQb2ludHMgPSByZXN1bHRQb2ludHM7CgkgICAgICAgIHRoaXMuZm9ybWF0ID0gZm9ybWF0OwoJICAgICAgICB0aGlzLnJlc3VsdE1ldGFkYXRhID0gbnVsbDsKCSAgICAgICAgaWYgKHVuZGVmaW5lZCA9PT0gdGltZXN0YW1wIHx8IG51bGwgPT09IHRpbWVzdGFtcCkgewoJICAgICAgICAgICAgdGhpcy50aW1lc3RhbXAgPSBTeXN0ZW1fMSQxLmRlZmF1bHQuY3VycmVudFRpbWVNaWxsaXMoKTsKCSAgICAgICAgfQoJICAgICAgICBlbHNlIHsKCSAgICAgICAgICAgIHRoaXMudGltZXN0YW1wID0gdGltZXN0YW1wOwoJICAgICAgICB9CgkgICAgfQoJICAgIC8qKgoJICAgICAqIEByZXR1cm4gcmF3IHRleHQgZW5jb2RlZCBieSB0aGUgYmFyY29kZQoJICAgICAqLwoJICAgIFJlc3VsdC5wcm90b3R5cGUuZ2V0VGV4dCA9IGZ1bmN0aW9uICgpIHsKCSAgICAgICAgcmV0dXJuIHRoaXMudGV4dDsKCSAgICB9OwoJICAgIC8qKgoJICAgICAqIEByZXR1cm4gcmF3IGJ5dGVzIGVuY29kZWQgYnkgdGhlIGJhcmNvZGUsIGlmIGFwcGxpY2FibGUsIG90aGVyd2lzZSB7QGNvZGUgbnVsbH0KCSAgICAgKi8KCSAgICBSZXN1bHQucHJvdG90eXBlLmdldFJhd0J5dGVzID0gZnVuY3Rpb24gKCkgewoJICAgICAgICByZXR1cm4gdGhpcy5yYXdCeXRlczsKCSAgICB9OwoJICAgIC8qKgoJICAgICAqIEByZXR1cm4gaG93IG1hbnkgYml0cyBvZiB7QGxpbmsgI2dldFJhd0J5dGVzKCl9IGFyZSB2YWxpZDsgdHlwaWNhbGx5IDggdGltZXMgaXRzIGxlbmd0aAoJICAgICAqIEBzaW5jZSAzLjMuMAoJICAgICAqLwoJICAgIFJlc3VsdC5wcm90b3R5cGUuZ2V0TnVtQml0cyA9IGZ1bmN0aW9uICgpIHsKCSAgICAgICAgcmV0dXJuIHRoaXMubnVtQml0czsKCSAgICB9OwoJICAgIC8qKgoJICAgICAqIEByZXR1cm4gcG9pbnRzIHJlbGF0ZWQgdG8gdGhlIGJhcmNvZGUgaW4gdGhlIGltYWdlLiBUaGVzZSBhcmUgdHlwaWNhbGx5IHBvaW50cwoJICAgICAqICAgICAgICAgaWRlbnRpZnlpbmcgZmluZGVyIHBhdHRlcm5zIG9yIHRoZSBjb3JuZXJzIG9mIHRoZSBiYXJjb2RlLiBUaGUgZXhhY3QgbWVhbmluZyBpcwoJICAgICAqICAgICAgICAgc3BlY2lmaWMgdG8gdGhlIHR5cGUgb2YgYmFyY29kZSB0aGF0IHdhcyBkZWNvZGVkLgoJICAgICAqLwoJICAgIFJlc3VsdC5wcm90b3R5cGUuZ2V0UmVzdWx0UG9pbnRzID0gZnVuY3Rpb24gKCkgewoJICAgICAgICByZXR1cm4gdGhpcy5yZXN1bHRQb2ludHM7CgkgICAgfTsKCSAgICAvKioKCSAgICAgKiBAcmV0dXJuIHtAbGluayBCYXJjb2RlRm9ybWF0fSByZXByZXNlbnRpbmcgdGhlIGZvcm1hdCBvZiB0aGUgYmFyY29kZSB0aGF0IHdhcyBkZWNvZGVkCgkgICAgICovCgkgICAgUmVzdWx0LnByb3RvdHlwZS5nZXRCYXJjb2RlRm9ybWF0ID0gZnVuY3Rpb24gKCkgewoJICAgICAgICByZXR1cm4gdGhpcy5mb3JtYXQ7CgkgICAgfTsKCSAgICAvKioKCSAgICAgKiBAcmV0dXJuIHtAbGluayBNYXB9IG1hcHBpbmcge0BsaW5rIFJlc3VsdE1ldGFkYXRhVHlwZX0ga2V5cyB0byB2YWx1ZXMuIE1heSBiZQoJICAgICAqICAge0Bjb2RlIG51bGx9LiBUaGlzIGNvbnRhaW5zIG9wdGlvbmFsIG1ldGFkYXRhIGFib3V0IHdoYXQgd2FzIGRldGVjdGVkIGFib3V0IHRoZSBiYXJjb2RlLAoJICAgICAqICAgbGlrZSBvcmllbnRhdGlvbi4KCSAgICAgKi8KCSAgICBSZXN1bHQucHJvdG90eXBlLmdldFJlc3VsdE1ldGFkYXRhID0gZnVuY3Rpb24gKCkgewoJICAgICAgICByZXR1cm4gdGhpcy5yZXN1bHRNZXRhZGF0YTsKCSAgICB9OwoJICAgIFJlc3VsdC5wcm90b3R5cGUucHV0TWV0YWRhdGEgPSBmdW5jdGlvbiAodHlwZSwgdmFsdWUpIHsKCSAgICAgICAgaWYgKHRoaXMucmVzdWx0TWV0YWRhdGEgPT09IG51bGwpIHsKCSAgICAgICAgICAgIHRoaXMucmVzdWx0TWV0YWRhdGEgPSBuZXcgTWFwKCk7CgkgICAgICAgIH0KCSAgICAgICAgdGhpcy5yZXN1bHRNZXRhZGF0YS5zZXQodHlwZSwgdmFsdWUpOwoJICAgIH07CgkgICAgUmVzdWx0LnByb3RvdHlwZS5wdXRBbGxNZXRhZGF0YSA9IGZ1bmN0aW9uIChtZXRhZGF0YSkgewoJICAgICAgICBpZiAobWV0YWRhdGEgIT09IG51bGwpIHsKCSAgICAgICAgICAgIGlmICh0aGlzLnJlc3VsdE1ldGFkYXRhID09PSBudWxsKSB7CgkgICAgICAgICAgICAgICAgdGhpcy5yZXN1bHRNZXRhZGF0YSA9IG1ldGFkYXRhOwoJICAgICAgICAgICAgfQoJICAgICAgICAgICAgZWxzZSB7CgkgICAgICAgICAgICAgICAgdGhpcy5yZXN1bHRNZXRhZGF0YSA9IG5ldyBNYXAobWV0YWRhdGEpOwoJICAgICAgICAgICAgfQoJICAgICAgICB9CgkgICAgfTsKCSAgICBSZXN1bHQucHJvdG90eXBlLmFkZFJlc3VsdFBvaW50cyA9IGZ1bmN0aW9uIChuZXdQb2ludHMpIHsKCSAgICAgICAgdmFyIG9sZFBvaW50cyA9IHRoaXMucmVzdWx0UG9pbnRzOwoJICAgICAgICBpZiAob2xkUG9pbnRzID09PSBudWxsKSB7CgkgICAgICAgICAgICB0aGlzLnJlc3VsdFBvaW50cyA9IG5ld1BvaW50czsKCSAgICAgICAgfQoJICAgICAgICBlbHNlIGlmIChuZXdQb2ludHMgIT09IG51bGwgJiYgbmV3UG9pbnRzLmxlbmd0aCA+IDApIHsKCSAgICAgICAgICAgIHZhciBhbGxQb2ludHMgPSBuZXcgQXJyYXkob2xkUG9pbnRzLmxlbmd0aCArIG5ld1BvaW50cy5sZW5ndGgpOwoJICAgICAgICAgICAgU3lzdGVtXzEkMS5kZWZhdWx0LmFycmF5Y29weShvbGRQb2ludHMsIDAsIGFsbFBvaW50cywgMCwgb2xkUG9pbnRzLmxlbmd0aCk7CgkgICAgICAgICAgICBTeXN0ZW1fMSQxLmRlZmF1bHQuYXJyYXljb3B5KG5ld1BvaW50cywgMCwgYWxsUG9pbnRzLCBvbGRQb2ludHMubGVuZ3RoLCBuZXdQb2ludHMubGVuZ3RoKTsKCSAgICAgICAgICAgIHRoaXMucmVzdWx0UG9pbnRzID0gYWxsUG9pbnRzOwoJICAgICAgICB9CgkgICAgfTsKCSAgICBSZXN1bHQucHJvdG90eXBlLmdldFRpbWVzdGFtcCA9IGZ1bmN0aW9uICgpIHsKCSAgICAgICAgcmV0dXJuIHRoaXMudGltZXN0YW1wOwoJICAgIH07CgkgICAgLypAT3ZlcnJpZGUqLwoJICAgIFJlc3VsdC5wcm90b3R5cGUudG9TdHJpbmcgPSBmdW5jdGlvbiAoKSB7CgkgICAgICAgIHJldHVybiB0aGlzLnRleHQ7CgkgICAgfTsKCSAgICByZXR1cm4gUmVzdWx0OwoJfSgpKTsKCVJlc3VsdCQxLmRlZmF1bHQgPSBSZXN1bHQ7CgoJdmFyIFJlc3VsdE1ldGFkYXRhVHlwZSQxID0ge307CgoJLyoKCSAqIENvcHlyaWdodCAyMDA4IFpYaW5nIGF1dGhvcnMKCSAqCgkgKiBMaWNlbnNlZCB1bmRlciB0aGUgQXBhY2hlIExpY2Vuc2UsIFZlcnNpb24gMi4wICh0aGUgIkxpY2Vuc2UiKTsKCSAqIHlvdSBtYXkgbm90IHVzZSB0aGlzIGZpbGUgZXhjZXB0IGluIGNvbXBsaWFuY2Ugd2l0aCB0aGUgTGljZW5zZS4KCSAqIFlvdSBtYXkgb2J0YWluIGEgY29weSBvZiB0aGUgTGljZW5zZSBhdAoJICoKCSAqICAgICAgaHR0cDovL3d3dy5hcGFjaGUub3JnL2xpY2Vuc2VzL0xJQ0VOU0UtMi4wCgkgKgoJICogVW5sZXNzIHJlcXVpcmVkIGJ5IGFwcGxpY2FibGUgbGF3IG9yIGFncmVlZCB0byBpbiB3cml0aW5nLCBzb2Z0d2FyZQoJICogZGlzdHJpYnV0ZWQgdW5kZXIgdGhlIExpY2Vuc2UgaXMgZGlzdHJpYnV0ZWQgb24gYW4gIkFTIElTIiBCQVNJUywKCSAqIFdJVEhPVVQgV0FSUkFOVElFUyBPUiBDT05ESVRJT05TIE9GIEFOWSBLSU5ELCBlaXRoZXIgZXhwcmVzcyBvciBpbXBsaWVkLgoJICogU2VlIHRoZSBMaWNlbnNlIGZvciB0aGUgc3BlY2lmaWMgbGFuZ3VhZ2UgZ292ZXJuaW5nIHBlcm1pc3Npb25zIGFuZAoJICogbGltaXRhdGlvbnMgdW5kZXIgdGhlIExpY2Vuc2UuCgkgKi8KCU9iamVjdC5kZWZpbmVQcm9wZXJ0eShSZXN1bHRNZXRhZGF0YVR5cGUkMSwgIl9fZXNNb2R1bGUiLCB7IHZhbHVlOiB0cnVlIH0pOwoJLypuYW1lc3BhY2UgY29tLmdvb2dsZS56eGluZyB7Ki8KCS8qKgoJICogUmVwcmVzZW50cyBzb21lIHR5cGUgb2YgbWV0YWRhdGEgYWJvdXQgdGhlIHJlc3VsdCBvZiB0aGUgZGVjb2RpbmcgdGhhdCB0aGUgZGVjb2RlcgoJICogd2lzaGVzIHRvIGNvbW11bmljYXRlIGJhY2sgdG8gdGhlIGNhbGxlci4KCSAqCgkgKiBAYXV0aG9yIFNlYW4gT3dlbgoJICovCgl2YXIgUmVzdWx0TWV0YWRhdGFUeXBlOwoJKGZ1bmN0aW9uIChSZXN1bHRNZXRhZGF0YVR5cGUpIHsKCSAgICAvKioKCSAgICAgKiBVbnNwZWNpZmllZCwgYXBwbGljYXRpb24tc3BlY2lmaWMgbWV0YWRhdGEuIE1hcHMgdG8gYW4gdW5zcGVjaWZpZWQge0BsaW5rIE9iamVjdH0uCgkgICAgICovCgkgICAgUmVzdWx0TWV0YWRhdGFUeXBlW1Jlc3VsdE1ldGFkYXRhVHlwZVsiT1RIRVIiXSA9IDBdID0gIk9USEVSIjsKCSAgICAvKioKCSAgICAgKiBEZW5vdGVzIHRoZSBsaWtlbHkgYXBwcm94aW1hdGUgb3JpZW50YXRpb24gb2YgdGhlIGJhcmNvZGUgaW4gdGhlIGltYWdlLiBUaGlzIHZhbHVlCgkgICAgICogaXMgZ2l2ZW4gYXMgZGVncmVlcyByb3RhdGVkIGNsb2Nrd2lzZSBmcm9tIHRoZSBub3JtYWwsIHVwcmlnaHQgb3JpZW50YXRpb24uCgkgICAgICogRm9yIGV4YW1wbGUgYSAxRCBiYXJjb2RlIHdoaWNoIHdhcyBmb3VuZCBieSByZWFkaW5nIHRvcC10by1ib3R0b20gd291bGQgYmUKCSAgICAgKiBzYWlkIHRvIGhhdmUgb3JpZW50YXRpb24gIjkwIi4gVGhpcyBrZXkgbWFwcyB0byBhbiB7QGxpbmsgSW50ZWdlcn0gd2hvc2UKCSAgICAgKiB2YWx1ZSBpcyBpbiB0aGUgcmFuZ2UgWzAsMzYwKS4KCSAgICAgKi8KCSAgICBSZXN1bHRNZXRhZGF0YVR5cGVbUmVzdWx0TWV0YWRhdGFUeXBlWyJPUklFTlRBVElPTiJdID0gMV0gPSAiT1JJRU5UQVRJT04iOwoJICAgIC8qKgoJICAgICAqIDxwPjJEIGJhcmNvZGUgZm9ybWF0cyB0eXBpY2FsbHkgZW5jb2RlIHRleHQsIGJ1dCBhbGxvdyBmb3IgYSBzb3J0IG9mICdieXRlIG1vZGUnCgkgICAgICogd2hpY2ggaXMgc29tZXRpbWVzIHVzZWQgdG8gZW5jb2RlIGJpbmFyeSBkYXRhLiBXaGlsZSB7QGxpbmsgUmVzdWx0fSBtYWtlcyBhdmFpbGFibGUKCSAgICAgKiB0aGUgY29tcGxldGUgcmF3IGJ5dGVzIGluIHRoZSBiYXJjb2RlIGZvciB0aGVzZSBmb3JtYXRzLCBpdCBkb2VzIG5vdCBvZmZlciB0aGUgYnl0ZXMKCSAgICAgKiBmcm9tIHRoZSBieXRlIHNlZ21lbnRzIGFsb25lLjwvcD4KCSAgICAgKgoJICAgICAqIDxwPlRoaXMgbWFwcyB0byBhIHtAbGluayBqYXZhLnV0aWwuTGlzdH0gb2YgYnl0ZSBhcnJheXMgY29ycmVzcG9uZGluZyB0byB0aGUKCSAgICAgKiByYXcgYnl0ZXMgaW4gdGhlIGJ5dGUgc2VnbWVudHMgaW4gdGhlIGJhcmNvZGUsIGluIG9yZGVyLjwvcD4KCSAgICAgKi8KCSAgICBSZXN1bHRNZXRhZGF0YVR5cGVbUmVzdWx0TWV0YWRhdGFUeXBlWyJCWVRFX1NFR01FTlRTIl0gPSAyXSA9ICJCWVRFX1NFR01FTlRTIjsKCSAgICAvKioKCSAgICAgKiBFcnJvciBjb3JyZWN0aW9uIGxldmVsIHVzZWQsIGlmIGFwcGxpY2FibGUuIFRoZSB2YWx1ZSB0eXBlIGRlcGVuZHMgb24gdGhlCgkgICAgICogZm9ybWF0LCBidXQgaXMgdHlwaWNhbGx5IGEgU3RyaW5nLgoJICAgICAqLwoJICAgIFJlc3VsdE1ldGFkYXRhVHlwZVtSZXN1bHRNZXRhZGF0YVR5cGVbIkVSUk9SX0NPUlJFQ1RJT05fTEVWRUwiXSA9IDNdID0gIkVSUk9SX0NPUlJFQ1RJT05fTEVWRUwiOwoJICAgIC8qKgoJICAgICAqIEZvciBzb21lIHBlcmlvZGljYWxzLCBpbmRpY2F0ZXMgdGhlIGlzc3VlIG51bWJlciBhcyBhbiB7QGxpbmsgSW50ZWdlcn0uCgkgICAgICovCgkgICAgUmVzdWx0TWV0YWRhdGFUeXBlW1Jlc3VsdE1ldGFkYXRhVHlwZVsiSVNTVUVfTlVNQkVSIl0gPSA0XSA9ICJJU1NVRV9OVU1CRVIiOwoJICAgIC8qKgoJICAgICAqIEZvciBzb21lIHByb2R1Y3RzLCBpbmRpY2F0ZXMgdGhlIHN1Z2dlc3RlZCByZXRhaWwgcHJpY2UgaW4gdGhlIGJhcmNvZGUgYXMgYQoJICAgICAqIGZvcm1hdHRlZCB7QGxpbmsgU3RyaW5nfS4KCSAgICAgKi8KCSAgICBSZXN1bHRNZXRhZGF0YVR5cGVbUmVzdWx0TWV0YWRhdGFUeXBlWyJTVUdHRVNURURfUFJJQ0UiXSA9IDVdID0gIlNVR0dFU1RFRF9QUklDRSI7CgkgICAgLyoqCgkgICAgICogRm9yIHNvbWUgcHJvZHVjdHMsIHRoZSBwb3NzaWJsZSBjb3VudHJ5IG9mIG1hbnVmYWN0dXJlIGFzIGEge0BsaW5rIFN0cmluZ30gZGVub3RpbmcgdGhlCgkgICAgICogSVNPIGNvdW50cnkgY29kZS4gU29tZSBtYXAgdG8gbXVsdGlwbGUgcG9zc2libGUgY291bnRyaWVzLCBsaWtlICJVUy9DQSIuCgkgICAgICovCgkgICAgUmVzdWx0TWV0YWRhdGFUeXBlW1Jlc3VsdE1ldGFkYXRhVHlwZVsiUE9TU0lCTEVfQ09VTlRSWSJdID0gNl0gPSAiUE9TU0lCTEVfQ09VTlRSWSI7CgkgICAgLyoqCgkgICAgICogRm9yIHNvbWUgcHJvZHVjdHMsIHRoZSBleHRlbnNpb24gdGV4dAoJICAgICAqLwoJICAgIFJlc3VsdE1ldGFkYXRhVHlwZVtSZXN1bHRNZXRhZGF0YVR5cGVbIlVQQ19FQU5fRVhURU5TSU9OIl0gPSA3XSA9ICJVUENfRUFOX0VYVEVOU0lPTiI7CgkgICAgLyoqCgkgICAgICogUERGNDE3LXNwZWNpZmljIG1ldGFkYXRhCgkgICAgICovCgkgICAgUmVzdWx0TWV0YWRhdGFUeXBlW1Jlc3VsdE1ldGFkYXRhVHlwZVsiUERGNDE3X0VYVFJBX01FVEFEQVRBIl0gPSA4XSA9ICJQREY0MTdfRVhUUkFfTUVUQURBVEEiOwoJICAgIC8qKgoJICAgICAqIElmIHRoZSBjb2RlIGZvcm1hdCBzdXBwb3J0cyBzdHJ1Y3R1cmVkIGFwcGVuZCBhbmQgdGhlIGN1cnJlbnQgc2Nhbm5lZCBjb2RlIGlzIHBhcnQgb2Ygb25lIHRoZW4gdGhlCgkgICAgICogc2VxdWVuY2UgbnVtYmVyIGlzIGdpdmVuIHdpdGggaXQuCgkgICAgICovCgkgICAgUmVzdWx0TWV0YWRhdGFUeXBlW1Jlc3VsdE1ldGFkYXRhVHlwZVsiU1RSVUNUVVJFRF9BUFBFTkRfU0VRVUVOQ0UiXSA9IDldID0gIlNUUlVDVFVSRURfQVBQRU5EX1NFUVVFTkNFIjsKCSAgICAvKioKCSAgICAgKiBJZiB0aGUgY29kZSBmb3JtYXQgc3VwcG9ydHMgc3RydWN0dXJlZCBhcHBlbmQgYW5kIHRoZSBjdXJyZW50IHNjYW5uZWQgY29kZSBpcyBwYXJ0IG9mIG9uZSB0aGVuIHRoZQoJICAgICAqIHBhcml0eSBpcyBnaXZlbiB3aXRoIGl0LgoJICAgICAqLwoJICAgIFJlc3VsdE1ldGFkYXRhVHlwZVtSZXN1bHRNZXRhZGF0YVR5cGVbIlNUUlVDVFVSRURfQVBQRU5EX1BBUklUWSJdID0gMTBdID0gIlNUUlVDVFVSRURfQVBQRU5EX1BBUklUWSI7Cgl9KShSZXN1bHRNZXRhZGF0YVR5cGUgfHwgKFJlc3VsdE1ldGFkYXRhVHlwZSA9IHt9KSk7CglSZXN1bHRNZXRhZGF0YVR5cGUkMS5kZWZhdWx0ID0gUmVzdWx0TWV0YWRhdGFUeXBlOwoKCXZhciBEZWNvZGVyJDEgPSB7fTsKCgl2YXIgQ2hlY2tzdW1FeGNlcHRpb24kMSA9IHt9OwoKCXZhciBfX2V4dGVuZHMkOCA9IChjb21tb25qc0dsb2JhbCAmJiBjb21tb25qc0dsb2JhbC5fX2V4dGVuZHMpIHx8IChmdW5jdGlvbiAoKSB7CgkgICAgdmFyIGV4dGVuZFN0YXRpY3MgPSBmdW5jdGlvbiAoZCwgYikgewoJICAgICAgICBleHRlbmRTdGF0aWNzID0gT2JqZWN0LnNldFByb3RvdHlwZU9mIHx8CgkgICAgICAgICAgICAoeyBfX3Byb3RvX186IFtdIH0gaW5zdGFuY2VvZiBBcnJheSAmJiBmdW5jdGlvbiAoZCwgYikgeyBkLl9fcHJvdG9fXyA9IGI7IH0pIHx8CgkgICAgICAgICAgICBmdW5jdGlvbiAoZCwgYikgeyBmb3IgKHZhciBwIGluIGIpIGlmIChiLmhhc093blByb3BlcnR5KHApKSBkW3BdID0gYltwXTsgfTsKCSAgICAgICAgcmV0dXJuIGV4dGVuZFN0YXRpY3MoZCwgYik7CgkgICAgfTsKCSAgICByZXR1cm4gZnVuY3Rpb24gKGQsIGIpIHsKCSAgICAgICAgZXh0ZW5kU3RhdGljcyhkLCBiKTsKCSAgICAgICAgZnVuY3Rpb24gX18oKSB7IHRoaXMuY29uc3RydWN0b3IgPSBkOyB9CgkgICAgICAgIGQucHJvdG90eXBlID0gYiA9PT0gbnVsbCA/IE9iamVjdC5jcmVhdGUoYikgOiAoX18ucHJvdG90eXBlID0gYi5wcm90b3R5cGUsIG5ldyBfXygpKTsKCSAgICB9OwoJfSkoKTsKCU9iamVjdC5kZWZpbmVQcm9wZXJ0eShDaGVja3N1bUV4Y2VwdGlvbiQxLCAiX19lc01vZHVsZSIsIHsgdmFsdWU6IHRydWUgfSk7Cgl2YXIgRXhjZXB0aW9uXzEkNCA9IEV4Y2VwdGlvbiQxOwoJLyoqCgkgKiBDdXN0b20gRXJyb3IgY2xhc3Mgb2YgdHlwZSBFeGNlcHRpb24uCgkgKi8KCXZhciBDaGVja3N1bUV4Y2VwdGlvbiA9IC8qKiBAY2xhc3MgKi8gKGZ1bmN0aW9uIChfc3VwZXIpIHsKCSAgICBfX2V4dGVuZHMkOChDaGVja3N1bUV4Y2VwdGlvbiwgX3N1cGVyKTsKCSAgICBmdW5jdGlvbiBDaGVja3N1bUV4Y2VwdGlvbigpIHsKCSAgICAgICAgcmV0dXJuIF9zdXBlciAhPT0gbnVsbCAmJiBfc3VwZXIuYXBwbHkodGhpcywgYXJndW1lbnRzKSB8fCB0aGlzOwoJICAgIH0KCSAgICBDaGVja3N1bUV4Y2VwdGlvbi5nZXRDaGVja3N1bUluc3RhbmNlID0gZnVuY3Rpb24gKCkgewoJICAgICAgICByZXR1cm4gbmV3IENoZWNrc3VtRXhjZXB0aW9uKCk7CgkgICAgfTsKCSAgICBDaGVja3N1bUV4Y2VwdGlvbi5raW5kID0gJ0NoZWNrc3VtRXhjZXB0aW9uJzsKCSAgICByZXR1cm4gQ2hlY2tzdW1FeGNlcHRpb247Cgl9KEV4Y2VwdGlvbl8xJDQuZGVmYXVsdCkpOwoJQ2hlY2tzdW1FeGNlcHRpb24kMS5kZWZhdWx0ID0gQ2hlY2tzdW1FeGNlcHRpb247CgoJdmFyIEdlbmVyaWNHRiQxID0ge307CgoJdmFyIEdlbmVyaWNHRlBvbHkkMSA9IHt9OwoKCXZhciBBYnN0cmFjdEdlbmVyaWNHRiQxID0ge307CgoJLyoKCSAqIENvcHlyaWdodCAyMDA3IFpYaW5nIGF1dGhvcnMKCSAqCgkgKiBMaWNlbnNlZCB1bmRlciB0aGUgQXBhY2hlIExpY2Vuc2UsIFZlcnNpb24gMi4wICh0aGUgIkxpY2Vuc2UiKTsKCSAqIHlvdSBtYXkgbm90IHVzZSB0aGlzIGZpbGUgZXhjZXB0IGluIGNvbXBsaWFuY2Ugd2l0aCB0aGUgTGljZW5zZS4KCSAqIFlvdSBtYXkgb2J0YWluIGEgY29weSBvZiB0aGUgTGljZW5zZSBhdAoJICoKCSAqICAgICAgaHR0cDovL3d3dy5hcGFjaGUub3JnL2xpY2Vuc2VzL0xJQ0VOU0UtMi4wCgkgKgoJICogVW5sZXNzIHJlcXVpcmVkIGJ5IGFwcGxpY2FibGUgbGF3IG9yIGFncmVlZCB0byBpbiB3cml0aW5nLCBzb2Z0d2FyZQoJICogZGlzdHJpYnV0ZWQgdW5kZXIgdGhlIExpY2Vuc2UgaXMgZGlzdHJpYnV0ZWQgb24gYW4gIkFTIElTIiBCQVNJUywKCSAqIFdJVEhPVVQgV0FSUkFOVElFUyBPUiBDT05ESVRJT05TIE9GIEFOWSBLSU5ELCBlaXRoZXIgZXhwcmVzcyBvciBpbXBsaWVkLgoJICogU2VlIHRoZSBMaWNlbnNlIGZvciB0aGUgc3BlY2lmaWMgbGFuZ3VhZ2UgZ292ZXJuaW5nIHBlcm1pc3Npb25zIGFuZAoJICogbGltaXRhdGlvbnMgdW5kZXIgdGhlIExpY2Vuc2UuCgkgKi8KCU9iamVjdC5kZWZpbmVQcm9wZXJ0eShBYnN0cmFjdEdlbmVyaWNHRiQxLCAiX19lc01vZHVsZSIsIHsgdmFsdWU6IHRydWUgfSk7Cgl2YXIgSWxsZWdhbEFyZ3VtZW50RXhjZXB0aW9uXzEkNSA9IElsbGVnYWxBcmd1bWVudEV4Y2VwdGlvbiQxOwoJLyoqCgkgKiA8cD5UaGlzIGNsYXNzIGNvbnRhaW5zIHV0aWxpdHkgbWV0aG9kcyBmb3IgcGVyZm9ybWluZyBtYXRoZW1hdGljYWwgb3BlcmF0aW9ucyBvdmVyCgkgKiB0aGUgR2Fsb2lzIEZpZWxkcy4gT3BlcmF0aW9ucyB1c2UgYSBnaXZlbiBwcmltaXRpdmUgcG9seW5vbWlhbCBpbiBjYWxjdWxhdGlvbnMuPC9wPgoJICoKCSAqIDxwPlRocm91Z2hvdXQgdGhpcyBwYWNrYWdlLCBlbGVtZW50cyBvZiB0aGUgR0YgYXJlIHJlcHJlc2VudGVkIGFzIGFuIHtAY29kZSBpbnR9CgkgKiBmb3IgY29udmVuaWVuY2UgYW5kIHNwZWVkIChidXQgYXQgdGhlIGNvc3Qgb2YgbWVtb3J5KS4KCSAqIDwvcD4KCSAqCgkgKiBAYXV0aG9yIFNlYW4gT3dlbgoJICogQGF1dGhvciBEYXZpZCBPbGl2aWVyCgkgKi8KCXZhciBBYnN0cmFjdEdlbmVyaWNHRiA9IC8qKiBAY2xhc3MgKi8gKGZ1bmN0aW9uICgpIHsKCSAgICBmdW5jdGlvbiBBYnN0cmFjdEdlbmVyaWNHRigpIHsKCSAgICB9CgkgICAgLyoqCgkgICAgICogQHJldHVybiAyIHRvIHRoZSBwb3dlciBvZiBhIGluIEdGKHNpemUpCgkgICAgICovCgkgICAgQWJzdHJhY3RHZW5lcmljR0YucHJvdG90eXBlLmV4cCA9IGZ1bmN0aW9uIChhKSB7CgkgICAgICAgIHJldHVybiB0aGlzLmV4cFRhYmxlW2FdOwoJICAgIH07CgkgICAgLyoqCgkgICAgICogQHJldHVybiBiYXNlIDIgbG9nIG9mIGEgaW4gR0Yoc2l6ZSkKCSAgICAgKi8KCSAgICBBYnN0cmFjdEdlbmVyaWNHRi5wcm90b3R5cGUubG9nID0gZnVuY3Rpb24gKGEgLyppbnQqLykgewoJICAgICAgICBpZiAoYSA9PT0gMCkgewoJICAgICAgICAgICAgdGhyb3cgbmV3IElsbGVnYWxBcmd1bWVudEV4Y2VwdGlvbl8xJDUuZGVmYXVsdCgpOwoJICAgICAgICB9CgkgICAgICAgIHJldHVybiB0aGlzLmxvZ1RhYmxlW2FdOwoJICAgIH07CgkgICAgLyoqCgkgICAgICogSW1wbGVtZW50cyBib3RoIGFkZGl0aW9uIGFuZCBzdWJ0cmFjdGlvbiAtLSB0aGV5IGFyZSB0aGUgc2FtZSBpbiBHRihzaXplKS4KCSAgICAgKgoJICAgICAqIEByZXR1cm4gc3VtL2RpZmZlcmVuY2Ugb2YgYSBhbmQgYgoJICAgICAqLwoJICAgIEFic3RyYWN0R2VuZXJpY0dGLmFkZE9yU3VidHJhY3QgPSBmdW5jdGlvbiAoYSAvKmludCovLCBiIC8qaW50Ki8pIHsKCSAgICAgICAgcmV0dXJuIGEgXiBiOwoJICAgIH07CgkgICAgcmV0dXJuIEFic3RyYWN0R2VuZXJpY0dGOwoJfSgpKTsKCUFic3RyYWN0R2VuZXJpY0dGJDEuZGVmYXVsdCA9IEFic3RyYWN0R2VuZXJpY0dGOwoKCS8qCgkgKiBDb3B5cmlnaHQgMjAwNyBaWGluZyBhdXRob3JzCgkgKgoJICogTGljZW5zZWQgdW5kZXIgdGhlIEFwYWNoZSBMaWNlbnNlLCBWZXJzaW9uIDIuMCAodGhlICJMaWNlbnNlIik7CgkgKiB5b3UgbWF5IG5vdCB1c2UgdGhpcyBmaWxlIGV4Y2VwdCBpbiBjb21wbGlhbmNlIHdpdGggdGhlIExpY2Vuc2UuCgkgKiBZb3UgbWF5IG9idGFpbiBhIGNvcHkgb2YgdGhlIExpY2Vuc2UgYXQKCSAqCgkgKiAgICAgIGh0dHA6Ly93d3cuYXBhY2hlLm9yZy9saWNlbnNlcy9MSUNFTlNFLTIuMAoJICoKCSAqIFVubGVzcyByZXF1aXJlZCBieSBhcHBsaWNhYmxlIGxhdyBvciBhZ3JlZWQgdG8gaW4gd3JpdGluZywgc29mdHdhcmUKCSAqIGRpc3RyaWJ1dGVkIHVuZGVyIHRoZSBMaWNlbnNlIGlzIGRpc3RyaWJ1dGVkIG9uIGFuICJBUyBJUyIgQkFTSVMsCgkgKiBXSVRIT1VUIFdBUlJBTlRJRVMgT1IgQ09ORElUSU9OUyBPRiBBTlkgS0lORCwgZWl0aGVyIGV4cHJlc3Mgb3IgaW1wbGllZC4KCSAqIFNlZSB0aGUgTGljZW5zZSBmb3IgdGhlIHNwZWNpZmljIGxhbmd1YWdlIGdvdmVybmluZyBwZXJtaXNzaW9ucyBhbmQKCSAqIGxpbWl0YXRpb25zIHVuZGVyIHRoZSBMaWNlbnNlLgoJICovCglPYmplY3QuZGVmaW5lUHJvcGVydHkoR2VuZXJpY0dGUG9seSQxLCAiX19lc01vZHVsZSIsIHsgdmFsdWU6IHRydWUgfSk7CgkvKm5hbWVzcGFjZSBjb20uZ29vZ2xlLnp4aW5nLmNvbW1vbi5yZWVkc29sb21vbiB7Ki8KCXZhciBBYnN0cmFjdEdlbmVyaWNHRl8xJDEgPSBBYnN0cmFjdEdlbmVyaWNHRiQxOwoJdmFyIFN5c3RlbV8xID0gU3lzdGVtJDE7Cgl2YXIgSWxsZWdhbEFyZ3VtZW50RXhjZXB0aW9uXzEkNCA9IElsbGVnYWxBcmd1bWVudEV4Y2VwdGlvbiQxOwoJLyoqCgkgKiA8cD5SZXByZXNlbnRzIGEgcG9seW5vbWlhbCB3aG9zZSBjb2VmZmljaWVudHMgYXJlIGVsZW1lbnRzIG9mIGEgR0YuCgkgKiBJbnN0YW5jZXMgb2YgdGhpcyBjbGFzcyBhcmUgaW1tdXRhYmxlLjwvcD4KCSAqCgkgKiA8cD5NdWNoIGNyZWRpdCBpcyBkdWUgdG8gV2lsbGlhbSBSdWNrbGlkZ2Ugc2luY2UgcG9ydGlvbnMgb2YgdGhpcyBjb2RlIGFyZSBhbiBpbmRpcmVjdAoJICogcG9ydCBvZiBoaXMgQysrIFJlZWQtU29sb21vbiBpbXBsZW1lbnRhdGlvbi48L3A+CgkgKgoJICogQGF1dGhvciBTZWFuIE93ZW4KCSAqLwoJdmFyIEdlbmVyaWNHRlBvbHkgPSAvKiogQGNsYXNzICovIChmdW5jdGlvbiAoKSB7CgkgICAgLyoqCgkgICAgICogQHBhcmFtIGZpZWxkIHRoZSB7QGxpbmsgR2VuZXJpY0dGfSBpbnN0YW5jZSByZXByZXNlbnRpbmcgdGhlIGZpZWxkIHRvIHVzZQoJICAgICAqIHRvIHBlcmZvcm0gY29tcHV0YXRpb25zCgkgICAgICogQHBhcmFtIGNvZWZmaWNpZW50cyBjb2VmZmljaWVudHMgYXMgaW50cyByZXByZXNlbnRpbmcgZWxlbWVudHMgb2YgR0Yoc2l6ZSksIGFycmFuZ2VkCgkgICAgICogZnJvbSBtb3N0IHNpZ25pZmljYW50IChoaWdoZXN0LXBvd2VyIHRlcm0pIGNvZWZmaWNpZW50IHRvIGxlYXN0IHNpZ25pZmljYW50CgkgICAgICogQHRocm93cyBJbGxlZ2FsQXJndW1lbnRFeGNlcHRpb24gaWYgYXJndW1lbnQgaXMgbnVsbCBvciBlbXB0eSwKCSAgICAgKiBvciBpZiBsZWFkaW5nIGNvZWZmaWNpZW50IGlzIDAgYW5kIHRoaXMgaXMgbm90IGEKCSAgICAgKiBjb25zdGFudCBwb2x5bm9taWFsICh0aGF0IGlzLCBpdCBpcyBub3QgdGhlIG1vbm9taWFsICIwIikKCSAgICAgKi8KCSAgICBmdW5jdGlvbiBHZW5lcmljR0ZQb2x5KGZpZWxkLCBjb2VmZmljaWVudHMpIHsKCSAgICAgICAgaWYgKGNvZWZmaWNpZW50cy5sZW5ndGggPT09IDApIHsKCSAgICAgICAgICAgIHRocm93IG5ldyBJbGxlZ2FsQXJndW1lbnRFeGNlcHRpb25fMSQ0LmRlZmF1bHQoKTsKCSAgICAgICAgfQoJICAgICAgICB0aGlzLmZpZWxkID0gZmllbGQ7CgkgICAgICAgIHZhciBjb2VmZmljaWVudHNMZW5ndGggPSBjb2VmZmljaWVudHMubGVuZ3RoOwoJICAgICAgICBpZiAoY29lZmZpY2llbnRzTGVuZ3RoID4gMSAmJiBjb2VmZmljaWVudHNbMF0gPT09IDApIHsKCSAgICAgICAgICAgIC8vIExlYWRpbmcgdGVybSBtdXN0IGJlIG5vbi16ZXJvIGZvciBhbnl0aGluZyBleGNlcHQgdGhlIGNvbnN0YW50IHBvbHlub21pYWwgIjAiCgkgICAgICAgICAgICB2YXIgZmlyc3ROb25aZXJvID0gMTsKCSAgICAgICAgICAgIHdoaWxlIChmaXJzdE5vblplcm8gPCBjb2VmZmljaWVudHNMZW5ndGggJiYgY29lZmZpY2llbnRzW2ZpcnN0Tm9uWmVyb10gPT09IDApIHsKCSAgICAgICAgICAgICAgICBmaXJzdE5vblplcm8rKzsKCSAgICAgICAgICAgIH0KCSAgICAgICAgICAgIGlmIChmaXJzdE5vblplcm8gPT09IGNvZWZmaWNpZW50c0xlbmd0aCkgewoJICAgICAgICAgICAgICAgIHRoaXMuY29lZmZpY2llbnRzID0gSW50MzJBcnJheS5mcm9tKFswXSk7CgkgICAgICAgICAgICB9CgkgICAgICAgICAgICBlbHNlIHsKCSAgICAgICAgICAgICAgICB0aGlzLmNvZWZmaWNpZW50cyA9IG5ldyBJbnQzMkFycmF5KGNvZWZmaWNpZW50c0xlbmd0aCAtIGZpcnN0Tm9uWmVybyk7CgkgICAgICAgICAgICAgICAgU3lzdGVtXzEuZGVmYXVsdC5hcnJheWNvcHkoY29lZmZpY2llbnRzLCBmaXJzdE5vblplcm8sIHRoaXMuY29lZmZpY2llbnRzLCAwLCB0aGlzLmNvZWZmaWNpZW50cy5sZW5ndGgpOwoJICAgICAgICAgICAgfQoJICAgICAgICB9CgkgICAgICAgIGVsc2UgewoJICAgICAgICAgICAgdGhpcy5jb2VmZmljaWVudHMgPSBjb2VmZmljaWVudHM7CgkgICAgICAgIH0KCSAgICB9CgkgICAgR2VuZXJpY0dGUG9seS5wcm90b3R5cGUuZ2V0Q29lZmZpY2llbnRzID0gZnVuY3Rpb24gKCkgewoJICAgICAgICByZXR1cm4gdGhpcy5jb2VmZmljaWVudHM7CgkgICAgfTsKCSAgICAvKioKCSAgICAgKiBAcmV0dXJuIGRlZ3JlZSBvZiB0aGlzIHBvbHlub21pYWwKCSAgICAgKi8KCSAgICBHZW5lcmljR0ZQb2x5LnByb3RvdHlwZS5nZXREZWdyZWUgPSBmdW5jdGlvbiAoKSB7CgkgICAgICAgIHJldHVybiB0aGlzLmNvZWZmaWNpZW50cy5sZW5ndGggLSAxOwoJICAgIH07CgkgICAgLyoqCgkgICAgICogQHJldHVybiB0cnVlIGlmZiB0aGlzIHBvbHlub21pYWwgaXMgdGhlIG1vbm9taWFsICIwIgoJICAgICAqLwoJICAgIEdlbmVyaWNHRlBvbHkucHJvdG90eXBlLmlzWmVybyA9IGZ1bmN0aW9uICgpIHsKCSAgICAgICAgcmV0dXJuIHRoaXMuY29lZmZpY2llbnRzWzBdID09PSAwOwoJICAgIH07CgkgICAgLyoqCgkgICAgICogQHJldHVybiBjb2VmZmljaWVudCBvZiB4XmRlZ3JlZSB0ZXJtIGluIHRoaXMgcG9seW5vbWlhbAoJICAgICAqLwoJICAgIEdlbmVyaWNHRlBvbHkucHJvdG90eXBlLmdldENvZWZmaWNpZW50ID0gZnVuY3Rpb24gKGRlZ3JlZSAvKmludCovKSB7CgkgICAgICAgIHJldHVybiB0aGlzLmNvZWZmaWNpZW50c1t0aGlzLmNvZWZmaWNpZW50cy5sZW5ndGggLSAxIC0gZGVncmVlXTsKCSAgICB9OwoJICAgIC8qKgoJICAgICAqIEByZXR1cm4gZXZhbHVhdGlvbiBvZiB0aGlzIHBvbHlub21pYWwgYXQgYSBnaXZlbiBwb2ludAoJICAgICAqLwoJICAgIEdlbmVyaWNHRlBvbHkucHJvdG90eXBlLmV2YWx1YXRlQXQgPSBmdW5jdGlvbiAoYSAvKmludCovKSB7CgkgICAgICAgIGlmIChhID09PSAwKSB7CgkgICAgICAgICAgICAvLyBKdXN0IHJldHVybiB0aGUgeF4wIGNvZWZmaWNpZW50CgkgICAgICAgICAgICByZXR1cm4gdGhpcy5nZXRDb2VmZmljaWVudCgwKTsKCSAgICAgICAgfQoJICAgICAgICB2YXIgY29lZmZpY2llbnRzID0gdGhpcy5jb2VmZmljaWVudHM7CgkgICAgICAgIHZhciByZXN1bHQ7CgkgICAgICAgIGlmIChhID09PSAxKSB7CgkgICAgICAgICAgICAvLyBKdXN0IHRoZSBzdW0gb2YgdGhlIGNvZWZmaWNpZW50cwoJICAgICAgICAgICAgcmVzdWx0ID0gMDsKCSAgICAgICAgICAgIGZvciAodmFyIGkgPSAwLCBsZW5ndGhfMSA9IGNvZWZmaWNpZW50cy5sZW5ndGg7IGkgIT09IGxlbmd0aF8xOyBpKyspIHsKCSAgICAgICAgICAgICAgICB2YXIgY29lZmZpY2llbnQgPSBjb2VmZmljaWVudHNbaV07CgkgICAgICAgICAgICAgICAgcmVzdWx0ID0gQWJzdHJhY3RHZW5lcmljR0ZfMSQxLmRlZmF1bHQuYWRkT3JTdWJ0cmFjdChyZXN1bHQsIGNvZWZmaWNpZW50KTsKCSAgICAgICAgICAgIH0KCSAgICAgICAgICAgIHJldHVybiByZXN1bHQ7CgkgICAgICAgIH0KCSAgICAgICAgcmVzdWx0ID0gY29lZmZpY2llbnRzWzBdOwoJICAgICAgICB2YXIgc2l6ZSA9IGNvZWZmaWNpZW50cy5sZW5ndGg7CgkgICAgICAgIHZhciBmaWVsZCA9IHRoaXMuZmllbGQ7CgkgICAgICAgIGZvciAodmFyIGkgPSAxOyBpIDwgc2l6ZTsgaSsrKSB7CgkgICAgICAgICAgICByZXN1bHQgPSBBYnN0cmFjdEdlbmVyaWNHRl8xJDEuZGVmYXVsdC5hZGRPclN1YnRyYWN0KGZpZWxkLm11bHRpcGx5KGEsIHJlc3VsdCksIGNvZWZmaWNpZW50c1tpXSk7CgkgICAgICAgIH0KCSAgICAgICAgcmV0dXJuIHJlc3VsdDsKCSAgICB9OwoJICAgIEdlbmVyaWNHRlBvbHkucHJvdG90eXBlLmFkZE9yU3VidHJhY3QgPSBmdW5jdGlvbiAob3RoZXIpIHsKCSAgICAgICAgaWYgKCF0aGlzLmZpZWxkLmVxdWFscyhvdGhlci5maWVsZCkpIHsKCSAgICAgICAgICAgIHRocm93IG5ldyBJbGxlZ2FsQXJndW1lbnRFeGNlcHRpb25fMSQ0LmRlZmF1bHQoJ0dlbmVyaWNHRlBvbHlzIGRvIG5vdCBoYXZlIHNhbWUgR2VuZXJpY0dGIGZpZWxkJyk7CgkgICAgICAgIH0KCSAgICAgICAgaWYgKHRoaXMuaXNaZXJvKCkpIHsKCSAgICAgICAgICAgIHJldHVybiBvdGhlcjsKCSAgICAgICAgfQoJICAgICAgICBpZiAob3RoZXIuaXNaZXJvKCkpIHsKCSAgICAgICAgICAgIHJldHVybiB0aGlzOwoJICAgICAgICB9CgkgICAgICAgIHZhciBzbWFsbGVyQ29lZmZpY2llbnRzID0gdGhpcy5jb2VmZmljaWVudHM7CgkgICAgICAgIHZhciBsYXJnZXJDb2VmZmljaWVudHMgPSBvdGhlci5jb2VmZmljaWVudHM7CgkgICAgICAgIGlmIChzbWFsbGVyQ29lZmZpY2llbnRzLmxlbmd0aCA+IGxhcmdlckNvZWZmaWNpZW50cy5sZW5ndGgpIHsKCSAgICAgICAgICAgIHZhciB0ZW1wID0gc21hbGxlckNvZWZmaWNpZW50czsKCSAgICAgICAgICAgIHNtYWxsZXJDb2VmZmljaWVudHMgPSBsYXJnZXJDb2VmZmljaWVudHM7CgkgICAgICAgICAgICBsYXJnZXJDb2VmZmljaWVudHMgPSB0ZW1wOwoJICAgICAgICB9CgkgICAgICAgIHZhciBzdW1EaWZmID0gbmV3IEludDMyQXJyYXkobGFyZ2VyQ29lZmZpY2llbnRzLmxlbmd0aCk7CgkgICAgICAgIHZhciBsZW5ndGhEaWZmID0gbGFyZ2VyQ29lZmZpY2llbnRzLmxlbmd0aCAtIHNtYWxsZXJDb2VmZmljaWVudHMubGVuZ3RoOwoJICAgICAgICAvLyBDb3B5IGhpZ2gtb3JkZXIgdGVybXMgb25seSBmb3VuZCBpbiBoaWdoZXItZGVncmVlIHBvbHlub21pYWwncyBjb2VmZmljaWVudHMKCSAgICAgICAgU3lzdGVtXzEuZGVmYXVsdC5hcnJheWNvcHkobGFyZ2VyQ29lZmZpY2llbnRzLCAwLCBzdW1EaWZmLCAwLCBsZW5ndGhEaWZmKTsKCSAgICAgICAgZm9yICh2YXIgaSA9IGxlbmd0aERpZmY7IGkgPCBsYXJnZXJDb2VmZmljaWVudHMubGVuZ3RoOyBpKyspIHsKCSAgICAgICAgICAgIHN1bURpZmZbaV0gPSBBYnN0cmFjdEdlbmVyaWNHRl8xJDEuZGVmYXVsdC5hZGRPclN1YnRyYWN0KHNtYWxsZXJDb2VmZmljaWVudHNbaSAtIGxlbmd0aERpZmZdLCBsYXJnZXJDb2VmZmljaWVudHNbaV0pOwoJICAgICAgICB9CgkgICAgICAgIHJldHVybiBuZXcgR2VuZXJpY0dGUG9seSh0aGlzLmZpZWxkLCBzdW1EaWZmKTsKCSAgICB9OwoJICAgIEdlbmVyaWNHRlBvbHkucHJvdG90eXBlLm11bHRpcGx5ID0gZnVuY3Rpb24gKG90aGVyKSB7CgkgICAgICAgIGlmICghdGhpcy5maWVsZC5lcXVhbHMob3RoZXIuZmllbGQpKSB7CgkgICAgICAgICAgICB0aHJvdyBuZXcgSWxsZWdhbEFyZ3VtZW50RXhjZXB0aW9uXzEkNC5kZWZhdWx0KCdHZW5lcmljR0ZQb2x5cyBkbyBub3QgaGF2ZSBzYW1lIEdlbmVyaWNHRiBmaWVsZCcpOwoJICAgICAgICB9CgkgICAgICAgIGlmICh0aGlzLmlzWmVybygpIHx8IG90aGVyLmlzWmVybygpKSB7CgkgICAgICAgICAgICByZXR1cm4gdGhpcy5maWVsZC5nZXRaZXJvKCk7CgkgICAgICAgIH0KCSAgICAgICAgdmFyIGFDb2VmZmljaWVudHMgPSB0aGlzLmNvZWZmaWNpZW50czsKCSAgICAgICAgdmFyIGFMZW5ndGggPSBhQ29lZmZpY2llbnRzLmxlbmd0aDsKCSAgICAgICAgdmFyIGJDb2VmZmljaWVudHMgPSBvdGhlci5jb2VmZmljaWVudHM7CgkgICAgICAgIHZhciBiTGVuZ3RoID0gYkNvZWZmaWNpZW50cy5sZW5ndGg7CgkgICAgICAgIHZhciBwcm9kdWN0ID0gbmV3IEludDMyQXJyYXkoYUxlbmd0aCArIGJMZW5ndGggLSAxKTsKCSAgICAgICAgdmFyIGZpZWxkID0gdGhpcy5maWVsZDsKCSAgICAgICAgZm9yICh2YXIgaSA9IDA7IGkgPCBhTGVuZ3RoOyBpKyspIHsKCSAgICAgICAgICAgIHZhciBhQ29lZmYgPSBhQ29lZmZpY2llbnRzW2ldOwoJICAgICAgICAgICAgZm9yICh2YXIgaiA9IDA7IGogPCBiTGVuZ3RoOyBqKyspIHsKCSAgICAgICAgICAgICAgICBwcm9kdWN0W2kgKyBqXSA9IEFic3RyYWN0R2VuZXJpY0dGXzEkMS5kZWZhdWx0LmFkZE9yU3VidHJhY3QocHJvZHVjdFtpICsgal0sIGZpZWxkLm11bHRpcGx5KGFDb2VmZiwgYkNvZWZmaWNpZW50c1tqXSkpOwoJICAgICAgICAgICAgfQoJICAgICAgICB9CgkgICAgICAgIHJldHVybiBuZXcgR2VuZXJpY0dGUG9seShmaWVsZCwgcHJvZHVjdCk7CgkgICAgfTsKCSAgICBHZW5lcmljR0ZQb2x5LnByb3RvdHlwZS5tdWx0aXBseVNjYWxhciA9IGZ1bmN0aW9uIChzY2FsYXIgLyppbnQqLykgewoJICAgICAgICBpZiAoc2NhbGFyID09PSAwKSB7CgkgICAgICAgICAgICByZXR1cm4gdGhpcy5maWVsZC5nZXRaZXJvKCk7CgkgICAgICAgIH0KCSAgICAgICAgaWYgKHNjYWxhciA9PT0gMSkgewoJICAgICAgICAgICAgcmV0dXJuIHRoaXM7CgkgICAgICAgIH0KCSAgICAgICAgdmFyIHNpemUgPSB0aGlzLmNvZWZmaWNpZW50cy5sZW5ndGg7CgkgICAgICAgIHZhciBmaWVsZCA9IHRoaXMuZmllbGQ7CgkgICAgICAgIHZhciBwcm9kdWN0ID0gbmV3IEludDMyQXJyYXkoc2l6ZSk7CgkgICAgICAgIHZhciBjb2VmZmljaWVudHMgPSB0aGlzLmNvZWZmaWNpZW50czsKCSAgICAgICAgZm9yICh2YXIgaSA9IDA7IGkgPCBzaXplOyBpKyspIHsKCSAgICAgICAgICAgIHByb2R1Y3RbaV0gPSBmaWVsZC5tdWx0aXBseShjb2VmZmljaWVudHNbaV0sIHNjYWxhcik7CgkgICAgICAgIH0KCSAgICAgICAgcmV0dXJuIG5ldyBHZW5lcmljR0ZQb2x5KGZpZWxkLCBwcm9kdWN0KTsKCSAgICB9OwoJICAgIEdlbmVyaWNHRlBvbHkucHJvdG90eXBlLm11bHRpcGx5QnlNb25vbWlhbCA9IGZ1bmN0aW9uIChkZWdyZWUgLyppbnQqLywgY29lZmZpY2llbnQgLyppbnQqLykgewoJICAgICAgICBpZiAoZGVncmVlIDwgMCkgewoJICAgICAgICAgICAgdGhyb3cgbmV3IElsbGVnYWxBcmd1bWVudEV4Y2VwdGlvbl8xJDQuZGVmYXVsdCgpOwoJICAgICAgICB9CgkgICAgICAgIGlmIChjb2VmZmljaWVudCA9PT0gMCkgewoJICAgICAgICAgICAgcmV0dXJuIHRoaXMuZmllbGQuZ2V0WmVybygpOwoJICAgICAgICB9CgkgICAgICAgIHZhciBjb2VmZmljaWVudHMgPSB0aGlzLmNvZWZmaWNpZW50czsKCSAgICAgICAgdmFyIHNpemUgPSBjb2VmZmljaWVudHMubGVuZ3RoOwoJICAgICAgICB2YXIgcHJvZHVjdCA9IG5ldyBJbnQzMkFycmF5KHNpemUgKyBkZWdyZWUpOwoJICAgICAgICB2YXIgZmllbGQgPSB0aGlzLmZpZWxkOwoJICAgICAgICBmb3IgKHZhciBpID0gMDsgaSA8IHNpemU7IGkrKykgewoJICAgICAgICAgICAgcHJvZHVjdFtpXSA9IGZpZWxkLm11bHRpcGx5KGNvZWZmaWNpZW50c1tpXSwgY29lZmZpY2llbnQpOwoJICAgICAgICB9CgkgICAgICAgIHJldHVybiBuZXcgR2VuZXJpY0dGUG9seShmaWVsZCwgcHJvZHVjdCk7CgkgICAgfTsKCSAgICBHZW5lcmljR0ZQb2x5LnByb3RvdHlwZS5kaXZpZGUgPSBmdW5jdGlvbiAob3RoZXIpIHsKCSAgICAgICAgaWYgKCF0aGlzLmZpZWxkLmVxdWFscyhvdGhlci5maWVsZCkpIHsKCSAgICAgICAgICAgIHRocm93IG5ldyBJbGxlZ2FsQXJndW1lbnRFeGNlcHRpb25fMSQ0LmRlZmF1bHQoJ0dlbmVyaWNHRlBvbHlzIGRvIG5vdCBoYXZlIHNhbWUgR2VuZXJpY0dGIGZpZWxkJyk7CgkgICAgICAgIH0KCSAgICAgICAgaWYgKG90aGVyLmlzWmVybygpKSB7CgkgICAgICAgICAgICB0aHJvdyBuZXcgSWxsZWdhbEFyZ3VtZW50RXhjZXB0aW9uXzEkNC5kZWZhdWx0KCdEaXZpZGUgYnkgMCcpOwoJICAgICAgICB9CgkgICAgICAgIHZhciBmaWVsZCA9IHRoaXMuZmllbGQ7CgkgICAgICAgIHZhciBxdW90aWVudCA9IGZpZWxkLmdldFplcm8oKTsKCSAgICAgICAgdmFyIHJlbWFpbmRlciA9IHRoaXM7CgkgICAgICAgIHZhciBkZW5vbWluYXRvckxlYWRpbmdUZXJtID0gb3RoZXIuZ2V0Q29lZmZpY2llbnQob3RoZXIuZ2V0RGVncmVlKCkpOwoJICAgICAgICB2YXIgaW52ZXJzZURlbm9taW5hdG9yTGVhZGluZ1Rlcm0gPSBmaWVsZC5pbnZlcnNlKGRlbm9taW5hdG9yTGVhZGluZ1Rlcm0pOwoJICAgICAgICB3aGlsZSAocmVtYWluZGVyLmdldERlZ3JlZSgpID49IG90aGVyLmdldERlZ3JlZSgpICYmICFyZW1haW5kZXIuaXNaZXJvKCkpIHsKCSAgICAgICAgICAgIHZhciBkZWdyZWVEaWZmZXJlbmNlID0gcmVtYWluZGVyLmdldERlZ3JlZSgpIC0gb3RoZXIuZ2V0RGVncmVlKCk7CgkgICAgICAgICAgICB2YXIgc2NhbGUgPSBmaWVsZC5tdWx0aXBseShyZW1haW5kZXIuZ2V0Q29lZmZpY2llbnQocmVtYWluZGVyLmdldERlZ3JlZSgpKSwgaW52ZXJzZURlbm9taW5hdG9yTGVhZGluZ1Rlcm0pOwoJICAgICAgICAgICAgdmFyIHRlcm0gPSBvdGhlci5tdWx0aXBseUJ5TW9ub21pYWwoZGVncmVlRGlmZmVyZW5jZSwgc2NhbGUpOwoJICAgICAgICAgICAgdmFyIGl0ZXJhdGlvblF1b3RpZW50ID0gZmllbGQuYnVpbGRNb25vbWlhbChkZWdyZWVEaWZmZXJlbmNlLCBzY2FsZSk7CgkgICAgICAgICAgICBxdW90aWVudCA9IHF1b3RpZW50LmFkZE9yU3VidHJhY3QoaXRlcmF0aW9uUXVvdGllbnQpOwoJICAgICAgICAgICAgcmVtYWluZGVyID0gcmVtYWluZGVyLmFkZE9yU3VidHJhY3QodGVybSk7CgkgICAgICAgIH0KCSAgICAgICAgcmV0dXJuIFtxdW90aWVudCwgcmVtYWluZGVyXTsKCSAgICB9OwoJICAgIC8qQE92ZXJyaWRlKi8KCSAgICBHZW5lcmljR0ZQb2x5LnByb3RvdHlwZS50b1N0cmluZyA9IGZ1bmN0aW9uICgpIHsKCSAgICAgICAgdmFyIHJlc3VsdCA9ICcnOwoJICAgICAgICBmb3IgKHZhciBkZWdyZWUgPSB0aGlzLmdldERlZ3JlZSgpOyBkZWdyZWUgPj0gMDsgZGVncmVlLS0pIHsKCSAgICAgICAgICAgIHZhciBjb2VmZmljaWVudCA9IHRoaXMuZ2V0Q29lZmZpY2llbnQoZGVncmVlKTsKCSAgICAgICAgICAgIGlmIChjb2VmZmljaWVudCAhPT0gMCkgewoJICAgICAgICAgICAgICAgIGlmIChjb2VmZmljaWVudCA8IDApIHsKCSAgICAgICAgICAgICAgICAgICAgcmVzdWx0ICs9ICcgLSAnOwoJICAgICAgICAgICAgICAgICAgICBjb2VmZmljaWVudCA9IC1jb2VmZmljaWVudDsKCSAgICAgICAgICAgICAgICB9CgkgICAgICAgICAgICAgICAgZWxzZSB7CgkgICAgICAgICAgICAgICAgICAgIGlmIChyZXN1bHQubGVuZ3RoID4gMCkgewoJICAgICAgICAgICAgICAgICAgICAgICAgcmVzdWx0ICs9ICcgKyAnOwoJICAgICAgICAgICAgICAgICAgICB9CgkgICAgICAgICAgICAgICAgfQoJICAgICAgICAgICAgICAgIGlmIChkZWdyZWUgPT09IDAgfHwgY29lZmZpY2llbnQgIT09IDEpIHsKCSAgICAgICAgICAgICAgICAgICAgdmFyIGFscGhhUG93ZXIgPSB0aGlzLmZpZWxkLmxvZyhjb2VmZmljaWVudCk7CgkgICAgICAgICAgICAgICAgICAgIGlmIChhbHBoYVBvd2VyID09PSAwKSB7CgkgICAgICAgICAgICAgICAgICAgICAgICByZXN1bHQgKz0gJzEnOwoJICAgICAgICAgICAgICAgICAgICB9CgkgICAgICAgICAgICAgICAgICAgIGVsc2UgaWYgKGFscGhhUG93ZXIgPT09IDEpIHsKCSAgICAgICAgICAgICAgICAgICAgICAgIHJlc3VsdCArPSAnYSc7CgkgICAgICAgICAgICAgICAgICAgIH0KCSAgICAgICAgICAgICAgICAgICAgZWxzZSB7CgkgICAgICAgICAgICAgICAgICAgICAgICByZXN1bHQgKz0gJ2FeJzsKCSAgICAgICAgICAgICAgICAgICAgICAgIHJlc3VsdCArPSBhbHBoYVBvd2VyOwoJICAgICAgICAgICAgICAgICAgICB9CgkgICAgICAgICAgICAgICAgfQoJICAgICAgICAgICAgICAgIGlmIChkZWdyZWUgIT09IDApIHsKCSAgICAgICAgICAgICAgICAgICAgaWYgKGRlZ3JlZSA9PT0gMSkgewoJICAgICAgICAgICAgICAgICAgICAgICAgcmVzdWx0ICs9ICd4JzsKCSAgICAgICAgICAgICAgICAgICAgfQoJICAgICAgICAgICAgICAgICAgICBlbHNlIHsKCSAgICAgICAgICAgICAgICAgICAgICAgIHJlc3VsdCArPSAneF4nOwoJICAgICAgICAgICAgICAgICAgICAgICAgcmVzdWx0ICs9IGRlZ3JlZTsKCSAgICAgICAgICAgICAgICAgICAgfQoJICAgICAgICAgICAgICAgIH0KCSAgICAgICAgICAgIH0KCSAgICAgICAgfQoJICAgICAgICByZXR1cm4gcmVzdWx0OwoJICAgIH07CgkgICAgcmV0dXJuIEdlbmVyaWNHRlBvbHk7Cgl9KCkpOwoJR2VuZXJpY0dGUG9seSQxLmRlZmF1bHQgPSBHZW5lcmljR0ZQb2x5OwoKCXZhciBBcml0aG1ldGljRXhjZXB0aW9uJDEgPSB7fTsKCgl2YXIgX19leHRlbmRzJDcgPSAoY29tbW9uanNHbG9iYWwgJiYgY29tbW9uanNHbG9iYWwuX19leHRlbmRzKSB8fCAoZnVuY3Rpb24gKCkgewoJICAgIHZhciBleHRlbmRTdGF0aWNzID0gZnVuY3Rpb24gKGQsIGIpIHsKCSAgICAgICAgZXh0ZW5kU3RhdGljcyA9IE9iamVjdC5zZXRQcm90b3R5cGVPZiB8fAoJICAgICAgICAgICAgKHsgX19wcm90b19fOiBbXSB9IGluc3RhbmNlb2YgQXJyYXkgJiYgZnVuY3Rpb24gKGQsIGIpIHsgZC5fX3Byb3RvX18gPSBiOyB9KSB8fAoJICAgICAgICAgICAgZnVuY3Rpb24gKGQsIGIpIHsgZm9yICh2YXIgcCBpbiBiKSBpZiAoYi5oYXNPd25Qcm9wZXJ0eShwKSkgZFtwXSA9IGJbcF07IH07CgkgICAgICAgIHJldHVybiBleHRlbmRTdGF0aWNzKGQsIGIpOwoJICAgIH07CgkgICAgcmV0dXJuIGZ1bmN0aW9uIChkLCBiKSB7CgkgICAgICAgIGV4dGVuZFN0YXRpY3MoZCwgYik7CgkgICAgICAgIGZ1bmN0aW9uIF9fKCkgeyB0aGlzLmNvbnN0cnVjdG9yID0gZDsgfQoJICAgICAgICBkLnByb3RvdHlwZSA9IGIgPT09IG51bGwgPyBPYmplY3QuY3JlYXRlKGIpIDogKF9fLnByb3RvdHlwZSA9IGIucHJvdG90eXBlLCBuZXcgX18oKSk7CgkgICAgfTsKCX0pKCk7CglPYmplY3QuZGVmaW5lUHJvcGVydHkoQXJpdGhtZXRpY0V4Y2VwdGlvbiQxLCAiX19lc01vZHVsZSIsIHsgdmFsdWU6IHRydWUgfSk7Cgl2YXIgRXhjZXB0aW9uXzEkMyA9IEV4Y2VwdGlvbiQxOwoJLyoqCgkgKiBDdXN0b20gRXJyb3IgY2xhc3Mgb2YgdHlwZSBFeGNlcHRpb24uCgkgKi8KCXZhciBBcml0aG1ldGljRXhjZXB0aW9uID0gLyoqIEBjbGFzcyAqLyAoZnVuY3Rpb24gKF9zdXBlcikgewoJICAgIF9fZXh0ZW5kcyQ3KEFyaXRobWV0aWNFeGNlcHRpb24sIF9zdXBlcik7CgkgICAgZnVuY3Rpb24gQXJpdGhtZXRpY0V4Y2VwdGlvbigpIHsKCSAgICAgICAgcmV0dXJuIF9zdXBlciAhPT0gbnVsbCAmJiBfc3VwZXIuYXBwbHkodGhpcywgYXJndW1lbnRzKSB8fCB0aGlzOwoJICAgIH0KCSAgICBBcml0aG1ldGljRXhjZXB0aW9uLmtpbmQgPSAnQXJpdGhtZXRpY0V4Y2VwdGlvbic7CgkgICAgcmV0dXJuIEFyaXRobWV0aWNFeGNlcHRpb247Cgl9KEV4Y2VwdGlvbl8xJDMuZGVmYXVsdCkpOwoJQXJpdGhtZXRpY0V4Y2VwdGlvbiQxLmRlZmF1bHQgPSBBcml0aG1ldGljRXhjZXB0aW9uOwoKCS8qCgkgKiBDb3B5cmlnaHQgMjAwNyBaWGluZyBhdXRob3JzCgkgKgoJICogTGljZW5zZWQgdW5kZXIgdGhlIEFwYWNoZSBMaWNlbnNlLCBWZXJzaW9uIDIuMCAodGhlICJMaWNlbnNlIik7CgkgKiB5b3UgbWF5IG5vdCB1c2UgdGhpcyBmaWxlIGV4Y2VwdCBpbiBjb21wbGlhbmNlIHdpdGggdGhlIExpY2Vuc2UuCgkgKiBZb3UgbWF5IG9idGFpbiBhIGNvcHkgb2YgdGhlIExpY2Vuc2UgYXQKCSAqCgkgKiAgICAgIGh0dHA6Ly93d3cuYXBhY2hlLm9yZy9saWNlbnNlcy9MSUNFTlNFLTIuMAoJICoKCSAqIFVubGVzcyByZXF1aXJlZCBieSBhcHBsaWNhYmxlIGxhdyBvciBhZ3JlZWQgdG8gaW4gd3JpdGluZywgc29mdHdhcmUKCSAqIGRpc3RyaWJ1dGVkIHVuZGVyIHRoZSBMaWNlbnNlIGlzIGRpc3RyaWJ1dGVkIG9uIGFuICJBUyBJUyIgQkFTSVMsCgkgKiBXSVRIT1VUIFdBUlJBTlRJRVMgT1IgQ09ORElUSU9OUyBPRiBBTlkgS0lORCwgZWl0aGVyIGV4cHJlc3Mgb3IgaW1wbGllZC4KCSAqIFNlZSB0aGUgTGljZW5zZSBmb3IgdGhlIHNwZWNpZmljIGxhbmd1YWdlIGdvdmVybmluZyBwZXJtaXNzaW9ucyBhbmQKCSAqIGxpbWl0YXRpb25zIHVuZGVyIHRoZSBMaWNlbnNlLgoJICovCgl2YXIgX19leHRlbmRzJDYgPSAoY29tbW9uanNHbG9iYWwgJiYgY29tbW9uanNHbG9iYWwuX19leHRlbmRzKSB8fCAoZnVuY3Rpb24gKCkgewoJICAgIHZhciBleHRlbmRTdGF0aWNzID0gZnVuY3Rpb24gKGQsIGIpIHsKCSAgICAgICAgZXh0ZW5kU3RhdGljcyA9IE9iamVjdC5zZXRQcm90b3R5cGVPZiB8fAoJICAgICAgICAgICAgKHsgX19wcm90b19fOiBbXSB9IGluc3RhbmNlb2YgQXJyYXkgJiYgZnVuY3Rpb24gKGQsIGIpIHsgZC5fX3Byb3RvX18gPSBiOyB9KSB8fAoJICAgICAgICAgICAgZnVuY3Rpb24gKGQsIGIpIHsgZm9yICh2YXIgcCBpbiBiKSBpZiAoYi5oYXNPd25Qcm9wZXJ0eShwKSkgZFtwXSA9IGJbcF07IH07CgkgICAgICAgIHJldHVybiBleHRlbmRTdGF0aWNzKGQsIGIpOwoJICAgIH07CgkgICAgcmV0dXJuIGZ1bmN0aW9uIChkLCBiKSB7CgkgICAgICAgIGV4dGVuZFN0YXRpY3MoZCwgYik7CgkgICAgICAgIGZ1bmN0aW9uIF9fKCkgeyB0aGlzLmNvbnN0cnVjdG9yID0gZDsgfQoJICAgICAgICBkLnByb3RvdHlwZSA9IGIgPT09IG51bGwgPyBPYmplY3QuY3JlYXRlKGIpIDogKF9fLnByb3RvdHlwZSA9IGIucHJvdG90eXBlLCBuZXcgX18oKSk7CgkgICAgfTsKCX0pKCk7CglPYmplY3QuZGVmaW5lUHJvcGVydHkoR2VuZXJpY0dGJDEsICJfX2VzTW9kdWxlIiwgeyB2YWx1ZTogdHJ1ZSB9KTsKCS8qbmFtZXNwYWNlIGNvbS5nb29nbGUuenhpbmcuY29tbW9uLnJlZWRzb2xvbW9uIHsqLwoJdmFyIEdlbmVyaWNHRlBvbHlfMSQxID0gR2VuZXJpY0dGUG9seSQxOwoJdmFyIEFic3RyYWN0R2VuZXJpY0dGXzEgPSBBYnN0cmFjdEdlbmVyaWNHRiQxOwoJdmFyIEludGVnZXJfMSQxID0gSW50ZWdlciQxOwoJdmFyIElsbGVnYWxBcmd1bWVudEV4Y2VwdGlvbl8xJDMgPSBJbGxlZ2FsQXJndW1lbnRFeGNlcHRpb24kMTsKCXZhciBBcml0aG1ldGljRXhjZXB0aW9uXzEgPSBBcml0aG1ldGljRXhjZXB0aW9uJDE7CgkvKioKCSAqIDxwPlRoaXMgY2xhc3MgY29udGFpbnMgdXRpbGl0eSBtZXRob2RzIGZvciBwZXJmb3JtaW5nIG1hdGhlbWF0aWNhbCBvcGVyYXRpb25zIG92ZXIKCSAqIHRoZSBHYWxvaXMgRmllbGRzLiBPcGVyYXRpb25zIHVzZSBhIGdpdmVuIHByaW1pdGl2ZSBwb2x5bm9taWFsIGluIGNhbGN1bGF0aW9ucy48L3A+CgkgKgoJICogPHA+VGhyb3VnaG91dCB0aGlzIHBhY2thZ2UsIGVsZW1lbnRzIG9mIHRoZSBHRiBhcmUgcmVwcmVzZW50ZWQgYXMgYW4ge0Bjb2RlIGludH0KCSAqIGZvciBjb252ZW5pZW5jZSBhbmQgc3BlZWQgKGJ1dCBhdCB0aGUgY29zdCBvZiBtZW1vcnkpLgoJICogPC9wPgoJICoKCSAqIEBhdXRob3IgU2VhbiBPd2VuCgkgKiBAYXV0aG9yIERhdmlkIE9saXZpZXIKCSAqLwoJdmFyIEdlbmVyaWNHRiA9IC8qKiBAY2xhc3MgKi8gKGZ1bmN0aW9uIChfc3VwZXIpIHsKCSAgICBfX2V4dGVuZHMkNihHZW5lcmljR0YsIF9zdXBlcik7CgkgICAgLyoqCgkgICAgICogQ3JlYXRlIGEgcmVwcmVzZW50YXRpb24gb2YgR0Yoc2l6ZSkgdXNpbmcgdGhlIGdpdmVuIHByaW1pdGl2ZSBwb2x5bm9taWFsLgoJICAgICAqCgkgICAgICogQHBhcmFtIHByaW1pdGl2ZSBpcnJlZHVjaWJsZSBwb2x5bm9taWFsIHdob3NlIGNvZWZmaWNpZW50cyBhcmUgcmVwcmVzZW50ZWQgYnkKCSAgICAgKiAgdGhlIGJpdHMgb2YgYW4gaW50LCB3aGVyZSB0aGUgbGVhc3Qtc2lnbmlmaWNhbnQgYml0IHJlcHJlc2VudHMgdGhlIGNvbnN0YW50CgkgICAgICogIGNvZWZmaWNpZW50CgkgICAgICogQHBhcmFtIHNpemUgdGhlIHNpemUgb2YgdGhlIGZpZWxkCgkgICAgICogQHBhcmFtIGIgdGhlIGZhY3RvciBiIGluIHRoZSBnZW5lcmF0b3IgcG9seW5vbWlhbCBjYW4gYmUgMC0gb3IgMS1iYXNlZAoJICAgICAqICAoZyh4KSA9ICh4K2FeYikoeCthXihiKzEpKS4uLih4K2FeKGIrMnQtMSkpKS4KCSAgICAgKiAgSW4gbW9zdCBjYXNlcyBpdCBzaG91bGQgYmUgMSwgYnV0IGZvciBRUiBjb2RlIGl0IGlzIDAuCgkgICAgICovCgkgICAgZnVuY3Rpb24gR2VuZXJpY0dGKHByaW1pdGl2ZSAvKmludCovLCBzaXplIC8qaW50Ki8sIGdlbmVyYXRvckJhc2UgLyppbnQqLykgewoJICAgICAgICB2YXIgX3RoaXMgPSBfc3VwZXIuY2FsbCh0aGlzKSB8fCB0aGlzOwoJICAgICAgICBfdGhpcy5wcmltaXRpdmUgPSBwcmltaXRpdmU7CgkgICAgICAgIF90aGlzLnNpemUgPSBzaXplOwoJICAgICAgICBfdGhpcy5nZW5lcmF0b3JCYXNlID0gZ2VuZXJhdG9yQmFzZTsKCSAgICAgICAgdmFyIGV4cFRhYmxlID0gbmV3IEludDMyQXJyYXkoc2l6ZSk7CgkgICAgICAgIHZhciB4ID0gMTsKCSAgICAgICAgZm9yICh2YXIgaSA9IDA7IGkgPCBzaXplOyBpKyspIHsKCSAgICAgICAgICAgIGV4cFRhYmxlW2ldID0geDsKCSAgICAgICAgICAgIHggKj0gMjsgLy8gd2UncmUgYXNzdW1pbmcgdGhlIGdlbmVyYXRvciBhbHBoYSBpcyAyCgkgICAgICAgICAgICBpZiAoeCA+PSBzaXplKSB7CgkgICAgICAgICAgICAgICAgeCBePSBwcmltaXRpdmU7CgkgICAgICAgICAgICAgICAgeCAmPSBzaXplIC0gMTsKCSAgICAgICAgICAgIH0KCSAgICAgICAgfQoJICAgICAgICBfdGhpcy5leHBUYWJsZSA9IGV4cFRhYmxlOwoJICAgICAgICB2YXIgbG9nVGFibGUgPSBuZXcgSW50MzJBcnJheShzaXplKTsKCSAgICAgICAgZm9yICh2YXIgaSA9IDA7IGkgPCBzaXplIC0gMTsgaSsrKSB7CgkgICAgICAgICAgICBsb2dUYWJsZVtleHBUYWJsZVtpXV0gPSBpOwoJICAgICAgICB9CgkgICAgICAgIF90aGlzLmxvZ1RhYmxlID0gbG9nVGFibGU7CgkgICAgICAgIC8vIGxvZ1RhYmxlWzBdID09IDAgYnV0IHRoaXMgc2hvdWxkIG5ldmVyIGJlIHVzZWQKCSAgICAgICAgX3RoaXMuemVybyA9IG5ldyBHZW5lcmljR0ZQb2x5XzEkMS5kZWZhdWx0KF90aGlzLCBJbnQzMkFycmF5LmZyb20oWzBdKSk7CgkgICAgICAgIF90aGlzLm9uZSA9IG5ldyBHZW5lcmljR0ZQb2x5XzEkMS5kZWZhdWx0KF90aGlzLCBJbnQzMkFycmF5LmZyb20oWzFdKSk7CgkgICAgICAgIHJldHVybiBfdGhpczsKCSAgICB9CgkgICAgR2VuZXJpY0dGLnByb3RvdHlwZS5nZXRaZXJvID0gZnVuY3Rpb24gKCkgewoJICAgICAgICByZXR1cm4gdGhpcy56ZXJvOwoJICAgIH07CgkgICAgR2VuZXJpY0dGLnByb3RvdHlwZS5nZXRPbmUgPSBmdW5jdGlvbiAoKSB7CgkgICAgICAgIHJldHVybiB0aGlzLm9uZTsKCSAgICB9OwoJICAgIC8qKgoJICAgICAqIEByZXR1cm4gdGhlIG1vbm9taWFsIHJlcHJlc2VudGluZyBjb2VmZmljaWVudCAqIHheZGVncmVlCgkgICAgICovCgkgICAgR2VuZXJpY0dGLnByb3RvdHlwZS5idWlsZE1vbm9taWFsID0gZnVuY3Rpb24gKGRlZ3JlZSAvKmludCovLCBjb2VmZmljaWVudCAvKmludCovKSB7CgkgICAgICAgIGlmIChkZWdyZWUgPCAwKSB7CgkgICAgICAgICAgICB0aHJvdyBuZXcgSWxsZWdhbEFyZ3VtZW50RXhjZXB0aW9uXzEkMy5kZWZhdWx0KCk7CgkgICAgICAgIH0KCSAgICAgICAgaWYgKGNvZWZmaWNpZW50ID09PSAwKSB7CgkgICAgICAgICAgICByZXR1cm4gdGhpcy56ZXJvOwoJICAgICAgICB9CgkgICAgICAgIHZhciBjb2VmZmljaWVudHMgPSBuZXcgSW50MzJBcnJheShkZWdyZWUgKyAxKTsKCSAgICAgICAgY29lZmZpY2llbnRzWzBdID0gY29lZmZpY2llbnQ7CgkgICAgICAgIHJldHVybiBuZXcgR2VuZXJpY0dGUG9seV8xJDEuZGVmYXVsdCh0aGlzLCBjb2VmZmljaWVudHMpOwoJICAgIH07CgkgICAgLyoqCgkgICAgICogQHJldHVybiBtdWx0aXBsaWNhdGl2ZSBpbnZlcnNlIG9mIGEKCSAgICAgKi8KCSAgICBHZW5lcmljR0YucHJvdG90eXBlLmludmVyc2UgPSBmdW5jdGlvbiAoYSAvKmludCovKSB7CgkgICAgICAgIGlmIChhID09PSAwKSB7CgkgICAgICAgICAgICB0aHJvdyBuZXcgQXJpdGhtZXRpY0V4Y2VwdGlvbl8xLmRlZmF1bHQoKTsKCSAgICAgICAgfQoJICAgICAgICByZXR1cm4gdGhpcy5leHBUYWJsZVt0aGlzLnNpemUgLSB0aGlzLmxvZ1RhYmxlW2FdIC0gMV07CgkgICAgfTsKCSAgICAvKioKCSAgICAgKiBAcmV0dXJuIHByb2R1Y3Qgb2YgYSBhbmQgYiBpbiBHRihzaXplKQoJICAgICAqLwoJICAgIEdlbmVyaWNHRi5wcm90b3R5cGUubXVsdGlwbHkgPSBmdW5jdGlvbiAoYSAvKmludCovLCBiIC8qaW50Ki8pIHsKCSAgICAgICAgaWYgKGEgPT09IDAgfHwgYiA9PT0gMCkgewoJICAgICAgICAgICAgcmV0dXJuIDA7CgkgICAgICAgIH0KCSAgICAgICAgcmV0dXJuIHRoaXMuZXhwVGFibGVbKHRoaXMubG9nVGFibGVbYV0gKyB0aGlzLmxvZ1RhYmxlW2JdKSAlICh0aGlzLnNpemUgLSAxKV07CgkgICAgfTsKCSAgICBHZW5lcmljR0YucHJvdG90eXBlLmdldFNpemUgPSBmdW5jdGlvbiAoKSB7CgkgICAgICAgIHJldHVybiB0aGlzLnNpemU7CgkgICAgfTsKCSAgICBHZW5lcmljR0YucHJvdG90eXBlLmdldEdlbmVyYXRvckJhc2UgPSBmdW5jdGlvbiAoKSB7CgkgICAgICAgIHJldHVybiB0aGlzLmdlbmVyYXRvckJhc2U7CgkgICAgfTsKCSAgICAvKkBPdmVycmlkZSovCgkgICAgR2VuZXJpY0dGLnByb3RvdHlwZS50b1N0cmluZyA9IGZ1bmN0aW9uICgpIHsKCSAgICAgICAgcmV0dXJuICgnR0YoMHgnICsgSW50ZWdlcl8xJDEuZGVmYXVsdC50b0hleFN0cmluZyh0aGlzLnByaW1pdGl2ZSkgKyAnLCcgKyB0aGlzLnNpemUgKyAnKScpOwoJICAgIH07CgkgICAgR2VuZXJpY0dGLnByb3RvdHlwZS5lcXVhbHMgPSBmdW5jdGlvbiAobykgewoJICAgICAgICByZXR1cm4gbyA9PT0gdGhpczsKCSAgICB9OwoJICAgIEdlbmVyaWNHRi5BWlRFQ19EQVRBXzEyID0gbmV3IEdlbmVyaWNHRigweDEwNjksIDQwOTYsIDEpOyAvLyB4XjEyICsgeF42ICsgeF41ICsgeF4zICsgMQoJICAgIEdlbmVyaWNHRi5BWlRFQ19EQVRBXzEwID0gbmV3IEdlbmVyaWNHRigweDQwOSwgMTAyNCwgMSk7IC8vIHheMTAgKyB4XjMgKyAxCgkgICAgR2VuZXJpY0dGLkFaVEVDX0RBVEFfNiA9IG5ldyBHZW5lcmljR0YoMHg0MywgNjQsIDEpOyAvLyB4XjYgKyB4ICsgMQoJICAgIEdlbmVyaWNHRi5BWlRFQ19QQVJBTSA9IG5ldyBHZW5lcmljR0YoMHgxMywgMTYsIDEpOyAvLyB4XjQgKyB4ICsgMQoJICAgIEdlbmVyaWNHRi5RUl9DT0RFX0ZJRUxEXzI1NiA9IG5ldyBHZW5lcmljR0YoMHgwMTFkLCAyNTYsIDApOyAvLyB4XjggKyB4XjQgKyB4XjMgKyB4XjIgKyAxCgkgICAgR2VuZXJpY0dGLkRBVEFfTUFUUklYX0ZJRUxEXzI1NiA9IG5ldyBHZW5lcmljR0YoMHgwMTJkLCAyNTYsIDEpOyAvLyB4XjggKyB4XjUgKyB4XjMgKyB4XjIgKyAxCgkgICAgR2VuZXJpY0dGLkFaVEVDX0RBVEFfOCA9IEdlbmVyaWNHRi5EQVRBX01BVFJJWF9GSUVMRF8yNTY7CgkgICAgR2VuZXJpY0dGLk1BWElDT0RFX0ZJRUxEXzY0ID0gR2VuZXJpY0dGLkFaVEVDX0RBVEFfNjsKCSAgICByZXR1cm4gR2VuZXJpY0dGOwoJfShBYnN0cmFjdEdlbmVyaWNHRl8xLmRlZmF1bHQpKTsKCUdlbmVyaWNHRiQxLmRlZmF1bHQgPSBHZW5lcmljR0Y7CgoJdmFyIFJlZWRTb2xvbW9uRGVjb2RlciQxID0ge307CgoJdmFyIFJlZWRTb2xvbW9uRXhjZXB0aW9uJDEgPSB7fTsKCgl2YXIgX19leHRlbmRzJDUgPSAoY29tbW9uanNHbG9iYWwgJiYgY29tbW9uanNHbG9iYWwuX19leHRlbmRzKSB8fCAoZnVuY3Rpb24gKCkgewoJICAgIHZhciBleHRlbmRTdGF0aWNzID0gZnVuY3Rpb24gKGQsIGIpIHsKCSAgICAgICAgZXh0ZW5kU3RhdGljcyA9IE9iamVjdC5zZXRQcm90b3R5cGVPZiB8fAoJICAgICAgICAgICAgKHsgX19wcm90b19fOiBbXSB9IGluc3RhbmNlb2YgQXJyYXkgJiYgZnVuY3Rpb24gKGQsIGIpIHsgZC5fX3Byb3RvX18gPSBiOyB9KSB8fAoJICAgICAgICAgICAgZnVuY3Rpb24gKGQsIGIpIHsgZm9yICh2YXIgcCBpbiBiKSBpZiAoYi5oYXNPd25Qcm9wZXJ0eShwKSkgZFtwXSA9IGJbcF07IH07CgkgICAgICAgIHJldHVybiBleHRlbmRTdGF0aWNzKGQsIGIpOwoJICAgIH07CgkgICAgcmV0dXJuIGZ1bmN0aW9uIChkLCBiKSB7CgkgICAgICAgIGV4dGVuZFN0YXRpY3MoZCwgYik7CgkgICAgICAgIGZ1bmN0aW9uIF9fKCkgeyB0aGlzLmNvbnN0cnVjdG9yID0gZDsgfQoJICAgICAgICBkLnByb3RvdHlwZSA9IGIgPT09IG51bGwgPyBPYmplY3QuY3JlYXRlKGIpIDogKF9fLnByb3RvdHlwZSA9IGIucHJvdG90eXBlLCBuZXcgX18oKSk7CgkgICAgfTsKCX0pKCk7CglPYmplY3QuZGVmaW5lUHJvcGVydHkoUmVlZFNvbG9tb25FeGNlcHRpb24kMSwgIl9fZXNNb2R1bGUiLCB7IHZhbHVlOiB0cnVlIH0pOwoJdmFyIEV4Y2VwdGlvbl8xJDIgPSBFeGNlcHRpb24kMTsKCS8qKgoJICogQ3VzdG9tIEVycm9yIGNsYXNzIG9mIHR5cGUgRXhjZXB0aW9uLgoJICovCgl2YXIgUmVlZFNvbG9tb25FeGNlcHRpb24gPSAvKiogQGNsYXNzICovIChmdW5jdGlvbiAoX3N1cGVyKSB7CgkgICAgX19leHRlbmRzJDUoUmVlZFNvbG9tb25FeGNlcHRpb24sIF9zdXBlcik7CgkgICAgZnVuY3Rpb24gUmVlZFNvbG9tb25FeGNlcHRpb24oKSB7CgkgICAgICAgIHJldHVybiBfc3VwZXIgIT09IG51bGwgJiYgX3N1cGVyLmFwcGx5KHRoaXMsIGFyZ3VtZW50cykgfHwgdGhpczsKCSAgICB9CgkgICAgUmVlZFNvbG9tb25FeGNlcHRpb24ua2luZCA9ICdSZWVkU29sb21vbkV4Y2VwdGlvbic7CgkgICAgcmV0dXJuIFJlZWRTb2xvbW9uRXhjZXB0aW9uOwoJfShFeGNlcHRpb25fMSQyLmRlZmF1bHQpKTsKCVJlZWRTb2xvbW9uRXhjZXB0aW9uJDEuZGVmYXVsdCA9IFJlZWRTb2xvbW9uRXhjZXB0aW9uOwoKCXZhciBJbGxlZ2FsU3RhdGVFeGNlcHRpb24kMSA9IHt9OwoKCXZhciBfX2V4dGVuZHMkNCA9IChjb21tb25qc0dsb2JhbCAmJiBjb21tb25qc0dsb2JhbC5fX2V4dGVuZHMpIHx8IChmdW5jdGlvbiAoKSB7CgkgICAgdmFyIGV4dGVuZFN0YXRpY3MgPSBmdW5jdGlvbiAoZCwgYikgewoJICAgICAgICBleHRlbmRTdGF0aWNzID0gT2JqZWN0LnNldFByb3RvdHlwZU9mIHx8CgkgICAgICAgICAgICAoeyBfX3Byb3RvX186IFtdIH0gaW5zdGFuY2VvZiBBcnJheSAmJiBmdW5jdGlvbiAoZCwgYikgeyBkLl9fcHJvdG9fXyA9IGI7IH0pIHx8CgkgICAgICAgICAgICBmdW5jdGlvbiAoZCwgYikgeyBmb3IgKHZhciBwIGluIGIpIGlmIChiLmhhc093blByb3BlcnR5KHApKSBkW3BdID0gYltwXTsgfTsKCSAgICAgICAgcmV0dXJuIGV4dGVuZFN0YXRpY3MoZCwgYik7CgkgICAgfTsKCSAgICByZXR1cm4gZnVuY3Rpb24gKGQsIGIpIHsKCSAgICAgICAgZXh0ZW5kU3RhdGljcyhkLCBiKTsKCSAgICAgICAgZnVuY3Rpb24gX18oKSB7IHRoaXMuY29uc3RydWN0b3IgPSBkOyB9CgkgICAgICAgIGQucHJvdG90eXBlID0gYiA9PT0gbnVsbCA/IE9iamVjdC5jcmVhdGUoYikgOiAoX18ucHJvdG90eXBlID0gYi5wcm90b3R5cGUsIG5ldyBfXygpKTsKCSAgICB9OwoJfSkoKTsKCU9iamVjdC5kZWZpbmVQcm9wZXJ0eShJbGxlZ2FsU3RhdGVFeGNlcHRpb24kMSwgIl9fZXNNb2R1bGUiLCB7IHZhbHVlOiB0cnVlIH0pOwoJdmFyIEV4Y2VwdGlvbl8xJDEgPSBFeGNlcHRpb24kMTsKCS8qKgoJICogQ3VzdG9tIEVycm9yIGNsYXNzIG9mIHR5cGUgRXhjZXB0aW9uLgoJICovCgl2YXIgSWxsZWdhbFN0YXRlRXhjZXB0aW9uID0gLyoqIEBjbGFzcyAqLyAoZnVuY3Rpb24gKF9zdXBlcikgewoJICAgIF9fZXh0ZW5kcyQ0KElsbGVnYWxTdGF0ZUV4Y2VwdGlvbiwgX3N1cGVyKTsKCSAgICBmdW5jdGlvbiBJbGxlZ2FsU3RhdGVFeGNlcHRpb24oKSB7CgkgICAgICAgIHJldHVybiBfc3VwZXIgIT09IG51bGwgJiYgX3N1cGVyLmFwcGx5KHRoaXMsIGFyZ3VtZW50cykgfHwgdGhpczsKCSAgICB9CgkgICAgSWxsZWdhbFN0YXRlRXhjZXB0aW9uLmtpbmQgPSAnSWxsZWdhbFN0YXRlRXhjZXB0aW9uJzsKCSAgICByZXR1cm4gSWxsZWdhbFN0YXRlRXhjZXB0aW9uOwoJfShFeGNlcHRpb25fMSQxLmRlZmF1bHQpKTsKCUlsbGVnYWxTdGF0ZUV4Y2VwdGlvbiQxLmRlZmF1bHQgPSBJbGxlZ2FsU3RhdGVFeGNlcHRpb247CgoJLyoKCSAqIENvcHlyaWdodCAyMDA3IFpYaW5nIGF1dGhvcnMKCSAqCgkgKiBMaWNlbnNlZCB1bmRlciB0aGUgQXBhY2hlIExpY2Vuc2UsIFZlcnNpb24gMi4wICh0aGUgIkxpY2Vuc2UiKTsKCSAqIHlvdSBtYXkgbm90IHVzZSB0aGlzIGZpbGUgZXhjZXB0IGluIGNvbXBsaWFuY2Ugd2l0aCB0aGUgTGljZW5zZS4KCSAqIFlvdSBtYXkgb2J0YWluIGEgY29weSBvZiB0aGUgTGljZW5zZSBhdAoJICoKCSAqICAgICAgaHR0cDovL3d3dy5hcGFjaGUub3JnL2xpY2Vuc2VzL0xJQ0VOU0UtMi4wCgkgKgoJICogVW5sZXNzIHJlcXVpcmVkIGJ5IGFwcGxpY2FibGUgbGF3IG9yIGFncmVlZCB0byBpbiB3cml0aW5nLCBzb2Z0d2FyZQoJICogZGlzdHJpYnV0ZWQgdW5kZXIgdGhlIExpY2Vuc2UgaXMgZGlzdHJpYnV0ZWQgb24gYW4gIkFTIElTIiBCQVNJUywKCSAqIFdJVEhPVVQgV0FSUkFOVElFUyBPUiBDT05ESVRJT05TIE9GIEFOWSBLSU5ELCBlaXRoZXIgZXhwcmVzcyBvciBpbXBsaWVkLgoJICogU2VlIHRoZSBMaWNlbnNlIGZvciB0aGUgc3BlY2lmaWMgbGFuZ3VhZ2UgZ292ZXJuaW5nIHBlcm1pc3Npb25zIGFuZAoJICogbGltaXRhdGlvbnMgdW5kZXIgdGhlIExpY2Vuc2UuCgkgKi8KCU9iamVjdC5kZWZpbmVQcm9wZXJ0eShSZWVkU29sb21vbkRlY29kZXIkMSwgIl9fZXNNb2R1bGUiLCB7IHZhbHVlOiB0cnVlIH0pOwoJLypuYW1lc3BhY2UgY29tLmdvb2dsZS56eGluZy5jb21tb24ucmVlZHNvbG9tb24geyovCgl2YXIgR2VuZXJpY0dGXzEkMSA9IEdlbmVyaWNHRiQxOwoJdmFyIEdlbmVyaWNHRlBvbHlfMSA9IEdlbmVyaWNHRlBvbHkkMTsKCXZhciBSZWVkU29sb21vbkV4Y2VwdGlvbl8xID0gUmVlZFNvbG9tb25FeGNlcHRpb24kMTsKCXZhciBJbGxlZ2FsU3RhdGVFeGNlcHRpb25fMSA9IElsbGVnYWxTdGF0ZUV4Y2VwdGlvbiQxOwoJLyoqCgkgKiA8cD5JbXBsZW1lbnRzIFJlZWQtU29sb21vbiBkZWNvZGluZywgYXMgdGhlIG5hbWUgaW1wbGllcy48L3A+CgkgKgoJICogPHA+VGhlIGFsZ29yaXRobSB3aWxsIG5vdCBiZSBleHBsYWluZWQgaGVyZSwgYnV0IHRoZSBmb2xsb3dpbmcgcmVmZXJlbmNlcyB3ZXJlIGhlbHBmdWwKCSAqIGluIGNyZWF0aW5nIHRoaXMgaW1wbGVtZW50YXRpb246PC9wPgoJICoKCSAqIDx1bD4KCSAqIDxsaT5CcnVjZSBNYWdncy4KCSAqIDxhIGhyZWY9Imh0dHA6Ly93d3cuY3MuY211LmVkdS9hZnMvY3MuY211LmVkdS9wcm9qZWN0L3BzY2ljby1ndXliL3JlYWx3b3JsZC93d3cvcnNfZGVjb2RlLnBzIj4KCSAqICJEZWNvZGluZyBSZWVkLVNvbG9tb24gQ29kZXMiPC9hPiAoc2VlIGRpc2N1c3Npb24gb2YgRm9ybmV5J3MgRm9ybXVsYSk8L2xpPgoJICogPGxpPkouSS4gSGFsbC4gPGEgaHJlZj0id3d3Lm10aC5tc3UuZWR1L35qaGFsbC9jbGFzc2VzL2NvZGVub3Rlcy9HUlMucGRmIj4KCSAqICJDaGFwdGVyIDUuIEdlbmVyYWxpemVkIFJlZWQtU29sb21vbiBDb2RlcyI8L2E+CgkgKiAoc2VlIGRpc2N1c3Npb24gb2YgRXVjbGlkZWFuIGFsZ29yaXRobSk8L2xpPgoJICogPC91bD4KCSAqCgkgKiA8cD5NdWNoIGNyZWRpdCBpcyBkdWUgdG8gV2lsbGlhbSBSdWNrbGlkZ2Ugc2luY2UgcG9ydGlvbnMgb2YgdGhpcyBjb2RlIGFyZSBhbiBpbmRpcmVjdAoJICogcG9ydCBvZiBoaXMgQysrIFJlZWQtU29sb21vbiBpbXBsZW1lbnRhdGlvbi48L3A+CgkgKgoJICogQGF1dGhvciBTZWFuIE93ZW4KCSAqIEBhdXRob3IgV2lsbGlhbSBSdWNrbGlkZ2UKCSAqIEBhdXRob3Igc2FuZm9yZHNxdWlyZXMKCSAqLwoJdmFyIFJlZWRTb2xvbW9uRGVjb2RlciA9IC8qKiBAY2xhc3MgKi8gKGZ1bmN0aW9uICgpIHsKCSAgICBmdW5jdGlvbiBSZWVkU29sb21vbkRlY29kZXIoZmllbGQpIHsKCSAgICAgICAgdGhpcy5maWVsZCA9IGZpZWxkOwoJICAgIH0KCSAgICAvKioKCSAgICAgKiA8cD5EZWNvZGVzIGdpdmVuIHNldCBvZiByZWNlaXZlZCBjb2Rld29yZHMsIHdoaWNoIGluY2x1ZGUgYm90aCBkYXRhIGFuZCBlcnJvci1jb3JyZWN0aW9uCgkgICAgICogY29kZXdvcmRzLiBSZWFsbHksIHRoaXMgbWVhbnMgaXQgdXNlcyBSZWVkLVNvbG9tb24gdG8gZGV0ZWN0IGFuZCBjb3JyZWN0IGVycm9ycywgaW4tcGxhY2UsCgkgICAgICogaW4gdGhlIGlucHV0LjwvcD4KCSAgICAgKgoJICAgICAqIEBwYXJhbSByZWNlaXZlZCBkYXRhIGFuZCBlcnJvci1jb3JyZWN0aW9uIGNvZGV3b3JkcwoJICAgICAqIEBwYXJhbSB0d29TIG51bWJlciBvZiBlcnJvci1jb3JyZWN0aW9uIGNvZGV3b3JkcyBhdmFpbGFibGUKCSAgICAgKiBAdGhyb3dzIFJlZWRTb2xvbW9uRXhjZXB0aW9uIGlmIGRlY29kaW5nIGZhaWxzIGZvciBhbnkgcmVhc29uCgkgICAgICovCgkgICAgUmVlZFNvbG9tb25EZWNvZGVyLnByb3RvdHlwZS5kZWNvZGUgPSBmdW5jdGlvbiAocmVjZWl2ZWQsIHR3b1MgLyppbnQqLykgewoJICAgICAgICB2YXIgZmllbGQgPSB0aGlzLmZpZWxkOwoJICAgICAgICB2YXIgcG9seSA9IG5ldyBHZW5lcmljR0ZQb2x5XzEuZGVmYXVsdChmaWVsZCwgcmVjZWl2ZWQpOwoJICAgICAgICB2YXIgc3luZHJvbWVDb2VmZmljaWVudHMgPSBuZXcgSW50MzJBcnJheSh0d29TKTsKCSAgICAgICAgdmFyIG5vRXJyb3IgPSB0cnVlOwoJICAgICAgICBmb3IgKHZhciBpID0gMDsgaSA8IHR3b1M7IGkrKykgewoJICAgICAgICAgICAgdmFyIGV2YWxSZXN1bHQgPSBwb2x5LmV2YWx1YXRlQXQoZmllbGQuZXhwKGkgKyBmaWVsZC5nZXRHZW5lcmF0b3JCYXNlKCkpKTsKCSAgICAgICAgICAgIHN5bmRyb21lQ29lZmZpY2llbnRzW3N5bmRyb21lQ29lZmZpY2llbnRzLmxlbmd0aCAtIDEgLSBpXSA9IGV2YWxSZXN1bHQ7CgkgICAgICAgICAgICBpZiAoZXZhbFJlc3VsdCAhPT0gMCkgewoJICAgICAgICAgICAgICAgIG5vRXJyb3IgPSBmYWxzZTsKCSAgICAgICAgICAgIH0KCSAgICAgICAgfQoJICAgICAgICBpZiAobm9FcnJvcikgewoJICAgICAgICAgICAgcmV0dXJuOwoJICAgICAgICB9CgkgICAgICAgIHZhciBzeW5kcm9tZSA9IG5ldyBHZW5lcmljR0ZQb2x5XzEuZGVmYXVsdChmaWVsZCwgc3luZHJvbWVDb2VmZmljaWVudHMpOwoJICAgICAgICB2YXIgc2lnbWFPbWVnYSA9IHRoaXMucnVuRXVjbGlkZWFuQWxnb3JpdGhtKGZpZWxkLmJ1aWxkTW9ub21pYWwodHdvUywgMSksIHN5bmRyb21lLCB0d29TKTsKCSAgICAgICAgdmFyIHNpZ21hID0gc2lnbWFPbWVnYVswXTsKCSAgICAgICAgdmFyIG9tZWdhID0gc2lnbWFPbWVnYVsxXTsKCSAgICAgICAgdmFyIGVycm9yTG9jYXRpb25zID0gdGhpcy5maW5kRXJyb3JMb2NhdGlvbnMoc2lnbWEpOwoJICAgICAgICB2YXIgZXJyb3JNYWduaXR1ZGVzID0gdGhpcy5maW5kRXJyb3JNYWduaXR1ZGVzKG9tZWdhLCBlcnJvckxvY2F0aW9ucyk7CgkgICAgICAgIGZvciAodmFyIGkgPSAwOyBpIDwgZXJyb3JMb2NhdGlvbnMubGVuZ3RoOyBpKyspIHsKCSAgICAgICAgICAgIHZhciBwb3NpdGlvbiA9IHJlY2VpdmVkLmxlbmd0aCAtIDEgLSBmaWVsZC5sb2coZXJyb3JMb2NhdGlvbnNbaV0pOwoJICAgICAgICAgICAgaWYgKHBvc2l0aW9uIDwgMCkgewoJICAgICAgICAgICAgICAgIHRocm93IG5ldyBSZWVkU29sb21vbkV4Y2VwdGlvbl8xLmRlZmF1bHQoJ0JhZCBlcnJvciBsb2NhdGlvbicpOwoJICAgICAgICAgICAgfQoJICAgICAgICAgICAgcmVjZWl2ZWRbcG9zaXRpb25dID0gR2VuZXJpY0dGXzEkMS5kZWZhdWx0LmFkZE9yU3VidHJhY3QocmVjZWl2ZWRbcG9zaXRpb25dLCBlcnJvck1hZ25pdHVkZXNbaV0pOwoJICAgICAgICB9CgkgICAgfTsKCSAgICBSZWVkU29sb21vbkRlY29kZXIucHJvdG90eXBlLnJ1bkV1Y2xpZGVhbkFsZ29yaXRobSA9IGZ1bmN0aW9uIChhLCBiLCBSIC8qaW50Ki8pIHsKCSAgICAgICAgLy8gQXNzdW1lIGEncyBkZWdyZWUgaXMgPj0gYidzCgkgICAgICAgIGlmIChhLmdldERlZ3JlZSgpIDwgYi5nZXREZWdyZWUoKSkgewoJICAgICAgICAgICAgdmFyIHRlbXAgPSBhOwoJICAgICAgICAgICAgYSA9IGI7CgkgICAgICAgICAgICBiID0gdGVtcDsKCSAgICAgICAgfQoJICAgICAgICB2YXIgZmllbGQgPSB0aGlzLmZpZWxkOwoJICAgICAgICB2YXIgckxhc3QgPSBhOwoJICAgICAgICB2YXIgciA9IGI7CgkgICAgICAgIHZhciB0TGFzdCA9IGZpZWxkLmdldFplcm8oKTsKCSAgICAgICAgdmFyIHQgPSBmaWVsZC5nZXRPbmUoKTsKCSAgICAgICAgLy8gUnVuIEV1Y2xpZGVhbiBhbGdvcml0aG0gdW50aWwgcidzIGRlZ3JlZSBpcyBsZXNzIHRoYW4gUi8yCgkgICAgICAgIHdoaWxlIChyLmdldERlZ3JlZSgpID49IChSIC8gMiB8IDApKSB7CgkgICAgICAgICAgICB2YXIgckxhc3RMYXN0ID0gckxhc3Q7CgkgICAgICAgICAgICB2YXIgdExhc3RMYXN0ID0gdExhc3Q7CgkgICAgICAgICAgICByTGFzdCA9IHI7CgkgICAgICAgICAgICB0TGFzdCA9IHQ7CgkgICAgICAgICAgICAvLyBEaXZpZGUgckxhc3RMYXN0IGJ5IHJMYXN0LCB3aXRoIHF1b3RpZW50IGluIHEgYW5kIHJlbWFpbmRlciBpbiByCgkgICAgICAgICAgICBpZiAockxhc3QuaXNaZXJvKCkpIHsKCSAgICAgICAgICAgICAgICAvLyBPb3BzLCBFdWNsaWRlYW4gYWxnb3JpdGhtIGFscmVhZHkgdGVybWluYXRlZD8KCSAgICAgICAgICAgICAgICB0aHJvdyBuZXcgUmVlZFNvbG9tb25FeGNlcHRpb25fMS5kZWZhdWx0KCdyX3tpLTF9IHdhcyB6ZXJvJyk7CgkgICAgICAgICAgICB9CgkgICAgICAgICAgICByID0gckxhc3RMYXN0OwoJICAgICAgICAgICAgdmFyIHEgPSBmaWVsZC5nZXRaZXJvKCk7CgkgICAgICAgICAgICB2YXIgZGVub21pbmF0b3JMZWFkaW5nVGVybSA9IHJMYXN0LmdldENvZWZmaWNpZW50KHJMYXN0LmdldERlZ3JlZSgpKTsKCSAgICAgICAgICAgIHZhciBkbHRJbnZlcnNlID0gZmllbGQuaW52ZXJzZShkZW5vbWluYXRvckxlYWRpbmdUZXJtKTsKCSAgICAgICAgICAgIHdoaWxlIChyLmdldERlZ3JlZSgpID49IHJMYXN0LmdldERlZ3JlZSgpICYmICFyLmlzWmVybygpKSB7CgkgICAgICAgICAgICAgICAgdmFyIGRlZ3JlZURpZmYgPSByLmdldERlZ3JlZSgpIC0gckxhc3QuZ2V0RGVncmVlKCk7CgkgICAgICAgICAgICAgICAgdmFyIHNjYWxlID0gZmllbGQubXVsdGlwbHkoci5nZXRDb2VmZmljaWVudChyLmdldERlZ3JlZSgpKSwgZGx0SW52ZXJzZSk7CgkgICAgICAgICAgICAgICAgcSA9IHEuYWRkT3JTdWJ0cmFjdChmaWVsZC5idWlsZE1vbm9taWFsKGRlZ3JlZURpZmYsIHNjYWxlKSk7CgkgICAgICAgICAgICAgICAgciA9IHIuYWRkT3JTdWJ0cmFjdChyTGFzdC5tdWx0aXBseUJ5TW9ub21pYWwoZGVncmVlRGlmZiwgc2NhbGUpKTsKCSAgICAgICAgICAgIH0KCSAgICAgICAgICAgIHQgPSBxLm11bHRpcGx5KHRMYXN0KS5hZGRPclN1YnRyYWN0KHRMYXN0TGFzdCk7CgkgICAgICAgICAgICBpZiAoci5nZXREZWdyZWUoKSA+PSByTGFzdC5nZXREZWdyZWUoKSkgewoJICAgICAgICAgICAgICAgIHRocm93IG5ldyBJbGxlZ2FsU3RhdGVFeGNlcHRpb25fMS5kZWZhdWx0KCdEaXZpc2lvbiBhbGdvcml0aG0gZmFpbGVkIHRvIHJlZHVjZSBwb2x5bm9taWFsPycpOwoJICAgICAgICAgICAgfQoJICAgICAgICB9CgkgICAgICAgIHZhciBzaWdtYVRpbGRlQXRaZXJvID0gdC5nZXRDb2VmZmljaWVudCgwKTsKCSAgICAgICAgaWYgKHNpZ21hVGlsZGVBdFplcm8gPT09IDApIHsKCSAgICAgICAgICAgIHRocm93IG5ldyBSZWVkU29sb21vbkV4Y2VwdGlvbl8xLmRlZmF1bHQoJ3NpZ21hVGlsZGUoMCkgd2FzIHplcm8nKTsKCSAgICAgICAgfQoJICAgICAgICB2YXIgaW52ZXJzZSA9IGZpZWxkLmludmVyc2Uoc2lnbWFUaWxkZUF0WmVybyk7CgkgICAgICAgIHZhciBzaWdtYSA9IHQubXVsdGlwbHlTY2FsYXIoaW52ZXJzZSk7CgkgICAgICAgIHZhciBvbWVnYSA9IHIubXVsdGlwbHlTY2FsYXIoaW52ZXJzZSk7CgkgICAgICAgIHJldHVybiBbc2lnbWEsIG9tZWdhXTsKCSAgICB9OwoJICAgIFJlZWRTb2xvbW9uRGVjb2Rlci5wcm90b3R5cGUuZmluZEVycm9yTG9jYXRpb25zID0gZnVuY3Rpb24gKGVycm9yTG9jYXRvcikgewoJICAgICAgICAvLyBUaGlzIGlzIGEgZGlyZWN0IGFwcGxpY2F0aW9uIG9mIENoaWVuJ3Mgc2VhcmNoCgkgICAgICAgIHZhciBudW1FcnJvcnMgPSBlcnJvckxvY2F0b3IuZ2V0RGVncmVlKCk7CgkgICAgICAgIGlmIChudW1FcnJvcnMgPT09IDEpIHsgLy8gc2hvcnRjdXQKCSAgICAgICAgICAgIHJldHVybiBJbnQzMkFycmF5LmZyb20oW2Vycm9yTG9jYXRvci5nZXRDb2VmZmljaWVudCgxKV0pOwoJICAgICAgICB9CgkgICAgICAgIHZhciByZXN1bHQgPSBuZXcgSW50MzJBcnJheShudW1FcnJvcnMpOwoJICAgICAgICB2YXIgZSA9IDA7CgkgICAgICAgIHZhciBmaWVsZCA9IHRoaXMuZmllbGQ7CgkgICAgICAgIGZvciAodmFyIGkgPSAxOyBpIDwgZmllbGQuZ2V0U2l6ZSgpICYmIGUgPCBudW1FcnJvcnM7IGkrKykgewoJICAgICAgICAgICAgaWYgKGVycm9yTG9jYXRvci5ldmFsdWF0ZUF0KGkpID09PSAwKSB7CgkgICAgICAgICAgICAgICAgcmVzdWx0W2VdID0gZmllbGQuaW52ZXJzZShpKTsKCSAgICAgICAgICAgICAgICBlKys7CgkgICAgICAgICAgICB9CgkgICAgICAgIH0KCSAgICAgICAgaWYgKGUgIT09IG51bUVycm9ycykgewoJICAgICAgICAgICAgdGhyb3cgbmV3IFJlZWRTb2xvbW9uRXhjZXB0aW9uXzEuZGVmYXVsdCgnRXJyb3IgbG9jYXRvciBkZWdyZWUgZG9lcyBub3QgbWF0Y2ggbnVtYmVyIG9mIHJvb3RzJyk7CgkgICAgICAgIH0KCSAgICAgICAgcmV0dXJuIHJlc3VsdDsKCSAgICB9OwoJICAgIFJlZWRTb2xvbW9uRGVjb2Rlci5wcm90b3R5cGUuZmluZEVycm9yTWFnbml0dWRlcyA9IGZ1bmN0aW9uIChlcnJvckV2YWx1YXRvciwgZXJyb3JMb2NhdGlvbnMpIHsKCSAgICAgICAgLy8gVGhpcyBpcyBkaXJlY3RseSBhcHBseWluZyBGb3JuZXkncyBGb3JtdWxhCgkgICAgICAgIHZhciBzID0gZXJyb3JMb2NhdGlvbnMubGVuZ3RoOwoJICAgICAgICB2YXIgcmVzdWx0ID0gbmV3IEludDMyQXJyYXkocyk7CgkgICAgICAgIHZhciBmaWVsZCA9IHRoaXMuZmllbGQ7CgkgICAgICAgIGZvciAodmFyIGkgPSAwOyBpIDwgczsgaSsrKSB7CgkgICAgICAgICAgICB2YXIgeGlJbnZlcnNlID0gZmllbGQuaW52ZXJzZShlcnJvckxvY2F0aW9uc1tpXSk7CgkgICAgICAgICAgICB2YXIgZGVub21pbmF0b3IgPSAxOwoJICAgICAgICAgICAgZm9yICh2YXIgaiA9IDA7IGogPCBzOyBqKyspIHsKCSAgICAgICAgICAgICAgICBpZiAoaSAhPT0gaikgewoJICAgICAgICAgICAgICAgICAgICAvLyBkZW5vbWluYXRvciA9IGZpZWxkLm11bHRpcGx5KGRlbm9taW5hdG9yLAoJICAgICAgICAgICAgICAgICAgICAvLyAgICBHZW5lcmljR0YuYWRkT3JTdWJ0cmFjdCgxLCBmaWVsZC5tdWx0aXBseShlcnJvckxvY2F0aW9uc1tqXSwgeGlJbnZlcnNlKSkpCgkgICAgICAgICAgICAgICAgICAgIC8vIEFib3ZlIHNob3VsZCB3b3JrIGJ1dCBmYWlscyBvbiBzb21lIEFwcGxlIGFuZCBMaW51eCBKREtzIGR1ZSB0byBhIEhvdHNwb3QgYnVnLgoJICAgICAgICAgICAgICAgICAgICAvLyBCZWxvdyBpcyBhIGZ1bm55LWxvb2tpbmcgd29ya2Fyb3VuZCBmcm9tIFN0ZXZlbiBQYXJrZXMKCSAgICAgICAgICAgICAgICAgICAgdmFyIHRlcm0gPSBmaWVsZC5tdWx0aXBseShlcnJvckxvY2F0aW9uc1tqXSwgeGlJbnZlcnNlKTsKCSAgICAgICAgICAgICAgICAgICAgdmFyIHRlcm1QbHVzMSA9ICh0ZXJtICYgMHgxKSA9PT0gMCA/IHRlcm0gfCAxIDogdGVybSAmIH4xOwoJICAgICAgICAgICAgICAgICAgICBkZW5vbWluYXRvciA9IGZpZWxkLm11bHRpcGx5KGRlbm9taW5hdG9yLCB0ZXJtUGx1czEpOwoJICAgICAgICAgICAgICAgIH0KCSAgICAgICAgICAgIH0KCSAgICAgICAgICAgIHJlc3VsdFtpXSA9IGZpZWxkLm11bHRpcGx5KGVycm9yRXZhbHVhdG9yLmV2YWx1YXRlQXQoeGlJbnZlcnNlKSwgZmllbGQuaW52ZXJzZShkZW5vbWluYXRvcikpOwoJICAgICAgICAgICAgaWYgKGZpZWxkLmdldEdlbmVyYXRvckJhc2UoKSAhPT0gMCkgewoJICAgICAgICAgICAgICAgIHJlc3VsdFtpXSA9IGZpZWxkLm11bHRpcGx5KHJlc3VsdFtpXSwgeGlJbnZlcnNlKTsKCSAgICAgICAgICAgIH0KCSAgICAgICAgfQoJICAgICAgICByZXR1cm4gcmVzdWx0OwoJICAgIH07CgkgICAgcmV0dXJuIFJlZWRTb2xvbW9uRGVjb2RlcjsKCX0oKSk7CglSZWVkU29sb21vbkRlY29kZXIkMS5kZWZhdWx0ID0gUmVlZFNvbG9tb25EZWNvZGVyOwoKCXZhciBCaXRNYXRyaXhQYXJzZXIkMSA9IHt9OwoKCXZhciBWZXJzaW9uJDEgPSB7fTsKCgl2YXIgRm9ybWF0SW5mb3JtYXRpb24kMSA9IHt9OwoKCXZhciBFcnJvckNvcnJlY3Rpb25MZXZlbCA9IHt9OwoKCXZhciBBcmd1bWVudEV4Y2VwdGlvbiQxID0ge307CgoJdmFyIF9fZXh0ZW5kcyQzID0gKGNvbW1vbmpzR2xvYmFsICYmIGNvbW1vbmpzR2xvYmFsLl9fZXh0ZW5kcykgfHwgKGZ1bmN0aW9uICgpIHsKCSAgICB2YXIgZXh0ZW5kU3RhdGljcyA9IGZ1bmN0aW9uIChkLCBiKSB7CgkgICAgICAgIGV4dGVuZFN0YXRpY3MgPSBPYmplY3Quc2V0UHJvdG90eXBlT2YgfHwKCSAgICAgICAgICAgICh7IF9fcHJvdG9fXzogW10gfSBpbnN0YW5jZW9mIEFycmF5ICYmIGZ1bmN0aW9uIChkLCBiKSB7IGQuX19wcm90b19fID0gYjsgfSkgfHwKCSAgICAgICAgICAgIGZ1bmN0aW9uIChkLCBiKSB7IGZvciAodmFyIHAgaW4gYikgaWYgKGIuaGFzT3duUHJvcGVydHkocCkpIGRbcF0gPSBiW3BdOyB9OwoJICAgICAgICByZXR1cm4gZXh0ZW5kU3RhdGljcyhkLCBiKTsKCSAgICB9OwoJICAgIHJldHVybiBmdW5jdGlvbiAoZCwgYikgewoJICAgICAgICBleHRlbmRTdGF0aWNzKGQsIGIpOwoJICAgICAgICBmdW5jdGlvbiBfXygpIHsgdGhpcy5jb25zdHJ1Y3RvciA9IGQ7IH0KCSAgICAgICAgZC5wcm90b3R5cGUgPSBiID09PSBudWxsID8gT2JqZWN0LmNyZWF0ZShiKSA6IChfXy5wcm90b3R5cGUgPSBiLnByb3RvdHlwZSwgbmV3IF9fKCkpOwoJICAgIH07Cgl9KSgpOwoJT2JqZWN0LmRlZmluZVByb3BlcnR5KEFyZ3VtZW50RXhjZXB0aW9uJDEsICJfX2VzTW9kdWxlIiwgeyB2YWx1ZTogdHJ1ZSB9KTsKCXZhciBFeGNlcHRpb25fMSA9IEV4Y2VwdGlvbiQxOwoJLyoqCgkgKiBDdXN0b20gRXJyb3IgY2xhc3Mgb2YgdHlwZSBFeGNlcHRpb24uCgkgKi8KCXZhciBBcmd1bWVudEV4Y2VwdGlvbiA9IC8qKiBAY2xhc3MgKi8gKGZ1bmN0aW9uIChfc3VwZXIpIHsKCSAgICBfX2V4dGVuZHMkMyhBcmd1bWVudEV4Y2VwdGlvbiwgX3N1cGVyKTsKCSAgICBmdW5jdGlvbiBBcmd1bWVudEV4Y2VwdGlvbigpIHsKCSAgICAgICAgcmV0dXJuIF9zdXBlciAhPT0gbnVsbCAmJiBfc3VwZXIuYXBwbHkodGhpcywgYXJndW1lbnRzKSB8fCB0aGlzOwoJICAgIH0KCSAgICBBcmd1bWVudEV4Y2VwdGlvbi5raW5kID0gJ0FyZ3VtZW50RXhjZXB0aW9uJzsKCSAgICByZXR1cm4gQXJndW1lbnRFeGNlcHRpb247Cgl9KEV4Y2VwdGlvbl8xLmRlZmF1bHQpKTsKCUFyZ3VtZW50RXhjZXB0aW9uJDEuZGVmYXVsdCA9IEFyZ3VtZW50RXhjZXB0aW9uOwoKCShmdW5jdGlvbiAoZXhwb3J0cykgewoJLyoKCSAqIENvcHlyaWdodCAyMDA3IFpYaW5nIGF1dGhvcnMKCSAqCgkgKiBMaWNlbnNlZCB1bmRlciB0aGUgQXBhY2hlIExpY2Vuc2UsIFZlcnNpb24gMi4wICh0aGUgIkxpY2Vuc2UiKTsKCSAqIHlvdSBtYXkgbm90IHVzZSB0aGlzIGZpbGUgZXhjZXB0IGluIGNvbXBsaWFuY2Ugd2l0aCB0aGUgTGljZW5zZS4KCSAqIFlvdSBtYXkgb2J0YWluIGEgY29weSBvZiB0aGUgTGljZW5zZSBhdAoJICoKCSAqICAgICAgaHR0cDovL3d3dy5hcGFjaGUub3JnL2xpY2Vuc2VzL0xJQ0VOU0UtMi4wCgkgKgoJICogVW5sZXNzIHJlcXVpcmVkIGJ5IGFwcGxpY2FibGUgbGF3IG9yIGFncmVlZCB0byBpbiB3cml0aW5nLCBzb2Z0d2FyZQoJICogZGlzdHJpYnV0ZWQgdW5kZXIgdGhlIExpY2Vuc2UgaXMgZGlzdHJpYnV0ZWQgb24gYW4gIkFTIElTIiBCQVNJUywKCSAqIFdJVEhPVVQgV0FSUkFOVElFUyBPUiBDT05ESVRJT05TIE9GIEFOWSBLSU5ELCBlaXRoZXIgZXhwcmVzcyBvciBpbXBsaWVkLgoJICogU2VlIHRoZSBMaWNlbnNlIGZvciB0aGUgc3BlY2lmaWMgbGFuZ3VhZ2UgZ292ZXJuaW5nIHBlcm1pc3Npb25zIGFuZAoJICogbGltaXRhdGlvbnMgdW5kZXIgdGhlIExpY2Vuc2UuCgkgKi8KCU9iamVjdC5kZWZpbmVQcm9wZXJ0eShleHBvcnRzLCAiX19lc01vZHVsZSIsIHsgdmFsdWU6IHRydWUgfSk7CglleHBvcnRzLkVycm9yQ29ycmVjdGlvbkxldmVsVmFsdWVzID0gdm9pZCAwOwoJLypuYW1lc3BhY2UgY29tLmdvb2dsZS56eGluZy5xcmNvZGUuZGVjb2RlciB7Ki8KCXZhciBBcmd1bWVudEV4Y2VwdGlvbl8xID0gQXJndW1lbnRFeGNlcHRpb24kMTsKCXZhciBJbGxlZ2FsQXJndW1lbnRFeGNlcHRpb25fMSA9IElsbGVnYWxBcmd1bWVudEV4Y2VwdGlvbiQxOwoJdmFyIEVycm9yQ29ycmVjdGlvbkxldmVsVmFsdWVzOwoJKGZ1bmN0aW9uIChFcnJvckNvcnJlY3Rpb25MZXZlbFZhbHVlcykgewoJICAgIEVycm9yQ29ycmVjdGlvbkxldmVsVmFsdWVzW0Vycm9yQ29ycmVjdGlvbkxldmVsVmFsdWVzWyJMIl0gPSAwXSA9ICJMIjsKCSAgICBFcnJvckNvcnJlY3Rpb25MZXZlbFZhbHVlc1tFcnJvckNvcnJlY3Rpb25MZXZlbFZhbHVlc1siTSJdID0gMV0gPSAiTSI7CgkgICAgRXJyb3JDb3JyZWN0aW9uTGV2ZWxWYWx1ZXNbRXJyb3JDb3JyZWN0aW9uTGV2ZWxWYWx1ZXNbIlEiXSA9IDJdID0gIlEiOwoJICAgIEVycm9yQ29ycmVjdGlvbkxldmVsVmFsdWVzW0Vycm9yQ29ycmVjdGlvbkxldmVsVmFsdWVzWyJIIl0gPSAzXSA9ICJIIjsKCX0pKEVycm9yQ29ycmVjdGlvbkxldmVsVmFsdWVzID0gZXhwb3J0cy5FcnJvckNvcnJlY3Rpb25MZXZlbFZhbHVlcyB8fCAoZXhwb3J0cy5FcnJvckNvcnJlY3Rpb25MZXZlbFZhbHVlcyA9IHt9KSk7CgkvKioKCSAqIDxwPlNlZSBJU08gMTgwMDQ6MjAwNiwgNi41LjEuIFRoaXMgZW51bSBlbmNhcHN1bGF0ZXMgdGhlIGZvdXIgZXJyb3IgY29ycmVjdGlvbiBsZXZlbHMKCSAqIGRlZmluZWQgYnkgdGhlIFFSIGNvZGUgc3RhbmRhcmQuPC9wPgoJICoKCSAqIEBhdXRob3IgU2VhbiBPd2VuCgkgKi8KCXZhciBFcnJvckNvcnJlY3Rpb25MZXZlbCA9IC8qKiBAY2xhc3MgKi8gKGZ1bmN0aW9uICgpIHsKCSAgICBmdW5jdGlvbiBFcnJvckNvcnJlY3Rpb25MZXZlbCh2YWx1ZSwgc3RyaW5nVmFsdWUsIGJpdHMgLyppbnQqLykgewoJICAgICAgICB0aGlzLnZhbHVlID0gdmFsdWU7CgkgICAgICAgIHRoaXMuc3RyaW5nVmFsdWUgPSBzdHJpbmdWYWx1ZTsKCSAgICAgICAgdGhpcy5iaXRzID0gYml0czsKCSAgICAgICAgRXJyb3JDb3JyZWN0aW9uTGV2ZWwuRk9SX0JJVFMuc2V0KGJpdHMsIHRoaXMpOwoJICAgICAgICBFcnJvckNvcnJlY3Rpb25MZXZlbC5GT1JfVkFMVUUuc2V0KHZhbHVlLCB0aGlzKTsKCSAgICB9CgkgICAgRXJyb3JDb3JyZWN0aW9uTGV2ZWwucHJvdG90eXBlLmdldFZhbHVlID0gZnVuY3Rpb24gKCkgewoJICAgICAgICByZXR1cm4gdGhpcy52YWx1ZTsKCSAgICB9OwoJICAgIEVycm9yQ29ycmVjdGlvbkxldmVsLnByb3RvdHlwZS5nZXRCaXRzID0gZnVuY3Rpb24gKCkgewoJICAgICAgICByZXR1cm4gdGhpcy5iaXRzOwoJICAgIH07CgkgICAgRXJyb3JDb3JyZWN0aW9uTGV2ZWwuZnJvbVN0cmluZyA9IGZ1bmN0aW9uIChzKSB7CgkgICAgICAgIHN3aXRjaCAocykgewoJICAgICAgICAgICAgY2FzZSAnTCc6IHJldHVybiBFcnJvckNvcnJlY3Rpb25MZXZlbC5MOwoJICAgICAgICAgICAgY2FzZSAnTSc6IHJldHVybiBFcnJvckNvcnJlY3Rpb25MZXZlbC5NOwoJICAgICAgICAgICAgY2FzZSAnUSc6IHJldHVybiBFcnJvckNvcnJlY3Rpb25MZXZlbC5ROwoJICAgICAgICAgICAgY2FzZSAnSCc6IHJldHVybiBFcnJvckNvcnJlY3Rpb25MZXZlbC5IOwoJICAgICAgICAgICAgZGVmYXVsdDogdGhyb3cgbmV3IEFyZ3VtZW50RXhjZXB0aW9uXzEuZGVmYXVsdChzICsgJ25vdCBhdmFpbGFibGUnKTsKCSAgICAgICAgfQoJICAgIH07CgkgICAgRXJyb3JDb3JyZWN0aW9uTGV2ZWwucHJvdG90eXBlLnRvU3RyaW5nID0gZnVuY3Rpb24gKCkgewoJICAgICAgICByZXR1cm4gdGhpcy5zdHJpbmdWYWx1ZTsKCSAgICB9OwoJICAgIEVycm9yQ29ycmVjdGlvbkxldmVsLnByb3RvdHlwZS5lcXVhbHMgPSBmdW5jdGlvbiAobykgewoJICAgICAgICBpZiAoIShvIGluc3RhbmNlb2YgRXJyb3JDb3JyZWN0aW9uTGV2ZWwpKSB7CgkgICAgICAgICAgICByZXR1cm4gZmFsc2U7CgkgICAgICAgIH0KCSAgICAgICAgdmFyIG90aGVyID0gbzsKCSAgICAgICAgcmV0dXJuIHRoaXMudmFsdWUgPT09IG90aGVyLnZhbHVlOwoJICAgIH07CgkgICAgLyoqCgkgICAgICogQHBhcmFtIGJpdHMgaW50IGNvbnRhaW5pbmcgdGhlIHR3byBiaXRzIGVuY29kaW5nIGEgUVIgQ29kZSdzIGVycm9yIGNvcnJlY3Rpb24gbGV2ZWwKCSAgICAgKiBAcmV0dXJuIEVycm9yQ29ycmVjdGlvbkxldmVsIHJlcHJlc2VudGluZyB0aGUgZW5jb2RlZCBlcnJvciBjb3JyZWN0aW9uIGxldmVsCgkgICAgICovCgkgICAgRXJyb3JDb3JyZWN0aW9uTGV2ZWwuZm9yQml0cyA9IGZ1bmN0aW9uIChiaXRzIC8qaW50Ki8pIHsKCSAgICAgICAgaWYgKGJpdHMgPCAwIHx8IGJpdHMgPj0gRXJyb3JDb3JyZWN0aW9uTGV2ZWwuRk9SX0JJVFMuc2l6ZSkgewoJICAgICAgICAgICAgdGhyb3cgbmV3IElsbGVnYWxBcmd1bWVudEV4Y2VwdGlvbl8xLmRlZmF1bHQoKTsKCSAgICAgICAgfQoJICAgICAgICByZXR1cm4gRXJyb3JDb3JyZWN0aW9uTGV2ZWwuRk9SX0JJVFMuZ2V0KGJpdHMpOwoJICAgIH07CgkgICAgRXJyb3JDb3JyZWN0aW9uTGV2ZWwuRk9SX0JJVFMgPSBuZXcgTWFwKCk7CgkgICAgRXJyb3JDb3JyZWN0aW9uTGV2ZWwuRk9SX1ZBTFVFID0gbmV3IE1hcCgpOwoJICAgIC8qKiBMID0gfjclIGNvcnJlY3Rpb24gKi8KCSAgICBFcnJvckNvcnJlY3Rpb25MZXZlbC5MID0gbmV3IEVycm9yQ29ycmVjdGlvbkxldmVsKEVycm9yQ29ycmVjdGlvbkxldmVsVmFsdWVzLkwsICdMJywgMHgwMSk7CgkgICAgLyoqIE0gPSB+MTUlIGNvcnJlY3Rpb24gKi8KCSAgICBFcnJvckNvcnJlY3Rpb25MZXZlbC5NID0gbmV3IEVycm9yQ29ycmVjdGlvbkxldmVsKEVycm9yQ29ycmVjdGlvbkxldmVsVmFsdWVzLk0sICdNJywgMHgwMCk7CgkgICAgLyoqIFEgPSB+MjUlIGNvcnJlY3Rpb24gKi8KCSAgICBFcnJvckNvcnJlY3Rpb25MZXZlbC5RID0gbmV3IEVycm9yQ29ycmVjdGlvbkxldmVsKEVycm9yQ29ycmVjdGlvbkxldmVsVmFsdWVzLlEsICdRJywgMHgwMyk7CgkgICAgLyoqIEggPSB+MzAlIGNvcnJlY3Rpb24gKi8KCSAgICBFcnJvckNvcnJlY3Rpb25MZXZlbC5IID0gbmV3IEVycm9yQ29ycmVjdGlvbkxldmVsKEVycm9yQ29ycmVjdGlvbkxldmVsVmFsdWVzLkgsICdIJywgMHgwMik7CgkgICAgcmV0dXJuIEVycm9yQ29ycmVjdGlvbkxldmVsOwoJfSgpKTsKCWV4cG9ydHMuZGVmYXVsdCA9IEVycm9yQ29ycmVjdGlvbkxldmVsOwoKCX0oRXJyb3JDb3JyZWN0aW9uTGV2ZWwpKTsKCgkvKgoJICogQ29weXJpZ2h0IDIwMDcgWlhpbmcgYXV0aG9ycwoJICoKCSAqIExpY2Vuc2VkIHVuZGVyIHRoZSBBcGFjaGUgTGljZW5zZSwgVmVyc2lvbiAyLjAgKHRoZSAiTGljZW5zZSIpOwoJICogeW91IG1heSBub3QgdXNlIHRoaXMgZmlsZSBleGNlcHQgaW4gY29tcGxpYW5jZSB3aXRoIHRoZSBMaWNlbnNlLgoJICogWW91IG1heSBvYnRhaW4gYSBjb3B5IG9mIHRoZSBMaWNlbnNlIGF0CgkgKgoJICogICAgICBodHRwOi8vd3d3LmFwYWNoZS5vcmcvbGljZW5zZXMvTElDRU5TRS0yLjAKCSAqCgkgKiBVbmxlc3MgcmVxdWlyZWQgYnkgYXBwbGljYWJsZSBsYXcgb3IgYWdyZWVkIHRvIGluIHdyaXRpbmcsIHNvZnR3YXJlCgkgKiBkaXN0cmlidXRlZCB1bmRlciB0aGUgTGljZW5zZSBpcyBkaXN0cmlidXRlZCBvbiBhbiAiQVMgSVMiIEJBU0lTLAoJICogV0lUSE9VVCBXQVJSQU5USUVTIE9SIENPTkRJVElPTlMgT0YgQU5ZIEtJTkQsIGVpdGhlciBleHByZXNzIG9yIGltcGxpZWQuCgkgKiBTZWUgdGhlIExpY2Vuc2UgZm9yIHRoZSBzcGVjaWZpYyBsYW5ndWFnZSBnb3Zlcm5pbmcgcGVybWlzc2lvbnMgYW5kCgkgKiBsaW1pdGF0aW9ucyB1bmRlciB0aGUgTGljZW5zZS4KCSAqLwoJdmFyIF9fdmFsdWVzJDYgPSAoY29tbW9uanNHbG9iYWwgJiYgY29tbW9uanNHbG9iYWwuX192YWx1ZXMpIHx8IGZ1bmN0aW9uKG8pIHsKCSAgICB2YXIgcyA9IHR5cGVvZiBTeW1ib2wgPT09ICJmdW5jdGlvbiIgJiYgU3ltYm9sLml0ZXJhdG9yLCBtID0gcyAmJiBvW3NdLCBpID0gMDsKCSAgICBpZiAobSkgcmV0dXJuIG0uY2FsbChvKTsKCSAgICBpZiAobyAmJiB0eXBlb2Ygby5sZW5ndGggPT09ICJudW1iZXIiKSByZXR1cm4gewoJICAgICAgICBuZXh0OiBmdW5jdGlvbiAoKSB7CgkgICAgICAgICAgICBpZiAobyAmJiBpID49IG8ubGVuZ3RoKSBvID0gdm9pZCAwOwoJICAgICAgICAgICAgcmV0dXJuIHsgdmFsdWU6IG8gJiYgb1tpKytdLCBkb25lOiAhbyB9OwoJICAgICAgICB9CgkgICAgfTsKCSAgICB0aHJvdyBuZXcgVHlwZUVycm9yKHMgPyAiT2JqZWN0IGlzIG5vdCBpdGVyYWJsZS4iIDogIlN5bWJvbC5pdGVyYXRvciBpcyBub3QgZGVmaW5lZC4iKTsKCX07CglPYmplY3QuZGVmaW5lUHJvcGVydHkoRm9ybWF0SW5mb3JtYXRpb24kMSwgIl9fZXNNb2R1bGUiLCB7IHZhbHVlOiB0cnVlIH0pOwoJLypuYW1lc3BhY2UgY29tLmdvb2dsZS56eGluZy5xcmNvZGUuZGVjb2RlciB7Ki8KCXZhciBFcnJvckNvcnJlY3Rpb25MZXZlbF8xID0gRXJyb3JDb3JyZWN0aW9uTGV2ZWw7Cgl2YXIgSW50ZWdlcl8xID0gSW50ZWdlciQxOwoJLyoqCgkgKiA8cD5FbmNhcHN1bGF0ZXMgYSBRUiBDb2RlJ3MgZm9ybWF0IGluZm9ybWF0aW9uLCBpbmNsdWRpbmcgdGhlIGRhdGEgbWFzayB1c2VkIGFuZAoJICogZXJyb3IgY29ycmVjdGlvbiBsZXZlbC48L3A+CgkgKgoJICogQGF1dGhvciBTZWFuIE93ZW4KCSAqIEBzZWUgRGF0YU1hc2sKCSAqIEBzZWUgRXJyb3JDb3JyZWN0aW9uTGV2ZWwKCSAqLwoJdmFyIEZvcm1hdEluZm9ybWF0aW9uID0gLyoqIEBjbGFzcyAqLyAoZnVuY3Rpb24gKCkgewoJICAgIGZ1bmN0aW9uIEZvcm1hdEluZm9ybWF0aW9uKGZvcm1hdEluZm8gLyppbnQqLykgewoJICAgICAgICAvLyBCaXRzIDMsNAoJICAgICAgICB0aGlzLmVycm9yQ29ycmVjdGlvbkxldmVsID0gRXJyb3JDb3JyZWN0aW9uTGV2ZWxfMS5kZWZhdWx0LmZvckJpdHMoKGZvcm1hdEluZm8gPj4gMykgJiAweDAzKTsKCSAgICAgICAgLy8gQm90dG9tIDMgYml0cwoJICAgICAgICB0aGlzLmRhdGFNYXNrID0gLyooYnl0ZSkgKi8gKGZvcm1hdEluZm8gJiAweDA3KTsKCSAgICB9CgkgICAgRm9ybWF0SW5mb3JtYXRpb24ubnVtQml0c0RpZmZlcmluZyA9IGZ1bmN0aW9uIChhIC8qaW50Ki8sIGIgLyppbnQqLykgewoJICAgICAgICByZXR1cm4gSW50ZWdlcl8xLmRlZmF1bHQuYml0Q291bnQoYSBeIGIpOwoJICAgIH07CgkgICAgLyoqCgkgICAgICogQHBhcmFtIG1hc2tlZEZvcm1hdEluZm8xIGZvcm1hdCBpbmZvIGluZGljYXRvciwgd2l0aCBtYXNrIHN0aWxsIGFwcGxpZWQKCSAgICAgKiBAcGFyYW0gbWFza2VkRm9ybWF0SW5mbzIgc2Vjb25kIGNvcHkgb2Ygc2FtZSBpbmZvOyBib3RoIGFyZSBjaGVja2VkIGF0IHRoZSBzYW1lIHRpbWUKCSAgICAgKiAgdG8gZXN0YWJsaXNoIGJlc3QgbWF0Y2gKCSAgICAgKiBAcmV0dXJuIGluZm9ybWF0aW9uIGFib3V0IHRoZSBmb3JtYXQgaXQgc3BlY2lmaWVzLCBvciB7QGNvZGUgbnVsbH0KCSAgICAgKiAgaWYgZG9lc24ndCBzZWVtIHRvIG1hdGNoIGFueSBrbm93biBwYXR0ZXJuCgkgICAgICovCgkgICAgRm9ybWF0SW5mb3JtYXRpb24uZGVjb2RlRm9ybWF0SW5mb3JtYXRpb24gPSBmdW5jdGlvbiAobWFza2VkRm9ybWF0SW5mbzEgLyppbnQqLywgbWFza2VkRm9ybWF0SW5mbzIgLyppbnQqLykgewoJICAgICAgICB2YXIgZm9ybWF0SW5mbyA9IEZvcm1hdEluZm9ybWF0aW9uLmRvRGVjb2RlRm9ybWF0SW5mb3JtYXRpb24obWFza2VkRm9ybWF0SW5mbzEsIG1hc2tlZEZvcm1hdEluZm8yKTsKCSAgICAgICAgaWYgKGZvcm1hdEluZm8gIT09IG51bGwpIHsKCSAgICAgICAgICAgIHJldHVybiBmb3JtYXRJbmZvOwoJICAgICAgICB9CgkgICAgICAgIC8vIFNob3VsZCByZXR1cm4gbnVsbCwgYnV0LCBzb21lIFFSIGNvZGVzIGFwcGFyZW50bHkKCSAgICAgICAgLy8gZG8gbm90IG1hc2sgdGhpcyBpbmZvLiBUcnkgYWdhaW4gYnkgYWN0dWFsbHkgbWFza2luZyB0aGUgcGF0dGVybgoJICAgICAgICAvLyBmaXJzdAoJICAgICAgICByZXR1cm4gRm9ybWF0SW5mb3JtYXRpb24uZG9EZWNvZGVGb3JtYXRJbmZvcm1hdGlvbihtYXNrZWRGb3JtYXRJbmZvMSBeIEZvcm1hdEluZm9ybWF0aW9uLkZPUk1BVF9JTkZPX01BU0tfUVIsIG1hc2tlZEZvcm1hdEluZm8yIF4gRm9ybWF0SW5mb3JtYXRpb24uRk9STUFUX0lORk9fTUFTS19RUik7CgkgICAgfTsKCSAgICBGb3JtYXRJbmZvcm1hdGlvbi5kb0RlY29kZUZvcm1hdEluZm9ybWF0aW9uID0gZnVuY3Rpb24gKG1hc2tlZEZvcm1hdEluZm8xIC8qaW50Ki8sIG1hc2tlZEZvcm1hdEluZm8yIC8qaW50Ki8pIHsKCSAgICAgICAgdmFyIGVfMSwgX2E7CgkgICAgICAgIC8vIEZpbmQgdGhlIGludCBpbiBGT1JNQVRfSU5GT19ERUNPREVfTE9PS1VQIHdpdGggZmV3ZXN0IGJpdHMgZGlmZmVyaW5nCgkgICAgICAgIHZhciBiZXN0RGlmZmVyZW5jZSA9IE51bWJlci5NQVhfU0FGRV9JTlRFR0VSOwoJICAgICAgICB2YXIgYmVzdEZvcm1hdEluZm8gPSAwOwoJICAgICAgICB0cnkgewoJICAgICAgICAgICAgZm9yICh2YXIgX2IgPSBfX3ZhbHVlcyQ2KEZvcm1hdEluZm9ybWF0aW9uLkZPUk1BVF9JTkZPX0RFQ09ERV9MT09LVVApLCBfYyA9IF9iLm5leHQoKTsgIV9jLmRvbmU7IF9jID0gX2IubmV4dCgpKSB7CgkgICAgICAgICAgICAgICAgdmFyIGRlY29kZUluZm8gPSBfYy52YWx1ZTsKCSAgICAgICAgICAgICAgICB2YXIgdGFyZ2V0SW5mbyA9IGRlY29kZUluZm9bMF07CgkgICAgICAgICAgICAgICAgaWYgKHRhcmdldEluZm8gPT09IG1hc2tlZEZvcm1hdEluZm8xIHx8IHRhcmdldEluZm8gPT09IG1hc2tlZEZvcm1hdEluZm8yKSB7CgkgICAgICAgICAgICAgICAgICAgIC8vIEZvdW5kIGFuIGV4YWN0IG1hdGNoCgkgICAgICAgICAgICAgICAgICAgIHJldHVybiBuZXcgRm9ybWF0SW5mb3JtYXRpb24oZGVjb2RlSW5mb1sxXSk7CgkgICAgICAgICAgICAgICAgfQoJICAgICAgICAgICAgICAgIHZhciBiaXRzRGlmZmVyZW5jZSA9IEZvcm1hdEluZm9ybWF0aW9uLm51bUJpdHNEaWZmZXJpbmcobWFza2VkRm9ybWF0SW5mbzEsIHRhcmdldEluZm8pOwoJICAgICAgICAgICAgICAgIGlmIChiaXRzRGlmZmVyZW5jZSA8IGJlc3REaWZmZXJlbmNlKSB7CgkgICAgICAgICAgICAgICAgICAgIGJlc3RGb3JtYXRJbmZvID0gZGVjb2RlSW5mb1sxXTsKCSAgICAgICAgICAgICAgICAgICAgYmVzdERpZmZlcmVuY2UgPSBiaXRzRGlmZmVyZW5jZTsKCSAgICAgICAgICAgICAgICB9CgkgICAgICAgICAgICAgICAgaWYgKG1hc2tlZEZvcm1hdEluZm8xICE9PSBtYXNrZWRGb3JtYXRJbmZvMikgewoJICAgICAgICAgICAgICAgICAgICAvLyBhbHNvIHRyeSB0aGUgb3RoZXIgb3B0aW9uCgkgICAgICAgICAgICAgICAgICAgIGJpdHNEaWZmZXJlbmNlID0gRm9ybWF0SW5mb3JtYXRpb24ubnVtQml0c0RpZmZlcmluZyhtYXNrZWRGb3JtYXRJbmZvMiwgdGFyZ2V0SW5mbyk7CgkgICAgICAgICAgICAgICAgICAgIGlmIChiaXRzRGlmZmVyZW5jZSA8IGJlc3REaWZmZXJlbmNlKSB7CgkgICAgICAgICAgICAgICAgICAgICAgICBiZXN0Rm9ybWF0SW5mbyA9IGRlY29kZUluZm9bMV07CgkgICAgICAgICAgICAgICAgICAgICAgICBiZXN0RGlmZmVyZW5jZSA9IGJpdHNEaWZmZXJlbmNlOwoJICAgICAgICAgICAgICAgICAgICB9CgkgICAgICAgICAgICAgICAgfQoJICAgICAgICAgICAgfQoJICAgICAgICB9CgkgICAgICAgIGNhdGNoIChlXzFfMSkgeyBlXzEgPSB7IGVycm9yOiBlXzFfMSB9OyB9CgkgICAgICAgIGZpbmFsbHkgewoJICAgICAgICAgICAgdHJ5IHsKCSAgICAgICAgICAgICAgICBpZiAoX2MgJiYgIV9jLmRvbmUgJiYgKF9hID0gX2IucmV0dXJuKSkgX2EuY2FsbChfYik7CgkgICAgICAgICAgICB9CgkgICAgICAgICAgICBmaW5hbGx5IHsgaWYgKGVfMSkgdGhyb3cgZV8xLmVycm9yOyB9CgkgICAgICAgIH0KCSAgICAgICAgLy8gSGFtbWluZyBkaXN0YW5jZSBvZiB0aGUgMzIgbWFza2VkIGNvZGVzIGlzIDcsIGJ5IGNvbnN0cnVjdGlvbiwgc28gPD0gMyBiaXRzCgkgICAgICAgIC8vIGRpZmZlcmluZyBtZWFucyB3ZSBmb3VuZCBhIG1hdGNoCgkgICAgICAgIGlmIChiZXN0RGlmZmVyZW5jZSA8PSAzKSB7CgkgICAgICAgICAgICByZXR1cm4gbmV3IEZvcm1hdEluZm9ybWF0aW9uKGJlc3RGb3JtYXRJbmZvKTsKCSAgICAgICAgfQoJICAgICAgICByZXR1cm4gbnVsbDsKCSAgICB9OwoJICAgIEZvcm1hdEluZm9ybWF0aW9uLnByb3RvdHlwZS5nZXRFcnJvckNvcnJlY3Rpb25MZXZlbCA9IGZ1bmN0aW9uICgpIHsKCSAgICAgICAgcmV0dXJuIHRoaXMuZXJyb3JDb3JyZWN0aW9uTGV2ZWw7CgkgICAgfTsKCSAgICBGb3JtYXRJbmZvcm1hdGlvbi5wcm90b3R5cGUuZ2V0RGF0YU1hc2sgPSBmdW5jdGlvbiAoKSB7CgkgICAgICAgIHJldHVybiB0aGlzLmRhdGFNYXNrOwoJICAgIH07CgkgICAgLypAT3ZlcnJpZGUqLwoJICAgIEZvcm1hdEluZm9ybWF0aW9uLnByb3RvdHlwZS5oYXNoQ29kZSA9IGZ1bmN0aW9uICgpIHsKCSAgICAgICAgcmV0dXJuICh0aGlzLmVycm9yQ29ycmVjdGlvbkxldmVsLmdldEJpdHMoKSA8PCAzKSB8IHRoaXMuZGF0YU1hc2s7CgkgICAgfTsKCSAgICAvKkBPdmVycmlkZSovCgkgICAgRm9ybWF0SW5mb3JtYXRpb24ucHJvdG90eXBlLmVxdWFscyA9IGZ1bmN0aW9uIChvKSB7CgkgICAgICAgIGlmICghKG8gaW5zdGFuY2VvZiBGb3JtYXRJbmZvcm1hdGlvbikpIHsKCSAgICAgICAgICAgIHJldHVybiBmYWxzZTsKCSAgICAgICAgfQoJICAgICAgICB2YXIgb3RoZXIgPSBvOwoJICAgICAgICByZXR1cm4gdGhpcy5lcnJvckNvcnJlY3Rpb25MZXZlbCA9PT0gb3RoZXIuZXJyb3JDb3JyZWN0aW9uTGV2ZWwgJiYKCSAgICAgICAgICAgIHRoaXMuZGF0YU1hc2sgPT09IG90aGVyLmRhdGFNYXNrOwoJICAgIH07CgkgICAgRm9ybWF0SW5mb3JtYXRpb24uRk9STUFUX0lORk9fTUFTS19RUiA9IDB4NTQxMjsKCSAgICAvKioKCSAgICAgKiBTZWUgSVNPIDE4MDA0OjIwMDYsIEFubmV4IEMsIFRhYmxlIEMuMQoJICAgICAqLwoJICAgIEZvcm1hdEluZm9ybWF0aW9uLkZPUk1BVF9JTkZPX0RFQ09ERV9MT09LVVAgPSBbCgkgICAgICAgIEludDMyQXJyYXkuZnJvbShbMHg1NDEyLCAweDAwXSksCgkgICAgICAgIEludDMyQXJyYXkuZnJvbShbMHg1MTI1LCAweDAxXSksCgkgICAgICAgIEludDMyQXJyYXkuZnJvbShbMHg1RTdDLCAweDAyXSksCgkgICAgICAgIEludDMyQXJyYXkuZnJvbShbMHg1QjRCLCAweDAzXSksCgkgICAgICAgIEludDMyQXJyYXkuZnJvbShbMHg0NUY5LCAweDA0XSksCgkgICAgICAgIEludDMyQXJyYXkuZnJvbShbMHg0MENFLCAweDA1XSksCgkgICAgICAgIEludDMyQXJyYXkuZnJvbShbMHg0Rjk3LCAweDA2XSksCgkgICAgICAgIEludDMyQXJyYXkuZnJvbShbMHg0QUEwLCAweDA3XSksCgkgICAgICAgIEludDMyQXJyYXkuZnJvbShbMHg3N0M0LCAweDA4XSksCgkgICAgICAgIEludDMyQXJyYXkuZnJvbShbMHg3MkYzLCAweDA5XSksCgkgICAgICAgIEludDMyQXJyYXkuZnJvbShbMHg3REFBLCAweDBBXSksCgkgICAgICAgIEludDMyQXJyYXkuZnJvbShbMHg3ODlELCAweDBCXSksCgkgICAgICAgIEludDMyQXJyYXkuZnJvbShbMHg2NjJGLCAweDBDXSksCgkgICAgICAgIEludDMyQXJyYXkuZnJvbShbMHg2MzE4LCAweDBEXSksCgkgICAgICAgIEludDMyQXJyYXkuZnJvbShbMHg2QzQxLCAweDBFXSksCgkgICAgICAgIEludDMyQXJyYXkuZnJvbShbMHg2OTc2LCAweDBGXSksCgkgICAgICAgIEludDMyQXJyYXkuZnJvbShbMHgxNjg5LCAweDEwXSksCgkgICAgICAgIEludDMyQXJyYXkuZnJvbShbMHgxM0JFLCAweDExXSksCgkgICAgICAgIEludDMyQXJyYXkuZnJvbShbMHgxQ0U3LCAweDEyXSksCgkgICAgICAgIEludDMyQXJyYXkuZnJvbShbMHgxOUQwLCAweDEzXSksCgkgICAgICAgIEludDMyQXJyYXkuZnJvbShbMHgwNzYyLCAweDE0XSksCgkgICAgICAgIEludDMyQXJyYXkuZnJvbShbMHgwMjU1LCAweDE1XSksCgkgICAgICAgIEludDMyQXJyYXkuZnJvbShbMHgwRDBDLCAweDE2XSksCgkgICAgICAgIEludDMyQXJyYXkuZnJvbShbMHgwODNCLCAweDE3XSksCgkgICAgICAgIEludDMyQXJyYXkuZnJvbShbMHgzNTVGLCAweDE4XSksCgkgICAgICAgIEludDMyQXJyYXkuZnJvbShbMHgzMDY4LCAweDE5XSksCgkgICAgICAgIEludDMyQXJyYXkuZnJvbShbMHgzRjMxLCAweDFBXSksCgkgICAgICAgIEludDMyQXJyYXkuZnJvbShbMHgzQTA2LCAweDFCXSksCgkgICAgICAgIEludDMyQXJyYXkuZnJvbShbMHgyNEI0LCAweDFDXSksCgkgICAgICAgIEludDMyQXJyYXkuZnJvbShbMHgyMTgzLCAweDFEXSksCgkgICAgICAgIEludDMyQXJyYXkuZnJvbShbMHgyRURBLCAweDFFXSksCgkgICAgICAgIEludDMyQXJyYXkuZnJvbShbMHgyQkVELCAweDFGXSksCgkgICAgXTsKCSAgICByZXR1cm4gRm9ybWF0SW5mb3JtYXRpb247Cgl9KCkpOwoJRm9ybWF0SW5mb3JtYXRpb24kMS5kZWZhdWx0ID0gRm9ybWF0SW5mb3JtYXRpb247CgoJdmFyIEVDQmxvY2tzJDEgPSB7fTsKCgl2YXIgX192YWx1ZXMkNSA9IChjb21tb25qc0dsb2JhbCAmJiBjb21tb25qc0dsb2JhbC5fX3ZhbHVlcykgfHwgZnVuY3Rpb24obykgewoJICAgIHZhciBzID0gdHlwZW9mIFN5bWJvbCA9PT0gImZ1bmN0aW9uIiAmJiBTeW1ib2wuaXRlcmF0b3IsIG0gPSBzICYmIG9bc10sIGkgPSAwOwoJICAgIGlmIChtKSByZXR1cm4gbS5jYWxsKG8pOwoJICAgIGlmIChvICYmIHR5cGVvZiBvLmxlbmd0aCA9PT0gIm51bWJlciIpIHJldHVybiB7CgkgICAgICAgIG5leHQ6IGZ1bmN0aW9uICgpIHsKCSAgICAgICAgICAgIGlmIChvICYmIGkgPj0gby5sZW5ndGgpIG8gPSB2b2lkIDA7CgkgICAgICAgICAgICByZXR1cm4geyB2YWx1ZTogbyAmJiBvW2krK10sIGRvbmU6ICFvIH07CgkgICAgICAgIH0KCSAgICB9OwoJICAgIHRocm93IG5ldyBUeXBlRXJyb3IocyA/ICJPYmplY3QgaXMgbm90IGl0ZXJhYmxlLiIgOiAiU3ltYm9sLml0ZXJhdG9yIGlzIG5vdCBkZWZpbmVkLiIpOwoJfTsKCU9iamVjdC5kZWZpbmVQcm9wZXJ0eShFQ0Jsb2NrcyQxLCAiX19lc01vZHVsZSIsIHsgdmFsdWU6IHRydWUgfSk7CgkvKioKCSAqIDxwPkVuY2Fwc3VsYXRlcyBhIHNldCBvZiBlcnJvci1jb3JyZWN0aW9uIGJsb2NrcyBpbiBvbmUgc3ltYm9sIHZlcnNpb24uIE1vc3QgdmVyc2lvbnMgd2lsbAoJICogdXNlIGJsb2NrcyBvZiBkaWZmZXJpbmcgc2l6ZXMgd2l0aGluIG9uZSB2ZXJzaW9uLCBzbywgdGhpcyBlbmNhcHN1bGF0ZXMgdGhlIHBhcmFtZXRlcnMgZm9yCgkgKiBlYWNoIHNldCBvZiBibG9ja3MuIEl0IGFsc28gaG9sZHMgdGhlIG51bWJlciBvZiBlcnJvci1jb3JyZWN0aW9uIGNvZGV3b3JkcyBwZXIgYmxvY2sgc2luY2UgaXQKCSAqIHdpbGwgYmUgdGhlIHNhbWUgYWNyb3NzIGFsbCBibG9ja3Mgd2l0aGluIG9uZSB2ZXJzaW9uLjwvcD4KCSAqLwoJdmFyIEVDQmxvY2tzID0gLyoqIEBjbGFzcyAqLyAoZnVuY3Rpb24gKCkgewoJICAgIGZ1bmN0aW9uIEVDQmxvY2tzKGVjQ29kZXdvcmRzUGVyQmxvY2sgLyppbnQqLykgewoJICAgICAgICB2YXIgZWNCbG9ja3MgPSBbXTsKCSAgICAgICAgZm9yICh2YXIgX2kgPSAxOyBfaSA8IGFyZ3VtZW50cy5sZW5ndGg7IF9pKyspIHsKCSAgICAgICAgICAgIGVjQmxvY2tzW19pIC0gMV0gPSBhcmd1bWVudHNbX2ldOwoJICAgICAgICB9CgkgICAgICAgIHRoaXMuZWNDb2Rld29yZHNQZXJCbG9jayA9IGVjQ29kZXdvcmRzUGVyQmxvY2s7CgkgICAgICAgIHRoaXMuZWNCbG9ja3MgPSBlY0Jsb2NrczsKCSAgICB9CgkgICAgRUNCbG9ja3MucHJvdG90eXBlLmdldEVDQ29kZXdvcmRzUGVyQmxvY2sgPSBmdW5jdGlvbiAoKSB7CgkgICAgICAgIHJldHVybiB0aGlzLmVjQ29kZXdvcmRzUGVyQmxvY2s7CgkgICAgfTsKCSAgICBFQ0Jsb2Nrcy5wcm90b3R5cGUuZ2V0TnVtQmxvY2tzID0gZnVuY3Rpb24gKCkgewoJICAgICAgICB2YXIgZV8xLCBfYTsKCSAgICAgICAgdmFyIHRvdGFsID0gMDsKCSAgICAgICAgdmFyIGVjQmxvY2tzID0gdGhpcy5lY0Jsb2NrczsKCSAgICAgICAgdHJ5IHsKCSAgICAgICAgICAgIGZvciAodmFyIGVjQmxvY2tzXzEgPSBfX3ZhbHVlcyQ1KGVjQmxvY2tzKSwgZWNCbG9ja3NfMV8xID0gZWNCbG9ja3NfMS5uZXh0KCk7ICFlY0Jsb2Nrc18xXzEuZG9uZTsgZWNCbG9ja3NfMV8xID0gZWNCbG9ja3NfMS5uZXh0KCkpIHsKCSAgICAgICAgICAgICAgICB2YXIgZWNCbG9jayA9IGVjQmxvY2tzXzFfMS52YWx1ZTsKCSAgICAgICAgICAgICAgICB0b3RhbCArPSBlY0Jsb2NrLmdldENvdW50KCk7CgkgICAgICAgICAgICB9CgkgICAgICAgIH0KCSAgICAgICAgY2F0Y2ggKGVfMV8xKSB7IGVfMSA9IHsgZXJyb3I6IGVfMV8xIH07IH0KCSAgICAgICAgZmluYWxseSB7CgkgICAgICAgICAgICB0cnkgewoJICAgICAgICAgICAgICAgIGlmIChlY0Jsb2Nrc18xXzEgJiYgIWVjQmxvY2tzXzFfMS5kb25lICYmIChfYSA9IGVjQmxvY2tzXzEucmV0dXJuKSkgX2EuY2FsbChlY0Jsb2Nrc18xKTsKCSAgICAgICAgICAgIH0KCSAgICAgICAgICAgIGZpbmFsbHkgeyBpZiAoZV8xKSB0aHJvdyBlXzEuZXJyb3I7IH0KCSAgICAgICAgfQoJICAgICAgICByZXR1cm4gdG90YWw7CgkgICAgfTsKCSAgICBFQ0Jsb2Nrcy5wcm90b3R5cGUuZ2V0VG90YWxFQ0NvZGV3b3JkcyA9IGZ1bmN0aW9uICgpIHsKCSAgICAgICAgcmV0dXJuIHRoaXMuZWNDb2Rld29yZHNQZXJCbG9jayAqIHRoaXMuZ2V0TnVtQmxvY2tzKCk7CgkgICAgfTsKCSAgICBFQ0Jsb2Nrcy5wcm90b3R5cGUuZ2V0RUNCbG9ja3MgPSBmdW5jdGlvbiAoKSB7CgkgICAgICAgIHJldHVybiB0aGlzLmVjQmxvY2tzOwoJICAgIH07CgkgICAgcmV0dXJuIEVDQmxvY2tzOwoJfSgpKTsKCUVDQmxvY2tzJDEuZGVmYXVsdCA9IEVDQmxvY2tzOwoKCXZhciBFQ0IkMSA9IHt9OwoKCU9iamVjdC5kZWZpbmVQcm9wZXJ0eShFQ0IkMSwgIl9fZXNNb2R1bGUiLCB7IHZhbHVlOiB0cnVlIH0pOwoJLyoqCgkgKiA8cD5FbmNhcHN1bGF0ZXMgdGhlIHBhcmFtZXRlcnMgZm9yIG9uZSBlcnJvci1jb3JyZWN0aW9uIGJsb2NrIGluIG9uZSBzeW1ib2wgdmVyc2lvbi4KCSAqIFRoaXMgaW5jbHVkZXMgdGhlIG51bWJlciBvZiBkYXRhIGNvZGV3b3JkcywgYW5kIHRoZSBudW1iZXIgb2YgdGltZXMgYSBibG9jayB3aXRoIHRoZXNlCgkgKiBwYXJhbWV0ZXJzIGlzIHVzZWQgY29uc2VjdXRpdmVseSBpbiB0aGUgUVIgY29kZSB2ZXJzaW9uJ3MgZm9ybWF0LjwvcD4KCSAqLwoJdmFyIEVDQiA9IC8qKiBAY2xhc3MgKi8gKGZ1bmN0aW9uICgpIHsKCSAgICBmdW5jdGlvbiBFQ0IoY291bnQgLyppbnQqLywgZGF0YUNvZGV3b3JkcyAvKmludCovKSB7CgkgICAgICAgIHRoaXMuY291bnQgPSBjb3VudDsKCSAgICAgICAgdGhpcy5kYXRhQ29kZXdvcmRzID0gZGF0YUNvZGV3b3JkczsKCSAgICB9CgkgICAgRUNCLnByb3RvdHlwZS5nZXRDb3VudCA9IGZ1bmN0aW9uICgpIHsKCSAgICAgICAgcmV0dXJuIHRoaXMuY291bnQ7CgkgICAgfTsKCSAgICBFQ0IucHJvdG90eXBlLmdldERhdGFDb2Rld29yZHMgPSBmdW5jdGlvbiAoKSB7CgkgICAgICAgIHJldHVybiB0aGlzLmRhdGFDb2Rld29yZHM7CgkgICAgfTsKCSAgICByZXR1cm4gRUNCOwoJfSgpKTsKCUVDQiQxLmRlZmF1bHQgPSBFQ0I7CgoJLyoKCSAqIENvcHlyaWdodCAyMDA3IFpYaW5nIGF1dGhvcnMKCSAqCgkgKiBMaWNlbnNlZCB1bmRlciB0aGUgQXBhY2hlIExpY2Vuc2UsIFZlcnNpb24gMi4wICh0aGUgIkxpY2Vuc2UiKTsKCSAqIHlvdSBtYXkgbm90IHVzZSB0aGlzIGZpbGUgZXhjZXB0IGluIGNvbXBsaWFuY2Ugd2l0aCB0aGUgTGljZW5zZS4KCSAqIFlvdSBtYXkgb2J0YWluIGEgY29weSBvZiB0aGUgTGljZW5zZSBhdAoJICoKCSAqICAgICAgaHR0cDovL3d3dy5hcGFjaGUub3JnL2xpY2Vuc2VzL0xJQ0VOU0UtMi4wCgkgKgoJICogVW5sZXNzIHJlcXVpcmVkIGJ5IGFwcGxpY2FibGUgbGF3IG9yIGFncmVlZCB0byBpbiB3cml0aW5nLCBzb2Z0d2FyZQoJICogZGlzdHJpYnV0ZWQgdW5kZXIgdGhlIExpY2Vuc2UgaXMgZGlzdHJpYnV0ZWQgb24gYW4gIkFTIElTIiBCQVNJUywKCSAqIFdJVEhPVVQgV0FSUkFOVElFUyBPUiBDT05ESVRJT05TIE9GIEFOWSBLSU5ELCBlaXRoZXIgZXhwcmVzcyBvciBpbXBsaWVkLgoJICogU2VlIHRoZSBMaWNlbnNlIGZvciB0aGUgc3BlY2lmaWMgbGFuZ3VhZ2UgZ292ZXJuaW5nIHBlcm1pc3Npb25zIGFuZAoJICogbGltaXRhdGlvbnMgdW5kZXIgdGhlIExpY2Vuc2UuCgkgKi8KCXZhciBfX3ZhbHVlcyQ0ID0gKGNvbW1vbmpzR2xvYmFsICYmIGNvbW1vbmpzR2xvYmFsLl9fdmFsdWVzKSB8fCBmdW5jdGlvbihvKSB7CgkgICAgdmFyIHMgPSB0eXBlb2YgU3ltYm9sID09PSAiZnVuY3Rpb24iICYmIFN5bWJvbC5pdGVyYXRvciwgbSA9IHMgJiYgb1tzXSwgaSA9IDA7CgkgICAgaWYgKG0pIHJldHVybiBtLmNhbGwobyk7CgkgICAgaWYgKG8gJiYgdHlwZW9mIG8ubGVuZ3RoID09PSAibnVtYmVyIikgcmV0dXJuIHsKCSAgICAgICAgbmV4dDogZnVuY3Rpb24gKCkgewoJICAgICAgICAgICAgaWYgKG8gJiYgaSA+PSBvLmxlbmd0aCkgbyA9IHZvaWQgMDsKCSAgICAgICAgICAgIHJldHVybiB7IHZhbHVlOiBvICYmIG9baSsrXSwgZG9uZTogIW8gfTsKCSAgICAgICAgfQoJICAgIH07CgkgICAgdGhyb3cgbmV3IFR5cGVFcnJvcihzID8gIk9iamVjdCBpcyBub3QgaXRlcmFibGUuIiA6ICJTeW1ib2wuaXRlcmF0b3IgaXMgbm90IGRlZmluZWQuIik7Cgl9OwoJT2JqZWN0LmRlZmluZVByb3BlcnR5KFZlcnNpb24kMSwgIl9fZXNNb2R1bGUiLCB7IHZhbHVlOiB0cnVlIH0pOwoJLypuYW1lc3BhY2UgY29tLmdvb2dsZS56eGluZy5xcmNvZGUuZGVjb2RlciB7Ki8KCXZhciBCaXRNYXRyaXhfMSQzID0gQml0TWF0cml4JDE7Cgl2YXIgRm9ybWF0SW5mb3JtYXRpb25fMSQxID0gRm9ybWF0SW5mb3JtYXRpb24kMTsKCXZhciBFQ0Jsb2Nrc18xID0gRUNCbG9ja3MkMTsKCXZhciBFQ0JfMSA9IEVDQiQxOwoJdmFyIEZvcm1hdEV4Y2VwdGlvbl8xJDIgPSBGb3JtYXRFeGNlcHRpb24kMTsKCXZhciBJbGxlZ2FsQXJndW1lbnRFeGNlcHRpb25fMSQyID0gSWxsZWdhbEFyZ3VtZW50RXhjZXB0aW9uJDE7CgkvKioKCSAqIFNlZSBJU08gMTgwMDQ6MjAwNiBBbm5leCBECgkgKgoJICogQGF1dGhvciBTZWFuIE93ZW4KCSAqLwoJdmFyIFZlcnNpb24gPSAvKiogQGNsYXNzICovIChmdW5jdGlvbiAoKSB7CgkgICAgZnVuY3Rpb24gVmVyc2lvbih2ZXJzaW9uTnVtYmVyIC8qaW50Ki8sIGFsaWdubWVudFBhdHRlcm5DZW50ZXJzKSB7CgkgICAgICAgIHZhciBlXzEsIF9hOwoJICAgICAgICB2YXIgZWNCbG9ja3MgPSBbXTsKCSAgICAgICAgZm9yICh2YXIgX2kgPSAyOyBfaSA8IGFyZ3VtZW50cy5sZW5ndGg7IF9pKyspIHsKCSAgICAgICAgICAgIGVjQmxvY2tzW19pIC0gMl0gPSBhcmd1bWVudHNbX2ldOwoJICAgICAgICB9CgkgICAgICAgIHRoaXMudmVyc2lvbk51bWJlciA9IHZlcnNpb25OdW1iZXI7CgkgICAgICAgIHRoaXMuYWxpZ25tZW50UGF0dGVybkNlbnRlcnMgPSBhbGlnbm1lbnRQYXR0ZXJuQ2VudGVyczsKCSAgICAgICAgdGhpcy5lY0Jsb2NrcyA9IGVjQmxvY2tzOwoJICAgICAgICB2YXIgdG90YWwgPSAwOwoJICAgICAgICB2YXIgZWNDb2Rld29yZHMgPSBlY0Jsb2Nrc1swXS5nZXRFQ0NvZGV3b3Jkc1BlckJsb2NrKCk7CgkgICAgICAgIHZhciBlY2JBcnJheSA9IGVjQmxvY2tzWzBdLmdldEVDQmxvY2tzKCk7CgkgICAgICAgIHRyeSB7CgkgICAgICAgICAgICBmb3IgKHZhciBlY2JBcnJheV8xID0gX192YWx1ZXMkNChlY2JBcnJheSksIGVjYkFycmF5XzFfMSA9IGVjYkFycmF5XzEubmV4dCgpOyAhZWNiQXJyYXlfMV8xLmRvbmU7IGVjYkFycmF5XzFfMSA9IGVjYkFycmF5XzEubmV4dCgpKSB7CgkgICAgICAgICAgICAgICAgdmFyIGVjQmxvY2sgPSBlY2JBcnJheV8xXzEudmFsdWU7CgkgICAgICAgICAgICAgICAgdG90YWwgKz0gZWNCbG9jay5nZXRDb3VudCgpICogKGVjQmxvY2suZ2V0RGF0YUNvZGV3b3JkcygpICsgZWNDb2Rld29yZHMpOwoJICAgICAgICAgICAgfQoJICAgICAgICB9CgkgICAgICAgIGNhdGNoIChlXzFfMSkgeyBlXzEgPSB7IGVycm9yOiBlXzFfMSB9OyB9CgkgICAgICAgIGZpbmFsbHkgewoJICAgICAgICAgICAgdHJ5IHsKCSAgICAgICAgICAgICAgICBpZiAoZWNiQXJyYXlfMV8xICYmICFlY2JBcnJheV8xXzEuZG9uZSAmJiAoX2EgPSBlY2JBcnJheV8xLnJldHVybikpIF9hLmNhbGwoZWNiQXJyYXlfMSk7CgkgICAgICAgICAgICB9CgkgICAgICAgICAgICBmaW5hbGx5IHsgaWYgKGVfMSkgdGhyb3cgZV8xLmVycm9yOyB9CgkgICAgICAgIH0KCSAgICAgICAgdGhpcy50b3RhbENvZGV3b3JkcyA9IHRvdGFsOwoJICAgIH0KCSAgICBWZXJzaW9uLnByb3RvdHlwZS5nZXRWZXJzaW9uTnVtYmVyID0gZnVuY3Rpb24gKCkgewoJICAgICAgICByZXR1cm4gdGhpcy52ZXJzaW9uTnVtYmVyOwoJICAgIH07CgkgICAgVmVyc2lvbi5wcm90b3R5cGUuZ2V0QWxpZ25tZW50UGF0dGVybkNlbnRlcnMgPSBmdW5jdGlvbiAoKSB7CgkgICAgICAgIHJldHVybiB0aGlzLmFsaWdubWVudFBhdHRlcm5DZW50ZXJzOwoJICAgIH07CgkgICAgVmVyc2lvbi5wcm90b3R5cGUuZ2V0VG90YWxDb2Rld29yZHMgPSBmdW5jdGlvbiAoKSB7CgkgICAgICAgIHJldHVybiB0aGlzLnRvdGFsQ29kZXdvcmRzOwoJICAgIH07CgkgICAgVmVyc2lvbi5wcm90b3R5cGUuZ2V0RGltZW5zaW9uRm9yVmVyc2lvbiA9IGZ1bmN0aW9uICgpIHsKCSAgICAgICAgcmV0dXJuIDE3ICsgNCAqIHRoaXMudmVyc2lvbk51bWJlcjsKCSAgICB9OwoJICAgIFZlcnNpb24ucHJvdG90eXBlLmdldEVDQmxvY2tzRm9yTGV2ZWwgPSBmdW5jdGlvbiAoZWNMZXZlbCkgewoJICAgICAgICByZXR1cm4gdGhpcy5lY0Jsb2Nrc1tlY0xldmVsLmdldFZhbHVlKCldOwoJICAgICAgICAvLyBUWVBFU0NSSVBUUE9SVDogb3JpZ2luYWwgd2FzIHVzaW5nIG9yZGluYWwsIGFuZCB1c2luZyB0aGUgb3JkZXIgb2YgbGV2ZWxzIGFzIGRlZmluZWQgaW4gRXJyb3JDb3JyZWN0aW9uTGV2ZWwgZW51bSAoTE1RSCkKCSAgICAgICAgLy8gSSB3aWxsIHVzZSB0aGUgZGlyZWN0IHZhbHVlIGZyb20gRXJyb3JDb3JyZWN0aW9uTGV2ZWxWYWx1ZXMgZW51bSB3aGljaCBpbiB0eXBlc2NyaXB0IGdvZXMgdG8gYSBudW1iZXIKCSAgICB9OwoJICAgIC8qKgoJICAgICAqIDxwPkRlZHVjZXMgdmVyc2lvbiBpbmZvcm1hdGlvbiBwdXJlbHkgZnJvbSBRUiBDb2RlIGRpbWVuc2lvbnMuPC9wPgoJICAgICAqCgkgICAgICogQHBhcmFtIGRpbWVuc2lvbiBkaW1lbnNpb24gaW4gbW9kdWxlcwoJICAgICAqIEByZXR1cm4gVmVyc2lvbiBmb3IgYSBRUiBDb2RlIG9mIHRoYXQgZGltZW5zaW9uCgkgICAgICogQHRocm93cyBGb3JtYXRFeGNlcHRpb24gaWYgZGltZW5zaW9uIGlzIG5vdCAxIG1vZCA0CgkgICAgICovCgkgICAgVmVyc2lvbi5nZXRQcm92aXNpb25hbFZlcnNpb25Gb3JEaW1lbnNpb24gPSBmdW5jdGlvbiAoZGltZW5zaW9uIC8qaW50Ki8pIHsKCSAgICAgICAgaWYgKGRpbWVuc2lvbiAlIDQgIT09IDEpIHsKCSAgICAgICAgICAgIHRocm93IG5ldyBGb3JtYXRFeGNlcHRpb25fMSQyLmRlZmF1bHQoKTsKCSAgICAgICAgfQoJICAgICAgICB0cnkgewoJICAgICAgICAgICAgcmV0dXJuIHRoaXMuZ2V0VmVyc2lvbkZvck51bWJlcigoZGltZW5zaW9uIC0gMTcpIC8gNCk7CgkgICAgICAgIH0KCSAgICAgICAgY2F0Y2ggKGlnbm9yZWQgLyo6IElsbGVnYWxBcmd1bWVudEV4Y2VwdGlvbiovKSB7CgkgICAgICAgICAgICB0aHJvdyBuZXcgRm9ybWF0RXhjZXB0aW9uXzEkMi5kZWZhdWx0KCk7CgkgICAgICAgIH0KCSAgICB9OwoJICAgIFZlcnNpb24uZ2V0VmVyc2lvbkZvck51bWJlciA9IGZ1bmN0aW9uICh2ZXJzaW9uTnVtYmVyIC8qaW50Ki8pIHsKCSAgICAgICAgaWYgKHZlcnNpb25OdW1iZXIgPCAxIHx8IHZlcnNpb25OdW1iZXIgPiA0MCkgewoJICAgICAgICAgICAgdGhyb3cgbmV3IElsbGVnYWxBcmd1bWVudEV4Y2VwdGlvbl8xJDIuZGVmYXVsdCgpOwoJICAgICAgICB9CgkgICAgICAgIHJldHVybiBWZXJzaW9uLlZFUlNJT05TW3ZlcnNpb25OdW1iZXIgLSAxXTsKCSAgICB9OwoJICAgIFZlcnNpb24uZGVjb2RlVmVyc2lvbkluZm9ybWF0aW9uID0gZnVuY3Rpb24gKHZlcnNpb25CaXRzIC8qaW50Ki8pIHsKCSAgICAgICAgdmFyIGJlc3REaWZmZXJlbmNlID0gTnVtYmVyLk1BWF9TQUZFX0lOVEVHRVI7CgkgICAgICAgIHZhciBiZXN0VmVyc2lvbiA9IDA7CgkgICAgICAgIGZvciAodmFyIGkgPSAwOyBpIDwgVmVyc2lvbi5WRVJTSU9OX0RFQ09ERV9JTkZPLmxlbmd0aDsgaSsrKSB7CgkgICAgICAgICAgICB2YXIgdGFyZ2V0VmVyc2lvbiA9IFZlcnNpb24uVkVSU0lPTl9ERUNPREVfSU5GT1tpXTsKCSAgICAgICAgICAgIC8vIERvIHRoZSB2ZXJzaW9uIGluZm8gYml0cyBtYXRjaCBleGFjdGx5PyBkb25lLgoJICAgICAgICAgICAgaWYgKHRhcmdldFZlcnNpb24gPT09IHZlcnNpb25CaXRzKSB7CgkgICAgICAgICAgICAgICAgcmV0dXJuIFZlcnNpb24uZ2V0VmVyc2lvbkZvck51bWJlcihpICsgNyk7CgkgICAgICAgICAgICB9CgkgICAgICAgICAgICAvLyBPdGhlcndpc2Ugc2VlIGlmIHRoaXMgaXMgdGhlIGNsb3Nlc3QgdG8gYSByZWFsIHZlcnNpb24gaW5mbyBiaXQgc3RyaW5nCgkgICAgICAgICAgICAvLyB3ZSBoYXZlIHNlZW4gc28gZmFyCgkgICAgICAgICAgICB2YXIgYml0c0RpZmZlcmVuY2UgPSBGb3JtYXRJbmZvcm1hdGlvbl8xJDEuZGVmYXVsdC5udW1CaXRzRGlmZmVyaW5nKHZlcnNpb25CaXRzLCB0YXJnZXRWZXJzaW9uKTsKCSAgICAgICAgICAgIGlmIChiaXRzRGlmZmVyZW5jZSA8IGJlc3REaWZmZXJlbmNlKSB7CgkgICAgICAgICAgICAgICAgYmVzdFZlcnNpb24gPSBpICsgNzsKCSAgICAgICAgICAgICAgICBiZXN0RGlmZmVyZW5jZSA9IGJpdHNEaWZmZXJlbmNlOwoJICAgICAgICAgICAgfQoJICAgICAgICB9CgkgICAgICAgIC8vIFdlIGNhbiB0b2xlcmF0ZSB1cCB0byAzIGJpdHMgb2YgZXJyb3Igc2luY2Ugbm8gdHdvIHZlcnNpb24gaW5mbyBjb2Rld29yZHMgd2lsbAoJICAgICAgICAvLyBkaWZmZXIgaW4gbGVzcyB0aGFuIDggYml0cy4KCSAgICAgICAgaWYgKGJlc3REaWZmZXJlbmNlIDw9IDMpIHsKCSAgICAgICAgICAgIHJldHVybiBWZXJzaW9uLmdldFZlcnNpb25Gb3JOdW1iZXIoYmVzdFZlcnNpb24pOwoJICAgICAgICB9CgkgICAgICAgIC8vIElmIHdlIGRpZG4ndCBmaW5kIGEgY2xvc2UgZW5vdWdoIG1hdGNoLCBmYWlsCgkgICAgICAgIHJldHVybiBudWxsOwoJICAgIH07CgkgICAgLyoqCgkgICAgICogU2VlIElTTyAxODAwNDoyMDA2IEFubmV4IEUKCSAgICAgKi8KCSAgICBWZXJzaW9uLnByb3RvdHlwZS5idWlsZEZ1bmN0aW9uUGF0dGVybiA9IGZ1bmN0aW9uICgpIHsKCSAgICAgICAgdmFyIGRpbWVuc2lvbiA9IHRoaXMuZ2V0RGltZW5zaW9uRm9yVmVyc2lvbigpOwoJICAgICAgICB2YXIgYml0TWF0cml4ID0gbmV3IEJpdE1hdHJpeF8xJDMuZGVmYXVsdChkaW1lbnNpb24pOwoJICAgICAgICAvLyBUb3AgbGVmdCBmaW5kZXIgcGF0dGVybiArIHNlcGFyYXRvciArIGZvcm1hdAoJICAgICAgICBiaXRNYXRyaXguc2V0UmVnaW9uKDAsIDAsIDksIDkpOwoJICAgICAgICAvLyBUb3AgcmlnaHQgZmluZGVyIHBhdHRlcm4gKyBzZXBhcmF0b3IgKyBmb3JtYXQKCSAgICAgICAgYml0TWF0cml4LnNldFJlZ2lvbihkaW1lbnNpb24gLSA4LCAwLCA4LCA5KTsKCSAgICAgICAgLy8gQm90dG9tIGxlZnQgZmluZGVyIHBhdHRlcm4gKyBzZXBhcmF0b3IgKyBmb3JtYXQKCSAgICAgICAgYml0TWF0cml4LnNldFJlZ2lvbigwLCBkaW1lbnNpb24gLSA4LCA5LCA4KTsKCSAgICAgICAgLy8gQWxpZ25tZW50IHBhdHRlcm5zCgkgICAgICAgIHZhciBtYXggPSB0aGlzLmFsaWdubWVudFBhdHRlcm5DZW50ZXJzLmxlbmd0aDsKCSAgICAgICAgZm9yICh2YXIgeCA9IDA7IHggPCBtYXg7IHgrKykgewoJICAgICAgICAgICAgdmFyIGkgPSB0aGlzLmFsaWdubWVudFBhdHRlcm5DZW50ZXJzW3hdIC0gMjsKCSAgICAgICAgICAgIGZvciAodmFyIHkgPSAwOyB5IDwgbWF4OyB5KyspIHsKCSAgICAgICAgICAgICAgICBpZiAoKHggPT09IDAgJiYgKHkgPT09IDAgfHwgeSA9PT0gbWF4IC0gMSkpIHx8ICh4ID09PSBtYXggLSAxICYmIHkgPT09IDApKSB7CgkgICAgICAgICAgICAgICAgICAgIC8vIE5vIGFsaWdubWVudCBwYXR0ZXJucyBuZWFyIHRoZSB0aHJlZSBmaW5kZXIgcGF0dGVybnMKCSAgICAgICAgICAgICAgICAgICAgY29udGludWU7CgkgICAgICAgICAgICAgICAgfQoJICAgICAgICAgICAgICAgIGJpdE1hdHJpeC5zZXRSZWdpb24odGhpcy5hbGlnbm1lbnRQYXR0ZXJuQ2VudGVyc1t5XSAtIDIsIGksIDUsIDUpOwoJICAgICAgICAgICAgfQoJICAgICAgICB9CgkgICAgICAgIC8vIFZlcnRpY2FsIHRpbWluZyBwYXR0ZXJuCgkgICAgICAgIGJpdE1hdHJpeC5zZXRSZWdpb24oNiwgOSwgMSwgZGltZW5zaW9uIC0gMTcpOwoJICAgICAgICAvLyBIb3Jpem9udGFsIHRpbWluZyBwYXR0ZXJuCgkgICAgICAgIGJpdE1hdHJpeC5zZXRSZWdpb24oOSwgNiwgZGltZW5zaW9uIC0gMTcsIDEpOwoJICAgICAgICBpZiAodGhpcy52ZXJzaW9uTnVtYmVyID4gNikgewoJICAgICAgICAgICAgLy8gVmVyc2lvbiBpbmZvLCB0b3AgcmlnaHQKCSAgICAgICAgICAgIGJpdE1hdHJpeC5zZXRSZWdpb24oZGltZW5zaW9uIC0gMTEsIDAsIDMsIDYpOwoJICAgICAgICAgICAgLy8gVmVyc2lvbiBpbmZvLCBib3R0b20gbGVmdAoJICAgICAgICAgICAgYml0TWF0cml4LnNldFJlZ2lvbigwLCBkaW1lbnNpb24gLSAxMSwgNiwgMyk7CgkgICAgICAgIH0KCSAgICAgICAgcmV0dXJuIGJpdE1hdHJpeDsKCSAgICB9OwoJICAgIC8qQE92ZXJyaWRlKi8KCSAgICBWZXJzaW9uLnByb3RvdHlwZS50b1N0cmluZyA9IGZ1bmN0aW9uICgpIHsKCSAgICAgICAgcmV0dXJuICcnICsgdGhpcy52ZXJzaW9uTnVtYmVyOwoJICAgIH07CgkgICAgLyoqCgkgICAgICAgKiBTZWUgSVNPIDE4MDA0OjIwMDYgQW5uZXggRC4KCSAgICAgICAqIEVsZW1lbnQgaSByZXByZXNlbnRzIHRoZSByYXcgdmVyc2lvbiBiaXRzIHRoYXQgc3BlY2lmeSB2ZXJzaW9uIGkgKyA3CgkgICAgICAgKi8KCSAgICBWZXJzaW9uLlZFUlNJT05fREVDT0RFX0lORk8gPSBJbnQzMkFycmF5LmZyb20oWwoJICAgICAgICAweDA3Qzk0LCAweDA4NUJDLCAweDA5QTk5LCAweDBBNEQzLCAweDBCQkY2LAoJICAgICAgICAweDBDNzYyLCAweDBEODQ3LCAweDBFNjBELCAweDBGOTI4LCAweDEwQjc4LAoJICAgICAgICAweDExNDVELCAweDEyQTE3LCAweDEzNTMyLCAweDE0OUE2LCAweDE1NjgzLAoJICAgICAgICAweDE2OEM5LCAweDE3N0VDLCAweDE4RUM0LCAweDE5MUUxLCAweDFBRkFCLAoJICAgICAgICAweDFCMDhFLCAweDFDQzFBLCAweDFEMzNGLCAweDFFRDc1LCAweDFGMjUwLAoJICAgICAgICAweDIwOUQ1LCAweDIxNkYwLCAweDIyOEJBLCAweDIzNzlGLCAweDI0QjBCLAoJICAgICAgICAweDI1NDJFLCAweDI2QTY0LCAweDI3NTQxLCAweDI4QzY5CgkgICAgXSk7CgkgICAgLyoqCgkgICAgICAgKiBTZWUgSVNPIDE4MDA0OjIwMDYgNi41LjEgVGFibGUgOQoJICAgICAgICovCgkgICAgVmVyc2lvbi5WRVJTSU9OUyA9IFsKCSAgICAgICAgbmV3IFZlcnNpb24oMSwgbmV3IEludDMyQXJyYXkoMCksIG5ldyBFQ0Jsb2Nrc18xLmRlZmF1bHQoNywgbmV3IEVDQl8xLmRlZmF1bHQoMSwgMTkpKSwgbmV3IEVDQmxvY2tzXzEuZGVmYXVsdCgxMCwgbmV3IEVDQl8xLmRlZmF1bHQoMSwgMTYpKSwgbmV3IEVDQmxvY2tzXzEuZGVmYXVsdCgxMywgbmV3IEVDQl8xLmRlZmF1bHQoMSwgMTMpKSwgbmV3IEVDQmxvY2tzXzEuZGVmYXVsdCgxNywgbmV3IEVDQl8xLmRlZmF1bHQoMSwgOSkpKSwKCSAgICAgICAgbmV3IFZlcnNpb24oMiwgSW50MzJBcnJheS5mcm9tKFs2LCAxOF0pLCBuZXcgRUNCbG9ja3NfMS5kZWZhdWx0KDEwLCBuZXcgRUNCXzEuZGVmYXVsdCgxLCAzNCkpLCBuZXcgRUNCbG9ja3NfMS5kZWZhdWx0KDE2LCBuZXcgRUNCXzEuZGVmYXVsdCgxLCAyOCkpLCBuZXcgRUNCbG9ja3NfMS5kZWZhdWx0KDIyLCBuZXcgRUNCXzEuZGVmYXVsdCgxLCAyMikpLCBuZXcgRUNCbG9ja3NfMS5kZWZhdWx0KDI4LCBuZXcgRUNCXzEuZGVmYXVsdCgxLCAxNikpKSwKCSAgICAgICAgbmV3IFZlcnNpb24oMywgSW50MzJBcnJheS5mcm9tKFs2LCAyMl0pLCBuZXcgRUNCbG9ja3NfMS5kZWZhdWx0KDE1LCBuZXcgRUNCXzEuZGVmYXVsdCgxLCA1NSkpLCBuZXcgRUNCbG9ja3NfMS5kZWZhdWx0KDI2LCBuZXcgRUNCXzEuZGVmYXVsdCgxLCA0NCkpLCBuZXcgRUNCbG9ja3NfMS5kZWZhdWx0KDE4LCBuZXcgRUNCXzEuZGVmYXVsdCgyLCAxNykpLCBuZXcgRUNCbG9ja3NfMS5kZWZhdWx0KDIyLCBuZXcgRUNCXzEuZGVmYXVsdCgyLCAxMykpKSwKCSAgICAgICAgbmV3IFZlcnNpb24oNCwgSW50MzJBcnJheS5mcm9tKFs2LCAyNl0pLCBuZXcgRUNCbG9ja3NfMS5kZWZhdWx0KDIwLCBuZXcgRUNCXzEuZGVmYXVsdCgxLCA4MCkpLCBuZXcgRUNCbG9ja3NfMS5kZWZhdWx0KDE4LCBuZXcgRUNCXzEuZGVmYXVsdCgyLCAzMikpLCBuZXcgRUNCbG9ja3NfMS5kZWZhdWx0KDI2LCBuZXcgRUNCXzEuZGVmYXVsdCgyLCAyNCkpLCBuZXcgRUNCbG9ja3NfMS5kZWZhdWx0KDE2LCBuZXcgRUNCXzEuZGVmYXVsdCg0LCA5KSkpLAoJICAgICAgICBuZXcgVmVyc2lvbig1LCBJbnQzMkFycmF5LmZyb20oWzYsIDMwXSksIG5ldyBFQ0Jsb2Nrc18xLmRlZmF1bHQoMjYsIG5ldyBFQ0JfMS5kZWZhdWx0KDEsIDEwOCkpLCBuZXcgRUNCbG9ja3NfMS5kZWZhdWx0KDI0LCBuZXcgRUNCXzEuZGVmYXVsdCgyLCA0MykpLCBuZXcgRUNCbG9ja3NfMS5kZWZhdWx0KDE4LCBuZXcgRUNCXzEuZGVmYXVsdCgyLCAxNSksIG5ldyBFQ0JfMS5kZWZhdWx0KDIsIDE2KSksIG5ldyBFQ0Jsb2Nrc18xLmRlZmF1bHQoMjIsIG5ldyBFQ0JfMS5kZWZhdWx0KDIsIDExKSwgbmV3IEVDQl8xLmRlZmF1bHQoMiwgMTIpKSksCgkgICAgICAgIG5ldyBWZXJzaW9uKDYsIEludDMyQXJyYXkuZnJvbShbNiwgMzRdKSwgbmV3IEVDQmxvY2tzXzEuZGVmYXVsdCgxOCwgbmV3IEVDQl8xLmRlZmF1bHQoMiwgNjgpKSwgbmV3IEVDQmxvY2tzXzEuZGVmYXVsdCgxNiwgbmV3IEVDQl8xLmRlZmF1bHQoNCwgMjcpKSwgbmV3IEVDQmxvY2tzXzEuZGVmYXVsdCgyNCwgbmV3IEVDQl8xLmRlZmF1bHQoNCwgMTkpKSwgbmV3IEVDQmxvY2tzXzEuZGVmYXVsdCgyOCwgbmV3IEVDQl8xLmRlZmF1bHQoNCwgMTUpKSksCgkgICAgICAgIG5ldyBWZXJzaW9uKDcsIEludDMyQXJyYXkuZnJvbShbNiwgMjIsIDM4XSksIG5ldyBFQ0Jsb2Nrc18xLmRlZmF1bHQoMjAsIG5ldyBFQ0JfMS5kZWZhdWx0KDIsIDc4KSksIG5ldyBFQ0Jsb2Nrc18xLmRlZmF1bHQoMTgsIG5ldyBFQ0JfMS5kZWZhdWx0KDQsIDMxKSksIG5ldyBFQ0Jsb2Nrc18xLmRlZmF1bHQoMTgsIG5ldyBFQ0JfMS5kZWZhdWx0KDIsIDE0KSwgbmV3IEVDQl8xLmRlZmF1bHQoNCwgMTUpKSwgbmV3IEVDQmxvY2tzXzEuZGVmYXVsdCgyNiwgbmV3IEVDQl8xLmRlZmF1bHQoNCwgMTMpLCBuZXcgRUNCXzEuZGVmYXVsdCgxLCAxNCkpKSwKCSAgICAgICAgbmV3IFZlcnNpb24oOCwgSW50MzJBcnJheS5mcm9tKFs2LCAyNCwgNDJdKSwgbmV3IEVDQmxvY2tzXzEuZGVmYXVsdCgyNCwgbmV3IEVDQl8xLmRlZmF1bHQoMiwgOTcpKSwgbmV3IEVDQmxvY2tzXzEuZGVmYXVsdCgyMiwgbmV3IEVDQl8xLmRlZmF1bHQoMiwgMzgpLCBuZXcgRUNCXzEuZGVmYXVsdCgyLCAzOSkpLCBuZXcgRUNCbG9ja3NfMS5kZWZhdWx0KDIyLCBuZXcgRUNCXzEuZGVmYXVsdCg0LCAxOCksIG5ldyBFQ0JfMS5kZWZhdWx0KDIsIDE5KSksIG5ldyBFQ0Jsb2Nrc18xLmRlZmF1bHQoMjYsIG5ldyBFQ0JfMS5kZWZhdWx0KDQsIDE0KSwgbmV3IEVDQl8xLmRlZmF1bHQoMiwgMTUpKSksCgkgICAgICAgIG5ldyBWZXJzaW9uKDksIEludDMyQXJyYXkuZnJvbShbNiwgMjYsIDQ2XSksIG5ldyBFQ0Jsb2Nrc18xLmRlZmF1bHQoMzAsIG5ldyBFQ0JfMS5kZWZhdWx0KDIsIDExNikpLCBuZXcgRUNCbG9ja3NfMS5kZWZhdWx0KDIyLCBuZXcgRUNCXzEuZGVmYXVsdCgzLCAzNiksIG5ldyBFQ0JfMS5kZWZhdWx0KDIsIDM3KSksIG5ldyBFQ0Jsb2Nrc18xLmRlZmF1bHQoMjAsIG5ldyBFQ0JfMS5kZWZhdWx0KDQsIDE2KSwgbmV3IEVDQl8xLmRlZmF1bHQoNCwgMTcpKSwgbmV3IEVDQmxvY2tzXzEuZGVmYXVsdCgyNCwgbmV3IEVDQl8xLmRlZmF1bHQoNCwgMTIpLCBuZXcgRUNCXzEuZGVmYXVsdCg0LCAxMykpKSwKCSAgICAgICAgbmV3IFZlcnNpb24oMTAsIEludDMyQXJyYXkuZnJvbShbNiwgMjgsIDUwXSksIG5ldyBFQ0Jsb2Nrc18xLmRlZmF1bHQoMTgsIG5ldyBFQ0JfMS5kZWZhdWx0KDIsIDY4KSwgbmV3IEVDQl8xLmRlZmF1bHQoMiwgNjkpKSwgbmV3IEVDQmxvY2tzXzEuZGVmYXVsdCgyNiwgbmV3IEVDQl8xLmRlZmF1bHQoNCwgNDMpLCBuZXcgRUNCXzEuZGVmYXVsdCgxLCA0NCkpLCBuZXcgRUNCbG9ja3NfMS5kZWZhdWx0KDI0LCBuZXcgRUNCXzEuZGVmYXVsdCg2LCAxOSksIG5ldyBFQ0JfMS5kZWZhdWx0KDIsIDIwKSksIG5ldyBFQ0Jsb2Nrc18xLmRlZmF1bHQoMjgsIG5ldyBFQ0JfMS5kZWZhdWx0KDYsIDE1KSwgbmV3IEVDQl8xLmRlZmF1bHQoMiwgMTYpKSksCgkgICAgICAgIG5ldyBWZXJzaW9uKDExLCBJbnQzMkFycmF5LmZyb20oWzYsIDMwLCA1NF0pLCBuZXcgRUNCbG9ja3NfMS5kZWZhdWx0KDIwLCBuZXcgRUNCXzEuZGVmYXVsdCg0LCA4MSkpLCBuZXcgRUNCbG9ja3NfMS5kZWZhdWx0KDMwLCBuZXcgRUNCXzEuZGVmYXVsdCgxLCA1MCksIG5ldyBFQ0JfMS5kZWZhdWx0KDQsIDUxKSksIG5ldyBFQ0Jsb2Nrc18xLmRlZmF1bHQoMjgsIG5ldyBFQ0JfMS5kZWZhdWx0KDQsIDIyKSwgbmV3IEVDQl8xLmRlZmF1bHQoNCwgMjMpKSwgbmV3IEVDQmxvY2tzXzEuZGVmYXVsdCgyNCwgbmV3IEVDQl8xLmRlZmF1bHQoMywgMTIpLCBuZXcgRUNCXzEuZGVmYXVsdCg4LCAxMykpKSwKCSAgICAgICAgbmV3IFZlcnNpb24oMTIsIEludDMyQXJyYXkuZnJvbShbNiwgMzIsIDU4XSksIG5ldyBFQ0Jsb2Nrc18xLmRlZmF1bHQoMjQsIG5ldyBFQ0JfMS5kZWZhdWx0KDIsIDkyKSwgbmV3IEVDQl8xLmRlZmF1bHQoMiwgOTMpKSwgbmV3IEVDQmxvY2tzXzEuZGVmYXVsdCgyMiwgbmV3IEVDQl8xLmRlZmF1bHQoNiwgMzYpLCBuZXcgRUNCXzEuZGVmYXVsdCgyLCAzNykpLCBuZXcgRUNCbG9ja3NfMS5kZWZhdWx0KDI2LCBuZXcgRUNCXzEuZGVmYXVsdCg0LCAyMCksIG5ldyBFQ0JfMS5kZWZhdWx0KDYsIDIxKSksIG5ldyBFQ0Jsb2Nrc18xLmRlZmF1bHQoMjgsIG5ldyBFQ0JfMS5kZWZhdWx0KDcsIDE0KSwgbmV3IEVDQl8xLmRlZmF1bHQoNCwgMTUpKSksCgkgICAgICAgIG5ldyBWZXJzaW9uKDEzLCBJbnQzMkFycmF5LmZyb20oWzYsIDM0LCA2Ml0pLCBuZXcgRUNCbG9ja3NfMS5kZWZhdWx0KDI2LCBuZXcgRUNCXzEuZGVmYXVsdCg0LCAxMDcpKSwgbmV3IEVDQmxvY2tzXzEuZGVmYXVsdCgyMiwgbmV3IEVDQl8xLmRlZmF1bHQoOCwgMzcpLCBuZXcgRUNCXzEuZGVmYXVsdCgxLCAzOCkpLCBuZXcgRUNCbG9ja3NfMS5kZWZhdWx0KDI0LCBuZXcgRUNCXzEuZGVmYXVsdCg4LCAyMCksIG5ldyBFQ0JfMS5kZWZhdWx0KDQsIDIxKSksIG5ldyBFQ0Jsb2Nrc18xLmRlZmF1bHQoMjIsIG5ldyBFQ0JfMS5kZWZhdWx0KDEyLCAxMSksIG5ldyBFQ0JfMS5kZWZhdWx0KDQsIDEyKSkpLAoJICAgICAgICBuZXcgVmVyc2lvbigxNCwgSW50MzJBcnJheS5mcm9tKFs2LCAyNiwgNDYsIDY2XSksIG5ldyBFQ0Jsb2Nrc18xLmRlZmF1bHQoMzAsIG5ldyBFQ0JfMS5kZWZhdWx0KDMsIDExNSksIG5ldyBFQ0JfMS5kZWZhdWx0KDEsIDExNikpLCBuZXcgRUNCbG9ja3NfMS5kZWZhdWx0KDI0LCBuZXcgRUNCXzEuZGVmYXVsdCg0LCA0MCksIG5ldyBFQ0JfMS5kZWZhdWx0KDUsIDQxKSksIG5ldyBFQ0Jsb2Nrc18xLmRlZmF1bHQoMjAsIG5ldyBFQ0JfMS5kZWZhdWx0KDExLCAxNiksIG5ldyBFQ0JfMS5kZWZhdWx0KDUsIDE3KSksIG5ldyBFQ0Jsb2Nrc18xLmRlZmF1bHQoMjQsIG5ldyBFQ0JfMS5kZWZhdWx0KDExLCAxMiksIG5ldyBFQ0JfMS5kZWZhdWx0KDUsIDEzKSkpLAoJICAgICAgICBuZXcgVmVyc2lvbigxNSwgSW50MzJBcnJheS5mcm9tKFs2LCAyNiwgNDgsIDcwXSksIG5ldyBFQ0Jsb2Nrc18xLmRlZmF1bHQoMjIsIG5ldyBFQ0JfMS5kZWZhdWx0KDUsIDg3KSwgbmV3IEVDQl8xLmRlZmF1bHQoMSwgODgpKSwgbmV3IEVDQmxvY2tzXzEuZGVmYXVsdCgyNCwgbmV3IEVDQl8xLmRlZmF1bHQoNSwgNDEpLCBuZXcgRUNCXzEuZGVmYXVsdCg1LCA0MikpLCBuZXcgRUNCbG9ja3NfMS5kZWZhdWx0KDMwLCBuZXcgRUNCXzEuZGVmYXVsdCg1LCAyNCksIG5ldyBFQ0JfMS5kZWZhdWx0KDcsIDI1KSksIG5ldyBFQ0Jsb2Nrc18xLmRlZmF1bHQoMjQsIG5ldyBFQ0JfMS5kZWZhdWx0KDExLCAxMiksIG5ldyBFQ0JfMS5kZWZhdWx0KDcsIDEzKSkpLAoJICAgICAgICBuZXcgVmVyc2lvbigxNiwgSW50MzJBcnJheS5mcm9tKFs2LCAyNiwgNTAsIDc0XSksIG5ldyBFQ0Jsb2Nrc18xLmRlZmF1bHQoMjQsIG5ldyBFQ0JfMS5kZWZhdWx0KDUsIDk4KSwgbmV3IEVDQl8xLmRlZmF1bHQoMSwgOTkpKSwgbmV3IEVDQmxvY2tzXzEuZGVmYXVsdCgyOCwgbmV3IEVDQl8xLmRlZmF1bHQoNywgNDUpLCBuZXcgRUNCXzEuZGVmYXVsdCgzLCA0NikpLCBuZXcgRUNCbG9ja3NfMS5kZWZhdWx0KDI0LCBuZXcgRUNCXzEuZGVmYXVsdCgxNSwgMTkpLCBuZXcgRUNCXzEuZGVmYXVsdCgyLCAyMCkpLCBuZXcgRUNCbG9ja3NfMS5kZWZhdWx0KDMwLCBuZXcgRUNCXzEuZGVmYXVsdCgzLCAxNSksIG5ldyBFQ0JfMS5kZWZhdWx0KDEzLCAxNikpKSwKCSAgICAgICAgbmV3IFZlcnNpb24oMTcsIEludDMyQXJyYXkuZnJvbShbNiwgMzAsIDU0LCA3OF0pLCBuZXcgRUNCbG9ja3NfMS5kZWZhdWx0KDI4LCBuZXcgRUNCXzEuZGVmYXVsdCgxLCAxMDcpLCBuZXcgRUNCXzEuZGVmYXVsdCg1LCAxMDgpKSwgbmV3IEVDQmxvY2tzXzEuZGVmYXVsdCgyOCwgbmV3IEVDQl8xLmRlZmF1bHQoMTAsIDQ2KSwgbmV3IEVDQl8xLmRlZmF1bHQoMSwgNDcpKSwgbmV3IEVDQmxvY2tzXzEuZGVmYXVsdCgyOCwgbmV3IEVDQl8xLmRlZmF1bHQoMSwgMjIpLCBuZXcgRUNCXzEuZGVmYXVsdCgxNSwgMjMpKSwgbmV3IEVDQmxvY2tzXzEuZGVmYXVsdCgyOCwgbmV3IEVDQl8xLmRlZmF1bHQoMiwgMTQpLCBuZXcgRUNCXzEuZGVmYXVsdCgxNywgMTUpKSksCgkgICAgICAgIG5ldyBWZXJzaW9uKDE4LCBJbnQzMkFycmF5LmZyb20oWzYsIDMwLCA1NiwgODJdKSwgbmV3IEVDQmxvY2tzXzEuZGVmYXVsdCgzMCwgbmV3IEVDQl8xLmRlZmF1bHQoNSwgMTIwKSwgbmV3IEVDQl8xLmRlZmF1bHQoMSwgMTIxKSksIG5ldyBFQ0Jsb2Nrc18xLmRlZmF1bHQoMjYsIG5ldyBFQ0JfMS5kZWZhdWx0KDksIDQzKSwgbmV3IEVDQl8xLmRlZmF1bHQoNCwgNDQpKSwgbmV3IEVDQmxvY2tzXzEuZGVmYXVsdCgyOCwgbmV3IEVDQl8xLmRlZmF1bHQoMTcsIDIyKSwgbmV3IEVDQl8xLmRlZmF1bHQoMSwgMjMpKSwgbmV3IEVDQmxvY2tzXzEuZGVmYXVsdCgyOCwgbmV3IEVDQl8xLmRlZmF1bHQoMiwgMTQpLCBuZXcgRUNCXzEuZGVmYXVsdCgxOSwgMTUpKSksCgkgICAgICAgIG5ldyBWZXJzaW9uKDE5LCBJbnQzMkFycmF5LmZyb20oWzYsIDMwLCA1OCwgODZdKSwgbmV3IEVDQmxvY2tzXzEuZGVmYXVsdCgyOCwgbmV3IEVDQl8xLmRlZmF1bHQoMywgMTEzKSwgbmV3IEVDQl8xLmRlZmF1bHQoNCwgMTE0KSksIG5ldyBFQ0Jsb2Nrc18xLmRlZmF1bHQoMjYsIG5ldyBFQ0JfMS5kZWZhdWx0KDMsIDQ0KSwgbmV3IEVDQl8xLmRlZmF1bHQoMTEsIDQ1KSksIG5ldyBFQ0Jsb2Nrc18xLmRlZmF1bHQoMjYsIG5ldyBFQ0JfMS5kZWZhdWx0KDE3LCAyMSksIG5ldyBFQ0JfMS5kZWZhdWx0KDQsIDIyKSksIG5ldyBFQ0Jsb2Nrc18xLmRlZmF1bHQoMjYsIG5ldyBFQ0JfMS5kZWZhdWx0KDksIDEzKSwgbmV3IEVDQl8xLmRlZmF1bHQoMTYsIDE0KSkpLAoJICAgICAgICBuZXcgVmVyc2lvbigyMCwgSW50MzJBcnJheS5mcm9tKFs2LCAzNCwgNjIsIDkwXSksIG5ldyBFQ0Jsb2Nrc18xLmRlZmF1bHQoMjgsIG5ldyBFQ0JfMS5kZWZhdWx0KDMsIDEwNyksIG5ldyBFQ0JfMS5kZWZhdWx0KDUsIDEwOCkpLCBuZXcgRUNCbG9ja3NfMS5kZWZhdWx0KDI2LCBuZXcgRUNCXzEuZGVmYXVsdCgzLCA0MSksIG5ldyBFQ0JfMS5kZWZhdWx0KDEzLCA0MikpLCBuZXcgRUNCbG9ja3NfMS5kZWZhdWx0KDMwLCBuZXcgRUNCXzEuZGVmYXVsdCgxNSwgMjQpLCBuZXcgRUNCXzEuZGVmYXVsdCg1LCAyNSkpLCBuZXcgRUNCbG9ja3NfMS5kZWZhdWx0KDI4LCBuZXcgRUNCXzEuZGVmYXVsdCgxNSwgMTUpLCBuZXcgRUNCXzEuZGVmYXVsdCgxMCwgMTYpKSksCgkgICAgICAgIG5ldyBWZXJzaW9uKDIxLCBJbnQzMkFycmF5LmZyb20oWzYsIDI4LCA1MCwgNzIsIDk0XSksIG5ldyBFQ0Jsb2Nrc18xLmRlZmF1bHQoMjgsIG5ldyBFQ0JfMS5kZWZhdWx0KDQsIDExNiksIG5ldyBFQ0JfMS5kZWZhdWx0KDQsIDExNykpLCBuZXcgRUNCbG9ja3NfMS5kZWZhdWx0KDI2LCBuZXcgRUNCXzEuZGVmYXVsdCgxNywgNDIpKSwgbmV3IEVDQmxvY2tzXzEuZGVmYXVsdCgyOCwgbmV3IEVDQl8xLmRlZmF1bHQoMTcsIDIyKSwgbmV3IEVDQl8xLmRlZmF1bHQoNiwgMjMpKSwgbmV3IEVDQmxvY2tzXzEuZGVmYXVsdCgzMCwgbmV3IEVDQl8xLmRlZmF1bHQoMTksIDE2KSwgbmV3IEVDQl8xLmRlZmF1bHQoNiwgMTcpKSksCgkgICAgICAgIG5ldyBWZXJzaW9uKDIyLCBJbnQzMkFycmF5LmZyb20oWzYsIDI2LCA1MCwgNzQsIDk4XSksIG5ldyBFQ0Jsb2Nrc18xLmRlZmF1bHQoMjgsIG5ldyBFQ0JfMS5kZWZhdWx0KDIsIDExMSksIG5ldyBFQ0JfMS5kZWZhdWx0KDcsIDExMikpLCBuZXcgRUNCbG9ja3NfMS5kZWZhdWx0KDI4LCBuZXcgRUNCXzEuZGVmYXVsdCgxNywgNDYpKSwgbmV3IEVDQmxvY2tzXzEuZGVmYXVsdCgzMCwgbmV3IEVDQl8xLmRlZmF1bHQoNywgMjQpLCBuZXcgRUNCXzEuZGVmYXVsdCgxNiwgMjUpKSwgbmV3IEVDQmxvY2tzXzEuZGVmYXVsdCgyNCwgbmV3IEVDQl8xLmRlZmF1bHQoMzQsIDEzKSkpLAoJICAgICAgICBuZXcgVmVyc2lvbigyMywgSW50MzJBcnJheS5mcm9tKFs2LCAzMCwgNTQsIDc4LCAxMDJdKSwgbmV3IEVDQmxvY2tzXzEuZGVmYXVsdCgzMCwgbmV3IEVDQl8xLmRlZmF1bHQoNCwgMTIxKSwgbmV3IEVDQl8xLmRlZmF1bHQoNSwgMTIyKSksIG5ldyBFQ0Jsb2Nrc18xLmRlZmF1bHQoMjgsIG5ldyBFQ0JfMS5kZWZhdWx0KDQsIDQ3KSwgbmV3IEVDQl8xLmRlZmF1bHQoMTQsIDQ4KSksIG5ldyBFQ0Jsb2Nrc18xLmRlZmF1bHQoMzAsIG5ldyBFQ0JfMS5kZWZhdWx0KDExLCAyNCksIG5ldyBFQ0JfMS5kZWZhdWx0KDE0LCAyNSkpLCBuZXcgRUNCbG9ja3NfMS5kZWZhdWx0KDMwLCBuZXcgRUNCXzEuZGVmYXVsdCgxNiwgMTUpLCBuZXcgRUNCXzEuZGVmYXVsdCgxNCwgMTYpKSksCgkgICAgICAgIG5ldyBWZXJzaW9uKDI0LCBJbnQzMkFycmF5LmZyb20oWzYsIDI4LCA1NCwgODAsIDEwNl0pLCBuZXcgRUNCbG9ja3NfMS5kZWZhdWx0KDMwLCBuZXcgRUNCXzEuZGVmYXVsdCg2LCAxMTcpLCBuZXcgRUNCXzEuZGVmYXVsdCg0LCAxMTgpKSwgbmV3IEVDQmxvY2tzXzEuZGVmYXVsdCgyOCwgbmV3IEVDQl8xLmRlZmF1bHQoNiwgNDUpLCBuZXcgRUNCXzEuZGVmYXVsdCgxNCwgNDYpKSwgbmV3IEVDQmxvY2tzXzEuZGVmYXVsdCgzMCwgbmV3IEVDQl8xLmRlZmF1bHQoMTEsIDI0KSwgbmV3IEVDQl8xLmRlZmF1bHQoMTYsIDI1KSksIG5ldyBFQ0Jsb2Nrc18xLmRlZmF1bHQoMzAsIG5ldyBFQ0JfMS5kZWZhdWx0KDMwLCAxNiksIG5ldyBFQ0JfMS5kZWZhdWx0KDIsIDE3KSkpLAoJICAgICAgICBuZXcgVmVyc2lvbigyNSwgSW50MzJBcnJheS5mcm9tKFs2LCAzMiwgNTgsIDg0LCAxMTBdKSwgbmV3IEVDQmxvY2tzXzEuZGVmYXVsdCgyNiwgbmV3IEVDQl8xLmRlZmF1bHQoOCwgMTA2KSwgbmV3IEVDQl8xLmRlZmF1bHQoNCwgMTA3KSksIG5ldyBFQ0Jsb2Nrc18xLmRlZmF1bHQoMjgsIG5ldyBFQ0JfMS5kZWZhdWx0KDgsIDQ3KSwgbmV3IEVDQl8xLmRlZmF1bHQoMTMsIDQ4KSksIG5ldyBFQ0Jsb2Nrc18xLmRlZmF1bHQoMzAsIG5ldyBFQ0JfMS5kZWZhdWx0KDcsIDI0KSwgbmV3IEVDQl8xLmRlZmF1bHQoMjIsIDI1KSksIG5ldyBFQ0Jsb2Nrc18xLmRlZmF1bHQoMzAsIG5ldyBFQ0JfMS5kZWZhdWx0KDIyLCAxNSksIG5ldyBFQ0JfMS5kZWZhdWx0KDEzLCAxNikpKSwKCSAgICAgICAgbmV3IFZlcnNpb24oMjYsIEludDMyQXJyYXkuZnJvbShbNiwgMzAsIDU4LCA4NiwgMTE0XSksIG5ldyBFQ0Jsb2Nrc18xLmRlZmF1bHQoMjgsIG5ldyBFQ0JfMS5kZWZhdWx0KDEwLCAxMTQpLCBuZXcgRUNCXzEuZGVmYXVsdCgyLCAxMTUpKSwgbmV3IEVDQmxvY2tzXzEuZGVmYXVsdCgyOCwgbmV3IEVDQl8xLmRlZmF1bHQoMTksIDQ2KSwgbmV3IEVDQl8xLmRlZmF1bHQoNCwgNDcpKSwgbmV3IEVDQmxvY2tzXzEuZGVmYXVsdCgyOCwgbmV3IEVDQl8xLmRlZmF1bHQoMjgsIDIyKSwgbmV3IEVDQl8xLmRlZmF1bHQoNiwgMjMpKSwgbmV3IEVDQmxvY2tzXzEuZGVmYXVsdCgzMCwgbmV3IEVDQl8xLmRlZmF1bHQoMzMsIDE2KSwgbmV3IEVDQl8xLmRlZmF1bHQoNCwgMTcpKSksCgkgICAgICAgIG5ldyBWZXJzaW9uKDI3LCBJbnQzMkFycmF5LmZyb20oWzYsIDM0LCA2MiwgOTAsIDExOF0pLCBuZXcgRUNCbG9ja3NfMS5kZWZhdWx0KDMwLCBuZXcgRUNCXzEuZGVmYXVsdCg4LCAxMjIpLCBuZXcgRUNCXzEuZGVmYXVsdCg0LCAxMjMpKSwgbmV3IEVDQmxvY2tzXzEuZGVmYXVsdCgyOCwgbmV3IEVDQl8xLmRlZmF1bHQoMjIsIDQ1KSwgbmV3IEVDQl8xLmRlZmF1bHQoMywgNDYpKSwgbmV3IEVDQmxvY2tzXzEuZGVmYXVsdCgzMCwgbmV3IEVDQl8xLmRlZmF1bHQoOCwgMjMpLCBuZXcgRUNCXzEuZGVmYXVsdCgyNiwgMjQpKSwgbmV3IEVDQmxvY2tzXzEuZGVmYXVsdCgzMCwgbmV3IEVDQl8xLmRlZmF1bHQoMTIsIDE1KSwgbmV3IEVDQl8xLmRlZmF1bHQoMjgsIDE2KSkpLAoJICAgICAgICBuZXcgVmVyc2lvbigyOCwgSW50MzJBcnJheS5mcm9tKFs2LCAyNiwgNTAsIDc0LCA5OCwgMTIyXSksIG5ldyBFQ0Jsb2Nrc18xLmRlZmF1bHQoMzAsIG5ldyBFQ0JfMS5kZWZhdWx0KDMsIDExNyksIG5ldyBFQ0JfMS5kZWZhdWx0KDEwLCAxMTgpKSwgbmV3IEVDQmxvY2tzXzEuZGVmYXVsdCgyOCwgbmV3IEVDQl8xLmRlZmF1bHQoMywgNDUpLCBuZXcgRUNCXzEuZGVmYXVsdCgyMywgNDYpKSwgbmV3IEVDQmxvY2tzXzEuZGVmYXVsdCgzMCwgbmV3IEVDQl8xLmRlZmF1bHQoNCwgMjQpLCBuZXcgRUNCXzEuZGVmYXVsdCgzMSwgMjUpKSwgbmV3IEVDQmxvY2tzXzEuZGVmYXVsdCgzMCwgbmV3IEVDQl8xLmRlZmF1bHQoMTEsIDE1KSwgbmV3IEVDQl8xLmRlZmF1bHQoMzEsIDE2KSkpLAoJICAgICAgICBuZXcgVmVyc2lvbigyOSwgSW50MzJBcnJheS5mcm9tKFs2LCAzMCwgNTQsIDc4LCAxMDIsIDEyNl0pLCBuZXcgRUNCbG9ja3NfMS5kZWZhdWx0KDMwLCBuZXcgRUNCXzEuZGVmYXVsdCg3LCAxMTYpLCBuZXcgRUNCXzEuZGVmYXVsdCg3LCAxMTcpKSwgbmV3IEVDQmxvY2tzXzEuZGVmYXVsdCgyOCwgbmV3IEVDQl8xLmRlZmF1bHQoMjEsIDQ1KSwgbmV3IEVDQl8xLmRlZmF1bHQoNywgNDYpKSwgbmV3IEVDQmxvY2tzXzEuZGVmYXVsdCgzMCwgbmV3IEVDQl8xLmRlZmF1bHQoMSwgMjMpLCBuZXcgRUNCXzEuZGVmYXVsdCgzNywgMjQpKSwgbmV3IEVDQmxvY2tzXzEuZGVmYXVsdCgzMCwgbmV3IEVDQl8xLmRlZmF1bHQoMTksIDE1KSwgbmV3IEVDQl8xLmRlZmF1bHQoMjYsIDE2KSkpLAoJICAgICAgICBuZXcgVmVyc2lvbigzMCwgSW50MzJBcnJheS5mcm9tKFs2LCAyNiwgNTIsIDc4LCAxMDQsIDEzMF0pLCBuZXcgRUNCbG9ja3NfMS5kZWZhdWx0KDMwLCBuZXcgRUNCXzEuZGVmYXVsdCg1LCAxMTUpLCBuZXcgRUNCXzEuZGVmYXVsdCgxMCwgMTE2KSksIG5ldyBFQ0Jsb2Nrc18xLmRlZmF1bHQoMjgsIG5ldyBFQ0JfMS5kZWZhdWx0KDE5LCA0NyksIG5ldyBFQ0JfMS5kZWZhdWx0KDEwLCA0OCkpLCBuZXcgRUNCbG9ja3NfMS5kZWZhdWx0KDMwLCBuZXcgRUNCXzEuZGVmYXVsdCgxNSwgMjQpLCBuZXcgRUNCXzEuZGVmYXVsdCgyNSwgMjUpKSwgbmV3IEVDQmxvY2tzXzEuZGVmYXVsdCgzMCwgbmV3IEVDQl8xLmRlZmF1bHQoMjMsIDE1KSwgbmV3IEVDQl8xLmRlZmF1bHQoMjUsIDE2KSkpLAoJICAgICAgICBuZXcgVmVyc2lvbigzMSwgSW50MzJBcnJheS5mcm9tKFs2LCAzMCwgNTYsIDgyLCAxMDgsIDEzNF0pLCBuZXcgRUNCbG9ja3NfMS5kZWZhdWx0KDMwLCBuZXcgRUNCXzEuZGVmYXVsdCgxMywgMTE1KSwgbmV3IEVDQl8xLmRlZmF1bHQoMywgMTE2KSksIG5ldyBFQ0Jsb2Nrc18xLmRlZmF1bHQoMjgsIG5ldyBFQ0JfMS5kZWZhdWx0KDIsIDQ2KSwgbmV3IEVDQl8xLmRlZmF1bHQoMjksIDQ3KSksIG5ldyBFQ0Jsb2Nrc18xLmRlZmF1bHQoMzAsIG5ldyBFQ0JfMS5kZWZhdWx0KDQyLCAyNCksIG5ldyBFQ0JfMS5kZWZhdWx0KDEsIDI1KSksIG5ldyBFQ0Jsb2Nrc18xLmRlZmF1bHQoMzAsIG5ldyBFQ0JfMS5kZWZhdWx0KDIzLCAxNSksIG5ldyBFQ0JfMS5kZWZhdWx0KDI4LCAxNikpKSwKCSAgICAgICAgbmV3IFZlcnNpb24oMzIsIEludDMyQXJyYXkuZnJvbShbNiwgMzQsIDYwLCA4NiwgMTEyLCAxMzhdKSwgbmV3IEVDQmxvY2tzXzEuZGVmYXVsdCgzMCwgbmV3IEVDQl8xLmRlZmF1bHQoMTcsIDExNSkpLCBuZXcgRUNCbG9ja3NfMS5kZWZhdWx0KDI4LCBuZXcgRUNCXzEuZGVmYXVsdCgxMCwgNDYpLCBuZXcgRUNCXzEuZGVmYXVsdCgyMywgNDcpKSwgbmV3IEVDQmxvY2tzXzEuZGVmYXVsdCgzMCwgbmV3IEVDQl8xLmRlZmF1bHQoMTAsIDI0KSwgbmV3IEVDQl8xLmRlZmF1bHQoMzUsIDI1KSksIG5ldyBFQ0Jsb2Nrc18xLmRlZmF1bHQoMzAsIG5ldyBFQ0JfMS5kZWZhdWx0KDE5LCAxNSksIG5ldyBFQ0JfMS5kZWZhdWx0KDM1LCAxNikpKSwKCSAgICAgICAgbmV3IFZlcnNpb24oMzMsIEludDMyQXJyYXkuZnJvbShbNiwgMzAsIDU4LCA4NiwgMTE0LCAxNDJdKSwgbmV3IEVDQmxvY2tzXzEuZGVmYXVsdCgzMCwgbmV3IEVDQl8xLmRlZmF1bHQoMTcsIDExNSksIG5ldyBFQ0JfMS5kZWZhdWx0KDEsIDExNikpLCBuZXcgRUNCbG9ja3NfMS5kZWZhdWx0KDI4LCBuZXcgRUNCXzEuZGVmYXVsdCgxNCwgNDYpLCBuZXcgRUNCXzEuZGVmYXVsdCgyMSwgNDcpKSwgbmV3IEVDQmxvY2tzXzEuZGVmYXVsdCgzMCwgbmV3IEVDQl8xLmRlZmF1bHQoMjksIDI0KSwgbmV3IEVDQl8xLmRlZmF1bHQoMTksIDI1KSksIG5ldyBFQ0Jsb2Nrc18xLmRlZmF1bHQoMzAsIG5ldyBFQ0JfMS5kZWZhdWx0KDExLCAxNSksIG5ldyBFQ0JfMS5kZWZhdWx0KDQ2LCAxNikpKSwKCSAgICAgICAgbmV3IFZlcnNpb24oMzQsIEludDMyQXJyYXkuZnJvbShbNiwgMzQsIDYyLCA5MCwgMTE4LCAxNDZdKSwgbmV3IEVDQmxvY2tzXzEuZGVmYXVsdCgzMCwgbmV3IEVDQl8xLmRlZmF1bHQoMTMsIDExNSksIG5ldyBFQ0JfMS5kZWZhdWx0KDYsIDExNikpLCBuZXcgRUNCbG9ja3NfMS5kZWZhdWx0KDI4LCBuZXcgRUNCXzEuZGVmYXVsdCgxNCwgNDYpLCBuZXcgRUNCXzEuZGVmYXVsdCgyMywgNDcpKSwgbmV3IEVDQmxvY2tzXzEuZGVmYXVsdCgzMCwgbmV3IEVDQl8xLmRlZmF1bHQoNDQsIDI0KSwgbmV3IEVDQl8xLmRlZmF1bHQoNywgMjUpKSwgbmV3IEVDQmxvY2tzXzEuZGVmYXVsdCgzMCwgbmV3IEVDQl8xLmRlZmF1bHQoNTksIDE2KSwgbmV3IEVDQl8xLmRlZmF1bHQoMSwgMTcpKSksCgkgICAgICAgIG5ldyBWZXJzaW9uKDM1LCBJbnQzMkFycmF5LmZyb20oWzYsIDMwLCA1NCwgNzgsIDEwMiwgMTI2LCAxNTBdKSwgbmV3IEVDQmxvY2tzXzEuZGVmYXVsdCgzMCwgbmV3IEVDQl8xLmRlZmF1bHQoMTIsIDEyMSksIG5ldyBFQ0JfMS5kZWZhdWx0KDcsIDEyMikpLCBuZXcgRUNCbG9ja3NfMS5kZWZhdWx0KDI4LCBuZXcgRUNCXzEuZGVmYXVsdCgxMiwgNDcpLCBuZXcgRUNCXzEuZGVmYXVsdCgyNiwgNDgpKSwgbmV3IEVDQmxvY2tzXzEuZGVmYXVsdCgzMCwgbmV3IEVDQl8xLmRlZmF1bHQoMzksIDI0KSwgbmV3IEVDQl8xLmRlZmF1bHQoMTQsIDI1KSksIG5ldyBFQ0Jsb2Nrc18xLmRlZmF1bHQoMzAsIG5ldyBFQ0JfMS5kZWZhdWx0KDIyLCAxNSksIG5ldyBFQ0JfMS5kZWZhdWx0KDQxLCAxNikpKSwKCSAgICAgICAgbmV3IFZlcnNpb24oMzYsIEludDMyQXJyYXkuZnJvbShbNiwgMjQsIDUwLCA3NiwgMTAyLCAxMjgsIDE1NF0pLCBuZXcgRUNCbG9ja3NfMS5kZWZhdWx0KDMwLCBuZXcgRUNCXzEuZGVmYXVsdCg2LCAxMjEpLCBuZXcgRUNCXzEuZGVmYXVsdCgxNCwgMTIyKSksIG5ldyBFQ0Jsb2Nrc18xLmRlZmF1bHQoMjgsIG5ldyBFQ0JfMS5kZWZhdWx0KDYsIDQ3KSwgbmV3IEVDQl8xLmRlZmF1bHQoMzQsIDQ4KSksIG5ldyBFQ0Jsb2Nrc18xLmRlZmF1bHQoMzAsIG5ldyBFQ0JfMS5kZWZhdWx0KDQ2LCAyNCksIG5ldyBFQ0JfMS5kZWZhdWx0KDEwLCAyNSkpLCBuZXcgRUNCbG9ja3NfMS5kZWZhdWx0KDMwLCBuZXcgRUNCXzEuZGVmYXVsdCgyLCAxNSksIG5ldyBFQ0JfMS5kZWZhdWx0KDY0LCAxNikpKSwKCSAgICAgICAgbmV3IFZlcnNpb24oMzcsIEludDMyQXJyYXkuZnJvbShbNiwgMjgsIDU0LCA4MCwgMTA2LCAxMzIsIDE1OF0pLCBuZXcgRUNCbG9ja3NfMS5kZWZhdWx0KDMwLCBuZXcgRUNCXzEuZGVmYXVsdCgxNywgMTIyKSwgbmV3IEVDQl8xLmRlZmF1bHQoNCwgMTIzKSksIG5ldyBFQ0Jsb2Nrc18xLmRlZmF1bHQoMjgsIG5ldyBFQ0JfMS5kZWZhdWx0KDI5LCA0NiksIG5ldyBFQ0JfMS5kZWZhdWx0KDE0LCA0NykpLCBuZXcgRUNCbG9ja3NfMS5kZWZhdWx0KDMwLCBuZXcgRUNCXzEuZGVmYXVsdCg0OSwgMjQpLCBuZXcgRUNCXzEuZGVmYXVsdCgxMCwgMjUpKSwgbmV3IEVDQmxvY2tzXzEuZGVmYXVsdCgzMCwgbmV3IEVDQl8xLmRlZmF1bHQoMjQsIDE1KSwgbmV3IEVDQl8xLmRlZmF1bHQoNDYsIDE2KSkpLAoJICAgICAgICBuZXcgVmVyc2lvbigzOCwgSW50MzJBcnJheS5mcm9tKFs2LCAzMiwgNTgsIDg0LCAxMTAsIDEzNiwgMTYyXSksIG5ldyBFQ0Jsb2Nrc18xLmRlZmF1bHQoMzAsIG5ldyBFQ0JfMS5kZWZhdWx0KDQsIDEyMiksIG5ldyBFQ0JfMS5kZWZhdWx0KDE4LCAxMjMpKSwgbmV3IEVDQmxvY2tzXzEuZGVmYXVsdCgyOCwgbmV3IEVDQl8xLmRlZmF1bHQoMTMsIDQ2KSwgbmV3IEVDQl8xLmRlZmF1bHQoMzIsIDQ3KSksIG5ldyBFQ0Jsb2Nrc18xLmRlZmF1bHQoMzAsIG5ldyBFQ0JfMS5kZWZhdWx0KDQ4LCAyNCksIG5ldyBFQ0JfMS5kZWZhdWx0KDE0LCAyNSkpLCBuZXcgRUNCbG9ja3NfMS5kZWZhdWx0KDMwLCBuZXcgRUNCXzEuZGVmYXVsdCg0MiwgMTUpLCBuZXcgRUNCXzEuZGVmYXVsdCgzMiwgMTYpKSksCgkgICAgICAgIG5ldyBWZXJzaW9uKDM5LCBJbnQzMkFycmF5LmZyb20oWzYsIDI2LCA1NCwgODIsIDExMCwgMTM4LCAxNjZdKSwgbmV3IEVDQmxvY2tzXzEuZGVmYXVsdCgzMCwgbmV3IEVDQl8xLmRlZmF1bHQoMjAsIDExNyksIG5ldyBFQ0JfMS5kZWZhdWx0KDQsIDExOCkpLCBuZXcgRUNCbG9ja3NfMS5kZWZhdWx0KDI4LCBuZXcgRUNCXzEuZGVmYXVsdCg0MCwgNDcpLCBuZXcgRUNCXzEuZGVmYXVsdCg3LCA0OCkpLCBuZXcgRUNCbG9ja3NfMS5kZWZhdWx0KDMwLCBuZXcgRUNCXzEuZGVmYXVsdCg0MywgMjQpLCBuZXcgRUNCXzEuZGVmYXVsdCgyMiwgMjUpKSwgbmV3IEVDQmxvY2tzXzEuZGVmYXVsdCgzMCwgbmV3IEVDQl8xLmRlZmF1bHQoMTAsIDE1KSwgbmV3IEVDQl8xLmRlZmF1bHQoNjcsIDE2KSkpLAoJICAgICAgICBuZXcgVmVyc2lvbig0MCwgSW50MzJBcnJheS5mcm9tKFs2LCAzMCwgNTgsIDg2LCAxMTQsIDE0MiwgMTcwXSksIG5ldyBFQ0Jsb2Nrc18xLmRlZmF1bHQoMzAsIG5ldyBFQ0JfMS5kZWZhdWx0KDE5LCAxMTgpLCBuZXcgRUNCXzEuZGVmYXVsdCg2LCAxMTkpKSwgbmV3IEVDQmxvY2tzXzEuZGVmYXVsdCgyOCwgbmV3IEVDQl8xLmRlZmF1bHQoMTgsIDQ3KSwgbmV3IEVDQl8xLmRlZmF1bHQoMzEsIDQ4KSksIG5ldyBFQ0Jsb2Nrc18xLmRlZmF1bHQoMzAsIG5ldyBFQ0JfMS5kZWZhdWx0KDM0LCAyNCksIG5ldyBFQ0JfMS5kZWZhdWx0KDM0LCAyNSkpLCBuZXcgRUNCbG9ja3NfMS5kZWZhdWx0KDMwLCBuZXcgRUNCXzEuZGVmYXVsdCgyMCwgMTUpLCBuZXcgRUNCXzEuZGVmYXVsdCg2MSwgMTYpKSkKCSAgICBdOwoJICAgIHJldHVybiBWZXJzaW9uOwoJfSgpKTsKCVZlcnNpb24kMS5kZWZhdWx0ID0gVmVyc2lvbjsKCgl2YXIgRGF0YU1hc2sgPSB7fTsKCgkoZnVuY3Rpb24gKGV4cG9ydHMpIHsKCS8qCgkgKiBDb3B5cmlnaHQgMjAwNyBaWGluZyBhdXRob3JzCgkgKgoJICogTGljZW5zZWQgdW5kZXIgdGhlIEFwYWNoZSBMaWNlbnNlLCBWZXJzaW9uIDIuMCAodGhlICJMaWNlbnNlIik7CgkgKiB5b3UgbWF5IG5vdCB1c2UgdGhpcyBmaWxlIGV4Y2VwdCBpbiBjb21wbGlhbmNlIHdpdGggdGhlIExpY2Vuc2UuCgkgKiBZb3UgbWF5IG9idGFpbiBhIGNvcHkgb2YgdGhlIExpY2Vuc2UgYXQKCSAqCgkgKiAgICAgIGh0dHA6Ly93d3cuYXBhY2hlLm9yZy9saWNlbnNlcy9MSUNFTlNFLTIuMAoJICoKCSAqIFVubGVzcyByZXF1aXJlZCBieSBhcHBsaWNhYmxlIGxhdyBvciBhZ3JlZWQgdG8gaW4gd3JpdGluZywgc29mdHdhcmUKCSAqIGRpc3RyaWJ1dGVkIHVuZGVyIHRoZSBMaWNlbnNlIGlzIGRpc3RyaWJ1dGVkIG9uIGFuICJBUyBJUyIgQkFTSVMsCgkgKiBXSVRIT1VUIFdBUlJBTlRJRVMgT1IgQ09ORElUSU9OUyBPRiBBTlkgS0lORCwgZWl0aGVyIGV4cHJlc3Mgb3IgaW1wbGllZC4KCSAqIFNlZSB0aGUgTGljZW5zZSBmb3IgdGhlIHNwZWNpZmljIGxhbmd1YWdlIGdvdmVybmluZyBwZXJtaXNzaW9ucyBhbmQKCSAqIGxpbWl0YXRpb25zIHVuZGVyIHRoZSBMaWNlbnNlLgoJICovCglPYmplY3QuZGVmaW5lUHJvcGVydHkoZXhwb3J0cywgIl9fZXNNb2R1bGUiLCB7IHZhbHVlOiB0cnVlIH0pOwoJZXhwb3J0cy5EYXRhTWFza1ZhbHVlcyA9IHZvaWQgMDsKCXZhciBEYXRhTWFza1ZhbHVlczsKCShmdW5jdGlvbiAoRGF0YU1hc2tWYWx1ZXMpIHsKCSAgICBEYXRhTWFza1ZhbHVlc1tEYXRhTWFza1ZhbHVlc1siREFUQV9NQVNLXzAwMCJdID0gMF0gPSAiREFUQV9NQVNLXzAwMCI7CgkgICAgRGF0YU1hc2tWYWx1ZXNbRGF0YU1hc2tWYWx1ZXNbIkRBVEFfTUFTS18wMDEiXSA9IDFdID0gIkRBVEFfTUFTS18wMDEiOwoJICAgIERhdGFNYXNrVmFsdWVzW0RhdGFNYXNrVmFsdWVzWyJEQVRBX01BU0tfMDEwIl0gPSAyXSA9ICJEQVRBX01BU0tfMDEwIjsKCSAgICBEYXRhTWFza1ZhbHVlc1tEYXRhTWFza1ZhbHVlc1siREFUQV9NQVNLXzAxMSJdID0gM10gPSAiREFUQV9NQVNLXzAxMSI7CgkgICAgRGF0YU1hc2tWYWx1ZXNbRGF0YU1hc2tWYWx1ZXNbIkRBVEFfTUFTS18xMDAiXSA9IDRdID0gIkRBVEFfTUFTS18xMDAiOwoJICAgIERhdGFNYXNrVmFsdWVzW0RhdGFNYXNrVmFsdWVzWyJEQVRBX01BU0tfMTAxIl0gPSA1XSA9ICJEQVRBX01BU0tfMTAxIjsKCSAgICBEYXRhTWFza1ZhbHVlc1tEYXRhTWFza1ZhbHVlc1siREFUQV9NQVNLXzExMCJdID0gNl0gPSAiREFUQV9NQVNLXzExMCI7CgkgICAgRGF0YU1hc2tWYWx1ZXNbRGF0YU1hc2tWYWx1ZXNbIkRBVEFfTUFTS18xMTEiXSA9IDddID0gIkRBVEFfTUFTS18xMTEiOwoJfSkoRGF0YU1hc2tWYWx1ZXMgPSBleHBvcnRzLkRhdGFNYXNrVmFsdWVzIHx8IChleHBvcnRzLkRhdGFNYXNrVmFsdWVzID0ge30pKTsKCS8qKgoJICogPHA+RW5jYXBzdWxhdGVzIGRhdGEgbWFza3MgZm9yIHRoZSBkYXRhIGJpdHMgaW4gYSBRUiBjb2RlLCBwZXIgSVNPIDE4MDA0OjIwMDYgNi44LiBJbXBsZW1lbnRhdGlvbnMKCSAqIG9mIHRoaXMgY2xhc3MgY2FuIHVuLW1hc2sgYSByYXcgQml0TWF0cml4LiBGb3Igc2ltcGxpY2l0eSwgdGhleSB3aWxsIHVubWFzayB0aGUgZW50aXJlIEJpdE1hdHJpeCwKCSAqIGluY2x1ZGluZyBhcmVhcyB1c2VkIGZvciBmaW5kZXIgcGF0dGVybnMsIHRpbWluZyBwYXR0ZXJucywgZXRjLiBUaGVzZSBhcmVhcyBzaG91bGQgYmUgdW51c2VkCgkgKiBhZnRlciB0aGUgcG9pbnQgdGhleSBhcmUgdW5tYXNrZWQgYW55d2F5LjwvcD4KCSAqCgkgKiA8cD5Ob3RlIHRoYXQgdGhlIGRpYWdyYW0gaW4gc2VjdGlvbiA2LjguMSBpcyBtaXNsZWFkaW5nIHNpbmNlIGl0IGluZGljYXRlcyB0aGF0IGkgaXMgY29sdW1uIHBvc2l0aW9uCgkgKiBhbmQgaiBpcyByb3cgcG9zaXRpb24uIEluIGZhY3QsIGFzIHRoZSB0ZXh0IHNheXMsIGkgaXMgcm93IHBvc2l0aW9uIGFuZCBqIGlzIGNvbHVtbiBwb3NpdGlvbi48L3A+CgkgKgoJICogQGF1dGhvciBTZWFuIE93ZW4KCSAqLwoJdmFyIERhdGFNYXNrID0gLyoqIEBjbGFzcyAqLyAoZnVuY3Rpb24gKCkgewoJICAgIC8vIFNlZSBJU08gMTgwMDQ6MjAwNiA2LjguMQoJICAgIGZ1bmN0aW9uIERhdGFNYXNrKHZhbHVlLCBpc01hc2tlZCkgewoJICAgICAgICB0aGlzLnZhbHVlID0gdmFsdWU7CgkgICAgICAgIHRoaXMuaXNNYXNrZWQgPSBpc01hc2tlZDsKCSAgICB9CgkgICAgLy8gRW5kIG9mIGVudW0gY29uc3RhbnRzLgoJICAgIC8qKgoJICAgICAqIDxwPkltcGxlbWVudGF0aW9ucyBvZiB0aGlzIG1ldGhvZCByZXZlcnNlIHRoZSBkYXRhIG1hc2tpbmcgcHJvY2VzcyBhcHBsaWVkIHRvIGEgUVIgQ29kZSBhbmQKCSAgICAgKiBtYWtlIGl0cyBiaXRzIHJlYWR5IHRvIHJlYWQuPC9wPgoJICAgICAqCgkgICAgICogQHBhcmFtIGJpdHMgcmVwcmVzZW50YXRpb24gb2YgUVIgQ29kZSBiaXRzCgkgICAgICogQHBhcmFtIGRpbWVuc2lvbiBkaW1lbnNpb24gb2YgUVIgQ29kZSwgcmVwcmVzZW50ZWQgYnkgYml0cywgYmVpbmcgdW5tYXNrZWQKCSAgICAgKi8KCSAgICBEYXRhTWFzay5wcm90b3R5cGUudW5tYXNrQml0TWF0cml4ID0gZnVuY3Rpb24gKGJpdHMsIGRpbWVuc2lvbiAvKmludCovKSB7CgkgICAgICAgIGZvciAodmFyIGkgPSAwOyBpIDwgZGltZW5zaW9uOyBpKyspIHsKCSAgICAgICAgICAgIGZvciAodmFyIGogPSAwOyBqIDwgZGltZW5zaW9uOyBqKyspIHsKCSAgICAgICAgICAgICAgICBpZiAodGhpcy5pc01hc2tlZChpLCBqKSkgewoJICAgICAgICAgICAgICAgICAgICBiaXRzLmZsaXAoaiwgaSk7CgkgICAgICAgICAgICAgICAgfQoJICAgICAgICAgICAgfQoJICAgICAgICB9CgkgICAgfTsKCSAgICBEYXRhTWFzay52YWx1ZXMgPSBuZXcgTWFwKFsKCSAgICAgICAgLyoqCgkgICAgICAgICAqIDAwMDogbWFzayBiaXRzIGZvciB3aGljaCAoeCArIHkpIG1vZCAyID09IDAKCSAgICAgICAgICovCgkgICAgICAgIFtEYXRhTWFza1ZhbHVlcy5EQVRBX01BU0tfMDAwLCBuZXcgRGF0YU1hc2soRGF0YU1hc2tWYWx1ZXMuREFUQV9NQVNLXzAwMCwgZnVuY3Rpb24gKGkgLyppbnQqLywgaiAvKmludCovKSB7IHJldHVybiAoKGkgKyBqKSAmIDB4MDEpID09PSAwOyB9KV0sCgkgICAgICAgIC8qKgoJICAgICAgICAgKiAwMDE6IG1hc2sgYml0cyBmb3Igd2hpY2ggeCBtb2QgMiA9PSAwCgkgICAgICAgICAqLwoJICAgICAgICBbRGF0YU1hc2tWYWx1ZXMuREFUQV9NQVNLXzAwMSwgbmV3IERhdGFNYXNrKERhdGFNYXNrVmFsdWVzLkRBVEFfTUFTS18wMDEsIGZ1bmN0aW9uIChpIC8qaW50Ki8sIGogLyppbnQqLykgeyByZXR1cm4gKGkgJiAweDAxKSA9PT0gMDsgfSldLAoJICAgICAgICAvKioKCSAgICAgICAgICogMDEwOiBtYXNrIGJpdHMgZm9yIHdoaWNoIHkgbW9kIDMgPT0gMAoJICAgICAgICAgKi8KCSAgICAgICAgW0RhdGFNYXNrVmFsdWVzLkRBVEFfTUFTS18wMTAsIG5ldyBEYXRhTWFzayhEYXRhTWFza1ZhbHVlcy5EQVRBX01BU0tfMDEwLCBmdW5jdGlvbiAoaSAvKmludCovLCBqIC8qaW50Ki8pIHsgcmV0dXJuIGogJSAzID09PSAwOyB9KV0sCgkgICAgICAgIC8qKgoJICAgICAgICAgKiAwMTE6IG1hc2sgYml0cyBmb3Igd2hpY2ggKHggKyB5KSBtb2QgMyA9PSAwCgkgICAgICAgICAqLwoJICAgICAgICBbRGF0YU1hc2tWYWx1ZXMuREFUQV9NQVNLXzAxMSwgbmV3IERhdGFNYXNrKERhdGFNYXNrVmFsdWVzLkRBVEFfTUFTS18wMTEsIGZ1bmN0aW9uIChpIC8qaW50Ki8sIGogLyppbnQqLykgeyByZXR1cm4gKGkgKyBqKSAlIDMgPT09IDA7IH0pXSwKCSAgICAgICAgLyoqCgkgICAgICAgICAqIDEwMDogbWFzayBiaXRzIGZvciB3aGljaCAoeC8yICsgeS8zKSBtb2QgMiA9PSAwCgkgICAgICAgICAqLwoJICAgICAgICBbRGF0YU1hc2tWYWx1ZXMuREFUQV9NQVNLXzEwMCwgbmV3IERhdGFNYXNrKERhdGFNYXNrVmFsdWVzLkRBVEFfTUFTS18xMDAsIGZ1bmN0aW9uIChpIC8qaW50Ki8sIGogLyppbnQqLykgeyByZXR1cm4gKChNYXRoLmZsb29yKGkgLyAyKSArIE1hdGguZmxvb3IoaiAvIDMpKSAmIDB4MDEpID09PSAwOyB9KV0sCgkgICAgICAgIC8qKgoJICAgICAgICAgKiAxMDE6IG1hc2sgYml0cyBmb3Igd2hpY2ggeHkgbW9kIDIgKyB4eSBtb2QgMyA9PSAwCgkgICAgICAgICAqIGVxdWl2YWxlbnRseSwgc3VjaCB0aGF0IHh5IG1vZCA2ID09IDAKCSAgICAgICAgICovCgkgICAgICAgIFtEYXRhTWFza1ZhbHVlcy5EQVRBX01BU0tfMTAxLCBuZXcgRGF0YU1hc2soRGF0YU1hc2tWYWx1ZXMuREFUQV9NQVNLXzEwMSwgZnVuY3Rpb24gKGkgLyppbnQqLywgaiAvKmludCovKSB7IHJldHVybiAoaSAqIGopICUgNiA9PT0gMDsgfSldLAoJICAgICAgICAvKioKCSAgICAgICAgICogMTEwOiBtYXNrIGJpdHMgZm9yIHdoaWNoICh4eSBtb2QgMiArIHh5IG1vZCAzKSBtb2QgMiA9PSAwCgkgICAgICAgICAqIGVxdWl2YWxlbnRseSwgc3VjaCB0aGF0IHh5IG1vZCA2IDwgMwoJICAgICAgICAgKi8KCSAgICAgICAgW0RhdGFNYXNrVmFsdWVzLkRBVEFfTUFTS18xMTAsIG5ldyBEYXRhTWFzayhEYXRhTWFza1ZhbHVlcy5EQVRBX01BU0tfMTEwLCBmdW5jdGlvbiAoaSAvKmludCovLCBqIC8qaW50Ki8pIHsgcmV0dXJuICgoaSAqIGopICUgNikgPCAzOyB9KV0sCgkgICAgICAgIC8qKgoJICAgICAgICAgKiAxMTE6IG1hc2sgYml0cyBmb3Igd2hpY2ggKCh4K3kpbW9kIDIgKyB4eSBtb2QgMykgbW9kIDIgPT0gMAoJICAgICAgICAgKiBlcXVpdmFsZW50bHksIHN1Y2ggdGhhdCAoeCArIHkgKyB4eSBtb2QgMykgbW9kIDIgPT0gMAoJICAgICAgICAgKi8KCSAgICAgICAgW0RhdGFNYXNrVmFsdWVzLkRBVEFfTUFTS18xMTEsIG5ldyBEYXRhTWFzayhEYXRhTWFza1ZhbHVlcy5EQVRBX01BU0tfMTExLCBmdW5jdGlvbiAoaSAvKmludCovLCBqIC8qaW50Ki8pIHsgcmV0dXJuICgoaSArIGogKyAoKGkgKiBqKSAlIDMpKSAmIDB4MDEpID09PSAwOyB9KV0sCgkgICAgXSk7CgkgICAgcmV0dXJuIERhdGFNYXNrOwoJfSgpKTsKCWV4cG9ydHMuZGVmYXVsdCA9IERhdGFNYXNrOwoKCX0oRGF0YU1hc2spKTsKCgkvKgoJICogQ29weXJpZ2h0IDIwMDcgWlhpbmcgYXV0aG9ycwoJICoKCSAqIExpY2Vuc2VkIHVuZGVyIHRoZSBBcGFjaGUgTGljZW5zZSwgVmVyc2lvbiAyLjAgKHRoZSAiTGljZW5zZSIpOwoJICogeW91IG1heSBub3QgdXNlIHRoaXMgZmlsZSBleGNlcHQgaW4gY29tcGxpYW5jZSB3aXRoIHRoZSBMaWNlbnNlLgoJICogWW91IG1heSBvYnRhaW4gYSBjb3B5IG9mIHRoZSBMaWNlbnNlIGF0CgkgKgoJICogICAgICBodHRwOi8vd3d3LmFwYWNoZS5vcmcvbGljZW5zZXMvTElDRU5TRS0yLjAKCSAqCgkgKiBVbmxlc3MgcmVxdWlyZWQgYnkgYXBwbGljYWJsZSBsYXcgb3IgYWdyZWVkIHRvIGluIHdyaXRpbmcsIHNvZnR3YXJlCgkgKiBkaXN0cmlidXRlZCB1bmRlciB0aGUgTGljZW5zZSBpcyBkaXN0cmlidXRlZCBvbiBhbiAiQVMgSVMiIEJBU0lTLAoJICogV0lUSE9VVCBXQVJSQU5USUVTIE9SIENPTkRJVElPTlMgT0YgQU5ZIEtJTkQsIGVpdGhlciBleHByZXNzIG9yIGltcGxpZWQuCgkgKiBTZWUgdGhlIExpY2Vuc2UgZm9yIHRoZSBzcGVjaWZpYyBsYW5ndWFnZSBnb3Zlcm5pbmcgcGVybWlzc2lvbnMgYW5kCgkgKiBsaW1pdGF0aW9ucyB1bmRlciB0aGUgTGljZW5zZS4KCSAqLwoJT2JqZWN0LmRlZmluZVByb3BlcnR5KEJpdE1hdHJpeFBhcnNlciQxLCAiX19lc01vZHVsZSIsIHsgdmFsdWU6IHRydWUgfSk7Cgl2YXIgVmVyc2lvbl8xJDEgPSBWZXJzaW9uJDE7Cgl2YXIgRm9ybWF0SW5mb3JtYXRpb25fMSA9IEZvcm1hdEluZm9ybWF0aW9uJDE7Cgl2YXIgRGF0YU1hc2tfMSA9IERhdGFNYXNrOwoJdmFyIEZvcm1hdEV4Y2VwdGlvbl8xJDEgPSBGb3JtYXRFeGNlcHRpb24kMTsKCS8qKgoJICogQGF1dGhvciBTZWFuIE93ZW4KCSAqLwoJdmFyIEJpdE1hdHJpeFBhcnNlciA9IC8qKiBAY2xhc3MgKi8gKGZ1bmN0aW9uICgpIHsKCSAgICAvKioKCSAgICAgKiBAcGFyYW0gYml0TWF0cml4IHtAbGluayBCaXRNYXRyaXh9IHRvIHBhcnNlCgkgICAgICogQHRocm93cyBGb3JtYXRFeGNlcHRpb24gaWYgZGltZW5zaW9uIGlzIG5vdCA+PSAyMSBhbmQgMSBtb2QgNAoJICAgICAqLwoJICAgIGZ1bmN0aW9uIEJpdE1hdHJpeFBhcnNlcihiaXRNYXRyaXgpIHsKCSAgICAgICAgdmFyIGRpbWVuc2lvbiA9IGJpdE1hdHJpeC5nZXRIZWlnaHQoKTsKCSAgICAgICAgaWYgKGRpbWVuc2lvbiA8IDIxIHx8IChkaW1lbnNpb24gJiAweDAzKSAhPT0gMSkgewoJICAgICAgICAgICAgdGhyb3cgbmV3IEZvcm1hdEV4Y2VwdGlvbl8xJDEuZGVmYXVsdCgpOwoJICAgICAgICB9CgkgICAgICAgIHRoaXMuYml0TWF0cml4ID0gYml0TWF0cml4OwoJICAgIH0KCSAgICAvKioKCSAgICAgKiA8cD5SZWFkcyBmb3JtYXQgaW5mb3JtYXRpb24gZnJvbSBvbmUgb2YgaXRzIHR3byBsb2NhdGlvbnMgd2l0aGluIHRoZSBRUiBDb2RlLjwvcD4KCSAgICAgKgoJICAgICAqIEByZXR1cm4ge0BsaW5rIEZvcm1hdEluZm9ybWF0aW9ufSBlbmNhcHN1bGF0aW5nIHRoZSBRUiBDb2RlJ3MgZm9ybWF0IGluZm8KCSAgICAgKiBAdGhyb3dzIEZvcm1hdEV4Y2VwdGlvbiBpZiBib3RoIGZvcm1hdCBpbmZvcm1hdGlvbiBsb2NhdGlvbnMgY2Fubm90IGJlIHBhcnNlZCBhcwoJICAgICAqIHRoZSB2YWxpZCBlbmNvZGluZyBvZiBmb3JtYXQgaW5mb3JtYXRpb24KCSAgICAgKi8KCSAgICBCaXRNYXRyaXhQYXJzZXIucHJvdG90eXBlLnJlYWRGb3JtYXRJbmZvcm1hdGlvbiA9IGZ1bmN0aW9uICgpIHsKCSAgICAgICAgaWYgKHRoaXMucGFyc2VkRm9ybWF0SW5mbyAhPT0gbnVsbCAmJiB0aGlzLnBhcnNlZEZvcm1hdEluZm8gIT09IHVuZGVmaW5lZCkgewoJICAgICAgICAgICAgcmV0dXJuIHRoaXMucGFyc2VkRm9ybWF0SW5mbzsKCSAgICAgICAgfQoJICAgICAgICAvLyBSZWFkIHRvcC1sZWZ0IGZvcm1hdCBpbmZvIGJpdHMKCSAgICAgICAgdmFyIGZvcm1hdEluZm9CaXRzMSA9IDA7CgkgICAgICAgIGZvciAodmFyIGkgPSAwOyBpIDwgNjsgaSsrKSB7CgkgICAgICAgICAgICBmb3JtYXRJbmZvQml0czEgPSB0aGlzLmNvcHlCaXQoaSwgOCwgZm9ybWF0SW5mb0JpdHMxKTsKCSAgICAgICAgfQoJICAgICAgICAvLyAuLiBhbmQgc2tpcCBhIGJpdCBpbiB0aGUgdGltaW5nIHBhdHRlcm4gLi4uCgkgICAgICAgIGZvcm1hdEluZm9CaXRzMSA9IHRoaXMuY29weUJpdCg3LCA4LCBmb3JtYXRJbmZvQml0czEpOwoJICAgICAgICBmb3JtYXRJbmZvQml0czEgPSB0aGlzLmNvcHlCaXQoOCwgOCwgZm9ybWF0SW5mb0JpdHMxKTsKCSAgICAgICAgZm9ybWF0SW5mb0JpdHMxID0gdGhpcy5jb3B5Qml0KDgsIDcsIGZvcm1hdEluZm9CaXRzMSk7CgkgICAgICAgIC8vIC4uIGFuZCBza2lwIGEgYml0IGluIHRoZSB0aW1pbmcgcGF0dGVybiAuLi4KCSAgICAgICAgZm9yICh2YXIgaiA9IDU7IGogPj0gMDsgai0tKSB7CgkgICAgICAgICAgICBmb3JtYXRJbmZvQml0czEgPSB0aGlzLmNvcHlCaXQoOCwgaiwgZm9ybWF0SW5mb0JpdHMxKTsKCSAgICAgICAgfQoJICAgICAgICAvLyBSZWFkIHRoZSB0b3AtcmlnaHQvYm90dG9tLWxlZnQgcGF0dGVybiB0b28KCSAgICAgICAgdmFyIGRpbWVuc2lvbiA9IHRoaXMuYml0TWF0cml4LmdldEhlaWdodCgpOwoJICAgICAgICB2YXIgZm9ybWF0SW5mb0JpdHMyID0gMDsKCSAgICAgICAgdmFyIGpNaW4gPSBkaW1lbnNpb24gLSA3OwoJICAgICAgICBmb3IgKHZhciBqID0gZGltZW5zaW9uIC0gMTsgaiA+PSBqTWluOyBqLS0pIHsKCSAgICAgICAgICAgIGZvcm1hdEluZm9CaXRzMiA9IHRoaXMuY29weUJpdCg4LCBqLCBmb3JtYXRJbmZvQml0czIpOwoJICAgICAgICB9CgkgICAgICAgIGZvciAodmFyIGkgPSBkaW1lbnNpb24gLSA4OyBpIDwgZGltZW5zaW9uOyBpKyspIHsKCSAgICAgICAgICAgIGZvcm1hdEluZm9CaXRzMiA9IHRoaXMuY29weUJpdChpLCA4LCBmb3JtYXRJbmZvQml0czIpOwoJICAgICAgICB9CgkgICAgICAgIHRoaXMucGFyc2VkRm9ybWF0SW5mbyA9IEZvcm1hdEluZm9ybWF0aW9uXzEuZGVmYXVsdC5kZWNvZGVGb3JtYXRJbmZvcm1hdGlvbihmb3JtYXRJbmZvQml0czEsIGZvcm1hdEluZm9CaXRzMik7CgkgICAgICAgIGlmICh0aGlzLnBhcnNlZEZvcm1hdEluZm8gIT09IG51bGwpIHsKCSAgICAgICAgICAgIHJldHVybiB0aGlzLnBhcnNlZEZvcm1hdEluZm87CgkgICAgICAgIH0KCSAgICAgICAgdGhyb3cgbmV3IEZvcm1hdEV4Y2VwdGlvbl8xJDEuZGVmYXVsdCgpOwoJICAgIH07CgkgICAgLyoqCgkgICAgICogPHA+UmVhZHMgdmVyc2lvbiBpbmZvcm1hdGlvbiBmcm9tIG9uZSBvZiBpdHMgdHdvIGxvY2F0aW9ucyB3aXRoaW4gdGhlIFFSIENvZGUuPC9wPgoJICAgICAqCgkgICAgICogQHJldHVybiB7QGxpbmsgVmVyc2lvbn0gZW5jYXBzdWxhdGluZyB0aGUgUVIgQ29kZSdzIHZlcnNpb24KCSAgICAgKiBAdGhyb3dzIEZvcm1hdEV4Y2VwdGlvbiBpZiBib3RoIHZlcnNpb24gaW5mb3JtYXRpb24gbG9jYXRpb25zIGNhbm5vdCBiZSBwYXJzZWQgYXMKCSAgICAgKiB0aGUgdmFsaWQgZW5jb2Rpbmcgb2YgdmVyc2lvbiBpbmZvcm1hdGlvbgoJICAgICAqLwoJICAgIEJpdE1hdHJpeFBhcnNlci5wcm90b3R5cGUucmVhZFZlcnNpb24gPSBmdW5jdGlvbiAoKSB7CgkgICAgICAgIGlmICh0aGlzLnBhcnNlZFZlcnNpb24gIT09IG51bGwgJiYgdGhpcy5wYXJzZWRWZXJzaW9uICE9PSB1bmRlZmluZWQpIHsKCSAgICAgICAgICAgIHJldHVybiB0aGlzLnBhcnNlZFZlcnNpb247CgkgICAgICAgIH0KCSAgICAgICAgdmFyIGRpbWVuc2lvbiA9IHRoaXMuYml0TWF0cml4LmdldEhlaWdodCgpOwoJICAgICAgICB2YXIgcHJvdmlzaW9uYWxWZXJzaW9uID0gTWF0aC5mbG9vcigoZGltZW5zaW9uIC0gMTcpIC8gNCk7CgkgICAgICAgIGlmIChwcm92aXNpb25hbFZlcnNpb24gPD0gNikgewoJICAgICAgICAgICAgcmV0dXJuIFZlcnNpb25fMSQxLmRlZmF1bHQuZ2V0VmVyc2lvbkZvck51bWJlcihwcm92aXNpb25hbFZlcnNpb24pOwoJICAgICAgICB9CgkgICAgICAgIC8vIFJlYWQgdG9wLXJpZ2h0IHZlcnNpb24gaW5mbzogMyB3aWRlIGJ5IDYgdGFsbAoJICAgICAgICB2YXIgdmVyc2lvbkJpdHMgPSAwOwoJICAgICAgICB2YXIgaWpNaW4gPSBkaW1lbnNpb24gLSAxMTsKCSAgICAgICAgZm9yICh2YXIgaiA9IDU7IGogPj0gMDsgai0tKSB7CgkgICAgICAgICAgICBmb3IgKHZhciBpID0gZGltZW5zaW9uIC0gOTsgaSA+PSBpak1pbjsgaS0tKSB7CgkgICAgICAgICAgICAgICAgdmVyc2lvbkJpdHMgPSB0aGlzLmNvcHlCaXQoaSwgaiwgdmVyc2lvbkJpdHMpOwoJICAgICAgICAgICAgfQoJICAgICAgICB9CgkgICAgICAgIHZhciB0aGVQYXJzZWRWZXJzaW9uID0gVmVyc2lvbl8xJDEuZGVmYXVsdC5kZWNvZGVWZXJzaW9uSW5mb3JtYXRpb24odmVyc2lvbkJpdHMpOwoJICAgICAgICBpZiAodGhlUGFyc2VkVmVyc2lvbiAhPT0gbnVsbCAmJiB0aGVQYXJzZWRWZXJzaW9uLmdldERpbWVuc2lvbkZvclZlcnNpb24oKSA9PT0gZGltZW5zaW9uKSB7CgkgICAgICAgICAgICB0aGlzLnBhcnNlZFZlcnNpb24gPSB0aGVQYXJzZWRWZXJzaW9uOwoJICAgICAgICAgICAgcmV0dXJuIHRoZVBhcnNlZFZlcnNpb247CgkgICAgICAgIH0KCSAgICAgICAgLy8gSG1tLCBmYWlsZWQuIFRyeSBib3R0b20gbGVmdDogNiB3aWRlIGJ5IDMgdGFsbAoJICAgICAgICB2ZXJzaW9uQml0cyA9IDA7CgkgICAgICAgIGZvciAodmFyIGkgPSA1OyBpID49IDA7IGktLSkgewoJICAgICAgICAgICAgZm9yICh2YXIgaiA9IGRpbWVuc2lvbiAtIDk7IGogPj0gaWpNaW47IGotLSkgewoJICAgICAgICAgICAgICAgIHZlcnNpb25CaXRzID0gdGhpcy5jb3B5Qml0KGksIGosIHZlcnNpb25CaXRzKTsKCSAgICAgICAgICAgIH0KCSAgICAgICAgfQoJICAgICAgICB0aGVQYXJzZWRWZXJzaW9uID0gVmVyc2lvbl8xJDEuZGVmYXVsdC5kZWNvZGVWZXJzaW9uSW5mb3JtYXRpb24odmVyc2lvbkJpdHMpOwoJICAgICAgICBpZiAodGhlUGFyc2VkVmVyc2lvbiAhPT0gbnVsbCAmJiB0aGVQYXJzZWRWZXJzaW9uLmdldERpbWVuc2lvbkZvclZlcnNpb24oKSA9PT0gZGltZW5zaW9uKSB7CgkgICAgICAgICAgICB0aGlzLnBhcnNlZFZlcnNpb24gPSB0aGVQYXJzZWRWZXJzaW9uOwoJICAgICAgICAgICAgcmV0dXJuIHRoZVBhcnNlZFZlcnNpb247CgkgICAgICAgIH0KCSAgICAgICAgdGhyb3cgbmV3IEZvcm1hdEV4Y2VwdGlvbl8xJDEuZGVmYXVsdCgpOwoJICAgIH07CgkgICAgQml0TWF0cml4UGFyc2VyLnByb3RvdHlwZS5jb3B5Qml0ID0gZnVuY3Rpb24gKGkgLyppbnQqLywgaiAvKmludCovLCB2ZXJzaW9uQml0cyAvKmludCovKSB7CgkgICAgICAgIHZhciBiaXQgPSB0aGlzLmlzTWlycm9yID8gdGhpcy5iaXRNYXRyaXguZ2V0KGosIGkpIDogdGhpcy5iaXRNYXRyaXguZ2V0KGksIGopOwoJICAgICAgICByZXR1cm4gYml0ID8gKHZlcnNpb25CaXRzIDw8IDEpIHwgMHgxIDogdmVyc2lvbkJpdHMgPDwgMTsKCSAgICB9OwoJICAgIC8qKgoJICAgICAqIDxwPlJlYWRzIHRoZSBiaXRzIGluIHRoZSB7QGxpbmsgQml0TWF0cml4fSByZXByZXNlbnRpbmcgdGhlIGZpbmRlciBwYXR0ZXJuIGluIHRoZQoJICAgICAqIGNvcnJlY3Qgb3JkZXIgaW4gb3JkZXIgdG8gcmVjb25zdHJ1Y3QgdGhlIGNvZGV3b3JkcyBieXRlcyBjb250YWluZWQgd2l0aGluIHRoZQoJICAgICAqIFFSIENvZGUuPC9wPgoJICAgICAqCgkgICAgICogQHJldHVybiBieXRlcyBlbmNvZGVkIHdpdGhpbiB0aGUgUVIgQ29kZQoJICAgICAqIEB0aHJvd3MgRm9ybWF0RXhjZXB0aW9uIGlmIHRoZSBleGFjdCBudW1iZXIgb2YgYnl0ZXMgZXhwZWN0ZWQgaXMgbm90IHJlYWQKCSAgICAgKi8KCSAgICBCaXRNYXRyaXhQYXJzZXIucHJvdG90eXBlLnJlYWRDb2Rld29yZHMgPSBmdW5jdGlvbiAoKSB7CgkgICAgICAgIHZhciBmb3JtYXRJbmZvID0gdGhpcy5yZWFkRm9ybWF0SW5mb3JtYXRpb24oKTsKCSAgICAgICAgdmFyIHZlcnNpb24gPSB0aGlzLnJlYWRWZXJzaW9uKCk7CgkgICAgICAgIC8vIEdldCB0aGUgZGF0YSBtYXNrIGZvciB0aGUgZm9ybWF0IHVzZWQgaW4gdGhpcyBRUiBDb2RlLiBUaGlzIHdpbGwgZXhjbHVkZQoJICAgICAgICAvLyBzb21lIGJpdHMgZnJvbSByZWFkaW5nIGFzIHdlIHdpbmQgdGhyb3VnaCB0aGUgYml0IG1hdHJpeC4KCSAgICAgICAgdmFyIGRhdGFNYXNrID0gRGF0YU1hc2tfMS5kZWZhdWx0LnZhbHVlcy5nZXQoZm9ybWF0SW5mby5nZXREYXRhTWFzaygpKTsKCSAgICAgICAgdmFyIGRpbWVuc2lvbiA9IHRoaXMuYml0TWF0cml4LmdldEhlaWdodCgpOwoJICAgICAgICBkYXRhTWFzay51bm1hc2tCaXRNYXRyaXgodGhpcy5iaXRNYXRyaXgsIGRpbWVuc2lvbik7CgkgICAgICAgIHZhciBmdW5jdGlvblBhdHRlcm4gPSB2ZXJzaW9uLmJ1aWxkRnVuY3Rpb25QYXR0ZXJuKCk7CgkgICAgICAgIHZhciByZWFkaW5nVXAgPSB0cnVlOwoJICAgICAgICB2YXIgcmVzdWx0ID0gbmV3IFVpbnQ4QXJyYXkodmVyc2lvbi5nZXRUb3RhbENvZGV3b3JkcygpKTsKCSAgICAgICAgdmFyIHJlc3VsdE9mZnNldCA9IDA7CgkgICAgICAgIHZhciBjdXJyZW50Qnl0ZSA9IDA7CgkgICAgICAgIHZhciBiaXRzUmVhZCA9IDA7CgkgICAgICAgIC8vIFJlYWQgY29sdW1ucyBpbiBwYWlycywgZnJvbSByaWdodCB0byBsZWZ0CgkgICAgICAgIGZvciAodmFyIGogPSBkaW1lbnNpb24gLSAxOyBqID4gMDsgaiAtPSAyKSB7CgkgICAgICAgICAgICBpZiAoaiA9PT0gNikgewoJICAgICAgICAgICAgICAgIC8vIFNraXAgd2hvbGUgY29sdW1uIHdpdGggdmVydGljYWwgYWxpZ25tZW50IHBhdHRlcm4KCSAgICAgICAgICAgICAgICAvLyBzYXZlcyB0aW1lIGFuZCBtYWtlcyB0aGUgb3RoZXIgY29kZSBwcm9jZWVkIG1vcmUgY2xlYW5seQoJICAgICAgICAgICAgICAgIGotLTsKCSAgICAgICAgICAgIH0KCSAgICAgICAgICAgIC8vIFJlYWQgYWx0ZXJuYXRpbmdseSBmcm9tIGJvdHRvbSB0byB0b3AgdGhlbiB0b3AgdG8gYm90dG9tCgkgICAgICAgICAgICBmb3IgKHZhciBjb3VudCA9IDA7IGNvdW50IDwgZGltZW5zaW9uOyBjb3VudCsrKSB7CgkgICAgICAgICAgICAgICAgdmFyIGkgPSByZWFkaW5nVXAgPyBkaW1lbnNpb24gLSAxIC0gY291bnQgOiBjb3VudDsKCSAgICAgICAgICAgICAgICBmb3IgKHZhciBjb2wgPSAwOyBjb2wgPCAyOyBjb2wrKykgewoJICAgICAgICAgICAgICAgICAgICAvLyBJZ25vcmUgYml0cyBjb3ZlcmVkIGJ5IHRoZSBmdW5jdGlvbiBwYXR0ZXJuCgkgICAgICAgICAgICAgICAgICAgIGlmICghZnVuY3Rpb25QYXR0ZXJuLmdldChqIC0gY29sLCBpKSkgewoJICAgICAgICAgICAgICAgICAgICAgICAgLy8gUmVhZCBhIGJpdAoJICAgICAgICAgICAgICAgICAgICAgICAgYml0c1JlYWQrKzsKCSAgICAgICAgICAgICAgICAgICAgICAgIGN1cnJlbnRCeXRlIDw8PSAxOwoJICAgICAgICAgICAgICAgICAgICAgICAgaWYgKHRoaXMuYml0TWF0cml4LmdldChqIC0gY29sLCBpKSkgewoJICAgICAgICAgICAgICAgICAgICAgICAgICAgIGN1cnJlbnRCeXRlIHw9IDE7CgkgICAgICAgICAgICAgICAgICAgICAgICB9CgkgICAgICAgICAgICAgICAgICAgICAgICAvLyBJZiB3ZSd2ZSBtYWRlIGEgd2hvbGUgYnl0ZSwgc2F2ZSBpdCBvZmYKCSAgICAgICAgICAgICAgICAgICAgICAgIGlmIChiaXRzUmVhZCA9PT0gOCkgewoJICAgICAgICAgICAgICAgICAgICAgICAgICAgIHJlc3VsdFtyZXN1bHRPZmZzZXQrK10gPSAvKihieXRlKSAqLyBjdXJyZW50Qnl0ZTsKCSAgICAgICAgICAgICAgICAgICAgICAgICAgICBiaXRzUmVhZCA9IDA7CgkgICAgICAgICAgICAgICAgICAgICAgICAgICAgY3VycmVudEJ5dGUgPSAwOwoJICAgICAgICAgICAgICAgICAgICAgICAgfQoJICAgICAgICAgICAgICAgICAgICB9CgkgICAgICAgICAgICAgICAgfQoJICAgICAgICAgICAgfQoJICAgICAgICAgICAgcmVhZGluZ1VwID0gIXJlYWRpbmdVcDsgLy8gcmVhZGluZ1VwIF49IHRydWU7IC8vIHJlYWRpbmdVcCA9ICFyZWFkaW5nVXA7IC8vIHN3aXRjaCBkaXJlY3Rpb25zCgkgICAgICAgIH0KCSAgICAgICAgaWYgKHJlc3VsdE9mZnNldCAhPT0gdmVyc2lvbi5nZXRUb3RhbENvZGV3b3JkcygpKSB7CgkgICAgICAgICAgICB0aHJvdyBuZXcgRm9ybWF0RXhjZXB0aW9uXzEkMS5kZWZhdWx0KCk7CgkgICAgICAgIH0KCSAgICAgICAgcmV0dXJuIHJlc3VsdDsKCSAgICB9OwoJICAgIC8qKgoJICAgICAqIFJldmVydCB0aGUgbWFzayByZW1vdmFsIGRvbmUgd2hpbGUgcmVhZGluZyB0aGUgY29kZSB3b3Jkcy4gVGhlIGJpdCBtYXRyaXggc2hvdWxkIHJldmVydCB0byBpdHMgb3JpZ2luYWwgc3RhdGUuCgkgICAgICovCgkgICAgQml0TWF0cml4UGFyc2VyLnByb3RvdHlwZS5yZW1hc2sgPSBmdW5jdGlvbiAoKSB7CgkgICAgICAgIGlmICh0aGlzLnBhcnNlZEZvcm1hdEluZm8gPT09IG51bGwpIHsKCSAgICAgICAgICAgIHJldHVybjsgLy8gV2UgaGF2ZSBubyBmb3JtYXQgaW5mb3JtYXRpb24sIGFuZCBoYXZlIG5vIGRhdGEgbWFzawoJICAgICAgICB9CgkgICAgICAgIHZhciBkYXRhTWFzayA9IERhdGFNYXNrXzEuZGVmYXVsdC52YWx1ZXNbdGhpcy5wYXJzZWRGb3JtYXRJbmZvLmdldERhdGFNYXNrKCldOwoJICAgICAgICB2YXIgZGltZW5zaW9uID0gdGhpcy5iaXRNYXRyaXguZ2V0SGVpZ2h0KCk7CgkgICAgICAgIGRhdGFNYXNrLnVubWFza0JpdE1hdHJpeCh0aGlzLmJpdE1hdHJpeCwgZGltZW5zaW9uKTsKCSAgICB9OwoJICAgIC8qKgoJICAgICAqIFByZXBhcmUgdGhlIHBhcnNlciBmb3IgYSBtaXJyb3JlZCBvcGVyYXRpb24uCgkgICAgICogVGhpcyBmbGFnIGhhcyBlZmZlY3Qgb25seSBvbiB0aGUge0BsaW5rICNyZWFkRm9ybWF0SW5mb3JtYXRpb24oKX0gYW5kIHRoZQoJICAgICAqIHtAbGluayAjcmVhZFZlcnNpb24oKX0uIEJlZm9yZSBwcm9jZWVkaW5nIHdpdGgge0BsaW5rICNyZWFkQ29kZXdvcmRzKCl9IHRoZQoJICAgICAqIHtAbGluayAjbWlycm9yKCl9IG1ldGhvZCBzaG91bGQgYmUgY2FsbGVkLgoJICAgICAqCgkgICAgICogQHBhcmFtIG1pcnJvciBXaGV0aGVyIHRvIHJlYWQgdmVyc2lvbiBhbmQgZm9ybWF0IGluZm9ybWF0aW9uIG1pcnJvcmVkLgoJICAgICAqLwoJICAgIEJpdE1hdHJpeFBhcnNlci5wcm90b3R5cGUuc2V0TWlycm9yID0gZnVuY3Rpb24gKGlzTWlycm9yKSB7CgkgICAgICAgIHRoaXMucGFyc2VkVmVyc2lvbiA9IG51bGw7CgkgICAgICAgIHRoaXMucGFyc2VkRm9ybWF0SW5mbyA9IG51bGw7CgkgICAgICAgIHRoaXMuaXNNaXJyb3IgPSBpc01pcnJvcjsKCSAgICB9OwoJICAgIC8qKiBNaXJyb3IgdGhlIGJpdCBtYXRyaXggaW4gb3JkZXIgdG8gYXR0ZW1wdCBhIHNlY29uZCByZWFkaW5nLiAqLwoJICAgIEJpdE1hdHJpeFBhcnNlci5wcm90b3R5cGUubWlycm9yID0gZnVuY3Rpb24gKCkgewoJICAgICAgICB2YXIgYml0TWF0cml4ID0gdGhpcy5iaXRNYXRyaXg7CgkgICAgICAgIGZvciAodmFyIHggPSAwLCB3aWR0aCA9IGJpdE1hdHJpeC5nZXRXaWR0aCgpOyB4IDwgd2lkdGg7IHgrKykgewoJICAgICAgICAgICAgZm9yICh2YXIgeSA9IHggKyAxLCBoZWlnaHQgPSBiaXRNYXRyaXguZ2V0SGVpZ2h0KCk7IHkgPCBoZWlnaHQ7IHkrKykgewoJICAgICAgICAgICAgICAgIGlmIChiaXRNYXRyaXguZ2V0KHgsIHkpICE9PSBiaXRNYXRyaXguZ2V0KHksIHgpKSB7CgkgICAgICAgICAgICAgICAgICAgIGJpdE1hdHJpeC5mbGlwKHksIHgpOwoJICAgICAgICAgICAgICAgICAgICBiaXRNYXRyaXguZmxpcCh4LCB5KTsKCSAgICAgICAgICAgICAgICB9CgkgICAgICAgICAgICB9CgkgICAgICAgIH0KCSAgICB9OwoJICAgIHJldHVybiBCaXRNYXRyaXhQYXJzZXI7Cgl9KCkpOwoJQml0TWF0cml4UGFyc2VyJDEuZGVmYXVsdCA9IEJpdE1hdHJpeFBhcnNlcjsKCgl2YXIgRGF0YUJsb2NrJDEgPSB7fTsKCgkvKgoJICogQ29weXJpZ2h0IDIwMDcgWlhpbmcgYXV0aG9ycwoJICoKCSAqIExpY2Vuc2VkIHVuZGVyIHRoZSBBcGFjaGUgTGljZW5zZSwgVmVyc2lvbiAyLjAgKHRoZSAiTGljZW5zZSIpOwoJICogeW91IG1heSBub3QgdXNlIHRoaXMgZmlsZSBleGNlcHQgaW4gY29tcGxpYW5jZSB3aXRoIHRoZSBMaWNlbnNlLgoJICogWW91IG1heSBvYnRhaW4gYSBjb3B5IG9mIHRoZSBMaWNlbnNlIGF0CgkgKgoJICogICAgICBodHRwOi8vd3d3LmFwYWNoZS5vcmcvbGljZW5zZXMvTElDRU5TRS0yLjAKCSAqCgkgKiBVbmxlc3MgcmVxdWlyZWQgYnkgYXBwbGljYWJsZSBsYXcgb3IgYWdyZWVkIHRvIGluIHdyaXRpbmcsIHNvZnR3YXJlCgkgKiBkaXN0cmlidXRlZCB1bmRlciB0aGUgTGljZW5zZSBpcyBkaXN0cmlidXRlZCBvbiBhbiAiQVMgSVMiIEJBU0lTLAoJICogV0lUSE9VVCBXQVJSQU5USUVTIE9SIENPTkRJVElPTlMgT0YgQU5ZIEtJTkQsIGVpdGhlciBleHByZXNzIG9yIGltcGxpZWQuCgkgKiBTZWUgdGhlIExpY2Vuc2UgZm9yIHRoZSBzcGVjaWZpYyBsYW5ndWFnZSBnb3Zlcm5pbmcgcGVybWlzc2lvbnMgYW5kCgkgKiBsaW1pdGF0aW9ucyB1bmRlciB0aGUgTGljZW5zZS4KCSAqLwoJdmFyIF9fdmFsdWVzJDMgPSAoY29tbW9uanNHbG9iYWwgJiYgY29tbW9uanNHbG9iYWwuX192YWx1ZXMpIHx8IGZ1bmN0aW9uKG8pIHsKCSAgICB2YXIgcyA9IHR5cGVvZiBTeW1ib2wgPT09ICJmdW5jdGlvbiIgJiYgU3ltYm9sLml0ZXJhdG9yLCBtID0gcyAmJiBvW3NdLCBpID0gMDsKCSAgICBpZiAobSkgcmV0dXJuIG0uY2FsbChvKTsKCSAgICBpZiAobyAmJiB0eXBlb2Ygby5sZW5ndGggPT09ICJudW1iZXIiKSByZXR1cm4gewoJICAgICAgICBuZXh0OiBmdW5jdGlvbiAoKSB7CgkgICAgICAgICAgICBpZiAobyAmJiBpID49IG8ubGVuZ3RoKSBvID0gdm9pZCAwOwoJICAgICAgICAgICAgcmV0dXJuIHsgdmFsdWU6IG8gJiYgb1tpKytdLCBkb25lOiAhbyB9OwoJICAgICAgICB9CgkgICAgfTsKCSAgICB0aHJvdyBuZXcgVHlwZUVycm9yKHMgPyAiT2JqZWN0IGlzIG5vdCBpdGVyYWJsZS4iIDogIlN5bWJvbC5pdGVyYXRvciBpcyBub3QgZGVmaW5lZC4iKTsKCX07CglPYmplY3QuZGVmaW5lUHJvcGVydHkoRGF0YUJsb2NrJDEsICJfX2VzTW9kdWxlIiwgeyB2YWx1ZTogdHJ1ZSB9KTsKCXZhciBJbGxlZ2FsQXJndW1lbnRFeGNlcHRpb25fMSQxID0gSWxsZWdhbEFyZ3VtZW50RXhjZXB0aW9uJDE7CgkvKioKCSAqIDxwPkVuY2Fwc3VsYXRlcyBhIGJsb2NrIG9mIGRhdGEgd2l0aGluIGEgUVIgQ29kZS4gUVIgQ29kZXMgbWF5IHNwbGl0IHRoZWlyIGRhdGEgaW50bwoJICogbXVsdGlwbGUgYmxvY2tzLCBlYWNoIG9mIHdoaWNoIGlzIGEgdW5pdCBvZiBkYXRhIGFuZCBlcnJvci1jb3JyZWN0aW9uIGNvZGV3b3Jkcy4gRWFjaAoJICogaXMgcmVwcmVzZW50ZWQgYnkgYW4gaW5zdGFuY2Ugb2YgdGhpcyBjbGFzcy48L3A+CgkgKgoJICogQGF1dGhvciBTZWFuIE93ZW4KCSAqLwoJdmFyIERhdGFCbG9jayA9IC8qKiBAY2xhc3MgKi8gKGZ1bmN0aW9uICgpIHsKCSAgICBmdW5jdGlvbiBEYXRhQmxvY2sobnVtRGF0YUNvZGV3b3JkcyAvKmludCovLCBjb2Rld29yZHMpIHsKCSAgICAgICAgdGhpcy5udW1EYXRhQ29kZXdvcmRzID0gbnVtRGF0YUNvZGV3b3JkczsKCSAgICAgICAgdGhpcy5jb2Rld29yZHMgPSBjb2Rld29yZHM7CgkgICAgfQoJICAgIC8qKgoJICAgICAqIDxwPldoZW4gUVIgQ29kZXMgdXNlIG11bHRpcGxlIGRhdGEgYmxvY2tzLCB0aGV5IGFyZSBhY3R1YWxseSBpbnRlcmxlYXZlZC4KCSAgICAgKiBUaGF0IGlzLCB0aGUgZmlyc3QgYnl0ZSBvZiBkYXRhIGJsb2NrIDEgdG8gbiBpcyB3cml0dGVuLCB0aGVuIHRoZSBzZWNvbmQgYnl0ZXMsIGFuZCBzbyBvbi4gVGhpcwoJICAgICAqIG1ldGhvZCB3aWxsIHNlcGFyYXRlIHRoZSBkYXRhIGludG8gb3JpZ2luYWwgYmxvY2tzLjwvcD4KCSAgICAgKgoJICAgICAqIEBwYXJhbSByYXdDb2Rld29yZHMgYnl0ZXMgYXMgcmVhZCBkaXJlY3RseSBmcm9tIHRoZSBRUiBDb2RlCgkgICAgICogQHBhcmFtIHZlcnNpb24gdmVyc2lvbiBvZiB0aGUgUVIgQ29kZQoJICAgICAqIEBwYXJhbSBlY0xldmVsIGVycm9yLWNvcnJlY3Rpb24gbGV2ZWwgb2YgdGhlIFFSIENvZGUKCSAgICAgKiBAcmV0dXJuIERhdGFCbG9ja3MgY29udGFpbmluZyBvcmlnaW5hbCBieXRlcywgImRlLWludGVybGVhdmVkIiBmcm9tIHJlcHJlc2VudGF0aW9uIGluIHRoZQoJICAgICAqICAgICAgICAgUVIgQ29kZQoJICAgICAqLwoJICAgIERhdGFCbG9jay5nZXREYXRhQmxvY2tzID0gZnVuY3Rpb24gKHJhd0NvZGV3b3JkcywgdmVyc2lvbiwgZWNMZXZlbCkgewoJICAgICAgICB2YXIgZV8xLCBfYSwgZV8yLCBfYjsKCSAgICAgICAgaWYgKHJhd0NvZGV3b3Jkcy5sZW5ndGggIT09IHZlcnNpb24uZ2V0VG90YWxDb2Rld29yZHMoKSkgewoJICAgICAgICAgICAgdGhyb3cgbmV3IElsbGVnYWxBcmd1bWVudEV4Y2VwdGlvbl8xJDEuZGVmYXVsdCgpOwoJICAgICAgICB9CgkgICAgICAgIC8vIEZpZ3VyZSBvdXQgdGhlIG51bWJlciBhbmQgc2l6ZSBvZiBkYXRhIGJsb2NrcyB1c2VkIGJ5IHRoaXMgdmVyc2lvbiBhbmQKCSAgICAgICAgLy8gZXJyb3IgY29ycmVjdGlvbiBsZXZlbAoJICAgICAgICB2YXIgZWNCbG9ja3MgPSB2ZXJzaW9uLmdldEVDQmxvY2tzRm9yTGV2ZWwoZWNMZXZlbCk7CgkgICAgICAgIC8vIEZpcnN0IGNvdW50IHRoZSB0b3RhbCBudW1iZXIgb2YgZGF0YSBibG9ja3MKCSAgICAgICAgdmFyIHRvdGFsQmxvY2tzID0gMDsKCSAgICAgICAgdmFyIGVjQmxvY2tBcnJheSA9IGVjQmxvY2tzLmdldEVDQmxvY2tzKCk7CgkgICAgICAgIHRyeSB7CgkgICAgICAgICAgICBmb3IgKHZhciBlY0Jsb2NrQXJyYXlfMSA9IF9fdmFsdWVzJDMoZWNCbG9ja0FycmF5KSwgZWNCbG9ja0FycmF5XzFfMSA9IGVjQmxvY2tBcnJheV8xLm5leHQoKTsgIWVjQmxvY2tBcnJheV8xXzEuZG9uZTsgZWNCbG9ja0FycmF5XzFfMSA9IGVjQmxvY2tBcnJheV8xLm5leHQoKSkgewoJICAgICAgICAgICAgICAgIHZhciBlY0Jsb2NrID0gZWNCbG9ja0FycmF5XzFfMS52YWx1ZTsKCSAgICAgICAgICAgICAgICB0b3RhbEJsb2NrcyArPSBlY0Jsb2NrLmdldENvdW50KCk7CgkgICAgICAgICAgICB9CgkgICAgICAgIH0KCSAgICAgICAgY2F0Y2ggKGVfMV8xKSB7IGVfMSA9IHsgZXJyb3I6IGVfMV8xIH07IH0KCSAgICAgICAgZmluYWxseSB7CgkgICAgICAgICAgICB0cnkgewoJICAgICAgICAgICAgICAgIGlmIChlY0Jsb2NrQXJyYXlfMV8xICYmICFlY0Jsb2NrQXJyYXlfMV8xLmRvbmUgJiYgKF9hID0gZWNCbG9ja0FycmF5XzEucmV0dXJuKSkgX2EuY2FsbChlY0Jsb2NrQXJyYXlfMSk7CgkgICAgICAgICAgICB9CgkgICAgICAgICAgICBmaW5hbGx5IHsgaWYgKGVfMSkgdGhyb3cgZV8xLmVycm9yOyB9CgkgICAgICAgIH0KCSAgICAgICAgLy8gTm93IGVzdGFibGlzaCBEYXRhQmxvY2tzIG9mIHRoZSBhcHByb3ByaWF0ZSBzaXplIGFuZCBudW1iZXIgb2YgZGF0YSBjb2Rld29yZHMKCSAgICAgICAgdmFyIHJlc3VsdCA9IG5ldyBBcnJheSh0b3RhbEJsb2Nrcyk7CgkgICAgICAgIHZhciBudW1SZXN1bHRCbG9ja3MgPSAwOwoJICAgICAgICB0cnkgewoJICAgICAgICAgICAgZm9yICh2YXIgZWNCbG9ja0FycmF5XzIgPSBfX3ZhbHVlcyQzKGVjQmxvY2tBcnJheSksIGVjQmxvY2tBcnJheV8yXzEgPSBlY0Jsb2NrQXJyYXlfMi5uZXh0KCk7ICFlY0Jsb2NrQXJyYXlfMl8xLmRvbmU7IGVjQmxvY2tBcnJheV8yXzEgPSBlY0Jsb2NrQXJyYXlfMi5uZXh0KCkpIHsKCSAgICAgICAgICAgICAgICB2YXIgZWNCbG9jayA9IGVjQmxvY2tBcnJheV8yXzEudmFsdWU7CgkgICAgICAgICAgICAgICAgZm9yICh2YXIgaSA9IDA7IGkgPCBlY0Jsb2NrLmdldENvdW50KCk7IGkrKykgewoJICAgICAgICAgICAgICAgICAgICB2YXIgbnVtRGF0YUNvZGV3b3JkcyA9IGVjQmxvY2suZ2V0RGF0YUNvZGV3b3JkcygpOwoJICAgICAgICAgICAgICAgICAgICB2YXIgbnVtQmxvY2tDb2Rld29yZHMgPSBlY0Jsb2Nrcy5nZXRFQ0NvZGV3b3Jkc1BlckJsb2NrKCkgKyBudW1EYXRhQ29kZXdvcmRzOwoJICAgICAgICAgICAgICAgICAgICByZXN1bHRbbnVtUmVzdWx0QmxvY2tzKytdID0gbmV3IERhdGFCbG9jayhudW1EYXRhQ29kZXdvcmRzLCBuZXcgVWludDhBcnJheShudW1CbG9ja0NvZGV3b3JkcykpOwoJICAgICAgICAgICAgICAgIH0KCSAgICAgICAgICAgIH0KCSAgICAgICAgfQoJICAgICAgICBjYXRjaCAoZV8yXzEpIHsgZV8yID0geyBlcnJvcjogZV8yXzEgfTsgfQoJICAgICAgICBmaW5hbGx5IHsKCSAgICAgICAgICAgIHRyeSB7CgkgICAgICAgICAgICAgICAgaWYgKGVjQmxvY2tBcnJheV8yXzEgJiYgIWVjQmxvY2tBcnJheV8yXzEuZG9uZSAmJiAoX2IgPSBlY0Jsb2NrQXJyYXlfMi5yZXR1cm4pKSBfYi5jYWxsKGVjQmxvY2tBcnJheV8yKTsKCSAgICAgICAgICAgIH0KCSAgICAgICAgICAgIGZpbmFsbHkgeyBpZiAoZV8yKSB0aHJvdyBlXzIuZXJyb3I7IH0KCSAgICAgICAgfQoJICAgICAgICAvLyBBbGwgYmxvY2tzIGhhdmUgdGhlIHNhbWUgYW1vdW50IG9mIGRhdGEsIGV4Y2VwdCB0aGF0IHRoZSBsYXN0IG4KCSAgICAgICAgLy8gKHdoZXJlIG4gbWF5IGJlIDApIGhhdmUgMSBtb3JlIGJ5dGUuIEZpZ3VyZSBvdXQgd2hlcmUgdGhlc2Ugc3RhcnQuCgkgICAgICAgIHZhciBzaG9ydGVyQmxvY2tzVG90YWxDb2Rld29yZHMgPSByZXN1bHRbMF0uY29kZXdvcmRzLmxlbmd0aDsKCSAgICAgICAgdmFyIGxvbmdlckJsb2Nrc1N0YXJ0QXQgPSByZXN1bHQubGVuZ3RoIC0gMTsKCSAgICAgICAgLy8gVFlQRVNDUklQVFBPUlQ6IGNoZWNrIGxlbmd0aCBpcyBjb3JyZWN0IGhlcmUKCSAgICAgICAgd2hpbGUgKGxvbmdlckJsb2Nrc1N0YXJ0QXQgPj0gMCkgewoJICAgICAgICAgICAgdmFyIG51bUNvZGV3b3JkcyA9IHJlc3VsdFtsb25nZXJCbG9ja3NTdGFydEF0XS5jb2Rld29yZHMubGVuZ3RoOwoJICAgICAgICAgICAgaWYgKG51bUNvZGV3b3JkcyA9PT0gc2hvcnRlckJsb2Nrc1RvdGFsQ29kZXdvcmRzKSB7CgkgICAgICAgICAgICAgICAgYnJlYWs7CgkgICAgICAgICAgICB9CgkgICAgICAgICAgICBsb25nZXJCbG9ja3NTdGFydEF0LS07CgkgICAgICAgIH0KCSAgICAgICAgbG9uZ2VyQmxvY2tzU3RhcnRBdCsrOwoJICAgICAgICB2YXIgc2hvcnRlckJsb2Nrc051bURhdGFDb2Rld29yZHMgPSBzaG9ydGVyQmxvY2tzVG90YWxDb2Rld29yZHMgLSBlY0Jsb2Nrcy5nZXRFQ0NvZGV3b3Jkc1BlckJsb2NrKCk7CgkgICAgICAgIC8vIFRoZSBsYXN0IGVsZW1lbnRzIG9mIHJlc3VsdCBtYXkgYmUgMSBlbGVtZW50IGxvbmdlcgoJICAgICAgICAvLyBmaXJzdCBmaWxsIG91dCBhcyBtYW55IGVsZW1lbnRzIGFzIGFsbCBvZiB0aGVtIGhhdmUKCSAgICAgICAgdmFyIHJhd0NvZGV3b3Jkc09mZnNldCA9IDA7CgkgICAgICAgIGZvciAodmFyIGkgPSAwOyBpIDwgc2hvcnRlckJsb2Nrc051bURhdGFDb2Rld29yZHM7IGkrKykgewoJICAgICAgICAgICAgZm9yICh2YXIgaiA9IDA7IGogPCBudW1SZXN1bHRCbG9ja3M7IGorKykgewoJICAgICAgICAgICAgICAgIHJlc3VsdFtqXS5jb2Rld29yZHNbaV0gPSByYXdDb2Rld29yZHNbcmF3Q29kZXdvcmRzT2Zmc2V0KytdOwoJICAgICAgICAgICAgfQoJICAgICAgICB9CgkgICAgICAgIC8vIEZpbGwgb3V0IHRoZSBsYXN0IGRhdGEgYmxvY2sgaW4gdGhlIGxvbmdlciBvbmVzCgkgICAgICAgIGZvciAodmFyIGogPSBsb25nZXJCbG9ja3NTdGFydEF0OyBqIDwgbnVtUmVzdWx0QmxvY2tzOyBqKyspIHsKCSAgICAgICAgICAgIHJlc3VsdFtqXS5jb2Rld29yZHNbc2hvcnRlckJsb2Nrc051bURhdGFDb2Rld29yZHNdID0gcmF3Q29kZXdvcmRzW3Jhd0NvZGV3b3Jkc09mZnNldCsrXTsKCSAgICAgICAgfQoJICAgICAgICAvLyBOb3cgYWRkIGluIGVycm9yIGNvcnJlY3Rpb24gYmxvY2tzCgkgICAgICAgIHZhciBtYXggPSByZXN1bHRbMF0uY29kZXdvcmRzLmxlbmd0aDsKCSAgICAgICAgZm9yICh2YXIgaSA9IHNob3J0ZXJCbG9ja3NOdW1EYXRhQ29kZXdvcmRzOyBpIDwgbWF4OyBpKyspIHsKCSAgICAgICAgICAgIGZvciAodmFyIGogPSAwOyBqIDwgbnVtUmVzdWx0QmxvY2tzOyBqKyspIHsKCSAgICAgICAgICAgICAgICB2YXIgaU9mZnNldCA9IGogPCBsb25nZXJCbG9ja3NTdGFydEF0ID8gaSA6IGkgKyAxOwoJICAgICAgICAgICAgICAgIHJlc3VsdFtqXS5jb2Rld29yZHNbaU9mZnNldF0gPSByYXdDb2Rld29yZHNbcmF3Q29kZXdvcmRzT2Zmc2V0KytdOwoJICAgICAgICAgICAgfQoJICAgICAgICB9CgkgICAgICAgIHJldHVybiByZXN1bHQ7CgkgICAgfTsKCSAgICBEYXRhQmxvY2sucHJvdG90eXBlLmdldE51bURhdGFDb2Rld29yZHMgPSBmdW5jdGlvbiAoKSB7CgkgICAgICAgIHJldHVybiB0aGlzLm51bURhdGFDb2Rld29yZHM7CgkgICAgfTsKCSAgICBEYXRhQmxvY2sucHJvdG90eXBlLmdldENvZGV3b3JkcyA9IGZ1bmN0aW9uICgpIHsKCSAgICAgICAgcmV0dXJuIHRoaXMuY29kZXdvcmRzOwoJICAgIH07CgkgICAgcmV0dXJuIERhdGFCbG9jazsKCX0oKSk7CglEYXRhQmxvY2skMS5kZWZhdWx0ID0gRGF0YUJsb2NrOwoKCXZhciBEZWNvZGVkQml0U3RyZWFtUGFyc2VyJDEgPSB7fTsKCgl2YXIgQml0U291cmNlJDEgPSB7fTsKCgkvKgoJICogQ29weXJpZ2h0IDIwMDcgWlhpbmcgYXV0aG9ycwoJICoKCSAqIExpY2Vuc2VkIHVuZGVyIHRoZSBBcGFjaGUgTGljZW5zZSwgVmVyc2lvbiAyLjAgKHRoZSAiTGljZW5zZSIpOwoJICogeW91IG1heSBub3QgdXNlIHRoaXMgZmlsZSBleGNlcHQgaW4gY29tcGxpYW5jZSB3aXRoIHRoZSBMaWNlbnNlLgoJICogWW91IG1heSBvYnRhaW4gYSBjb3B5IG9mIHRoZSBMaWNlbnNlIGF0CgkgKgoJICogICAgICBodHRwOi8vd3d3LmFwYWNoZS5vcmcvbGljZW5zZXMvTElDRU5TRS0yLjAKCSAqCgkgKiBVbmxlc3MgcmVxdWlyZWQgYnkgYXBwbGljYWJsZSBsYXcgb3IgYWdyZWVkIHRvIGluIHdyaXRpbmcsIHNvZnR3YXJlCgkgKiBkaXN0cmlidXRlZCB1bmRlciB0aGUgTGljZW5zZSBpcyBkaXN0cmlidXRlZCBvbiBhbiAiQVMgSVMiIEJBU0lTLAoJICogV0lUSE9VVCBXQVJSQU5USUVTIE9SIENPTkRJVElPTlMgT0YgQU5ZIEtJTkQsIGVpdGhlciBleHByZXNzIG9yIGltcGxpZWQuCgkgKiBTZWUgdGhlIExpY2Vuc2UgZm9yIHRoZSBzcGVjaWZpYyBsYW5ndWFnZSBnb3Zlcm5pbmcgcGVybWlzc2lvbnMgYW5kCgkgKiBsaW1pdGF0aW9ucyB1bmRlciB0aGUgTGljZW5zZS4KCSAqLwoJT2JqZWN0LmRlZmluZVByb3BlcnR5KEJpdFNvdXJjZSQxLCAiX19lc01vZHVsZSIsIHsgdmFsdWU6IHRydWUgfSk7CgkvKm5hbWVzcGFjZSBjb20uZ29vZ2xlLnp4aW5nLmNvbW1vbiB7Ki8KCXZhciBJbGxlZ2FsQXJndW1lbnRFeGNlcHRpb25fMSA9IElsbGVnYWxBcmd1bWVudEV4Y2VwdGlvbiQxOwoJLyoqCgkgKiA8cD5UaGlzIHByb3ZpZGVzIGFuIGVhc3kgYWJzdHJhY3Rpb24gdG8gcmVhZCBiaXRzIGF0IGEgdGltZSBmcm9tIGEgc2VxdWVuY2Ugb2YgYnl0ZXMsIHdoZXJlIHRoZQoJICogbnVtYmVyIG9mIGJpdHMgcmVhZCBpcyBub3Qgb2Z0ZW4gYSBtdWx0aXBsZSBvZiA4LjwvcD4KCSAqCgkgKiA8cD5UaGlzIGNsYXNzIGlzIHRocmVhZC1zYWZlIGJ1dCBub3QgcmVlbnRyYW50IC0tIHVubGVzcyB0aGUgY2FsbGVyIG1vZGlmaWVzIHRoZSBieXRlcyBhcnJheQoJICogaXQgcGFzc2VkIGluLCBpbiB3aGljaCBjYXNlIGFsbCBiZXRzIGFyZSBvZmYuPC9wPgoJICoKCSAqIEBhdXRob3IgU2VhbiBPd2VuCgkgKi8KCXZhciBCaXRTb3VyY2UgPSAvKiogQGNsYXNzICovIChmdW5jdGlvbiAoKSB7CgkgICAgLyoqCgkgICAgICogQHBhcmFtIGJ5dGVzIGJ5dGVzIGZyb20gd2hpY2ggdGhpcyB3aWxsIHJlYWQgYml0cy4gQml0cyB3aWxsIGJlIHJlYWQgZnJvbSB0aGUgZmlyc3QgYnl0ZSBmaXJzdC4KCSAgICAgKiBCaXRzIGFyZSByZWFkIHdpdGhpbiBhIGJ5dGUgZnJvbSBtb3N0LXNpZ25pZmljYW50IHRvIGxlYXN0LXNpZ25pZmljYW50IGJpdC4KCSAgICAgKi8KCSAgICBmdW5jdGlvbiBCaXRTb3VyY2UoYnl0ZXMpIHsKCSAgICAgICAgdGhpcy5ieXRlcyA9IGJ5dGVzOwoJICAgICAgICB0aGlzLmJ5dGVPZmZzZXQgPSAwOwoJICAgICAgICB0aGlzLmJpdE9mZnNldCA9IDA7CgkgICAgfQoJICAgIC8qKgoJICAgICAqIEByZXR1cm4gaW5kZXggb2YgbmV4dCBiaXQgaW4gY3VycmVudCBieXRlIHdoaWNoIHdvdWxkIGJlIHJlYWQgYnkgdGhlIG5leHQgY2FsbCB0byB7QGxpbmsgI3JlYWRCaXRzKGludCl9LgoJICAgICAqLwoJICAgIEJpdFNvdXJjZS5wcm90b3R5cGUuZ2V0Qml0T2Zmc2V0ID0gZnVuY3Rpb24gKCkgewoJICAgICAgICByZXR1cm4gdGhpcy5iaXRPZmZzZXQ7CgkgICAgfTsKCSAgICAvKioKCSAgICAgKiBAcmV0dXJuIGluZGV4IG9mIG5leHQgYnl0ZSBpbiBpbnB1dCBieXRlIGFycmF5IHdoaWNoIHdvdWxkIGJlIHJlYWQgYnkgdGhlIG5leHQgY2FsbCB0byB7QGxpbmsgI3JlYWRCaXRzKGludCl9LgoJICAgICAqLwoJICAgIEJpdFNvdXJjZS5wcm90b3R5cGUuZ2V0Qnl0ZU9mZnNldCA9IGZ1bmN0aW9uICgpIHsKCSAgICAgICAgcmV0dXJuIHRoaXMuYnl0ZU9mZnNldDsKCSAgICB9OwoJICAgIC8qKgoJICAgICAqIEBwYXJhbSBudW1CaXRzIG51bWJlciBvZiBiaXRzIHRvIHJlYWQKCSAgICAgKiBAcmV0dXJuIGludCByZXByZXNlbnRpbmcgdGhlIGJpdHMgcmVhZC4gVGhlIGJpdHMgd2lsbCBhcHBlYXIgYXMgdGhlIGxlYXN0LXNpZ25pZmljYW50CgkgICAgICogICAgICAgICBiaXRzIG9mIHRoZSBpbnQKCSAgICAgKiBAdGhyb3dzIElsbGVnYWxBcmd1bWVudEV4Y2VwdGlvbiBpZiBudW1CaXRzIGlzbid0IGluIFsxLDMyXSBvciBtb3JlIHRoYW4gaXMgYXZhaWxhYmxlCgkgICAgICovCgkgICAgQml0U291cmNlLnByb3RvdHlwZS5yZWFkQml0cyA9IGZ1bmN0aW9uIChudW1CaXRzIC8qaW50Ki8pIHsKCSAgICAgICAgaWYgKG51bUJpdHMgPCAxIHx8IG51bUJpdHMgPiAzMiB8fCBudW1CaXRzID4gdGhpcy5hdmFpbGFibGUoKSkgewoJICAgICAgICAgICAgdGhyb3cgbmV3IElsbGVnYWxBcmd1bWVudEV4Y2VwdGlvbl8xLmRlZmF1bHQoJycgKyBudW1CaXRzKTsKCSAgICAgICAgfQoJICAgICAgICB2YXIgcmVzdWx0ID0gMDsKCSAgICAgICAgdmFyIGJpdE9mZnNldCA9IHRoaXMuYml0T2Zmc2V0OwoJICAgICAgICB2YXIgYnl0ZU9mZnNldCA9IHRoaXMuYnl0ZU9mZnNldDsKCSAgICAgICAgdmFyIGJ5dGVzID0gdGhpcy5ieXRlczsKCSAgICAgICAgLy8gRmlyc3QsIHJlYWQgcmVtYWluZGVyIGZyb20gY3VycmVudCBieXRlCgkgICAgICAgIGlmIChiaXRPZmZzZXQgPiAwKSB7CgkgICAgICAgICAgICB2YXIgYml0c0xlZnQgPSA4IC0gYml0T2Zmc2V0OwoJICAgICAgICAgICAgdmFyIHRvUmVhZCA9IG51bUJpdHMgPCBiaXRzTGVmdCA/IG51bUJpdHMgOiBiaXRzTGVmdDsKCSAgICAgICAgICAgIHZhciBiaXRzVG9Ob3RSZWFkID0gYml0c0xlZnQgLSB0b1JlYWQ7CgkgICAgICAgICAgICB2YXIgbWFzayA9ICgweEZGID4+ICg4IC0gdG9SZWFkKSkgPDwgYml0c1RvTm90UmVhZDsKCSAgICAgICAgICAgIHJlc3VsdCA9IChieXRlc1tieXRlT2Zmc2V0XSAmIG1hc2spID4+IGJpdHNUb05vdFJlYWQ7CgkgICAgICAgICAgICBudW1CaXRzIC09IHRvUmVhZDsKCSAgICAgICAgICAgIGJpdE9mZnNldCArPSB0b1JlYWQ7CgkgICAgICAgICAgICBpZiAoYml0T2Zmc2V0ID09PSA4KSB7CgkgICAgICAgICAgICAgICAgYml0T2Zmc2V0ID0gMDsKCSAgICAgICAgICAgICAgICBieXRlT2Zmc2V0Kys7CgkgICAgICAgICAgICB9CgkgICAgICAgIH0KCSAgICAgICAgLy8gTmV4dCByZWFkIHdob2xlIGJ5dGVzCgkgICAgICAgIGlmIChudW1CaXRzID4gMCkgewoJICAgICAgICAgICAgd2hpbGUgKG51bUJpdHMgPj0gOCkgewoJICAgICAgICAgICAgICAgIHJlc3VsdCA9IChyZXN1bHQgPDwgOCkgfCAoYnl0ZXNbYnl0ZU9mZnNldF0gJiAweEZGKTsKCSAgICAgICAgICAgICAgICBieXRlT2Zmc2V0Kys7CgkgICAgICAgICAgICAgICAgbnVtQml0cyAtPSA4OwoJICAgICAgICAgICAgfQoJICAgICAgICAgICAgLy8gRmluYWxseSByZWFkIGEgcGFydGlhbCBieXRlCgkgICAgICAgICAgICBpZiAobnVtQml0cyA+IDApIHsKCSAgICAgICAgICAgICAgICB2YXIgYml0c1RvTm90UmVhZCA9IDggLSBudW1CaXRzOwoJICAgICAgICAgICAgICAgIHZhciBtYXNrID0gKDB4RkYgPj4gYml0c1RvTm90UmVhZCkgPDwgYml0c1RvTm90UmVhZDsKCSAgICAgICAgICAgICAgICByZXN1bHQgPSAocmVzdWx0IDw8IG51bUJpdHMpIHwgKChieXRlc1tieXRlT2Zmc2V0XSAmIG1hc2spID4+IGJpdHNUb05vdFJlYWQpOwoJICAgICAgICAgICAgICAgIGJpdE9mZnNldCArPSBudW1CaXRzOwoJICAgICAgICAgICAgfQoJICAgICAgICB9CgkgICAgICAgIHRoaXMuYml0T2Zmc2V0ID0gYml0T2Zmc2V0OwoJICAgICAgICB0aGlzLmJ5dGVPZmZzZXQgPSBieXRlT2Zmc2V0OwoJICAgICAgICByZXR1cm4gcmVzdWx0OwoJICAgIH07CgkgICAgLyoqCgkgICAgICogQHJldHVybiBudW1iZXIgb2YgYml0cyB0aGF0IGNhbiBiZSByZWFkIHN1Y2Nlc3NmdWxseQoJICAgICAqLwoJICAgIEJpdFNvdXJjZS5wcm90b3R5cGUuYXZhaWxhYmxlID0gZnVuY3Rpb24gKCkgewoJICAgICAgICByZXR1cm4gOCAqICh0aGlzLmJ5dGVzLmxlbmd0aCAtIHRoaXMuYnl0ZU9mZnNldCkgLSB0aGlzLmJpdE9mZnNldDsKCSAgICB9OwoJICAgIHJldHVybiBCaXRTb3VyY2U7Cgl9KCkpOwoJQml0U291cmNlJDEuZGVmYXVsdCA9IEJpdFNvdXJjZTsKCgl2YXIgRGVjb2RlclJlc3VsdCQxID0ge307CgoJLyoKCSAqIENvcHlyaWdodCAyMDA3IFpYaW5nIGF1dGhvcnMKCSAqCgkgKiBMaWNlbnNlZCB1bmRlciB0aGUgQXBhY2hlIExpY2Vuc2UsIFZlcnNpb24gMi4wICh0aGUgIkxpY2Vuc2UiKTsKCSAqIHlvdSBtYXkgbm90IHVzZSB0aGlzIGZpbGUgZXhjZXB0IGluIGNvbXBsaWFuY2Ugd2l0aCB0aGUgTGljZW5zZS4KCSAqIFlvdSBtYXkgb2J0YWluIGEgY29weSBvZiB0aGUgTGljZW5zZSBhdAoJICoKCSAqICAgICAgaHR0cDovL3d3dy5hcGFjaGUub3JnL2xpY2Vuc2VzL0xJQ0VOU0UtMi4wCgkgKgoJICogVW5sZXNzIHJlcXVpcmVkIGJ5IGFwcGxpY2FibGUgbGF3IG9yIGFncmVlZCB0byBpbiB3cml0aW5nLCBzb2Z0d2FyZQoJICogZGlzdHJpYnV0ZWQgdW5kZXIgdGhlIExpY2Vuc2UgaXMgZGlzdHJpYnV0ZWQgb24gYW4gIkFTIElTIiBCQVNJUywKCSAqIFdJVEhPVVQgV0FSUkFOVElFUyBPUiBDT05ESVRJT05TIE9GIEFOWSBLSU5ELCBlaXRoZXIgZXhwcmVzcyBvciBpbXBsaWVkLgoJICogU2VlIHRoZSBMaWNlbnNlIGZvciB0aGUgc3BlY2lmaWMgbGFuZ3VhZ2UgZ292ZXJuaW5nIHBlcm1pc3Npb25zIGFuZAoJICogbGltaXRhdGlvbnMgdW5kZXIgdGhlIExpY2Vuc2UuCgkgKi8KCU9iamVjdC5kZWZpbmVQcm9wZXJ0eShEZWNvZGVyUmVzdWx0JDEsICJfX2VzTW9kdWxlIiwgeyB2YWx1ZTogdHJ1ZSB9KTsKCS8qbmFtZXNwYWNlIGNvbS5nb29nbGUuenhpbmcuY29tbW9uIHsqLwoJLyppbXBvcnQgamF2YS51dGlsLkxpc3Q7Ki8KCS8qKgoJICogPHA+RW5jYXBzdWxhdGVzIHRoZSByZXN1bHQgb2YgZGVjb2RpbmcgYSBtYXRyaXggb2YgYml0cy4gVGhpcyB0eXBpY2FsbHkKCSAqIGFwcGxpZXMgdG8gMkQgYmFyY29kZSBmb3JtYXRzLiBGb3Igbm93IGl0IGNvbnRhaW5zIHRoZSByYXcgYnl0ZXMgb2J0YWluZWQsCgkgKiBhcyB3ZWxsIGFzIGEgU3RyaW5nIGludGVycHJldGF0aW9uIG9mIHRob3NlIGJ5dGVzLCBpZiBhcHBsaWNhYmxlLjwvcD4KCSAqCgkgKiBAYXV0aG9yIFNlYW4gT3dlbgoJICovCgl2YXIgRGVjb2RlclJlc3VsdCA9IC8qKiBAY2xhc3MgKi8gKGZ1bmN0aW9uICgpIHsKCSAgICAvLyBwdWJsaWMgY29uc3RydWN0b3IocmF3Qnl0ZXM6IFVpbnQ4QXJyYXksCgkgICAgLy8gICAgICAgICAgICAgICAgICAgICAgdGV4dDogc3RyaW5nLAoJICAgIC8vICAgICAgICAgICAgICAgICAgICAgIExpc3Q8VWludDhBcnJheT4gYnl0ZVNlZ21lbnRzLAoJICAgIC8vICAgICAgICAgICAgICAgICAgICAgIFN0cmluZyBlY0xldmVsKSB7CgkgICAgLy8gICB0aGlzKHJhd0J5dGVzLCB0ZXh0LCBieXRlU2VnbWVudHMsIGVjTGV2ZWwsIC0xLCAtMSkKCSAgICAvLyB9CgkgICAgZnVuY3Rpb24gRGVjb2RlclJlc3VsdChyYXdCeXRlcywgdGV4dCwgYnl0ZVNlZ21lbnRzLCBlY0xldmVsLCBzdHJ1Y3R1cmVkQXBwZW5kU2VxdWVuY2VOdW1iZXIsIHN0cnVjdHVyZWRBcHBlbmRQYXJpdHkpIHsKCSAgICAgICAgaWYgKHN0cnVjdHVyZWRBcHBlbmRTZXF1ZW5jZU51bWJlciA9PT0gdm9pZCAwKSB7IHN0cnVjdHVyZWRBcHBlbmRTZXF1ZW5jZU51bWJlciA9IC0xOyB9CgkgICAgICAgIGlmIChzdHJ1Y3R1cmVkQXBwZW5kUGFyaXR5ID09PSB2b2lkIDApIHsgc3RydWN0dXJlZEFwcGVuZFBhcml0eSA9IC0xOyB9CgkgICAgICAgIHRoaXMucmF3Qnl0ZXMgPSByYXdCeXRlczsKCSAgICAgICAgdGhpcy50ZXh0ID0gdGV4dDsKCSAgICAgICAgdGhpcy5ieXRlU2VnbWVudHMgPSBieXRlU2VnbWVudHM7CgkgICAgICAgIHRoaXMuZWNMZXZlbCA9IGVjTGV2ZWw7CgkgICAgICAgIHRoaXMuc3RydWN0dXJlZEFwcGVuZFNlcXVlbmNlTnVtYmVyID0gc3RydWN0dXJlZEFwcGVuZFNlcXVlbmNlTnVtYmVyOwoJICAgICAgICB0aGlzLnN0cnVjdHVyZWRBcHBlbmRQYXJpdHkgPSBzdHJ1Y3R1cmVkQXBwZW5kUGFyaXR5OwoJICAgICAgICB0aGlzLm51bUJpdHMgPSAocmF3Qnl0ZXMgPT09IHVuZGVmaW5lZCB8fCByYXdCeXRlcyA9PT0gbnVsbCkgPyAwIDogOCAqIHJhd0J5dGVzLmxlbmd0aDsKCSAgICB9CgkgICAgLyoqCgkgICAgICogQHJldHVybiByYXcgYnl0ZXMgcmVwcmVzZW50aW5nIHRoZSByZXN1bHQsIG9yIHtAY29kZSBudWxsfSBpZiBub3QgYXBwbGljYWJsZQoJICAgICAqLwoJICAgIERlY29kZXJSZXN1bHQucHJvdG90eXBlLmdldFJhd0J5dGVzID0gZnVuY3Rpb24gKCkgewoJICAgICAgICByZXR1cm4gdGhpcy5yYXdCeXRlczsKCSAgICB9OwoJICAgIC8qKgoJICAgICAqIEByZXR1cm4gaG93IG1hbnkgYml0cyBvZiB7QGxpbmsgI2dldFJhd0J5dGVzKCl9IGFyZSB2YWxpZDsgdHlwaWNhbGx5IDggdGltZXMgaXRzIGxlbmd0aAoJICAgICAqIEBzaW5jZSAzLjMuMAoJICAgICAqLwoJICAgIERlY29kZXJSZXN1bHQucHJvdG90eXBlLmdldE51bUJpdHMgPSBmdW5jdGlvbiAoKSB7CgkgICAgICAgIHJldHVybiB0aGlzLm51bUJpdHM7CgkgICAgfTsKCSAgICAvKioKCSAgICAgKiBAcGFyYW0gbnVtQml0cyBvdmVycmlkZXMgdGhlIG51bWJlciBvZiBiaXRzIHRoYXQgYXJlIHZhbGlkIGluIHtAbGluayAjZ2V0UmF3Qnl0ZXMoKX0KCSAgICAgKiBAc2luY2UgMy4zLjAKCSAgICAgKi8KCSAgICBEZWNvZGVyUmVzdWx0LnByb3RvdHlwZS5zZXROdW1CaXRzID0gZnVuY3Rpb24gKG51bUJpdHMgLyppbnQqLykgewoJICAgICAgICB0aGlzLm51bUJpdHMgPSBudW1CaXRzOwoJICAgIH07CgkgICAgLyoqCgkgICAgICogQHJldHVybiB0ZXh0IHJlcHJlc2VudGF0aW9uIG9mIHRoZSByZXN1bHQKCSAgICAgKi8KCSAgICBEZWNvZGVyUmVzdWx0LnByb3RvdHlwZS5nZXRUZXh0ID0gZnVuY3Rpb24gKCkgewoJICAgICAgICByZXR1cm4gdGhpcy50ZXh0OwoJICAgIH07CgkgICAgLyoqCgkgICAgICogQHJldHVybiBsaXN0IG9mIGJ5dGUgc2VnbWVudHMgaW4gdGhlIHJlc3VsdCwgb3Ige0Bjb2RlIG51bGx9IGlmIG5vdCBhcHBsaWNhYmxlCgkgICAgICovCgkgICAgRGVjb2RlclJlc3VsdC5wcm90b3R5cGUuZ2V0Qnl0ZVNlZ21lbnRzID0gZnVuY3Rpb24gKCkgewoJICAgICAgICByZXR1cm4gdGhpcy5ieXRlU2VnbWVudHM7CgkgICAgfTsKCSAgICAvKioKCSAgICAgKiBAcmV0dXJuIG5hbWUgb2YgZXJyb3IgY29ycmVjdGlvbiBsZXZlbCB1c2VkLCBvciB7QGNvZGUgbnVsbH0gaWYgbm90IGFwcGxpY2FibGUKCSAgICAgKi8KCSAgICBEZWNvZGVyUmVzdWx0LnByb3RvdHlwZS5nZXRFQ0xldmVsID0gZnVuY3Rpb24gKCkgewoJICAgICAgICByZXR1cm4gdGhpcy5lY0xldmVsOwoJICAgIH07CgkgICAgLyoqCgkgICAgICogQHJldHVybiBudW1iZXIgb2YgZXJyb3JzIGNvcnJlY3RlZCwgb3Ige0Bjb2RlIG51bGx9IGlmIG5vdCBhcHBsaWNhYmxlCgkgICAgICovCgkgICAgRGVjb2RlclJlc3VsdC5wcm90b3R5cGUuZ2V0RXJyb3JzQ29ycmVjdGVkID0gZnVuY3Rpb24gKCkgewoJICAgICAgICByZXR1cm4gdGhpcy5lcnJvcnNDb3JyZWN0ZWQ7CgkgICAgfTsKCSAgICBEZWNvZGVyUmVzdWx0LnByb3RvdHlwZS5zZXRFcnJvcnNDb3JyZWN0ZWQgPSBmdW5jdGlvbiAoZXJyb3JzQ29ycmVjdGVkIC8qSW50ZWdlciovKSB7CgkgICAgICAgIHRoaXMuZXJyb3JzQ29ycmVjdGVkID0gZXJyb3JzQ29ycmVjdGVkOwoJICAgIH07CgkgICAgLyoqCgkgICAgICogQHJldHVybiBudW1iZXIgb2YgZXJhc3VyZXMgY29ycmVjdGVkLCBvciB7QGNvZGUgbnVsbH0gaWYgbm90IGFwcGxpY2FibGUKCSAgICAgKi8KCSAgICBEZWNvZGVyUmVzdWx0LnByb3RvdHlwZS5nZXRFcmFzdXJlcyA9IGZ1bmN0aW9uICgpIHsKCSAgICAgICAgcmV0dXJuIHRoaXMuZXJhc3VyZXM7CgkgICAgfTsKCSAgICBEZWNvZGVyUmVzdWx0LnByb3RvdHlwZS5zZXRFcmFzdXJlcyA9IGZ1bmN0aW9uIChlcmFzdXJlcyAvKkludGVnZXIqLykgewoJICAgICAgICB0aGlzLmVyYXN1cmVzID0gZXJhc3VyZXM7CgkgICAgfTsKCSAgICAvKioKCSAgICAgKiBAcmV0dXJuIGFyYml0cmFyeSBhZGRpdGlvbmFsIG1ldGFkYXRhCgkgICAgICovCgkgICAgRGVjb2RlclJlc3VsdC5wcm90b3R5cGUuZ2V0T3RoZXIgPSBmdW5jdGlvbiAoKSB7CgkgICAgICAgIHJldHVybiB0aGlzLm90aGVyOwoJICAgIH07CgkgICAgRGVjb2RlclJlc3VsdC5wcm90b3R5cGUuc2V0T3RoZXIgPSBmdW5jdGlvbiAob3RoZXIpIHsKCSAgICAgICAgdGhpcy5vdGhlciA9IG90aGVyOwoJICAgIH07CgkgICAgRGVjb2RlclJlc3VsdC5wcm90b3R5cGUuaGFzU3RydWN0dXJlZEFwcGVuZCA9IGZ1bmN0aW9uICgpIHsKCSAgICAgICAgcmV0dXJuIHRoaXMuc3RydWN0dXJlZEFwcGVuZFBhcml0eSA+PSAwICYmIHRoaXMuc3RydWN0dXJlZEFwcGVuZFNlcXVlbmNlTnVtYmVyID49IDA7CgkgICAgfTsKCSAgICBEZWNvZGVyUmVzdWx0LnByb3RvdHlwZS5nZXRTdHJ1Y3R1cmVkQXBwZW5kUGFyaXR5ID0gZnVuY3Rpb24gKCkgewoJICAgICAgICByZXR1cm4gdGhpcy5zdHJ1Y3R1cmVkQXBwZW5kUGFyaXR5OwoJICAgIH07CgkgICAgRGVjb2RlclJlc3VsdC5wcm90b3R5cGUuZ2V0U3RydWN0dXJlZEFwcGVuZFNlcXVlbmNlTnVtYmVyID0gZnVuY3Rpb24gKCkgewoJICAgICAgICByZXR1cm4gdGhpcy5zdHJ1Y3R1cmVkQXBwZW5kU2VxdWVuY2VOdW1iZXI7CgkgICAgfTsKCSAgICByZXR1cm4gRGVjb2RlclJlc3VsdDsKCX0oKSk7CglEZWNvZGVyUmVzdWx0JDEuZGVmYXVsdCA9IERlY29kZXJSZXN1bHQ7CgoJdmFyIE1vZGUgPSB7fTsKCgkoZnVuY3Rpb24gKGV4cG9ydHMpIHsKCS8qCgkgKiBDb3B5cmlnaHQgMjAwNyBaWGluZyBhdXRob3JzCgkgKgoJICogTGljZW5zZWQgdW5kZXIgdGhlIEFwYWNoZSBMaWNlbnNlLCBWZXJzaW9uIDIuMCAodGhlICJMaWNlbnNlIik7CgkgKiB5b3UgbWF5IG5vdCB1c2UgdGhpcyBmaWxlIGV4Y2VwdCBpbiBjb21wbGlhbmNlIHdpdGggdGhlIExpY2Vuc2UuCgkgKiBZb3UgbWF5IG9idGFpbiBhIGNvcHkgb2YgdGhlIExpY2Vuc2UgYXQKCSAqCgkgKiAgICAgIGh0dHA6Ly93d3cuYXBhY2hlLm9yZy9saWNlbnNlcy9MSUNFTlNFLTIuMAoJICoKCSAqIFVubGVzcyByZXF1aXJlZCBieSBhcHBsaWNhYmxlIGxhdyBvciBhZ3JlZWQgdG8gaW4gd3JpdGluZywgc29mdHdhcmUKCSAqIGRpc3RyaWJ1dGVkIHVuZGVyIHRoZSBMaWNlbnNlIGlzIGRpc3RyaWJ1dGVkIG9uIGFuICJBUyBJUyIgQkFTSVMsCgkgKiBXSVRIT1VUIFdBUlJBTlRJRVMgT1IgQ09ORElUSU9OUyBPRiBBTlkgS0lORCwgZWl0aGVyIGV4cHJlc3Mgb3IgaW1wbGllZC4KCSAqIFNlZSB0aGUgTGljZW5zZSBmb3IgdGhlIHNwZWNpZmljIGxhbmd1YWdlIGdvdmVybmluZyBwZXJtaXNzaW9ucyBhbmQKCSAqIGxpbWl0YXRpb25zIHVuZGVyIHRoZSBMaWNlbnNlLgoJICovCglPYmplY3QuZGVmaW5lUHJvcGVydHkoZXhwb3J0cywgIl9fZXNNb2R1bGUiLCB7IHZhbHVlOiB0cnVlIH0pOwoJZXhwb3J0cy5Nb2RlVmFsdWVzID0gdm9pZCAwOwoJdmFyIElsbGVnYWxBcmd1bWVudEV4Y2VwdGlvbl8xID0gSWxsZWdhbEFyZ3VtZW50RXhjZXB0aW9uJDE7Cgl2YXIgTW9kZVZhbHVlczsKCShmdW5jdGlvbiAoTW9kZVZhbHVlcykgewoJICAgIE1vZGVWYWx1ZXNbTW9kZVZhbHVlc1siVEVSTUlOQVRPUiJdID0gMF0gPSAiVEVSTUlOQVRPUiI7CgkgICAgTW9kZVZhbHVlc1tNb2RlVmFsdWVzWyJOVU1FUklDIl0gPSAxXSA9ICJOVU1FUklDIjsKCSAgICBNb2RlVmFsdWVzW01vZGVWYWx1ZXNbIkFMUEhBTlVNRVJJQyJdID0gMl0gPSAiQUxQSEFOVU1FUklDIjsKCSAgICBNb2RlVmFsdWVzW01vZGVWYWx1ZXNbIlNUUlVDVFVSRURfQVBQRU5EIl0gPSAzXSA9ICJTVFJVQ1RVUkVEX0FQUEVORCI7CgkgICAgTW9kZVZhbHVlc1tNb2RlVmFsdWVzWyJCWVRFIl0gPSA0XSA9ICJCWVRFIjsKCSAgICBNb2RlVmFsdWVzW01vZGVWYWx1ZXNbIkVDSSJdID0gNV0gPSAiRUNJIjsKCSAgICBNb2RlVmFsdWVzW01vZGVWYWx1ZXNbIktBTkpJIl0gPSA2XSA9ICJLQU5KSSI7CgkgICAgTW9kZVZhbHVlc1tNb2RlVmFsdWVzWyJGTkMxX0ZJUlNUX1BPU0lUSU9OIl0gPSA3XSA9ICJGTkMxX0ZJUlNUX1BPU0lUSU9OIjsKCSAgICBNb2RlVmFsdWVzW01vZGVWYWx1ZXNbIkZOQzFfU0VDT05EX1BPU0lUSU9OIl0gPSA4XSA9ICJGTkMxX1NFQ09ORF9QT1NJVElPTiI7CgkgICAgLyoqIFNlZSBHQlQgMTgyODQtMjAwMDsgIkhhbnppIiBpcyBhIHRyYW5zbGl0ZXJhdGlvbiBvZiB0aGlzIG1vZGUgbmFtZS4gKi8KCSAgICBNb2RlVmFsdWVzW01vZGVWYWx1ZXNbIkhBTlpJIl0gPSA5XSA9ICJIQU5aSSI7Cgl9KShNb2RlVmFsdWVzID0gZXhwb3J0cy5Nb2RlVmFsdWVzIHx8IChleHBvcnRzLk1vZGVWYWx1ZXMgPSB7fSkpOwoJLyoqCgkgKiA8cD5TZWUgSVNPIDE4MDA0OjIwMDYsIDYuNC4xLCBUYWJsZXMgMiBhbmQgMy4gVGhpcyBlbnVtIGVuY2Fwc3VsYXRlcyB0aGUgdmFyaW91cyBtb2RlcyBpbiB3aGljaAoJICogZGF0YSBjYW4gYmUgZW5jb2RlZCB0byBiaXRzIGluIHRoZSBRUiBjb2RlIHN0YW5kYXJkLjwvcD4KCSAqCgkgKiBAYXV0aG9yIFNlYW4gT3dlbgoJICovCgl2YXIgTW9kZSA9IC8qKiBAY2xhc3MgKi8gKGZ1bmN0aW9uICgpIHsKCSAgICBmdW5jdGlvbiBNb2RlKHZhbHVlLCBzdHJpbmdWYWx1ZSwgY2hhcmFjdGVyQ291bnRCaXRzRm9yVmVyc2lvbnMsIGJpdHMgLyppbnQqLykgewoJICAgICAgICB0aGlzLnZhbHVlID0gdmFsdWU7CgkgICAgICAgIHRoaXMuc3RyaW5nVmFsdWUgPSBzdHJpbmdWYWx1ZTsKCSAgICAgICAgdGhpcy5jaGFyYWN0ZXJDb3VudEJpdHNGb3JWZXJzaW9ucyA9IGNoYXJhY3RlckNvdW50Qml0c0ZvclZlcnNpb25zOwoJICAgICAgICB0aGlzLmJpdHMgPSBiaXRzOwoJICAgICAgICBNb2RlLkZPUl9CSVRTLnNldChiaXRzLCB0aGlzKTsKCSAgICAgICAgTW9kZS5GT1JfVkFMVUUuc2V0KHZhbHVlLCB0aGlzKTsKCSAgICB9CgkgICAgLyoqCgkgICAgICogQHBhcmFtIGJpdHMgZm91ciBiaXRzIGVuY29kaW5nIGEgUVIgQ29kZSBkYXRhIG1vZGUKCSAgICAgKiBAcmV0dXJuIE1vZGUgZW5jb2RlZCBieSB0aGVzZSBiaXRzCgkgICAgICogQHRocm93cyBJbGxlZ2FsQXJndW1lbnRFeGNlcHRpb24gaWYgYml0cyBkbyBub3QgY29ycmVzcG9uZCB0byBhIGtub3duIG1vZGUKCSAgICAgKi8KCSAgICBNb2RlLmZvckJpdHMgPSBmdW5jdGlvbiAoYml0cyAvKmludCovKSB7CgkgICAgICAgIHZhciBtb2RlID0gTW9kZS5GT1JfQklUUy5nZXQoYml0cyk7CgkgICAgICAgIGlmICh1bmRlZmluZWQgPT09IG1vZGUpIHsKCSAgICAgICAgICAgIHRocm93IG5ldyBJbGxlZ2FsQXJndW1lbnRFeGNlcHRpb25fMS5kZWZhdWx0KCk7CgkgICAgICAgIH0KCSAgICAgICAgcmV0dXJuIG1vZGU7CgkgICAgfTsKCSAgICAvKioKCSAgICAgKiBAcGFyYW0gdmVyc2lvbiB2ZXJzaW9uIGluIHF1ZXN0aW9uCgkgICAgICogQHJldHVybiBudW1iZXIgb2YgYml0cyB1c2VkLCBpbiB0aGlzIFFSIENvZGUgc3ltYm9sIHtAbGluayBWZXJzaW9ufSwgdG8gZW5jb2RlIHRoZQoJICAgICAqICAgICAgICAgY291bnQgb2YgY2hhcmFjdGVycyB0aGF0IHdpbGwgZm9sbG93IGVuY29kZWQgaW4gdGhpcyBNb2RlCgkgICAgICovCgkgICAgTW9kZS5wcm90b3R5cGUuZ2V0Q2hhcmFjdGVyQ291bnRCaXRzID0gZnVuY3Rpb24gKHZlcnNpb24pIHsKCSAgICAgICAgdmFyIHZlcnNpb25OdW1iZXIgPSB2ZXJzaW9uLmdldFZlcnNpb25OdW1iZXIoKTsKCSAgICAgICAgdmFyIG9mZnNldDsKCSAgICAgICAgaWYgKHZlcnNpb25OdW1iZXIgPD0gOSkgewoJICAgICAgICAgICAgb2Zmc2V0ID0gMDsKCSAgICAgICAgfQoJICAgICAgICBlbHNlIGlmICh2ZXJzaW9uTnVtYmVyIDw9IDI2KSB7CgkgICAgICAgICAgICBvZmZzZXQgPSAxOwoJICAgICAgICB9CgkgICAgICAgIGVsc2UgewoJICAgICAgICAgICAgb2Zmc2V0ID0gMjsKCSAgICAgICAgfQoJICAgICAgICByZXR1cm4gdGhpcy5jaGFyYWN0ZXJDb3VudEJpdHNGb3JWZXJzaW9uc1tvZmZzZXRdOwoJICAgIH07CgkgICAgTW9kZS5wcm90b3R5cGUuZ2V0VmFsdWUgPSBmdW5jdGlvbiAoKSB7CgkgICAgICAgIHJldHVybiB0aGlzLnZhbHVlOwoJICAgIH07CgkgICAgTW9kZS5wcm90b3R5cGUuZ2V0Qml0cyA9IGZ1bmN0aW9uICgpIHsKCSAgICAgICAgcmV0dXJuIHRoaXMuYml0czsKCSAgICB9OwoJICAgIE1vZGUucHJvdG90eXBlLmVxdWFscyA9IGZ1bmN0aW9uIChvKSB7CgkgICAgICAgIGlmICghKG8gaW5zdGFuY2VvZiBNb2RlKSkgewoJICAgICAgICAgICAgcmV0dXJuIGZhbHNlOwoJICAgICAgICB9CgkgICAgICAgIHZhciBvdGhlciA9IG87CgkgICAgICAgIHJldHVybiB0aGlzLnZhbHVlID09PSBvdGhlci52YWx1ZTsKCSAgICB9OwoJICAgIE1vZGUucHJvdG90eXBlLnRvU3RyaW5nID0gZnVuY3Rpb24gKCkgewoJICAgICAgICByZXR1cm4gdGhpcy5zdHJpbmdWYWx1ZTsKCSAgICB9OwoJICAgIE1vZGUuRk9SX0JJVFMgPSBuZXcgTWFwKCk7CgkgICAgTW9kZS5GT1JfVkFMVUUgPSBuZXcgTWFwKCk7CgkgICAgTW9kZS5URVJNSU5BVE9SID0gbmV3IE1vZGUoTW9kZVZhbHVlcy5URVJNSU5BVE9SLCAnVEVSTUlOQVRPUicsIEludDMyQXJyYXkuZnJvbShbMCwgMCwgMF0pLCAweDAwKTsgLy8gTm90IHJlYWxseSBhIG1vZGUuLi4KCSAgICBNb2RlLk5VTUVSSUMgPSBuZXcgTW9kZShNb2RlVmFsdWVzLk5VTUVSSUMsICdOVU1FUklDJywgSW50MzJBcnJheS5mcm9tKFsxMCwgMTIsIDE0XSksIDB4MDEpOwoJICAgIE1vZGUuQUxQSEFOVU1FUklDID0gbmV3IE1vZGUoTW9kZVZhbHVlcy5BTFBIQU5VTUVSSUMsICdBTFBIQU5VTUVSSUMnLCBJbnQzMkFycmF5LmZyb20oWzksIDExLCAxM10pLCAweDAyKTsKCSAgICBNb2RlLlNUUlVDVFVSRURfQVBQRU5EID0gbmV3IE1vZGUoTW9kZVZhbHVlcy5TVFJVQ1RVUkVEX0FQUEVORCwgJ1NUUlVDVFVSRURfQVBQRU5EJywgSW50MzJBcnJheS5mcm9tKFswLCAwLCAwXSksIDB4MDMpOyAvLyBOb3Qgc3VwcG9ydGVkCgkgICAgTW9kZS5CWVRFID0gbmV3IE1vZGUoTW9kZVZhbHVlcy5CWVRFLCAnQllURScsIEludDMyQXJyYXkuZnJvbShbOCwgMTYsIDE2XSksIDB4MDQpOwoJICAgIE1vZGUuRUNJID0gbmV3IE1vZGUoTW9kZVZhbHVlcy5FQ0ksICdFQ0knLCBJbnQzMkFycmF5LmZyb20oWzAsIDAsIDBdKSwgMHgwNyk7IC8vIGNoYXJhY3RlciBjb3VudHMgZG9uJ3QgYXBwbHkKCSAgICBNb2RlLktBTkpJID0gbmV3IE1vZGUoTW9kZVZhbHVlcy5LQU5KSSwgJ0tBTkpJJywgSW50MzJBcnJheS5mcm9tKFs4LCAxMCwgMTJdKSwgMHgwOCk7CgkgICAgTW9kZS5GTkMxX0ZJUlNUX1BPU0lUSU9OID0gbmV3IE1vZGUoTW9kZVZhbHVlcy5GTkMxX0ZJUlNUX1BPU0lUSU9OLCAnRk5DMV9GSVJTVF9QT1NJVElPTicsIEludDMyQXJyYXkuZnJvbShbMCwgMCwgMF0pLCAweDA1KTsKCSAgICBNb2RlLkZOQzFfU0VDT05EX1BPU0lUSU9OID0gbmV3IE1vZGUoTW9kZVZhbHVlcy5GTkMxX1NFQ09ORF9QT1NJVElPTiwgJ0ZOQzFfU0VDT05EX1BPU0lUSU9OJywgSW50MzJBcnJheS5mcm9tKFswLCAwLCAwXSksIDB4MDkpOwoJICAgIC8qKiBTZWUgR0JUIDE4Mjg0LTIwMDA7ICJIYW56aSIgaXMgYSB0cmFuc2xpdGVyYXRpb24gb2YgdGhpcyBtb2RlIG5hbWUuICovCgkgICAgTW9kZS5IQU5aSSA9IG5ldyBNb2RlKE1vZGVWYWx1ZXMuSEFOWkksICdIQU5aSScsIEludDMyQXJyYXkuZnJvbShbOCwgMTAsIDEyXSksIDB4MEQpOwoJICAgIHJldHVybiBNb2RlOwoJfSgpKTsKCWV4cG9ydHMuZGVmYXVsdCA9IE1vZGU7CgoJfShNb2RlKSk7CgoJLyoKCSAqIENvcHlyaWdodCAyMDA3IFpYaW5nIGF1dGhvcnMKCSAqCgkgKiBMaWNlbnNlZCB1bmRlciB0aGUgQXBhY2hlIExpY2Vuc2UsIFZlcnNpb24gMi4wICh0aGUgIkxpY2Vuc2UiKTsKCSAqIHlvdSBtYXkgbm90IHVzZSB0aGlzIGZpbGUgZXhjZXB0IGluIGNvbXBsaWFuY2Ugd2l0aCB0aGUgTGljZW5zZS4KCSAqIFlvdSBtYXkgb2J0YWluIGEgY29weSBvZiB0aGUgTGljZW5zZSBhdAoJICoKCSAqICAgICAgaHR0cDovL3d3dy5hcGFjaGUub3JnL2xpY2Vuc2VzL0xJQ0VOU0UtMi4wCgkgKgoJICogVW5sZXNzIHJlcXVpcmVkIGJ5IGFwcGxpY2FibGUgbGF3IG9yIGFncmVlZCB0byBpbiB3cml0aW5nLCBzb2Z0d2FyZQoJICogZGlzdHJpYnV0ZWQgdW5kZXIgdGhlIExpY2Vuc2UgaXMgZGlzdHJpYnV0ZWQgb24gYW4gIkFTIElTIiBCQVNJUywKCSAqIFdJVEhPVVQgV0FSUkFOVElFUyBPUiBDT05ESVRJT05TIE9GIEFOWSBLSU5ELCBlaXRoZXIgZXhwcmVzcyBvciBpbXBsaWVkLgoJICogU2VlIHRoZSBMaWNlbnNlIGZvciB0aGUgc3BlY2lmaWMgbGFuZ3VhZ2UgZ292ZXJuaW5nIHBlcm1pc3Npb25zIGFuZAoJICogbGltaXRhdGlvbnMgdW5kZXIgdGhlIExpY2Vuc2UuCgkgKi8KCU9iamVjdC5kZWZpbmVQcm9wZXJ0eShEZWNvZGVkQml0U3RyZWFtUGFyc2VyJDEsICJfX2VzTW9kdWxlIiwgeyB2YWx1ZTogdHJ1ZSB9KTsKCS8qbmFtZXNwYWNlIGNvbS5nb29nbGUuenhpbmcucXJjb2RlLmRlY29kZXIgeyovCgl2YXIgQml0U291cmNlXzEgPSBCaXRTb3VyY2UkMTsKCXZhciBDaGFyYWN0ZXJTZXRFQ0lfMSA9IENoYXJhY3RlclNldEVDSTsKCXZhciBEZWNvZGVyUmVzdWx0XzEgPSBEZWNvZGVyUmVzdWx0JDE7Cgl2YXIgU3RyaW5nVXRpbHNfMSA9IFN0cmluZ1V0aWxzJDE7Cgl2YXIgRm9ybWF0RXhjZXB0aW9uXzEgPSBGb3JtYXRFeGNlcHRpb24kMTsKCXZhciBTdHJpbmdCdWlsZGVyXzEgPSBTdHJpbmdCdWlsZGVyJDE7Cgl2YXIgU3RyaW5nRW5jb2RpbmdfMSA9IFN0cmluZ0VuY29kaW5nJDE7Cgl2YXIgTW9kZV8xID0gTW9kZTsKCS8qaW1wb3J0IGphdmEuaW8uVW5zdXBwb3J0ZWRFbmNvZGluZ0V4Y2VwdGlvbjsqLwoJLyppbXBvcnQgamF2YS51dGlsLkFycmF5TGlzdDsqLwoJLyppbXBvcnQgamF2YS51dGlsLkNvbGxlY3Rpb247Ki8KCS8qaW1wb3J0IGphdmEudXRpbC5MaXN0OyovCgkvKmltcG9ydCBqYXZhLnV0aWwuTWFwOyovCgkvKioKCSAqIDxwPlFSIENvZGVzIGNhbiBlbmNvZGUgdGV4dCBhcyBiaXRzIGluIG9uZSBvZiBzZXZlcmFsIG1vZGVzLCBhbmQgY2FuIHVzZSBtdWx0aXBsZSBtb2RlcwoJICogaW4gb25lIFFSIENvZGUuIFRoaXMgY2xhc3MgZGVjb2RlcyB0aGUgYml0cyBiYWNrIGludG8gdGV4dC48L3A+CgkgKgoJICogPHA+U2VlIElTTyAxODAwNDoyMDA2LCA2LjQuMyAtIDYuNC43PC9wPgoJICoKCSAqIEBhdXRob3IgU2VhbiBPd2VuCgkgKi8KCXZhciBEZWNvZGVkQml0U3RyZWFtUGFyc2VyID0gLyoqIEBjbGFzcyAqLyAoZnVuY3Rpb24gKCkgewoJICAgIGZ1bmN0aW9uIERlY29kZWRCaXRTdHJlYW1QYXJzZXIoKSB7CgkgICAgfQoJICAgIERlY29kZWRCaXRTdHJlYW1QYXJzZXIuZGVjb2RlID0gZnVuY3Rpb24gKGJ5dGVzLCB2ZXJzaW9uLCBlY0xldmVsLCBoaW50cykgewoJICAgICAgICB2YXIgYml0cyA9IG5ldyBCaXRTb3VyY2VfMS5kZWZhdWx0KGJ5dGVzKTsKCSAgICAgICAgdmFyIHJlc3VsdCA9IG5ldyBTdHJpbmdCdWlsZGVyXzEuZGVmYXVsdCgpOwoJICAgICAgICB2YXIgYnl0ZVNlZ21lbnRzID0gbmV3IEFycmF5KCk7IC8vIDEKCSAgICAgICAgLy8gVFlQRVNDUklQVFBPUlQ6IEkgZG8gbm90IHVzZSBjb25zdHJ1Y3RvciB3aXRoIHNpemUgMSBhcyBpbiBvcmlnaW5hbCBKYXZhIG1lYW5zIGNhcGFjaXR5IGFuZCB0aGUgYXJyYXkgbGVuZ3RoIGlzIGNoZWNrZWQgYmVsb3cKCSAgICAgICAgdmFyIHN5bWJvbFNlcXVlbmNlID0gLTE7CgkgICAgICAgIHZhciBwYXJpdHlEYXRhID0gLTE7CgkgICAgICAgIHRyeSB7CgkgICAgICAgICAgICB2YXIgY3VycmVudENoYXJhY3RlclNldEVDSSA9IG51bGw7CgkgICAgICAgICAgICB2YXIgZmMxSW5FZmZlY3QgPSBmYWxzZTsKCSAgICAgICAgICAgIHZhciBtb2RlID0gdm9pZCAwOwoJICAgICAgICAgICAgZG8gewoJICAgICAgICAgICAgICAgIC8vIFdoaWxlIHN0aWxsIGFub3RoZXIgc2VnbWVudCB0byByZWFkLi4uCgkgICAgICAgICAgICAgICAgaWYgKGJpdHMuYXZhaWxhYmxlKCkgPCA0KSB7CgkgICAgICAgICAgICAgICAgICAgIC8vIE9LLCBhc3N1bWUgd2UncmUgZG9uZS4gUmVhbGx5LCBhIFRFUk1JTkFUT1IgbW9kZSBzaG91bGQgaGF2ZSBiZWVuIHJlY29yZGVkIGhlcmUKCSAgICAgICAgICAgICAgICAgICAgbW9kZSA9IE1vZGVfMS5kZWZhdWx0LlRFUk1JTkFUT1I7CgkgICAgICAgICAgICAgICAgfQoJICAgICAgICAgICAgICAgIGVsc2UgewoJICAgICAgICAgICAgICAgICAgICB2YXIgbW9kZUJpdHMgPSBiaXRzLnJlYWRCaXRzKDQpOwoJICAgICAgICAgICAgICAgICAgICBtb2RlID0gTW9kZV8xLmRlZmF1bHQuZm9yQml0cyhtb2RlQml0cyk7IC8vIG1vZGUgaXMgZW5jb2RlZCBieSA0IGJpdHMKCSAgICAgICAgICAgICAgICB9CgkgICAgICAgICAgICAgICAgc3dpdGNoIChtb2RlKSB7CgkgICAgICAgICAgICAgICAgICAgIGNhc2UgTW9kZV8xLmRlZmF1bHQuVEVSTUlOQVRPUjoKCSAgICAgICAgICAgICAgICAgICAgICAgIGJyZWFrOwoJICAgICAgICAgICAgICAgICAgICBjYXNlIE1vZGVfMS5kZWZhdWx0LkZOQzFfRklSU1RfUE9TSVRJT046CgkgICAgICAgICAgICAgICAgICAgIGNhc2UgTW9kZV8xLmRlZmF1bHQuRk5DMV9TRUNPTkRfUE9TSVRJT046CgkgICAgICAgICAgICAgICAgICAgICAgICAvLyBXZSBkbyBsaXR0bGUgd2l0aCBGTkMxIGV4Y2VwdCBhbHRlciB0aGUgcGFyc2VkIHJlc3VsdCBhIGJpdCBhY2NvcmRpbmcgdG8gdGhlIHNwZWMKCSAgICAgICAgICAgICAgICAgICAgICAgIGZjMUluRWZmZWN0ID0gdHJ1ZTsKCSAgICAgICAgICAgICAgICAgICAgICAgIGJyZWFrOwoJICAgICAgICAgICAgICAgICAgICBjYXNlIE1vZGVfMS5kZWZhdWx0LlNUUlVDVFVSRURfQVBQRU5EOgoJICAgICAgICAgICAgICAgICAgICAgICAgaWYgKGJpdHMuYXZhaWxhYmxlKCkgPCAxNikgewoJICAgICAgICAgICAgICAgICAgICAgICAgICAgIHRocm93IG5ldyBGb3JtYXRFeGNlcHRpb25fMS5kZWZhdWx0KCk7CgkgICAgICAgICAgICAgICAgICAgICAgICB9CgkgICAgICAgICAgICAgICAgICAgICAgICAvLyBzZXF1ZW5jZSBudW1iZXIgYW5kIHBhcml0eSBpcyBhZGRlZCBsYXRlciB0byB0aGUgcmVzdWx0IG1ldGFkYXRhCgkgICAgICAgICAgICAgICAgICAgICAgICAvLyBSZWFkIG5leHQgOCBiaXRzIChzeW1ib2wgc2VxdWVuY2UgIykgYW5kIDggYml0cyAoZGF0YTogcGFyaXR5KSwgdGhlbiBjb250aW51ZQoJICAgICAgICAgICAgICAgICAgICAgICAgc3ltYm9sU2VxdWVuY2UgPSBiaXRzLnJlYWRCaXRzKDgpOwoJICAgICAgICAgICAgICAgICAgICAgICAgcGFyaXR5RGF0YSA9IGJpdHMucmVhZEJpdHMoOCk7CgkgICAgICAgICAgICAgICAgICAgICAgICBicmVhazsKCSAgICAgICAgICAgICAgICAgICAgY2FzZSBNb2RlXzEuZGVmYXVsdC5FQ0k6CgkgICAgICAgICAgICAgICAgICAgICAgICAvLyBDb3VudCBkb2Vzbid0IGFwcGx5IHRvIEVDSQoJICAgICAgICAgICAgICAgICAgICAgICAgdmFyIHZhbHVlID0gRGVjb2RlZEJpdFN0cmVhbVBhcnNlci5wYXJzZUVDSVZhbHVlKGJpdHMpOwoJICAgICAgICAgICAgICAgICAgICAgICAgY3VycmVudENoYXJhY3RlclNldEVDSSA9IENoYXJhY3RlclNldEVDSV8xLmRlZmF1bHQuZ2V0Q2hhcmFjdGVyU2V0RUNJQnlWYWx1ZSh2YWx1ZSk7CgkgICAgICAgICAgICAgICAgICAgICAgICBpZiAoY3VycmVudENoYXJhY3RlclNldEVDSSA9PT0gbnVsbCkgewoJICAgICAgICAgICAgICAgICAgICAgICAgICAgIHRocm93IG5ldyBGb3JtYXRFeGNlcHRpb25fMS5kZWZhdWx0KCk7CgkgICAgICAgICAgICAgICAgICAgICAgICB9CgkgICAgICAgICAgICAgICAgICAgICAgICBicmVhazsKCSAgICAgICAgICAgICAgICAgICAgY2FzZSBNb2RlXzEuZGVmYXVsdC5IQU5aSToKCSAgICAgICAgICAgICAgICAgICAgICAgIC8vIEZpcnN0IGhhbmRsZSBIYW56aSBtb2RlIHdoaWNoIGRvZXMgbm90IHN0YXJ0IHdpdGggY2hhcmFjdGVyIGNvdW50CgkgICAgICAgICAgICAgICAgICAgICAgICAvLyBDaGluZXNlIG1vZGUgY29udGFpbnMgYSBzdWIgc2V0IGluZGljYXRvciByaWdodCBhZnRlciBtb2RlIGluZGljYXRvcgoJICAgICAgICAgICAgICAgICAgICAgICAgdmFyIHN1YnNldCA9IGJpdHMucmVhZEJpdHMoNCk7CgkgICAgICAgICAgICAgICAgICAgICAgICB2YXIgY291bnRIYW56aSA9IGJpdHMucmVhZEJpdHMobW9kZS5nZXRDaGFyYWN0ZXJDb3VudEJpdHModmVyc2lvbikpOwoJICAgICAgICAgICAgICAgICAgICAgICAgaWYgKHN1YnNldCA9PT0gRGVjb2RlZEJpdFN0cmVhbVBhcnNlci5HQjIzMTJfU1VCU0VUKSB7CgkgICAgICAgICAgICAgICAgICAgICAgICAgICAgRGVjb2RlZEJpdFN0cmVhbVBhcnNlci5kZWNvZGVIYW56aVNlZ21lbnQoYml0cywgcmVzdWx0LCBjb3VudEhhbnppKTsKCSAgICAgICAgICAgICAgICAgICAgICAgIH0KCSAgICAgICAgICAgICAgICAgICAgICAgIGJyZWFrOwoJICAgICAgICAgICAgICAgICAgICBkZWZhdWx0OgoJICAgICAgICAgICAgICAgICAgICAgICAgLy8gIk5vcm1hbCIgUVIgY29kZSBtb2RlczoKCSAgICAgICAgICAgICAgICAgICAgICAgIC8vIEhvdyBtYW55IGNoYXJhY3RlcnMgd2lsbCBmb2xsb3csIGVuY29kZWQgaW4gdGhpcyBtb2RlPwoJICAgICAgICAgICAgICAgICAgICAgICAgdmFyIGNvdW50ID0gYml0cy5yZWFkQml0cyhtb2RlLmdldENoYXJhY3RlckNvdW50Qml0cyh2ZXJzaW9uKSk7CgkgICAgICAgICAgICAgICAgICAgICAgICBzd2l0Y2ggKG1vZGUpIHsKCSAgICAgICAgICAgICAgICAgICAgICAgICAgICBjYXNlIE1vZGVfMS5kZWZhdWx0Lk5VTUVSSUM6CgkgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIERlY29kZWRCaXRTdHJlYW1QYXJzZXIuZGVjb2RlTnVtZXJpY1NlZ21lbnQoYml0cywgcmVzdWx0LCBjb3VudCk7CgkgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGJyZWFrOwoJICAgICAgICAgICAgICAgICAgICAgICAgICAgIGNhc2UgTW9kZV8xLmRlZmF1bHQuQUxQSEFOVU1FUklDOgoJICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBEZWNvZGVkQml0U3RyZWFtUGFyc2VyLmRlY29kZUFscGhhbnVtZXJpY1NlZ21lbnQoYml0cywgcmVzdWx0LCBjb3VudCwgZmMxSW5FZmZlY3QpOwoJICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBicmVhazsKCSAgICAgICAgICAgICAgICAgICAgICAgICAgICBjYXNlIE1vZGVfMS5kZWZhdWx0LkJZVEU6CgkgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIERlY29kZWRCaXRTdHJlYW1QYXJzZXIuZGVjb2RlQnl0ZVNlZ21lbnQoYml0cywgcmVzdWx0LCBjb3VudCwgY3VycmVudENoYXJhY3RlclNldEVDSSwgYnl0ZVNlZ21lbnRzLCBoaW50cyk7CgkgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGJyZWFrOwoJICAgICAgICAgICAgICAgICAgICAgICAgICAgIGNhc2UgTW9kZV8xLmRlZmF1bHQuS0FOSkk6CgkgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIERlY29kZWRCaXRTdHJlYW1QYXJzZXIuZGVjb2RlS2FuamlTZWdtZW50KGJpdHMsIHJlc3VsdCwgY291bnQpOwoJICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBicmVhazsKCSAgICAgICAgICAgICAgICAgICAgICAgICAgICBkZWZhdWx0OgoJICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB0aHJvdyBuZXcgRm9ybWF0RXhjZXB0aW9uXzEuZGVmYXVsdCgpOwoJICAgICAgICAgICAgICAgICAgICAgICAgfQoJICAgICAgICAgICAgICAgICAgICAgICAgYnJlYWs7CgkgICAgICAgICAgICAgICAgfQoJICAgICAgICAgICAgfSB3aGlsZSAobW9kZSAhPT0gTW9kZV8xLmRlZmF1bHQuVEVSTUlOQVRPUik7CgkgICAgICAgIH0KCSAgICAgICAgY2F0Y2ggKGlhZSAvKjogSWxsZWdhbEFyZ3VtZW50RXhjZXB0aW9uKi8pIHsKCSAgICAgICAgICAgIC8vIGZyb20gcmVhZEJpdHMoKSBjYWxscwoJICAgICAgICAgICAgdGhyb3cgbmV3IEZvcm1hdEV4Y2VwdGlvbl8xLmRlZmF1bHQoKTsKCSAgICAgICAgfQoJICAgICAgICByZXR1cm4gbmV3IERlY29kZXJSZXN1bHRfMS5kZWZhdWx0KGJ5dGVzLCByZXN1bHQudG9TdHJpbmcoKSwgYnl0ZVNlZ21lbnRzLmxlbmd0aCA9PT0gMCA/IG51bGwgOiBieXRlU2VnbWVudHMsIGVjTGV2ZWwgPT09IG51bGwgPyBudWxsIDogZWNMZXZlbC50b1N0cmluZygpLCBzeW1ib2xTZXF1ZW5jZSwgcGFyaXR5RGF0YSk7CgkgICAgfTsKCSAgICAvKioKCSAgICAgKiBTZWUgc3BlY2lmaWNhdGlvbiBHQlQgMTgyODQtMjAwMAoJICAgICAqLwoJICAgIERlY29kZWRCaXRTdHJlYW1QYXJzZXIuZGVjb2RlSGFuemlTZWdtZW50ID0gZnVuY3Rpb24gKGJpdHMsIHJlc3VsdCwgY291bnQgLyppbnQqLykgewoJICAgICAgICAvLyBEb24ndCBjcmFzaCB0cnlpbmcgdG8gcmVhZCBtb3JlIGJpdHMgdGhhbiB3ZSBoYXZlIGF2YWlsYWJsZS4KCSAgICAgICAgaWYgKGNvdW50ICogMTMgPiBiaXRzLmF2YWlsYWJsZSgpKSB7CgkgICAgICAgICAgICB0aHJvdyBuZXcgRm9ybWF0RXhjZXB0aW9uXzEuZGVmYXVsdCgpOwoJICAgICAgICB9CgkgICAgICAgIC8vIEVhY2ggY2hhcmFjdGVyIHdpbGwgcmVxdWlyZSAyIGJ5dGVzLiBSZWFkIHRoZSBjaGFyYWN0ZXJzIGFzIDItYnl0ZSBwYWlycwoJICAgICAgICAvLyBhbmQgZGVjb2RlIGFzIEdCMjMxMiBhZnRlcndhcmRzCgkgICAgICAgIHZhciBidWZmZXIgPSBuZXcgVWludDhBcnJheSgyICogY291bnQpOwoJICAgICAgICB2YXIgb2Zmc2V0ID0gMDsKCSAgICAgICAgd2hpbGUgKGNvdW50ID4gMCkgewoJICAgICAgICAgICAgLy8gRWFjaCAxMyBiaXRzIGVuY29kZXMgYSAyLWJ5dGUgY2hhcmFjdGVyCgkgICAgICAgICAgICB2YXIgdHdvQnl0ZXMgPSBiaXRzLnJlYWRCaXRzKDEzKTsKCSAgICAgICAgICAgIHZhciBhc3NlbWJsZWRUd29CeXRlcyA9ICgoKHR3b0J5dGVzIC8gMHgwNjApIDw8IDgpICYgMHhGRkZGRkZGRikgfCAodHdvQnl0ZXMgJSAweDA2MCk7CgkgICAgICAgICAgICBpZiAoYXNzZW1ibGVkVHdvQnl0ZXMgPCAweDAwM0JGKSB7CgkgICAgICAgICAgICAgICAgLy8gSW4gdGhlIDB4QTFBMSB0byAweEFBRkUgcmFuZ2UKCSAgICAgICAgICAgICAgICBhc3NlbWJsZWRUd29CeXRlcyArPSAweDBBMUExOwoJICAgICAgICAgICAgfQoJICAgICAgICAgICAgZWxzZSB7CgkgICAgICAgICAgICAgICAgLy8gSW4gdGhlIDB4QjBBMSB0byAweEZBRkUgcmFuZ2UKCSAgICAgICAgICAgICAgICBhc3NlbWJsZWRUd29CeXRlcyArPSAweDBBNkExOwoJICAgICAgICAgICAgfQoJICAgICAgICAgICAgYnVmZmVyW29mZnNldF0gPSAvKihieXRlKSAqLyAoKGFzc2VtYmxlZFR3b0J5dGVzID4+IDgpICYgMHhGRik7CgkgICAgICAgICAgICBidWZmZXJbb2Zmc2V0ICsgMV0gPSAvKihieXRlKSAqLyAoYXNzZW1ibGVkVHdvQnl0ZXMgJiAweEZGKTsKCSAgICAgICAgICAgIG9mZnNldCArPSAyOwoJICAgICAgICAgICAgY291bnQtLTsKCSAgICAgICAgfQoJICAgICAgICB0cnkgewoJICAgICAgICAgICAgcmVzdWx0LmFwcGVuZChTdHJpbmdFbmNvZGluZ18xLmRlZmF1bHQuZGVjb2RlKGJ1ZmZlciwgU3RyaW5nVXRpbHNfMS5kZWZhdWx0LkdCMjMxMikpOwoJICAgICAgICAgICAgLy8gVFlQRVNDUklQVFBPUlQ6IFRPRE86IGltcGxlbWVudCBHQjIzMTIgZGVjb2RlLiBTdHJpbmdWaWV3IGZyb20gTUROIGNvdWxkIGJlIGEgc3RhcnRpbmcgcG9pbnQKCSAgICAgICAgfQoJICAgICAgICBjYXRjaCAoaWdub3JlZCAvKjogVW5zdXBwb3J0ZWRFbmNvZGluZ0V4Y2VwdGlvbiovKSB7CgkgICAgICAgICAgICB0aHJvdyBuZXcgRm9ybWF0RXhjZXB0aW9uXzEuZGVmYXVsdChpZ25vcmVkKTsKCSAgICAgICAgfQoJICAgIH07CgkgICAgRGVjb2RlZEJpdFN0cmVhbVBhcnNlci5kZWNvZGVLYW5qaVNlZ21lbnQgPSBmdW5jdGlvbiAoYml0cywgcmVzdWx0LCBjb3VudCAvKmludCovKSB7CgkgICAgICAgIC8vIERvbid0IGNyYXNoIHRyeWluZyB0byByZWFkIG1vcmUgYml0cyB0aGFuIHdlIGhhdmUgYXZhaWxhYmxlLgoJICAgICAgICBpZiAoY291bnQgKiAxMyA+IGJpdHMuYXZhaWxhYmxlKCkpIHsKCSAgICAgICAgICAgIHRocm93IG5ldyBGb3JtYXRFeGNlcHRpb25fMS5kZWZhdWx0KCk7CgkgICAgICAgIH0KCSAgICAgICAgLy8gRWFjaCBjaGFyYWN0ZXIgd2lsbCByZXF1aXJlIDIgYnl0ZXMuIFJlYWQgdGhlIGNoYXJhY3RlcnMgYXMgMi1ieXRlIHBhaXJzCgkgICAgICAgIC8vIGFuZCBkZWNvZGUgYXMgU2hpZnRfSklTIGFmdGVyd2FyZHMKCSAgICAgICAgdmFyIGJ1ZmZlciA9IG5ldyBVaW50OEFycmF5KDIgKiBjb3VudCk7CgkgICAgICAgIHZhciBvZmZzZXQgPSAwOwoJICAgICAgICB3aGlsZSAoY291bnQgPiAwKSB7CgkgICAgICAgICAgICAvLyBFYWNoIDEzIGJpdHMgZW5jb2RlcyBhIDItYnl0ZSBjaGFyYWN0ZXIKCSAgICAgICAgICAgIHZhciB0d29CeXRlcyA9IGJpdHMucmVhZEJpdHMoMTMpOwoJICAgICAgICAgICAgdmFyIGFzc2VtYmxlZFR3b0J5dGVzID0gKCgodHdvQnl0ZXMgLyAweDBDMCkgPDwgOCkgJiAweEZGRkZGRkZGKSB8ICh0d29CeXRlcyAlIDB4MEMwKTsKCSAgICAgICAgICAgIGlmIChhc3NlbWJsZWRUd29CeXRlcyA8IDB4MDFGMDApIHsKCSAgICAgICAgICAgICAgICAvLyBJbiB0aGUgMHg4MTQwIHRvIDB4OUZGQyByYW5nZQoJICAgICAgICAgICAgICAgIGFzc2VtYmxlZFR3b0J5dGVzICs9IDB4MDgxNDA7CgkgICAgICAgICAgICB9CgkgICAgICAgICAgICBlbHNlIHsKCSAgICAgICAgICAgICAgICAvLyBJbiB0aGUgMHhFMDQwIHRvIDB4RUJCRiByYW5nZQoJICAgICAgICAgICAgICAgIGFzc2VtYmxlZFR3b0J5dGVzICs9IDB4MEMxNDA7CgkgICAgICAgICAgICB9CgkgICAgICAgICAgICBidWZmZXJbb2Zmc2V0XSA9IC8qKGJ5dGUpICovIChhc3NlbWJsZWRUd29CeXRlcyA+PiA4KTsKCSAgICAgICAgICAgIGJ1ZmZlcltvZmZzZXQgKyAxXSA9IC8qKGJ5dGUpICovIGFzc2VtYmxlZFR3b0J5dGVzOwoJICAgICAgICAgICAgb2Zmc2V0ICs9IDI7CgkgICAgICAgICAgICBjb3VudC0tOwoJICAgICAgICB9CgkgICAgICAgIC8vIFNoaWZ0X0pJUyBtYXkgbm90IGJlIHN1cHBvcnRlZCBpbiBzb21lIGVudmlyb25tZW50czoKCSAgICAgICAgdHJ5IHsKCSAgICAgICAgICAgIHJlc3VsdC5hcHBlbmQoU3RyaW5nRW5jb2RpbmdfMS5kZWZhdWx0LmRlY29kZShidWZmZXIsIFN0cmluZ1V0aWxzXzEuZGVmYXVsdC5TSElGVF9KSVMpKTsKCSAgICAgICAgICAgIC8vIFRZUEVTQ1JJUFRQT1JUOiBUT0RPOiBpbXBsZW1lbnQgU0hJRlRfSklTIGRlY29kZS4gU3RyaW5nVmlldyBmcm9tIE1ETiBjb3VsZCBiZSBhIHN0YXJ0aW5nIHBvaW50CgkgICAgICAgIH0KCSAgICAgICAgY2F0Y2ggKGlnbm9yZWQgLyo6IFVuc3VwcG9ydGVkRW5jb2RpbmdFeGNlcHRpb24qLykgewoJICAgICAgICAgICAgdGhyb3cgbmV3IEZvcm1hdEV4Y2VwdGlvbl8xLmRlZmF1bHQoaWdub3JlZCk7CgkgICAgICAgIH0KCSAgICB9OwoJICAgIERlY29kZWRCaXRTdHJlYW1QYXJzZXIuZGVjb2RlQnl0ZVNlZ21lbnQgPSBmdW5jdGlvbiAoYml0cywgcmVzdWx0LCBjb3VudCAvKmludCovLCBjdXJyZW50Q2hhcmFjdGVyU2V0RUNJLCBieXRlU2VnbWVudHMsIGhpbnRzKSB7CgkgICAgICAgIC8vIERvbid0IGNyYXNoIHRyeWluZyB0byByZWFkIG1vcmUgYml0cyB0aGFuIHdlIGhhdmUgYXZhaWxhYmxlLgoJICAgICAgICBpZiAoOCAqIGNvdW50ID4gYml0cy5hdmFpbGFibGUoKSkgewoJICAgICAgICAgICAgdGhyb3cgbmV3IEZvcm1hdEV4Y2VwdGlvbl8xLmRlZmF1bHQoKTsKCSAgICAgICAgfQoJICAgICAgICB2YXIgcmVhZEJ5dGVzID0gbmV3IFVpbnQ4QXJyYXkoY291bnQpOwoJICAgICAgICBmb3IgKHZhciBpID0gMDsgaSA8IGNvdW50OyBpKyspIHsKCSAgICAgICAgICAgIHJlYWRCeXRlc1tpXSA9IC8qKGJ5dGUpICovIGJpdHMucmVhZEJpdHMoOCk7CgkgICAgICAgIH0KCSAgICAgICAgdmFyIGVuY29kaW5nOwoJICAgICAgICBpZiAoY3VycmVudENoYXJhY3RlclNldEVDSSA9PT0gbnVsbCkgewoJICAgICAgICAgICAgLy8gVGhlIHNwZWMgaXNuJ3QgY2xlYXIgb24gdGhpcyBtb2RlOyBzZWUKCSAgICAgICAgICAgIC8vIHNlY3Rpb24gNi40LjU6IHQgZG9lcyBub3Qgc2F5IHdoaWNoIGVuY29kaW5nIHRvIGFzc3VtaW5nCgkgICAgICAgICAgICAvLyB1cG9uIGRlY29kaW5nLiBJIGhhdmUgc2VlbiBJU08tODg1OS0xIHVzZWQgYXMgd2VsbCBhcwoJICAgICAgICAgICAgLy8gU2hpZnRfSklTIC0tIHdpdGhvdXQgYW55dGhpbmcgbGlrZSBhbiBFQ0kgZGVzaWduYXRvciB0bwoJICAgICAgICAgICAgLy8gZ2l2ZSBhIGhpbnQuCgkgICAgICAgICAgICBlbmNvZGluZyA9IFN0cmluZ1V0aWxzXzEuZGVmYXVsdC5ndWVzc0VuY29kaW5nKHJlYWRCeXRlcywgaGludHMpOwoJICAgICAgICB9CgkgICAgICAgIGVsc2UgewoJICAgICAgICAgICAgZW5jb2RpbmcgPSBjdXJyZW50Q2hhcmFjdGVyU2V0RUNJLmdldE5hbWUoKTsKCSAgICAgICAgfQoJICAgICAgICB0cnkgewoJICAgICAgICAgICAgcmVzdWx0LmFwcGVuZChTdHJpbmdFbmNvZGluZ18xLmRlZmF1bHQuZGVjb2RlKHJlYWRCeXRlcywgZW5jb2RpbmcpKTsKCSAgICAgICAgfQoJICAgICAgICBjYXRjaCAoaWdub3JlZCAvKjogVW5zdXBwb3J0ZWRFbmNvZGluZ0V4Y2VwdGlvbiovKSB7CgkgICAgICAgICAgICB0aHJvdyBuZXcgRm9ybWF0RXhjZXB0aW9uXzEuZGVmYXVsdChpZ25vcmVkKTsKCSAgICAgICAgfQoJICAgICAgICBieXRlU2VnbWVudHMucHVzaChyZWFkQnl0ZXMpOwoJICAgIH07CgkgICAgRGVjb2RlZEJpdFN0cmVhbVBhcnNlci50b0FscGhhTnVtZXJpY0NoYXIgPSBmdW5jdGlvbiAodmFsdWUgLyppbnQqLykgewoJICAgICAgICBpZiAodmFsdWUgPj0gRGVjb2RlZEJpdFN0cmVhbVBhcnNlci5BTFBIQU5VTUVSSUNfQ0hBUlMubGVuZ3RoKSB7CgkgICAgICAgICAgICB0aHJvdyBuZXcgRm9ybWF0RXhjZXB0aW9uXzEuZGVmYXVsdCgpOwoJICAgICAgICB9CgkgICAgICAgIHJldHVybiBEZWNvZGVkQml0U3RyZWFtUGFyc2VyLkFMUEhBTlVNRVJJQ19DSEFSU1t2YWx1ZV07CgkgICAgfTsKCSAgICBEZWNvZGVkQml0U3RyZWFtUGFyc2VyLmRlY29kZUFscGhhbnVtZXJpY1NlZ21lbnQgPSBmdW5jdGlvbiAoYml0cywgcmVzdWx0LCBjb3VudCAvKmludCovLCBmYzFJbkVmZmVjdCkgewoJICAgICAgICAvLyBSZWFkIHR3byBjaGFyYWN0ZXJzIGF0IGEgdGltZQoJICAgICAgICB2YXIgc3RhcnQgPSByZXN1bHQubGVuZ3RoKCk7CgkgICAgICAgIHdoaWxlIChjb3VudCA+IDEpIHsKCSAgICAgICAgICAgIGlmIChiaXRzLmF2YWlsYWJsZSgpIDwgMTEpIHsKCSAgICAgICAgICAgICAgICB0aHJvdyBuZXcgRm9ybWF0RXhjZXB0aW9uXzEuZGVmYXVsdCgpOwoJICAgICAgICAgICAgfQoJICAgICAgICAgICAgdmFyIG5leHRUd29DaGFyc0JpdHMgPSBiaXRzLnJlYWRCaXRzKDExKTsKCSAgICAgICAgICAgIHJlc3VsdC5hcHBlbmQoRGVjb2RlZEJpdFN0cmVhbVBhcnNlci50b0FscGhhTnVtZXJpY0NoYXIoTWF0aC5mbG9vcihuZXh0VHdvQ2hhcnNCaXRzIC8gNDUpKSk7CgkgICAgICAgICAgICByZXN1bHQuYXBwZW5kKERlY29kZWRCaXRTdHJlYW1QYXJzZXIudG9BbHBoYU51bWVyaWNDaGFyKG5leHRUd29DaGFyc0JpdHMgJSA0NSkpOwoJICAgICAgICAgICAgY291bnQgLT0gMjsKCSAgICAgICAgfQoJICAgICAgICBpZiAoY291bnQgPT09IDEpIHsKCSAgICAgICAgICAgIC8vIHNwZWNpYWwgY2FzZTogb25lIGNoYXJhY3RlciBsZWZ0CgkgICAgICAgICAgICBpZiAoYml0cy5hdmFpbGFibGUoKSA8IDYpIHsKCSAgICAgICAgICAgICAgICB0aHJvdyBuZXcgRm9ybWF0RXhjZXB0aW9uXzEuZGVmYXVsdCgpOwoJICAgICAgICAgICAgfQoJICAgICAgICAgICAgcmVzdWx0LmFwcGVuZChEZWNvZGVkQml0U3RyZWFtUGFyc2VyLnRvQWxwaGFOdW1lcmljQ2hhcihiaXRzLnJlYWRCaXRzKDYpKSk7CgkgICAgICAgIH0KCSAgICAgICAgLy8gU2VlIHNlY3Rpb24gNi40LjguMSwgNi40LjguMgoJICAgICAgICBpZiAoZmMxSW5FZmZlY3QpIHsKCSAgICAgICAgICAgIC8vIFdlIG5lZWQgdG8gbWFzc2FnZSB0aGUgcmVzdWx0IGEgYml0IGlmIGluIGFuIEZOQzEgbW9kZToKCSAgICAgICAgICAgIGZvciAodmFyIGkgPSBzdGFydDsgaSA8IHJlc3VsdC5sZW5ndGgoKTsgaSsrKSB7CgkgICAgICAgICAgICAgICAgaWYgKHJlc3VsdC5jaGFyQXQoaSkgPT09ICclJykgewoJICAgICAgICAgICAgICAgICAgICBpZiAoaSA8IHJlc3VsdC5sZW5ndGgoKSAtIDEgJiYgcmVzdWx0LmNoYXJBdChpICsgMSkgPT09ICclJykgewoJICAgICAgICAgICAgICAgICAgICAgICAgLy8gJSUgaXMgcmVuZGVyZWQgYXMgJQoJICAgICAgICAgICAgICAgICAgICAgICAgcmVzdWx0LmRlbGV0ZUNoYXJBdChpICsgMSk7CgkgICAgICAgICAgICAgICAgICAgIH0KCSAgICAgICAgICAgICAgICAgICAgZWxzZSB7CgkgICAgICAgICAgICAgICAgICAgICAgICAvLyBJbiBhbHBoYSBtb2RlLCAlIHNob3VsZCBiZSBjb252ZXJ0ZWQgdG8gRk5DMSBzZXBhcmF0b3IgMHgxRAoJICAgICAgICAgICAgICAgICAgICAgICAgcmVzdWx0LnNldENoYXJBdChpLCBTdHJpbmcuZnJvbUNoYXJDb2RlKDB4MUQpKTsKCSAgICAgICAgICAgICAgICAgICAgfQoJICAgICAgICAgICAgICAgIH0KCSAgICAgICAgICAgIH0KCSAgICAgICAgfQoJICAgIH07CgkgICAgRGVjb2RlZEJpdFN0cmVhbVBhcnNlci5kZWNvZGVOdW1lcmljU2VnbWVudCA9IGZ1bmN0aW9uIChiaXRzLCByZXN1bHQsIGNvdW50IC8qaW50Ki8pIHsKCSAgICAgICAgLy8gUmVhZCB0aHJlZSBkaWdpdHMgYXQgYSB0aW1lCgkgICAgICAgIHdoaWxlIChjb3VudCA+PSAzKSB7CgkgICAgICAgICAgICAvLyBFYWNoIDEwIGJpdHMgZW5jb2RlcyB0aHJlZSBkaWdpdHMKCSAgICAgICAgICAgIGlmIChiaXRzLmF2YWlsYWJsZSgpIDwgMTApIHsKCSAgICAgICAgICAgICAgICB0aHJvdyBuZXcgRm9ybWF0RXhjZXB0aW9uXzEuZGVmYXVsdCgpOwoJICAgICAgICAgICAgfQoJICAgICAgICAgICAgdmFyIHRocmVlRGlnaXRzQml0cyA9IGJpdHMucmVhZEJpdHMoMTApOwoJICAgICAgICAgICAgaWYgKHRocmVlRGlnaXRzQml0cyA+PSAxMDAwKSB7CgkgICAgICAgICAgICAgICAgdGhyb3cgbmV3IEZvcm1hdEV4Y2VwdGlvbl8xLmRlZmF1bHQoKTsKCSAgICAgICAgICAgIH0KCSAgICAgICAgICAgIHJlc3VsdC5hcHBlbmQoRGVjb2RlZEJpdFN0cmVhbVBhcnNlci50b0FscGhhTnVtZXJpY0NoYXIoTWF0aC5mbG9vcih0aHJlZURpZ2l0c0JpdHMgLyAxMDApKSk7CgkgICAgICAgICAgICByZXN1bHQuYXBwZW5kKERlY29kZWRCaXRTdHJlYW1QYXJzZXIudG9BbHBoYU51bWVyaWNDaGFyKE1hdGguZmxvb3IodGhyZWVEaWdpdHNCaXRzIC8gMTApICUgMTApKTsKCSAgICAgICAgICAgIHJlc3VsdC5hcHBlbmQoRGVjb2RlZEJpdFN0cmVhbVBhcnNlci50b0FscGhhTnVtZXJpY0NoYXIodGhyZWVEaWdpdHNCaXRzICUgMTApKTsKCSAgICAgICAgICAgIGNvdW50IC09IDM7CgkgICAgICAgIH0KCSAgICAgICAgaWYgKGNvdW50ID09PSAyKSB7CgkgICAgICAgICAgICAvLyBUd28gZGlnaXRzIGxlZnQgb3ZlciB0byByZWFkLCBlbmNvZGVkIGluIDcgYml0cwoJICAgICAgICAgICAgaWYgKGJpdHMuYXZhaWxhYmxlKCkgPCA3KSB7CgkgICAgICAgICAgICAgICAgdGhyb3cgbmV3IEZvcm1hdEV4Y2VwdGlvbl8xLmRlZmF1bHQoKTsKCSAgICAgICAgICAgIH0KCSAgICAgICAgICAgIHZhciB0d29EaWdpdHNCaXRzID0gYml0cy5yZWFkQml0cyg3KTsKCSAgICAgICAgICAgIGlmICh0d29EaWdpdHNCaXRzID49IDEwMCkgewoJICAgICAgICAgICAgICAgIHRocm93IG5ldyBGb3JtYXRFeGNlcHRpb25fMS5kZWZhdWx0KCk7CgkgICAgICAgICAgICB9CgkgICAgICAgICAgICByZXN1bHQuYXBwZW5kKERlY29kZWRCaXRTdHJlYW1QYXJzZXIudG9BbHBoYU51bWVyaWNDaGFyKE1hdGguZmxvb3IodHdvRGlnaXRzQml0cyAvIDEwKSkpOwoJICAgICAgICAgICAgcmVzdWx0LmFwcGVuZChEZWNvZGVkQml0U3RyZWFtUGFyc2VyLnRvQWxwaGFOdW1lcmljQ2hhcih0d29EaWdpdHNCaXRzICUgMTApKTsKCSAgICAgICAgfQoJICAgICAgICBlbHNlIGlmIChjb3VudCA9PT0gMSkgewoJICAgICAgICAgICAgLy8gT25lIGRpZ2l0IGxlZnQgb3ZlciB0byByZWFkCgkgICAgICAgICAgICBpZiAoYml0cy5hdmFpbGFibGUoKSA8IDQpIHsKCSAgICAgICAgICAgICAgICB0aHJvdyBuZXcgRm9ybWF0RXhjZXB0aW9uXzEuZGVmYXVsdCgpOwoJICAgICAgICAgICAgfQoJICAgICAgICAgICAgdmFyIGRpZ2l0Qml0cyA9IGJpdHMucmVhZEJpdHMoNCk7CgkgICAgICAgICAgICBpZiAoZGlnaXRCaXRzID49IDEwKSB7CgkgICAgICAgICAgICAgICAgdGhyb3cgbmV3IEZvcm1hdEV4Y2VwdGlvbl8xLmRlZmF1bHQoKTsKCSAgICAgICAgICAgIH0KCSAgICAgICAgICAgIHJlc3VsdC5hcHBlbmQoRGVjb2RlZEJpdFN0cmVhbVBhcnNlci50b0FscGhhTnVtZXJpY0NoYXIoZGlnaXRCaXRzKSk7CgkgICAgICAgIH0KCSAgICB9OwoJICAgIERlY29kZWRCaXRTdHJlYW1QYXJzZXIucGFyc2VFQ0lWYWx1ZSA9IGZ1bmN0aW9uIChiaXRzKSB7CgkgICAgICAgIHZhciBmaXJzdEJ5dGUgPSBiaXRzLnJlYWRCaXRzKDgpOwoJICAgICAgICBpZiAoKGZpcnN0Qnl0ZSAmIDB4ODApID09PSAwKSB7CgkgICAgICAgICAgICAvLyBqdXN0IG9uZSBieXRlCgkgICAgICAgICAgICByZXR1cm4gZmlyc3RCeXRlICYgMHg3RjsKCSAgICAgICAgfQoJICAgICAgICBpZiAoKGZpcnN0Qnl0ZSAmIDB4QzApID09PSAweDgwKSB7CgkgICAgICAgICAgICAvLyB0d28gYnl0ZXMKCSAgICAgICAgICAgIHZhciBzZWNvbmRCeXRlID0gYml0cy5yZWFkQml0cyg4KTsKCSAgICAgICAgICAgIHJldHVybiAoKChmaXJzdEJ5dGUgJiAweDNGKSA8PCA4KSAmIDB4RkZGRkZGRkYpIHwgc2Vjb25kQnl0ZTsKCSAgICAgICAgfQoJICAgICAgICBpZiAoKGZpcnN0Qnl0ZSAmIDB4RTApID09PSAweEMwKSB7CgkgICAgICAgICAgICAvLyB0aHJlZSBieXRlcwoJICAgICAgICAgICAgdmFyIHNlY29uZFRoaXJkQnl0ZXMgPSBiaXRzLnJlYWRCaXRzKDE2KTsKCSAgICAgICAgICAgIHJldHVybiAoKChmaXJzdEJ5dGUgJiAweDFGKSA8PCAxNikgJiAweEZGRkZGRkZGKSB8IHNlY29uZFRoaXJkQnl0ZXM7CgkgICAgICAgIH0KCSAgICAgICAgdGhyb3cgbmV3IEZvcm1hdEV4Y2VwdGlvbl8xLmRlZmF1bHQoKTsKCSAgICB9OwoJICAgIC8qKgoJICAgICAqIFNlZSBJU08gMTgwMDQ6MjAwNiwgNi40LjQgVGFibGUgNQoJICAgICAqLwoJICAgIERlY29kZWRCaXRTdHJlYW1QYXJzZXIuQUxQSEFOVU1FUklDX0NIQVJTID0gJzAxMjM0NTY3ODlBQkNERUZHSElKS0xNTk9QUVJTVFVWV1hZWiAkJSorLS4vOic7CgkgICAgRGVjb2RlZEJpdFN0cmVhbVBhcnNlci5HQjIzMTJfU1VCU0VUID0gMTsKCSAgICByZXR1cm4gRGVjb2RlZEJpdFN0cmVhbVBhcnNlcjsKCX0oKSk7CglEZWNvZGVkQml0U3RyZWFtUGFyc2VyJDEuZGVmYXVsdCA9IERlY29kZWRCaXRTdHJlYW1QYXJzZXI7CgoJdmFyIFFSQ29kZURlY29kZXJNZXRhRGF0YSQxID0ge307CgoJLyoKCSAqIENvcHlyaWdodCAyMDEzIFpYaW5nIGF1dGhvcnMKCSAqCgkgKiBMaWNlbnNlZCB1bmRlciB0aGUgQXBhY2hlIExpY2Vuc2UsIFZlcnNpb24gMi4wICh0aGUgIkxpY2Vuc2UiKTsKCSAqIHlvdSBtYXkgbm90IHVzZSB0aGlzIGZpbGUgZXhjZXB0IGluIGNvbXBsaWFuY2Ugd2l0aCB0aGUgTGljZW5zZS4KCSAqIFlvdSBtYXkgb2J0YWluIGEgY29weSBvZiB0aGUgTGljZW5zZSBhdAoJICoKCSAqICAgICAgaHR0cDovL3d3dy5hcGFjaGUub3JnL2xpY2Vuc2VzL0xJQ0VOU0UtMi4wCgkgKgoJICogVW5sZXNzIHJlcXVpcmVkIGJ5IGFwcGxpY2FibGUgbGF3IG9yIGFncmVlZCB0byBpbiB3cml0aW5nLCBzb2Z0d2FyZQoJICogZGlzdHJpYnV0ZWQgdW5kZXIgdGhlIExpY2Vuc2UgaXMgZGlzdHJpYnV0ZWQgb24gYW4gIkFTIElTIiBCQVNJUywKCSAqIFdJVEhPVVQgV0FSUkFOVElFUyBPUiBDT05ESVRJT05TIE9GIEFOWSBLSU5ELCBlaXRoZXIgZXhwcmVzcyBvciBpbXBsaWVkLgoJICogU2VlIHRoZSBMaWNlbnNlIGZvciB0aGUgc3BlY2lmaWMgbGFuZ3VhZ2UgZ292ZXJuaW5nIHBlcm1pc3Npb25zIGFuZAoJICogbGltaXRhdGlvbnMgdW5kZXIgdGhlIExpY2Vuc2UuCgkgKi8KCU9iamVjdC5kZWZpbmVQcm9wZXJ0eShRUkNvZGVEZWNvZGVyTWV0YURhdGEkMSwgIl9fZXNNb2R1bGUiLCB7IHZhbHVlOiB0cnVlIH0pOwoJLyoqCgkgKiBNZXRhLWRhdGEgY29udGFpbmVyIGZvciBRUiBDb2RlIGRlY29kaW5nLiBJbnN0YW5jZXMgb2YgdGhpcyBjbGFzcyBtYXkgYmUgdXNlZCB0byBjb252ZXkgaW5mb3JtYXRpb24gYmFjayB0byB0aGUKCSAqIGRlY29kaW5nIGNhbGxlci4gQ2FsbGVycyBhcmUgZXhwZWN0ZWQgdG8gcHJvY2VzcyB0aGlzLgoJICoKCSAqIEBzZWUgY29tLmdvb2dsZS56eGluZy5jb21tb24uRGVjb2RlclJlc3VsdCNnZXRPdGhlcigpCgkgKi8KCXZhciBRUkNvZGVEZWNvZGVyTWV0YURhdGEgPSAvKiogQGNsYXNzICovIChmdW5jdGlvbiAoKSB7CgkgICAgZnVuY3Rpb24gUVJDb2RlRGVjb2Rlck1ldGFEYXRhKG1pcnJvcmVkKSB7CgkgICAgICAgIHRoaXMubWlycm9yZWQgPSBtaXJyb3JlZDsKCSAgICB9CgkgICAgLyoqCgkgICAgICogQHJldHVybiB0cnVlIGlmIHRoZSBRUiBDb2RlIHdhcyBtaXJyb3JlZC4KCSAgICAgKi8KCSAgICBRUkNvZGVEZWNvZGVyTWV0YURhdGEucHJvdG90eXBlLmlzTWlycm9yZWQgPSBmdW5jdGlvbiAoKSB7CgkgICAgICAgIHJldHVybiB0aGlzLm1pcnJvcmVkOwoJICAgIH07CgkgICAgLyoqCgkgICAgICogQXBwbHkgdGhlIHJlc3VsdCBwb2ludHMnIG9yZGVyIGNvcnJlY3Rpb24gZHVlIHRvIG1pcnJvcmluZy4KCSAgICAgKgoJICAgICAqIEBwYXJhbSBwb2ludHMgQXJyYXkgb2YgcG9pbnRzIHRvIGFwcGx5IG1pcnJvciBjb3JyZWN0aW9uIHRvLgoJICAgICAqLwoJICAgIFFSQ29kZURlY29kZXJNZXRhRGF0YS5wcm90b3R5cGUuYXBwbHlNaXJyb3JlZENvcnJlY3Rpb24gPSBmdW5jdGlvbiAocG9pbnRzKSB7CgkgICAgICAgIGlmICghdGhpcy5taXJyb3JlZCB8fCBwb2ludHMgPT09IG51bGwgfHwgcG9pbnRzLmxlbmd0aCA8IDMpIHsKCSAgICAgICAgICAgIHJldHVybjsKCSAgICAgICAgfQoJICAgICAgICB2YXIgYm90dG9tTGVmdCA9IHBvaW50c1swXTsKCSAgICAgICAgcG9pbnRzWzBdID0gcG9pbnRzWzJdOwoJICAgICAgICBwb2ludHNbMl0gPSBib3R0b21MZWZ0OwoJICAgICAgICAvLyBObyBuZWVkIHRvICdmaXgnIHRvcC1sZWZ0IGFuZCBhbGlnbm1lbnQgcGF0dGVybi4KCSAgICB9OwoJICAgIHJldHVybiBRUkNvZGVEZWNvZGVyTWV0YURhdGE7Cgl9KCkpOwoJUVJDb2RlRGVjb2Rlck1ldGFEYXRhJDEuZGVmYXVsdCA9IFFSQ29kZURlY29kZXJNZXRhRGF0YTsKCgkvKgoJICogQ29weXJpZ2h0IDIwMDcgWlhpbmcgYXV0aG9ycwoJICoKCSAqIExpY2Vuc2VkIHVuZGVyIHRoZSBBcGFjaGUgTGljZW5zZSwgVmVyc2lvbiAyLjAgKHRoZSAiTGljZW5zZSIpOwoJICogeW91IG1heSBub3QgdXNlIHRoaXMgZmlsZSBleGNlcHQgaW4gY29tcGxpYW5jZSB3aXRoIHRoZSBMaWNlbnNlLgoJICogWW91IG1heSBvYnRhaW4gYSBjb3B5IG9mIHRoZSBMaWNlbnNlIGF0CgkgKgoJICogICAgICBodHRwOi8vd3d3LmFwYWNoZS5vcmcvbGljZW5zZXMvTElDRU5TRS0yLjAKCSAqCgkgKiBVbmxlc3MgcmVxdWlyZWQgYnkgYXBwbGljYWJsZSBsYXcgb3IgYWdyZWVkIHRvIGluIHdyaXRpbmcsIHNvZnR3YXJlCgkgKiBkaXN0cmlidXRlZCB1bmRlciB0aGUgTGljZW5zZSBpcyBkaXN0cmlidXRlZCBvbiBhbiAiQVMgSVMiIEJBU0lTLAoJICogV0lUSE9VVCBXQVJSQU5USUVTIE9SIENPTkRJVElPTlMgT0YgQU5ZIEtJTkQsIGVpdGhlciBleHByZXNzIG9yIGltcGxpZWQuCgkgKiBTZWUgdGhlIExpY2Vuc2UgZm9yIHRoZSBzcGVjaWZpYyBsYW5ndWFnZSBnb3Zlcm5pbmcgcGVybWlzc2lvbnMgYW5kCgkgKiBsaW1pdGF0aW9ucyB1bmRlciB0aGUgTGljZW5zZS4KCSAqLwoJdmFyIF9fdmFsdWVzJDIgPSAoY29tbW9uanNHbG9iYWwgJiYgY29tbW9uanNHbG9iYWwuX192YWx1ZXMpIHx8IGZ1bmN0aW9uKG8pIHsKCSAgICB2YXIgcyA9IHR5cGVvZiBTeW1ib2wgPT09ICJmdW5jdGlvbiIgJiYgU3ltYm9sLml0ZXJhdG9yLCBtID0gcyAmJiBvW3NdLCBpID0gMDsKCSAgICBpZiAobSkgcmV0dXJuIG0uY2FsbChvKTsKCSAgICBpZiAobyAmJiB0eXBlb2Ygby5sZW5ndGggPT09ICJudW1iZXIiKSByZXR1cm4gewoJICAgICAgICBuZXh0OiBmdW5jdGlvbiAoKSB7CgkgICAgICAgICAgICBpZiAobyAmJiBpID49IG8ubGVuZ3RoKSBvID0gdm9pZCAwOwoJICAgICAgICAgICAgcmV0dXJuIHsgdmFsdWU6IG8gJiYgb1tpKytdLCBkb25lOiAhbyB9OwoJICAgICAgICB9CgkgICAgfTsKCSAgICB0aHJvdyBuZXcgVHlwZUVycm9yKHMgPyAiT2JqZWN0IGlzIG5vdCBpdGVyYWJsZS4iIDogIlN5bWJvbC5pdGVyYXRvciBpcyBub3QgZGVmaW5lZC4iKTsKCX07CglPYmplY3QuZGVmaW5lUHJvcGVydHkoRGVjb2RlciQxLCAiX19lc01vZHVsZSIsIHsgdmFsdWU6IHRydWUgfSk7CgkvKm5hbWVzcGFjZSBjb20uZ29vZ2xlLnp4aW5nLnFyY29kZS5kZWNvZGVyIHsqLwoJdmFyIENoZWNrc3VtRXhjZXB0aW9uXzEgPSBDaGVja3N1bUV4Y2VwdGlvbiQxOwoJdmFyIEJpdE1hdHJpeF8xJDIgPSBCaXRNYXRyaXgkMTsKCXZhciBHZW5lcmljR0ZfMSA9IEdlbmVyaWNHRiQxOwoJdmFyIFJlZWRTb2xvbW9uRGVjb2Rlcl8xID0gUmVlZFNvbG9tb25EZWNvZGVyJDE7Cgl2YXIgQml0TWF0cml4UGFyc2VyXzEgPSBCaXRNYXRyaXhQYXJzZXIkMTsKCXZhciBEYXRhQmxvY2tfMSA9IERhdGFCbG9jayQxOwoJdmFyIERlY29kZWRCaXRTdHJlYW1QYXJzZXJfMSA9IERlY29kZWRCaXRTdHJlYW1QYXJzZXIkMTsKCXZhciBRUkNvZGVEZWNvZGVyTWV0YURhdGFfMSQxID0gUVJDb2RlRGVjb2Rlck1ldGFEYXRhJDE7CgkvKmltcG9ydCBqYXZhLnV0aWwuTWFwOyovCgkvKioKCSAqIDxwPlRoZSBtYWluIGNsYXNzIHdoaWNoIGltcGxlbWVudHMgUVIgQ29kZSBkZWNvZGluZyAtLSBhcyBvcHBvc2VkIHRvIGxvY2F0aW5nIGFuZCBleHRyYWN0aW5nCgkgKiB0aGUgUVIgQ29kZSBmcm9tIGFuIGltYWdlLjwvcD4KCSAqCgkgKiBAYXV0aG9yIFNlYW4gT3dlbgoJICovCgl2YXIgRGVjb2RlciA9IC8qKiBAY2xhc3MgKi8gKGZ1bmN0aW9uICgpIHsKCSAgICBmdW5jdGlvbiBEZWNvZGVyKCkgewoJICAgICAgICB0aGlzLnJzRGVjb2RlciA9IG5ldyBSZWVkU29sb21vbkRlY29kZXJfMS5kZWZhdWx0KEdlbmVyaWNHRl8xLmRlZmF1bHQuUVJfQ09ERV9GSUVMRF8yNTYpOwoJICAgIH0KCSAgICAvLyBwdWJsaWMgZGVjb2RlKGltYWdlOiBib29sZWFuW11bXSk6IERlY29kZXJSZXN1bHQgLyp0aHJvd3MgQ2hlY2tzdW1FeGNlcHRpb24sIEZvcm1hdEV4Y2VwdGlvbiovIHsKCSAgICAvLyAgIHJldHVybiBkZWNvZGUoaW1hZ2UsIG51bGwpCgkgICAgLy8gfQoJICAgIC8qKgoJICAgICAqIDxwPkNvbnZlbmllbmNlIG1ldGhvZCB0aGF0IGNhbiBkZWNvZGUgYSBRUiBDb2RlIHJlcHJlc2VudGVkIGFzIGEgMkQgYXJyYXkgb2YgYm9vbGVhbnMuCgkgICAgICogInRydWUiIGlzIHRha2VuIHRvIG1lYW4gYSBibGFjayBtb2R1bGUuPC9wPgoJICAgICAqCgkgICAgICogQHBhcmFtIGltYWdlIGJvb2xlYW5zIHJlcHJlc2VudGluZyB3aGl0ZS9ibGFjayBRUiBDb2RlIG1vZHVsZXMKCSAgICAgKiBAcGFyYW0gaGludHMgZGVjb2RpbmcgaGludHMgdGhhdCBzaG91bGQgYmUgdXNlZCB0byBpbmZsdWVuY2UgZGVjb2RpbmcKCSAgICAgKiBAcmV0dXJuIHRleHQgYW5kIGJ5dGVzIGVuY29kZWQgd2l0aGluIHRoZSBRUiBDb2RlCgkgICAgICogQHRocm93cyBGb3JtYXRFeGNlcHRpb24gaWYgdGhlIFFSIENvZGUgY2Fubm90IGJlIGRlY29kZWQKCSAgICAgKiBAdGhyb3dzIENoZWNrc3VtRXhjZXB0aW9uIGlmIGVycm9yIGNvcnJlY3Rpb24gZmFpbHMKCSAgICAgKi8KCSAgICBEZWNvZGVyLnByb3RvdHlwZS5kZWNvZGVCb29sZWFuQXJyYXkgPSBmdW5jdGlvbiAoaW1hZ2UsIGhpbnRzKSB7CgkgICAgICAgIHJldHVybiB0aGlzLmRlY29kZUJpdE1hdHJpeChCaXRNYXRyaXhfMSQyLmRlZmF1bHQucGFyc2VGcm9tQm9vbGVhbkFycmF5KGltYWdlKSwgaGludHMpOwoJICAgIH07CgkgICAgLy8gcHVibGljIGRlY29kZUJpdE1hdHJpeChiaXRzOiBCaXRNYXRyaXgpOiBEZWNvZGVyUmVzdWx0IC8qdGhyb3dzIENoZWNrc3VtRXhjZXB0aW9uLCBGb3JtYXRFeGNlcHRpb24qLyB7CgkgICAgLy8gICByZXR1cm4gZGVjb2RlKGJpdHMsIG51bGwpCgkgICAgLy8gfQoJICAgIC8qKgoJICAgICAqIDxwPkRlY29kZXMgYSBRUiBDb2RlIHJlcHJlc2VudGVkIGFzIGEge0BsaW5rIEJpdE1hdHJpeH0uIEEgMSBvciAidHJ1ZSIgaXMgdGFrZW4gdG8gbWVhbiBhIGJsYWNrIG1vZHVsZS48L3A+CgkgICAgICoKCSAgICAgKiBAcGFyYW0gYml0cyBib29sZWFucyByZXByZXNlbnRpbmcgd2hpdGUvYmxhY2sgUVIgQ29kZSBtb2R1bGVzCgkgICAgICogQHBhcmFtIGhpbnRzIGRlY29kaW5nIGhpbnRzIHRoYXQgc2hvdWxkIGJlIHVzZWQgdG8gaW5mbHVlbmNlIGRlY29kaW5nCgkgICAgICogQHJldHVybiB0ZXh0IGFuZCBieXRlcyBlbmNvZGVkIHdpdGhpbiB0aGUgUVIgQ29kZQoJICAgICAqIEB0aHJvd3MgRm9ybWF0RXhjZXB0aW9uIGlmIHRoZSBRUiBDb2RlIGNhbm5vdCBiZSBkZWNvZGVkCgkgICAgICogQHRocm93cyBDaGVja3N1bUV4Y2VwdGlvbiBpZiBlcnJvciBjb3JyZWN0aW9uIGZhaWxzCgkgICAgICovCgkgICAgRGVjb2Rlci5wcm90b3R5cGUuZGVjb2RlQml0TWF0cml4ID0gZnVuY3Rpb24gKGJpdHMsIGhpbnRzKSB7CgkgICAgICAgIC8vIENvbnN0cnVjdCBhIHBhcnNlciBhbmQgcmVhZCB2ZXJzaW9uLCBlcnJvci1jb3JyZWN0aW9uIGxldmVsCgkgICAgICAgIHZhciBwYXJzZXIgPSBuZXcgQml0TWF0cml4UGFyc2VyXzEuZGVmYXVsdChiaXRzKTsKCSAgICAgICAgdmFyIGV4ID0gbnVsbDsKCSAgICAgICAgdHJ5IHsKCSAgICAgICAgICAgIHJldHVybiB0aGlzLmRlY29kZUJpdE1hdHJpeFBhcnNlcihwYXJzZXIsIGhpbnRzKTsKCSAgICAgICAgfQoJICAgICAgICBjYXRjaCAoZSAvKjogRm9ybWF0RXhjZXB0aW9uLCBDaGVja3N1bUV4Y2VwdGlvbiovKSB7CgkgICAgICAgICAgICBleCA9IGU7CgkgICAgICAgIH0KCSAgICAgICAgdHJ5IHsKCSAgICAgICAgICAgIC8vIFJldmVydCB0aGUgYml0IG1hdHJpeAoJICAgICAgICAgICAgcGFyc2VyLnJlbWFzaygpOwoJICAgICAgICAgICAgLy8gV2lsbCBiZSBhdHRlbXB0aW5nIGEgbWlycm9yZWQgcmVhZGluZyBvZiB0aGUgdmVyc2lvbiBhbmQgZm9ybWF0IGluZm8uCgkgICAgICAgICAgICBwYXJzZXIuc2V0TWlycm9yKHRydWUpOwoJICAgICAgICAgICAgLy8gUHJlZW1wdGl2ZWx5IHJlYWQgdGhlIHZlcnNpb24uCgkgICAgICAgICAgICBwYXJzZXIucmVhZFZlcnNpb24oKTsKCSAgICAgICAgICAgIC8vIFByZWVtcHRpdmVseSByZWFkIHRoZSBmb3JtYXQgaW5mb3JtYXRpb24uCgkgICAgICAgICAgICBwYXJzZXIucmVhZEZvcm1hdEluZm9ybWF0aW9uKCk7CgkgICAgICAgICAgICAvKgoJICAgICAgICAgICAgICogU2luY2Ugd2UncmUgaGVyZSwgdGhpcyBtZWFucyB3ZSBoYXZlIHN1Y2Nlc3NmdWxseSBkZXRlY3RlZCBzb21lIGtpbmQKCSAgICAgICAgICAgICAqIG9mIHZlcnNpb24gYW5kIGZvcm1hdCBpbmZvcm1hdGlvbiB3aGVuIG1pcnJvcmVkLiBUaGlzIGlzIGEgZ29vZCBzaWduLAoJICAgICAgICAgICAgICogdGhhdCB0aGUgUVIgY29kZSBtYXkgYmUgbWlycm9yZWQsIGFuZCB3ZSBzaG91bGQgdHJ5IG9uY2UgbW9yZSB3aXRoIGEKCSAgICAgICAgICAgICAqIG1pcnJvcmVkIGNvbnRlbnQuCgkgICAgICAgICAgICAgKi8KCSAgICAgICAgICAgIC8vIFByZXBhcmUgZm9yIGEgbWlycm9yZWQgcmVhZGluZy4KCSAgICAgICAgICAgIHBhcnNlci5taXJyb3IoKTsKCSAgICAgICAgICAgIHZhciByZXN1bHQgPSB0aGlzLmRlY29kZUJpdE1hdHJpeFBhcnNlcihwYXJzZXIsIGhpbnRzKTsKCSAgICAgICAgICAgIC8vIFN1Y2Nlc3MhIE5vdGlmeSB0aGUgY2FsbGVyIHRoYXQgdGhlIGNvZGUgd2FzIG1pcnJvcmVkLgoJICAgICAgICAgICAgcmVzdWx0LnNldE90aGVyKG5ldyBRUkNvZGVEZWNvZGVyTWV0YURhdGFfMSQxLmRlZmF1bHQodHJ1ZSkpOwoJICAgICAgICAgICAgcmV0dXJuIHJlc3VsdDsKCSAgICAgICAgfQoJICAgICAgICBjYXRjaCAoZSAvKkZvcm1hdEV4Y2VwdGlvbiB8IENoZWNrc3VtRXhjZXB0aW9uKi8pIHsKCSAgICAgICAgICAgIC8vIFRocm93IHRoZSBleGNlcHRpb24gZnJvbSB0aGUgb3JpZ2luYWwgcmVhZGluZwoJICAgICAgICAgICAgaWYgKGV4ICE9PSBudWxsKSB7CgkgICAgICAgICAgICAgICAgdGhyb3cgZXg7CgkgICAgICAgICAgICB9CgkgICAgICAgICAgICB0aHJvdyBlOwoJICAgICAgICB9CgkgICAgfTsKCSAgICBEZWNvZGVyLnByb3RvdHlwZS5kZWNvZGVCaXRNYXRyaXhQYXJzZXIgPSBmdW5jdGlvbiAocGFyc2VyLCBoaW50cykgewoJICAgICAgICB2YXIgZV8xLCBfYSwgZV8yLCBfYjsKCSAgICAgICAgdmFyIHZlcnNpb24gPSBwYXJzZXIucmVhZFZlcnNpb24oKTsKCSAgICAgICAgdmFyIGVjTGV2ZWwgPSBwYXJzZXIucmVhZEZvcm1hdEluZm9ybWF0aW9uKCkuZ2V0RXJyb3JDb3JyZWN0aW9uTGV2ZWwoKTsKCSAgICAgICAgLy8gUmVhZCBjb2Rld29yZHMKCSAgICAgICAgdmFyIGNvZGV3b3JkcyA9IHBhcnNlci5yZWFkQ29kZXdvcmRzKCk7CgkgICAgICAgIC8vIFNlcGFyYXRlIGludG8gZGF0YSBibG9ja3MKCSAgICAgICAgdmFyIGRhdGFCbG9ja3MgPSBEYXRhQmxvY2tfMS5kZWZhdWx0LmdldERhdGFCbG9ja3MoY29kZXdvcmRzLCB2ZXJzaW9uLCBlY0xldmVsKTsKCSAgICAgICAgLy8gQ291bnQgdG90YWwgbnVtYmVyIG9mIGRhdGEgYnl0ZXMKCSAgICAgICAgdmFyIHRvdGFsQnl0ZXMgPSAwOwoJICAgICAgICB0cnkgewoJICAgICAgICAgICAgZm9yICh2YXIgZGF0YUJsb2Nrc18xID0gX192YWx1ZXMkMihkYXRhQmxvY2tzKSwgZGF0YUJsb2Nrc18xXzEgPSBkYXRhQmxvY2tzXzEubmV4dCgpOyAhZGF0YUJsb2Nrc18xXzEuZG9uZTsgZGF0YUJsb2Nrc18xXzEgPSBkYXRhQmxvY2tzXzEubmV4dCgpKSB7CgkgICAgICAgICAgICAgICAgdmFyIGRhdGFCbG9jayA9IGRhdGFCbG9ja3NfMV8xLnZhbHVlOwoJICAgICAgICAgICAgICAgIHRvdGFsQnl0ZXMgKz0gZGF0YUJsb2NrLmdldE51bURhdGFDb2Rld29yZHMoKTsKCSAgICAgICAgICAgIH0KCSAgICAgICAgfQoJICAgICAgICBjYXRjaCAoZV8xXzEpIHsgZV8xID0geyBlcnJvcjogZV8xXzEgfTsgfQoJICAgICAgICBmaW5hbGx5IHsKCSAgICAgICAgICAgIHRyeSB7CgkgICAgICAgICAgICAgICAgaWYgKGRhdGFCbG9ja3NfMV8xICYmICFkYXRhQmxvY2tzXzFfMS5kb25lICYmIChfYSA9IGRhdGFCbG9ja3NfMS5yZXR1cm4pKSBfYS5jYWxsKGRhdGFCbG9ja3NfMSk7CgkgICAgICAgICAgICB9CgkgICAgICAgICAgICBmaW5hbGx5IHsgaWYgKGVfMSkgdGhyb3cgZV8xLmVycm9yOyB9CgkgICAgICAgIH0KCSAgICAgICAgdmFyIHJlc3VsdEJ5dGVzID0gbmV3IFVpbnQ4QXJyYXkodG90YWxCeXRlcyk7CgkgICAgICAgIHZhciByZXN1bHRPZmZzZXQgPSAwOwoJICAgICAgICB0cnkgewoJICAgICAgICAgICAgLy8gRXJyb3ItY29ycmVjdCBhbmQgY29weSBkYXRhIGJsb2NrcyB0b2dldGhlciBpbnRvIGEgc3RyZWFtIG9mIGJ5dGVzCgkgICAgICAgICAgICBmb3IgKHZhciBkYXRhQmxvY2tzXzIgPSBfX3ZhbHVlcyQyKGRhdGFCbG9ja3MpLCBkYXRhQmxvY2tzXzJfMSA9IGRhdGFCbG9ja3NfMi5uZXh0KCk7ICFkYXRhQmxvY2tzXzJfMS5kb25lOyBkYXRhQmxvY2tzXzJfMSA9IGRhdGFCbG9ja3NfMi5uZXh0KCkpIHsKCSAgICAgICAgICAgICAgICB2YXIgZGF0YUJsb2NrID0gZGF0YUJsb2Nrc18yXzEudmFsdWU7CgkgICAgICAgICAgICAgICAgdmFyIGNvZGV3b3JkQnl0ZXMgPSBkYXRhQmxvY2suZ2V0Q29kZXdvcmRzKCk7CgkgICAgICAgICAgICAgICAgdmFyIG51bURhdGFDb2Rld29yZHMgPSBkYXRhQmxvY2suZ2V0TnVtRGF0YUNvZGV3b3JkcygpOwoJICAgICAgICAgICAgICAgIHRoaXMuY29ycmVjdEVycm9ycyhjb2Rld29yZEJ5dGVzLCBudW1EYXRhQ29kZXdvcmRzKTsKCSAgICAgICAgICAgICAgICBmb3IgKHZhciBpID0gMDsgaSA8IG51bURhdGFDb2Rld29yZHM7IGkrKykgewoJICAgICAgICAgICAgICAgICAgICByZXN1bHRCeXRlc1tyZXN1bHRPZmZzZXQrK10gPSBjb2Rld29yZEJ5dGVzW2ldOwoJICAgICAgICAgICAgICAgIH0KCSAgICAgICAgICAgIH0KCSAgICAgICAgfQoJICAgICAgICBjYXRjaCAoZV8yXzEpIHsgZV8yID0geyBlcnJvcjogZV8yXzEgfTsgfQoJICAgICAgICBmaW5hbGx5IHsKCSAgICAgICAgICAgIHRyeSB7CgkgICAgICAgICAgICAgICAgaWYgKGRhdGFCbG9ja3NfMl8xICYmICFkYXRhQmxvY2tzXzJfMS5kb25lICYmIChfYiA9IGRhdGFCbG9ja3NfMi5yZXR1cm4pKSBfYi5jYWxsKGRhdGFCbG9ja3NfMik7CgkgICAgICAgICAgICB9CgkgICAgICAgICAgICBmaW5hbGx5IHsgaWYgKGVfMikgdGhyb3cgZV8yLmVycm9yOyB9CgkgICAgICAgIH0KCSAgICAgICAgLy8gRGVjb2RlIHRoZSBjb250ZW50cyBvZiB0aGF0IHN0cmVhbSBvZiBieXRlcwoJICAgICAgICByZXR1cm4gRGVjb2RlZEJpdFN0cmVhbVBhcnNlcl8xLmRlZmF1bHQuZGVjb2RlKHJlc3VsdEJ5dGVzLCB2ZXJzaW9uLCBlY0xldmVsLCBoaW50cyk7CgkgICAgfTsKCSAgICAvKioKCSAgICAgKiA8cD5HaXZlbiBkYXRhIGFuZCBlcnJvci1jb3JyZWN0aW9uIGNvZGV3b3JkcyByZWNlaXZlZCwgcG9zc2libHkgY29ycnVwdGVkIGJ5IGVycm9ycywgYXR0ZW1wdHMgdG8KCSAgICAgKiBjb3JyZWN0IHRoZSBlcnJvcnMgaW4tcGxhY2UgdXNpbmcgUmVlZC1Tb2xvbW9uIGVycm9yIGNvcnJlY3Rpb24uPC9wPgoJICAgICAqCgkgICAgICogQHBhcmFtIGNvZGV3b3JkQnl0ZXMgZGF0YSBhbmQgZXJyb3IgY29ycmVjdGlvbiBjb2Rld29yZHMKCSAgICAgKiBAcGFyYW0gbnVtRGF0YUNvZGV3b3JkcyBudW1iZXIgb2YgY29kZXdvcmRzIHRoYXQgYXJlIGRhdGEgYnl0ZXMKCSAgICAgKiBAdGhyb3dzIENoZWNrc3VtRXhjZXB0aW9uIGlmIGVycm9yIGNvcnJlY3Rpb24gZmFpbHMKCSAgICAgKi8KCSAgICBEZWNvZGVyLnByb3RvdHlwZS5jb3JyZWN0RXJyb3JzID0gZnVuY3Rpb24gKGNvZGV3b3JkQnl0ZXMsIG51bURhdGFDb2Rld29yZHMgLyppbnQqLykgewoJICAgICAgICAvLyBjb25zdCBudW1Db2Rld29yZHMgPSBjb2Rld29yZEJ5dGVzLmxlbmd0aDsKCSAgICAgICAgLy8gRmlyc3QgcmVhZCBpbnRvIGFuIGFycmF5IG9mIGludHMKCSAgICAgICAgdmFyIGNvZGV3b3Jkc0ludHMgPSBuZXcgSW50MzJBcnJheShjb2Rld29yZEJ5dGVzKTsKCSAgICAgICAgLy8gVFlQRVNDUklQVFBPUlQ6IG5vdCByZWFseSBuZWNlc3NhcnkgdG8gdHJhbnNmb3JtIHRvIGludHM/IGNvdWxkIHJlZGVzaWduIGV2ZXJ5dGhpbmcgdG8gd29yayB3aXRoIHVuc2lnbmVkIGJ5dGVzPwoJICAgICAgICAvLyBjb25zdCBjb2Rld29yZHNJbnRzID0gbmV3IEludDMyQXJyYXkobnVtQ29kZXdvcmRzKQoJICAgICAgICAvLyBmb3IgKGxldCBpID0gMDsgaSA8IG51bUNvZGV3b3JkczsgaSsrKSB7CgkgICAgICAgIC8vICAgY29kZXdvcmRzSW50c1tpXSA9IGNvZGV3b3JkQnl0ZXNbaV0gJiAweEZGCgkgICAgICAgIC8vIH0KCSAgICAgICAgdHJ5IHsKCSAgICAgICAgICAgIHRoaXMucnNEZWNvZGVyLmRlY29kZShjb2Rld29yZHNJbnRzLCBjb2Rld29yZEJ5dGVzLmxlbmd0aCAtIG51bURhdGFDb2Rld29yZHMpOwoJICAgICAgICB9CgkgICAgICAgIGNhdGNoIChpZ25vcmVkIC8qOiBSZWVkU29sb21vbkV4Y2VwdGlvbiovKSB7CgkgICAgICAgICAgICB0aHJvdyBuZXcgQ2hlY2tzdW1FeGNlcHRpb25fMS5kZWZhdWx0KCk7CgkgICAgICAgIH0KCSAgICAgICAgLy8gQ29weSBiYWNrIGludG8gYXJyYXkgb2YgYnl0ZXMgLS0gb25seSBuZWVkIHRvIHdvcnJ5IGFib3V0IHRoZSBieXRlcyB0aGF0IHdlcmUgZGF0YQoJICAgICAgICAvLyBXZSBkb24ndCBjYXJlIGFib3V0IGVycm9ycyBpbiB0aGUgZXJyb3ItY29ycmVjdGlvbiBjb2Rld29yZHMKCSAgICAgICAgZm9yICh2YXIgaSA9IDA7IGkgPCBudW1EYXRhQ29kZXdvcmRzOyBpKyspIHsKCSAgICAgICAgICAgIGNvZGV3b3JkQnl0ZXNbaV0gPSAvKihieXRlKSAqLyBjb2Rld29yZHNJbnRzW2ldOwoJICAgICAgICB9CgkgICAgfTsKCSAgICByZXR1cm4gRGVjb2RlcjsKCX0oKSk7CglEZWNvZGVyJDEuZGVmYXVsdCA9IERlY29kZXI7CgoJdmFyIERldGVjdG9yJDEgPSB7fTsKCgl2YXIgTWF0aFV0aWxzJDEgPSB7fTsKCgkvKgoJICogQ29weXJpZ2h0IDIwMTIgWlhpbmcgYXV0aG9ycwoJICoKCSAqIExpY2Vuc2VkIHVuZGVyIHRoZSBBcGFjaGUgTGljZW5zZSwgVmVyc2lvbiAyLjAgKHRoZSAiTGljZW5zZSIpOwoJICogeW91IG1heSBub3QgdXNlIHRoaXMgZmlsZSBleGNlcHQgaW4gY29tcGxpYW5jZSB3aXRoIHRoZSBMaWNlbnNlLgoJICogWW91IG1heSBvYnRhaW4gYSBjb3B5IG9mIHRoZSBMaWNlbnNlIGF0CgkgKgoJICogICAgICBodHRwOi8vd3d3LmFwYWNoZS5vcmcvbGljZW5zZXMvTElDRU5TRS0yLjAKCSAqCgkgKiBVbmxlc3MgcmVxdWlyZWQgYnkgYXBwbGljYWJsZSBsYXcgb3IgYWdyZWVkIHRvIGluIHdyaXRpbmcsIHNvZnR3YXJlCgkgKiBkaXN0cmlidXRlZCB1bmRlciB0aGUgTGljZW5zZSBpcyBkaXN0cmlidXRlZCBvbiBhbiAiQVMgSVMiIEJBU0lTLAoJICogV0lUSE9VVCBXQVJSQU5USUVTIE9SIENPTkRJVElPTlMgT0YgQU5ZIEtJTkQsIGVpdGhlciBleHByZXNzIG9yIGltcGxpZWQuCgkgKiBTZWUgdGhlIExpY2Vuc2UgZm9yIHRoZSBzcGVjaWZpYyBsYW5ndWFnZSBnb3Zlcm5pbmcgcGVybWlzc2lvbnMgYW5kCgkgKiBsaW1pdGF0aW9ucyB1bmRlciB0aGUgTGljZW5zZS4KCSAqLwoJT2JqZWN0LmRlZmluZVByb3BlcnR5KE1hdGhVdGlscyQxLCAiX19lc01vZHVsZSIsIHsgdmFsdWU6IHRydWUgfSk7CgkvKm5hbWVzcGFjZSBjb20uZ29vZ2xlLnp4aW5nLmNvbW1vbi5kZXRlY3RvciB7Ki8KCS8qKgoJICogR2VuZXJhbCBtYXRoLXJlbGF0ZWQgYW5kIG51bWVyaWMgdXRpbGl0eSBmdW5jdGlvbnMuCgkgKi8KCXZhciBNYXRoVXRpbHMgPSAvKiogQGNsYXNzICovIChmdW5jdGlvbiAoKSB7CgkgICAgZnVuY3Rpb24gTWF0aFV0aWxzKCkgewoJICAgIH0KCSAgICAvKioKCSAgICAgKiBFbmRzIHVwIGJlaW5nIGEgYml0IGZhc3RlciB0aGFuIHtAbGluayBNYXRoI3JvdW5kKGZsb2F0KX0uIFRoaXMgbWVyZWx5IHJvdW5kcyBpdHMKCSAgICAgKiBhcmd1bWVudCB0byB0aGUgbmVhcmVzdCBpbnQsIHdoZXJlIHguNSByb3VuZHMgdXAgdG8geCsxLiBTZW1hbnRpY3Mgb2YgdGhpcyBzaG9ydGN1dAoJICAgICAqIGRpZmZlciBzbGlnaHRseSBmcm9tIHtAbGluayBNYXRoI3JvdW5kKGZsb2F0KX0gaW4gdGhhdCBoYWxmIHJvdW5kcyBkb3duIGZvciBuZWdhdGl2ZQoJICAgICAqIHZhbHVlcy4gLTIuNSByb3VuZHMgdG8gLTMsIG5vdCAtMi4gRm9yIHB1cnBvc2VzIGhlcmUgaXQgbWFrZXMgbm8gZGlmZmVyZW5jZS4KCSAgICAgKgoJICAgICAqIEBwYXJhbSBkIHJlYWwgdmFsdWUgdG8gcm91bmQKCSAgICAgKiBAcmV0dXJuIG5lYXJlc3Qge0Bjb2RlIGludH0KCSAgICAgKi8KCSAgICBNYXRoVXRpbHMucm91bmQgPSBmdW5jdGlvbiAoZCAvKmZsb2F0Ki8pIHsKCSAgICAgICAgaWYgKE5hTiA9PT0gZCkKCSAgICAgICAgICAgIHJldHVybiAwOwoJICAgICAgICBpZiAoZCA8PSBOdW1iZXIuTUlOX1NBRkVfSU5URUdFUikKCSAgICAgICAgICAgIHJldHVybiBOdW1iZXIuTUlOX1NBRkVfSU5URUdFUjsKCSAgICAgICAgaWYgKGQgPj0gTnVtYmVyLk1BWF9TQUZFX0lOVEVHRVIpCgkgICAgICAgICAgICByZXR1cm4gTnVtYmVyLk1BWF9TQUZFX0lOVEVHRVI7CgkgICAgICAgIHJldHVybiAvKihpbnQpICovIChkICsgKGQgPCAwLjAgPyAtMC41IDogMC41KSkgfCAwOwoJICAgIH07CgkgICAgLy8gVFlQRVNDUklQVFBPUlQ6IG1heWJlIHJlbW92ZSByb3VuZCBtZXRob2QgYW5kIGNhbGwgZGlyZWN0bHkgTWF0aC5yb3VuZCwgaXQgbG9va3MgbGlrZSBpdCBkb2Vzbid0IG1ha2Ugc2Vuc2UgZm9yIGpzCgkgICAgLyoqCgkgICAgICogQHBhcmFtIGFYIHBvaW50IEEgeCBjb29yZGluYXRlCgkgICAgICogQHBhcmFtIGFZIHBvaW50IEEgeSBjb29yZGluYXRlCgkgICAgICogQHBhcmFtIGJYIHBvaW50IEIgeCBjb29yZGluYXRlCgkgICAgICogQHBhcmFtIGJZIHBvaW50IEIgeSBjb29yZGluYXRlCgkgICAgICogQHJldHVybiBFdWNsaWRlYW4gZGlzdGFuY2UgYmV0d2VlbiBwb2ludHMgQSBhbmQgQgoJICAgICAqLwoJICAgIE1hdGhVdGlscy5kaXN0YW5jZSA9IGZ1bmN0aW9uIChhWCAvKmZsb2F0fGludCovLCBhWSAvKmZsb2F0fGludCovLCBiWCAvKmZsb2F0fGludCovLCBiWSAvKmZsb2F0fGludCovKSB7CgkgICAgICAgIHZhciB4RGlmZiA9IGFYIC0gYlg7CgkgICAgICAgIHZhciB5RGlmZiA9IGFZIC0gYlk7CgkgICAgICAgIHJldHVybiAvKihmbG9hdCkgKi8gTWF0aC5zcXJ0KHhEaWZmICogeERpZmYgKyB5RGlmZiAqIHlEaWZmKTsKCSAgICB9OwoJICAgIC8qKgoJICAgICAqIEBwYXJhbSBhWCBwb2ludCBBIHggY29vcmRpbmF0ZQoJICAgICAqIEBwYXJhbSBhWSBwb2ludCBBIHkgY29vcmRpbmF0ZQoJICAgICAqIEBwYXJhbSBiWCBwb2ludCBCIHggY29vcmRpbmF0ZQoJICAgICAqIEBwYXJhbSBiWSBwb2ludCBCIHkgY29vcmRpbmF0ZQoJICAgICAqIEByZXR1cm4gRXVjbGlkZWFuIGRpc3RhbmNlIGJldHdlZW4gcG9pbnRzIEEgYW5kIEIKCSAgICAgKi8KCSAgICAvLyBwdWJsaWMgc3RhdGljIGRpc3RhbmNlKGFYOiBudW1iZXIgLyppbnQqLywgYVk6IG51bWJlciAvKmludCovLCBiWDogbnVtYmVyIC8qaW50Ki8sIGJZOiBudW1iZXIgLyppbnQqLyk6IGZsb2F0IHsKCSAgICAvLyAgIGNvbnN0IHhEaWZmID0gYVggLSBiWAoJICAgIC8vICAgY29uc3QgeURpZmYgPSBhWSAtIGJZCgkgICAgLy8gICByZXR1cm4gKGZsb2F0KSBNYXRoLnNxcnQoeERpZmYgKiB4RGlmZiArIHlEaWZmICogeURpZmYpOwoJICAgIC8vIH0KCSAgICAvKioKCSAgICAgKiBAcGFyYW0gYXJyYXkgdmFsdWVzIHRvIHN1bQoJICAgICAqIEByZXR1cm4gc3VtIG9mIHZhbHVlcyBpbiBhcnJheQoJICAgICAqLwoJICAgIE1hdGhVdGlscy5zdW0gPSBmdW5jdGlvbiAoYXJyYXkpIHsKCSAgICAgICAgdmFyIGNvdW50ID0gMDsKCSAgICAgICAgZm9yICh2YXIgaSA9IDAsIGxlbmd0aF8xID0gYXJyYXkubGVuZ3RoOyBpICE9PSBsZW5ndGhfMTsgaSsrKSB7CgkgICAgICAgICAgICB2YXIgYSA9IGFycmF5W2ldOwoJICAgICAgICAgICAgY291bnQgKz0gYTsKCSAgICAgICAgfQoJICAgICAgICByZXR1cm4gY291bnQ7CgkgICAgfTsKCSAgICByZXR1cm4gTWF0aFV0aWxzOwoJfSgpKTsKCU1hdGhVdGlscyQxLmRlZmF1bHQgPSBNYXRoVXRpbHM7CgoJdmFyIERldGVjdG9yUmVzdWx0JDEgPSB7fTsKCgkvKgoJICogQ29weXJpZ2h0IDIwMDcgWlhpbmcgYXV0aG9ycwoJICoKCSAqIExpY2Vuc2VkIHVuZGVyIHRoZSBBcGFjaGUgTGljZW5zZSwgVmVyc2lvbiAyLjAgKHRoZSAiTGljZW5zZSIpOwoJICogeW91IG1heSBub3QgdXNlIHRoaXMgZmlsZSBleGNlcHQgaW4gY29tcGxpYW5jZSB3aXRoIHRoZSBMaWNlbnNlLgoJICogWW91IG1heSBvYnRhaW4gYSBjb3B5IG9mIHRoZSBMaWNlbnNlIGF0CgkgKgoJICogICAgICBodHRwOi8vd3d3LmFwYWNoZS5vcmcvbGljZW5zZXMvTElDRU5TRS0yLjAKCSAqCgkgKiBVbmxlc3MgcmVxdWlyZWQgYnkgYXBwbGljYWJsZSBsYXcgb3IgYWdyZWVkIHRvIGluIHdyaXRpbmcsIHNvZnR3YXJlCgkgKiBkaXN0cmlidXRlZCB1bmRlciB0aGUgTGljZW5zZSBpcyBkaXN0cmlidXRlZCBvbiBhbiAiQVMgSVMiIEJBU0lTLAoJICogV0lUSE9VVCBXQVJSQU5USUVTIE9SIENPTkRJVElPTlMgT0YgQU5ZIEtJTkQsIGVpdGhlciBleHByZXNzIG9yIGltcGxpZWQuCgkgKiBTZWUgdGhlIExpY2Vuc2UgZm9yIHRoZSBzcGVjaWZpYyBsYW5ndWFnZSBnb3Zlcm5pbmcgcGVybWlzc2lvbnMgYW5kCgkgKiBsaW1pdGF0aW9ucyB1bmRlciB0aGUgTGljZW5zZS4KCSAqLwoJT2JqZWN0LmRlZmluZVByb3BlcnR5KERldGVjdG9yUmVzdWx0JDEsICJfX2VzTW9kdWxlIiwgeyB2YWx1ZTogdHJ1ZSB9KTsKCS8qKgoJICogPHA+RW5jYXBzdWxhdGVzIHRoZSByZXN1bHQgb2YgZGV0ZWN0aW5nIGEgYmFyY29kZSBpbiBhbiBpbWFnZS4gVGhpcyBpbmNsdWRlcyB0aGUgcmF3CgkgKiBtYXRyaXggb2YgYmxhY2svd2hpdGUgcGl4ZWxzIGNvcnJlc3BvbmRpbmcgdG8gdGhlIGJhcmNvZGUsIGFuZCBwb3NzaWJseSBwb2ludHMgb2YgaW50ZXJlc3QKCSAqIGluIHRoZSBpbWFnZSwgbGlrZSB0aGUgbG9jYXRpb24gb2YgZmluZGVyIHBhdHRlcm5zIG9yIGNvcm5lcnMgb2YgdGhlIGJhcmNvZGUgaW4gdGhlIGltYWdlLjwvcD4KCSAqCgkgKiBAYXV0aG9yIFNlYW4gT3dlbgoJICovCgl2YXIgRGV0ZWN0b3JSZXN1bHQgPSAvKiogQGNsYXNzICovIChmdW5jdGlvbiAoKSB7CgkgICAgZnVuY3Rpb24gRGV0ZWN0b3JSZXN1bHQoYml0cywgcG9pbnRzKSB7CgkgICAgICAgIHRoaXMuYml0cyA9IGJpdHM7CgkgICAgICAgIHRoaXMucG9pbnRzID0gcG9pbnRzOwoJICAgIH0KCSAgICBEZXRlY3RvclJlc3VsdC5wcm90b3R5cGUuZ2V0Qml0cyA9IGZ1bmN0aW9uICgpIHsKCSAgICAgICAgcmV0dXJuIHRoaXMuYml0czsKCSAgICB9OwoJICAgIERldGVjdG9yUmVzdWx0LnByb3RvdHlwZS5nZXRQb2ludHMgPSBmdW5jdGlvbiAoKSB7CgkgICAgICAgIHJldHVybiB0aGlzLnBvaW50czsKCSAgICB9OwoJICAgIHJldHVybiBEZXRlY3RvclJlc3VsdDsKCX0oKSk7CglEZXRlY3RvclJlc3VsdCQxLmRlZmF1bHQgPSBEZXRlY3RvclJlc3VsdDsKCgl2YXIgR3JpZFNhbXBsZXJJbnN0YW5jZSQxID0ge307CgoJdmFyIERlZmF1bHRHcmlkU2FtcGxlciQxID0ge307CgoJdmFyIEdyaWRTYW1wbGVyJDEgPSB7fTsKCgkvKgoJICogQ29weXJpZ2h0IDIwMDcgWlhpbmcgYXV0aG9ycwoJICoKCSAqIExpY2Vuc2VkIHVuZGVyIHRoZSBBcGFjaGUgTGljZW5zZSwgVmVyc2lvbiAyLjAgKHRoZSAiTGljZW5zZSIpOwoJICogeW91IG1heSBub3QgdXNlIHRoaXMgZmlsZSBleGNlcHQgaW4gY29tcGxpYW5jZSB3aXRoIHRoZSBMaWNlbnNlLgoJICogWW91IG1heSBvYnRhaW4gYSBjb3B5IG9mIHRoZSBMaWNlbnNlIGF0CgkgKgoJICogICAgICBodHRwOi8vd3d3LmFwYWNoZS5vcmcvbGljZW5zZXMvTElDRU5TRS0yLjAKCSAqCgkgKiBVbmxlc3MgcmVxdWlyZWQgYnkgYXBwbGljYWJsZSBsYXcgb3IgYWdyZWVkIHRvIGluIHdyaXRpbmcsIHNvZnR3YXJlCgkgKiBkaXN0cmlidXRlZCB1bmRlciB0aGUgTGljZW5zZSBpcyBkaXN0cmlidXRlZCBvbiBhbiAiQVMgSVMiIEJBU0lTLAoJICogV0lUSE9VVCBXQVJSQU5USUVTIE9SIENPTkRJVElPTlMgT0YgQU5ZIEtJTkQsIGVpdGhlciBleHByZXNzIG9yIGltcGxpZWQuCgkgKiBTZWUgdGhlIExpY2Vuc2UgZm9yIHRoZSBzcGVjaWZpYyBsYW5ndWFnZSBnb3Zlcm5pbmcgcGVybWlzc2lvbnMgYW5kCgkgKiBsaW1pdGF0aW9ucyB1bmRlciB0aGUgTGljZW5zZS4KCSAqLwoJT2JqZWN0LmRlZmluZVByb3BlcnR5KEdyaWRTYW1wbGVyJDEsICJfX2VzTW9kdWxlIiwgeyB2YWx1ZTogdHJ1ZSB9KTsKCXZhciBOb3RGb3VuZEV4Y2VwdGlvbl8xJDUgPSBOb3RGb3VuZEV4Y2VwdGlvbiQxOwoJLyoqCgkgKiBJbXBsZW1lbnRhdGlvbnMgb2YgdGhpcyBjbGFzcyBjYW4sIGdpdmVuIGxvY2F0aW9ucyBvZiBmaW5kZXIgcGF0dGVybnMgZm9yIGEgUVIgY29kZSBpbiBhbgoJICogaW1hZ2UsIHNhbXBsZSB0aGUgcmlnaHQgcG9pbnRzIGluIHRoZSBpbWFnZSB0byByZWNvbnN0cnVjdCB0aGUgUVIgY29kZSwgYWNjb3VudGluZyBmb3IKCSAqIHBlcnNwZWN0aXZlIGRpc3RvcnRpb24uIEl0IGlzIGFic3RyYWN0ZWQgc2luY2UgaXQgaXMgcmVsYXRpdmVseSBleHBlbnNpdmUgYW5kIHNob3VsZCBiZSBhbGxvd2VkCgkgKiB0byB0YWtlIGFkdmFudGFnZSBvZiBwbGF0Zm9ybS1zcGVjaWZpYyBvcHRpbWl6ZWQgaW1wbGVtZW50YXRpb25zLCBsaWtlIFN1bidzIEphdmEgQWR2YW5jZWQKCSAqIEltYWdpbmcgbGlicmFyeSwgYnV0IHdoaWNoIG1heSBub3QgYmUgYXZhaWxhYmxlIGluIG90aGVyIGVudmlyb25tZW50cyBzdWNoIGFzIEoyTUUsIGFuZCB2aWNlCgkgKiB2ZXJzYS4KCSAqCgkgKiBUaGUgaW1wbGVtZW50YXRpb24gdXNlZCBjYW4gYmUgY29udHJvbGxlZCBieSBjYWxsaW5nIHtAbGluayAjc2V0R3JpZFNhbXBsZXIoR3JpZFNhbXBsZXIpfQoJICogd2l0aCBhbiBpbnN0YW5jZSBvZiBhIGNsYXNzIHdoaWNoIGltcGxlbWVudHMgdGhpcyBpbnRlcmZhY2UuCgkgKgoJICogQGF1dGhvciBTZWFuIE93ZW4KCSAqLwoJdmFyIEdyaWRTYW1wbGVyID0gLyoqIEBjbGFzcyAqLyAoZnVuY3Rpb24gKCkgewoJICAgIGZ1bmN0aW9uIEdyaWRTYW1wbGVyKCkgewoJICAgIH0KCSAgICAvKioKCSAgICAgKiA8cD5DaGVja3MgYSBzZXQgb2YgcG9pbnRzIHRoYXQgaGF2ZSBiZWVuIHRyYW5zZm9ybWVkIHRvIHNhbXBsZSBwb2ludHMgb24gYW4gaW1hZ2UgYWdhaW5zdAoJICAgICAqIHRoZSBpbWFnZSdzIGRpbWVuc2lvbnMgdG8gc2VlIGlmIHRoZSBwb2ludCBhcmUgZXZlbiB3aXRoaW4gdGhlIGltYWdlLjwvcD4KCSAgICAgKgoJICAgICAqIDxwPlRoaXMgbWV0aG9kIHdpbGwgYWN0dWFsbHkgIm51ZGdlIiB0aGUgZW5kcG9pbnRzIGJhY2sgb250byB0aGUgaW1hZ2UgaWYgdGhleSBhcmUgZm91bmQgdG8gYmUKCSAgICAgKiBiYXJlbHkgKGxlc3MgdGhhbiAxIHBpeGVsKSBvZmYgdGhlIGltYWdlLiBUaGlzIGFjY291bnRzIGZvciBpbXBlcmZlY3QgZGV0ZWN0aW9uIG9mIGZpbmRlcgoJICAgICAqIHBhdHRlcm5zIGluIGFuIGltYWdlIHdoZXJlIHRoZSBRUiBDb2RlIHJ1bnMgYWxsIHRoZSB3YXkgdG8gdGhlIGltYWdlIGJvcmRlci48L3A+CgkgICAgICoKCSAgICAgKiA8cD5Gb3IgZWZmaWNpZW5jeSwgdGhlIG1ldGhvZCB3aWxsIGNoZWNrIHBvaW50cyBmcm9tIGVpdGhlciBlbmQgb2YgdGhlIGxpbmUgdW50aWwgb25lIGlzIGZvdW5kCgkgICAgICogdG8gYmUgd2l0aGluIHRoZSBpbWFnZS4gQmVjYXVzZSB0aGUgc2V0IG9mIHBvaW50cyBhcmUgYXNzdW1lZCB0byBiZSBsaW5lYXIsIHRoaXMgaXMgdmFsaWQuPC9wPgoJICAgICAqCgkgICAgICogQHBhcmFtIGltYWdlIGltYWdlIGludG8gd2hpY2ggdGhlIHBvaW50cyBzaG91bGQgbWFwCgkgICAgICogQHBhcmFtIHBvaW50cyBhY3R1YWwgcG9pbnRzIGluIHgxLHkxLC4uLix4bix5biBmb3JtCgkgICAgICogQHRocm93cyBOb3RGb3VuZEV4Y2VwdGlvbiBpZiBhbiBlbmRwb2ludCBpcyBsaWVzIG91dHNpZGUgdGhlIGltYWdlIGJvdW5kYXJpZXMKCSAgICAgKi8KCSAgICBHcmlkU2FtcGxlci5jaGVja0FuZE51ZGdlUG9pbnRzID0gZnVuY3Rpb24gKGltYWdlLCBwb2ludHMpIHsKCSAgICAgICAgdmFyIHdpZHRoID0gaW1hZ2UuZ2V0V2lkdGgoKTsKCSAgICAgICAgdmFyIGhlaWdodCA9IGltYWdlLmdldEhlaWdodCgpOwoJICAgICAgICAvLyBDaGVjayBhbmQgbnVkZ2UgcG9pbnRzIGZyb20gc3RhcnQgdW50aWwgd2Ugc2VlIHNvbWUgdGhhdCBhcmUgT0s6CgkgICAgICAgIHZhciBudWRnZWQgPSB0cnVlOwoJICAgICAgICBmb3IgKHZhciBvZmZzZXQgPSAwOyBvZmZzZXQgPCBwb2ludHMubGVuZ3RoICYmIG51ZGdlZDsgb2Zmc2V0ICs9IDIpIHsKCSAgICAgICAgICAgIHZhciB4ID0gTWF0aC5mbG9vcihwb2ludHNbb2Zmc2V0XSk7CgkgICAgICAgICAgICB2YXIgeSA9IE1hdGguZmxvb3IocG9pbnRzW29mZnNldCArIDFdKTsKCSAgICAgICAgICAgIGlmICh4IDwgLTEgfHwgeCA+IHdpZHRoIHx8IHkgPCAtMSB8fCB5ID4gaGVpZ2h0KSB7CgkgICAgICAgICAgICAgICAgdGhyb3cgbmV3IE5vdEZvdW5kRXhjZXB0aW9uXzEkNS5kZWZhdWx0KCk7CgkgICAgICAgICAgICB9CgkgICAgICAgICAgICBudWRnZWQgPSBmYWxzZTsKCSAgICAgICAgICAgIGlmICh4ID09PSAtMSkgewoJICAgICAgICAgICAgICAgIHBvaW50c1tvZmZzZXRdID0gMC4wOwoJICAgICAgICAgICAgICAgIG51ZGdlZCA9IHRydWU7CgkgICAgICAgICAgICB9CgkgICAgICAgICAgICBlbHNlIGlmICh4ID09PSB3aWR0aCkgewoJICAgICAgICAgICAgICAgIHBvaW50c1tvZmZzZXRdID0gd2lkdGggLSAxOwoJICAgICAgICAgICAgICAgIG51ZGdlZCA9IHRydWU7CgkgICAgICAgICAgICB9CgkgICAgICAgICAgICBpZiAoeSA9PT0gLTEpIHsKCSAgICAgICAgICAgICAgICBwb2ludHNbb2Zmc2V0ICsgMV0gPSAwLjA7CgkgICAgICAgICAgICAgICAgbnVkZ2VkID0gdHJ1ZTsKCSAgICAgICAgICAgIH0KCSAgICAgICAgICAgIGVsc2UgaWYgKHkgPT09IGhlaWdodCkgewoJICAgICAgICAgICAgICAgIHBvaW50c1tvZmZzZXQgKyAxXSA9IGhlaWdodCAtIDE7CgkgICAgICAgICAgICAgICAgbnVkZ2VkID0gdHJ1ZTsKCSAgICAgICAgICAgIH0KCSAgICAgICAgfQoJICAgICAgICAvLyBDaGVjayBhbmQgbnVkZ2UgcG9pbnRzIGZyb20gZW5kOgoJICAgICAgICBudWRnZWQgPSB0cnVlOwoJICAgICAgICBmb3IgKHZhciBvZmZzZXQgPSBwb2ludHMubGVuZ3RoIC0gMjsgb2Zmc2V0ID49IDAgJiYgbnVkZ2VkOyBvZmZzZXQgLT0gMikgewoJICAgICAgICAgICAgdmFyIHggPSBNYXRoLmZsb29yKHBvaW50c1tvZmZzZXRdKTsKCSAgICAgICAgICAgIHZhciB5ID0gTWF0aC5mbG9vcihwb2ludHNbb2Zmc2V0ICsgMV0pOwoJICAgICAgICAgICAgaWYgKHggPCAtMSB8fCB4ID4gd2lkdGggfHwgeSA8IC0xIHx8IHkgPiBoZWlnaHQpIHsKCSAgICAgICAgICAgICAgICB0aHJvdyBuZXcgTm90Rm91bmRFeGNlcHRpb25fMSQ1LmRlZmF1bHQoKTsKCSAgICAgICAgICAgIH0KCSAgICAgICAgICAgIG51ZGdlZCA9IGZhbHNlOwoJICAgICAgICAgICAgaWYgKHggPT09IC0xKSB7CgkgICAgICAgICAgICAgICAgcG9pbnRzW29mZnNldF0gPSAwLjA7CgkgICAgICAgICAgICAgICAgbnVkZ2VkID0gdHJ1ZTsKCSAgICAgICAgICAgIH0KCSAgICAgICAgICAgIGVsc2UgaWYgKHggPT09IHdpZHRoKSB7CgkgICAgICAgICAgICAgICAgcG9pbnRzW29mZnNldF0gPSB3aWR0aCAtIDE7CgkgICAgICAgICAgICAgICAgbnVkZ2VkID0gdHJ1ZTsKCSAgICAgICAgICAgIH0KCSAgICAgICAgICAgIGlmICh5ID09PSAtMSkgewoJICAgICAgICAgICAgICAgIHBvaW50c1tvZmZzZXQgKyAxXSA9IDAuMDsKCSAgICAgICAgICAgICAgICBudWRnZWQgPSB0cnVlOwoJICAgICAgICAgICAgfQoJICAgICAgICAgICAgZWxzZSBpZiAoeSA9PT0gaGVpZ2h0KSB7CgkgICAgICAgICAgICAgICAgcG9pbnRzW29mZnNldCArIDFdID0gaGVpZ2h0IC0gMTsKCSAgICAgICAgICAgICAgICBudWRnZWQgPSB0cnVlOwoJICAgICAgICAgICAgfQoJICAgICAgICB9CgkgICAgfTsKCSAgICByZXR1cm4gR3JpZFNhbXBsZXI7Cgl9KCkpOwoJR3JpZFNhbXBsZXIkMS5kZWZhdWx0ID0gR3JpZFNhbXBsZXI7CgoJdmFyIFBlcnNwZWN0aXZlVHJhbnNmb3JtJDEgPSB7fTsKCgkvKgoJICogQ29weXJpZ2h0IDIwMDcgWlhpbmcgYXV0aG9ycwoJICoKCSAqIExpY2Vuc2VkIHVuZGVyIHRoZSBBcGFjaGUgTGljZW5zZSwgVmVyc2lvbiAyLjAgKHRoZSAiTGljZW5zZSIpOwoJICogeW91IG1heSBub3QgdXNlIHRoaXMgZmlsZSBleGNlcHQgaW4gY29tcGxpYW5jZSB3aXRoIHRoZSBMaWNlbnNlLgoJICogWW91IG1heSBvYnRhaW4gYSBjb3B5IG9mIHRoZSBMaWNlbnNlIGF0CgkgKgoJICogICAgICBodHRwOi8vd3d3LmFwYWNoZS5vcmcvbGljZW5zZXMvTElDRU5TRS0yLjAKCSAqCgkgKiBVbmxlc3MgcmVxdWlyZWQgYnkgYXBwbGljYWJsZSBsYXcgb3IgYWdyZWVkIHRvIGluIHdyaXRpbmcsIHNvZnR3YXJlCgkgKiBkaXN0cmlidXRlZCB1bmRlciB0aGUgTGljZW5zZSBpcyBkaXN0cmlidXRlZCBvbiBhbiAiQVMgSVMiIEJBU0lTLAoJICogV0lUSE9VVCBXQVJSQU5USUVTIE9SIENPTkRJVElPTlMgT0YgQU5ZIEtJTkQsIGVpdGhlciBleHByZXNzIG9yIGltcGxpZWQuCgkgKiBTZWUgdGhlIExpY2Vuc2UgZm9yIHRoZSBzcGVjaWZpYyBsYW5ndWFnZSBnb3Zlcm5pbmcgcGVybWlzc2lvbnMgYW5kCgkgKiBsaW1pdGF0aW9ucyB1bmRlciB0aGUgTGljZW5zZS4KCSAqLwoJT2JqZWN0LmRlZmluZVByb3BlcnR5KFBlcnNwZWN0aXZlVHJhbnNmb3JtJDEsICJfX2VzTW9kdWxlIiwgeyB2YWx1ZTogdHJ1ZSB9KTsKCS8qbmFtZXNwYWNlIGNvbS5nb29nbGUuenhpbmcuY29tbW9uIHsqLwoJLyoqCgkgKiA8cD5UaGlzIGNsYXNzIGltcGxlbWVudHMgYSBwZXJzcGVjdGl2ZSB0cmFuc2Zvcm0gaW4gdHdvIGRpbWVuc2lvbnMuIEdpdmVuIGZvdXIgc291cmNlIGFuZCBmb3VyCgkgKiBkZXN0aW5hdGlvbiBwb2ludHMsIGl0IHdpbGwgY29tcHV0ZSB0aGUgdHJhbnNmb3JtYXRpb24gaW1wbGllZCBiZXR3ZWVuIHRoZW0uIFRoZSBjb2RlIGlzIGJhc2VkCgkgKiBkaXJlY3RseSB1cG9uIHNlY3Rpb24gMy40LjIgb2YgR2VvcmdlIFdvbGJlcmcncyAiRGlnaXRhbCBJbWFnZSBXYXJwaW5nIjsgc2VlIHBhZ2VzIDU0LTU2LjwvcD4KCSAqCgkgKiBAYXV0aG9yIFNlYW4gT3dlbgoJICovCgl2YXIgUGVyc3BlY3RpdmVUcmFuc2Zvcm0gPSAvKiogQGNsYXNzICovIChmdW5jdGlvbiAoKSB7CgkgICAgZnVuY3Rpb24gUGVyc3BlY3RpdmVUcmFuc2Zvcm0oYTExIC8qZmxvYXQqLywgYTIxIC8qZmxvYXQqLywgYTMxIC8qZmxvYXQqLywgYTEyIC8qZmxvYXQqLywgYTIyIC8qZmxvYXQqLywgYTMyIC8qZmxvYXQqLywgYTEzIC8qZmxvYXQqLywgYTIzIC8qZmxvYXQqLywgYTMzIC8qZmxvYXQqLykgewoJICAgICAgICB0aGlzLmExMSA9IGExMTsKCSAgICAgICAgdGhpcy5hMjEgPSBhMjE7CgkgICAgICAgIHRoaXMuYTMxID0gYTMxOwoJICAgICAgICB0aGlzLmExMiA9IGExMjsKCSAgICAgICAgdGhpcy5hMjIgPSBhMjI7CgkgICAgICAgIHRoaXMuYTMyID0gYTMyOwoJICAgICAgICB0aGlzLmExMyA9IGExMzsKCSAgICAgICAgdGhpcy5hMjMgPSBhMjM7CgkgICAgICAgIHRoaXMuYTMzID0gYTMzOwoJICAgIH0KCSAgICBQZXJzcGVjdGl2ZVRyYW5zZm9ybS5xdWFkcmlsYXRlcmFsVG9RdWFkcmlsYXRlcmFsID0gZnVuY3Rpb24gKHgwIC8qZmxvYXQqLywgeTAgLypmbG9hdCovLCB4MSAvKmZsb2F0Ki8sIHkxIC8qZmxvYXQqLywgeDIgLypmbG9hdCovLCB5MiAvKmZsb2F0Ki8sIHgzIC8qZmxvYXQqLywgeTMgLypmbG9hdCovLCB4MHAgLypmbG9hdCovLCB5MHAgLypmbG9hdCovLCB4MXAgLypmbG9hdCovLCB5MXAgLypmbG9hdCovLCB4MnAgLypmbG9hdCovLCB5MnAgLypmbG9hdCovLCB4M3AgLypmbG9hdCovLCB5M3AgLypmbG9hdCovKSB7CgkgICAgICAgIHZhciBxVG9TID0gUGVyc3BlY3RpdmVUcmFuc2Zvcm0ucXVhZHJpbGF0ZXJhbFRvU3F1YXJlKHgwLCB5MCwgeDEsIHkxLCB4MiwgeTIsIHgzLCB5Myk7CgkgICAgICAgIHZhciBzVG9RID0gUGVyc3BlY3RpdmVUcmFuc2Zvcm0uc3F1YXJlVG9RdWFkcmlsYXRlcmFsKHgwcCwgeTBwLCB4MXAsIHkxcCwgeDJwLCB5MnAsIHgzcCwgeTNwKTsKCSAgICAgICAgcmV0dXJuIHNUb1EudGltZXMocVRvUyk7CgkgICAgfTsKCSAgICBQZXJzcGVjdGl2ZVRyYW5zZm9ybS5wcm90b3R5cGUudHJhbnNmb3JtUG9pbnRzID0gZnVuY3Rpb24gKHBvaW50cykgewoJICAgICAgICB2YXIgbWF4ID0gcG9pbnRzLmxlbmd0aDsKCSAgICAgICAgdmFyIGExMSA9IHRoaXMuYTExOwoJICAgICAgICB2YXIgYTEyID0gdGhpcy5hMTI7CgkgICAgICAgIHZhciBhMTMgPSB0aGlzLmExMzsKCSAgICAgICAgdmFyIGEyMSA9IHRoaXMuYTIxOwoJICAgICAgICB2YXIgYTIyID0gdGhpcy5hMjI7CgkgICAgICAgIHZhciBhMjMgPSB0aGlzLmEyMzsKCSAgICAgICAgdmFyIGEzMSA9IHRoaXMuYTMxOwoJICAgICAgICB2YXIgYTMyID0gdGhpcy5hMzI7CgkgICAgICAgIHZhciBhMzMgPSB0aGlzLmEzMzsKCSAgICAgICAgZm9yICh2YXIgaSA9IDA7IGkgPCBtYXg7IGkgKz0gMikgewoJICAgICAgICAgICAgdmFyIHggPSBwb2ludHNbaV07CgkgICAgICAgICAgICB2YXIgeSA9IHBvaW50c1tpICsgMV07CgkgICAgICAgICAgICB2YXIgZGVub21pbmF0b3IgPSBhMTMgKiB4ICsgYTIzICogeSArIGEzMzsKCSAgICAgICAgICAgIHBvaW50c1tpXSA9IChhMTEgKiB4ICsgYTIxICogeSArIGEzMSkgLyBkZW5vbWluYXRvcjsKCSAgICAgICAgICAgIHBvaW50c1tpICsgMV0gPSAoYTEyICogeCArIGEyMiAqIHkgKyBhMzIpIC8gZGVub21pbmF0b3I7CgkgICAgICAgIH0KCSAgICB9OwoJICAgIFBlcnNwZWN0aXZlVHJhbnNmb3JtLnByb3RvdHlwZS50cmFuc2Zvcm1Qb2ludHNXaXRoVmFsdWVzID0gZnVuY3Rpb24gKHhWYWx1ZXMsIHlWYWx1ZXMpIHsKCSAgICAgICAgdmFyIGExMSA9IHRoaXMuYTExOwoJICAgICAgICB2YXIgYTEyID0gdGhpcy5hMTI7CgkgICAgICAgIHZhciBhMTMgPSB0aGlzLmExMzsKCSAgICAgICAgdmFyIGEyMSA9IHRoaXMuYTIxOwoJICAgICAgICB2YXIgYTIyID0gdGhpcy5hMjI7CgkgICAgICAgIHZhciBhMjMgPSB0aGlzLmEyMzsKCSAgICAgICAgdmFyIGEzMSA9IHRoaXMuYTMxOwoJICAgICAgICB2YXIgYTMyID0gdGhpcy5hMzI7CgkgICAgICAgIHZhciBhMzMgPSB0aGlzLmEzMzsKCSAgICAgICAgdmFyIG4gPSB4VmFsdWVzLmxlbmd0aDsKCSAgICAgICAgZm9yICh2YXIgaSA9IDA7IGkgPCBuOyBpKyspIHsKCSAgICAgICAgICAgIHZhciB4ID0geFZhbHVlc1tpXTsKCSAgICAgICAgICAgIHZhciB5ID0geVZhbHVlc1tpXTsKCSAgICAgICAgICAgIHZhciBkZW5vbWluYXRvciA9IGExMyAqIHggKyBhMjMgKiB5ICsgYTMzOwoJICAgICAgICAgICAgeFZhbHVlc1tpXSA9IChhMTEgKiB4ICsgYTIxICogeSArIGEzMSkgLyBkZW5vbWluYXRvcjsKCSAgICAgICAgICAgIHlWYWx1ZXNbaV0gPSAoYTEyICogeCArIGEyMiAqIHkgKyBhMzIpIC8gZGVub21pbmF0b3I7CgkgICAgICAgIH0KCSAgICB9OwoJICAgIFBlcnNwZWN0aXZlVHJhbnNmb3JtLnNxdWFyZVRvUXVhZHJpbGF0ZXJhbCA9IGZ1bmN0aW9uICh4MCAvKmZsb2F0Ki8sIHkwIC8qZmxvYXQqLywgeDEgLypmbG9hdCovLCB5MSAvKmZsb2F0Ki8sIHgyIC8qZmxvYXQqLywgeTIgLypmbG9hdCovLCB4MyAvKmZsb2F0Ki8sIHkzIC8qZmxvYXQqLykgewoJICAgICAgICB2YXIgZHgzID0geDAgLSB4MSArIHgyIC0geDM7CgkgICAgICAgIHZhciBkeTMgPSB5MCAtIHkxICsgeTIgLSB5MzsKCSAgICAgICAgaWYgKGR4MyA9PT0gMC4wICYmIGR5MyA9PT0gMC4wKSB7CgkgICAgICAgICAgICAvLyBBZmZpbmUKCSAgICAgICAgICAgIHJldHVybiBuZXcgUGVyc3BlY3RpdmVUcmFuc2Zvcm0oeDEgLSB4MCwgeDIgLSB4MSwgeDAsIHkxIC0geTAsIHkyIC0geTEsIHkwLCAwLjAsIDAuMCwgMS4wKTsKCSAgICAgICAgfQoJICAgICAgICBlbHNlIHsKCSAgICAgICAgICAgIHZhciBkeDEgPSB4MSAtIHgyOwoJICAgICAgICAgICAgdmFyIGR4MiA9IHgzIC0geDI7CgkgICAgICAgICAgICB2YXIgZHkxID0geTEgLSB5MjsKCSAgICAgICAgICAgIHZhciBkeTIgPSB5MyAtIHkyOwoJICAgICAgICAgICAgdmFyIGRlbm9taW5hdG9yID0gZHgxICogZHkyIC0gZHgyICogZHkxOwoJICAgICAgICAgICAgdmFyIGExMyA9IChkeDMgKiBkeTIgLSBkeDIgKiBkeTMpIC8gZGVub21pbmF0b3I7CgkgICAgICAgICAgICB2YXIgYTIzID0gKGR4MSAqIGR5MyAtIGR4MyAqIGR5MSkgLyBkZW5vbWluYXRvcjsKCSAgICAgICAgICAgIHJldHVybiBuZXcgUGVyc3BlY3RpdmVUcmFuc2Zvcm0oeDEgLSB4MCArIGExMyAqIHgxLCB4MyAtIHgwICsgYTIzICogeDMsIHgwLCB5MSAtIHkwICsgYTEzICogeTEsIHkzIC0geTAgKyBhMjMgKiB5MywgeTAsIGExMywgYTIzLCAxLjApOwoJICAgICAgICB9CgkgICAgfTsKCSAgICBQZXJzcGVjdGl2ZVRyYW5zZm9ybS5xdWFkcmlsYXRlcmFsVG9TcXVhcmUgPSBmdW5jdGlvbiAoeDAgLypmbG9hdCovLCB5MCAvKmZsb2F0Ki8sIHgxIC8qZmxvYXQqLywgeTEgLypmbG9hdCovLCB4MiAvKmZsb2F0Ki8sIHkyIC8qZmxvYXQqLywgeDMgLypmbG9hdCovLCB5MyAvKmZsb2F0Ki8pIHsKCSAgICAgICAgLy8gSGVyZSwgdGhlIGFkam9pbnQgc2VydmVzIGFzIHRoZSBpbnZlcnNlOgoJICAgICAgICByZXR1cm4gUGVyc3BlY3RpdmVUcmFuc2Zvcm0uc3F1YXJlVG9RdWFkcmlsYXRlcmFsKHgwLCB5MCwgeDEsIHkxLCB4MiwgeTIsIHgzLCB5MykuYnVpbGRBZGpvaW50KCk7CgkgICAgfTsKCSAgICBQZXJzcGVjdGl2ZVRyYW5zZm9ybS5wcm90b3R5cGUuYnVpbGRBZGpvaW50ID0gZnVuY3Rpb24gKCkgewoJICAgICAgICAvLyBBZGpvaW50IGlzIHRoZSB0cmFuc3Bvc2Ugb2YgdGhlIGNvZmFjdG9yIG1hdHJpeDoKCSAgICAgICAgcmV0dXJuIG5ldyBQZXJzcGVjdGl2ZVRyYW5zZm9ybSh0aGlzLmEyMiAqIHRoaXMuYTMzIC0gdGhpcy5hMjMgKiB0aGlzLmEzMiwgdGhpcy5hMjMgKiB0aGlzLmEzMSAtIHRoaXMuYTIxICogdGhpcy5hMzMsIHRoaXMuYTIxICogdGhpcy5hMzIgLSB0aGlzLmEyMiAqIHRoaXMuYTMxLCB0aGlzLmExMyAqIHRoaXMuYTMyIC0gdGhpcy5hMTIgKiB0aGlzLmEzMywgdGhpcy5hMTEgKiB0aGlzLmEzMyAtIHRoaXMuYTEzICogdGhpcy5hMzEsIHRoaXMuYTEyICogdGhpcy5hMzEgLSB0aGlzLmExMSAqIHRoaXMuYTMyLCB0aGlzLmExMiAqIHRoaXMuYTIzIC0gdGhpcy5hMTMgKiB0aGlzLmEyMiwgdGhpcy5hMTMgKiB0aGlzLmEyMSAtIHRoaXMuYTExICogdGhpcy5hMjMsIHRoaXMuYTExICogdGhpcy5hMjIgLSB0aGlzLmExMiAqIHRoaXMuYTIxKTsKCSAgICB9OwoJICAgIFBlcnNwZWN0aXZlVHJhbnNmb3JtLnByb3RvdHlwZS50aW1lcyA9IGZ1bmN0aW9uIChvdGhlcikgewoJICAgICAgICByZXR1cm4gbmV3IFBlcnNwZWN0aXZlVHJhbnNmb3JtKHRoaXMuYTExICogb3RoZXIuYTExICsgdGhpcy5hMjEgKiBvdGhlci5hMTIgKyB0aGlzLmEzMSAqIG90aGVyLmExMywgdGhpcy5hMTEgKiBvdGhlci5hMjEgKyB0aGlzLmEyMSAqIG90aGVyLmEyMiArIHRoaXMuYTMxICogb3RoZXIuYTIzLCB0aGlzLmExMSAqIG90aGVyLmEzMSArIHRoaXMuYTIxICogb3RoZXIuYTMyICsgdGhpcy5hMzEgKiBvdGhlci5hMzMsIHRoaXMuYTEyICogb3RoZXIuYTExICsgdGhpcy5hMjIgKiBvdGhlci5hMTIgKyB0aGlzLmEzMiAqIG90aGVyLmExMywgdGhpcy5hMTIgKiBvdGhlci5hMjEgKyB0aGlzLmEyMiAqIG90aGVyLmEyMiArIHRoaXMuYTMyICogb3RoZXIuYTIzLCB0aGlzLmExMiAqIG90aGVyLmEzMSArIHRoaXMuYTIyICogb3RoZXIuYTMyICsgdGhpcy5hMzIgKiBvdGhlci5hMzMsIHRoaXMuYTEzICogb3RoZXIuYTExICsgdGhpcy5hMjMgKiBvdGhlci5hMTIgKyB0aGlzLmEzMyAqIG90aGVyLmExMywgdGhpcy5hMTMgKiBvdGhlci5hMjEgKyB0aGlzLmEyMyAqIG90aGVyLmEyMiArIHRoaXMuYTMzICogb3RoZXIuYTIzLCB0aGlzLmExMyAqIG90aGVyLmEzMSArIHRoaXMuYTIzICogb3RoZXIuYTMyICsgdGhpcy5hMzMgKiBvdGhlci5hMzMpOwoJICAgIH07CgkgICAgcmV0dXJuIFBlcnNwZWN0aXZlVHJhbnNmb3JtOwoJfSgpKTsKCVBlcnNwZWN0aXZlVHJhbnNmb3JtJDEuZGVmYXVsdCA9IFBlcnNwZWN0aXZlVHJhbnNmb3JtOwoKCS8qCgkgKiBDb3B5cmlnaHQgMjAwNyBaWGluZyBhdXRob3JzCgkgKgoJICogTGljZW5zZWQgdW5kZXIgdGhlIEFwYWNoZSBMaWNlbnNlLCBWZXJzaW9uIDIuMCAodGhlICJMaWNlbnNlIik7CgkgKiB5b3UgbWF5IG5vdCB1c2UgdGhpcyBmaWxlIGV4Y2VwdCBpbiBjb21wbGlhbmNlIHdpdGggdGhlIExpY2Vuc2UuCgkgKiBZb3UgbWF5IG9idGFpbiBhIGNvcHkgb2YgdGhlIExpY2Vuc2UgYXQKCSAqCgkgKiAgICAgIGh0dHA6Ly93d3cuYXBhY2hlLm9yZy9saWNlbnNlcy9MSUNFTlNFLTIuMAoJICoKCSAqIFVubGVzcyByZXF1aXJlZCBieSBhcHBsaWNhYmxlIGxhdyBvciBhZ3JlZWQgdG8gaW4gd3JpdGluZywgc29mdHdhcmUKCSAqIGRpc3RyaWJ1dGVkIHVuZGVyIHRoZSBMaWNlbnNlIGlzIGRpc3RyaWJ1dGVkIG9uIGFuICJBUyBJUyIgQkFTSVMsCgkgKiBXSVRIT1VUIFdBUlJBTlRJRVMgT1IgQ09ORElUSU9OUyBPRiBBTlkgS0lORCwgZWl0aGVyIGV4cHJlc3Mgb3IgaW1wbGllZC4KCSAqIFNlZSB0aGUgTGljZW5zZSBmb3IgdGhlIHNwZWNpZmljIGxhbmd1YWdlIGdvdmVybmluZyBwZXJtaXNzaW9ucyBhbmQKCSAqIGxpbWl0YXRpb25zIHVuZGVyIHRoZSBMaWNlbnNlLgoJICovCgl2YXIgX19leHRlbmRzJDIgPSAoY29tbW9uanNHbG9iYWwgJiYgY29tbW9uanNHbG9iYWwuX19leHRlbmRzKSB8fCAoZnVuY3Rpb24gKCkgewoJICAgIHZhciBleHRlbmRTdGF0aWNzID0gZnVuY3Rpb24gKGQsIGIpIHsKCSAgICAgICAgZXh0ZW5kU3RhdGljcyA9IE9iamVjdC5zZXRQcm90b3R5cGVPZiB8fAoJICAgICAgICAgICAgKHsgX19wcm90b19fOiBbXSB9IGluc3RhbmNlb2YgQXJyYXkgJiYgZnVuY3Rpb24gKGQsIGIpIHsgZC5fX3Byb3RvX18gPSBiOyB9KSB8fAoJICAgICAgICAgICAgZnVuY3Rpb24gKGQsIGIpIHsgZm9yICh2YXIgcCBpbiBiKSBpZiAoYi5oYXNPd25Qcm9wZXJ0eShwKSkgZFtwXSA9IGJbcF07IH07CgkgICAgICAgIHJldHVybiBleHRlbmRTdGF0aWNzKGQsIGIpOwoJICAgIH07CgkgICAgcmV0dXJuIGZ1bmN0aW9uIChkLCBiKSB7CgkgICAgICAgIGV4dGVuZFN0YXRpY3MoZCwgYik7CgkgICAgICAgIGZ1bmN0aW9uIF9fKCkgeyB0aGlzLmNvbnN0cnVjdG9yID0gZDsgfQoJICAgICAgICBkLnByb3RvdHlwZSA9IGIgPT09IG51bGwgPyBPYmplY3QuY3JlYXRlKGIpIDogKF9fLnByb3RvdHlwZSA9IGIucHJvdG90eXBlLCBuZXcgX18oKSk7CgkgICAgfTsKCX0pKCk7CglPYmplY3QuZGVmaW5lUHJvcGVydHkoRGVmYXVsdEdyaWRTYW1wbGVyJDEsICJfX2VzTW9kdWxlIiwgeyB2YWx1ZTogdHJ1ZSB9KTsKCS8qbmFtZXNwYWNlIGNvbS5nb29nbGUuenhpbmcuY29tbW9uIHsqLwoJdmFyIEdyaWRTYW1wbGVyXzEgPSBHcmlkU2FtcGxlciQxOwoJdmFyIEJpdE1hdHJpeF8xJDEgPSBCaXRNYXRyaXgkMTsKCXZhciBQZXJzcGVjdGl2ZVRyYW5zZm9ybV8xJDEgPSBQZXJzcGVjdGl2ZVRyYW5zZm9ybSQxOwoJdmFyIE5vdEZvdW5kRXhjZXB0aW9uXzEkNCA9IE5vdEZvdW5kRXhjZXB0aW9uJDE7CgkvKioKCSAqIEBhdXRob3IgU2VhbiBPd2VuCgkgKi8KCXZhciBEZWZhdWx0R3JpZFNhbXBsZXIgPSAvKiogQGNsYXNzICovIChmdW5jdGlvbiAoX3N1cGVyKSB7CgkgICAgX19leHRlbmRzJDIoRGVmYXVsdEdyaWRTYW1wbGVyLCBfc3VwZXIpOwoJICAgIGZ1bmN0aW9uIERlZmF1bHRHcmlkU2FtcGxlcigpIHsKCSAgICAgICAgcmV0dXJuIF9zdXBlciAhPT0gbnVsbCAmJiBfc3VwZXIuYXBwbHkodGhpcywgYXJndW1lbnRzKSB8fCB0aGlzOwoJICAgIH0KCSAgICAvKkBPdmVycmlkZSovCgkgICAgRGVmYXVsdEdyaWRTYW1wbGVyLnByb3RvdHlwZS5zYW1wbGVHcmlkID0gZnVuY3Rpb24gKGltYWdlLCBkaW1lbnNpb25YIC8qaW50Ki8sIGRpbWVuc2lvblkgLyppbnQqLywgcDFUb1ggLypmbG9hdCovLCBwMVRvWSAvKmZsb2F0Ki8sIHAyVG9YIC8qZmxvYXQqLywgcDJUb1kgLypmbG9hdCovLCBwM1RvWCAvKmZsb2F0Ki8sIHAzVG9ZIC8qZmxvYXQqLywgcDRUb1ggLypmbG9hdCovLCBwNFRvWSAvKmZsb2F0Ki8sIHAxRnJvbVggLypmbG9hdCovLCBwMUZyb21ZIC8qZmxvYXQqLywgcDJGcm9tWCAvKmZsb2F0Ki8sIHAyRnJvbVkgLypmbG9hdCovLCBwM0Zyb21YIC8qZmxvYXQqLywgcDNGcm9tWSAvKmZsb2F0Ki8sIHA0RnJvbVggLypmbG9hdCovLCBwNEZyb21ZIC8qZmxvYXQqLykgewoJICAgICAgICB2YXIgdHJhbnNmb3JtID0gUGVyc3BlY3RpdmVUcmFuc2Zvcm1fMSQxLmRlZmF1bHQucXVhZHJpbGF0ZXJhbFRvUXVhZHJpbGF0ZXJhbChwMVRvWCwgcDFUb1ksIHAyVG9YLCBwMlRvWSwgcDNUb1gsIHAzVG9ZLCBwNFRvWCwgcDRUb1ksIHAxRnJvbVgsIHAxRnJvbVksIHAyRnJvbVgsIHAyRnJvbVksIHAzRnJvbVgsIHAzRnJvbVksIHA0RnJvbVgsIHA0RnJvbVkpOwoJICAgICAgICByZXR1cm4gdGhpcy5zYW1wbGVHcmlkV2l0aFRyYW5zZm9ybShpbWFnZSwgZGltZW5zaW9uWCwgZGltZW5zaW9uWSwgdHJhbnNmb3JtKTsKCSAgICB9OwoJICAgIC8qQE92ZXJyaWRlKi8KCSAgICBEZWZhdWx0R3JpZFNhbXBsZXIucHJvdG90eXBlLnNhbXBsZUdyaWRXaXRoVHJhbnNmb3JtID0gZnVuY3Rpb24gKGltYWdlLCBkaW1lbnNpb25YIC8qaW50Ki8sIGRpbWVuc2lvblkgLyppbnQqLywgdHJhbnNmb3JtKSB7CgkgICAgICAgIGlmIChkaW1lbnNpb25YIDw9IDAgfHwgZGltZW5zaW9uWSA8PSAwKSB7CgkgICAgICAgICAgICB0aHJvdyBuZXcgTm90Rm91bmRFeGNlcHRpb25fMSQ0LmRlZmF1bHQoKTsKCSAgICAgICAgfQoJICAgICAgICB2YXIgYml0cyA9IG5ldyBCaXRNYXRyaXhfMSQxLmRlZmF1bHQoZGltZW5zaW9uWCwgZGltZW5zaW9uWSk7CgkgICAgICAgIHZhciBwb2ludHMgPSBuZXcgRmxvYXQzMkFycmF5KDIgKiBkaW1lbnNpb25YKTsKCSAgICAgICAgZm9yICh2YXIgeSA9IDA7IHkgPCBkaW1lbnNpb25ZOyB5KyspIHsKCSAgICAgICAgICAgIHZhciBtYXggPSBwb2ludHMubGVuZ3RoOwoJICAgICAgICAgICAgdmFyIGlWYWx1ZSA9IHkgKyAwLjU7CgkgICAgICAgICAgICBmb3IgKHZhciB4ID0gMDsgeCA8IG1heDsgeCArPSAyKSB7CgkgICAgICAgICAgICAgICAgcG9pbnRzW3hdID0gKHggLyAyKSArIDAuNTsKCSAgICAgICAgICAgICAgICBwb2ludHNbeCArIDFdID0gaVZhbHVlOwoJICAgICAgICAgICAgfQoJICAgICAgICAgICAgdHJhbnNmb3JtLnRyYW5zZm9ybVBvaW50cyhwb2ludHMpOwoJICAgICAgICAgICAgLy8gUXVpY2sgY2hlY2sgdG8gc2VlIGlmIHBvaW50cyB0cmFuc2Zvcm1lZCB0byBzb21ldGhpbmcgaW5zaWRlIHRoZSBpbWFnZQoJICAgICAgICAgICAgLy8gc3VmZmljaWVudCB0byBjaGVjayB0aGUgZW5kcG9pbnRzCgkgICAgICAgICAgICBHcmlkU2FtcGxlcl8xLmRlZmF1bHQuY2hlY2tBbmROdWRnZVBvaW50cyhpbWFnZSwgcG9pbnRzKTsKCSAgICAgICAgICAgIHRyeSB7CgkgICAgICAgICAgICAgICAgZm9yICh2YXIgeCA9IDA7IHggPCBtYXg7IHggKz0gMikgewoJICAgICAgICAgICAgICAgICAgICBpZiAoaW1hZ2UuZ2V0KE1hdGguZmxvb3IocG9pbnRzW3hdKSwgTWF0aC5mbG9vcihwb2ludHNbeCArIDFdKSkpIHsKCSAgICAgICAgICAgICAgICAgICAgICAgIC8vIEJsYWNrKC1pc2gpIHBpeGVsCgkgICAgICAgICAgICAgICAgICAgICAgICBiaXRzLnNldCh4IC8gMiwgeSk7CgkgICAgICAgICAgICAgICAgICAgIH0KCSAgICAgICAgICAgICAgICB9CgkgICAgICAgICAgICB9CgkgICAgICAgICAgICBjYXRjaCAoYWlvb2JlIC8qOiBBcnJheUluZGV4T3V0T2ZCb3VuZHNFeGNlcHRpb24qLykgewoJICAgICAgICAgICAgICAgIC8vIFRoaXMgZmVlbHMgd3JvbmcsIGJ1dCwgc29tZXRpbWVzIGlmIHRoZSBmaW5kZXIgcGF0dGVybnMgYXJlIG1pc2lkZW50aWZpZWQsIHRoZSByZXN1bHRpbmcKCSAgICAgICAgICAgICAgICAvLyB0cmFuc2Zvcm0gZ2V0cyAidHdpc3RlZCIgc3VjaCB0aGF0IGl0IG1hcHMgYSBzdHJhaWdodCBsaW5lIG9mIHBvaW50cyB0byBhIHNldCBvZiBwb2ludHMKCSAgICAgICAgICAgICAgICAvLyB3aG9zZSBlbmRwb2ludHMgYXJlIGluIGJvdW5kcywgYnV0IG90aGVycyBhcmUgbm90LiBUaGVyZSBpcyBwcm9iYWJseSBzb21lIG1hdGhlbWF0aWNhbAoJICAgICAgICAgICAgICAgIC8vIHdheSB0byBkZXRlY3QgdGhpcyBhYm91dCB0aGUgdHJhbnNmb3JtYXRpb24gdGhhdCBJIGRvbid0IGtub3cgeWV0LgoJICAgICAgICAgICAgICAgIC8vIFRoaXMgcmVzdWx0cyBpbiBhbiB1Z2x5IHJ1bnRpbWUgZXhjZXB0aW9uIGRlc3BpdGUgb3VyIGNsZXZlciBjaGVja3MgYWJvdmUgLS0gY2FuJ3QgaGF2ZQoJICAgICAgICAgICAgICAgIC8vIHRoYXQuIFdlIGNvdWxkIGNoZWNrIGVhY2ggcG9pbnQncyBjb29yZGluYXRlcyBidXQgdGhhdCBmZWVscyBkdXBsaWNhdGl2ZS4gV2Ugc2V0dGxlIGZvcgoJICAgICAgICAgICAgICAgIC8vIGNhdGNoaW5nIGFuZCB3cmFwcGluZyBBcnJheUluZGV4T3V0T2ZCb3VuZHNFeGNlcHRpb24uCgkgICAgICAgICAgICAgICAgdGhyb3cgbmV3IE5vdEZvdW5kRXhjZXB0aW9uXzEkNC5kZWZhdWx0KCk7CgkgICAgICAgICAgICB9CgkgICAgICAgIH0KCSAgICAgICAgcmV0dXJuIGJpdHM7CgkgICAgfTsKCSAgICByZXR1cm4gRGVmYXVsdEdyaWRTYW1wbGVyOwoJfShHcmlkU2FtcGxlcl8xLmRlZmF1bHQpKTsKCURlZmF1bHRHcmlkU2FtcGxlciQxLmRlZmF1bHQgPSBEZWZhdWx0R3JpZFNhbXBsZXI7CgoJT2JqZWN0LmRlZmluZVByb3BlcnR5KEdyaWRTYW1wbGVySW5zdGFuY2UkMSwgIl9fZXNNb2R1bGUiLCB7IHZhbHVlOiB0cnVlIH0pOwoJdmFyIERlZmF1bHRHcmlkU2FtcGxlcl8xID0gRGVmYXVsdEdyaWRTYW1wbGVyJDE7Cgl2YXIgR3JpZFNhbXBsZXJJbnN0YW5jZSA9IC8qKiBAY2xhc3MgKi8gKGZ1bmN0aW9uICgpIHsKCSAgICBmdW5jdGlvbiBHcmlkU2FtcGxlckluc3RhbmNlKCkgewoJICAgIH0KCSAgICAvKioKCSAgICAgKiBTZXRzIHRoZSBpbXBsZW1lbnRhdGlvbiBvZiBHcmlkU2FtcGxlciB1c2VkIGJ5IHRoZSBsaWJyYXJ5LiBPbmUgZ2xvYmFsCgkgICAgICogaW5zdGFuY2UgaXMgc3RvcmVkLCB3aGljaCBtYXkgc291bmQgcHJvYmxlbWF0aWMuIEJ1dCwgdGhlIGltcGxlbWVudGF0aW9uIHByb3ZpZGVkCgkgICAgICogb3VnaHQgdG8gYmUgYXBwcm9wcmlhdGUgZm9yIHRoZSBlbnRpcmUgcGxhdGZvcm0sIGFuZCBhbGwgdXNlcyBvZiB0aGlzIGxpYnJhcnkKCSAgICAgKiBpbiB0aGUgd2hvbGUgbGlmZXRpbWUgb2YgdGhlIEpWTS4gRm9yIGluc3RhbmNlLCBhbiBBbmRyb2lkIGFjdGl2aXR5IGNhbiBzd2FwIGluCgkgICAgICogYW4gaW1wbGVtZW50YXRpb24gdGhhdCB0YWtlcyBhZHZhbnRhZ2Ugb2YgbmF0aXZlIHBsYXRmb3JtIGxpYnJhcmllcy4KCSAgICAgKgoJICAgICAqIEBwYXJhbSBuZXdHcmlkU2FtcGxlciBUaGUgcGxhdGZvcm0tc3BlY2lmaWMgb2JqZWN0IHRvIGluc3RhbGwuCgkgICAgICovCgkgICAgR3JpZFNhbXBsZXJJbnN0YW5jZS5zZXRHcmlkU2FtcGxlciA9IGZ1bmN0aW9uIChuZXdHcmlkU2FtcGxlcikgewoJICAgICAgICBHcmlkU2FtcGxlckluc3RhbmNlLmdyaWRTYW1wbGVyID0gbmV3R3JpZFNhbXBsZXI7CgkgICAgfTsKCSAgICAvKioKCSAgICAgKiBAcmV0dXJuIHRoZSBjdXJyZW50IGltcGxlbWVudGF0aW9uIG9mIEdyaWRTYW1wbGVyCgkgICAgICovCgkgICAgR3JpZFNhbXBsZXJJbnN0YW5jZS5nZXRJbnN0YW5jZSA9IGZ1bmN0aW9uICgpIHsKCSAgICAgICAgcmV0dXJuIEdyaWRTYW1wbGVySW5zdGFuY2UuZ3JpZFNhbXBsZXI7CgkgICAgfTsKCSAgICBHcmlkU2FtcGxlckluc3RhbmNlLmdyaWRTYW1wbGVyID0gbmV3IERlZmF1bHRHcmlkU2FtcGxlcl8xLmRlZmF1bHQoKTsKCSAgICByZXR1cm4gR3JpZFNhbXBsZXJJbnN0YW5jZTsKCX0oKSk7CglHcmlkU2FtcGxlckluc3RhbmNlJDEuZGVmYXVsdCA9IEdyaWRTYW1wbGVySW5zdGFuY2U7CgoJdmFyIFJlc3VsdFBvaW50JDEgPSB7fTsKCgl2YXIgRmxvYXQkMSA9IHt9OwoKCU9iamVjdC5kZWZpbmVQcm9wZXJ0eShGbG9hdCQxLCAiX19lc01vZHVsZSIsIHsgdmFsdWU6IHRydWUgfSk7CgkvKioKCSAqIFBvbnlmaWxsIGZvciBKYXZhJ3MgRmxvYXQgY2xhc3MuCgkgKi8KCXZhciBGbG9hdCA9IC8qKiBAY2xhc3MgKi8gKGZ1bmN0aW9uICgpIHsKCSAgICBmdW5jdGlvbiBGbG9hdCgpIHsKCSAgICB9CgkgICAgLyoqCgkgICAgICogU2luY1RTIGhhcyBubyBkaWZmZXJlbmNlIGJldHdlZW4gaW50IGFuZCBmbG9hdCwgdGhlcmUncyBhbGwgbnVtYmVycywKCSAgICAgKiB0aGlzIGlzIHVzZWQgb25seSB0byBwb2x5ZmlsbCBKYXZhIGNvZGUuCgkgICAgICovCgkgICAgRmxvYXQuZmxvYXRUb0ludEJpdHMgPSBmdW5jdGlvbiAoZikgewoJICAgICAgICByZXR1cm4gZjsKCSAgICB9OwoJICAgIC8qKgoJICAgICAqIFRoZSBmbG9hdCBtYXggdmFsdWUgaW4gSlMgaXMgdGhlIG51bWJlciBtYXggdmFsdWUuCgkgICAgICovCgkgICAgRmxvYXQuTUFYX1ZBTFVFID0gTnVtYmVyLk1BWF9TQUZFX0lOVEVHRVI7CgkgICAgcmV0dXJuIEZsb2F0OwoJfSgpKTsKCUZsb2F0JDEuZGVmYXVsdCA9IEZsb2F0OwoKCS8qCgkgKiBDb3B5cmlnaHQgMjAwNyBaWGluZyBhdXRob3JzCgkgKgoJICogTGljZW5zZWQgdW5kZXIgdGhlIEFwYWNoZSBMaWNlbnNlLCBWZXJzaW9uIDIuMCAodGhlICJMaWNlbnNlIik7CgkgKiB5b3UgbWF5IG5vdCB1c2UgdGhpcyBmaWxlIGV4Y2VwdCBpbiBjb21wbGlhbmNlIHdpdGggdGhlIExpY2Vuc2UuCgkgKiBZb3UgbWF5IG9idGFpbiBhIGNvcHkgb2YgdGhlIExpY2Vuc2UgYXQKCSAqCgkgKiAgICAgIGh0dHA6Ly93d3cuYXBhY2hlLm9yZy9saWNlbnNlcy9MSUNFTlNFLTIuMAoJICoKCSAqIFVubGVzcyByZXF1aXJlZCBieSBhcHBsaWNhYmxlIGxhdyBvciBhZ3JlZWQgdG8gaW4gd3JpdGluZywgc29mdHdhcmUKCSAqIGRpc3RyaWJ1dGVkIHVuZGVyIHRoZSBMaWNlbnNlIGlzIGRpc3RyaWJ1dGVkIG9uIGFuICJBUyBJUyIgQkFTSVMsCgkgKiBXSVRIT1VUIFdBUlJBTlRJRVMgT1IgQ09ORElUSU9OUyBPRiBBTlkgS0lORCwgZWl0aGVyIGV4cHJlc3Mgb3IgaW1wbGllZC4KCSAqIFNlZSB0aGUgTGljZW5zZSBmb3IgdGhlIHNwZWNpZmljIGxhbmd1YWdlIGdvdmVybmluZyBwZXJtaXNzaW9ucyBhbmQKCSAqIGxpbWl0YXRpb25zIHVuZGVyIHRoZSBMaWNlbnNlLgoJICovCglPYmplY3QuZGVmaW5lUHJvcGVydHkoUmVzdWx0UG9pbnQkMSwgIl9fZXNNb2R1bGUiLCB7IHZhbHVlOiB0cnVlIH0pOwoJLypuYW1lc3BhY2UgY29tLmdvb2dsZS56eGluZyB7Ki8KCXZhciBNYXRoVXRpbHNfMSQxID0gTWF0aFV0aWxzJDE7Cgl2YXIgRmxvYXRfMSA9IEZsb2F0JDE7CgkvKioKCSAqIDxwPkVuY2Fwc3VsYXRlcyBhIHBvaW50IG9mIGludGVyZXN0IGluIGFuIGltYWdlIGNvbnRhaW5pbmcgYSBiYXJjb2RlLiBUeXBpY2FsbHksIHRoaXMKCSAqIHdvdWxkIGJlIHRoZSBsb2NhdGlvbiBvZiBhIGZpbmRlciBwYXR0ZXJuIG9yIHRoZSBjb3JuZXIgb2YgdGhlIGJhcmNvZGUsIGZvciBleGFtcGxlLjwvcD4KCSAqCgkgKiBAYXV0aG9yIFNlYW4gT3dlbgoJICovCgl2YXIgUmVzdWx0UG9pbnQgPSAvKiogQGNsYXNzICovIChmdW5jdGlvbiAoKSB7CgkgICAgZnVuY3Rpb24gUmVzdWx0UG9pbnQoeCwgeSkgewoJICAgICAgICB0aGlzLnggPSB4OwoJICAgICAgICB0aGlzLnkgPSB5OwoJICAgIH0KCSAgICBSZXN1bHRQb2ludC5wcm90b3R5cGUuZ2V0WCA9IGZ1bmN0aW9uICgpIHsKCSAgICAgICAgcmV0dXJuIHRoaXMueDsKCSAgICB9OwoJICAgIFJlc3VsdFBvaW50LnByb3RvdHlwZS5nZXRZID0gZnVuY3Rpb24gKCkgewoJICAgICAgICByZXR1cm4gdGhpcy55OwoJICAgIH07CgkgICAgLypAT3ZlcnJpZGUqLwoJICAgIFJlc3VsdFBvaW50LnByb3RvdHlwZS5lcXVhbHMgPSBmdW5jdGlvbiAob3RoZXIpIHsKCSAgICAgICAgaWYgKG90aGVyIGluc3RhbmNlb2YgUmVzdWx0UG9pbnQpIHsKCSAgICAgICAgICAgIHZhciBvdGhlclBvaW50ID0gb3RoZXI7CgkgICAgICAgICAgICByZXR1cm4gdGhpcy54ID09PSBvdGhlclBvaW50LnggJiYgdGhpcy55ID09PSBvdGhlclBvaW50Lnk7CgkgICAgICAgIH0KCSAgICAgICAgcmV0dXJuIGZhbHNlOwoJICAgIH07CgkgICAgLypAT3ZlcnJpZGUqLwoJICAgIFJlc3VsdFBvaW50LnByb3RvdHlwZS5oYXNoQ29kZSA9IGZ1bmN0aW9uICgpIHsKCSAgICAgICAgcmV0dXJuIDMxICogRmxvYXRfMS5kZWZhdWx0LmZsb2F0VG9JbnRCaXRzKHRoaXMueCkgKyBGbG9hdF8xLmRlZmF1bHQuZmxvYXRUb0ludEJpdHModGhpcy55KTsKCSAgICB9OwoJICAgIC8qQE92ZXJyaWRlKi8KCSAgICBSZXN1bHRQb2ludC5wcm90b3R5cGUudG9TdHJpbmcgPSBmdW5jdGlvbiAoKSB7CgkgICAgICAgIHJldHVybiAnKCcgKyB0aGlzLnggKyAnLCcgKyB0aGlzLnkgKyAnKSc7CgkgICAgfTsKCSAgICAvKioKCSAgICAgKiBPcmRlcnMgYW4gYXJyYXkgb2YgdGhyZWUgUmVzdWx0UG9pbnRzIGluIGFuIG9yZGVyIFtBLEIsQ10gc3VjaCB0aGF0IEFCIGlzIGxlc3MgdGhhbiBBQwoJICAgICAqIGFuZCBCQyBpcyBsZXNzIHRoYW4gQUMsIGFuZCB0aGUgYW5nbGUgYmV0d2VlbiBCQyBhbmQgQkEgaXMgbGVzcyB0aGFuIDE4MCBkZWdyZWVzLgoJICAgICAqCgkgICAgICogQHBhcmFtIHBhdHRlcm5zIGFycmF5IG9mIHRocmVlIHtAY29kZSBSZXN1bHRQb2ludH0gdG8gb3JkZXIKCSAgICAgKi8KCSAgICBSZXN1bHRQb2ludC5vcmRlckJlc3RQYXR0ZXJucyA9IGZ1bmN0aW9uIChwYXR0ZXJucykgewoJICAgICAgICAvLyBGaW5kIGRpc3RhbmNlcyBiZXR3ZWVuIHBhdHRlcm4gY2VudGVycwoJICAgICAgICB2YXIgemVyb09uZURpc3RhbmNlID0gdGhpcy5kaXN0YW5jZShwYXR0ZXJuc1swXSwgcGF0dGVybnNbMV0pOwoJICAgICAgICB2YXIgb25lVHdvRGlzdGFuY2UgPSB0aGlzLmRpc3RhbmNlKHBhdHRlcm5zWzFdLCBwYXR0ZXJuc1syXSk7CgkgICAgICAgIHZhciB6ZXJvVHdvRGlzdGFuY2UgPSB0aGlzLmRpc3RhbmNlKHBhdHRlcm5zWzBdLCBwYXR0ZXJuc1syXSk7CgkgICAgICAgIHZhciBwb2ludEE7CgkgICAgICAgIHZhciBwb2ludEI7CgkgICAgICAgIHZhciBwb2ludEM7CgkgICAgICAgIC8vIEFzc3VtZSBvbmUgY2xvc2VzdCB0byBvdGhlciB0d28gaXMgQjsgQSBhbmQgQyB3aWxsIGp1c3QgYmUgZ3Vlc3NlcyBhdCBmaXJzdAoJICAgICAgICBpZiAob25lVHdvRGlzdGFuY2UgPj0gemVyb09uZURpc3RhbmNlICYmIG9uZVR3b0Rpc3RhbmNlID49IHplcm9Ud29EaXN0YW5jZSkgewoJICAgICAgICAgICAgcG9pbnRCID0gcGF0dGVybnNbMF07CgkgICAgICAgICAgICBwb2ludEEgPSBwYXR0ZXJuc1sxXTsKCSAgICAgICAgICAgIHBvaW50QyA9IHBhdHRlcm5zWzJdOwoJICAgICAgICB9CgkgICAgICAgIGVsc2UgaWYgKHplcm9Ud29EaXN0YW5jZSA+PSBvbmVUd29EaXN0YW5jZSAmJiB6ZXJvVHdvRGlzdGFuY2UgPj0gemVyb09uZURpc3RhbmNlKSB7CgkgICAgICAgICAgICBwb2ludEIgPSBwYXR0ZXJuc1sxXTsKCSAgICAgICAgICAgIHBvaW50QSA9IHBhdHRlcm5zWzBdOwoJICAgICAgICAgICAgcG9pbnRDID0gcGF0dGVybnNbMl07CgkgICAgICAgIH0KCSAgICAgICAgZWxzZSB7CgkgICAgICAgICAgICBwb2ludEIgPSBwYXR0ZXJuc1syXTsKCSAgICAgICAgICAgIHBvaW50QSA9IHBhdHRlcm5zWzBdOwoJICAgICAgICAgICAgcG9pbnRDID0gcGF0dGVybnNbMV07CgkgICAgICAgIH0KCSAgICAgICAgLy8gVXNlIGNyb3NzIHByb2R1Y3QgdG8gZmlndXJlIG91dCB3aGV0aGVyIEEgYW5kIEMgYXJlIGNvcnJlY3Qgb3IgZmxpcHBlZC4KCSAgICAgICAgLy8gVGhpcyBhc2tzIHdoZXRoZXIgQkMgeCBCQSBoYXMgYSBwb3NpdGl2ZSB6IGNvbXBvbmVudCwgd2hpY2ggaXMgdGhlIGFycmFuZ2VtZW50CgkgICAgICAgIC8vIHdlIHdhbnQgZm9yIEEsIEIsIEMuIElmIGl0J3MgbmVnYXRpdmUsIHRoZW4gd2UndmUgZ290IGl0IGZsaXBwZWQgYXJvdW5kIGFuZAoJICAgICAgICAvLyBzaG91bGQgc3dhcCBBIGFuZCBDLgoJICAgICAgICBpZiAodGhpcy5jcm9zc1Byb2R1Y3RaKHBvaW50QSwgcG9pbnRCLCBwb2ludEMpIDwgMC4wKSB7CgkgICAgICAgICAgICB2YXIgdGVtcCA9IHBvaW50QTsKCSAgICAgICAgICAgIHBvaW50QSA9IHBvaW50QzsKCSAgICAgICAgICAgIHBvaW50QyA9IHRlbXA7CgkgICAgICAgIH0KCSAgICAgICAgcGF0dGVybnNbMF0gPSBwb2ludEE7CgkgICAgICAgIHBhdHRlcm5zWzFdID0gcG9pbnRCOwoJICAgICAgICBwYXR0ZXJuc1syXSA9IHBvaW50QzsKCSAgICB9OwoJICAgIC8qKgoJICAgICAqIEBwYXJhbSBwYXR0ZXJuMSBmaXJzdCBwYXR0ZXJuCgkgICAgICogQHBhcmFtIHBhdHRlcm4yIHNlY29uZCBwYXR0ZXJuCgkgICAgICogQHJldHVybiBkaXN0YW5jZSBiZXR3ZWVuIHR3byBwb2ludHMKCSAgICAgKi8KCSAgICBSZXN1bHRQb2ludC5kaXN0YW5jZSA9IGZ1bmN0aW9uIChwYXR0ZXJuMSwgcGF0dGVybjIpIHsKCSAgICAgICAgcmV0dXJuIE1hdGhVdGlsc18xJDEuZGVmYXVsdC5kaXN0YW5jZShwYXR0ZXJuMS54LCBwYXR0ZXJuMS55LCBwYXR0ZXJuMi54LCBwYXR0ZXJuMi55KTsKCSAgICB9OwoJICAgIC8qKgoJICAgICAqIFJldHVybnMgdGhlIHogY29tcG9uZW50IG9mIHRoZSBjcm9zcyBwcm9kdWN0IGJldHdlZW4gdmVjdG9ycyBCQyBhbmQgQkEuCgkgICAgICovCgkgICAgUmVzdWx0UG9pbnQuY3Jvc3NQcm9kdWN0WiA9IGZ1bmN0aW9uIChwb2ludEEsIHBvaW50QiwgcG9pbnRDKSB7CgkgICAgICAgIHZhciBiWCA9IHBvaW50Qi54OwoJICAgICAgICB2YXIgYlkgPSBwb2ludEIueTsKCSAgICAgICAgcmV0dXJuICgocG9pbnRDLnggLSBiWCkgKiAocG9pbnRBLnkgLSBiWSkpIC0gKChwb2ludEMueSAtIGJZKSAqIChwb2ludEEueCAtIGJYKSk7CgkgICAgfTsKCSAgICByZXR1cm4gUmVzdWx0UG9pbnQ7Cgl9KCkpOwoJUmVzdWx0UG9pbnQkMS5kZWZhdWx0ID0gUmVzdWx0UG9pbnQ7CgoJdmFyIEFsaWdubWVudFBhdHRlcm5GaW5kZXIkMSA9IHt9OwoKCXZhciBBbGlnbm1lbnRQYXR0ZXJuJDEgPSB7fTsKCgkvKgoJICogQ29weXJpZ2h0IDIwMDcgWlhpbmcgYXV0aG9ycwoJICoKCSAqIExpY2Vuc2VkIHVuZGVyIHRoZSBBcGFjaGUgTGljZW5zZSwgVmVyc2lvbiAyLjAgKHRoZSAiTGljZW5zZSIpOwoJICogeW91IG1heSBub3QgdXNlIHRoaXMgZmlsZSBleGNlcHQgaW4gY29tcGxpYW5jZSB3aXRoIHRoZSBMaWNlbnNlLgoJICogWW91IG1heSBvYnRhaW4gYSBjb3B5IG9mIHRoZSBMaWNlbnNlIGF0CgkgKgoJICogICAgICBodHRwOi8vd3d3LmFwYWNoZS5vcmcvbGljZW5zZXMvTElDRU5TRS0yLjAKCSAqCgkgKiBVbmxlc3MgcmVxdWlyZWQgYnkgYXBwbGljYWJsZSBsYXcgb3IgYWdyZWVkIHRvIGluIHdyaXRpbmcsIHNvZnR3YXJlCgkgKiBkaXN0cmlidXRlZCB1bmRlciB0aGUgTGljZW5zZSBpcyBkaXN0cmlidXRlZCBvbiBhbiAiQVMgSVMiIEJBU0lTLAoJICogV0lUSE9VVCBXQVJSQU5USUVTIE9SIENPTkRJVElPTlMgT0YgQU5ZIEtJTkQsIGVpdGhlciBleHByZXNzIG9yIGltcGxpZWQuCgkgKiBTZWUgdGhlIExpY2Vuc2UgZm9yIHRoZSBzcGVjaWZpYyBsYW5ndWFnZSBnb3Zlcm5pbmcgcGVybWlzc2lvbnMgYW5kCgkgKiBsaW1pdGF0aW9ucyB1bmRlciB0aGUgTGljZW5zZS4KCSAqLwoJdmFyIF9fZXh0ZW5kcyQxID0gKGNvbW1vbmpzR2xvYmFsICYmIGNvbW1vbmpzR2xvYmFsLl9fZXh0ZW5kcykgfHwgKGZ1bmN0aW9uICgpIHsKCSAgICB2YXIgZXh0ZW5kU3RhdGljcyA9IGZ1bmN0aW9uIChkLCBiKSB7CgkgICAgICAgIGV4dGVuZFN0YXRpY3MgPSBPYmplY3Quc2V0UHJvdG90eXBlT2YgfHwKCSAgICAgICAgICAgICh7IF9fcHJvdG9fXzogW10gfSBpbnN0YW5jZW9mIEFycmF5ICYmIGZ1bmN0aW9uIChkLCBiKSB7IGQuX19wcm90b19fID0gYjsgfSkgfHwKCSAgICAgICAgICAgIGZ1bmN0aW9uIChkLCBiKSB7IGZvciAodmFyIHAgaW4gYikgaWYgKGIuaGFzT3duUHJvcGVydHkocCkpIGRbcF0gPSBiW3BdOyB9OwoJICAgICAgICByZXR1cm4gZXh0ZW5kU3RhdGljcyhkLCBiKTsKCSAgICB9OwoJICAgIHJldHVybiBmdW5jdGlvbiAoZCwgYikgewoJICAgICAgICBleHRlbmRTdGF0aWNzKGQsIGIpOwoJICAgICAgICBmdW5jdGlvbiBfXygpIHsgdGhpcy5jb25zdHJ1Y3RvciA9IGQ7IH0KCSAgICAgICAgZC5wcm90b3R5cGUgPSBiID09PSBudWxsID8gT2JqZWN0LmNyZWF0ZShiKSA6IChfXy5wcm90b3R5cGUgPSBiLnByb3RvdHlwZSwgbmV3IF9fKCkpOwoJICAgIH07Cgl9KSgpOwoJT2JqZWN0LmRlZmluZVByb3BlcnR5KEFsaWdubWVudFBhdHRlcm4kMSwgIl9fZXNNb2R1bGUiLCB7IHZhbHVlOiB0cnVlIH0pOwoJLypuYW1lc3BhY2UgY29tLmdvb2dsZS56eGluZy5xcmNvZGUuZGV0ZWN0b3IgeyovCgl2YXIgUmVzdWx0UG9pbnRfMSQzID0gUmVzdWx0UG9pbnQkMTsKCS8qKgoJICogPHA+RW5jYXBzdWxhdGVzIGFuIGFsaWdubWVudCBwYXR0ZXJuLCB3aGljaCBhcmUgdGhlIHNtYWxsZXIgc3F1YXJlIHBhdHRlcm5zIGZvdW5kIGluCgkgKiBhbGwgYnV0IHRoZSBzaW1wbGVzdCBRUiBDb2Rlcy48L3A+CgkgKgoJICogQGF1dGhvciBTZWFuIE93ZW4KCSAqLwoJdmFyIEFsaWdubWVudFBhdHRlcm4gPSAvKiogQGNsYXNzICovIChmdW5jdGlvbiAoX3N1cGVyKSB7CgkgICAgX19leHRlbmRzJDEoQWxpZ25tZW50UGF0dGVybiwgX3N1cGVyKTsKCSAgICBmdW5jdGlvbiBBbGlnbm1lbnRQYXR0ZXJuKHBvc1ggLypmbG9hdCovLCBwb3NZIC8qZmxvYXQqLywgZXN0aW1hdGVkTW9kdWxlU2l6ZSAvKmZsb2F0Ki8pIHsKCSAgICAgICAgdmFyIF90aGlzID0gX3N1cGVyLmNhbGwodGhpcywgcG9zWCwgcG9zWSkgfHwgdGhpczsKCSAgICAgICAgX3RoaXMuZXN0aW1hdGVkTW9kdWxlU2l6ZSA9IGVzdGltYXRlZE1vZHVsZVNpemU7CgkgICAgICAgIHJldHVybiBfdGhpczsKCSAgICB9CgkgICAgLyoqCgkgICAgICogPHA+RGV0ZXJtaW5lcyBpZiB0aGlzIGFsaWdubWVudCBwYXR0ZXJuICJhYm91dCBlcXVhbHMiIGFuIGFsaWdubWVudCBwYXR0ZXJuIGF0IHRoZSBzdGF0ZWQKCSAgICAgKiBwb3NpdGlvbiBhbmQgc2l6ZSAtLSBtZWFuaW5nLCBpdCBpcyBhdCBuZWFybHkgdGhlIHNhbWUgY2VudGVyIHdpdGggbmVhcmx5IHRoZSBzYW1lIHNpemUuPC9wPgoJICAgICAqLwoJICAgIEFsaWdubWVudFBhdHRlcm4ucHJvdG90eXBlLmFib3V0RXF1YWxzID0gZnVuY3Rpb24gKG1vZHVsZVNpemUgLypmbG9hdCovLCBpIC8qZmxvYXQqLywgaiAvKmZsb2F0Ki8pIHsKCSAgICAgICAgaWYgKE1hdGguYWJzKGkgLSB0aGlzLmdldFkoKSkgPD0gbW9kdWxlU2l6ZSAmJiBNYXRoLmFicyhqIC0gdGhpcy5nZXRYKCkpIDw9IG1vZHVsZVNpemUpIHsKCSAgICAgICAgICAgIHZhciBtb2R1bGVTaXplRGlmZiA9IE1hdGguYWJzKG1vZHVsZVNpemUgLSB0aGlzLmVzdGltYXRlZE1vZHVsZVNpemUpOwoJICAgICAgICAgICAgcmV0dXJuIG1vZHVsZVNpemVEaWZmIDw9IDEuMCB8fCBtb2R1bGVTaXplRGlmZiA8PSB0aGlzLmVzdGltYXRlZE1vZHVsZVNpemU7CgkgICAgICAgIH0KCSAgICAgICAgcmV0dXJuIGZhbHNlOwoJICAgIH07CgkgICAgLyoqCgkgICAgICogQ29tYmluZXMgdGhpcyBvYmplY3QncyBjdXJyZW50IGVzdGltYXRlIG9mIGEgZmluZGVyIHBhdHRlcm4gcG9zaXRpb24gYW5kIG1vZHVsZSBzaXplCgkgICAgICogd2l0aCBhIG5ldyBlc3RpbWF0ZS4gSXQgcmV0dXJucyBhIG5ldyB7QGNvZGUgRmluZGVyUGF0dGVybn0gY29udGFpbmluZyBhbiBhdmVyYWdlIG9mIHRoZSB0d28uCgkgICAgICovCgkgICAgQWxpZ25tZW50UGF0dGVybi5wcm90b3R5cGUuY29tYmluZUVzdGltYXRlID0gZnVuY3Rpb24gKGkgLypmbG9hdCovLCBqIC8qZmxvYXQqLywgbmV3TW9kdWxlU2l6ZSAvKmZsb2F0Ki8pIHsKCSAgICAgICAgdmFyIGNvbWJpbmVkWCA9ICh0aGlzLmdldFgoKSArIGopIC8gMi4wOwoJICAgICAgICB2YXIgY29tYmluZWRZID0gKHRoaXMuZ2V0WSgpICsgaSkgLyAyLjA7CgkgICAgICAgIHZhciBjb21iaW5lZE1vZHVsZVNpemUgPSAodGhpcy5lc3RpbWF0ZWRNb2R1bGVTaXplICsgbmV3TW9kdWxlU2l6ZSkgLyAyLjA7CgkgICAgICAgIHJldHVybiBuZXcgQWxpZ25tZW50UGF0dGVybihjb21iaW5lZFgsIGNvbWJpbmVkWSwgY29tYmluZWRNb2R1bGVTaXplKTsKCSAgICB9OwoJICAgIHJldHVybiBBbGlnbm1lbnRQYXR0ZXJuOwoJfShSZXN1bHRQb2ludF8xJDMuZGVmYXVsdCkpOwoJQWxpZ25tZW50UGF0dGVybiQxLmRlZmF1bHQgPSBBbGlnbm1lbnRQYXR0ZXJuOwoKCS8qCgkgKiBDb3B5cmlnaHQgMjAwNyBaWGluZyBhdXRob3JzCgkgKgoJICogTGljZW5zZWQgdW5kZXIgdGhlIEFwYWNoZSBMaWNlbnNlLCBWZXJzaW9uIDIuMCAodGhlICJMaWNlbnNlIik7CgkgKiB5b3UgbWF5IG5vdCB1c2UgdGhpcyBmaWxlIGV4Y2VwdCBpbiBjb21wbGlhbmNlIHdpdGggdGhlIExpY2Vuc2UuCgkgKiBZb3UgbWF5IG9idGFpbiBhIGNvcHkgb2YgdGhlIExpY2Vuc2UgYXQKCSAqCgkgKiAgICAgIGh0dHA6Ly93d3cuYXBhY2hlLm9yZy9saWNlbnNlcy9MSUNFTlNFLTIuMAoJICoKCSAqIFVubGVzcyByZXF1aXJlZCBieSBhcHBsaWNhYmxlIGxhdyBvciBhZ3JlZWQgdG8gaW4gd3JpdGluZywgc29mdHdhcmUKCSAqIGRpc3RyaWJ1dGVkIHVuZGVyIHRoZSBMaWNlbnNlIGlzIGRpc3RyaWJ1dGVkIG9uIGFuICJBUyBJUyIgQkFTSVMsCgkgKiBXSVRIT1VUIFdBUlJBTlRJRVMgT1IgQ09ORElUSU9OUyBPRiBBTlkgS0lORCwgZWl0aGVyIGV4cHJlc3Mgb3IgaW1wbGllZC4KCSAqIFNlZSB0aGUgTGljZW5zZSBmb3IgdGhlIHNwZWNpZmljIGxhbmd1YWdlIGdvdmVybmluZyBwZXJtaXNzaW9ucyBhbmQKCSAqIGxpbWl0YXRpb25zIHVuZGVyIHRoZSBMaWNlbnNlLgoJICovCgl2YXIgX192YWx1ZXMkMSA9IChjb21tb25qc0dsb2JhbCAmJiBjb21tb25qc0dsb2JhbC5fX3ZhbHVlcykgfHwgZnVuY3Rpb24obykgewoJICAgIHZhciBzID0gdHlwZW9mIFN5bWJvbCA9PT0gImZ1bmN0aW9uIiAmJiBTeW1ib2wuaXRlcmF0b3IsIG0gPSBzICYmIG9bc10sIGkgPSAwOwoJICAgIGlmIChtKSByZXR1cm4gbS5jYWxsKG8pOwoJICAgIGlmIChvICYmIHR5cGVvZiBvLmxlbmd0aCA9PT0gIm51bWJlciIpIHJldHVybiB7CgkgICAgICAgIG5leHQ6IGZ1bmN0aW9uICgpIHsKCSAgICAgICAgICAgIGlmIChvICYmIGkgPj0gby5sZW5ndGgpIG8gPSB2b2lkIDA7CgkgICAgICAgICAgICByZXR1cm4geyB2YWx1ZTogbyAmJiBvW2krK10sIGRvbmU6ICFvIH07CgkgICAgICAgIH0KCSAgICB9OwoJICAgIHRocm93IG5ldyBUeXBlRXJyb3IocyA/ICJPYmplY3QgaXMgbm90IGl0ZXJhYmxlLiIgOiAiU3ltYm9sLml0ZXJhdG9yIGlzIG5vdCBkZWZpbmVkLiIpOwoJfTsKCU9iamVjdC5kZWZpbmVQcm9wZXJ0eShBbGlnbm1lbnRQYXR0ZXJuRmluZGVyJDEsICJfX2VzTW9kdWxlIiwgeyB2YWx1ZTogdHJ1ZSB9KTsKCXZhciBBbGlnbm1lbnRQYXR0ZXJuXzEgPSBBbGlnbm1lbnRQYXR0ZXJuJDE7Cgl2YXIgTm90Rm91bmRFeGNlcHRpb25fMSQzID0gTm90Rm91bmRFeGNlcHRpb24kMTsKCS8qaW1wb3J0IGphdmEudXRpbC5BcnJheUxpc3Q7Ki8KCS8qaW1wb3J0IGphdmEudXRpbC5MaXN0OyovCgkvKioKCSAqIDxwPlRoaXMgY2xhc3MgYXR0ZW1wdHMgdG8gZmluZCBhbGlnbm1lbnQgcGF0dGVybnMgaW4gYSBRUiBDb2RlLiBBbGlnbm1lbnQgcGF0dGVybnMgbG9vayBsaWtlIGZpbmRlcgoJICogcGF0dGVybnMgYnV0IGFyZSBzbWFsbGVyIGFuZCBhcHBlYXIgYXQgcmVndWxhciBpbnRlcnZhbHMgdGhyb3VnaG91dCB0aGUgaW1hZ2UuPC9wPgoJICoKCSAqIDxwPkF0IHRoZSBtb21lbnQgdGhpcyBvbmx5IGxvb2tzIGZvciB0aGUgYm90dG9tLXJpZ2h0IGFsaWdubWVudCBwYXR0ZXJuLjwvcD4KCSAqCgkgKiA8cD5UaGlzIGlzIG1vc3RseSBhIHNpbXBsaWZpZWQgY29weSBvZiB7QGxpbmsgRmluZGVyUGF0dGVybkZpbmRlcn0uIEl0IGlzIGNvcGllZCwKCSAqIHBhc3RlZCBhbmQgc3RyaXBwZWQgZG93biBoZXJlIGZvciBtYXhpbXVtIHBlcmZvcm1hbmNlIGJ1dCBkb2VzIHVuZm9ydHVuYXRlbHkgZHVwbGljYXRlCgkgKiBzb21lIGNvZGUuPC9wPgoJICoKCSAqIDxwPlRoaXMgY2xhc3MgaXMgdGhyZWFkLXNhZmUgYnV0IG5vdCByZWVudHJhbnQuIEVhY2ggdGhyZWFkIG11c3QgYWxsb2NhdGUgaXRzIG93biBvYmplY3QuPC9wPgoJICoKCSAqIEBhdXRob3IgU2VhbiBPd2VuCgkgKi8KCXZhciBBbGlnbm1lbnRQYXR0ZXJuRmluZGVyID0gLyoqIEBjbGFzcyAqLyAoZnVuY3Rpb24gKCkgewoJICAgIC8qKgoJICAgICAqIDxwPkNyZWF0ZXMgYSBmaW5kZXIgdGhhdCB3aWxsIGxvb2sgaW4gYSBwb3J0aW9uIG9mIHRoZSB3aG9sZSBpbWFnZS48L3A+CgkgICAgICoKCSAgICAgKiBAcGFyYW0gaW1hZ2UgaW1hZ2UgdG8gc2VhcmNoCgkgICAgICogQHBhcmFtIHN0YXJ0WCBsZWZ0IGNvbHVtbiBmcm9tIHdoaWNoIHRvIHN0YXJ0IHNlYXJjaGluZwoJICAgICAqIEBwYXJhbSBzdGFydFkgdG9wIHJvdyBmcm9tIHdoaWNoIHRvIHN0YXJ0IHNlYXJjaGluZwoJICAgICAqIEBwYXJhbSB3aWR0aCB3aWR0aCBvZiByZWdpb24gdG8gc2VhcmNoCgkgICAgICogQHBhcmFtIGhlaWdodCBoZWlnaHQgb2YgcmVnaW9uIHRvIHNlYXJjaAoJICAgICAqIEBwYXJhbSBtb2R1bGVTaXplIGVzdGltYXRlZCBtb2R1bGUgc2l6ZSBzbyBmYXIKCSAgICAgKi8KCSAgICBmdW5jdGlvbiBBbGlnbm1lbnRQYXR0ZXJuRmluZGVyKGltYWdlLCBzdGFydFggLyppbnQqLywgc3RhcnRZIC8qaW50Ki8sIHdpZHRoIC8qaW50Ki8sIGhlaWdodCAvKmludCovLCBtb2R1bGVTaXplIC8qZmxvYXQqLywgcmVzdWx0UG9pbnRDYWxsYmFjaykgewoJICAgICAgICB0aGlzLmltYWdlID0gaW1hZ2U7CgkgICAgICAgIHRoaXMuc3RhcnRYID0gc3RhcnRYOwoJICAgICAgICB0aGlzLnN0YXJ0WSA9IHN0YXJ0WTsKCSAgICAgICAgdGhpcy53aWR0aCA9IHdpZHRoOwoJICAgICAgICB0aGlzLmhlaWdodCA9IGhlaWdodDsKCSAgICAgICAgdGhpcy5tb2R1bGVTaXplID0gbW9kdWxlU2l6ZTsKCSAgICAgICAgdGhpcy5yZXN1bHRQb2ludENhbGxiYWNrID0gcmVzdWx0UG9pbnRDYWxsYmFjazsKCSAgICAgICAgdGhpcy5wb3NzaWJsZUNlbnRlcnMgPSBbXTsgLy8gbmV3IEFycmF5PGFueT4oNSkpCgkgICAgICAgIC8vIFRZUEVTQ1JJUFRQT1JUOiBhcnJheSBpbml0aWFsaXphdGlvbiB3aXRob3V0IHNpemUgYXMgdGhlIGxlbmd0aCBpcyBjaGVja2VkIGJlbG93CgkgICAgICAgIHRoaXMuY3Jvc3NDaGVja1N0YXRlQ291bnQgPSBuZXcgSW50MzJBcnJheSgzKTsKCSAgICB9CgkgICAgLyoqCgkgICAgICogPHA+VGhpcyBtZXRob2QgYXR0ZW1wdHMgdG8gZmluZCB0aGUgYm90dG9tLXJpZ2h0IGFsaWdubWVudCBwYXR0ZXJuIGluIHRoZSBpbWFnZS4gSXQgaXMgYSBiaXQgbWVzc3kgc2luY2UKCSAgICAgKiBpdCdzIHByZXR0eSBwZXJmb3JtYW5jZS1jcml0aWNhbCBhbmQgc28gaXMgd3JpdHRlbiB0byBiZSBmYXN0IGZvcmVtb3N0LjwvcD4KCSAgICAgKgoJICAgICAqIEByZXR1cm4ge0BsaW5rIEFsaWdubWVudFBhdHRlcm59IGlmIGZvdW5kCgkgICAgICogQHRocm93cyBOb3RGb3VuZEV4Y2VwdGlvbiBpZiBub3QgZm91bmQKCSAgICAgKi8KCSAgICBBbGlnbm1lbnRQYXR0ZXJuRmluZGVyLnByb3RvdHlwZS5maW5kID0gZnVuY3Rpb24gKCkgewoJICAgICAgICB2YXIgc3RhcnRYID0gdGhpcy5zdGFydFg7CgkgICAgICAgIHZhciBoZWlnaHQgPSB0aGlzLmhlaWdodDsKCSAgICAgICAgdmFyIHdpZHRoID0gdGhpcy53aWR0aDsKCSAgICAgICAgdmFyIG1heEogPSBzdGFydFggKyB3aWR0aDsKCSAgICAgICAgdmFyIG1pZGRsZUkgPSB0aGlzLnN0YXJ0WSArIChoZWlnaHQgLyAyKTsKCSAgICAgICAgLy8gV2UgYXJlIGxvb2tpbmcgZm9yIGJsYWNrL3doaXRlL2JsYWNrIG1vZHVsZXMgaW4gMToxOjEgcmF0aW8KCSAgICAgICAgLy8gdGhpcyB0cmFja3MgdGhlIG51bWJlciBvZiBibGFjay93aGl0ZS9ibGFjayBtb2R1bGVzIHNlZW4gc28gZmFyCgkgICAgICAgIHZhciBzdGF0ZUNvdW50ID0gbmV3IEludDMyQXJyYXkoMyk7CgkgICAgICAgIHZhciBpbWFnZSA9IHRoaXMuaW1hZ2U7CgkgICAgICAgIGZvciAodmFyIGlHZW4gPSAwOyBpR2VuIDwgaGVpZ2h0OyBpR2VuKyspIHsKCSAgICAgICAgICAgIC8vIFNlYXJjaCBmcm9tIG1pZGRsZSBvdXR3YXJkcwoJICAgICAgICAgICAgdmFyIGkgPSBtaWRkbGVJICsgKChpR2VuICYgMHgwMSkgPT09IDAgPyBNYXRoLmZsb29yKChpR2VuICsgMSkgLyAyKSA6IC1NYXRoLmZsb29yKChpR2VuICsgMSkgLyAyKSk7CgkgICAgICAgICAgICBzdGF0ZUNvdW50WzBdID0gMDsKCSAgICAgICAgICAgIHN0YXRlQ291bnRbMV0gPSAwOwoJICAgICAgICAgICAgc3RhdGVDb3VudFsyXSA9IDA7CgkgICAgICAgICAgICB2YXIgaiA9IHN0YXJ0WDsKCSAgICAgICAgICAgIC8vIEJ1cm4gb2ZmIGxlYWRpbmcgd2hpdGUgcGl4ZWxzIGJlZm9yZSBhbnl0aGluZyBlbHNlOyBpZiB3ZSBzdGFydCBpbiB0aGUgbWlkZGxlIG9mCgkgICAgICAgICAgICAvLyBhIHdoaXRlIHJ1biwgaXQgZG9lc24ndCBtYWtlIHNlbnNlIHRvIGNvdW50IGl0cyBsZW5ndGgsIHNpbmNlIHdlIGRvbid0IGtub3cgaWYgdGhlCgkgICAgICAgICAgICAvLyB3aGl0ZSBydW4gY29udGludWVkIHRvIHRoZSBsZWZ0IG9mIHRoZSBzdGFydCBwb2ludAoJICAgICAgICAgICAgd2hpbGUgKGogPCBtYXhKICYmICFpbWFnZS5nZXQoaiwgaSkpIHsKCSAgICAgICAgICAgICAgICBqKys7CgkgICAgICAgICAgICB9CgkgICAgICAgICAgICB2YXIgY3VycmVudFN0YXRlID0gMDsKCSAgICAgICAgICAgIHdoaWxlIChqIDwgbWF4SikgewoJICAgICAgICAgICAgICAgIGlmIChpbWFnZS5nZXQoaiwgaSkpIHsKCSAgICAgICAgICAgICAgICAgICAgLy8gQmxhY2sgcGl4ZWwKCSAgICAgICAgICAgICAgICAgICAgaWYgKGN1cnJlbnRTdGF0ZSA9PT0gMSkgeyAvLyBDb3VudGluZyBibGFjayBwaXhlbHMKCSAgICAgICAgICAgICAgICAgICAgICAgIHN0YXRlQ291bnRbMV0rKzsKCSAgICAgICAgICAgICAgICAgICAgfQoJICAgICAgICAgICAgICAgICAgICBlbHNlIHsgLy8gQ291bnRpbmcgd2hpdGUgcGl4ZWxzCgkgICAgICAgICAgICAgICAgICAgICAgICBpZiAoY3VycmVudFN0YXRlID09PSAyKSB7IC8vIEEgd2lubmVyPwoJICAgICAgICAgICAgICAgICAgICAgICAgICAgIGlmICh0aGlzLmZvdW5kUGF0dGVybkNyb3NzKHN0YXRlQ291bnQpKSB7IC8vIFllcwoJICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB2YXIgY29uZmlybWVkID0gdGhpcy5oYW5kbGVQb3NzaWJsZUNlbnRlcihzdGF0ZUNvdW50LCBpLCBqKTsKCSAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgaWYgKGNvbmZpcm1lZCAhPT0gbnVsbCkgewoJICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgcmV0dXJuIGNvbmZpcm1lZDsKCSAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgfQoJICAgICAgICAgICAgICAgICAgICAgICAgICAgIH0KCSAgICAgICAgICAgICAgICAgICAgICAgICAgICBzdGF0ZUNvdW50WzBdID0gc3RhdGVDb3VudFsyXTsKCSAgICAgICAgICAgICAgICAgICAgICAgICAgICBzdGF0ZUNvdW50WzFdID0gMTsKCSAgICAgICAgICAgICAgICAgICAgICAgICAgICBzdGF0ZUNvdW50WzJdID0gMDsKCSAgICAgICAgICAgICAgICAgICAgICAgICAgICBjdXJyZW50U3RhdGUgPSAxOwoJICAgICAgICAgICAgICAgICAgICAgICAgfQoJICAgICAgICAgICAgICAgICAgICAgICAgZWxzZSB7CgkgICAgICAgICAgICAgICAgICAgICAgICAgICAgc3RhdGVDb3VudFsrK2N1cnJlbnRTdGF0ZV0rKzsKCSAgICAgICAgICAgICAgICAgICAgICAgIH0KCSAgICAgICAgICAgICAgICAgICAgfQoJICAgICAgICAgICAgICAgIH0KCSAgICAgICAgICAgICAgICBlbHNlIHsgLy8gV2hpdGUgcGl4ZWwKCSAgICAgICAgICAgICAgICAgICAgaWYgKGN1cnJlbnRTdGF0ZSA9PT0gMSkgeyAvLyBDb3VudGluZyBibGFjayBwaXhlbHMKCSAgICAgICAgICAgICAgICAgICAgICAgIGN1cnJlbnRTdGF0ZSsrOwoJICAgICAgICAgICAgICAgICAgICB9CgkgICAgICAgICAgICAgICAgICAgIHN0YXRlQ291bnRbY3VycmVudFN0YXRlXSsrOwoJICAgICAgICAgICAgICAgIH0KCSAgICAgICAgICAgICAgICBqKys7CgkgICAgICAgICAgICB9CgkgICAgICAgICAgICBpZiAodGhpcy5mb3VuZFBhdHRlcm5Dcm9zcyhzdGF0ZUNvdW50KSkgewoJICAgICAgICAgICAgICAgIHZhciBjb25maXJtZWQgPSB0aGlzLmhhbmRsZVBvc3NpYmxlQ2VudGVyKHN0YXRlQ291bnQsIGksIG1heEopOwoJICAgICAgICAgICAgICAgIGlmIChjb25maXJtZWQgIT09IG51bGwpIHsKCSAgICAgICAgICAgICAgICAgICAgcmV0dXJuIGNvbmZpcm1lZDsKCSAgICAgICAgICAgICAgICB9CgkgICAgICAgICAgICB9CgkgICAgICAgIH0KCSAgICAgICAgLy8gSG1tLCBub3RoaW5nIHdlIHNhdyB3YXMgb2JzZXJ2ZWQgYW5kIGNvbmZpcm1lZCB0d2ljZS4gSWYgd2UgaGFkCgkgICAgICAgIC8vIGFueSBndWVzcyBhdCBhbGwsIHJldHVybiBpdC4KCSAgICAgICAgaWYgKHRoaXMucG9zc2libGVDZW50ZXJzLmxlbmd0aCAhPT0gMCkgewoJICAgICAgICAgICAgcmV0dXJuIHRoaXMucG9zc2libGVDZW50ZXJzWzBdOwoJICAgICAgICB9CgkgICAgICAgIHRocm93IG5ldyBOb3RGb3VuZEV4Y2VwdGlvbl8xJDMuZGVmYXVsdCgpOwoJICAgIH07CgkgICAgLyoqCgkgICAgICogR2l2ZW4gYSBjb3VudCBvZiBibGFjay93aGl0ZS9ibGFjayBwaXhlbHMganVzdCBzZWVuIGFuZCBhbiBlbmQgcG9zaXRpb24sCgkgICAgICogZmlndXJlcyB0aGUgbG9jYXRpb24gb2YgdGhlIGNlbnRlciBvZiB0aGlzIGJsYWNrL3doaXRlL2JsYWNrIHJ1bi4KCSAgICAgKi8KCSAgICBBbGlnbm1lbnRQYXR0ZXJuRmluZGVyLmNlbnRlckZyb21FbmQgPSBmdW5jdGlvbiAoc3RhdGVDb3VudCwgZW5kIC8qaW50Ki8pIHsKCSAgICAgICAgcmV0dXJuIChlbmQgLSBzdGF0ZUNvdW50WzJdKSAtIHN0YXRlQ291bnRbMV0gLyAyLjA7CgkgICAgfTsKCSAgICAvKioKCSAgICAgKiBAcGFyYW0gc3RhdGVDb3VudCBjb3VudCBvZiBibGFjay93aGl0ZS9ibGFjayBwaXhlbHMganVzdCByZWFkCgkgICAgICogQHJldHVybiB0cnVlIGlmZiB0aGUgcHJvcG9ydGlvbnMgb2YgdGhlIGNvdW50cyBpcyBjbG9zZSBlbm91Z2ggdG8gdGhlIDEvMS8xIHJhdGlvcwoJICAgICAqICAgICAgICAgdXNlZCBieSBhbGlnbm1lbnQgcGF0dGVybnMgdG8gYmUgY29uc2lkZXJlZCBhIG1hdGNoCgkgICAgICovCgkgICAgQWxpZ25tZW50UGF0dGVybkZpbmRlci5wcm90b3R5cGUuZm91bmRQYXR0ZXJuQ3Jvc3MgPSBmdW5jdGlvbiAoc3RhdGVDb3VudCkgewoJICAgICAgICB2YXIgbW9kdWxlU2l6ZSA9IHRoaXMubW9kdWxlU2l6ZTsKCSAgICAgICAgdmFyIG1heFZhcmlhbmNlID0gbW9kdWxlU2l6ZSAvIDIuMDsKCSAgICAgICAgZm9yICh2YXIgaSA9IDA7IGkgPCAzOyBpKyspIHsKCSAgICAgICAgICAgIGlmIChNYXRoLmFicyhtb2R1bGVTaXplIC0gc3RhdGVDb3VudFtpXSkgPj0gbWF4VmFyaWFuY2UpIHsKCSAgICAgICAgICAgICAgICByZXR1cm4gZmFsc2U7CgkgICAgICAgICAgICB9CgkgICAgICAgIH0KCSAgICAgICAgcmV0dXJuIHRydWU7CgkgICAgfTsKCSAgICAvKioKCSAgICAgKiA8cD5BZnRlciBhIGhvcml6b250YWwgc2NhbiBmaW5kcyBhIHBvdGVudGlhbCBhbGlnbm1lbnQgcGF0dGVybiwgdGhpcyBtZXRob2QKCSAgICAgKiAiY3Jvc3MtY2hlY2tzIiBieSBzY2FubmluZyBkb3duIHZlcnRpY2FsbHkgdGhyb3VnaCB0aGUgY2VudGVyIG9mIHRoZSBwb3NzaWJsZQoJICAgICAqIGFsaWdubWVudCBwYXR0ZXJuIHRvIHNlZSBpZiB0aGUgc2FtZSBwcm9wb3J0aW9uIGlzIGRldGVjdGVkLjwvcD4KCSAgICAgKgoJICAgICAqIEBwYXJhbSBzdGFydEkgcm93IHdoZXJlIGFuIGFsaWdubWVudCBwYXR0ZXJuIHdhcyBkZXRlY3RlZAoJICAgICAqIEBwYXJhbSBjZW50ZXJKIGNlbnRlciBvZiB0aGUgc2VjdGlvbiB0aGF0IGFwcGVhcnMgdG8gY3Jvc3MgYW4gYWxpZ25tZW50IHBhdHRlcm4KCSAgICAgKiBAcGFyYW0gbWF4Q291bnQgbWF4aW11bSByZWFzb25hYmxlIG51bWJlciBvZiBtb2R1bGVzIHRoYXQgc2hvdWxkIGJlCgkgICAgICogb2JzZXJ2ZWQgaW4gYW55IHJlYWRpbmcgc3RhdGUsIGJhc2VkIG9uIHRoZSByZXN1bHRzIG9mIHRoZSBob3Jpem9udGFsIHNjYW4KCSAgICAgKiBAcmV0dXJuIHZlcnRpY2FsIGNlbnRlciBvZiBhbGlnbm1lbnQgcGF0dGVybiwgb3Ige0BsaW5rIEZsb2F0I05hTn0gaWYgbm90IGZvdW5kCgkgICAgICovCgkgICAgQWxpZ25tZW50UGF0dGVybkZpbmRlci5wcm90b3R5cGUuY3Jvc3NDaGVja1ZlcnRpY2FsID0gZnVuY3Rpb24gKHN0YXJ0SSAvKmludCovLCBjZW50ZXJKIC8qaW50Ki8sIG1heENvdW50IC8qaW50Ki8sIG9yaWdpbmFsU3RhdGVDb3VudFRvdGFsIC8qaW50Ki8pIHsKCSAgICAgICAgdmFyIGltYWdlID0gdGhpcy5pbWFnZTsKCSAgICAgICAgdmFyIG1heEkgPSBpbWFnZS5nZXRIZWlnaHQoKTsKCSAgICAgICAgdmFyIHN0YXRlQ291bnQgPSB0aGlzLmNyb3NzQ2hlY2tTdGF0ZUNvdW50OwoJICAgICAgICBzdGF0ZUNvdW50WzBdID0gMDsKCSAgICAgICAgc3RhdGVDb3VudFsxXSA9IDA7CgkgICAgICAgIHN0YXRlQ291bnRbMl0gPSAwOwoJICAgICAgICAvLyBTdGFydCBjb3VudGluZyB1cCBmcm9tIGNlbnRlcgoJICAgICAgICB2YXIgaSA9IHN0YXJ0STsKCSAgICAgICAgd2hpbGUgKGkgPj0gMCAmJiBpbWFnZS5nZXQoY2VudGVySiwgaSkgJiYgc3RhdGVDb3VudFsxXSA8PSBtYXhDb3VudCkgewoJICAgICAgICAgICAgc3RhdGVDb3VudFsxXSsrOwoJICAgICAgICAgICAgaS0tOwoJICAgICAgICB9CgkgICAgICAgIC8vIElmIGFscmVhZHkgdG9vIG1hbnkgbW9kdWxlcyBpbiB0aGlzIHN0YXRlIG9yIHJhbiBvZmYgdGhlIGVkZ2U6CgkgICAgICAgIGlmIChpIDwgMCB8fCBzdGF0ZUNvdW50WzFdID4gbWF4Q291bnQpIHsKCSAgICAgICAgICAgIHJldHVybiBOYU47CgkgICAgICAgIH0KCSAgICAgICAgd2hpbGUgKGkgPj0gMCAmJiAhaW1hZ2UuZ2V0KGNlbnRlckosIGkpICYmIHN0YXRlQ291bnRbMF0gPD0gbWF4Q291bnQpIHsKCSAgICAgICAgICAgIHN0YXRlQ291bnRbMF0rKzsKCSAgICAgICAgICAgIGktLTsKCSAgICAgICAgfQoJICAgICAgICBpZiAoc3RhdGVDb3VudFswXSA+IG1heENvdW50KSB7CgkgICAgICAgICAgICByZXR1cm4gTmFOOwoJICAgICAgICB9CgkgICAgICAgIC8vIE5vdyBhbHNvIGNvdW50IGRvd24gZnJvbSBjZW50ZXIKCSAgICAgICAgaSA9IHN0YXJ0SSArIDE7CgkgICAgICAgIHdoaWxlIChpIDwgbWF4SSAmJiBpbWFnZS5nZXQoY2VudGVySiwgaSkgJiYgc3RhdGVDb3VudFsxXSA8PSBtYXhDb3VudCkgewoJICAgICAgICAgICAgc3RhdGVDb3VudFsxXSsrOwoJICAgICAgICAgICAgaSsrOwoJICAgICAgICB9CgkgICAgICAgIGlmIChpID09PSBtYXhJIHx8IHN0YXRlQ291bnRbMV0gPiBtYXhDb3VudCkgewoJICAgICAgICAgICAgcmV0dXJuIE5hTjsKCSAgICAgICAgfQoJICAgICAgICB3aGlsZSAoaSA8IG1heEkgJiYgIWltYWdlLmdldChjZW50ZXJKLCBpKSAmJiBzdGF0ZUNvdW50WzJdIDw9IG1heENvdW50KSB7CgkgICAgICAgICAgICBzdGF0ZUNvdW50WzJdKys7CgkgICAgICAgICAgICBpKys7CgkgICAgICAgIH0KCSAgICAgICAgaWYgKHN0YXRlQ291bnRbMl0gPiBtYXhDb3VudCkgewoJICAgICAgICAgICAgcmV0dXJuIE5hTjsKCSAgICAgICAgfQoJICAgICAgICB2YXIgc3RhdGVDb3VudFRvdGFsID0gc3RhdGVDb3VudFswXSArIHN0YXRlQ291bnRbMV0gKyBzdGF0ZUNvdW50WzJdOwoJICAgICAgICBpZiAoNSAqIE1hdGguYWJzKHN0YXRlQ291bnRUb3RhbCAtIG9yaWdpbmFsU3RhdGVDb3VudFRvdGFsKSA+PSAyICogb3JpZ2luYWxTdGF0ZUNvdW50VG90YWwpIHsKCSAgICAgICAgICAgIHJldHVybiBOYU47CgkgICAgICAgIH0KCSAgICAgICAgcmV0dXJuIHRoaXMuZm91bmRQYXR0ZXJuQ3Jvc3Moc3RhdGVDb3VudCkgPyBBbGlnbm1lbnRQYXR0ZXJuRmluZGVyLmNlbnRlckZyb21FbmQoc3RhdGVDb3VudCwgaSkgOiBOYU47CgkgICAgfTsKCSAgICAvKioKCSAgICAgKiA8cD5UaGlzIGlzIGNhbGxlZCB3aGVuIGEgaG9yaXpvbnRhbCBzY2FuIGZpbmRzIGEgcG9zc2libGUgYWxpZ25tZW50IHBhdHRlcm4uIEl0IHdpbGwKCSAgICAgKiBjcm9zcyBjaGVjayB3aXRoIGEgdmVydGljYWwgc2NhbiwgYW5kIGlmIHN1Y2Nlc3NmdWwsIHdpbGwgc2VlIGlmIHRoaXMgcGF0dGVybiBoYWQgYmVlbgoJICAgICAqIGZvdW5kIG9uIGEgcHJldmlvdXMgaG9yaXpvbnRhbCBzY2FuLiBJZiBzbywgd2UgY29uc2lkZXIgaXQgY29uZmlybWVkIGFuZCBjb25jbHVkZSB3ZSBoYXZlCgkgICAgICogZm91bmQgdGhlIGFsaWdubWVudCBwYXR0ZXJuLjwvcD4KCSAgICAgKgoJICAgICAqIEBwYXJhbSBzdGF0ZUNvdW50IHJlYWRpbmcgc3RhdGUgbW9kdWxlIGNvdW50cyBmcm9tIGhvcml6b250YWwgc2NhbgoJICAgICAqIEBwYXJhbSBpIHJvdyB3aGVyZSBhbGlnbm1lbnQgcGF0dGVybiBtYXkgYmUgZm91bmQKCSAgICAgKiBAcGFyYW0gaiBlbmQgb2YgcG9zc2libGUgYWxpZ25tZW50IHBhdHRlcm4gaW4gcm93CgkgICAgICogQHJldHVybiB7QGxpbmsgQWxpZ25tZW50UGF0dGVybn0gaWYgd2UgaGF2ZSBmb3VuZCB0aGUgc2FtZSBwYXR0ZXJuIHR3aWNlLCBvciBudWxsIGlmIG5vdAoJICAgICAqLwoJICAgIEFsaWdubWVudFBhdHRlcm5GaW5kZXIucHJvdG90eXBlLmhhbmRsZVBvc3NpYmxlQ2VudGVyID0gZnVuY3Rpb24gKHN0YXRlQ291bnQsIGkgLyppbnQqLywgaiAvKmludCovKSB7CgkgICAgICAgIHZhciBlXzEsIF9hOwoJICAgICAgICB2YXIgc3RhdGVDb3VudFRvdGFsID0gc3RhdGVDb3VudFswXSArIHN0YXRlQ291bnRbMV0gKyBzdGF0ZUNvdW50WzJdOwoJICAgICAgICB2YXIgY2VudGVySiA9IEFsaWdubWVudFBhdHRlcm5GaW5kZXIuY2VudGVyRnJvbUVuZChzdGF0ZUNvdW50LCBqKTsKCSAgICAgICAgdmFyIGNlbnRlckkgPSB0aGlzLmNyb3NzQ2hlY2tWZXJ0aWNhbChpLCAvKihpbnQpICovIGNlbnRlckosIDIgKiBzdGF0ZUNvdW50WzFdLCBzdGF0ZUNvdW50VG90YWwpOwoJICAgICAgICBpZiAoIWlzTmFOKGNlbnRlckkpKSB7CgkgICAgICAgICAgICB2YXIgZXN0aW1hdGVkTW9kdWxlU2l6ZSA9IChzdGF0ZUNvdW50WzBdICsgc3RhdGVDb3VudFsxXSArIHN0YXRlQ291bnRbMl0pIC8gMy4wOwoJICAgICAgICAgICAgdHJ5IHsKCSAgICAgICAgICAgICAgICBmb3IgKHZhciBfYiA9IF9fdmFsdWVzJDEodGhpcy5wb3NzaWJsZUNlbnRlcnMpLCBfYyA9IF9iLm5leHQoKTsgIV9jLmRvbmU7IF9jID0gX2IubmV4dCgpKSB7CgkgICAgICAgICAgICAgICAgICAgIHZhciBjZW50ZXIgPSBfYy52YWx1ZTsKCSAgICAgICAgICAgICAgICAgICAgLy8gTG9vayBmb3IgYWJvdXQgdGhlIHNhbWUgY2VudGVyIGFuZCBtb2R1bGUgc2l6ZToKCSAgICAgICAgICAgICAgICAgICAgaWYgKGNlbnRlci5hYm91dEVxdWFscyhlc3RpbWF0ZWRNb2R1bGVTaXplLCBjZW50ZXJJLCBjZW50ZXJKKSkgewoJICAgICAgICAgICAgICAgICAgICAgICAgcmV0dXJuIGNlbnRlci5jb21iaW5lRXN0aW1hdGUoY2VudGVySSwgY2VudGVySiwgZXN0aW1hdGVkTW9kdWxlU2l6ZSk7CgkgICAgICAgICAgICAgICAgICAgIH0KCSAgICAgICAgICAgICAgICB9CgkgICAgICAgICAgICB9CgkgICAgICAgICAgICBjYXRjaCAoZV8xXzEpIHsgZV8xID0geyBlcnJvcjogZV8xXzEgfTsgfQoJICAgICAgICAgICAgZmluYWxseSB7CgkgICAgICAgICAgICAgICAgdHJ5IHsKCSAgICAgICAgICAgICAgICAgICAgaWYgKF9jICYmICFfYy5kb25lICYmIChfYSA9IF9iLnJldHVybikpIF9hLmNhbGwoX2IpOwoJICAgICAgICAgICAgICAgIH0KCSAgICAgICAgICAgICAgICBmaW5hbGx5IHsgaWYgKGVfMSkgdGhyb3cgZV8xLmVycm9yOyB9CgkgICAgICAgICAgICB9CgkgICAgICAgICAgICAvLyBIYWRuJ3QgZm91bmQgdGhpcyBiZWZvcmU7IHNhdmUgaXQKCSAgICAgICAgICAgIHZhciBwb2ludCA9IG5ldyBBbGlnbm1lbnRQYXR0ZXJuXzEuZGVmYXVsdChjZW50ZXJKLCBjZW50ZXJJLCBlc3RpbWF0ZWRNb2R1bGVTaXplKTsKCSAgICAgICAgICAgIHRoaXMucG9zc2libGVDZW50ZXJzLnB1c2gocG9pbnQpOwoJICAgICAgICAgICAgaWYgKHRoaXMucmVzdWx0UG9pbnRDYWxsYmFjayAhPT0gbnVsbCAmJiB0aGlzLnJlc3VsdFBvaW50Q2FsbGJhY2sgIT09IHVuZGVmaW5lZCkgewoJICAgICAgICAgICAgICAgIHRoaXMucmVzdWx0UG9pbnRDYWxsYmFjay5mb3VuZFBvc3NpYmxlUmVzdWx0UG9pbnQocG9pbnQpOwoJICAgICAgICAgICAgfQoJICAgICAgICB9CgkgICAgICAgIHJldHVybiBudWxsOwoJICAgIH07CgkgICAgcmV0dXJuIEFsaWdubWVudFBhdHRlcm5GaW5kZXI7Cgl9KCkpOwoJQWxpZ25tZW50UGF0dGVybkZpbmRlciQxLmRlZmF1bHQgPSBBbGlnbm1lbnRQYXR0ZXJuRmluZGVyOwoKCXZhciBGaW5kZXJQYXR0ZXJuRmluZGVyJDEgPSB7fTsKCgl2YXIgRmluZGVyUGF0dGVybiQxID0ge307CgoJLyoKCSAqIENvcHlyaWdodCAyMDA3IFpYaW5nIGF1dGhvcnMKCSAqCgkgKiBMaWNlbnNlZCB1bmRlciB0aGUgQXBhY2hlIExpY2Vuc2UsIFZlcnNpb24gMi4wICh0aGUgIkxpY2Vuc2UiKTsKCSAqIHlvdSBtYXkgbm90IHVzZSB0aGlzIGZpbGUgZXhjZXB0IGluIGNvbXBsaWFuY2Ugd2l0aCB0aGUgTGljZW5zZS4KCSAqIFlvdSBtYXkgb2J0YWluIGEgY29weSBvZiB0aGUgTGljZW5zZSBhdAoJICoKCSAqICAgICAgaHR0cDovL3d3dy5hcGFjaGUub3JnL2xpY2Vuc2VzL0xJQ0VOU0UtMi4wCgkgKgoJICogVW5sZXNzIHJlcXVpcmVkIGJ5IGFwcGxpY2FibGUgbGF3IG9yIGFncmVlZCB0byBpbiB3cml0aW5nLCBzb2Z0d2FyZQoJICogZGlzdHJpYnV0ZWQgdW5kZXIgdGhlIExpY2Vuc2UgaXMgZGlzdHJpYnV0ZWQgb24gYW4gIkFTIElTIiBCQVNJUywKCSAqIFdJVEhPVVQgV0FSUkFOVElFUyBPUiBDT05ESVRJT05TIE9GIEFOWSBLSU5ELCBlaXRoZXIgZXhwcmVzcyBvciBpbXBsaWVkLgoJICogU2VlIHRoZSBMaWNlbnNlIGZvciB0aGUgc3BlY2lmaWMgbGFuZ3VhZ2UgZ292ZXJuaW5nIHBlcm1pc3Npb25zIGFuZAoJICogbGltaXRhdGlvbnMgdW5kZXIgdGhlIExpY2Vuc2UuCgkgKi8KCXZhciBfX2V4dGVuZHMgPSAoY29tbW9uanNHbG9iYWwgJiYgY29tbW9uanNHbG9iYWwuX19leHRlbmRzKSB8fCAoZnVuY3Rpb24gKCkgewoJICAgIHZhciBleHRlbmRTdGF0aWNzID0gZnVuY3Rpb24gKGQsIGIpIHsKCSAgICAgICAgZXh0ZW5kU3RhdGljcyA9IE9iamVjdC5zZXRQcm90b3R5cGVPZiB8fAoJICAgICAgICAgICAgKHsgX19wcm90b19fOiBbXSB9IGluc3RhbmNlb2YgQXJyYXkgJiYgZnVuY3Rpb24gKGQsIGIpIHsgZC5fX3Byb3RvX18gPSBiOyB9KSB8fAoJICAgICAgICAgICAgZnVuY3Rpb24gKGQsIGIpIHsgZm9yICh2YXIgcCBpbiBiKSBpZiAoYi5oYXNPd25Qcm9wZXJ0eShwKSkgZFtwXSA9IGJbcF07IH07CgkgICAgICAgIHJldHVybiBleHRlbmRTdGF0aWNzKGQsIGIpOwoJICAgIH07CgkgICAgcmV0dXJuIGZ1bmN0aW9uIChkLCBiKSB7CgkgICAgICAgIGV4dGVuZFN0YXRpY3MoZCwgYik7CgkgICAgICAgIGZ1bmN0aW9uIF9fKCkgeyB0aGlzLmNvbnN0cnVjdG9yID0gZDsgfQoJICAgICAgICBkLnByb3RvdHlwZSA9IGIgPT09IG51bGwgPyBPYmplY3QuY3JlYXRlKGIpIDogKF9fLnByb3RvdHlwZSA9IGIucHJvdG90eXBlLCBuZXcgX18oKSk7CgkgICAgfTsKCX0pKCk7CglPYmplY3QuZGVmaW5lUHJvcGVydHkoRmluZGVyUGF0dGVybiQxLCAiX19lc01vZHVsZSIsIHsgdmFsdWU6IHRydWUgfSk7CgkvKm5hbWVzcGFjZSBjb20uZ29vZ2xlLnp4aW5nLnFyY29kZS5kZXRlY3RvciB7Ki8KCXZhciBSZXN1bHRQb2ludF8xJDIgPSBSZXN1bHRQb2ludCQxOwoJLyoqCgkgKiA8cD5FbmNhcHN1bGF0ZXMgYSBmaW5kZXIgcGF0dGVybiwgd2hpY2ggYXJlIHRoZSB0aHJlZSBzcXVhcmUgcGF0dGVybnMgZm91bmQgaW4KCSAqIHRoZSBjb3JuZXJzIG9mIFFSIENvZGVzLiBJdCBhbHNvIGVuY2Fwc3VsYXRlcyBhIGNvdW50IG9mIHNpbWlsYXIgZmluZGVyIHBhdHRlcm5zLAoJICogYXMgYSBjb252ZW5pZW5jZSB0byB0aGUgZmluZGVyJ3MgYm9va2tlZXBpbmcuPC9wPgoJICoKCSAqIEBhdXRob3IgU2VhbiBPd2VuCgkgKi8KCXZhciBGaW5kZXJQYXR0ZXJuID0gLyoqIEBjbGFzcyAqLyAoZnVuY3Rpb24gKF9zdXBlcikgewoJICAgIF9fZXh0ZW5kcyhGaW5kZXJQYXR0ZXJuLCBfc3VwZXIpOwoJICAgIC8vIEZpbmRlclBhdHRlcm4ocG9zWDogbnVtYmVyLypmbG9hdCovLCBwb3NZOiBudW1iZXIvKmZsb2F0Ki8sIGVzdGltYXRlZE1vZHVsZVNpemU6IG51bWJlci8qZmxvYXQqLykgewoJICAgIC8vICAgdGhpcyhwb3NYLCBwb3NZLCBlc3RpbWF0ZWRNb2R1bGVTaXplLCAxKQoJICAgIC8vIH0KCSAgICBmdW5jdGlvbiBGaW5kZXJQYXR0ZXJuKHBvc1ggLypmbG9hdCovLCBwb3NZIC8qZmxvYXQqLywgZXN0aW1hdGVkTW9kdWxlU2l6ZSAvKmZsb2F0Ki8sIGNvdW50IC8qaW50Ki8pIHsKCSAgICAgICAgdmFyIF90aGlzID0gX3N1cGVyLmNhbGwodGhpcywgcG9zWCwgcG9zWSkgfHwgdGhpczsKCSAgICAgICAgX3RoaXMuZXN0aW1hdGVkTW9kdWxlU2l6ZSA9IGVzdGltYXRlZE1vZHVsZVNpemU7CgkgICAgICAgIF90aGlzLmNvdW50ID0gY291bnQ7CgkgICAgICAgIGlmICh1bmRlZmluZWQgPT09IGNvdW50KSB7CgkgICAgICAgICAgICBfdGhpcy5jb3VudCA9IDE7CgkgICAgICAgIH0KCSAgICAgICAgcmV0dXJuIF90aGlzOwoJICAgIH0KCSAgICBGaW5kZXJQYXR0ZXJuLnByb3RvdHlwZS5nZXRFc3RpbWF0ZWRNb2R1bGVTaXplID0gZnVuY3Rpb24gKCkgewoJICAgICAgICByZXR1cm4gdGhpcy5lc3RpbWF0ZWRNb2R1bGVTaXplOwoJICAgIH07CgkgICAgRmluZGVyUGF0dGVybi5wcm90b3R5cGUuZ2V0Q291bnQgPSBmdW5jdGlvbiAoKSB7CgkgICAgICAgIHJldHVybiB0aGlzLmNvdW50OwoJICAgIH07CgkgICAgLyoKCSAgICB2b2lkIGluY3JlbWVudENvdW50KCkgewoJICAgICAgdGhpcy5jb3VudCsrCgkgICAgfQoJICAgICAqLwoJICAgIC8qKgoJICAgICAqIDxwPkRldGVybWluZXMgaWYgdGhpcyBmaW5kZXIgcGF0dGVybiAiYWJvdXQgZXF1YWxzIiBhIGZpbmRlciBwYXR0ZXJuIGF0IHRoZSBzdGF0ZWQKCSAgICAgKiBwb3NpdGlvbiBhbmQgc2l6ZSAtLSBtZWFuaW5nLCBpdCBpcyBhdCBuZWFybHkgdGhlIHNhbWUgY2VudGVyIHdpdGggbmVhcmx5IHRoZSBzYW1lIHNpemUuPC9wPgoJICAgICAqLwoJICAgIEZpbmRlclBhdHRlcm4ucHJvdG90eXBlLmFib3V0RXF1YWxzID0gZnVuY3Rpb24gKG1vZHVsZVNpemUgLypmbG9hdCovLCBpIC8qZmxvYXQqLywgaiAvKmZsb2F0Ki8pIHsKCSAgICAgICAgaWYgKE1hdGguYWJzKGkgLSB0aGlzLmdldFkoKSkgPD0gbW9kdWxlU2l6ZSAmJiBNYXRoLmFicyhqIC0gdGhpcy5nZXRYKCkpIDw9IG1vZHVsZVNpemUpIHsKCSAgICAgICAgICAgIHZhciBtb2R1bGVTaXplRGlmZiA9IE1hdGguYWJzKG1vZHVsZVNpemUgLSB0aGlzLmVzdGltYXRlZE1vZHVsZVNpemUpOwoJICAgICAgICAgICAgcmV0dXJuIG1vZHVsZVNpemVEaWZmIDw9IDEuMCB8fCBtb2R1bGVTaXplRGlmZiA8PSB0aGlzLmVzdGltYXRlZE1vZHVsZVNpemU7CgkgICAgICAgIH0KCSAgICAgICAgcmV0dXJuIGZhbHNlOwoJICAgIH07CgkgICAgLyoqCgkgICAgICogQ29tYmluZXMgdGhpcyBvYmplY3QncyBjdXJyZW50IGVzdGltYXRlIG9mIGEgZmluZGVyIHBhdHRlcm4gcG9zaXRpb24gYW5kIG1vZHVsZSBzaXplCgkgICAgICogd2l0aCBhIG5ldyBlc3RpbWF0ZS4gSXQgcmV0dXJucyBhIG5ldyB7QGNvZGUgRmluZGVyUGF0dGVybn0gY29udGFpbmluZyBhIHdlaWdodGVkIGF2ZXJhZ2UKCSAgICAgKiBiYXNlZCBvbiBjb3VudC4KCSAgICAgKi8KCSAgICBGaW5kZXJQYXR0ZXJuLnByb3RvdHlwZS5jb21iaW5lRXN0aW1hdGUgPSBmdW5jdGlvbiAoaSAvKmZsb2F0Ki8sIGogLypmbG9hdCovLCBuZXdNb2R1bGVTaXplIC8qZmxvYXQqLykgewoJICAgICAgICB2YXIgY29tYmluZWRDb3VudCA9IHRoaXMuY291bnQgKyAxOwoJICAgICAgICB2YXIgY29tYmluZWRYID0gKHRoaXMuY291bnQgKiB0aGlzLmdldFgoKSArIGopIC8gY29tYmluZWRDb3VudDsKCSAgICAgICAgdmFyIGNvbWJpbmVkWSA9ICh0aGlzLmNvdW50ICogdGhpcy5nZXRZKCkgKyBpKSAvIGNvbWJpbmVkQ291bnQ7CgkgICAgICAgIHZhciBjb21iaW5lZE1vZHVsZVNpemUgPSAodGhpcy5jb3VudCAqIHRoaXMuZXN0aW1hdGVkTW9kdWxlU2l6ZSArIG5ld01vZHVsZVNpemUpIC8gY29tYmluZWRDb3VudDsKCSAgICAgICAgcmV0dXJuIG5ldyBGaW5kZXJQYXR0ZXJuKGNvbWJpbmVkWCwgY29tYmluZWRZLCBjb21iaW5lZE1vZHVsZVNpemUsIGNvbWJpbmVkQ291bnQpOwoJICAgIH07CgkgICAgcmV0dXJuIEZpbmRlclBhdHRlcm47Cgl9KFJlc3VsdFBvaW50XzEkMi5kZWZhdWx0KSk7CglGaW5kZXJQYXR0ZXJuJDEuZGVmYXVsdCA9IEZpbmRlclBhdHRlcm47CgoJdmFyIEZpbmRlclBhdHRlcm5JbmZvJDEgPSB7fTsKCgkvKgoJICogQ29weXJpZ2h0IDIwMDcgWlhpbmcgYXV0aG9ycwoJICoKCSAqIExpY2Vuc2VkIHVuZGVyIHRoZSBBcGFjaGUgTGljZW5zZSwgVmVyc2lvbiAyLjAgKHRoZSAiTGljZW5zZSIpOwoJICogeW91IG1heSBub3QgdXNlIHRoaXMgZmlsZSBleGNlcHQgaW4gY29tcGxpYW5jZSB3aXRoIHRoZSBMaWNlbnNlLgoJICogWW91IG1heSBvYnRhaW4gYSBjb3B5IG9mIHRoZSBMaWNlbnNlIGF0CgkgKgoJICogICAgICBodHRwOi8vd3d3LmFwYWNoZS5vcmcvbGljZW5zZXMvTElDRU5TRS0yLjAKCSAqCgkgKiBVbmxlc3MgcmVxdWlyZWQgYnkgYXBwbGljYWJsZSBsYXcgb3IgYWdyZWVkIHRvIGluIHdyaXRpbmcsIHNvZnR3YXJlCgkgKiBkaXN0cmlidXRlZCB1bmRlciB0aGUgTGljZW5zZSBpcyBkaXN0cmlidXRlZCBvbiBhbiAiQVMgSVMiIEJBU0lTLAoJICogV0lUSE9VVCBXQVJSQU5USUVTIE9SIENPTkRJVElPTlMgT0YgQU5ZIEtJTkQsIGVpdGhlciBleHByZXNzIG9yIGltcGxpZWQuCgkgKiBTZWUgdGhlIExpY2Vuc2UgZm9yIHRoZSBzcGVjaWZpYyBsYW5ndWFnZSBnb3Zlcm5pbmcgcGVybWlzc2lvbnMgYW5kCgkgKiBsaW1pdGF0aW9ucyB1bmRlciB0aGUgTGljZW5zZS4KCSAqLwoJT2JqZWN0LmRlZmluZVByb3BlcnR5KEZpbmRlclBhdHRlcm5JbmZvJDEsICJfX2VzTW9kdWxlIiwgeyB2YWx1ZTogdHJ1ZSB9KTsKCS8qKgoJICogPHA+RW5jYXBzdWxhdGVzIGluZm9ybWF0aW9uIGFib3V0IGZpbmRlciBwYXR0ZXJucyBpbiBhbiBpbWFnZSwgaW5jbHVkaW5nIHRoZSBsb2NhdGlvbiBvZgoJICogdGhlIHRocmVlIGZpbmRlciBwYXR0ZXJucywgYW5kIHRoZWlyIGVzdGltYXRlZCBtb2R1bGUgc2l6ZS48L3A+CgkgKgoJICogQGF1dGhvciBTZWFuIE93ZW4KCSAqLwoJdmFyIEZpbmRlclBhdHRlcm5JbmZvID0gLyoqIEBjbGFzcyAqLyAoZnVuY3Rpb24gKCkgewoJICAgIGZ1bmN0aW9uIEZpbmRlclBhdHRlcm5JbmZvKHBhdHRlcm5DZW50ZXJzKSB7CgkgICAgICAgIHRoaXMuYm90dG9tTGVmdCA9IHBhdHRlcm5DZW50ZXJzWzBdOwoJICAgICAgICB0aGlzLnRvcExlZnQgPSBwYXR0ZXJuQ2VudGVyc1sxXTsKCSAgICAgICAgdGhpcy50b3BSaWdodCA9IHBhdHRlcm5DZW50ZXJzWzJdOwoJICAgIH0KCSAgICBGaW5kZXJQYXR0ZXJuSW5mby5wcm90b3R5cGUuZ2V0Qm90dG9tTGVmdCA9IGZ1bmN0aW9uICgpIHsKCSAgICAgICAgcmV0dXJuIHRoaXMuYm90dG9tTGVmdDsKCSAgICB9OwoJICAgIEZpbmRlclBhdHRlcm5JbmZvLnByb3RvdHlwZS5nZXRUb3BMZWZ0ID0gZnVuY3Rpb24gKCkgewoJICAgICAgICByZXR1cm4gdGhpcy50b3BMZWZ0OwoJICAgIH07CgkgICAgRmluZGVyUGF0dGVybkluZm8ucHJvdG90eXBlLmdldFRvcFJpZ2h0ID0gZnVuY3Rpb24gKCkgewoJICAgICAgICByZXR1cm4gdGhpcy50b3BSaWdodDsKCSAgICB9OwoJICAgIHJldHVybiBGaW5kZXJQYXR0ZXJuSW5mbzsKCX0oKSk7CglGaW5kZXJQYXR0ZXJuSW5mbyQxLmRlZmF1bHQgPSBGaW5kZXJQYXR0ZXJuSW5mbzsKCgkvKgoJICogQ29weXJpZ2h0IDIwMDcgWlhpbmcgYXV0aG9ycwoJICoKCSAqIExpY2Vuc2VkIHVuZGVyIHRoZSBBcGFjaGUgTGljZW5zZSwgVmVyc2lvbiAyLjAgKHRoZSAiTGljZW5zZSIpOwoJICogeW91IG1heSBub3QgdXNlIHRoaXMgZmlsZSBleGNlcHQgaW4gY29tcGxpYW5jZSB3aXRoIHRoZSBMaWNlbnNlLgoJICogWW91IG1heSBvYnRhaW4gYSBjb3B5IG9mIHRoZSBMaWNlbnNlIGF0CgkgKgoJICogICAgICBodHRwOi8vd3d3LmFwYWNoZS5vcmcvbGljZW5zZXMvTElDRU5TRS0yLjAKCSAqCgkgKiBVbmxlc3MgcmVxdWlyZWQgYnkgYXBwbGljYWJsZSBsYXcgb3IgYWdyZWVkIHRvIGluIHdyaXRpbmcsIHNvZnR3YXJlCgkgKiBkaXN0cmlidXRlZCB1bmRlciB0aGUgTGljZW5zZSBpcyBkaXN0cmlidXRlZCBvbiBhbiAiQVMgSVMiIEJBU0lTLAoJICogV0lUSE9VVCBXQVJSQU5USUVTIE9SIENPTkRJVElPTlMgT0YgQU5ZIEtJTkQsIGVpdGhlciBleHByZXNzIG9yIGltcGxpZWQuCgkgKiBTZWUgdGhlIExpY2Vuc2UgZm9yIHRoZSBzcGVjaWZpYyBsYW5ndWFnZSBnb3Zlcm5pbmcgcGVybWlzc2lvbnMgYW5kCgkgKiBsaW1pdGF0aW9ucyB1bmRlciB0aGUgTGljZW5zZS4KCSAqLwoJdmFyIF9fdmFsdWVzID0gKGNvbW1vbmpzR2xvYmFsICYmIGNvbW1vbmpzR2xvYmFsLl9fdmFsdWVzKSB8fCBmdW5jdGlvbihvKSB7CgkgICAgdmFyIHMgPSB0eXBlb2YgU3ltYm9sID09PSAiZnVuY3Rpb24iICYmIFN5bWJvbC5pdGVyYXRvciwgbSA9IHMgJiYgb1tzXSwgaSA9IDA7CgkgICAgaWYgKG0pIHJldHVybiBtLmNhbGwobyk7CgkgICAgaWYgKG8gJiYgdHlwZW9mIG8ubGVuZ3RoID09PSAibnVtYmVyIikgcmV0dXJuIHsKCSAgICAgICAgbmV4dDogZnVuY3Rpb24gKCkgewoJICAgICAgICAgICAgaWYgKG8gJiYgaSA+PSBvLmxlbmd0aCkgbyA9IHZvaWQgMDsKCSAgICAgICAgICAgIHJldHVybiB7IHZhbHVlOiBvICYmIG9baSsrXSwgZG9uZTogIW8gfTsKCSAgICAgICAgfQoJICAgIH07CgkgICAgdGhyb3cgbmV3IFR5cGVFcnJvcihzID8gIk9iamVjdCBpcyBub3QgaXRlcmFibGUuIiA6ICJTeW1ib2wuaXRlcmF0b3IgaXMgbm90IGRlZmluZWQuIik7Cgl9OwoJT2JqZWN0LmRlZmluZVByb3BlcnR5KEZpbmRlclBhdHRlcm5GaW5kZXIkMSwgIl9fZXNNb2R1bGUiLCB7IHZhbHVlOiB0cnVlIH0pOwoJLypuYW1lc3BhY2UgY29tLmdvb2dsZS56eGluZy5xcmNvZGUuZGV0ZWN0b3IgeyovCgl2YXIgRGVjb2RlSGludFR5cGVfMSQyID0gRGVjb2RlSGludFR5cGUkMTsKCXZhciBSZXN1bHRQb2ludF8xJDEgPSBSZXN1bHRQb2ludCQxOwoJdmFyIEZpbmRlclBhdHRlcm5fMSA9IEZpbmRlclBhdHRlcm4kMTsKCXZhciBGaW5kZXJQYXR0ZXJuSW5mb18xID0gRmluZGVyUGF0dGVybkluZm8kMTsKCXZhciBOb3RGb3VuZEV4Y2VwdGlvbl8xJDIgPSBOb3RGb3VuZEV4Y2VwdGlvbiQxOwoJLyppbXBvcnQgamF2YS5pby5TZXJpYWxpemFibGU7Ki8KCS8qaW1wb3J0IGphdmEudXRpbC5BcnJheUxpc3Q7Ki8KCS8qaW1wb3J0IGphdmEudXRpbC5Db2xsZWN0aW9uczsqLwoJLyppbXBvcnQgamF2YS51dGlsLkNvbXBhcmF0b3I7Ki8KCS8qaW1wb3J0IGphdmEudXRpbC5MaXN0OyovCgkvKmltcG9ydCBqYXZhLnV0aWwuTWFwOyovCgkvKioKCSAqIDxwPlRoaXMgY2xhc3MgYXR0ZW1wdHMgdG8gZmluZCBmaW5kZXIgcGF0dGVybnMgaW4gYSBRUiBDb2RlLiBGaW5kZXIgcGF0dGVybnMgYXJlIHRoZSBzcXVhcmUKCSAqIG1hcmtlcnMgYXQgdGhyZWUgY29ybmVycyBvZiBhIFFSIENvZGUuPC9wPgoJICoKCSAqIDxwPlRoaXMgY2xhc3MgaXMgdGhyZWFkLXNhZmUgYnV0IG5vdCByZWVudHJhbnQuIEVhY2ggdGhyZWFkIG11c3QgYWxsb2NhdGUgaXRzIG93biBvYmplY3QuCgkgKgoJICogQGF1dGhvciBTZWFuIE93ZW4KCSAqLwoJdmFyIEZpbmRlclBhdHRlcm5GaW5kZXIgPSAvKiogQGNsYXNzICovIChmdW5jdGlvbiAoKSB7CgkgICAgLyoqCgkgICAgICogPHA+Q3JlYXRlcyBhIGZpbmRlciB0aGF0IHdpbGwgc2VhcmNoIHRoZSBpbWFnZSBmb3IgdGhyZWUgZmluZGVyIHBhdHRlcm5zLjwvcD4KCSAgICAgKgoJICAgICAqIEBwYXJhbSBpbWFnZSBpbWFnZSB0byBzZWFyY2gKCSAgICAgKi8KCSAgICAvLyBwdWJsaWMgY29uc3RydWN0b3IoaW1hZ2U6IEJpdE1hdHJpeCkgewoJICAgIC8vICAgdGhpcyhpbWFnZSwgbnVsbCkKCSAgICAvLyB9CgkgICAgZnVuY3Rpb24gRmluZGVyUGF0dGVybkZpbmRlcihpbWFnZSwgcmVzdWx0UG9pbnRDYWxsYmFjaykgewoJICAgICAgICB0aGlzLmltYWdlID0gaW1hZ2U7CgkgICAgICAgIHRoaXMucmVzdWx0UG9pbnRDYWxsYmFjayA9IHJlc3VsdFBvaW50Q2FsbGJhY2s7CgkgICAgICAgIHRoaXMucG9zc2libGVDZW50ZXJzID0gW107CgkgICAgICAgIHRoaXMuY3Jvc3NDaGVja1N0YXRlQ291bnQgPSBuZXcgSW50MzJBcnJheSg1KTsKCSAgICAgICAgdGhpcy5yZXN1bHRQb2ludENhbGxiYWNrID0gcmVzdWx0UG9pbnRDYWxsYmFjazsKCSAgICB9CgkgICAgRmluZGVyUGF0dGVybkZpbmRlci5wcm90b3R5cGUuZ2V0SW1hZ2UgPSBmdW5jdGlvbiAoKSB7CgkgICAgICAgIHJldHVybiB0aGlzLmltYWdlOwoJICAgIH07CgkgICAgRmluZGVyUGF0dGVybkZpbmRlci5wcm90b3R5cGUuZ2V0UG9zc2libGVDZW50ZXJzID0gZnVuY3Rpb24gKCkgewoJICAgICAgICByZXR1cm4gdGhpcy5wb3NzaWJsZUNlbnRlcnM7CgkgICAgfTsKCSAgICBGaW5kZXJQYXR0ZXJuRmluZGVyLnByb3RvdHlwZS5maW5kID0gZnVuY3Rpb24gKGhpbnRzKSB7CgkgICAgICAgIHZhciB0cnlIYXJkZXIgPSAoaGludHMgIT09IG51bGwgJiYgaGludHMgIT09IHVuZGVmaW5lZCkgJiYgdW5kZWZpbmVkICE9PSBoaW50cy5nZXQoRGVjb2RlSGludFR5cGVfMSQyLmRlZmF1bHQuVFJZX0hBUkRFUik7CgkgICAgICAgIHZhciBwdXJlQmFyY29kZSA9IChoaW50cyAhPT0gbnVsbCAmJiBoaW50cyAhPT0gdW5kZWZpbmVkKSAmJiB1bmRlZmluZWQgIT09IGhpbnRzLmdldChEZWNvZGVIaW50VHlwZV8xJDIuZGVmYXVsdC5QVVJFX0JBUkNPREUpOwoJICAgICAgICB2YXIgaW1hZ2UgPSB0aGlzLmltYWdlOwoJICAgICAgICB2YXIgbWF4SSA9IGltYWdlLmdldEhlaWdodCgpOwoJICAgICAgICB2YXIgbWF4SiA9IGltYWdlLmdldFdpZHRoKCk7CgkgICAgICAgIC8vIFdlIGFyZSBsb29raW5nIGZvciBibGFjay93aGl0ZS9ibGFjay93aGl0ZS9ibGFjayBtb2R1bGVzIGluCgkgICAgICAgIC8vIDE6MTozOjE6MSByYXRpbzsgdGhpcyB0cmFja3MgdGhlIG51bWJlciBvZiBzdWNoIG1vZHVsZXMgc2VlbiBzbyBmYXIKCSAgICAgICAgLy8gTGV0J3MgYXNzdW1lIHRoYXQgdGhlIG1heGltdW0gdmVyc2lvbiBRUiBDb2RlIHdlIHN1cHBvcnQgdGFrZXMgdXAgMS80IHRoZSBoZWlnaHQgb2YgdGhlCgkgICAgICAgIC8vIGltYWdlLCBhbmQgdGhlbiBhY2NvdW50IGZvciB0aGUgY2VudGVyIGJlaW5nIDMgbW9kdWxlcyBpbiBzaXplLiBUaGlzIGdpdmVzIHRoZSBzbWFsbGVzdAoJICAgICAgICAvLyBudW1iZXIgb2YgcGl4ZWxzIHRoZSBjZW50ZXIgY291bGQgYmUsIHNvIHNraXAgdGhpcyBvZnRlbi4gV2hlbiB0cnlpbmcgaGFyZGVyLCBsb29rIGZvciBhbGwKCSAgICAgICAgLy8gUVIgdmVyc2lvbnMgcmVnYXJkbGVzcyBvZiBob3cgZGVuc2UgdGhleSBhcmUuCgkgICAgICAgIHZhciBpU2tpcCA9IE1hdGguZmxvb3IoKDMgKiBtYXhJKSAvICg0ICogRmluZGVyUGF0dGVybkZpbmRlci5NQVhfTU9EVUxFUykpOwoJICAgICAgICBpZiAoaVNraXAgPCBGaW5kZXJQYXR0ZXJuRmluZGVyLk1JTl9TS0lQIHx8IHRyeUhhcmRlcikgewoJICAgICAgICAgICAgaVNraXAgPSBGaW5kZXJQYXR0ZXJuRmluZGVyLk1JTl9TS0lQOwoJICAgICAgICB9CgkgICAgICAgIHZhciBkb25lID0gZmFsc2U7CgkgICAgICAgIHZhciBzdGF0ZUNvdW50ID0gbmV3IEludDMyQXJyYXkoNSk7CgkgICAgICAgIGZvciAodmFyIGkgPSBpU2tpcCAtIDE7IGkgPCBtYXhJICYmICFkb25lOyBpICs9IGlTa2lwKSB7CgkgICAgICAgICAgICAvLyBHZXQgYSByb3cgb2YgYmxhY2svd2hpdGUgdmFsdWVzCgkgICAgICAgICAgICBzdGF0ZUNvdW50WzBdID0gMDsKCSAgICAgICAgICAgIHN0YXRlQ291bnRbMV0gPSAwOwoJICAgICAgICAgICAgc3RhdGVDb3VudFsyXSA9IDA7CgkgICAgICAgICAgICBzdGF0ZUNvdW50WzNdID0gMDsKCSAgICAgICAgICAgIHN0YXRlQ291bnRbNF0gPSAwOwoJICAgICAgICAgICAgdmFyIGN1cnJlbnRTdGF0ZSA9IDA7CgkgICAgICAgICAgICBmb3IgKHZhciBqID0gMDsgaiA8IG1heEo7IGorKykgewoJICAgICAgICAgICAgICAgIGlmIChpbWFnZS5nZXQoaiwgaSkpIHsKCSAgICAgICAgICAgICAgICAgICAgLy8gQmxhY2sgcGl4ZWwKCSAgICAgICAgICAgICAgICAgICAgaWYgKChjdXJyZW50U3RhdGUgJiAxKSA9PT0gMSkgeyAvLyBDb3VudGluZyB3aGl0ZSBwaXhlbHMKCSAgICAgICAgICAgICAgICAgICAgICAgIGN1cnJlbnRTdGF0ZSsrOwoJICAgICAgICAgICAgICAgICAgICB9CgkgICAgICAgICAgICAgICAgICAgIHN0YXRlQ291bnRbY3VycmVudFN0YXRlXSsrOwoJICAgICAgICAgICAgICAgIH0KCSAgICAgICAgICAgICAgICBlbHNlIHsgLy8gV2hpdGUgcGl4ZWwKCSAgICAgICAgICAgICAgICAgICAgaWYgKChjdXJyZW50U3RhdGUgJiAxKSA9PT0gMCkgeyAvLyBDb3VudGluZyBibGFjayBwaXhlbHMKCSAgICAgICAgICAgICAgICAgICAgICAgIGlmIChjdXJyZW50U3RhdGUgPT09IDQpIHsgLy8gQSB3aW5uZXI/CgkgICAgICAgICAgICAgICAgICAgICAgICAgICAgaWYgKEZpbmRlclBhdHRlcm5GaW5kZXIuZm91bmRQYXR0ZXJuQ3Jvc3Moc3RhdGVDb3VudCkpIHsgLy8gWWVzCgkgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHZhciBjb25maXJtZWQgPSB0aGlzLmhhbmRsZVBvc3NpYmxlQ2VudGVyKHN0YXRlQ291bnQsIGksIGosIHB1cmVCYXJjb2RlKTsKCSAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgaWYgKGNvbmZpcm1lZCA9PT0gdHJ1ZSkgewoJICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgLy8gU3RhcnQgZXhhbWluaW5nIGV2ZXJ5IG90aGVyIGxpbmUuIENoZWNraW5nIGVhY2ggbGluZSB0dXJuZWQgb3V0IHRvIGJlIHRvbwoJICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgLy8gZXhwZW5zaXZlIGFuZCBkaWRuJ3QgaW1wcm92ZSBwZXJmb3JtYW5jZS4KCSAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGlTa2lwID0gMjsKCSAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGlmICh0aGlzLmhhc1NraXBwZWQgPT09IHRydWUpIHsKCSAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBkb25lID0gdGhpcy5oYXZlTXVsdGlwbHlDb25maXJtZWRDZW50ZXJzKCk7CgkgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB9CgkgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBlbHNlIHsKCSAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB2YXIgcm93U2tpcCA9IHRoaXMuZmluZFJvd1NraXAoKTsKCSAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBpZiAocm93U2tpcCA+IHN0YXRlQ291bnRbMl0pIHsKCSAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgLy8gU2tpcCByb3dzIGJldHdlZW4gcm93IG9mIGxvd2VyIGNvbmZpcm1lZCBjZW50ZXIKCSAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgLy8gYW5kIHRvcCBvZiBwcmVzdW1lZCB0aGlyZCBjb25maXJtZWQgY2VudGVyCgkgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIC8vIGJ1dCBiYWNrIHVwIGEgYml0IHRvIGdldCBhIGZ1bGwgY2hhbmNlIG9mIGRldGVjdGluZwoJICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAvLyBpdCwgZW50aXJlIHdpZHRoIG9mIGNlbnRlciBvZiBmaW5kZXIgcGF0dGVybgoJICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAvLyBTa2lwIGJ5IHJvd1NraXAsIGJ1dCBiYWNrIG9mZiBieSBzdGF0ZUNvdW50WzJdIChzaXplIG9mIGxhc3QgY2VudGVyCgkgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIC8vIG9mIHBhdHRlcm4gd2Ugc2F3KSB0byBiZSBjb25zZXJ2YXRpdmUsIGFuZCBhbHNvIGJhY2sgb2ZmIGJ5IGlTa2lwIHdoaWNoCgkgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIC8vIGlzIGFib3V0IHRvIGJlIHJlLWFkZGVkCgkgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGkgKz0gcm93U2tpcCAtIHN0YXRlQ291bnRbMl0gLSBpU2tpcDsKCSAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgaiA9IG1heEogLSAxOwoJICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIH0KCSAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIH0KCSAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgfQoJICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBlbHNlIHsKCSAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHN0YXRlQ291bnRbMF0gPSBzdGF0ZUNvdW50WzJdOwoJICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgc3RhdGVDb3VudFsxXSA9IHN0YXRlQ291bnRbM107CgkgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBzdGF0ZUNvdW50WzJdID0gc3RhdGVDb3VudFs0XTsKCSAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHN0YXRlQ291bnRbM10gPSAxOwoJICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgc3RhdGVDb3VudFs0XSA9IDA7CgkgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBjdXJyZW50U3RhdGUgPSAzOwoJICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgY29udGludWU7CgkgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIH0KCSAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgLy8gQ2xlYXIgc3RhdGUgdG8gc3RhcnQgbG9va2luZyBhZ2FpbgoJICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBjdXJyZW50U3RhdGUgPSAwOwoJICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBzdGF0ZUNvdW50WzBdID0gMDsKCSAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgc3RhdGVDb3VudFsxXSA9IDA7CgkgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHN0YXRlQ291bnRbMl0gPSAwOwoJICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBzdGF0ZUNvdW50WzNdID0gMDsKCSAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgc3RhdGVDb3VudFs0XSA9IDA7CgkgICAgICAgICAgICAgICAgICAgICAgICAgICAgfQoJICAgICAgICAgICAgICAgICAgICAgICAgICAgIGVsc2UgeyAvLyBObywgc2hpZnQgY291bnRzIGJhY2sgYnkgdHdvCgkgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHN0YXRlQ291bnRbMF0gPSBzdGF0ZUNvdW50WzJdOwoJICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBzdGF0ZUNvdW50WzFdID0gc3RhdGVDb3VudFszXTsKCSAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgc3RhdGVDb3VudFsyXSA9IHN0YXRlQ291bnRbNF07CgkgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHN0YXRlQ291bnRbM10gPSAxOwoJICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBzdGF0ZUNvdW50WzRdID0gMDsKCSAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgY3VycmVudFN0YXRlID0gMzsKCSAgICAgICAgICAgICAgICAgICAgICAgICAgICB9CgkgICAgICAgICAgICAgICAgICAgICAgICB9CgkgICAgICAgICAgICAgICAgICAgICAgICBlbHNlIHsKCSAgICAgICAgICAgICAgICAgICAgICAgICAgICBzdGF0ZUNvdW50WysrY3VycmVudFN0YXRlXSsrOwoJICAgICAgICAgICAgICAgICAgICAgICAgfQoJICAgICAgICAgICAgICAgICAgICB9CgkgICAgICAgICAgICAgICAgICAgIGVsc2UgeyAvLyBDb3VudGluZyB3aGl0ZSBwaXhlbHMKCSAgICAgICAgICAgICAgICAgICAgICAgIHN0YXRlQ291bnRbY3VycmVudFN0YXRlXSsrOwoJICAgICAgICAgICAgICAgICAgICB9CgkgICAgICAgICAgICAgICAgfQoJICAgICAgICAgICAgfQoJICAgICAgICAgICAgaWYgKEZpbmRlclBhdHRlcm5GaW5kZXIuZm91bmRQYXR0ZXJuQ3Jvc3Moc3RhdGVDb3VudCkpIHsKCSAgICAgICAgICAgICAgICB2YXIgY29uZmlybWVkID0gdGhpcy5oYW5kbGVQb3NzaWJsZUNlbnRlcihzdGF0ZUNvdW50LCBpLCBtYXhKLCBwdXJlQmFyY29kZSk7CgkgICAgICAgICAgICAgICAgaWYgKGNvbmZpcm1lZCA9PT0gdHJ1ZSkgewoJICAgICAgICAgICAgICAgICAgICBpU2tpcCA9IHN0YXRlQ291bnRbMF07CgkgICAgICAgICAgICAgICAgICAgIGlmICh0aGlzLmhhc1NraXBwZWQpIHsKCSAgICAgICAgICAgICAgICAgICAgICAgIC8vIEZvdW5kIGEgdGhpcmQgb25lCgkgICAgICAgICAgICAgICAgICAgICAgICBkb25lID0gdGhpcy5oYXZlTXVsdGlwbHlDb25maXJtZWRDZW50ZXJzKCk7CgkgICAgICAgICAgICAgICAgICAgIH0KCSAgICAgICAgICAgICAgICB9CgkgICAgICAgICAgICB9CgkgICAgICAgIH0KCSAgICAgICAgdmFyIHBhdHRlcm5JbmZvID0gdGhpcy5zZWxlY3RCZXN0UGF0dGVybnMoKTsKCSAgICAgICAgUmVzdWx0UG9pbnRfMSQxLmRlZmF1bHQub3JkZXJCZXN0UGF0dGVybnMocGF0dGVybkluZm8pOwoJICAgICAgICByZXR1cm4gbmV3IEZpbmRlclBhdHRlcm5JbmZvXzEuZGVmYXVsdChwYXR0ZXJuSW5mbyk7CgkgICAgfTsKCSAgICAvKioKCSAgICAgKiBHaXZlbiBhIGNvdW50IG9mIGJsYWNrL3doaXRlL2JsYWNrL3doaXRlL2JsYWNrIHBpeGVscyBqdXN0IHNlZW4gYW5kIGFuIGVuZCBwb3NpdGlvbiwKCSAgICAgKiBmaWd1cmVzIHRoZSBsb2NhdGlvbiBvZiB0aGUgY2VudGVyIG9mIHRoaXMgcnVuLgoJICAgICAqLwoJICAgIEZpbmRlclBhdHRlcm5GaW5kZXIuY2VudGVyRnJvbUVuZCA9IGZ1bmN0aW9uIChzdGF0ZUNvdW50LCBlbmQgLyppbnQqLykgewoJICAgICAgICByZXR1cm4gKGVuZCAtIHN0YXRlQ291bnRbNF0gLSBzdGF0ZUNvdW50WzNdKSAtIHN0YXRlQ291bnRbMl0gLyAyLjA7CgkgICAgfTsKCSAgICAvKioKCSAgICAgKiBAcGFyYW0gc3RhdGVDb3VudCBjb3VudCBvZiBibGFjay93aGl0ZS9ibGFjay93aGl0ZS9ibGFjayBwaXhlbHMganVzdCByZWFkCgkgICAgICogQHJldHVybiB0cnVlIGlmZiB0aGUgcHJvcG9ydGlvbnMgb2YgdGhlIGNvdW50cyBpcyBjbG9zZSBlbm91Z2ggdG8gdGhlIDEvMS8zLzEvMSByYXRpb3MKCSAgICAgKiAgICAgICAgIHVzZWQgYnkgZmluZGVyIHBhdHRlcm5zIHRvIGJlIGNvbnNpZGVyZWQgYSBtYXRjaAoJICAgICAqLwoJICAgIEZpbmRlclBhdHRlcm5GaW5kZXIuZm91bmRQYXR0ZXJuQ3Jvc3MgPSBmdW5jdGlvbiAoc3RhdGVDb3VudCkgewoJICAgICAgICB2YXIgdG90YWxNb2R1bGVTaXplID0gMDsKCSAgICAgICAgZm9yICh2YXIgaSA9IDA7IGkgPCA1OyBpKyspIHsKCSAgICAgICAgICAgIHZhciBjb3VudCA9IHN0YXRlQ291bnRbaV07CgkgICAgICAgICAgICBpZiAoY291bnQgPT09IDApIHsKCSAgICAgICAgICAgICAgICByZXR1cm4gZmFsc2U7CgkgICAgICAgICAgICB9CgkgICAgICAgICAgICB0b3RhbE1vZHVsZVNpemUgKz0gY291bnQ7CgkgICAgICAgIH0KCSAgICAgICAgaWYgKHRvdGFsTW9kdWxlU2l6ZSA8IDcpIHsKCSAgICAgICAgICAgIHJldHVybiBmYWxzZTsKCSAgICAgICAgfQoJICAgICAgICB2YXIgbW9kdWxlU2l6ZSA9IHRvdGFsTW9kdWxlU2l6ZSAvIDcuMDsKCSAgICAgICAgdmFyIG1heFZhcmlhbmNlID0gbW9kdWxlU2l6ZSAvIDIuMDsKCSAgICAgICAgLy8gQWxsb3cgbGVzcyB0aGFuIDUwJSB2YXJpYW5jZSBmcm9tIDEtMS0zLTEtMSBwcm9wb3J0aW9ucwoJICAgICAgICByZXR1cm4gTWF0aC5hYnMobW9kdWxlU2l6ZSAtIHN0YXRlQ291bnRbMF0pIDwgbWF4VmFyaWFuY2UgJiYKCSAgICAgICAgICAgIE1hdGguYWJzKG1vZHVsZVNpemUgLSBzdGF0ZUNvdW50WzFdKSA8IG1heFZhcmlhbmNlICYmCgkgICAgICAgICAgICBNYXRoLmFicygzLjAgKiBtb2R1bGVTaXplIC0gc3RhdGVDb3VudFsyXSkgPCAzICogbWF4VmFyaWFuY2UgJiYKCSAgICAgICAgICAgIE1hdGguYWJzKG1vZHVsZVNpemUgLSBzdGF0ZUNvdW50WzNdKSA8IG1heFZhcmlhbmNlICYmCgkgICAgICAgICAgICBNYXRoLmFicyhtb2R1bGVTaXplIC0gc3RhdGVDb3VudFs0XSkgPCBtYXhWYXJpYW5jZTsKCSAgICB9OwoJICAgIEZpbmRlclBhdHRlcm5GaW5kZXIucHJvdG90eXBlLmdldENyb3NzQ2hlY2tTdGF0ZUNvdW50ID0gZnVuY3Rpb24gKCkgewoJICAgICAgICB2YXIgY3Jvc3NDaGVja1N0YXRlQ291bnQgPSB0aGlzLmNyb3NzQ2hlY2tTdGF0ZUNvdW50OwoJICAgICAgICBjcm9zc0NoZWNrU3RhdGVDb3VudFswXSA9IDA7CgkgICAgICAgIGNyb3NzQ2hlY2tTdGF0ZUNvdW50WzFdID0gMDsKCSAgICAgICAgY3Jvc3NDaGVja1N0YXRlQ291bnRbMl0gPSAwOwoJICAgICAgICBjcm9zc0NoZWNrU3RhdGVDb3VudFszXSA9IDA7CgkgICAgICAgIGNyb3NzQ2hlY2tTdGF0ZUNvdW50WzRdID0gMDsKCSAgICAgICAgcmV0dXJuIGNyb3NzQ2hlY2tTdGF0ZUNvdW50OwoJICAgIH07CgkgICAgLyoqCgkgICAgICogQWZ0ZXIgYSB2ZXJ0aWNhbCBhbmQgaG9yaXpvbnRhbCBzY2FuIGZpbmRzIGEgcG90ZW50aWFsIGZpbmRlciBwYXR0ZXJuLCB0aGlzIG1ldGhvZAoJICAgICAqICJjcm9zcy1jcm9zcy1jcm9zcy1jaGVja3MiIGJ5IHNjYW5uaW5nIGRvd24gZGlhZ29uYWxseSB0aHJvdWdoIHRoZSBjZW50ZXIgb2YgdGhlIHBvc3NpYmxlCgkgICAgICogZmluZGVyIHBhdHRlcm4gdG8gc2VlIGlmIHRoZSBzYW1lIHByb3BvcnRpb24gaXMgZGV0ZWN0ZWQuCgkgICAgICoKCSAgICAgKiBAcGFyYW0gc3RhcnRJIHJvdyB3aGVyZSBhIGZpbmRlciBwYXR0ZXJuIHdhcyBkZXRlY3RlZAoJICAgICAqIEBwYXJhbSBjZW50ZXJKIGNlbnRlciBvZiB0aGUgc2VjdGlvbiB0aGF0IGFwcGVhcnMgdG8gY3Jvc3MgYSBmaW5kZXIgcGF0dGVybgoJICAgICAqIEBwYXJhbSBtYXhDb3VudCBtYXhpbXVtIHJlYXNvbmFibGUgbnVtYmVyIG9mIG1vZHVsZXMgdGhhdCBzaG91bGQgYmUKCSAgICAgKiAgb2JzZXJ2ZWQgaW4gYW55IHJlYWRpbmcgc3RhdGUsIGJhc2VkIG9uIHRoZSByZXN1bHRzIG9mIHRoZSBob3Jpem9udGFsIHNjYW4KCSAgICAgKiBAcGFyYW0gb3JpZ2luYWxTdGF0ZUNvdW50VG90YWwgVGhlIG9yaWdpbmFsIHN0YXRlIGNvdW50IHRvdGFsLgoJICAgICAqIEByZXR1cm4gdHJ1ZSBpZiBwcm9wb3J0aW9ucyBhcmUgd2l0aGluZyBleHBlY3RlZCBsaW1pdHMKCSAgICAgKi8KCSAgICBGaW5kZXJQYXR0ZXJuRmluZGVyLnByb3RvdHlwZS5jcm9zc0NoZWNrRGlhZ29uYWwgPSBmdW5jdGlvbiAoc3RhcnRJIC8qaW50Ki8sIGNlbnRlckogLyppbnQqLywgbWF4Q291bnQgLyppbnQqLywgb3JpZ2luYWxTdGF0ZUNvdW50VG90YWwgLyppbnQqLykgewoJICAgICAgICB2YXIgc3RhdGVDb3VudCA9IHRoaXMuZ2V0Q3Jvc3NDaGVja1N0YXRlQ291bnQoKTsKCSAgICAgICAgLy8gU3RhcnQgY291bnRpbmcgdXAsIGxlZnQgZnJvbSBjZW50ZXIgZmluZGluZyBibGFjayBjZW50ZXIgbWFzcwoJICAgICAgICB2YXIgaSA9IDA7CgkgICAgICAgIHZhciBpbWFnZSA9IHRoaXMuaW1hZ2U7CgkgICAgICAgIHdoaWxlIChzdGFydEkgPj0gaSAmJiBjZW50ZXJKID49IGkgJiYgaW1hZ2UuZ2V0KGNlbnRlckogLSBpLCBzdGFydEkgLSBpKSkgewoJICAgICAgICAgICAgc3RhdGVDb3VudFsyXSsrOwoJICAgICAgICAgICAgaSsrOwoJICAgICAgICB9CgkgICAgICAgIGlmIChzdGFydEkgPCBpIHx8IGNlbnRlckogPCBpKSB7CgkgICAgICAgICAgICByZXR1cm4gZmFsc2U7CgkgICAgICAgIH0KCSAgICAgICAgLy8gQ29udGludWUgdXAsIGxlZnQgZmluZGluZyB3aGl0ZSBzcGFjZQoJICAgICAgICB3aGlsZSAoc3RhcnRJID49IGkgJiYgY2VudGVySiA+PSBpICYmICFpbWFnZS5nZXQoY2VudGVySiAtIGksIHN0YXJ0SSAtIGkpICYmCgkgICAgICAgICAgICBzdGF0ZUNvdW50WzFdIDw9IG1heENvdW50KSB7CgkgICAgICAgICAgICBzdGF0ZUNvdW50WzFdKys7CgkgICAgICAgICAgICBpKys7CgkgICAgICAgIH0KCSAgICAgICAgLy8gSWYgYWxyZWFkeSB0b28gbWFueSBtb2R1bGVzIGluIHRoaXMgc3RhdGUgb3IgcmFuIG9mZiB0aGUgZWRnZToKCSAgICAgICAgaWYgKHN0YXJ0SSA8IGkgfHwgY2VudGVySiA8IGkgfHwgc3RhdGVDb3VudFsxXSA+IG1heENvdW50KSB7CgkgICAgICAgICAgICByZXR1cm4gZmFsc2U7CgkgICAgICAgIH0KCSAgICAgICAgLy8gQ29udGludWUgdXAsIGxlZnQgZmluZGluZyBibGFjayBib3JkZXIKCSAgICAgICAgd2hpbGUgKHN0YXJ0SSA+PSBpICYmIGNlbnRlckogPj0gaSAmJiBpbWFnZS5nZXQoY2VudGVySiAtIGksIHN0YXJ0SSAtIGkpICYmCgkgICAgICAgICAgICBzdGF0ZUNvdW50WzBdIDw9IG1heENvdW50KSB7CgkgICAgICAgICAgICBzdGF0ZUNvdW50WzBdKys7CgkgICAgICAgICAgICBpKys7CgkgICAgICAgIH0KCSAgICAgICAgaWYgKHN0YXRlQ291bnRbMF0gPiBtYXhDb3VudCkgewoJICAgICAgICAgICAgcmV0dXJuIGZhbHNlOwoJICAgICAgICB9CgkgICAgICAgIHZhciBtYXhJID0gaW1hZ2UuZ2V0SGVpZ2h0KCk7CgkgICAgICAgIHZhciBtYXhKID0gaW1hZ2UuZ2V0V2lkdGgoKTsKCSAgICAgICAgLy8gTm93IGFsc28gY291bnQgZG93biwgcmlnaHQgZnJvbSBjZW50ZXIKCSAgICAgICAgaSA9IDE7CgkgICAgICAgIHdoaWxlIChzdGFydEkgKyBpIDwgbWF4SSAmJiBjZW50ZXJKICsgaSA8IG1heEogJiYgaW1hZ2UuZ2V0KGNlbnRlckogKyBpLCBzdGFydEkgKyBpKSkgewoJICAgICAgICAgICAgc3RhdGVDb3VudFsyXSsrOwoJICAgICAgICAgICAgaSsrOwoJICAgICAgICB9CgkgICAgICAgIC8vIFJhbiBvZmYgdGhlIGVkZ2U/CgkgICAgICAgIGlmIChzdGFydEkgKyBpID49IG1heEkgfHwgY2VudGVySiArIGkgPj0gbWF4SikgewoJICAgICAgICAgICAgcmV0dXJuIGZhbHNlOwoJICAgICAgICB9CgkgICAgICAgIHdoaWxlIChzdGFydEkgKyBpIDwgbWF4SSAmJiBjZW50ZXJKICsgaSA8IG1heEogJiYgIWltYWdlLmdldChjZW50ZXJKICsgaSwgc3RhcnRJICsgaSkgJiYKCSAgICAgICAgICAgIHN0YXRlQ291bnRbM10gPCBtYXhDb3VudCkgewoJICAgICAgICAgICAgc3RhdGVDb3VudFszXSsrOwoJICAgICAgICAgICAgaSsrOwoJICAgICAgICB9CgkgICAgICAgIGlmIChzdGFydEkgKyBpID49IG1heEkgfHwgY2VudGVySiArIGkgPj0gbWF4SiB8fCBzdGF0ZUNvdW50WzNdID49IG1heENvdW50KSB7CgkgICAgICAgICAgICByZXR1cm4gZmFsc2U7CgkgICAgICAgIH0KCSAgICAgICAgd2hpbGUgKHN0YXJ0SSArIGkgPCBtYXhJICYmIGNlbnRlckogKyBpIDwgbWF4SiAmJiBpbWFnZS5nZXQoY2VudGVySiArIGksIHN0YXJ0SSArIGkpICYmCgkgICAgICAgICAgICBzdGF0ZUNvdW50WzRdIDwgbWF4Q291bnQpIHsKCSAgICAgICAgICAgIHN0YXRlQ291bnRbNF0rKzsKCSAgICAgICAgICAgIGkrKzsKCSAgICAgICAgfQoJICAgICAgICBpZiAoc3RhdGVDb3VudFs0XSA+PSBtYXhDb3VudCkgewoJICAgICAgICAgICAgcmV0dXJuIGZhbHNlOwoJICAgICAgICB9CgkgICAgICAgIC8vIElmIHdlIGZvdW5kIGEgZmluZGVyLXBhdHRlcm4tbGlrZSBzZWN0aW9uLCBidXQgaXRzIHNpemUgaXMgbW9yZSB0aGFuIDEwMCUgZGlmZmVyZW50IHRoYW4KCSAgICAgICAgLy8gdGhlIG9yaWdpbmFsLCBhc3N1bWUgaXQncyBhIGZhbHNlIHBvc2l0aXZlCgkgICAgICAgIHZhciBzdGF0ZUNvdW50VG90YWwgPSBzdGF0ZUNvdW50WzBdICsgc3RhdGVDb3VudFsxXSArIHN0YXRlQ291bnRbMl0gKyBzdGF0ZUNvdW50WzNdICsgc3RhdGVDb3VudFs0XTsKCSAgICAgICAgcmV0dXJuIE1hdGguYWJzKHN0YXRlQ291bnRUb3RhbCAtIG9yaWdpbmFsU3RhdGVDb3VudFRvdGFsKSA8IDIgKiBvcmlnaW5hbFN0YXRlQ291bnRUb3RhbCAmJgoJICAgICAgICAgICAgRmluZGVyUGF0dGVybkZpbmRlci5mb3VuZFBhdHRlcm5Dcm9zcyhzdGF0ZUNvdW50KTsKCSAgICB9OwoJICAgIC8qKgoJICAgICAqIDxwPkFmdGVyIGEgaG9yaXpvbnRhbCBzY2FuIGZpbmRzIGEgcG90ZW50aWFsIGZpbmRlciBwYXR0ZXJuLCB0aGlzIG1ldGhvZAoJICAgICAqICJjcm9zcy1jaGVja3MiIGJ5IHNjYW5uaW5nIGRvd24gdmVydGljYWxseSB0aHJvdWdoIHRoZSBjZW50ZXIgb2YgdGhlIHBvc3NpYmxlCgkgICAgICogZmluZGVyIHBhdHRlcm4gdG8gc2VlIGlmIHRoZSBzYW1lIHByb3BvcnRpb24gaXMgZGV0ZWN0ZWQuPC9wPgoJICAgICAqCgkgICAgICogQHBhcmFtIHN0YXJ0SSByb3cgd2hlcmUgYSBmaW5kZXIgcGF0dGVybiB3YXMgZGV0ZWN0ZWQKCSAgICAgKiBAcGFyYW0gY2VudGVySiBjZW50ZXIgb2YgdGhlIHNlY3Rpb24gdGhhdCBhcHBlYXJzIHRvIGNyb3NzIGEgZmluZGVyIHBhdHRlcm4KCSAgICAgKiBAcGFyYW0gbWF4Q291bnQgbWF4aW11bSByZWFzb25hYmxlIG51bWJlciBvZiBtb2R1bGVzIHRoYXQgc2hvdWxkIGJlCgkgICAgICogb2JzZXJ2ZWQgaW4gYW55IHJlYWRpbmcgc3RhdGUsIGJhc2VkIG9uIHRoZSByZXN1bHRzIG9mIHRoZSBob3Jpem9udGFsIHNjYW4KCSAgICAgKiBAcmV0dXJuIHZlcnRpY2FsIGNlbnRlciBvZiBmaW5kZXIgcGF0dGVybiwgb3Ige0BsaW5rIEZsb2F0I05hTn0gaWYgbm90IGZvdW5kCgkgICAgICovCgkgICAgRmluZGVyUGF0dGVybkZpbmRlci5wcm90b3R5cGUuY3Jvc3NDaGVja1ZlcnRpY2FsID0gZnVuY3Rpb24gKHN0YXJ0SSAvKmludCovLCBjZW50ZXJKIC8qaW50Ki8sIG1heENvdW50IC8qaW50Ki8sIG9yaWdpbmFsU3RhdGVDb3VudFRvdGFsIC8qaW50Ki8pIHsKCSAgICAgICAgdmFyIGltYWdlID0gdGhpcy5pbWFnZTsKCSAgICAgICAgdmFyIG1heEkgPSBpbWFnZS5nZXRIZWlnaHQoKTsKCSAgICAgICAgdmFyIHN0YXRlQ291bnQgPSB0aGlzLmdldENyb3NzQ2hlY2tTdGF0ZUNvdW50KCk7CgkgICAgICAgIC8vIFN0YXJ0IGNvdW50aW5nIHVwIGZyb20gY2VudGVyCgkgICAgICAgIHZhciBpID0gc3RhcnRJOwoJICAgICAgICB3aGlsZSAoaSA+PSAwICYmIGltYWdlLmdldChjZW50ZXJKLCBpKSkgewoJICAgICAgICAgICAgc3RhdGVDb3VudFsyXSsrOwoJICAgICAgICAgICAgaS0tOwoJICAgICAgICB9CgkgICAgICAgIGlmIChpIDwgMCkgewoJICAgICAgICAgICAgcmV0dXJuIE5hTjsKCSAgICAgICAgfQoJICAgICAgICB3aGlsZSAoaSA+PSAwICYmICFpbWFnZS5nZXQoY2VudGVySiwgaSkgJiYgc3RhdGVDb3VudFsxXSA8PSBtYXhDb3VudCkgewoJICAgICAgICAgICAgc3RhdGVDb3VudFsxXSsrOwoJICAgICAgICAgICAgaS0tOwoJICAgICAgICB9CgkgICAgICAgIC8vIElmIGFscmVhZHkgdG9vIG1hbnkgbW9kdWxlcyBpbiB0aGlzIHN0YXRlIG9yIHJhbiBvZmYgdGhlIGVkZ2U6CgkgICAgICAgIGlmIChpIDwgMCB8fCBzdGF0ZUNvdW50WzFdID4gbWF4Q291bnQpIHsKCSAgICAgICAgICAgIHJldHVybiBOYU47CgkgICAgICAgIH0KCSAgICAgICAgd2hpbGUgKGkgPj0gMCAmJiBpbWFnZS5nZXQoY2VudGVySiwgaSkgJiYgc3RhdGVDb3VudFswXSA8PSBtYXhDb3VudCkgewoJICAgICAgICAgICAgc3RhdGVDb3VudFswXSsrOwoJICAgICAgICAgICAgaS0tOwoJICAgICAgICB9CgkgICAgICAgIGlmIChzdGF0ZUNvdW50WzBdID4gbWF4Q291bnQpIHsKCSAgICAgICAgICAgIHJldHVybiBOYU47CgkgICAgICAgIH0KCSAgICAgICAgLy8gTm93IGFsc28gY291bnQgZG93biBmcm9tIGNlbnRlcgoJICAgICAgICBpID0gc3RhcnRJICsgMTsKCSAgICAgICAgd2hpbGUgKGkgPCBtYXhJICYmIGltYWdlLmdldChjZW50ZXJKLCBpKSkgewoJICAgICAgICAgICAgc3RhdGVDb3VudFsyXSsrOwoJICAgICAgICAgICAgaSsrOwoJICAgICAgICB9CgkgICAgICAgIGlmIChpID09PSBtYXhJKSB7CgkgICAgICAgICAgICByZXR1cm4gTmFOOwoJICAgICAgICB9CgkgICAgICAgIHdoaWxlIChpIDwgbWF4SSAmJiAhaW1hZ2UuZ2V0KGNlbnRlckosIGkpICYmIHN0YXRlQ291bnRbM10gPCBtYXhDb3VudCkgewoJICAgICAgICAgICAgc3RhdGVDb3VudFszXSsrOwoJICAgICAgICAgICAgaSsrOwoJICAgICAgICB9CgkgICAgICAgIGlmIChpID09PSBtYXhJIHx8IHN0YXRlQ291bnRbM10gPj0gbWF4Q291bnQpIHsKCSAgICAgICAgICAgIHJldHVybiBOYU47CgkgICAgICAgIH0KCSAgICAgICAgd2hpbGUgKGkgPCBtYXhJICYmIGltYWdlLmdldChjZW50ZXJKLCBpKSAmJiBzdGF0ZUNvdW50WzRdIDwgbWF4Q291bnQpIHsKCSAgICAgICAgICAgIHN0YXRlQ291bnRbNF0rKzsKCSAgICAgICAgICAgIGkrKzsKCSAgICAgICAgfQoJICAgICAgICBpZiAoc3RhdGVDb3VudFs0XSA+PSBtYXhDb3VudCkgewoJICAgICAgICAgICAgcmV0dXJuIE5hTjsKCSAgICAgICAgfQoJICAgICAgICAvLyBJZiB3ZSBmb3VuZCBhIGZpbmRlci1wYXR0ZXJuLWxpa2Ugc2VjdGlvbiwgYnV0IGl0cyBzaXplIGlzIG1vcmUgdGhhbiA0MCUgZGlmZmVyZW50IHRoYW4KCSAgICAgICAgLy8gdGhlIG9yaWdpbmFsLCBhc3N1bWUgaXQncyBhIGZhbHNlIHBvc2l0aXZlCgkgICAgICAgIHZhciBzdGF0ZUNvdW50VG90YWwgPSBzdGF0ZUNvdW50WzBdICsgc3RhdGVDb3VudFsxXSArIHN0YXRlQ291bnRbMl0gKyBzdGF0ZUNvdW50WzNdICsKCSAgICAgICAgICAgIHN0YXRlQ291bnRbNF07CgkgICAgICAgIGlmICg1ICogTWF0aC5hYnMoc3RhdGVDb3VudFRvdGFsIC0gb3JpZ2luYWxTdGF0ZUNvdW50VG90YWwpID49IDIgKiBvcmlnaW5hbFN0YXRlQ291bnRUb3RhbCkgewoJICAgICAgICAgICAgcmV0dXJuIE5hTjsKCSAgICAgICAgfQoJICAgICAgICByZXR1cm4gRmluZGVyUGF0dGVybkZpbmRlci5mb3VuZFBhdHRlcm5Dcm9zcyhzdGF0ZUNvdW50KSA/IEZpbmRlclBhdHRlcm5GaW5kZXIuY2VudGVyRnJvbUVuZChzdGF0ZUNvdW50LCBpKSA6IE5hTjsKCSAgICB9OwoJICAgIC8qKgoJICAgICAqIDxwPkxpa2Uge0BsaW5rICNjcm9zc0NoZWNrVmVydGljYWwoaW50LCBpbnQsIGludCwgaW50KX0sIGFuZCBpbiBmYWN0IGlzIGJhc2ljYWxseSBpZGVudGljYWwsCgkgICAgICogZXhjZXB0IGl0IHJlYWRzIGhvcml6b250YWxseSBpbnN0ZWFkIG9mIHZlcnRpY2FsbHkuIFRoaXMgaXMgdXNlZCB0byBjcm9zcy1jcm9zcwoJICAgICAqIGNoZWNrIGEgdmVydGljYWwgY3Jvc3MgY2hlY2sgYW5kIGxvY2F0ZSB0aGUgcmVhbCBjZW50ZXIgb2YgdGhlIGFsaWdubWVudCBwYXR0ZXJuLjwvcD4KCSAgICAgKi8KCSAgICBGaW5kZXJQYXR0ZXJuRmluZGVyLnByb3RvdHlwZS5jcm9zc0NoZWNrSG9yaXpvbnRhbCA9IGZ1bmN0aW9uIChzdGFydEogLyppbnQqLywgY2VudGVySSAvKmludCovLCBtYXhDb3VudCAvKmludCovLCBvcmlnaW5hbFN0YXRlQ291bnRUb3RhbCAvKmludCovKSB7CgkgICAgICAgIHZhciBpbWFnZSA9IHRoaXMuaW1hZ2U7CgkgICAgICAgIHZhciBtYXhKID0gaW1hZ2UuZ2V0V2lkdGgoKTsKCSAgICAgICAgdmFyIHN0YXRlQ291bnQgPSB0aGlzLmdldENyb3NzQ2hlY2tTdGF0ZUNvdW50KCk7CgkgICAgICAgIHZhciBqID0gc3RhcnRKOwoJICAgICAgICB3aGlsZSAoaiA+PSAwICYmIGltYWdlLmdldChqLCBjZW50ZXJJKSkgewoJICAgICAgICAgICAgc3RhdGVDb3VudFsyXSsrOwoJICAgICAgICAgICAgai0tOwoJICAgICAgICB9CgkgICAgICAgIGlmIChqIDwgMCkgewoJICAgICAgICAgICAgcmV0dXJuIE5hTjsKCSAgICAgICAgfQoJICAgICAgICB3aGlsZSAoaiA+PSAwICYmICFpbWFnZS5nZXQoaiwgY2VudGVySSkgJiYgc3RhdGVDb3VudFsxXSA8PSBtYXhDb3VudCkgewoJICAgICAgICAgICAgc3RhdGVDb3VudFsxXSsrOwoJICAgICAgICAgICAgai0tOwoJICAgICAgICB9CgkgICAgICAgIGlmIChqIDwgMCB8fCBzdGF0ZUNvdW50WzFdID4gbWF4Q291bnQpIHsKCSAgICAgICAgICAgIHJldHVybiBOYU47CgkgICAgICAgIH0KCSAgICAgICAgd2hpbGUgKGogPj0gMCAmJiBpbWFnZS5nZXQoaiwgY2VudGVySSkgJiYgc3RhdGVDb3VudFswXSA8PSBtYXhDb3VudCkgewoJICAgICAgICAgICAgc3RhdGVDb3VudFswXSsrOwoJICAgICAgICAgICAgai0tOwoJICAgICAgICB9CgkgICAgICAgIGlmIChzdGF0ZUNvdW50WzBdID4gbWF4Q291bnQpIHsKCSAgICAgICAgICAgIHJldHVybiBOYU47CgkgICAgICAgIH0KCSAgICAgICAgaiA9IHN0YXJ0SiArIDE7CgkgICAgICAgIHdoaWxlIChqIDwgbWF4SiAmJiBpbWFnZS5nZXQoaiwgY2VudGVySSkpIHsKCSAgICAgICAgICAgIHN0YXRlQ291bnRbMl0rKzsKCSAgICAgICAgICAgIGorKzsKCSAgICAgICAgfQoJICAgICAgICBpZiAoaiA9PT0gbWF4SikgewoJICAgICAgICAgICAgcmV0dXJuIE5hTjsKCSAgICAgICAgfQoJICAgICAgICB3aGlsZSAoaiA8IG1heEogJiYgIWltYWdlLmdldChqLCBjZW50ZXJJKSAmJiBzdGF0ZUNvdW50WzNdIDwgbWF4Q291bnQpIHsKCSAgICAgICAgICAgIHN0YXRlQ291bnRbM10rKzsKCSAgICAgICAgICAgIGorKzsKCSAgICAgICAgfQoJICAgICAgICBpZiAoaiA9PT0gbWF4SiB8fCBzdGF0ZUNvdW50WzNdID49IG1heENvdW50KSB7CgkgICAgICAgICAgICByZXR1cm4gTmFOOwoJICAgICAgICB9CgkgICAgICAgIHdoaWxlIChqIDwgbWF4SiAmJiBpbWFnZS5nZXQoaiwgY2VudGVySSkgJiYgc3RhdGVDb3VudFs0XSA8IG1heENvdW50KSB7CgkgICAgICAgICAgICBzdGF0ZUNvdW50WzRdKys7CgkgICAgICAgICAgICBqKys7CgkgICAgICAgIH0KCSAgICAgICAgaWYgKHN0YXRlQ291bnRbNF0gPj0gbWF4Q291bnQpIHsKCSAgICAgICAgICAgIHJldHVybiBOYU47CgkgICAgICAgIH0KCSAgICAgICAgLy8gSWYgd2UgZm91bmQgYSBmaW5kZXItcGF0dGVybi1saWtlIHNlY3Rpb24sIGJ1dCBpdHMgc2l6ZSBpcyBzaWduaWZpY2FudGx5IGRpZmZlcmVudCB0aGFuCgkgICAgICAgIC8vIHRoZSBvcmlnaW5hbCwgYXNzdW1lIGl0J3MgYSBmYWxzZSBwb3NpdGl2ZQoJICAgICAgICB2YXIgc3RhdGVDb3VudFRvdGFsID0gc3RhdGVDb3VudFswXSArIHN0YXRlQ291bnRbMV0gKyBzdGF0ZUNvdW50WzJdICsgc3RhdGVDb3VudFszXSArCgkgICAgICAgICAgICBzdGF0ZUNvdW50WzRdOwoJICAgICAgICBpZiAoNSAqIE1hdGguYWJzKHN0YXRlQ291bnRUb3RhbCAtIG9yaWdpbmFsU3RhdGVDb3VudFRvdGFsKSA+PSBvcmlnaW5hbFN0YXRlQ291bnRUb3RhbCkgewoJICAgICAgICAgICAgcmV0dXJuIE5hTjsKCSAgICAgICAgfQoJICAgICAgICByZXR1cm4gRmluZGVyUGF0dGVybkZpbmRlci5mb3VuZFBhdHRlcm5Dcm9zcyhzdGF0ZUNvdW50KSA/IEZpbmRlclBhdHRlcm5GaW5kZXIuY2VudGVyRnJvbUVuZChzdGF0ZUNvdW50LCBqKSA6IE5hTjsKCSAgICB9OwoJICAgIC8qKgoJICAgICAqIDxwPlRoaXMgaXMgY2FsbGVkIHdoZW4gYSBob3Jpem9udGFsIHNjYW4gZmluZHMgYSBwb3NzaWJsZSBhbGlnbm1lbnQgcGF0dGVybi4gSXQgd2lsbAoJICAgICAqIGNyb3NzIGNoZWNrIHdpdGggYSB2ZXJ0aWNhbCBzY2FuLCBhbmQgaWYgc3VjY2Vzc2Z1bCwgd2lsbCwgYWgsIGNyb3NzLWNyb3NzLWNoZWNrCgkgICAgICogd2l0aCBhbm90aGVyIGhvcml6b250YWwgc2Nhbi4gVGhpcyBpcyBuZWVkZWQgcHJpbWFyaWx5IHRvIGxvY2F0ZSB0aGUgcmVhbCBob3Jpem9udGFsCgkgICAgICogY2VudGVyIG9mIHRoZSBwYXR0ZXJuIGluIGNhc2VzIG9mIGV4dHJlbWUgc2tldy4KCSAgICAgKiBBbmQgdGhlbiB3ZSBjcm9zcy1jcm9zcy1jcm9zcyBjaGVjayB3aXRoIGFub3RoZXIgZGlhZ29uYWwgc2Nhbi48L3A+CgkgICAgICoKCSAgICAgKiA8cD5JZiB0aGF0IHN1Y2NlZWRzIHRoZSBmaW5kZXIgcGF0dGVybiBsb2NhdGlvbiBpcyBhZGRlZCB0byBhIGxpc3QgdGhhdCB0cmFja3MKCSAgICAgKiB0aGUgbnVtYmVyIG9mIHRpbWVzIGVhY2ggbG9jYXRpb24gaGFzIGJlZW4gbmVhcmx5LW1hdGNoZWQgYXMgYSBmaW5kZXIgcGF0dGVybi4KCSAgICAgKiBFYWNoIGFkZGl0aW9uYWwgZmluZCBpcyBtb3JlIGV2aWRlbmNlIHRoYXQgdGhlIGxvY2F0aW9uIGlzIGluIGZhY3QgYSBmaW5kZXIKCSAgICAgKiBwYXR0ZXJuIGNlbnRlcgoJICAgICAqCgkgICAgICogQHBhcmFtIHN0YXRlQ291bnQgcmVhZGluZyBzdGF0ZSBtb2R1bGUgY291bnRzIGZyb20gaG9yaXpvbnRhbCBzY2FuCgkgICAgICogQHBhcmFtIGkgcm93IHdoZXJlIGZpbmRlciBwYXR0ZXJuIG1heSBiZSBmb3VuZAoJICAgICAqIEBwYXJhbSBqIGVuZCBvZiBwb3NzaWJsZSBmaW5kZXIgcGF0dGVybiBpbiByb3cKCSAgICAgKiBAcGFyYW0gcHVyZUJhcmNvZGUgdHJ1ZSBpZiBpbiAicHVyZSBiYXJjb2RlIiBtb2RlCgkgICAgICogQHJldHVybiB0cnVlIGlmIGEgZmluZGVyIHBhdHRlcm4gY2FuZGlkYXRlIHdhcyBmb3VuZCB0aGlzIHRpbWUKCSAgICAgKi8KCSAgICBGaW5kZXJQYXR0ZXJuRmluZGVyLnByb3RvdHlwZS5oYW5kbGVQb3NzaWJsZUNlbnRlciA9IGZ1bmN0aW9uIChzdGF0ZUNvdW50LCBpIC8qaW50Ki8sIGogLyppbnQqLywgcHVyZUJhcmNvZGUpIHsKCSAgICAgICAgdmFyIHN0YXRlQ291bnRUb3RhbCA9IHN0YXRlQ291bnRbMF0gKyBzdGF0ZUNvdW50WzFdICsgc3RhdGVDb3VudFsyXSArIHN0YXRlQ291bnRbM10gKwoJICAgICAgICAgICAgc3RhdGVDb3VudFs0XTsKCSAgICAgICAgdmFyIGNlbnRlckogPSBGaW5kZXJQYXR0ZXJuRmluZGVyLmNlbnRlckZyb21FbmQoc3RhdGVDb3VudCwgaik7CgkgICAgICAgIHZhciBjZW50ZXJJID0gdGhpcy5jcm9zc0NoZWNrVmVydGljYWwoaSwgLyooaW50KSAqLyBNYXRoLmZsb29yKGNlbnRlckopLCBzdGF0ZUNvdW50WzJdLCBzdGF0ZUNvdW50VG90YWwpOwoJICAgICAgICBpZiAoIWlzTmFOKGNlbnRlckkpKSB7CgkgICAgICAgICAgICAvLyBSZS1jcm9zcyBjaGVjawoJICAgICAgICAgICAgY2VudGVySiA9IHRoaXMuY3Jvc3NDaGVja0hvcml6b250YWwoLyooaW50KSAqLyBNYXRoLmZsb29yKGNlbnRlckopLCAvKihpbnQpICovIE1hdGguZmxvb3IoY2VudGVySSksIHN0YXRlQ291bnRbMl0sIHN0YXRlQ291bnRUb3RhbCk7CgkgICAgICAgICAgICBpZiAoIWlzTmFOKGNlbnRlckopICYmCgkgICAgICAgICAgICAgICAgKCFwdXJlQmFyY29kZSB8fCB0aGlzLmNyb3NzQ2hlY2tEaWFnb25hbCgvKihpbnQpICovIE1hdGguZmxvb3IoY2VudGVySSksIC8qKGludCkgKi8gTWF0aC5mbG9vcihjZW50ZXJKKSwgc3RhdGVDb3VudFsyXSwgc3RhdGVDb3VudFRvdGFsKSkpIHsKCSAgICAgICAgICAgICAgICB2YXIgZXN0aW1hdGVkTW9kdWxlU2l6ZSA9IHN0YXRlQ291bnRUb3RhbCAvIDcuMDsKCSAgICAgICAgICAgICAgICB2YXIgZm91bmQgPSBmYWxzZTsKCSAgICAgICAgICAgICAgICB2YXIgcG9zc2libGVDZW50ZXJzID0gdGhpcy5wb3NzaWJsZUNlbnRlcnM7CgkgICAgICAgICAgICAgICAgZm9yICh2YXIgaW5kZXggPSAwLCBsZW5ndGhfMSA9IHBvc3NpYmxlQ2VudGVycy5sZW5ndGg7IGluZGV4IDwgbGVuZ3RoXzE7IGluZGV4KyspIHsKCSAgICAgICAgICAgICAgICAgICAgdmFyIGNlbnRlciA9IHBvc3NpYmxlQ2VudGVyc1tpbmRleF07CgkgICAgICAgICAgICAgICAgICAgIC8vIExvb2sgZm9yIGFib3V0IHRoZSBzYW1lIGNlbnRlciBhbmQgbW9kdWxlIHNpemU6CgkgICAgICAgICAgICAgICAgICAgIGlmIChjZW50ZXIuYWJvdXRFcXVhbHMoZXN0aW1hdGVkTW9kdWxlU2l6ZSwgY2VudGVySSwgY2VudGVySikpIHsKCSAgICAgICAgICAgICAgICAgICAgICAgIHBvc3NpYmxlQ2VudGVyc1tpbmRleF0gPSBjZW50ZXIuY29tYmluZUVzdGltYXRlKGNlbnRlckksIGNlbnRlckosIGVzdGltYXRlZE1vZHVsZVNpemUpOwoJICAgICAgICAgICAgICAgICAgICAgICAgZm91bmQgPSB0cnVlOwoJICAgICAgICAgICAgICAgICAgICAgICAgYnJlYWs7CgkgICAgICAgICAgICAgICAgICAgIH0KCSAgICAgICAgICAgICAgICB9CgkgICAgICAgICAgICAgICAgaWYgKCFmb3VuZCkgewoJICAgICAgICAgICAgICAgICAgICB2YXIgcG9pbnQgPSBuZXcgRmluZGVyUGF0dGVybl8xLmRlZmF1bHQoY2VudGVySiwgY2VudGVySSwgZXN0aW1hdGVkTW9kdWxlU2l6ZSk7CgkgICAgICAgICAgICAgICAgICAgIHBvc3NpYmxlQ2VudGVycy5wdXNoKHBvaW50KTsKCSAgICAgICAgICAgICAgICAgICAgaWYgKHRoaXMucmVzdWx0UG9pbnRDYWxsYmFjayAhPT0gbnVsbCAmJiB0aGlzLnJlc3VsdFBvaW50Q2FsbGJhY2sgIT09IHVuZGVmaW5lZCkgewoJICAgICAgICAgICAgICAgICAgICAgICAgdGhpcy5yZXN1bHRQb2ludENhbGxiYWNrLmZvdW5kUG9zc2libGVSZXN1bHRQb2ludChwb2ludCk7CgkgICAgICAgICAgICAgICAgICAgIH0KCSAgICAgICAgICAgICAgICB9CgkgICAgICAgICAgICAgICAgcmV0dXJuIHRydWU7CgkgICAgICAgICAgICB9CgkgICAgICAgIH0KCSAgICAgICAgcmV0dXJuIGZhbHNlOwoJICAgIH07CgkgICAgLyoqCgkgICAgICogQHJldHVybiBudW1iZXIgb2Ygcm93cyB3ZSBjb3VsZCBzYWZlbHkgc2tpcCBkdXJpbmcgc2Nhbm5pbmcsIGJhc2VkIG9uIHRoZSBmaXJzdAoJICAgICAqICAgICAgICAgdHdvIGZpbmRlciBwYXR0ZXJucyB0aGF0IGhhdmUgYmVlbiBsb2NhdGVkLiBJbiBzb21lIGNhc2VzIHRoZWlyIHBvc2l0aW9uIHdpbGwKCSAgICAgKiAgICAgICAgIGFsbG93IHVzIHRvIGluZmVyIHRoYXQgdGhlIHRoaXJkIHBhdHRlcm4gbXVzdCBsaWUgYmVsb3cgYSBjZXJ0YWluIHBvaW50IGZhcnRoZXIKCSAgICAgKiAgICAgICAgIGRvd24gaW4gdGhlIGltYWdlLgoJICAgICAqLwoJICAgIEZpbmRlclBhdHRlcm5GaW5kZXIucHJvdG90eXBlLmZpbmRSb3dTa2lwID0gZnVuY3Rpb24gKCkgewoJICAgICAgICB2YXIgZV8xLCBfYTsKCSAgICAgICAgdmFyIG1heCA9IHRoaXMucG9zc2libGVDZW50ZXJzLmxlbmd0aDsKCSAgICAgICAgaWYgKG1heCA8PSAxKSB7CgkgICAgICAgICAgICByZXR1cm4gMDsKCSAgICAgICAgfQoJICAgICAgICB2YXIgZmlyc3RDb25maXJtZWRDZW50ZXIgPSBudWxsOwoJICAgICAgICB0cnkgewoJICAgICAgICAgICAgZm9yICh2YXIgX2IgPSBfX3ZhbHVlcyh0aGlzLnBvc3NpYmxlQ2VudGVycyksIF9jID0gX2IubmV4dCgpOyAhX2MuZG9uZTsgX2MgPSBfYi5uZXh0KCkpIHsKCSAgICAgICAgICAgICAgICB2YXIgY2VudGVyID0gX2MudmFsdWU7CgkgICAgICAgICAgICAgICAgaWYgKGNlbnRlci5nZXRDb3VudCgpID49IEZpbmRlclBhdHRlcm5GaW5kZXIuQ0VOVEVSX1FVT1JVTSkgewoJICAgICAgICAgICAgICAgICAgICBpZiAoZmlyc3RDb25maXJtZWRDZW50ZXIgPT0gbnVsbCkgewoJICAgICAgICAgICAgICAgICAgICAgICAgZmlyc3RDb25maXJtZWRDZW50ZXIgPSBjZW50ZXI7CgkgICAgICAgICAgICAgICAgICAgIH0KCSAgICAgICAgICAgICAgICAgICAgZWxzZSB7CgkgICAgICAgICAgICAgICAgICAgICAgICAvLyBXZSBoYXZlIHR3byBjb25maXJtZWQgY2VudGVycwoJICAgICAgICAgICAgICAgICAgICAgICAgLy8gSG93IGZhciBkb3duIGNhbiB3ZSBza2lwIGJlZm9yZSByZXN1bWluZyBsb29raW5nIGZvciB0aGUgbmV4dAoJICAgICAgICAgICAgICAgICAgICAgICAgLy8gcGF0dGVybj8gSW4gdGhlIHdvcnN0IGNhc2UsIG9ubHkgdGhlIGRpZmZlcmVuY2UgYmV0d2VlbiB0aGUKCSAgICAgICAgICAgICAgICAgICAgICAgIC8vIGRpZmZlcmVuY2UgaW4gdGhlIHggLyB5IGNvb3JkaW5hdGVzIG9mIHRoZSB0d28gY2VudGVycy4KCSAgICAgICAgICAgICAgICAgICAgICAgIC8vIFRoaXMgaXMgdGhlIGNhc2Ugd2hlcmUgeW91IGZpbmQgdG9wIGxlZnQgbGFzdC4KCSAgICAgICAgICAgICAgICAgICAgICAgIHRoaXMuaGFzU2tpcHBlZCA9IHRydWU7CgkgICAgICAgICAgICAgICAgICAgICAgICByZXR1cm4gLyooaW50KSAqLyBNYXRoLmZsb29yKChNYXRoLmFicyhmaXJzdENvbmZpcm1lZENlbnRlci5nZXRYKCkgLSBjZW50ZXIuZ2V0WCgpKSAtCgkgICAgICAgICAgICAgICAgICAgICAgICAgICAgTWF0aC5hYnMoZmlyc3RDb25maXJtZWRDZW50ZXIuZ2V0WSgpIC0gY2VudGVyLmdldFkoKSkpIC8gMik7CgkgICAgICAgICAgICAgICAgICAgIH0KCSAgICAgICAgICAgICAgICB9CgkgICAgICAgICAgICB9CgkgICAgICAgIH0KCSAgICAgICAgY2F0Y2ggKGVfMV8xKSB7IGVfMSA9IHsgZXJyb3I6IGVfMV8xIH07IH0KCSAgICAgICAgZmluYWxseSB7CgkgICAgICAgICAgICB0cnkgewoJICAgICAgICAgICAgICAgIGlmIChfYyAmJiAhX2MuZG9uZSAmJiAoX2EgPSBfYi5yZXR1cm4pKSBfYS5jYWxsKF9iKTsKCSAgICAgICAgICAgIH0KCSAgICAgICAgICAgIGZpbmFsbHkgeyBpZiAoZV8xKSB0aHJvdyBlXzEuZXJyb3I7IH0KCSAgICAgICAgfQoJICAgICAgICByZXR1cm4gMDsKCSAgICB9OwoJICAgIC8qKgoJICAgICAqIEByZXR1cm4gdHJ1ZSBpZmYgd2UgaGF2ZSBmb3VuZCBhdCBsZWFzdCAzIGZpbmRlciBwYXR0ZXJucyB0aGF0IGhhdmUgYmVlbiBkZXRlY3RlZAoJICAgICAqICAgICAgICAgYXQgbGVhc3Qge0BsaW5rICNDRU5URVJfUVVPUlVNfSB0aW1lcyBlYWNoLCBhbmQsIHRoZSBlc3RpbWF0ZWQgbW9kdWxlIHNpemUgb2YgdGhlCgkgICAgICogICAgICAgICBjYW5kaWRhdGVzIGlzICJwcmV0dHkgc2ltaWxhciIKCSAgICAgKi8KCSAgICBGaW5kZXJQYXR0ZXJuRmluZGVyLnByb3RvdHlwZS5oYXZlTXVsdGlwbHlDb25maXJtZWRDZW50ZXJzID0gZnVuY3Rpb24gKCkgewoJICAgICAgICB2YXIgZV8yLCBfYSwgZV8zLCBfYjsKCSAgICAgICAgdmFyIGNvbmZpcm1lZENvdW50ID0gMDsKCSAgICAgICAgdmFyIHRvdGFsTW9kdWxlU2l6ZSA9IDAuMDsKCSAgICAgICAgdmFyIG1heCA9IHRoaXMucG9zc2libGVDZW50ZXJzLmxlbmd0aDsKCSAgICAgICAgdHJ5IHsKCSAgICAgICAgICAgIGZvciAodmFyIF9jID0gX192YWx1ZXModGhpcy5wb3NzaWJsZUNlbnRlcnMpLCBfZCA9IF9jLm5leHQoKTsgIV9kLmRvbmU7IF9kID0gX2MubmV4dCgpKSB7CgkgICAgICAgICAgICAgICAgdmFyIHBhdHRlcm4gPSBfZC52YWx1ZTsKCSAgICAgICAgICAgICAgICBpZiAocGF0dGVybi5nZXRDb3VudCgpID49IEZpbmRlclBhdHRlcm5GaW5kZXIuQ0VOVEVSX1FVT1JVTSkgewoJICAgICAgICAgICAgICAgICAgICBjb25maXJtZWRDb3VudCsrOwoJICAgICAgICAgICAgICAgICAgICB0b3RhbE1vZHVsZVNpemUgKz0gcGF0dGVybi5nZXRFc3RpbWF0ZWRNb2R1bGVTaXplKCk7CgkgICAgICAgICAgICAgICAgfQoJICAgICAgICAgICAgfQoJICAgICAgICB9CgkgICAgICAgIGNhdGNoIChlXzJfMSkgeyBlXzIgPSB7IGVycm9yOiBlXzJfMSB9OyB9CgkgICAgICAgIGZpbmFsbHkgewoJICAgICAgICAgICAgdHJ5IHsKCSAgICAgICAgICAgICAgICBpZiAoX2QgJiYgIV9kLmRvbmUgJiYgKF9hID0gX2MucmV0dXJuKSkgX2EuY2FsbChfYyk7CgkgICAgICAgICAgICB9CgkgICAgICAgICAgICBmaW5hbGx5IHsgaWYgKGVfMikgdGhyb3cgZV8yLmVycm9yOyB9CgkgICAgICAgIH0KCSAgICAgICAgaWYgKGNvbmZpcm1lZENvdW50IDwgMykgewoJICAgICAgICAgICAgcmV0dXJuIGZhbHNlOwoJICAgICAgICB9CgkgICAgICAgIC8vIE9LLCB3ZSBoYXZlIGF0IGxlYXN0IDMgY29uZmlybWVkIGNlbnRlcnMsIGJ1dCwgaXQncyBwb3NzaWJsZSB0aGF0IG9uZSBpcyBhICJmYWxzZSBwb3NpdGl2ZSIKCSAgICAgICAgLy8gYW5kIHRoYXQgd2UgbmVlZCB0byBrZWVwIGxvb2tpbmcuIFdlIGRldGVjdCB0aGlzIGJ5IGFza2luZyBpZiB0aGUgZXN0aW1hdGVkIG1vZHVsZSBzaXplcwoJICAgICAgICAvLyB2YXJ5IHRvbyBtdWNoLiBXZSBhcmJpdHJhcmlseSBzYXkgdGhhdCB3aGVuIHRoZSB0b3RhbCBkZXZpYXRpb24gZnJvbSBhdmVyYWdlIGV4Y2VlZHMKCSAgICAgICAgLy8gNSUgb2YgdGhlIHRvdGFsIG1vZHVsZSBzaXplIGVzdGltYXRlcywgaXQncyB0b28gbXVjaC4KCSAgICAgICAgdmFyIGF2ZXJhZ2UgPSB0b3RhbE1vZHVsZVNpemUgLyBtYXg7CgkgICAgICAgIHZhciB0b3RhbERldmlhdGlvbiA9IDAuMDsKCSAgICAgICAgdHJ5IHsKCSAgICAgICAgICAgIGZvciAodmFyIF9lID0gX192YWx1ZXModGhpcy5wb3NzaWJsZUNlbnRlcnMpLCBfZiA9IF9lLm5leHQoKTsgIV9mLmRvbmU7IF9mID0gX2UubmV4dCgpKSB7CgkgICAgICAgICAgICAgICAgdmFyIHBhdHRlcm4gPSBfZi52YWx1ZTsKCSAgICAgICAgICAgICAgICB0b3RhbERldmlhdGlvbiArPSBNYXRoLmFicyhwYXR0ZXJuLmdldEVzdGltYXRlZE1vZHVsZVNpemUoKSAtIGF2ZXJhZ2UpOwoJICAgICAgICAgICAgfQoJICAgICAgICB9CgkgICAgICAgIGNhdGNoIChlXzNfMSkgeyBlXzMgPSB7IGVycm9yOiBlXzNfMSB9OyB9CgkgICAgICAgIGZpbmFsbHkgewoJICAgICAgICAgICAgdHJ5IHsKCSAgICAgICAgICAgICAgICBpZiAoX2YgJiYgIV9mLmRvbmUgJiYgKF9iID0gX2UucmV0dXJuKSkgX2IuY2FsbChfZSk7CgkgICAgICAgICAgICB9CgkgICAgICAgICAgICBmaW5hbGx5IHsgaWYgKGVfMykgdGhyb3cgZV8zLmVycm9yOyB9CgkgICAgICAgIH0KCSAgICAgICAgcmV0dXJuIHRvdGFsRGV2aWF0aW9uIDw9IDAuMDUgKiB0b3RhbE1vZHVsZVNpemU7CgkgICAgfTsKCSAgICAvKioKCSAgICAgKiBAcmV0dXJuIHRoZSAzIGJlc3Qge0BsaW5rIEZpbmRlclBhdHRlcm59cyBmcm9tIG91ciBsaXN0IG9mIGNhbmRpZGF0ZXMuIFRoZSAiYmVzdCIgYXJlCgkgICAgICogICAgICAgICB0aG9zZSB0aGF0IGhhdmUgYmVlbiBkZXRlY3RlZCBhdCBsZWFzdCB7QGxpbmsgI0NFTlRFUl9RVU9SVU19IHRpbWVzLCBhbmQgd2hvc2UgbW9kdWxlCgkgICAgICogICAgICAgICBzaXplIGRpZmZlcnMgZnJvbSB0aGUgYXZlcmFnZSBhbW9uZyB0aG9zZSBwYXR0ZXJucyB0aGUgbGVhc3QKCSAgICAgKiBAdGhyb3dzIE5vdEZvdW5kRXhjZXB0aW9uIGlmIDMgc3VjaCBmaW5kZXIgcGF0dGVybnMgZG8gbm90IGV4aXN0CgkgICAgICovCgkgICAgRmluZGVyUGF0dGVybkZpbmRlci5wcm90b3R5cGUuc2VsZWN0QmVzdFBhdHRlcm5zID0gZnVuY3Rpb24gKCkgewoJICAgICAgICB2YXIgZV80LCBfYSwgZV81LCBfYjsKCSAgICAgICAgdmFyIHN0YXJ0U2l6ZSA9IHRoaXMucG9zc2libGVDZW50ZXJzLmxlbmd0aDsKCSAgICAgICAgaWYgKHN0YXJ0U2l6ZSA8IDMpIHsKCSAgICAgICAgICAgIC8vIENvdWxkbid0IGZpbmQgZW5vdWdoIGZpbmRlciBwYXR0ZXJucwoJICAgICAgICAgICAgdGhyb3cgbmV3IE5vdEZvdW5kRXhjZXB0aW9uXzEkMi5kZWZhdWx0KCk7CgkgICAgICAgIH0KCSAgICAgICAgdmFyIHBvc3NpYmxlQ2VudGVycyA9IHRoaXMucG9zc2libGVDZW50ZXJzOwoJICAgICAgICB2YXIgYXZlcmFnZTsKCSAgICAgICAgLy8gRmlsdGVyIG91dGxpZXIgcG9zc2liaWxpdGllcyB3aG9zZSBtb2R1bGUgc2l6ZSBpcyB0b28gZGlmZmVyZW50CgkgICAgICAgIGlmIChzdGFydFNpemUgPiAzKSB7CgkgICAgICAgICAgICAvLyBCdXQgd2UgY2FuIG9ubHkgYWZmb3JkIHRvIGRvIHNvIGlmIHdlIGhhdmUgYXQgbGVhc3QgNCBwb3NzaWJpbGl0aWVzIHRvIGNob29zZSBmcm9tCgkgICAgICAgICAgICB2YXIgdG90YWxNb2R1bGVTaXplID0gMC4wOwoJICAgICAgICAgICAgdmFyIHNxdWFyZSA9IDAuMDsKCSAgICAgICAgICAgIHRyeSB7CgkgICAgICAgICAgICAgICAgZm9yICh2YXIgX2MgPSBfX3ZhbHVlcyh0aGlzLnBvc3NpYmxlQ2VudGVycyksIF9kID0gX2MubmV4dCgpOyAhX2QuZG9uZTsgX2QgPSBfYy5uZXh0KCkpIHsKCSAgICAgICAgICAgICAgICAgICAgdmFyIGNlbnRlciA9IF9kLnZhbHVlOwoJICAgICAgICAgICAgICAgICAgICB2YXIgc2l6ZSA9IGNlbnRlci5nZXRFc3RpbWF0ZWRNb2R1bGVTaXplKCk7CgkgICAgICAgICAgICAgICAgICAgIHRvdGFsTW9kdWxlU2l6ZSArPSBzaXplOwoJICAgICAgICAgICAgICAgICAgICBzcXVhcmUgKz0gc2l6ZSAqIHNpemU7CgkgICAgICAgICAgICAgICAgfQoJICAgICAgICAgICAgfQoJICAgICAgICAgICAgY2F0Y2ggKGVfNF8xKSB7IGVfNCA9IHsgZXJyb3I6IGVfNF8xIH07IH0KCSAgICAgICAgICAgIGZpbmFsbHkgewoJICAgICAgICAgICAgICAgIHRyeSB7CgkgICAgICAgICAgICAgICAgICAgIGlmIChfZCAmJiAhX2QuZG9uZSAmJiAoX2EgPSBfYy5yZXR1cm4pKSBfYS5jYWxsKF9jKTsKCSAgICAgICAgICAgICAgICB9CgkgICAgICAgICAgICAgICAgZmluYWxseSB7IGlmIChlXzQpIHRocm93IGVfNC5lcnJvcjsgfQoJICAgICAgICAgICAgfQoJICAgICAgICAgICAgYXZlcmFnZSA9IHRvdGFsTW9kdWxlU2l6ZSAvIHN0YXJ0U2l6ZTsKCSAgICAgICAgICAgIHZhciBzdGREZXYgPSBNYXRoLnNxcnQoc3F1YXJlIC8gc3RhcnRTaXplIC0gYXZlcmFnZSAqIGF2ZXJhZ2UpOwoJICAgICAgICAgICAgcG9zc2libGVDZW50ZXJzLnNvcnQoCgkgICAgICAgICAgICAvKioKCSAgICAgICAgICAgICAqIDxwPk9yZGVycyBieSBmdXJ0aGVzdCBmcm9tIGF2ZXJhZ2U8L3A+CgkgICAgICAgICAgICAgKi8KCSAgICAgICAgICAgIC8vIEZ1cnRoZXN0RnJvbUF2ZXJhZ2VDb21wYXJhdG9yIGltcGxlbWVudHMgQ29tcGFyYXRvcjxGaW5kZXJQYXR0ZXJuPgoJICAgICAgICAgICAgZnVuY3Rpb24gKGNlbnRlcjEsIGNlbnRlcjIpIHsKCSAgICAgICAgICAgICAgICB2YXIgZEEgPSBNYXRoLmFicyhjZW50ZXIyLmdldEVzdGltYXRlZE1vZHVsZVNpemUoKSAtIGF2ZXJhZ2UpOwoJICAgICAgICAgICAgICAgIHZhciBkQiA9IE1hdGguYWJzKGNlbnRlcjEuZ2V0RXN0aW1hdGVkTW9kdWxlU2l6ZSgpIC0gYXZlcmFnZSk7CgkgICAgICAgICAgICAgICAgcmV0dXJuIGRBIDwgZEIgPyAtMSA6IGRBID4gZEIgPyAxIDogMDsKCSAgICAgICAgICAgIH0pOwoJICAgICAgICAgICAgdmFyIGxpbWl0ID0gTWF0aC5tYXgoMC4yICogYXZlcmFnZSwgc3RkRGV2KTsKCSAgICAgICAgICAgIGZvciAodmFyIGkgPSAwOyBpIDwgcG9zc2libGVDZW50ZXJzLmxlbmd0aCAmJiBwb3NzaWJsZUNlbnRlcnMubGVuZ3RoID4gMzsgaSsrKSB7CgkgICAgICAgICAgICAgICAgdmFyIHBhdHRlcm4gPSBwb3NzaWJsZUNlbnRlcnNbaV07CgkgICAgICAgICAgICAgICAgaWYgKE1hdGguYWJzKHBhdHRlcm4uZ2V0RXN0aW1hdGVkTW9kdWxlU2l6ZSgpIC0gYXZlcmFnZSkgPiBsaW1pdCkgewoJICAgICAgICAgICAgICAgICAgICBwb3NzaWJsZUNlbnRlcnMuc3BsaWNlKGksIDEpOwoJICAgICAgICAgICAgICAgICAgICBpLS07CgkgICAgICAgICAgICAgICAgfQoJICAgICAgICAgICAgfQoJICAgICAgICB9CgkgICAgICAgIGlmIChwb3NzaWJsZUNlbnRlcnMubGVuZ3RoID4gMykgewoJICAgICAgICAgICAgLy8gVGhyb3cgYXdheSBhbGwgYnV0IHRob3NlIGZpcnN0IHNpemUgY2FuZGlkYXRlIHBvaW50cyB3ZSBmb3VuZC4KCSAgICAgICAgICAgIHZhciB0b3RhbE1vZHVsZVNpemUgPSAwLjA7CgkgICAgICAgICAgICB0cnkgewoJICAgICAgICAgICAgICAgIGZvciAodmFyIHBvc3NpYmxlQ2VudGVyc18xID0gX192YWx1ZXMocG9zc2libGVDZW50ZXJzKSwgcG9zc2libGVDZW50ZXJzXzFfMSA9IHBvc3NpYmxlQ2VudGVyc18xLm5leHQoKTsgIXBvc3NpYmxlQ2VudGVyc18xXzEuZG9uZTsgcG9zc2libGVDZW50ZXJzXzFfMSA9IHBvc3NpYmxlQ2VudGVyc18xLm5leHQoKSkgewoJICAgICAgICAgICAgICAgICAgICB2YXIgcG9zc2libGVDZW50ZXIgPSBwb3NzaWJsZUNlbnRlcnNfMV8xLnZhbHVlOwoJICAgICAgICAgICAgICAgICAgICB0b3RhbE1vZHVsZVNpemUgKz0gcG9zc2libGVDZW50ZXIuZ2V0RXN0aW1hdGVkTW9kdWxlU2l6ZSgpOwoJICAgICAgICAgICAgICAgIH0KCSAgICAgICAgICAgIH0KCSAgICAgICAgICAgIGNhdGNoIChlXzVfMSkgeyBlXzUgPSB7IGVycm9yOiBlXzVfMSB9OyB9CgkgICAgICAgICAgICBmaW5hbGx5IHsKCSAgICAgICAgICAgICAgICB0cnkgewoJICAgICAgICAgICAgICAgICAgICBpZiAocG9zc2libGVDZW50ZXJzXzFfMSAmJiAhcG9zc2libGVDZW50ZXJzXzFfMS5kb25lICYmIChfYiA9IHBvc3NpYmxlQ2VudGVyc18xLnJldHVybikpIF9iLmNhbGwocG9zc2libGVDZW50ZXJzXzEpOwoJICAgICAgICAgICAgICAgIH0KCSAgICAgICAgICAgICAgICBmaW5hbGx5IHsgaWYgKGVfNSkgdGhyb3cgZV81LmVycm9yOyB9CgkgICAgICAgICAgICB9CgkgICAgICAgICAgICBhdmVyYWdlID0gdG90YWxNb2R1bGVTaXplIC8gcG9zc2libGVDZW50ZXJzLmxlbmd0aDsKCSAgICAgICAgICAgIHBvc3NpYmxlQ2VudGVycy5zb3J0KAoJICAgICAgICAgICAgLyoqCgkgICAgICAgICAgICAgKiA8cD5PcmRlcnMgYnkge0BsaW5rIEZpbmRlclBhdHRlcm4jZ2V0Q291bnQoKX0sIGRlc2NlbmRpbmcuPC9wPgoJICAgICAgICAgICAgICovCgkgICAgICAgICAgICAvLyBDZW50ZXJDb21wYXJhdG9yIGltcGxlbWVudHMgQ29tcGFyYXRvcjxGaW5kZXJQYXR0ZXJuPgoJICAgICAgICAgICAgZnVuY3Rpb24gKGNlbnRlcjEsIGNlbnRlcjIpIHsKCSAgICAgICAgICAgICAgICBpZiAoY2VudGVyMi5nZXRDb3VudCgpID09PSBjZW50ZXIxLmdldENvdW50KCkpIHsKCSAgICAgICAgICAgICAgICAgICAgdmFyIGRBID0gTWF0aC5hYnMoY2VudGVyMi5nZXRFc3RpbWF0ZWRNb2R1bGVTaXplKCkgLSBhdmVyYWdlKTsKCSAgICAgICAgICAgICAgICAgICAgdmFyIGRCID0gTWF0aC5hYnMoY2VudGVyMS5nZXRFc3RpbWF0ZWRNb2R1bGVTaXplKCkgLSBhdmVyYWdlKTsKCSAgICAgICAgICAgICAgICAgICAgcmV0dXJuIGRBIDwgZEIgPyAxIDogZEEgPiBkQiA/IC0xIDogMDsKCSAgICAgICAgICAgICAgICB9CgkgICAgICAgICAgICAgICAgZWxzZSB7CgkgICAgICAgICAgICAgICAgICAgIHJldHVybiBjZW50ZXIyLmdldENvdW50KCkgLSBjZW50ZXIxLmdldENvdW50KCk7CgkgICAgICAgICAgICAgICAgfQoJICAgICAgICAgICAgfSk7CgkgICAgICAgICAgICBwb3NzaWJsZUNlbnRlcnMuc3BsaWNlKDMpOyAvLyB0aGlzIGlzIG5vdCByZWFseSBuZWNlc3NhcnkgYXMgd2Ugb25seSByZXR1cm4gZmlyc3QgMyBhbnl3YXkKCSAgICAgICAgfQoJICAgICAgICByZXR1cm4gWwoJICAgICAgICAgICAgcG9zc2libGVDZW50ZXJzWzBdLAoJICAgICAgICAgICAgcG9zc2libGVDZW50ZXJzWzFdLAoJICAgICAgICAgICAgcG9zc2libGVDZW50ZXJzWzJdCgkgICAgICAgIF07CgkgICAgfTsKCSAgICBGaW5kZXJQYXR0ZXJuRmluZGVyLkNFTlRFUl9RVU9SVU0gPSAyOwoJICAgIEZpbmRlclBhdHRlcm5GaW5kZXIuTUlOX1NLSVAgPSAzOyAvLyAxIHBpeGVsL21vZHVsZSB0aW1lcyAzIG1vZHVsZXMvY2VudGVyCgkgICAgRmluZGVyUGF0dGVybkZpbmRlci5NQVhfTU9EVUxFUyA9IDU3OyAvLyBzdXBwb3J0IHVwIHRvIHZlcnNpb24gMTAgZm9yIG1vYmlsZSBjbGllbnRzCgkgICAgcmV0dXJuIEZpbmRlclBhdHRlcm5GaW5kZXI7Cgl9KCkpOwoJRmluZGVyUGF0dGVybkZpbmRlciQxLmRlZmF1bHQgPSBGaW5kZXJQYXR0ZXJuRmluZGVyOwoKCS8qCgkgKiBDb3B5cmlnaHQgMjAwNyBaWGluZyBhdXRob3JzCgkgKgoJICogTGljZW5zZWQgdW5kZXIgdGhlIEFwYWNoZSBMaWNlbnNlLCBWZXJzaW9uIDIuMCAodGhlICJMaWNlbnNlIik7CgkgKiB5b3UgbWF5IG5vdCB1c2UgdGhpcyBmaWxlIGV4Y2VwdCBpbiBjb21wbGlhbmNlIHdpdGggdGhlIExpY2Vuc2UuCgkgKiBZb3UgbWF5IG9idGFpbiBhIGNvcHkgb2YgdGhlIExpY2Vuc2UgYXQKCSAqCgkgKiAgICAgIGh0dHA6Ly93d3cuYXBhY2hlLm9yZy9saWNlbnNlcy9MSUNFTlNFLTIuMAoJICoKCSAqIFVubGVzcyByZXF1aXJlZCBieSBhcHBsaWNhYmxlIGxhdyBvciBhZ3JlZWQgdG8gaW4gd3JpdGluZywgc29mdHdhcmUKCSAqIGRpc3RyaWJ1dGVkIHVuZGVyIHRoZSBMaWNlbnNlIGlzIGRpc3RyaWJ1dGVkIG9uIGFuICJBUyBJUyIgQkFTSVMsCgkgKiBXSVRIT1VUIFdBUlJBTlRJRVMgT1IgQ09ORElUSU9OUyBPRiBBTlkgS0lORCwgZWl0aGVyIGV4cHJlc3Mgb3IgaW1wbGllZC4KCSAqIFNlZSB0aGUgTGljZW5zZSBmb3IgdGhlIHNwZWNpZmljIGxhbmd1YWdlIGdvdmVybmluZyBwZXJtaXNzaW9ucyBhbmQKCSAqIGxpbWl0YXRpb25zIHVuZGVyIHRoZSBMaWNlbnNlLgoJICovCglPYmplY3QuZGVmaW5lUHJvcGVydHkoRGV0ZWN0b3IkMSwgIl9fZXNNb2R1bGUiLCB7IHZhbHVlOiB0cnVlIH0pOwoJdmFyIE1hdGhVdGlsc18xID0gTWF0aFV0aWxzJDE7Cgl2YXIgRGV0ZWN0b3JSZXN1bHRfMSA9IERldGVjdG9yUmVzdWx0JDE7CgkvLyBpbXBvcnQgR3JpZFNhbXBsZXIgZnJvbSAnLi4vLi4vY29tbW9uL0dyaWRTYW1wbGVyJzsKCXZhciBHcmlkU2FtcGxlckluc3RhbmNlXzEgPSBHcmlkU2FtcGxlckluc3RhbmNlJDE7Cgl2YXIgUGVyc3BlY3RpdmVUcmFuc2Zvcm1fMSA9IFBlcnNwZWN0aXZlVHJhbnNmb3JtJDE7Cgl2YXIgRGVjb2RlSGludFR5cGVfMSQxID0gRGVjb2RlSGludFR5cGUkMTsKCXZhciBOb3RGb3VuZEV4Y2VwdGlvbl8xJDEgPSBOb3RGb3VuZEV4Y2VwdGlvbiQxOwoJdmFyIFJlc3VsdFBvaW50XzEgPSBSZXN1bHRQb2ludCQxOwoJdmFyIFZlcnNpb25fMSA9IFZlcnNpb24kMTsKCXZhciBBbGlnbm1lbnRQYXR0ZXJuRmluZGVyXzEgPSBBbGlnbm1lbnRQYXR0ZXJuRmluZGVyJDE7Cgl2YXIgRmluZGVyUGF0dGVybkZpbmRlcl8xID0gRmluZGVyUGF0dGVybkZpbmRlciQxOwoJLyppbXBvcnQgamF2YS51dGlsLk1hcDsqLwoJLyoqCgkgKiA8cD5FbmNhcHN1bGF0ZXMgbG9naWMgdGhhdCBjYW4gZGV0ZWN0IGEgUVIgQ29kZSBpbiBhbiBpbWFnZSwgZXZlbiBpZiB0aGUgUVIgQ29kZQoJICogaXMgcm90YXRlZCBvciBza2V3ZWQsIG9yIHBhcnRpYWxseSBvYnNjdXJlZC48L3A+CgkgKgoJICogQGF1dGhvciBTZWFuIE93ZW4KCSAqLwoJdmFyIERldGVjdG9yID0gLyoqIEBjbGFzcyAqLyAoZnVuY3Rpb24gKCkgewoJICAgIGZ1bmN0aW9uIERldGVjdG9yKGltYWdlKSB7CgkgICAgICAgIHRoaXMuaW1hZ2UgPSBpbWFnZTsKCSAgICB9CgkgICAgRGV0ZWN0b3IucHJvdG90eXBlLmdldEltYWdlID0gZnVuY3Rpb24gKCkgewoJICAgICAgICByZXR1cm4gdGhpcy5pbWFnZTsKCSAgICB9OwoJICAgIERldGVjdG9yLnByb3RvdHlwZS5nZXRSZXN1bHRQb2ludENhbGxiYWNrID0gZnVuY3Rpb24gKCkgewoJICAgICAgICByZXR1cm4gdGhpcy5yZXN1bHRQb2ludENhbGxiYWNrOwoJICAgIH07CgkgICAgLyoqCgkgICAgICogPHA+RGV0ZWN0cyBhIFFSIENvZGUgaW4gYW4gaW1hZ2UuPC9wPgoJICAgICAqCgkgICAgICogQHJldHVybiB7QGxpbmsgRGV0ZWN0b3JSZXN1bHR9IGVuY2Fwc3VsYXRpbmcgcmVzdWx0cyBvZiBkZXRlY3RpbmcgYSBRUiBDb2RlCgkgICAgICogQHRocm93cyBOb3RGb3VuZEV4Y2VwdGlvbiBpZiBRUiBDb2RlIGNhbm5vdCBiZSBmb3VuZAoJICAgICAqIEB0aHJvd3MgRm9ybWF0RXhjZXB0aW9uIGlmIGEgUVIgQ29kZSBjYW5ub3QgYmUgZGVjb2RlZAoJICAgICAqLwoJICAgIC8vIHB1YmxpYyBkZXRlY3QoKTogRGV0ZWN0b3JSZXN1bHQgLyp0aHJvd3MgTm90Rm91bmRFeGNlcHRpb24sIEZvcm1hdEV4Y2VwdGlvbiovIHsKCSAgICAvLyAgIHJldHVybiBkZXRlY3QobnVsbCkKCSAgICAvLyB9CgkgICAgLyoqCgkgICAgICogPHA+RGV0ZWN0cyBhIFFSIENvZGUgaW4gYW4gaW1hZ2UuPC9wPgoJICAgICAqCgkgICAgICogQHBhcmFtIGhpbnRzIG9wdGlvbmFsIGhpbnRzIHRvIGRldGVjdG9yCgkgICAgICogQHJldHVybiB7QGxpbmsgRGV0ZWN0b3JSZXN1bHR9IGVuY2Fwc3VsYXRpbmcgcmVzdWx0cyBvZiBkZXRlY3RpbmcgYSBRUiBDb2RlCgkgICAgICogQHRocm93cyBOb3RGb3VuZEV4Y2VwdGlvbiBpZiBRUiBDb2RlIGNhbm5vdCBiZSBmb3VuZAoJICAgICAqIEB0aHJvd3MgRm9ybWF0RXhjZXB0aW9uIGlmIGEgUVIgQ29kZSBjYW5ub3QgYmUgZGVjb2RlZAoJICAgICAqLwoJICAgIERldGVjdG9yLnByb3RvdHlwZS5kZXRlY3QgPSBmdW5jdGlvbiAoaGludHMpIHsKCSAgICAgICAgdGhpcy5yZXN1bHRQb2ludENhbGxiYWNrID0gKGhpbnRzID09PSBudWxsIHx8IGhpbnRzID09PSB1bmRlZmluZWQpID8gbnVsbCA6CgkgICAgICAgICAgICAvKihSZXN1bHRQb2ludENhbGxiYWNrKSAqLyBoaW50cy5nZXQoRGVjb2RlSGludFR5cGVfMSQxLmRlZmF1bHQuTkVFRF9SRVNVTFRfUE9JTlRfQ0FMTEJBQ0spOwoJICAgICAgICB2YXIgZmluZGVyID0gbmV3IEZpbmRlclBhdHRlcm5GaW5kZXJfMS5kZWZhdWx0KHRoaXMuaW1hZ2UsIHRoaXMucmVzdWx0UG9pbnRDYWxsYmFjayk7CgkgICAgICAgIHZhciBpbmZvID0gZmluZGVyLmZpbmQoaGludHMpOwoJICAgICAgICByZXR1cm4gdGhpcy5wcm9jZXNzRmluZGVyUGF0dGVybkluZm8oaW5mbyk7CgkgICAgfTsKCSAgICBEZXRlY3Rvci5wcm90b3R5cGUucHJvY2Vzc0ZpbmRlclBhdHRlcm5JbmZvID0gZnVuY3Rpb24gKGluZm8pIHsKCSAgICAgICAgdmFyIHRvcExlZnQgPSBpbmZvLmdldFRvcExlZnQoKTsKCSAgICAgICAgdmFyIHRvcFJpZ2h0ID0gaW5mby5nZXRUb3BSaWdodCgpOwoJICAgICAgICB2YXIgYm90dG9tTGVmdCA9IGluZm8uZ2V0Qm90dG9tTGVmdCgpOwoJICAgICAgICB2YXIgbW9kdWxlU2l6ZSA9IHRoaXMuY2FsY3VsYXRlTW9kdWxlU2l6ZSh0b3BMZWZ0LCB0b3BSaWdodCwgYm90dG9tTGVmdCk7CgkgICAgICAgIGlmIChtb2R1bGVTaXplIDwgMS4wKSB7CgkgICAgICAgICAgICB0aHJvdyBuZXcgTm90Rm91bmRFeGNlcHRpb25fMSQxLmRlZmF1bHQoJ05vIHBhdHRlcm4gZm91bmQgaW4gcHJvY2Nlc3MgZmluZGVyLicpOwoJICAgICAgICB9CgkgICAgICAgIHZhciBkaW1lbnNpb24gPSBEZXRlY3Rvci5jb21wdXRlRGltZW5zaW9uKHRvcExlZnQsIHRvcFJpZ2h0LCBib3R0b21MZWZ0LCBtb2R1bGVTaXplKTsKCSAgICAgICAgdmFyIHByb3Zpc2lvbmFsVmVyc2lvbiA9IFZlcnNpb25fMS5kZWZhdWx0LmdldFByb3Zpc2lvbmFsVmVyc2lvbkZvckRpbWVuc2lvbihkaW1lbnNpb24pOwoJICAgICAgICB2YXIgbW9kdWxlc0JldHdlZW5GUENlbnRlcnMgPSBwcm92aXNpb25hbFZlcnNpb24uZ2V0RGltZW5zaW9uRm9yVmVyc2lvbigpIC0gNzsKCSAgICAgICAgdmFyIGFsaWdubWVudFBhdHRlcm4gPSBudWxsOwoJICAgICAgICAvLyBBbnl0aGluZyBhYm92ZSB2ZXJzaW9uIDEgaGFzIGFuIGFsaWdubWVudCBwYXR0ZXJuCgkgICAgICAgIGlmIChwcm92aXNpb25hbFZlcnNpb24uZ2V0QWxpZ25tZW50UGF0dGVybkNlbnRlcnMoKS5sZW5ndGggPiAwKSB7CgkgICAgICAgICAgICAvLyBHdWVzcyB3aGVyZSBhICJib3R0b20gcmlnaHQiIGZpbmRlciBwYXR0ZXJuIHdvdWxkIGhhdmUgYmVlbgoJICAgICAgICAgICAgdmFyIGJvdHRvbVJpZ2h0WCA9IHRvcFJpZ2h0LmdldFgoKSAtIHRvcExlZnQuZ2V0WCgpICsgYm90dG9tTGVmdC5nZXRYKCk7CgkgICAgICAgICAgICB2YXIgYm90dG9tUmlnaHRZID0gdG9wUmlnaHQuZ2V0WSgpIC0gdG9wTGVmdC5nZXRZKCkgKyBib3R0b21MZWZ0LmdldFkoKTsKCSAgICAgICAgICAgIC8vIEVzdGltYXRlIHRoYXQgYWxpZ25tZW50IHBhdHRlcm4gaXMgY2xvc2VyIGJ5IDMgbW9kdWxlcwoJICAgICAgICAgICAgLy8gZnJvbSAiYm90dG9tIHJpZ2h0IiB0byBrbm93biB0b3AgbGVmdCBsb2NhdGlvbgoJICAgICAgICAgICAgdmFyIGNvcnJlY3Rpb25Ub1RvcExlZnQgPSAxLjAgLSAzLjAgLyBtb2R1bGVzQmV0d2VlbkZQQ2VudGVyczsKCSAgICAgICAgICAgIHZhciBlc3RBbGlnbm1lbnRYID0gLyooaW50KSAqLyBNYXRoLmZsb29yKHRvcExlZnQuZ2V0WCgpICsgY29ycmVjdGlvblRvVG9wTGVmdCAqIChib3R0b21SaWdodFggLSB0b3BMZWZ0LmdldFgoKSkpOwoJICAgICAgICAgICAgdmFyIGVzdEFsaWdubWVudFkgPSAvKihpbnQpICovIE1hdGguZmxvb3IodG9wTGVmdC5nZXRZKCkgKyBjb3JyZWN0aW9uVG9Ub3BMZWZ0ICogKGJvdHRvbVJpZ2h0WSAtIHRvcExlZnQuZ2V0WSgpKSk7CgkgICAgICAgICAgICAvLyBLaW5kIG9mIGFyYml0cmFyeSAtLSBleHBhbmQgc2VhcmNoIHJhZGl1cyBiZWZvcmUgZ2l2aW5nIHVwCgkgICAgICAgICAgICBmb3IgKHZhciBpID0gNDsgaSA8PSAxNjsgaSA8PD0gMSkgewoJICAgICAgICAgICAgICAgIHRyeSB7CgkgICAgICAgICAgICAgICAgICAgIGFsaWdubWVudFBhdHRlcm4gPSB0aGlzLmZpbmRBbGlnbm1lbnRJblJlZ2lvbihtb2R1bGVTaXplLCBlc3RBbGlnbm1lbnRYLCBlc3RBbGlnbm1lbnRZLCBpKTsKCSAgICAgICAgICAgICAgICAgICAgYnJlYWs7CgkgICAgICAgICAgICAgICAgfQoJICAgICAgICAgICAgICAgIGNhdGNoIChyZSAvKk5vdEZvdW5kRXhjZXB0aW9uKi8pIHsKCSAgICAgICAgICAgICAgICAgICAgaWYgKCEocmUgaW5zdGFuY2VvZiBOb3RGb3VuZEV4Y2VwdGlvbl8xJDEuZGVmYXVsdCkpIHsKCSAgICAgICAgICAgICAgICAgICAgICAgIHRocm93IHJlOwoJICAgICAgICAgICAgICAgICAgICB9CgkgICAgICAgICAgICAgICAgICAgIC8vIHRyeSBuZXh0IHJvdW5kCgkgICAgICAgICAgICAgICAgfQoJICAgICAgICAgICAgfQoJICAgICAgICAgICAgLy8gSWYgd2UgZGlkbid0IGZpbmQgYWxpZ25tZW50IHBhdHRlcm4uLi4gd2VsbCB0cnkgYW55d2F5IHdpdGhvdXQgaXQKCSAgICAgICAgfQoJICAgICAgICB2YXIgdHJhbnNmb3JtID0gRGV0ZWN0b3IuY3JlYXRlVHJhbnNmb3JtKHRvcExlZnQsIHRvcFJpZ2h0LCBib3R0b21MZWZ0LCBhbGlnbm1lbnRQYXR0ZXJuLCBkaW1lbnNpb24pOwoJICAgICAgICB2YXIgYml0cyA9IERldGVjdG9yLnNhbXBsZUdyaWQodGhpcy5pbWFnZSwgdHJhbnNmb3JtLCBkaW1lbnNpb24pOwoJICAgICAgICB2YXIgcG9pbnRzOwoJICAgICAgICBpZiAoYWxpZ25tZW50UGF0dGVybiA9PT0gbnVsbCkgewoJICAgICAgICAgICAgcG9pbnRzID0gW2JvdHRvbUxlZnQsIHRvcExlZnQsIHRvcFJpZ2h0XTsKCSAgICAgICAgfQoJICAgICAgICBlbHNlIHsKCSAgICAgICAgICAgIHBvaW50cyA9IFtib3R0b21MZWZ0LCB0b3BMZWZ0LCB0b3BSaWdodCwgYWxpZ25tZW50UGF0dGVybl07CgkgICAgICAgIH0KCSAgICAgICAgcmV0dXJuIG5ldyBEZXRlY3RvclJlc3VsdF8xLmRlZmF1bHQoYml0cywgcG9pbnRzKTsKCSAgICB9OwoJICAgIERldGVjdG9yLmNyZWF0ZVRyYW5zZm9ybSA9IGZ1bmN0aW9uICh0b3BMZWZ0LCB0b3BSaWdodCwgYm90dG9tTGVmdCwgYWxpZ25tZW50UGF0dGVybiwgZGltZW5zaW9uIC8qaW50Ki8pIHsKCSAgICAgICAgdmFyIGRpbU1pbnVzVGhyZWUgPSBkaW1lbnNpb24gLSAzLjU7CgkgICAgICAgIHZhciBib3R0b21SaWdodFg7IC8qZmxvYXQqLwoJICAgICAgICB2YXIgYm90dG9tUmlnaHRZOyAvKmZsb2F0Ki8KCSAgICAgICAgdmFyIHNvdXJjZUJvdHRvbVJpZ2h0WDsgLypmbG9hdCovCgkgICAgICAgIHZhciBzb3VyY2VCb3R0b21SaWdodFk7IC8qZmxvYXQqLwoJICAgICAgICBpZiAoYWxpZ25tZW50UGF0dGVybiAhPT0gbnVsbCkgewoJICAgICAgICAgICAgYm90dG9tUmlnaHRYID0gYWxpZ25tZW50UGF0dGVybi5nZXRYKCk7CgkgICAgICAgICAgICBib3R0b21SaWdodFkgPSBhbGlnbm1lbnRQYXR0ZXJuLmdldFkoKTsKCSAgICAgICAgICAgIHNvdXJjZUJvdHRvbVJpZ2h0WCA9IGRpbU1pbnVzVGhyZWUgLSAzLjA7CgkgICAgICAgICAgICBzb3VyY2VCb3R0b21SaWdodFkgPSBzb3VyY2VCb3R0b21SaWdodFg7CgkgICAgICAgIH0KCSAgICAgICAgZWxzZSB7CgkgICAgICAgICAgICAvLyBEb24ndCBoYXZlIGFuIGFsaWdubWVudCBwYXR0ZXJuLCBqdXN0IG1ha2UgdXAgdGhlIGJvdHRvbS1yaWdodCBwb2ludAoJICAgICAgICAgICAgYm90dG9tUmlnaHRYID0gKHRvcFJpZ2h0LmdldFgoKSAtIHRvcExlZnQuZ2V0WCgpKSArIGJvdHRvbUxlZnQuZ2V0WCgpOwoJICAgICAgICAgICAgYm90dG9tUmlnaHRZID0gKHRvcFJpZ2h0LmdldFkoKSAtIHRvcExlZnQuZ2V0WSgpKSArIGJvdHRvbUxlZnQuZ2V0WSgpOwoJICAgICAgICAgICAgc291cmNlQm90dG9tUmlnaHRYID0gZGltTWludXNUaHJlZTsKCSAgICAgICAgICAgIHNvdXJjZUJvdHRvbVJpZ2h0WSA9IGRpbU1pbnVzVGhyZWU7CgkgICAgICAgIH0KCSAgICAgICAgcmV0dXJuIFBlcnNwZWN0aXZlVHJhbnNmb3JtXzEuZGVmYXVsdC5xdWFkcmlsYXRlcmFsVG9RdWFkcmlsYXRlcmFsKDMuNSwgMy41LCBkaW1NaW51c1RocmVlLCAzLjUsIHNvdXJjZUJvdHRvbVJpZ2h0WCwgc291cmNlQm90dG9tUmlnaHRZLCAzLjUsIGRpbU1pbnVzVGhyZWUsIHRvcExlZnQuZ2V0WCgpLCB0b3BMZWZ0LmdldFkoKSwgdG9wUmlnaHQuZ2V0WCgpLCB0b3BSaWdodC5nZXRZKCksIGJvdHRvbVJpZ2h0WCwgYm90dG9tUmlnaHRZLCBib3R0b21MZWZ0LmdldFgoKSwgYm90dG9tTGVmdC5nZXRZKCkpOwoJICAgIH07CgkgICAgRGV0ZWN0b3Iuc2FtcGxlR3JpZCA9IGZ1bmN0aW9uIChpbWFnZSwgdHJhbnNmb3JtLCBkaW1lbnNpb24gLyppbnQqLykgewoJICAgICAgICB2YXIgc2FtcGxlciA9IEdyaWRTYW1wbGVySW5zdGFuY2VfMS5kZWZhdWx0LmdldEluc3RhbmNlKCk7CgkgICAgICAgIHJldHVybiBzYW1wbGVyLnNhbXBsZUdyaWRXaXRoVHJhbnNmb3JtKGltYWdlLCBkaW1lbnNpb24sIGRpbWVuc2lvbiwgdHJhbnNmb3JtKTsKCSAgICB9OwoJICAgIC8qKgoJICAgICAqIDxwPkNvbXB1dGVzIHRoZSBkaW1lbnNpb24gKG51bWJlciBvZiBtb2R1bGVzIG9uIGEgc2l6ZSkgb2YgdGhlIFFSIENvZGUgYmFzZWQgb24gdGhlIHBvc2l0aW9uCgkgICAgICogb2YgdGhlIGZpbmRlciBwYXR0ZXJucyBhbmQgZXN0aW1hdGVkIG1vZHVsZSBzaXplLjwvcD4KCSAgICAgKi8KCSAgICBEZXRlY3Rvci5jb21wdXRlRGltZW5zaW9uID0gZnVuY3Rpb24gKHRvcExlZnQsIHRvcFJpZ2h0LCBib3R0b21MZWZ0LCBtb2R1bGVTaXplIC8qZmxvYXQqLykgewoJICAgICAgICB2YXIgdGx0ckNlbnRlcnNEaW1lbnNpb24gPSBNYXRoVXRpbHNfMS5kZWZhdWx0LnJvdW5kKFJlc3VsdFBvaW50XzEuZGVmYXVsdC5kaXN0YW5jZSh0b3BMZWZ0LCB0b3BSaWdodCkgLyBtb2R1bGVTaXplKTsKCSAgICAgICAgdmFyIHRsYmxDZW50ZXJzRGltZW5zaW9uID0gTWF0aFV0aWxzXzEuZGVmYXVsdC5yb3VuZChSZXN1bHRQb2ludF8xLmRlZmF1bHQuZGlzdGFuY2UodG9wTGVmdCwgYm90dG9tTGVmdCkgLyBtb2R1bGVTaXplKTsKCSAgICAgICAgdmFyIGRpbWVuc2lvbiA9IE1hdGguZmxvb3IoKHRsdHJDZW50ZXJzRGltZW5zaW9uICsgdGxibENlbnRlcnNEaW1lbnNpb24pIC8gMikgKyA3OwoJICAgICAgICBzd2l0Y2ggKGRpbWVuc2lvbiAmIDB4MDMpIHsgLy8gbW9kIDQKCSAgICAgICAgICAgIGNhc2UgMDoKCSAgICAgICAgICAgICAgICBkaW1lbnNpb24rKzsKCSAgICAgICAgICAgICAgICBicmVhazsKCSAgICAgICAgICAgIC8vIDE/IGRvIG5vdGhpbmcKCSAgICAgICAgICAgIGNhc2UgMjoKCSAgICAgICAgICAgICAgICBkaW1lbnNpb24tLTsKCSAgICAgICAgICAgICAgICBicmVhazsKCSAgICAgICAgICAgIGNhc2UgMzoKCSAgICAgICAgICAgICAgICB0aHJvdyBuZXcgTm90Rm91bmRFeGNlcHRpb25fMSQxLmRlZmF1bHQoJ0RpbWVuc2lvbnMgY291bGQgYmUgbm90IGZvdW5kLicpOwoJICAgICAgICB9CgkgICAgICAgIHJldHVybiBkaW1lbnNpb247CgkgICAgfTsKCSAgICAvKioKCSAgICAgKiA8cD5Db21wdXRlcyBhbiBhdmVyYWdlIGVzdGltYXRlZCBtb2R1bGUgc2l6ZSBiYXNlZCBvbiBlc3RpbWF0ZWQgZGVyaXZlZCBmcm9tIHRoZSBwb3NpdGlvbnMKCSAgICAgKiBvZiB0aGUgdGhyZWUgZmluZGVyIHBhdHRlcm5zLjwvcD4KCSAgICAgKgoJICAgICAqIEBwYXJhbSB0b3BMZWZ0IGRldGVjdGVkIHRvcC1sZWZ0IGZpbmRlciBwYXR0ZXJuIGNlbnRlcgoJICAgICAqIEBwYXJhbSB0b3BSaWdodCBkZXRlY3RlZCB0b3AtcmlnaHQgZmluZGVyIHBhdHRlcm4gY2VudGVyCgkgICAgICogQHBhcmFtIGJvdHRvbUxlZnQgZGV0ZWN0ZWQgYm90dG9tLWxlZnQgZmluZGVyIHBhdHRlcm4gY2VudGVyCgkgICAgICogQHJldHVybiBlc3RpbWF0ZWQgbW9kdWxlIHNpemUKCSAgICAgKi8KCSAgICBEZXRlY3Rvci5wcm90b3R5cGUuY2FsY3VsYXRlTW9kdWxlU2l6ZSA9IGZ1bmN0aW9uICh0b3BMZWZ0LCB0b3BSaWdodCwgYm90dG9tTGVmdCkgewoJICAgICAgICAvLyBUYWtlIHRoZSBhdmVyYWdlCgkgICAgICAgIHJldHVybiAodGhpcy5jYWxjdWxhdGVNb2R1bGVTaXplT25lV2F5KHRvcExlZnQsIHRvcFJpZ2h0KSArCgkgICAgICAgICAgICB0aGlzLmNhbGN1bGF0ZU1vZHVsZVNpemVPbmVXYXkodG9wTGVmdCwgYm90dG9tTGVmdCkpIC8gMi4wOwoJICAgIH07CgkgICAgLyoqCgkgICAgICogPHA+RXN0aW1hdGVzIG1vZHVsZSBzaXplIGJhc2VkIG9uIHR3byBmaW5kZXIgcGF0dGVybnMgLS0gaXQgdXNlcwoJICAgICAqIHtAbGluayAjc2l6ZU9mQmxhY2tXaGl0ZUJsYWNrUnVuQm90aFdheXMoaW50LCBpbnQsIGludCwgaW50KX0gdG8gZmlndXJlIHRoZQoJICAgICAqIHdpZHRoIG9mIGVhY2gsIG1lYXN1cmluZyBhbG9uZyB0aGUgYXhpcyBiZXR3ZWVuIHRoZWlyIGNlbnRlcnMuPC9wPgoJICAgICAqLwoJICAgIERldGVjdG9yLnByb3RvdHlwZS5jYWxjdWxhdGVNb2R1bGVTaXplT25lV2F5ID0gZnVuY3Rpb24gKHBhdHRlcm4sIG90aGVyUGF0dGVybikgewoJICAgICAgICB2YXIgbW9kdWxlU2l6ZUVzdDEgPSB0aGlzLnNpemVPZkJsYWNrV2hpdGVCbGFja1J1bkJvdGhXYXlzKC8qKGludCkgKi8gTWF0aC5mbG9vcihwYXR0ZXJuLmdldFgoKSksIAoJICAgICAgICAvKihpbnQpICovIE1hdGguZmxvb3IocGF0dGVybi5nZXRZKCkpLCAKCSAgICAgICAgLyooaW50KSAqLyBNYXRoLmZsb29yKG90aGVyUGF0dGVybi5nZXRYKCkpLCAKCSAgICAgICAgLyooaW50KSAqLyBNYXRoLmZsb29yKG90aGVyUGF0dGVybi5nZXRZKCkpKTsKCSAgICAgICAgdmFyIG1vZHVsZVNpemVFc3QyID0gdGhpcy5zaXplT2ZCbGFja1doaXRlQmxhY2tSdW5Cb3RoV2F5cygvKihpbnQpICovIE1hdGguZmxvb3Iob3RoZXJQYXR0ZXJuLmdldFgoKSksIAoJICAgICAgICAvKihpbnQpICovIE1hdGguZmxvb3Iob3RoZXJQYXR0ZXJuLmdldFkoKSksIAoJICAgICAgICAvKihpbnQpICovIE1hdGguZmxvb3IocGF0dGVybi5nZXRYKCkpLCAKCSAgICAgICAgLyooaW50KSAqLyBNYXRoLmZsb29yKHBhdHRlcm4uZ2V0WSgpKSk7CgkgICAgICAgIGlmIChpc05hTihtb2R1bGVTaXplRXN0MSkpIHsKCSAgICAgICAgICAgIHJldHVybiBtb2R1bGVTaXplRXN0MiAvIDcuMDsKCSAgICAgICAgfQoJICAgICAgICBpZiAoaXNOYU4obW9kdWxlU2l6ZUVzdDIpKSB7CgkgICAgICAgICAgICByZXR1cm4gbW9kdWxlU2l6ZUVzdDEgLyA3LjA7CgkgICAgICAgIH0KCSAgICAgICAgLy8gQXZlcmFnZSB0aGVtLCBhbmQgZGl2aWRlIGJ5IDcgc2luY2Ugd2UndmUgY291bnRlZCB0aGUgd2lkdGggb2YgMyBibGFjayBtb2R1bGVzLAoJICAgICAgICAvLyBhbmQgMSB3aGl0ZSBhbmQgMSBibGFjayBtb2R1bGUgb24gZWl0aGVyIHNpZGUuIEVyZ28sIGRpdmlkZSBzdW0gYnkgMTQuCgkgICAgICAgIHJldHVybiAobW9kdWxlU2l6ZUVzdDEgKyBtb2R1bGVTaXplRXN0MikgLyAxNC4wOwoJICAgIH07CgkgICAgLyoqCgkgICAgICogU2VlIHtAbGluayAjc2l6ZU9mQmxhY2tXaGl0ZUJsYWNrUnVuKGludCwgaW50LCBpbnQsIGludCl9OyBjb21wdXRlcyB0aGUgdG90YWwgd2lkdGggb2YKCSAgICAgKiBhIGZpbmRlciBwYXR0ZXJuIGJ5IGxvb2tpbmcgZm9yIGEgYmxhY2std2hpdGUtYmxhY2sgcnVuIGZyb20gdGhlIGNlbnRlciBpbiB0aGUgZGlyZWN0aW9uCgkgICAgICogb2YgYW5vdGhlciBwb2ludCAoYW5vdGhlciBmaW5kZXIgcGF0dGVybiBjZW50ZXIpLCBhbmQgaW4gdGhlIG9wcG9zaXRlIGRpcmVjdGlvbiB0b28uCgkgICAgICovCgkgICAgRGV0ZWN0b3IucHJvdG90eXBlLnNpemVPZkJsYWNrV2hpdGVCbGFja1J1bkJvdGhXYXlzID0gZnVuY3Rpb24gKGZyb21YIC8qaW50Ki8sIGZyb21ZIC8qaW50Ki8sIHRvWCAvKmludCovLCB0b1kgLyppbnQqLykgewoJICAgICAgICB2YXIgcmVzdWx0ID0gdGhpcy5zaXplT2ZCbGFja1doaXRlQmxhY2tSdW4oZnJvbVgsIGZyb21ZLCB0b1gsIHRvWSk7CgkgICAgICAgIC8vIE5vdyBjb3VudCBvdGhlciB3YXkgLS0gZG9uJ3QgcnVuIG9mZiBpbWFnZSB0aG91Z2ggb2YgY291cnNlCgkgICAgICAgIHZhciBzY2FsZSA9IDEuMDsKCSAgICAgICAgdmFyIG90aGVyVG9YID0gZnJvbVggLSAodG9YIC0gZnJvbVgpOwoJICAgICAgICBpZiAob3RoZXJUb1ggPCAwKSB7CgkgICAgICAgICAgICBzY2FsZSA9IGZyb21YIC8gLyooZmxvYXQpICovIChmcm9tWCAtIG90aGVyVG9YKTsKCSAgICAgICAgICAgIG90aGVyVG9YID0gMDsKCSAgICAgICAgfQoJICAgICAgICBlbHNlIGlmIChvdGhlclRvWCA+PSB0aGlzLmltYWdlLmdldFdpZHRoKCkpIHsKCSAgICAgICAgICAgIHNjYWxlID0gKHRoaXMuaW1hZ2UuZ2V0V2lkdGgoKSAtIDEgLSBmcm9tWCkgLyAvKihmbG9hdCkgKi8gKG90aGVyVG9YIC0gZnJvbVgpOwoJICAgICAgICAgICAgb3RoZXJUb1ggPSB0aGlzLmltYWdlLmdldFdpZHRoKCkgLSAxOwoJICAgICAgICB9CgkgICAgICAgIHZhciBvdGhlclRvWSA9IC8qKGludCkgKi8gTWF0aC5mbG9vcihmcm9tWSAtICh0b1kgLSBmcm9tWSkgKiBzY2FsZSk7CgkgICAgICAgIHNjYWxlID0gMS4wOwoJICAgICAgICBpZiAob3RoZXJUb1kgPCAwKSB7CgkgICAgICAgICAgICBzY2FsZSA9IGZyb21ZIC8gLyooZmxvYXQpICovIChmcm9tWSAtIG90aGVyVG9ZKTsKCSAgICAgICAgICAgIG90aGVyVG9ZID0gMDsKCSAgICAgICAgfQoJICAgICAgICBlbHNlIGlmIChvdGhlclRvWSA+PSB0aGlzLmltYWdlLmdldEhlaWdodCgpKSB7CgkgICAgICAgICAgICBzY2FsZSA9ICh0aGlzLmltYWdlLmdldEhlaWdodCgpIC0gMSAtIGZyb21ZKSAvIC8qKGZsb2F0KSAqLyAob3RoZXJUb1kgLSBmcm9tWSk7CgkgICAgICAgICAgICBvdGhlclRvWSA9IHRoaXMuaW1hZ2UuZ2V0SGVpZ2h0KCkgLSAxOwoJICAgICAgICB9CgkgICAgICAgIG90aGVyVG9YID0gLyooaW50KSAqLyBNYXRoLmZsb29yKGZyb21YICsgKG90aGVyVG9YIC0gZnJvbVgpICogc2NhbGUpOwoJICAgICAgICByZXN1bHQgKz0gdGhpcy5zaXplT2ZCbGFja1doaXRlQmxhY2tSdW4oZnJvbVgsIGZyb21ZLCBvdGhlclRvWCwgb3RoZXJUb1kpOwoJICAgICAgICAvLyBNaWRkbGUgcGl4ZWwgaXMgZG91YmxlLWNvdW50ZWQgdGhpcyB3YXk7IHN1YnRyYWN0IDEKCSAgICAgICAgcmV0dXJuIHJlc3VsdCAtIDEuMDsKCSAgICB9OwoJICAgIC8qKgoJICAgICAqIDxwPlRoaXMgbWV0aG9kIHRyYWNlcyBhIGxpbmUgZnJvbSBhIHBvaW50IGluIHRoZSBpbWFnZSwgaW4gdGhlIGRpcmVjdGlvbiB0b3dhcmRzIGFub3RoZXIgcG9pbnQuCgkgICAgICogSXQgYmVnaW5zIGluIGEgYmxhY2sgcmVnaW9uLCBhbmQga2VlcHMgZ29pbmcgdW50aWwgaXQgZmluZHMgd2hpdGUsIHRoZW4gYmxhY2ssIHRoZW4gd2hpdGUgYWdhaW4uCgkgICAgICogSXQgcmVwb3J0cyB0aGUgZGlzdGFuY2UgZnJvbSB0aGUgc3RhcnQgdG8gdGhpcyBwb2ludC48L3A+CgkgICAgICoKCSAgICAgKiA8cD5UaGlzIGlzIHVzZWQgd2hlbiBmaWd1cmluZyBvdXQgaG93IHdpZGUgYSBmaW5kZXIgcGF0dGVybiBpcywgd2hlbiB0aGUgZmluZGVyIHBhdHRlcm4KCSAgICAgKiBtYXkgYmUgc2tld2VkIG9yIHJvdGF0ZWQuPC9wPgoJICAgICAqLwoJICAgIERldGVjdG9yLnByb3RvdHlwZS5zaXplT2ZCbGFja1doaXRlQmxhY2tSdW4gPSBmdW5jdGlvbiAoZnJvbVggLyppbnQqLywgZnJvbVkgLyppbnQqLywgdG9YIC8qaW50Ki8sIHRvWSAvKmludCovKSB7CgkgICAgICAgIC8vIE1pbGQgdmFyaWFudCBvZiBCcmVzZW5oYW0ncyBhbGdvcml0aG0KCSAgICAgICAgLy8gc2VlIGh0dHA6Ly9lbi53aWtpcGVkaWEub3JnL3dpa2kvQnJlc2VuaGFtJ3NfbGluZV9hbGdvcml0aG0KCSAgICAgICAgdmFyIHN0ZWVwID0gTWF0aC5hYnModG9ZIC0gZnJvbVkpID4gTWF0aC5hYnModG9YIC0gZnJvbVgpOwoJICAgICAgICBpZiAoc3RlZXApIHsKCSAgICAgICAgICAgIHZhciB0ZW1wID0gZnJvbVg7CgkgICAgICAgICAgICBmcm9tWCA9IGZyb21ZOwoJICAgICAgICAgICAgZnJvbVkgPSB0ZW1wOwoJICAgICAgICAgICAgdGVtcCA9IHRvWDsKCSAgICAgICAgICAgIHRvWCA9IHRvWTsKCSAgICAgICAgICAgIHRvWSA9IHRlbXA7CgkgICAgICAgIH0KCSAgICAgICAgdmFyIGR4ID0gTWF0aC5hYnModG9YIC0gZnJvbVgpOwoJICAgICAgICB2YXIgZHkgPSBNYXRoLmFicyh0b1kgLSBmcm9tWSk7CgkgICAgICAgIHZhciBlcnJvciA9IC1keCAvIDI7CgkgICAgICAgIHZhciB4c3RlcCA9IGZyb21YIDwgdG9YID8gMSA6IC0xOwoJICAgICAgICB2YXIgeXN0ZXAgPSBmcm9tWSA8IHRvWSA/IDEgOiAtMTsKCSAgICAgICAgLy8gSW4gYmxhY2sgcGl4ZWxzLCBsb29raW5nIGZvciB3aGl0ZSwgZmlyc3Qgb3Igc2Vjb25kIHRpbWUuCgkgICAgICAgIHZhciBzdGF0ZSA9IDA7CgkgICAgICAgIC8vIExvb3AgdXAgdW50aWwgeCA9PSB0b1gsIGJ1dCBub3QgYmV5b25kCgkgICAgICAgIHZhciB4TGltaXQgPSB0b1ggKyB4c3RlcDsKCSAgICAgICAgZm9yICh2YXIgeCA9IGZyb21YLCB5ID0gZnJvbVk7IHggIT09IHhMaW1pdDsgeCArPSB4c3RlcCkgewoJICAgICAgICAgICAgdmFyIHJlYWxYID0gc3RlZXAgPyB5IDogeDsKCSAgICAgICAgICAgIHZhciByZWFsWSA9IHN0ZWVwID8geCA6IHk7CgkgICAgICAgICAgICAvLyBEb2VzIGN1cnJlbnQgcGl4ZWwgbWVhbiB3ZSBoYXZlIG1vdmVkIHdoaXRlIHRvIGJsYWNrIG9yIHZpY2UgdmVyc2E/CgkgICAgICAgICAgICAvLyBTY2FubmluZyBibGFjayBpbiBzdGF0ZSAwLDIgYW5kIHdoaXRlIGluIHN0YXRlIDEsIHNvIGlmIHdlIGZpbmQgdGhlIHdyb25nCgkgICAgICAgICAgICAvLyBjb2xvciwgYWR2YW5jZSB0byBuZXh0IHN0YXRlIG9yIGVuZCBpZiB3ZSBhcmUgaW4gc3RhdGUgMiBhbHJlYWR5CgkgICAgICAgICAgICBpZiAoKHN0YXRlID09PSAxKSA9PT0gdGhpcy5pbWFnZS5nZXQocmVhbFgsIHJlYWxZKSkgewoJICAgICAgICAgICAgICAgIGlmIChzdGF0ZSA9PT0gMikgewoJICAgICAgICAgICAgICAgICAgICByZXR1cm4gTWF0aFV0aWxzXzEuZGVmYXVsdC5kaXN0YW5jZSh4LCB5LCBmcm9tWCwgZnJvbVkpOwoJICAgICAgICAgICAgICAgIH0KCSAgICAgICAgICAgICAgICBzdGF0ZSsrOwoJICAgICAgICAgICAgfQoJICAgICAgICAgICAgZXJyb3IgKz0gZHk7CgkgICAgICAgICAgICBpZiAoZXJyb3IgPiAwKSB7CgkgICAgICAgICAgICAgICAgaWYgKHkgPT09IHRvWSkgewoJICAgICAgICAgICAgICAgICAgICBicmVhazsKCSAgICAgICAgICAgICAgICB9CgkgICAgICAgICAgICAgICAgeSArPSB5c3RlcDsKCSAgICAgICAgICAgICAgICBlcnJvciAtPSBkeDsKCSAgICAgICAgICAgIH0KCSAgICAgICAgfQoJICAgICAgICAvLyBGb3VuZCBibGFjay13aGl0ZS1ibGFjazsgZ2l2ZSB0aGUgYmVuZWZpdCBvZiB0aGUgZG91YnQgdGhhdCB0aGUgbmV4dCBwaXhlbCBvdXRzaWRlIHRoZSBpbWFnZQoJICAgICAgICAvLyBpcyAid2hpdGUiIHNvIHRoaXMgbGFzdCBwb2ludCBhdCAodG9YK3hTdGVwLHRvWSkgaXMgdGhlIHJpZ2h0IGVuZGluZy4gVGhpcyBpcyByZWFsbHkgYQoJICAgICAgICAvLyBzbWFsbCBhcHByb3hpbWF0aW9uOyAodG9YK3hTdGVwLHRvWSt5U3RlcCkgbWlnaHQgYmUgcmVhbGx5IGNvcnJlY3QuIElnbm9yZSB0aGlzLgoJICAgICAgICBpZiAoc3RhdGUgPT09IDIpIHsKCSAgICAgICAgICAgIHJldHVybiBNYXRoVXRpbHNfMS5kZWZhdWx0LmRpc3RhbmNlKHRvWCArIHhzdGVwLCB0b1ksIGZyb21YLCBmcm9tWSk7CgkgICAgICAgIH0KCSAgICAgICAgLy8gZWxzZSB3ZSBkaWRuJ3QgZmluZCBldmVuIGJsYWNrLXdoaXRlLWJsYWNrOyBubyBlc3RpbWF0ZSBpcyByZWFsbHkgcG9zc2libGUKCSAgICAgICAgcmV0dXJuIE5hTjsKCSAgICB9OwoJICAgIC8qKgoJICAgICAqIDxwPkF0dGVtcHRzIHRvIGxvY2F0ZSBhbiBhbGlnbm1lbnQgcGF0dGVybiBpbiBhIGxpbWl0ZWQgcmVnaW9uIG9mIHRoZSBpbWFnZSwgd2hpY2ggaXMKCSAgICAgKiBndWVzc2VkIHRvIGNvbnRhaW4gaXQuIFRoaXMgbWV0aG9kIHVzZXMge0BsaW5rIEFsaWdubWVudFBhdHRlcm59LjwvcD4KCSAgICAgKgoJICAgICAqIEBwYXJhbSBvdmVyYWxsRXN0TW9kdWxlU2l6ZSBlc3RpbWF0ZWQgbW9kdWxlIHNpemUgc28gZmFyCgkgICAgICogQHBhcmFtIGVzdEFsaWdubWVudFggeCBjb29yZGluYXRlIG9mIGNlbnRlciBvZiBhcmVhIHByb2JhYmx5IGNvbnRhaW5pbmcgYWxpZ25tZW50IHBhdHRlcm4KCSAgICAgKiBAcGFyYW0gZXN0QWxpZ25tZW50WSB5IGNvb3JkaW5hdGUgb2YgYWJvdmUKCSAgICAgKiBAcGFyYW0gYWxsb3dhbmNlRmFjdG9yIG51bWJlciBvZiBwaXhlbHMgaW4gYWxsIGRpcmVjdGlvbnMgdG8gc2VhcmNoIGZyb20gdGhlIGNlbnRlcgoJICAgICAqIEByZXR1cm4ge0BsaW5rIEFsaWdubWVudFBhdHRlcm59IGlmIGZvdW5kLCBvciBudWxsIG90aGVyd2lzZQoJICAgICAqIEB0aHJvd3MgTm90Rm91bmRFeGNlcHRpb24gaWYgYW4gdW5leHBlY3RlZCBlcnJvciBvY2N1cnMgZHVyaW5nIGRldGVjdGlvbgoJICAgICAqLwoJICAgIERldGVjdG9yLnByb3RvdHlwZS5maW5kQWxpZ25tZW50SW5SZWdpb24gPSBmdW5jdGlvbiAob3ZlcmFsbEVzdE1vZHVsZVNpemUgLypmbG9hdCovLCBlc3RBbGlnbm1lbnRYIC8qaW50Ki8sIGVzdEFsaWdubWVudFkgLyppbnQqLywgYWxsb3dhbmNlRmFjdG9yIC8qZmxvYXQqLykgewoJICAgICAgICAvLyBMb29rIGZvciBhbiBhbGlnbm1lbnQgcGF0dGVybiAoMyBtb2R1bGVzIGluIHNpemUpIGFyb3VuZCB3aGVyZSBpdAoJICAgICAgICAvLyBzaG91bGQgYmUKCSAgICAgICAgdmFyIGFsbG93YW5jZSA9IC8qKGludCkgKi8gTWF0aC5mbG9vcihhbGxvd2FuY2VGYWN0b3IgKiBvdmVyYWxsRXN0TW9kdWxlU2l6ZSk7CgkgICAgICAgIHZhciBhbGlnbm1lbnRBcmVhTGVmdFggPSBNYXRoLm1heCgwLCBlc3RBbGlnbm1lbnRYIC0gYWxsb3dhbmNlKTsKCSAgICAgICAgdmFyIGFsaWdubWVudEFyZWFSaWdodFggPSBNYXRoLm1pbih0aGlzLmltYWdlLmdldFdpZHRoKCkgLSAxLCBlc3RBbGlnbm1lbnRYICsgYWxsb3dhbmNlKTsKCSAgICAgICAgaWYgKGFsaWdubWVudEFyZWFSaWdodFggLSBhbGlnbm1lbnRBcmVhTGVmdFggPCBvdmVyYWxsRXN0TW9kdWxlU2l6ZSAqIDMpIHsKCSAgICAgICAgICAgIHRocm93IG5ldyBOb3RGb3VuZEV4Y2VwdGlvbl8xJDEuZGVmYXVsdCgnQWxpZ25tZW50IHRvcCBleGNlZWRzIGVzdGltYXRlZCBtb2R1bGUgc2l6ZS4nKTsKCSAgICAgICAgfQoJICAgICAgICB2YXIgYWxpZ25tZW50QXJlYVRvcFkgPSBNYXRoLm1heCgwLCBlc3RBbGlnbm1lbnRZIC0gYWxsb3dhbmNlKTsKCSAgICAgICAgdmFyIGFsaWdubWVudEFyZWFCb3R0b21ZID0gTWF0aC5taW4odGhpcy5pbWFnZS5nZXRIZWlnaHQoKSAtIDEsIGVzdEFsaWdubWVudFkgKyBhbGxvd2FuY2UpOwoJICAgICAgICBpZiAoYWxpZ25tZW50QXJlYUJvdHRvbVkgLSBhbGlnbm1lbnRBcmVhVG9wWSA8IG92ZXJhbGxFc3RNb2R1bGVTaXplICogMykgewoJICAgICAgICAgICAgdGhyb3cgbmV3IE5vdEZvdW5kRXhjZXB0aW9uXzEkMS5kZWZhdWx0KCdBbGlnbm1lbnQgYm90dG9tIGV4Y2VlZHMgZXN0aW1hdGVkIG1vZHVsZSBzaXplLicpOwoJICAgICAgICB9CgkgICAgICAgIHZhciBhbGlnbm1lbnRGaW5kZXIgPSBuZXcgQWxpZ25tZW50UGF0dGVybkZpbmRlcl8xLmRlZmF1bHQodGhpcy5pbWFnZSwgYWxpZ25tZW50QXJlYUxlZnRYLCBhbGlnbm1lbnRBcmVhVG9wWSwgYWxpZ25tZW50QXJlYVJpZ2h0WCAtIGFsaWdubWVudEFyZWFMZWZ0WCwgYWxpZ25tZW50QXJlYUJvdHRvbVkgLSBhbGlnbm1lbnRBcmVhVG9wWSwgb3ZlcmFsbEVzdE1vZHVsZVNpemUsIHRoaXMucmVzdWx0UG9pbnRDYWxsYmFjayk7CgkgICAgICAgIHJldHVybiBhbGlnbm1lbnRGaW5kZXIuZmluZCgpOwoJICAgIH07CgkgICAgcmV0dXJuIERldGVjdG9yOwoJfSgpKTsKCURldGVjdG9yJDEuZGVmYXVsdCA9IERldGVjdG9yOwoKCS8qCgkgKiBDb3B5cmlnaHQgMjAwNyBaWGluZyBhdXRob3JzCgkgKgoJICogTGljZW5zZWQgdW5kZXIgdGhlIEFwYWNoZSBMaWNlbnNlLCBWZXJzaW9uIDIuMCAodGhlICJMaWNlbnNlIik7CgkgKiB5b3UgbWF5IG5vdCB1c2UgdGhpcyBmaWxlIGV4Y2VwdCBpbiBjb21wbGlhbmNlIHdpdGggdGhlIExpY2Vuc2UuCgkgKiBZb3UgbWF5IG9idGFpbiBhIGNvcHkgb2YgdGhlIExpY2Vuc2UgYXQKCSAqCgkgKiAgICAgIGh0dHA6Ly93d3cuYXBhY2hlLm9yZy9saWNlbnNlcy9MSUNFTlNFLTIuMAoJICoKCSAqIFVubGVzcyByZXF1aXJlZCBieSBhcHBsaWNhYmxlIGxhdyBvciBhZ3JlZWQgdG8gaW4gd3JpdGluZywgc29mdHdhcmUKCSAqIGRpc3RyaWJ1dGVkIHVuZGVyIHRoZSBMaWNlbnNlIGlzIGRpc3RyaWJ1dGVkIG9uIGFuICJBUyBJUyIgQkFTSVMsCgkgKiBXSVRIT1VUIFdBUlJBTlRJRVMgT1IgQ09ORElUSU9OUyBPRiBBTlkgS0lORCwgZWl0aGVyIGV4cHJlc3Mgb3IgaW1wbGllZC4KCSAqIFNlZSB0aGUgTGljZW5zZSBmb3IgdGhlIHNwZWNpZmljIGxhbmd1YWdlIGdvdmVybmluZyBwZXJtaXNzaW9ucyBhbmQKCSAqIGxpbWl0YXRpb25zIHVuZGVyIHRoZSBMaWNlbnNlLgoJICovCglPYmplY3QuZGVmaW5lUHJvcGVydHkoUVJDb2RlUmVhZGVyJDEsICJfX2VzTW9kdWxlIiwgeyB2YWx1ZTogdHJ1ZSB9KTsKCS8qbmFtZXNwYWNlIGNvbS5nb29nbGUuenhpbmcucXJjb2RlIHsqLwoJdmFyIEJhcmNvZGVGb3JtYXRfMSA9IEJhcmNvZGVGb3JtYXQkMTsKCXZhciBCaXRNYXRyaXhfMSA9IEJpdE1hdHJpeCQxOwoJdmFyIERlY29kZUhpbnRUeXBlXzEgPSBEZWNvZGVIaW50VHlwZSQxOwoJdmFyIE5vdEZvdW5kRXhjZXB0aW9uXzEgPSBOb3RGb3VuZEV4Y2VwdGlvbiQxOwoJdmFyIFJlc3VsdF8xID0gUmVzdWx0JDE7Cgl2YXIgUmVzdWx0TWV0YWRhdGFUeXBlXzEgPSBSZXN1bHRNZXRhZGF0YVR5cGUkMTsKCS8vIGltcG9ydCBEZXRlY3RvclJlc3VsdCBmcm9tICcuLi9jb21tb24vRGV0ZWN0b3JSZXN1bHQnOwoJdmFyIERlY29kZXJfMSA9IERlY29kZXIkMTsKCXZhciBRUkNvZGVEZWNvZGVyTWV0YURhdGFfMSA9IFFSQ29kZURlY29kZXJNZXRhRGF0YSQxOwoJdmFyIERldGVjdG9yXzEgPSBEZXRlY3RvciQxOwoJLyppbXBvcnQgamF2YS51dGlsLkxpc3Q7Ki8KCS8qaW1wb3J0IGphdmEudXRpbC5NYXA7Ki8KCS8qKgoJICogVGhpcyBpbXBsZW1lbnRhdGlvbiBjYW4gZGV0ZWN0IGFuZCBkZWNvZGUgUVIgQ29kZXMgaW4gYW4gaW1hZ2UuCgkgKgoJICogQGF1dGhvciBTZWFuIE93ZW4KCSAqLwoJdmFyIFFSQ29kZVJlYWRlciA9IC8qKiBAY2xhc3MgKi8gKGZ1bmN0aW9uICgpIHsKCSAgICBmdW5jdGlvbiBRUkNvZGVSZWFkZXIoKSB7CgkgICAgICAgIHRoaXMuZGVjb2RlciA9IG5ldyBEZWNvZGVyXzEuZGVmYXVsdCgpOwoJICAgIH0KCSAgICBRUkNvZGVSZWFkZXIucHJvdG90eXBlLmdldERlY29kZXIgPSBmdW5jdGlvbiAoKSB7CgkgICAgICAgIHJldHVybiB0aGlzLmRlY29kZXI7CgkgICAgfTsKCSAgICAvKioKCSAgICAgKiBMb2NhdGVzIGFuZCBkZWNvZGVzIGEgUVIgY29kZSBpbiBhbiBpbWFnZS4KCSAgICAgKgoJICAgICAqIEByZXR1cm4gYSByZXByZXNlbnRpbmc6IHN0cmluZyB0aGUgY29udGVudCBlbmNvZGVkIGJ5IHRoZSBRUiBjb2RlCgkgICAgICogQHRocm93cyBOb3RGb3VuZEV4Y2VwdGlvbiBpZiBhIFFSIGNvZGUgY2Fubm90IGJlIGZvdW5kCgkgICAgICogQHRocm93cyBGb3JtYXRFeGNlcHRpb24gaWYgYSBRUiBjb2RlIGNhbm5vdCBiZSBkZWNvZGVkCgkgICAgICogQHRocm93cyBDaGVja3N1bUV4Y2VwdGlvbiBpZiBlcnJvciBjb3JyZWN0aW9uIGZhaWxzCgkgICAgICovCgkgICAgLypAT3ZlcnJpZGUqLwoJICAgIC8vIHB1YmxpYyBkZWNvZGUoaW1hZ2U6IEJpbmFyeUJpdG1hcCk6IFJlc3VsdCAvKnRocm93cyBOb3RGb3VuZEV4Y2VwdGlvbiwgQ2hlY2tzdW1FeGNlcHRpb24sIEZvcm1hdEV4Y2VwdGlvbiAqLyB7CgkgICAgLy8gICByZXR1cm4gdGhpcy5kZWNvZGUoaW1hZ2UsIG51bGwpCgkgICAgLy8gfQoJICAgIC8qQE92ZXJyaWRlKi8KCSAgICBRUkNvZGVSZWFkZXIucHJvdG90eXBlLmRlY29kZSA9IGZ1bmN0aW9uIChpbWFnZSwgaGludHMpIHsKCSAgICAgICAgdmFyIGRlY29kZXJSZXN1bHQ7CgkgICAgICAgIHZhciBwb2ludHM7CgkgICAgICAgIGlmIChoaW50cyAhPT0gdW5kZWZpbmVkICYmIGhpbnRzICE9PSBudWxsICYmIHVuZGVmaW5lZCAhPT0gaGludHMuZ2V0KERlY29kZUhpbnRUeXBlXzEuZGVmYXVsdC5QVVJFX0JBUkNPREUpKSB7CgkgICAgICAgICAgICB2YXIgYml0cyA9IFFSQ29kZVJlYWRlci5leHRyYWN0UHVyZUJpdHMoaW1hZ2UuZ2V0QmxhY2tNYXRyaXgoKSk7CgkgICAgICAgICAgICBkZWNvZGVyUmVzdWx0ID0gdGhpcy5kZWNvZGVyLmRlY29kZUJpdE1hdHJpeChiaXRzLCBoaW50cyk7CgkgICAgICAgICAgICBwb2ludHMgPSBRUkNvZGVSZWFkZXIuTk9fUE9JTlRTOwoJICAgICAgICB9CgkgICAgICAgIGVsc2UgewoJICAgICAgICAgICAgdmFyIGRldGVjdG9yUmVzdWx0ID0gbmV3IERldGVjdG9yXzEuZGVmYXVsdChpbWFnZS5nZXRCbGFja01hdHJpeCgpKS5kZXRlY3QoaGludHMpOwoJICAgICAgICAgICAgZGVjb2RlclJlc3VsdCA9IHRoaXMuZGVjb2Rlci5kZWNvZGVCaXRNYXRyaXgoZGV0ZWN0b3JSZXN1bHQuZ2V0Qml0cygpLCBoaW50cyk7CgkgICAgICAgICAgICBwb2ludHMgPSBkZXRlY3RvclJlc3VsdC5nZXRQb2ludHMoKTsKCSAgICAgICAgfQoJICAgICAgICAvLyBJZiB0aGUgY29kZSB3YXMgbWlycm9yZWQ6IHN3YXAgdGhlIGJvdHRvbS1sZWZ0IGFuZCB0aGUgdG9wLXJpZ2h0IHBvaW50cy4KCSAgICAgICAgaWYgKGRlY29kZXJSZXN1bHQuZ2V0T3RoZXIoKSBpbnN0YW5jZW9mIFFSQ29kZURlY29kZXJNZXRhRGF0YV8xLmRlZmF1bHQpIHsKCSAgICAgICAgICAgIGRlY29kZXJSZXN1bHQuZ2V0T3RoZXIoKS5hcHBseU1pcnJvcmVkQ29ycmVjdGlvbihwb2ludHMpOwoJICAgICAgICB9CgkgICAgICAgIHZhciByZXN1bHQgPSBuZXcgUmVzdWx0XzEuZGVmYXVsdChkZWNvZGVyUmVzdWx0LmdldFRleHQoKSwgZGVjb2RlclJlc3VsdC5nZXRSYXdCeXRlcygpLCB1bmRlZmluZWQsIHBvaW50cywgQmFyY29kZUZvcm1hdF8xLmRlZmF1bHQuUVJfQ09ERSwgdW5kZWZpbmVkKTsKCSAgICAgICAgdmFyIGJ5dGVTZWdtZW50cyA9IGRlY29kZXJSZXN1bHQuZ2V0Qnl0ZVNlZ21lbnRzKCk7CgkgICAgICAgIGlmIChieXRlU2VnbWVudHMgIT09IG51bGwpIHsKCSAgICAgICAgICAgIHJlc3VsdC5wdXRNZXRhZGF0YShSZXN1bHRNZXRhZGF0YVR5cGVfMS5kZWZhdWx0LkJZVEVfU0VHTUVOVFMsIGJ5dGVTZWdtZW50cyk7CgkgICAgICAgIH0KCSAgICAgICAgdmFyIGVjTGV2ZWwgPSBkZWNvZGVyUmVzdWx0LmdldEVDTGV2ZWwoKTsKCSAgICAgICAgaWYgKGVjTGV2ZWwgIT09IG51bGwpIHsKCSAgICAgICAgICAgIHJlc3VsdC5wdXRNZXRhZGF0YShSZXN1bHRNZXRhZGF0YVR5cGVfMS5kZWZhdWx0LkVSUk9SX0NPUlJFQ1RJT05fTEVWRUwsIGVjTGV2ZWwpOwoJICAgICAgICB9CgkgICAgICAgIGlmIChkZWNvZGVyUmVzdWx0Lmhhc1N0cnVjdHVyZWRBcHBlbmQoKSkgewoJICAgICAgICAgICAgcmVzdWx0LnB1dE1ldGFkYXRhKFJlc3VsdE1ldGFkYXRhVHlwZV8xLmRlZmF1bHQuU1RSVUNUVVJFRF9BUFBFTkRfU0VRVUVOQ0UsIGRlY29kZXJSZXN1bHQuZ2V0U3RydWN0dXJlZEFwcGVuZFNlcXVlbmNlTnVtYmVyKCkpOwoJICAgICAgICAgICAgcmVzdWx0LnB1dE1ldGFkYXRhKFJlc3VsdE1ldGFkYXRhVHlwZV8xLmRlZmF1bHQuU1RSVUNUVVJFRF9BUFBFTkRfUEFSSVRZLCBkZWNvZGVyUmVzdWx0LmdldFN0cnVjdHVyZWRBcHBlbmRQYXJpdHkoKSk7CgkgICAgICAgIH0KCSAgICAgICAgcmV0dXJuIHJlc3VsdDsKCSAgICB9OwoJICAgIC8qQE92ZXJyaWRlKi8KCSAgICBRUkNvZGVSZWFkZXIucHJvdG90eXBlLnJlc2V0ID0gZnVuY3Rpb24gKCkgewoJICAgICAgICAvLyBkbyBub3RoaW5nCgkgICAgfTsKCSAgICAvKioKCSAgICAgKiBUaGlzIG1ldGhvZCBkZXRlY3RzIGEgY29kZSBpbiBhICJwdXJlIiBpbWFnZSAtLSB0aGF0IGlzLCBwdXJlIG1vbm9jaHJvbWUgaW1hZ2UKCSAgICAgKiB3aGljaCBjb250YWlucyBvbmx5IGFuIHVucm90YXRlZCwgdW5za2V3ZWQsIGltYWdlIG9mIGEgY29kZSwgd2l0aCBzb21lIHdoaXRlIGJvcmRlcgoJICAgICAqIGFyb3VuZCBpdC4gVGhpcyBpcyBhIHNwZWNpYWxpemVkIG1ldGhvZCB0aGF0IHdvcmtzIGV4Y2VwdGlvbmFsbHkgZmFzdCBpbiB0aGlzIHNwZWNpYWwKCSAgICAgKiBjYXNlLgoJICAgICAqCgkgICAgICogQHNlZSBjb20uZ29vZ2xlLnp4aW5nLmRhdGFtYXRyaXguRGF0YU1hdHJpeFJlYWRlciNleHRyYWN0UHVyZUJpdHMoQml0TWF0cml4KQoJICAgICAqLwoJICAgIFFSQ29kZVJlYWRlci5leHRyYWN0UHVyZUJpdHMgPSBmdW5jdGlvbiAoaW1hZ2UpIHsKCSAgICAgICAgdmFyIGxlZnRUb3BCbGFjayA9IGltYWdlLmdldFRvcExlZnRPbkJpdCgpOwoJICAgICAgICB2YXIgcmlnaHRCb3R0b21CbGFjayA9IGltYWdlLmdldEJvdHRvbVJpZ2h0T25CaXQoKTsKCSAgICAgICAgaWYgKGxlZnRUb3BCbGFjayA9PT0gbnVsbCB8fCByaWdodEJvdHRvbUJsYWNrID09PSBudWxsKSB7CgkgICAgICAgICAgICB0aHJvdyBuZXcgTm90Rm91bmRFeGNlcHRpb25fMS5kZWZhdWx0KCk7CgkgICAgICAgIH0KCSAgICAgICAgdmFyIG1vZHVsZVNpemUgPSB0aGlzLm1vZHVsZVNpemUobGVmdFRvcEJsYWNrLCBpbWFnZSk7CgkgICAgICAgIHZhciB0b3AgPSBsZWZ0VG9wQmxhY2tbMV07CgkgICAgICAgIHZhciBib3R0b20gPSByaWdodEJvdHRvbUJsYWNrWzFdOwoJICAgICAgICB2YXIgbGVmdCA9IGxlZnRUb3BCbGFja1swXTsKCSAgICAgICAgdmFyIHJpZ2h0ID0gcmlnaHRCb3R0b21CbGFja1swXTsKCSAgICAgICAgLy8gU2FuaXR5IGNoZWNrIQoJICAgICAgICBpZiAobGVmdCA+PSByaWdodCB8fCB0b3AgPj0gYm90dG9tKSB7CgkgICAgICAgICAgICB0aHJvdyBuZXcgTm90Rm91bmRFeGNlcHRpb25fMS5kZWZhdWx0KCk7CgkgICAgICAgIH0KCSAgICAgICAgaWYgKGJvdHRvbSAtIHRvcCAhPT0gcmlnaHQgLSBsZWZ0KSB7CgkgICAgICAgICAgICAvLyBTcGVjaWFsIGNhc2UsIHdoZXJlIGJvdHRvbS1yaWdodCBtb2R1bGUgd2Fzbid0IGJsYWNrIHNvIHdlIGZvdW5kIHNvbWV0aGluZyBlbHNlIGluIHRoZSBsYXN0IHJvdwoJICAgICAgICAgICAgLy8gQXNzdW1lIGl0J3MgYSBzcXVhcmUsIHNvIHVzZSBoZWlnaHQgYXMgdGhlIHdpZHRoCgkgICAgICAgICAgICByaWdodCA9IGxlZnQgKyAoYm90dG9tIC0gdG9wKTsKCSAgICAgICAgICAgIGlmIChyaWdodCA+PSBpbWFnZS5nZXRXaWR0aCgpKSB7CgkgICAgICAgICAgICAgICAgLy8gQWJvcnQgaWYgdGhhdCB3b3VsZCBub3QgbWFrZSBzZW5zZSAtLSBvZmYgaW1hZ2UKCSAgICAgICAgICAgICAgICB0aHJvdyBuZXcgTm90Rm91bmRFeGNlcHRpb25fMS5kZWZhdWx0KCk7CgkgICAgICAgICAgICB9CgkgICAgICAgIH0KCSAgICAgICAgdmFyIG1hdHJpeFdpZHRoID0gTWF0aC5yb3VuZCgocmlnaHQgLSBsZWZ0ICsgMSkgLyBtb2R1bGVTaXplKTsKCSAgICAgICAgdmFyIG1hdHJpeEhlaWdodCA9IE1hdGgucm91bmQoKGJvdHRvbSAtIHRvcCArIDEpIC8gbW9kdWxlU2l6ZSk7CgkgICAgICAgIGlmIChtYXRyaXhXaWR0aCA8PSAwIHx8IG1hdHJpeEhlaWdodCA8PSAwKSB7CgkgICAgICAgICAgICB0aHJvdyBuZXcgTm90Rm91bmRFeGNlcHRpb25fMS5kZWZhdWx0KCk7CgkgICAgICAgIH0KCSAgICAgICAgaWYgKG1hdHJpeEhlaWdodCAhPT0gbWF0cml4V2lkdGgpIHsKCSAgICAgICAgICAgIC8vIE9ubHkgcG9zc2libHkgZGVjb2RlIHNxdWFyZSByZWdpb25zCgkgICAgICAgICAgICB0aHJvdyBuZXcgTm90Rm91bmRFeGNlcHRpb25fMS5kZWZhdWx0KCk7CgkgICAgICAgIH0KCSAgICAgICAgLy8gUHVzaCBpbiB0aGUgImJvcmRlciIgYnkgaGFsZiB0aGUgbW9kdWxlIHdpZHRoIHNvIHRoYXQgd2Ugc3RhcnQKCSAgICAgICAgLy8gc2FtcGxpbmcgaW4gdGhlIG1pZGRsZSBvZiB0aGUgbW9kdWxlLiBKdXN0IGluIGNhc2UgdGhlIGltYWdlIGlzIGEKCSAgICAgICAgLy8gbGl0dGxlIG9mZiwgdGhpcyB3aWxsIGhlbHAgcmVjb3Zlci4KCSAgICAgICAgdmFyIG51ZGdlID0gLyooaW50KSAqLyBNYXRoLmZsb29yKG1vZHVsZVNpemUgLyAyLjApOwoJICAgICAgICB0b3AgKz0gbnVkZ2U7CgkgICAgICAgIGxlZnQgKz0gbnVkZ2U7CgkgICAgICAgIC8vIEJ1dCBjYXJlZnVsIHRoYXQgdGhpcyBkb2VzIG5vdCBzYW1wbGUgb2ZmIHRoZSBlZGdlCgkgICAgICAgIC8vICJyaWdodCIgaXMgdGhlIGZhcnRoZXN0LXJpZ2h0IHZhbGlkIHBpeGVsIGxvY2F0aW9uIC0tIHJpZ2h0KzEgaXMgbm90IG5lY2Vzc2FyaWx5CgkgICAgICAgIC8vIFRoaXMgaXMgcG9zaXRpdmUgYnkgaG93IG11Y2ggdGhlIGlubmVyIHggbG9vcCBiZWxvdyB3b3VsZCBiZSB0b28gbGFyZ2UKCSAgICAgICAgdmFyIG51ZGdlZFRvb0ZhclJpZ2h0ID0gbGVmdCArIC8qKGludCkgKi8gTWF0aC5mbG9vcigobWF0cml4V2lkdGggLSAxKSAqIG1vZHVsZVNpemUpIC0gcmlnaHQ7CgkgICAgICAgIGlmIChudWRnZWRUb29GYXJSaWdodCA+IDApIHsKCSAgICAgICAgICAgIGlmIChudWRnZWRUb29GYXJSaWdodCA+IG51ZGdlKSB7CgkgICAgICAgICAgICAgICAgLy8gTmVpdGhlciB3YXkgZml0czsgYWJvcnQKCSAgICAgICAgICAgICAgICB0aHJvdyBuZXcgTm90Rm91bmRFeGNlcHRpb25fMS5kZWZhdWx0KCk7CgkgICAgICAgICAgICB9CgkgICAgICAgICAgICBsZWZ0IC09IG51ZGdlZFRvb0ZhclJpZ2h0OwoJICAgICAgICB9CgkgICAgICAgIC8vIFNlZSBsb2dpYyBhYm92ZQoJICAgICAgICB2YXIgbnVkZ2VkVG9vRmFyRG93biA9IHRvcCArIC8qKGludCkgKi8gTWF0aC5mbG9vcigobWF0cml4SGVpZ2h0IC0gMSkgKiBtb2R1bGVTaXplKSAtIGJvdHRvbTsKCSAgICAgICAgaWYgKG51ZGdlZFRvb0ZhckRvd24gPiAwKSB7CgkgICAgICAgICAgICBpZiAobnVkZ2VkVG9vRmFyRG93biA+IG51ZGdlKSB7CgkgICAgICAgICAgICAgICAgLy8gTmVpdGhlciB3YXkgZml0czsgYWJvcnQKCSAgICAgICAgICAgICAgICB0aHJvdyBuZXcgTm90Rm91bmRFeGNlcHRpb25fMS5kZWZhdWx0KCk7CgkgICAgICAgICAgICB9CgkgICAgICAgICAgICB0b3AgLT0gbnVkZ2VkVG9vRmFyRG93bjsKCSAgICAgICAgfQoJICAgICAgICAvLyBOb3cganVzdCByZWFkIG9mZiB0aGUgYml0cwoJICAgICAgICB2YXIgYml0cyA9IG5ldyBCaXRNYXRyaXhfMS5kZWZhdWx0KG1hdHJpeFdpZHRoLCBtYXRyaXhIZWlnaHQpOwoJICAgICAgICBmb3IgKHZhciB5ID0gMDsgeSA8IG1hdHJpeEhlaWdodDsgeSsrKSB7CgkgICAgICAgICAgICB2YXIgaU9mZnNldCA9IHRvcCArIC8qKGludCkgKi8gTWF0aC5mbG9vcih5ICogbW9kdWxlU2l6ZSk7CgkgICAgICAgICAgICBmb3IgKHZhciB4ID0gMDsgeCA8IG1hdHJpeFdpZHRoOyB4KyspIHsKCSAgICAgICAgICAgICAgICBpZiAoaW1hZ2UuZ2V0KGxlZnQgKyAvKihpbnQpICovIE1hdGguZmxvb3IoeCAqIG1vZHVsZVNpemUpLCBpT2Zmc2V0KSkgewoJICAgICAgICAgICAgICAgICAgICBiaXRzLnNldCh4LCB5KTsKCSAgICAgICAgICAgICAgICB9CgkgICAgICAgICAgICB9CgkgICAgICAgIH0KCSAgICAgICAgcmV0dXJuIGJpdHM7CgkgICAgfTsKCSAgICBRUkNvZGVSZWFkZXIubW9kdWxlU2l6ZSA9IGZ1bmN0aW9uIChsZWZ0VG9wQmxhY2ssIGltYWdlKSB7CgkgICAgICAgIHZhciBoZWlnaHQgPSBpbWFnZS5nZXRIZWlnaHQoKTsKCSAgICAgICAgdmFyIHdpZHRoID0gaW1hZ2UuZ2V0V2lkdGgoKTsKCSAgICAgICAgdmFyIHggPSBsZWZ0VG9wQmxhY2tbMF07CgkgICAgICAgIHZhciB5ID0gbGVmdFRvcEJsYWNrWzFdOwoJICAgICAgICB2YXIgaW5CbGFjayA9IHRydWU7CgkgICAgICAgIHZhciB0cmFuc2l0aW9ucyA9IDA7CgkgICAgICAgIHdoaWxlICh4IDwgd2lkdGggJiYgeSA8IGhlaWdodCkgewoJICAgICAgICAgICAgaWYgKGluQmxhY2sgIT09IGltYWdlLmdldCh4LCB5KSkgewoJICAgICAgICAgICAgICAgIGlmICgrK3RyYW5zaXRpb25zID09PSA1KSB7CgkgICAgICAgICAgICAgICAgICAgIGJyZWFrOwoJICAgICAgICAgICAgICAgIH0KCSAgICAgICAgICAgICAgICBpbkJsYWNrID0gIWluQmxhY2s7CgkgICAgICAgICAgICB9CgkgICAgICAgICAgICB4Kys7CgkgICAgICAgICAgICB5Kys7CgkgICAgICAgIH0KCSAgICAgICAgaWYgKHggPT09IHdpZHRoIHx8IHkgPT09IGhlaWdodCkgewoJICAgICAgICAgICAgdGhyb3cgbmV3IE5vdEZvdW5kRXhjZXB0aW9uXzEuZGVmYXVsdCgpOwoJICAgICAgICB9CgkgICAgICAgIHJldHVybiAoeCAtIGxlZnRUb3BCbGFja1swXSkgLyA3LjA7CgkgICAgfTsKCSAgICBRUkNvZGVSZWFkZXIuTk9fUE9JTlRTID0gbmV3IEFycmF5KCk7CgkgICAgcmV0dXJuIFFSQ29kZVJlYWRlcjsKCX0oKSk7Cgl2YXIgX2RlZmF1bHQgPSBRUkNvZGVSZWFkZXIkMS5kZWZhdWx0ID0gUVJDb2RlUmVhZGVyOwoKCXZhciB0b0dyYXlzY2FsZUJ1ZmZlciA9IGZ1bmN0aW9uIHRvR3JheXNjYWxlQnVmZmVyKGltYWdlQnVmZmVyLCB3aWR0aCwgaGVpZ2h0KSB7CgkgIHZhciBncmF5c2NhbGVCdWZmZXIgPSBuZXcgVWludDhDbGFtcGVkQXJyYXkod2lkdGggKiBoZWlnaHQpOwoKCSAgZm9yICh2YXIgaSA9IDAsIGogPSAwLCBsZW5ndGhfMSA9IGltYWdlQnVmZmVyLmxlbmd0aDsgaSA8IGxlbmd0aF8xOyBpICs9IDQsIGorKykgewoJICAgIHZhciBncmF5ID0gdm9pZCAwOwoJICAgIHZhciBhbHBoYSA9IGltYWdlQnVmZmVyW2kgKyAzXTsgLy8gVGhlIGNvbG9yIG9mIGZ1bGx5LXRyYW5zcGFyZW50IHBpeGVscyBpcyBpcnJlbGV2YW50LiBUaGV5IGFyZSBvZnRlbiwgdGVjaG5pY2FsbHksIGZ1bGx5LXRyYW5zcGFyZW50CgkgICAgLy8gYmxhY2sgKDAgYWxwaGEsIGFuZCB0aGVuIDAgUkdCKS4gVGhleSBhcmUgb2Z0ZW4gdXNlZCwgb2YgY291cnNlIGFzIHRoZSAid2hpdGUiIGFyZWEgaW4gYQoJICAgIC8vIGJhcmNvZGUgaW1hZ2UuIEZvcmNlIGFueSBzdWNoIHBpeGVsIHRvIGJlIHdoaXRlOgoKCSAgICBpZiAoYWxwaGEgPT09IDApIHsKCSAgICAgIGdyYXkgPSAweEZGOwoJICAgIH0gZWxzZSB7CgkgICAgICB2YXIgcGl4ZWxSID0gaW1hZ2VCdWZmZXJbaV07CgkgICAgICB2YXIgcGl4ZWxHID0gaW1hZ2VCdWZmZXJbaSArIDFdOwoJICAgICAgdmFyIHBpeGVsQiA9IGltYWdlQnVmZmVyW2kgKyAyXTsgLy8gLjI5OVIgKyAwLjU4N0cgKyAwLjExNEIgKFlVVi9ZSVEgZm9yIFBBTCBhbmQgTlRTQyksCgkgICAgICAvLyAoMzA2KlIpID4+IDEwIGlzIGFwcHJveGltYXRlbHkgZXF1YWwgdG8gUiowLjI5OSwgYW5kIHNvIG9uLgoJICAgICAgLy8gMHgyMDAgPj4gMTAgaXMgMC41LCBpdCBpbXBsZW1lbnRzIHJvdW5kaW5nLgoKCSAgICAgIGdyYXkgPSAzMDYgKiBwaXhlbFIgKyA2MDEgKiBwaXhlbEcgKyAxMTcgKiBwaXhlbEIgKyAweDIwMCA+PiAxMDsKCSAgICB9CgoJICAgIGdyYXlzY2FsZUJ1ZmZlcltqXSA9IGdyYXk7CgkgIH0KCgkgIHJldHVybiBncmF5c2NhbGVCdWZmZXI7Cgl9OwoKCXZhciByZWFkZXIgPSBuZXcgX2RlZmF1bHQoKTsKCXNlbGYuYWRkRXZlbnRMaXN0ZW5lcignbWVzc2FnZScsIGZ1bmN0aW9uIChlKSB7CgkgIC8vIGVzbGludC1kaXNhYmxlLWxpbmUgbm8tcmVzdHJpY3RlZC1nbG9iYWxzCgkgIHRyeSB7CgkgICAgdmFyIGx1bWluYW5jZXMgPSB0b0dyYXlzY2FsZUJ1ZmZlcihlLmRhdGEuZGF0YSwgZS5kYXRhLndpZHRoLCBlLmRhdGEuaGVpZ2h0KTsKCSAgICB2YXIgbHVtaW5hbmNlU291cmNlID0gbmV3IF9kZWZhdWx0JDEobHVtaW5hbmNlcywgZS5kYXRhLndpZHRoLCBlLmRhdGEuaGVpZ2h0KTsKCSAgICB2YXIgaHlicmlkQmluYXJpemVyID0gbmV3IF9kZWZhdWx0JDIobHVtaW5hbmNlU291cmNlKTsKCSAgICB2YXIgYmluYXJ5Qml0bWFwID0gbmV3IF9kZWZhdWx0JDMoaHlicmlkQmluYXJpemVyKTsKCSAgICB2YXIgZGVjb2RlZCA9IHJlYWRlci5kZWNvZGUoYmluYXJ5Qml0bWFwKTsKCSAgICBwb3N0TWVzc2FnZShkZWNvZGVkKTsKCSAgfSBjYXRjaCAoZXJyKSB7CgkgICAgcG9zdE1lc3NhZ2UobnVsbCk7CgkgIH0KCX0pOwoKfSkoKTsKCg==",N=null,K=!1,function(e){return x=x||H(F,N,K),new Worker(x,e)}),z=["constraints","onError","onLoad","onScan","resolution","qrArea"];function E(e,g){var l=Object.keys(e);if(Object.getOwnPropertySymbols){var t=Object.getOwnPropertySymbols(e);g&&(t=t.filter((function(g){return Object.getOwnPropertyDescriptor(e,g).enumerable}))),l.push.apply(l,t)}return l}function L(e){for(var g=1;g<arguments.length;g++){var l=null!=arguments[g]?arguments[g]:{};g%2?E(Object(l),!0).forEach((function(g){n(e,g,l[g])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(l)):E(Object(l)).forEach((function(g){Object.defineProperty(e,g,Object.getOwnPropertyDescriptor(l,g))}))}return e}var U=function(e){e&&(e.getVideoTracks&&e.getAudioTracks?(e.getVideoTracks().forEach((function(g){e.removeTrack(g),g.stop()})),e.getAudioTracks().forEach((function(g){e.removeTrack(g),g.stop()}))):e.stop())},Q=function(e){var g=e.constraints,n=e.onError,o=e.onLoad,r=e.onScan,a=e.resolution,i=e.qrArea,c=C(e,z),s=l.useRef(null),d=l.useRef(null),u=l.useRef(document.createElement("canvas")),A=l.useRef(null),m=l.useRef(),b=I(l.useState(null),2),p=b[0],Z=b[1],h=l.useRef(!1),G=l.useRef();l.useEffect((function(){G.current=new M;var e=G.current;return e.onmessage=function(e){r&&r(e.data?L(L({},e.data),{},{canvas:u.current}):null),h.current=!1},function(){e.terminate()}}),[r]);var y=JSON.stringify(i),B=l.useCallback((function(){var e=JSON.parse(y),g=G.current,l=d.current&&d.current.readyState===d.current.HAVE_ENOUGH_DATA;if(!h.current&&l){h.current=!0;var t,n=d.current.videoWidth,o=d.current.videoHeight,I=n>o?n:o,C=Math.floor(a/I*100)/100;o=Math.floor(C*o),n=Math.floor(C*n),u.current.width=n,u.current.height=o,A.current=u.current.getContext("2d"),A.current.drawImage(d.current,0,0,n,o),t=e&&2===e.length&&e[0]>0&&e[1]>0?A.current.getImageData(Math.floor((n-e[0])/2),Math.floor((o-e[1])/2),e[0],e[1]):A.current.getImageData(0,0,n,o),g.postMessage(t)}m.current=requestAnimationFrame(B)}),[a,y]),S=JSON.stringify(g);return l.useEffect((function(){var e=JSON.parse(S),g=!0;return navigator.mediaDevices.getUserMedia(e).then((function(e){if(g){s.current=e;try{d.current&&(d.current.srcObject=e,d.current.setAttribute("playsinline",!0))}catch(g){Z(window.URL.createObjectURL(e))}o&&o(),m.current=requestAnimationFrame(B)}else U(e)})).catch((function(e){return g?n(e):null})),function(){cancelAnimationFrame(m.current),g=!1,U(s.current),p&&window.URL.revokeObjectURL(p)}}),[B,S,n,o,p]),l.createElement("video",t({autoPlay:!0,playsInline:!0,src:p,ref:d},c))};return Q.propTypes={constraints:Y.object,onError:Y.func.isRequired,onLoad:Y.func,onScan:Y.func.isRequired,resolution:Y.number,qrArea:Y.array},Q.defaultProps={constraints:{audio:!1,video:!0},resolution:640,qrArea:[]},Q}(l(7294))},5251:(e,g,l)=>{"use strict";var t=l(7294),n=Symbol.for("react.element"),o=Symbol.for("react.fragment"),I=Object.prototype.hasOwnProperty,C=t.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED.ReactCurrentOwner,r={key:!0,ref:!0,__self:!0,__source:!0};function a(e,g,l){var t,o={},a=null,i=null;for(t in void 0!==l&&(a=""+l),void 0!==g.key&&(a=""+g.key),void 0!==g.ref&&(i=g.ref),g)I.call(g,t)&&!r.hasOwnProperty(t)&&(o[t]=g[t]);if(e&&e.defaultProps)for(t in g=e.defaultProps)void 0===o[t]&&(o[t]=g[t]);return{$$typeof:n,type:e,key:a,ref:i,props:o,_owner:C.current}}g.Fragment=o,g.jsx=a,g.jsxs=a},2408:(e,g)=>{"use strict";var l=Symbol.for("react.element"),t=Symbol.for("react.portal"),n=Symbol.for("react.fragment"),o=Symbol.for("react.strict_mode"),I=Symbol.for("react.profiler"),C=Symbol.for("react.provider"),r=Symbol.for("react.context"),a=Symbol.for("react.forward_ref"),i=Symbol.for("react.suspense"),c=Symbol.for("react.memo"),s=Symbol.for("react.lazy"),d=Symbol.iterator,u={isMounted:function(){return!1},enqueueForceUpdate:function(){},enqueueReplaceState:function(){},enqueueSetState:function(){}},A=Object.assign,m={};function b(e,g,l){this.props=e,this.context=g,this.refs=m,this.updater=l||u}function p(){}function Z(e,g,l){this.props=e,this.context=g,this.refs=m,this.updater=l||u}b.prototype.isReactComponent={},b.prototype.setState=function(e,g){if("object"!=typeof e&&"function"!=typeof e&&null!=e)throw Error("setState(...): takes an object of state variables to update or a function which returns an object of state variables.");this.updater.enqueueSetState(this,e,g,"setState")},b.prototype.forceUpdate=function(e){this.updater.enqueueForceUpdate(this,e,"forceUpdate")},p.prototype=b.prototype;var h=Z.prototype=new p;h.constructor=Z,A(h,b.prototype),h.isPureReactComponent=!0;var G=Array.isArray,y=Object.prototype.hasOwnProperty,B={current:null},S={key:!0,ref:!0,__self:!0,__source:!0};function V(e,g,t){var n,o={},I=null,C=null;if(null!=g)for(n in void 0!==g.ref&&(C=g.ref),void 0!==g.key&&(I=""+g.key),g)y.call(g,n)&&!S.hasOwnProperty(n)&&(o[n]=g[n]);var r=arguments.length-2;if(1===r)o.children=t;else if(1<r){for(var a=Array(r),i=0;i<r;i++)a[i]=arguments[i+2];o.children=a}if(e&&e.defaultProps)for(n in r=e.defaultProps)void 0===o[n]&&(o[n]=r[n]);return{$$typeof:l,type:e,key:I,ref:C,props:o,_owner:B.current}}function W(e){return"object"==typeof e&&null!==e&&e.$$typeof===l}var R=/\/+/g;function f(e,g){return"object"==typeof e&&null!==e&&null!=e.key?function(e){var g={"=":"=0",":":"=2"};return"$"+e.replace(/[=:]/g,(function(e){return g[e]}))}(""+e.key):g.toString(36)}function v(e,g,n,o,I){var C=typeof e;"undefined"!==C&&"boolean"!==C||(e=null);var r=!1;if(null===e)r=!0;else switch(C){case"string":case"number":r=!0;break;case"object":switch(e.$$typeof){case l:case t:r=!0}}if(r)return I=I(r=e),e=""===o?"."+f(r,0):o,G(I)?(n="",null!=e&&(n=e.replace(R,"$&/")+"/"),v(I,g,n,"",(function(e){return e}))):null!=I&&(W(I)&&(I=function(e,g){return{$$typeof:l,type:e.type,key:g,ref:e.ref,props:e.props,_owner:e._owner}}(I,n+(!I.key||r&&r.key===I.key?"":(""+I.key).replace(R,"$&/")+"/")+e)),g.push(I)),1;if(r=0,o=""===o?".":o+":",G(e))for(var a=0;a<e.length;a++){var i=o+f(C=e[a],a);r+=v(C,g,n,i,I)}else if(i=function(e){return null===e||"object"!=typeof e?null:"function"==typeof(e=d&&e[d]||e["@@iterator"])?e:null}(e),"function"==typeof i)for(e=i.call(e),a=0;!(C=e.next()).done;)r+=v(C=C.value,g,n,i=o+f(C,a++),I);else if("object"===C)throw g=String(e),Error("Objects are not valid as a React child (found: "+("[object Object]"===g?"object with keys {"+Object.keys(e).join(", ")+"}":g)+"). If you meant to render a collection of children, use an array instead.");return r}function k(e,g,l){if(null==e)return e;var t=[],n=0;return v(e,t,"","",(function(e){return g.call(l,e,n++)})),t}function X(e){if(-1===e._status){var g=e._result;(g=g()).then((function(g){0!==e._status&&-1!==e._status||(e._status=1,e._result=g)}),(function(g){0!==e._status&&-1!==e._status||(e._status=2,e._result=g)})),-1===e._status&&(e._status=0,e._result=g)}if(1===e._status)return e._result.default;throw e._result}var J={current:null},w={transition:null},Y={ReactCurrentDispatcher:J,ReactCurrentBatchConfig:w,ReactCurrentOwner:B};g.Children={map:k,forEach:function(e,g,l){k(e,(function(){g.apply(this,arguments)}),l)},count:function(e){var g=0;return k(e,(function(){g++})),g},toArray:function(e){return k(e,(function(e){return e}))||[]},only:function(e){if(!W(e))throw Error("React.Children.only expected to receive a single React element child.");return e}},g.Component=b,g.Fragment=n,g.Profiler=I,g.PureComponent=Z,g.StrictMode=o,g.Suspense=i,g.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=Y,g.cloneElement=function(e,g,t){if(null==e)throw Error("React.cloneElement(...): The argument must be a React element, but you passed "+e+".");var n=A({},e.props),o=e.key,I=e.ref,C=e._owner;if(null!=g){if(void 0!==g.ref&&(I=g.ref,C=B.current),void 0!==g.key&&(o=""+g.key),e.type&&e.type.defaultProps)var r=e.type.defaultProps;for(a in g)y.call(g,a)&&!S.hasOwnProperty(a)&&(n[a]=void 0===g[a]&&void 0!==r?r[a]:g[a])}var a=arguments.length-2;if(1===a)n.children=t;else if(1<a){r=Array(a);for(var i=0;i<a;i++)r[i]=arguments[i+2];n.children=r}return{$$typeof:l,type:e.type,key:o,ref:I,props:n,_owner:C}},g.createContext=function(e){return(e={$$typeof:r,_currentValue:e,_currentValue2:e,_threadCount:0,Provider:null,Consumer:null,_defaultValue:null,_globalName:null}).Provider={$$typeof:C,_context:e},e.Consumer=e},g.createElement=V,g.createFactory=function(e){var g=V.bind(null,e);return g.type=e,g},g.createRef=function(){return{current:null}},g.forwardRef=function(e){return{$$typeof:a,render:e}},g.isValidElement=W,g.lazy=function(e){return{$$typeof:s,_payload:{_status:-1,_result:e},_init:X}},g.memo=function(e,g){return{$$typeof:c,type:e,compare:void 0===g?null:g}},g.startTransition=function(e){var g=w.transition;w.transition={};try{e()}finally{w.transition=g}},g.unstable_act=function(){throw Error("act(...) is not supported in production builds of React.")},g.useCallback=function(e,g){return J.current.useCallback(e,g)},g.useContext=function(e){return J.current.useContext(e)},g.useDebugValue=function(){},g.useDeferredValue=function(e){return J.current.useDeferredValue(e)},g.useEffect=function(e,g){return J.current.useEffect(e,g)},g.useId=function(){return J.current.useId()},g.useImperativeHandle=function(e,g,l){return J.current.useImperativeHandle(e,g,l)},g.useInsertionEffect=function(e,g){return J.current.useInsertionEffect(e,g)},g.useLayoutEffect=function(e,g){return J.current.useLayoutEffect(e,g)},g.useMemo=function(e,g){return J.current.useMemo(e,g)},g.useReducer=function(e,g,l){return J.current.useReducer(e,g,l)},g.useRef=function(e){return J.current.useRef(e)},g.useState=function(e){return J.current.useState(e)},g.useSyncExternalStore=function(e,g,l){return J.current.useSyncExternalStore(e,g,l)},g.useTransition=function(){return J.current.useTransition()},g.version="18.2.0"},7294:(e,g,l)=>{"use strict";e.exports=l(2408)},5893:(e,g,l)=>{"use strict";e.exports=l(5251)},53:(e,g)=>{"use strict";function l(e,g){var l=e.length;e.push(g);e:for(;0<l;){var t=l-1>>>1,n=e[t];if(!(0<o(n,g)))break e;e[t]=g,e[l]=n,l=t}}function t(e){return 0===e.length?null:e[0]}function n(e){if(0===e.length)return null;var g=e[0],l=e.pop();if(l!==g){e[0]=l;e:for(var t=0,n=e.length,I=n>>>1;t<I;){var C=2*(t+1)-1,r=e[C],a=C+1,i=e[a];if(0>o(r,l))a<n&&0>o(i,r)?(e[t]=i,e[a]=l,t=a):(e[t]=r,e[C]=l,t=C);else{if(!(a<n&&0>o(i,l)))break e;e[t]=i,e[a]=l,t=a}}}return g}function o(e,g){var l=e.sortIndex-g.sortIndex;return 0!==l?l:e.id-g.id}if("object"==typeof performance&&"function"==typeof performance.now){var I=performance;g.unstable_now=function(){return I.now()}}else{var C=Date,r=C.now();g.unstable_now=function(){return C.now()-r}}var a=[],i=[],c=1,s=null,d=3,u=!1,A=!1,m=!1,b="function"==typeof setTimeout?setTimeout:null,p="function"==typeof clearTimeout?clearTimeout:null,Z="undefined"!=typeof setImmediate?setImmediate:null;function h(e){for(var g=t(i);null!==g;){if(null===g.callback)n(i);else{if(!(g.startTime<=e))break;n(i),g.sortIndex=g.expirationTime,l(a,g)}g=t(i)}}function G(e){if(m=!1,h(e),!A)if(null!==t(a))A=!0,w(y);else{var g=t(i);null!==g&&Y(G,g.startTime-e)}}function y(e,l){A=!1,m&&(m=!1,p(W),W=-1),u=!0;var o=d;try{for(h(l),s=t(a);null!==s&&(!(s.expirationTime>l)||e&&!v());){var I=s.callback;if("function"==typeof I){s.callback=null,d=s.priorityLevel;var C=I(s.expirationTime<=l);l=g.unstable_now(),"function"==typeof C?s.callback=C:s===t(a)&&n(a),h(l)}else n(a);s=t(a)}if(null!==s)var r=!0;else{var c=t(i);null!==c&&Y(G,c.startTime-l),r=!1}return r}finally{s=null,d=o,u=!1}}"undefined"!=typeof navigator&&void 0!==navigator.scheduling&&void 0!==navigator.scheduling.isInputPending&&navigator.scheduling.isInputPending.bind(navigator.scheduling);var B,S=!1,V=null,W=-1,R=5,f=-1;function v(){return!(g.unstable_now()-f<R)}function k(){if(null!==V){var e=g.unstable_now();f=e;var l=!0;try{l=V(!0,e)}finally{l?B():(S=!1,V=null)}}else S=!1}if("function"==typeof Z)B=function(){Z(k)};else if("undefined"!=typeof MessageChannel){var X=new MessageChannel,J=X.port2;X.port1.onmessage=k,B=function(){J.postMessage(null)}}else B=function(){b(k,0)};function w(e){V=e,S||(S=!0,B())}function Y(e,l){W=b((function(){e(g.unstable_now())}),l)}g.unstable_IdlePriority=5,g.unstable_ImmediatePriority=1,g.unstable_LowPriority=4,g.unstable_NormalPriority=3,g.unstable_Profiling=null,g.unstable_UserBlockingPriority=2,g.unstable_cancelCallback=function(e){e.callback=null},g.unstable_continueExecution=function(){A||u||(A=!0,w(y))},g.unstable_forceFrameRate=function(e){0>e||125<e?console.error("forceFrameRate takes a positive int between 0 and 125, forcing frame rates higher than 125 fps is not supported"):R=0<e?Math.floor(1e3/e):5},g.unstable_getCurrentPriorityLevel=function(){return d},g.unstable_getFirstCallbackNode=function(){return t(a)},g.unstable_next=function(e){switch(d){case 1:case 2:case 3:var g=3;break;default:g=d}var l=d;d=g;try{return e()}finally{d=l}},g.unstable_pauseExecution=function(){},g.unstable_requestPaint=function(){},g.unstable_runWithPriority=function(e,g){switch(e){case 1:case 2:case 3:case 4:case 5:break;default:e=3}var l=d;d=e;try{return g()}finally{d=l}},g.unstable_scheduleCallback=function(e,n,o){var I=g.unstable_now();switch(o="object"==typeof o&&null!==o&&"number"==typeof(o=o.delay)&&0<o?I+o:I,e){case 1:var C=-1;break;case 2:C=250;break;case 5:C=1073741823;break;case 4:C=1e4;break;default:C=5e3}return e={id:c++,callback:n,priorityLevel:e,startTime:o,expirationTime:C=o+C,sortIndex:-1},o>I?(e.sortIndex=o,l(i,e),null===t(a)&&e===t(i)&&(m?(p(W),W=-1):m=!0,Y(G,o-I))):(e.sortIndex=C,l(a,e),A||u||(A=!0,w(y))),e},g.unstable_shouldYield=v,g.unstable_wrapCallback=function(e){var g=d;return function(){var l=d;d=g;try{return e.apply(this,arguments)}finally{d=l}}}},3840:(e,g,l)=>{"use strict";e.exports=l(53)},4836:e=>{e.exports=function(e){return e&&e.__esModule?e:{default:e}},e.exports.__esModule=!0,e.exports.default=e.exports},7462:(e,g,l)=>{"use strict";function t(){return t=Object.assign?Object.assign.bind():function(e){for(var g=1;g<arguments.length;g++){var l=arguments[g];for(var t in l)Object.prototype.hasOwnProperty.call(l,t)&&(e[t]=l[t])}return e},t.apply(this,arguments)}l.d(g,{Z:()=>t})},3366:(e,g,l)=>{"use strict";function t(e,g){if(null==e)return{};var l,t,n={},o=Object.keys(e);for(t=0;t<o.length;t++)l=o[t],g.indexOf(l)>=0||(n[l]=e[l]);return n}l.d(g,{Z:()=>t})},512:(e,g,l)=>{"use strict";function t(e){var g,l,n="";if("string"==typeof e||"number"==typeof e)n+=e;else if("object"==typeof e)if(Array.isArray(e)){var o=e.length;for(g=0;g<o;g++)e[g]&&(l=t(e[g]))&&(n&&(n+=" "),n+=l)}else for(l in e)e[l]&&(n&&(n+=" "),n+=l);return n}l.d(g,{Z:()=>n});const n=function(){for(var e,g,l=0,n="",o=arguments.length;l<o;l++)(e=arguments[l])&&(g=t(e))&&(n&&(n+=" "),n+=g);return n}}},t={};function n(e){var g=t[e];if(void 0!==g)return g.exports;var o=t[e]={exports:{}};return l[e].call(o.exports,o,o.exports,n),o.exports}n.n=e=>{var g=e&&e.__esModule?()=>e.default:()=>e;return n.d(g,{a:g}),g},g=Object.getPrototypeOf?e=>Object.getPrototypeOf(e):e=>e.__proto__,n.t=function(l,t){if(1&t&&(l=this(l)),8&t)return l;if("object"==typeof l&&l){if(4&t&&l.__esModule)return l;if(16&t&&"function"==typeof l.then)return l}var o=Object.create(null);n.r(o);var I={};e=e||[null,g({}),g([]),g(g)];for(var C=2&t&&l;"object"==typeof C&&!~e.indexOf(C);C=g(C))Object.getOwnPropertyNames(C).forEach((e=>I[e]=()=>l[e]));return I.default=()=>l,n.d(o,I),o},n.d=(e,g)=>{for(var l in g)n.o(g,l)&&!n.o(e,l)&&Object.defineProperty(e,l,{enumerable:!0,get:g[l]})},n.o=(e,g)=>Object.prototype.hasOwnProperty.call(e,g),n.r=e=>{"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},(()=>{"use strict";var e,g=n(7294),l=n.t(g,2),t=n(3935),o=n.t(t,2);function I(){return I=Object.assign?Object.assign.bind():function(e){for(var g=1;g<arguments.length;g++){var l=arguments[g];for(var t in l)Object.prototype.hasOwnProperty.call(l,t)&&(e[t]=l[t])}return e},I.apply(this,arguments)}!function(e){e.Pop="POP",e.Push="PUSH",e.Replace="REPLACE"}(e||(e={}));const C="popstate";function r(e,g){if(!1===e||null==e)throw new Error(g)}function a(e,g){if(!e){"undefined"!=typeof console&&console.warn(g);try{throw new Error(g)}catch(e){}}}function i(e,g){return{usr:e.state,key:e.key,idx:g}}function c(e,g,l,t){return void 0===l&&(l=null),I({pathname:"string"==typeof e?e:e.pathname,search:"",hash:""},"string"==typeof g?d(g):g,{state:l,key:g&&g.key||t||Math.random().toString(36).substr(2,8)})}function s(e){let{pathname:g="/",search:l="",hash:t=""}=e;return l&&"?"!==l&&(g+="?"===l.charAt(0)?l:"?"+l),t&&"#"!==t&&(g+="#"===t.charAt(0)?t:"#"+t),g}function d(e){let g={};if(e){let l=e.indexOf("#");l>=0&&(g.hash=e.substr(l),e=e.substr(0,l));let t=e.indexOf("?");t>=0&&(g.search=e.substr(t),e=e.substr(0,t)),e&&(g.pathname=e)}return g}var u;function A(e,g,l){void 0===l&&(l="/");let t=v(("string"==typeof g?d(g):g).pathname||"/",l);if(null==t)return null;let n=m(e);!function(e){e.sort(((e,g)=>e.score!==g.score?g.score-e.score:function(e,g){return e.length===g.length&&e.slice(0,-1).every(((e,l)=>e===g[l]))?e[e.length-1]-g[g.length-1]:0}(e.routesMeta.map((e=>e.childrenIndex)),g.routesMeta.map((e=>e.childrenIndex)))))}(n);let o=null;for(let e=0;null==o&&e<n.length;++e)o=W(n[e],f(t));return o}function m(e,g,l,t){void 0===g&&(g=[]),void 0===l&&(l=[]),void 0===t&&(t="");let n=(e,n,o)=>{let I={relativePath:void 0===o?e.path||"":o,caseSensitive:!0===e.caseSensitive,childrenIndex:n,route:e};I.relativePath.startsWith("/")&&(r(I.relativePath.startsWith(t),'Absolute route path "'+I.relativePath+'" nested under path "'+t+'" is not valid. An absolute child route path must start with the combined path of all its parent routes.'),I.relativePath=I.relativePath.slice(t.length));let C=w([t,I.relativePath]),a=l.concat(I);e.children&&e.children.length>0&&(r(!0!==e.index,'Index routes must not have child routes. Please remove all child routes from route path "'+C+'".'),m(e.children,g,a,C)),(null!=e.path||e.index)&&g.push({path:C,score:V(C,e.index),routesMeta:a})};return e.forEach(((e,g)=>{var l;if(""!==e.path&&null!=(l=e.path)&&l.includes("?"))for(let l of b(e.path))n(e,g,l);else n(e,g)})),g}function b(e){let g=e.split("/");if(0===g.length)return[];let[l,...t]=g,n=l.endsWith("?"),o=l.replace(/\?$/,"");if(0===t.length)return n?[o,""]:[o];let I=b(t.join("/")),C=[];return C.push(...I.map((e=>""===e?o:[o,e].join("/")))),n&&C.push(...I),C.map((g=>e.startsWith("/")&&""===g?"/":g))}!function(e){e.data="data",e.deferred="deferred",e.redirect="redirect",e.error="error"}(u||(u={})),new Set(["lazy","caseSensitive","path","id","index","children"]);const p=/^:\w+$/,Z=3,h=2,G=1,y=10,B=-2,S=e=>"*"===e;function V(e,g){let l=e.split("/"),t=l.length;return l.some(S)&&(t+=B),g&&(t+=h),l.filter((e=>!S(e))).reduce(((e,g)=>e+(p.test(g)?Z:""===g?G:y)),t)}function W(e,g){let{routesMeta:l}=e,t={},n="/",o=[];for(let e=0;e<l.length;++e){let I=l[e],C=e===l.length-1,r="/"===n?g:g.slice(n.length)||"/",a=R({path:I.relativePath,caseSensitive:I.caseSensitive,end:C},r);if(!a)return null;Object.assign(t,a.params);let i=I.route;o.push({params:t,pathname:w([n,a.pathname]),pathnameBase:Y(w([n,a.pathnameBase])),route:i}),"/"!==a.pathnameBase&&(n=w([n,a.pathnameBase]))}return o}function R(e,g){"string"==typeof e&&(e={path:e,caseSensitive:!1,end:!0});let[l,t]=function(e,g,l){void 0===g&&(g=!1),void 0===l&&(l=!0),a("*"===e||!e.endsWith("*")||e.endsWith("/*"),'Route path "'+e+'" will be treated as if it were "'+e.replace(/\*$/,"/*")+'" because the `*` character must always follow a `/` in the pattern. To get rid of this warning, please change the route path to "'+e.replace(/\*$/,"/*")+'".');let t=[],n="^"+e.replace(/\/*\*?$/,"").replace(/^\/*/,"/").replace(/[\\.*+^${}|()[\]]/g,"\\$&").replace(/\/:(\w+)(\?)?/g,((e,g,l)=>(t.push({paramName:g,isOptional:null!=l}),l?"/?([^\\/]+)?":"/([^\\/]+)")));return e.endsWith("*")?(t.push({paramName:"*"}),n+="*"===e||"/*"===e?"(.*)$":"(?:\\/(.+)|\\/*)$"):l?n+="\\/*$":""!==e&&"/"!==e&&(n+="(?:(?=\\/|$))"),[new RegExp(n,g?void 0:"i"),t]}(e.path,e.caseSensitive,e.end),n=g.match(l);if(!n)return null;let o=n[0],I=o.replace(/(.)\/+$/,"$1"),C=n.slice(1);return{params:t.reduce(((e,g,l)=>{let{paramName:t,isOptional:n}=g;if("*"===t){let e=C[l]||"";I=o.slice(0,o.length-e.length).replace(/(.)\/+$/,"$1")}const r=C[l];return e[t]=n&&!r?void 0:function(e,g){try{return decodeURIComponent(e)}catch(l){return a(!1,'The value for the URL param "'+g+'" will not be decoded because the string "'+e+'" is a malformed URL segment. This is probably due to a bad percent encoding ('+l+")."),e}}(r||"",t),e}),{}),pathname:o,pathnameBase:I,pattern:e}}function f(e){try{return decodeURI(e)}catch(g){return a(!1,'The URL path "'+e+'" could not be decoded because it is is a malformed URL segment. This is probably due to a bad percent encoding ('+g+")."),e}}function v(e,g){if("/"===g)return e;if(!e.toLowerCase().startsWith(g.toLowerCase()))return null;let l=g.endsWith("/")?g.length-1:g.length,t=e.charAt(l);return t&&"/"!==t?null:e.slice(l)||"/"}function k(e,g,l,t){return"Cannot include a '"+e+"' character in a manually specified `to."+g+"` field ["+JSON.stringify(t)+"].  Please separate it out to the `to."+l+'` field. Alternatively you may provide the full path as a string in <Link to="..."> and the router will parse it for you.'}function X(e,g){let l=function(e){return e.filter(((e,g)=>0===g||e.route.path&&e.route.path.length>0))}(e);return g?l.map(((g,l)=>l===e.length-1?g.pathname:g.pathnameBase)):l.map((e=>e.pathnameBase))}function J(e,g,l,t){let n;void 0===t&&(t=!1),"string"==typeof e?n=d(e):(n=I({},e),r(!n.pathname||!n.pathname.includes("?"),k("?","pathname","search",n)),r(!n.pathname||!n.pathname.includes("#"),k("#","pathname","hash",n)),r(!n.search||!n.search.includes("#"),k("#","search","hash",n)));let o,C=""===e||""===n.pathname,a=C?"/":n.pathname;if(null==a)o=l;else{let e=g.length-1;if(!t&&a.startsWith("..")){let g=a.split("/");for(;".."===g[0];)g.shift(),e-=1;n.pathname=g.join("/")}o=e>=0?g[e]:"/"}let i=function(e,g){void 0===g&&(g="/");let{pathname:l,search:t="",hash:n=""}="string"==typeof e?d(e):e,o=l?l.startsWith("/")?l:function(e,g){let l=g.replace(/\/+$/,"").split("/");return e.split("/").forEach((e=>{".."===e?l.length>1&&l.pop():"."!==e&&l.push(e)})),l.length>1?l.join("/"):"/"}(l,g):g;return{pathname:o,search:H(t),hash:F(n)}}(n,o),c=a&&"/"!==a&&a.endsWith("/"),s=(C||"."===a)&&l.endsWith("/");return i.pathname.endsWith("/")||!c&&!s||(i.pathname+="/"),i}const w=e=>e.join("/").replace(/\/\/+/g,"/"),Y=e=>e.replace(/\/+$/,"").replace(/^\/*/,"/"),H=e=>e&&"?"!==e?e.startsWith("?")?e:"?"+e:"",F=e=>e&&"#"!==e?e.startsWith("#")?e:"#"+e:"";Error;const N=["post","put","patch","delete"],K=(new Set(N),["get",...N]);function x(){return x=Object.assign?Object.assign.bind():function(e){for(var g=1;g<arguments.length;g++){var l=arguments[g];for(var t in l)Object.prototype.hasOwnProperty.call(l,t)&&(e[t]=l[t])}return e},x.apply(this,arguments)}new Set(K),new Set([301,302,303,307,308]),new Set([307,308]),Symbol("deferred");const M=g.createContext(null),z=g.createContext(null),E=g.createContext(null),L=g.createContext(null),U=g.createContext({outlet:null,matches:[],isDataRoute:!1}),Q=g.createContext(null);function D(){return null!=g.useContext(L)}function T(){return D()||r(!1),g.useContext(L).location}function P(e){g.useContext(E).static||g.useLayoutEffect(e)}function j(){let{isDataRoute:e}=g.useContext(U);return e?function(){let{router:e}=function(e){let l=g.useContext(M);return l||r(!1),l}(te.UseNavigateStable),l=oe(ne.UseNavigateStable),t=g.useRef(!1);return P((()=>{t.current=!0})),g.useCallback((function(g,n){void 0===n&&(n={}),t.current&&("number"==typeof g?e.navigate(g):e.navigate(g,x({fromRouteId:l},n)))}),[e,l])}():function(){D()||r(!1);let e=g.useContext(M),{basename:l,future:t,navigator:n}=g.useContext(E),{matches:o}=g.useContext(U),{pathname:I}=T(),C=JSON.stringify(X(o,t.v7_relativeSplatPath)),a=g.useRef(!1);return P((()=>{a.current=!0})),g.useCallback((function(g,t){if(void 0===t&&(t={}),!a.current)return;if("number"==typeof g)return void n.go(g);let o=J(g,JSON.parse(C),I,"path"===t.relative);null==e&&"/"!==l&&(o.pathname="/"===o.pathname?l:w([l,o.pathname])),(t.replace?n.replace:n.push)(o,t.state,t)}),[l,n,C,I,e])}()}function O(){let{matches:e}=g.useContext(U),l=e[e.length-1];return l?l.params:{}}function q(e,l){let{relative:t}=void 0===l?{}:l,{future:n}=g.useContext(E),{matches:o}=g.useContext(U),{pathname:I}=T(),C=JSON.stringify(X(o,n.v7_relativeSplatPath));return g.useMemo((()=>J(e,JSON.parse(C),I,"path"===t)),[e,C,I,t])}function $(l,t,n,o){D()||r(!1);let{navigator:I}=g.useContext(E),{matches:C}=g.useContext(U),a=C[C.length-1],i=a?a.params:{},c=(a&&a.pathname,a?a.pathnameBase:"/");a&&a.route;let s,u=T();if(t){var m;let e="string"==typeof t?d(t):t;"/"===c||(null==(m=e.pathname)?void 0:m.startsWith(c))||r(!1),s=e}else s=u;let b=s.pathname||"/",p=A(l,{pathname:"/"===c?b:b.slice(c.length)||"/"}),Z=function(e,l,t,n){var o;if(void 0===l&&(l=[]),void 0===t&&(t=null),void 0===n&&(n=null),null==e){var I;if(null==(I=t)||!I.errors)return null;e=t.matches}let C=e,a=null==(o=t)?void 0:o.errors;if(null!=a){let e=C.findIndex((e=>e.route.id&&(null==a?void 0:a[e.route.id])));e>=0||r(!1),C=C.slice(0,Math.min(C.length,e+1))}let i=!1,c=-1;if(t&&n&&n.v7_partialHydration)for(let e=0;e<C.length;e++){let g=C[e];if((g.route.HydrateFallback||g.route.hydrateFallbackElement)&&(c=e),g.route.id){let{loaderData:e,errors:l}=t,n=g.route.loader&&void 0===e[g.route.id]&&(!l||void 0===l[g.route.id]);if(g.route.lazy||n){i=!0,C=c>=0?C.slice(0,c+1):[C[0]];break}}}return C.reduceRight(((e,n,o)=>{let I,r=!1,s=null,d=null;var u;t&&(I=a&&n.route.id?a[n.route.id]:void 0,s=n.route.errorElement||ee,i&&(c<0&&0===o?(Ie[u="route-fallback"]||(Ie[u]=!0),r=!0,d=null):c===o&&(r=!0,d=n.route.hydrateFallbackElement||null)));let A=l.concat(C.slice(0,o+1)),m=()=>{let l;return l=I?s:r?d:n.route.Component?g.createElement(n.route.Component,null):n.route.element?n.route.element:e,g.createElement(le,{match:n,routeContext:{outlet:e,matches:A,isDataRoute:null!=t},children:l})};return t&&(n.route.ErrorBoundary||n.route.errorElement||0===o)?g.createElement(ge,{location:t.location,revalidation:t.revalidation,component:s,error:I,children:m(),routeContext:{outlet:null,matches:A,isDataRoute:!0}}):m()}),null)}(p&&p.map((e=>Object.assign({},e,{params:Object.assign({},i,e.params),pathname:w([c,I.encodeLocation?I.encodeLocation(e.pathname).pathname:e.pathname]),pathnameBase:"/"===e.pathnameBase?c:w([c,I.encodeLocation?I.encodeLocation(e.pathnameBase).pathname:e.pathnameBase])}))),C,n,o);return t&&Z?g.createElement(L.Provider,{value:{location:x({pathname:"/",search:"",hash:"",state:null,key:"default"},s),navigationType:e.Pop}},Z):Z}function _(){let e=function(){var e;let l=g.useContext(Q),t=function(e){let l=g.useContext(z);return l||r(!1),l}(ne.UseRouteError),n=oe(ne.UseRouteError);return void 0!==l?l:null==(e=t.errors)?void 0:e[n]}(),l=function(e){return null!=e&&"number"==typeof e.status&&"string"==typeof e.statusText&&"boolean"==typeof e.internal&&"data"in e}(e)?e.status+" "+e.statusText:e instanceof Error?e.message:JSON.stringify(e),t=e instanceof Error?e.stack:null,n={padding:"0.5rem",backgroundColor:"rgba(200,200,200, 0.5)"};return g.createElement(g.Fragment,null,g.createElement("h2",null,"Unexpected Application Error!"),g.createElement("h3",{style:{fontStyle:"italic"}},l),t?g.createElement("pre",{style:n},t):null,null)}const ee=g.createElement(_,null);class ge extends g.Component{constructor(e){super(e),this.state={location:e.location,revalidation:e.revalidation,error:e.error}}static getDerivedStateFromError(e){return{error:e}}static getDerivedStateFromProps(e,g){return g.location!==e.location||"idle"!==g.revalidation&&"idle"===e.revalidation?{error:e.error,location:e.location,revalidation:e.revalidation}:{error:void 0!==e.error?e.error:g.error,location:g.location,revalidation:e.revalidation||g.revalidation}}componentDidCatch(e,g){console.error("React Router caught the following error during render",e,g)}render(){return void 0!==this.state.error?g.createElement(U.Provider,{value:this.props.routeContext},g.createElement(Q.Provider,{value:this.state.error,children:this.props.component})):this.props.children}}function le(e){let{routeContext:l,match:t,children:n}=e,o=g.useContext(M);return o&&o.static&&o.staticContext&&(t.route.errorElement||t.route.ErrorBoundary)&&(o.staticContext._deepestRenderedBoundaryId=t.route.id),g.createElement(U.Provider,{value:l},n)}var te=function(e){return e.UseBlocker="useBlocker",e.UseRevalidator="useRevalidator",e.UseNavigateStable="useNavigate",e}(te||{}),ne=function(e){return e.UseBlocker="useBlocker",e.UseLoaderData="useLoaderData",e.UseActionData="useActionData",e.UseRouteError="useRouteError",e.UseNavigation="useNavigation",e.UseRouteLoaderData="useRouteLoaderData",e.UseMatches="useMatches",e.UseRevalidator="useRevalidator",e.UseNavigateStable="useNavigate",e.UseRouteId="useRouteId",e}(ne||{});function oe(e){let l=function(e){let l=g.useContext(U);return l||r(!1),l}(),t=l.matches[l.matches.length-1];return t.route.id||r(!1),t.route.id}const Ie={};function Ce(e){r(!1)}function re(l){let{basename:t="/",children:n=null,location:o,navigationType:I=e.Pop,navigator:C,static:a=!1,future:i}=l;D()&&r(!1);let c=t.replace(/^\/*/,"/"),s=g.useMemo((()=>({basename:c,navigator:C,static:a,future:x({v7_relativeSplatPath:!1},i)})),[c,i,C,a]);"string"==typeof o&&(o=d(o));let{pathname:u="/",search:A="",hash:m="",state:b=null,key:p="default"}=o,Z=g.useMemo((()=>{let e=v(u,c);return null==e?null:{location:{pathname:e,search:A,hash:m,state:b,key:p},navigationType:I}}),[c,u,A,m,b,p,I]);return null==Z?null:g.createElement(E.Provider,{value:s},g.createElement(L.Provider,{children:n,value:Z}))}function ae(e){let{children:g,location:l}=e;return $(ie(g),l)}function ie(e,l){void 0===l&&(l=[]);let t=[];return g.Children.forEach(e,((e,n)=>{if(!g.isValidElement(e))return;let o=[...l,n];if(e.type===g.Fragment)return void t.push.apply(t,ie(e.props.children,o));e.type!==Ce&&r(!1),e.props.index&&e.props.children&&r(!1);let I={id:e.props.id||o.join("-"),caseSensitive:e.props.caseSensitive,element:e.props.element,Component:e.props.Component,index:e.props.index,path:e.props.path,loader:e.props.loader,action:e.props.action,errorElement:e.props.errorElement,ErrorBoundary:e.props.ErrorBoundary,hasErrorBoundary:null!=e.props.ErrorBoundary||null!=e.props.errorElement,shouldRevalidate:e.props.shouldRevalidate,handle:e.props.handle,lazy:e.props.lazy};e.props.children&&(I.children=ie(e.props.children,o)),t.push(I)})),t}function ce(){return ce=Object.assign?Object.assign.bind():function(e){for(var g=1;g<arguments.length;g++){var l=arguments[g];for(var t in l)Object.prototype.hasOwnProperty.call(l,t)&&(e[t]=l[t])}return e},ce.apply(this,arguments)}l.startTransition,new Promise((()=>{})),g.Component,new Set(["application/x-www-form-urlencoded","multipart/form-data","text/plain"]);const se=["onClick","relative","reloadDocument","replace","state","target","to","preventScrollReset","unstable_viewTransition"];new Map;const de=l.startTransition;function ue(l){let{basename:t,children:n,future:o,window:a}=l,d=g.useRef();var u;null==d.current&&(d.current=(void 0===(u={window:a,v5Compat:!0})&&(u={}),function(g,l,t,n){void 0===n&&(n={});let{window:o=document.defaultView,v5Compat:a=!1}=n,d=o.history,u=e.Pop,A=null,m=b();function b(){return(d.state||{idx:null}).idx}function p(){u=e.Pop;let g=b(),l=null==g?null:g-m;m=g,A&&A({action:u,location:h.location,delta:l})}function Z(e){let g="null"!==o.location.origin?o.location.origin:o.location.href,l="string"==typeof e?e:s(e);return r(g,"No window.location.(origin|href) available to create URL for href: "+l),new URL(l,g)}null==m&&(m=0,d.replaceState(I({},d.state,{idx:m}),""));let h={get action(){return u},get location(){return g(o,d)},listen(e){if(A)throw new Error("A history only accepts one active listener");return o.addEventListener(C,p),A=e,()=>{o.removeEventListener(C,p),A=null}},createHref:e=>l(o,e),createURL:Z,encodeLocation(e){let g=Z(e);return{pathname:g.pathname,search:g.search,hash:g.hash}},push:function(g,l){u=e.Push;let n=c(h.location,g,l);t&&t(n,g),m=b()+1;let I=i(n,m),C=h.createHref(n);try{d.pushState(I,"",C)}catch(e){if(e instanceof DOMException&&"DataCloneError"===e.name)throw e;o.location.assign(C)}a&&A&&A({action:u,location:h.location,delta:1})},replace:function(g,l){u=e.Replace;let n=c(h.location,g,l);t&&t(n,g),m=b();let o=i(n,m),I=h.createHref(n);d.replaceState(o,"",I),a&&A&&A({action:u,location:h.location,delta:0})},go:e=>d.go(e)};return h}((function(e,g){let{pathname:l,search:t,hash:n}=e.location;return c("",{pathname:l,search:t,hash:n},g.state&&g.state.usr||null,g.state&&g.state.key||"default")}),(function(e,g){return"string"==typeof g?g:s(g)}),null,u)));let A=d.current,[m,b]=g.useState({action:A.action,location:A.location}),{v7_startTransition:p}=o||{},Z=g.useCallback((e=>{p&&de?de((()=>b(e))):b(e)}),[b,p]);return g.useLayoutEffect((()=>A.listen(Z)),[A,Z]),g.createElement(re,{basename:t,children:n,location:m.location,navigationType:m.action,navigator:A,future:o})}o.flushSync;const Ae="undefined"!=typeof window&&void 0!==window.document&&void 0!==window.document.createElement,me=/^(?:[a-z][a-z0-9+.-]*:|\/\/)/i,be=g.forwardRef((function(e,l){let t,{onClick:n,relative:o,reloadDocument:I,replace:C,state:a,target:i,to:c,preventScrollReset:d,unstable_viewTransition:u}=e,A=function(e,g){if(null==e)return{};var l,t,n={},o=Object.keys(e);for(t=0;t<o.length;t++)l=o[t],g.indexOf(l)>=0||(n[l]=e[l]);return n}(e,se),{basename:m}=g.useContext(E),b=!1;if("string"==typeof c&&me.test(c)&&(t=c,Ae))try{let e=new URL(window.location.href),g=c.startsWith("//")?new URL(e.protocol+c):new URL(c),l=v(g.pathname,m);g.origin===e.origin&&null!=l?c=l+g.search+g.hash:b=!0}catch(e){}let p=function(e,l){let{relative:t}=void 0===l?{}:l;D()||r(!1);let{basename:n,navigator:o}=g.useContext(E),{hash:I,pathname:C,search:a}=q(e,{relative:t}),i=C;return"/"!==n&&(i="/"===C?n:w([n,C])),o.createHref({pathname:i,search:a,hash:I})}(c,{relative:o}),Z=function(e,l){let{target:t,replace:n,state:o,preventScrollReset:I,relative:C,unstable_viewTransition:r}=void 0===l?{}:l,a=j(),i=T(),c=q(e,{relative:C});return g.useCallback((g=>{if(function(e,g){return!(0!==e.button||g&&"_self"!==g||function(e){return!!(e.metaKey||e.altKey||e.ctrlKey||e.shiftKey)}(e))}(g,t)){g.preventDefault();let l=void 0!==n?n:s(i)===s(c);a(e,{replace:l,state:o,preventScrollReset:I,relative:C,unstable_viewTransition:r})}}),[i,a,c,n,o,t,e,I,C,r])}(c,{replace:C,state:a,target:i,preventScrollReset:d,relative:o,unstable_viewTransition:u});return g.createElement("a",ce({},A,{href:t||p,onClick:b||I?n:function(e){n&&n(e),e.defaultPrevented||Z(e)},ref:l,target:i}))}));var pe,Ze;(function(e){e.UseScrollRestoration="useScrollRestoration",e.UseSubmit="useSubmit",e.UseSubmitFetcher="useSubmitFetcher",e.UseFetcher="useFetcher",e.useViewTransitionState="useViewTransitionState"})(pe||(pe={})),function(e){e.UseFetcher="useFetcher",e.UseFetchers="useFetchers",e.UseScrollRestoration="useScrollRestoration"}(Ze||(Ze={}));var he=n(7462),Ge=n(3366),ye=n(512),Be=n(4780),Se=n(2996),Ve=n(948),We=n(1657),Re=n(9766),fe=n(6535),ve=n(3703),ke=n(4161),Xe=n(3546),Je=n(9336),we=n(5893);const Ye=["onChange","maxRows","minRows","style","value"];function He(e){return parseInt(e,10)||0}const Fe={visibility:"hidden",position:"absolute",overflow:"hidden",height:0,top:0,left:0,transform:"translateZ(0)"};function Ne(e){return null==e||0===Object.keys(e).length||0===e.outerHeightStyle&&!e.overflow}const Ke=g.forwardRef((function(e,l){const{onChange:n,maxRows:o,minRows:I=1,style:C,value:r}=e,a=(0,Ge.Z)(e,Ye),{current:i}=g.useRef(null!=r),c=g.useRef(null),s=(0,ve.Z)(l,c),d=g.useRef(null),u=g.useRef(0),[A,m]=g.useState({outerHeightStyle:0}),b=g.useCallback((()=>{const g=c.current,l=(0,ke.Z)(g).getComputedStyle(g);if("0px"===l.width)return{outerHeightStyle:0};const t=d.current;t.style.width=l.width,t.value=g.value||e.placeholder||"x","\n"===t.value.slice(-1)&&(t.value+=" ");const n=l.boxSizing,C=He(l.paddingBottom)+He(l.paddingTop),r=He(l.borderBottomWidth)+He(l.borderTopWidth),a=t.scrollHeight;t.value="x";const i=t.scrollHeight;let s=a;return I&&(s=Math.max(Number(I)*i,s)),o&&(s=Math.min(Number(o)*i,s)),s=Math.max(s,i),{outerHeightStyle:s+("border-box"===n?C+r:0),overflow:Math.abs(s-a)<=1}}),[o,I,e.placeholder]),p=(e,g)=>{const{outerHeightStyle:l,overflow:t}=g;return u.current<20&&(l>0&&Math.abs((e.outerHeightStyle||0)-l)>1||e.overflow!==t)?(u.current+=1,{overflow:t,outerHeightStyle:l}):e},Z=g.useCallback((()=>{const e=b();Ne(e)||m((g=>p(g,e)))}),[b]);return(0,Xe.Z)((()=>{const e=()=>{u.current=0,(()=>{const e=b();Ne(e)||t.flushSync((()=>{m((g=>p(g,e)))}))})()};const g=(0,Je.Z)(e),l=c.current,n=(0,ke.Z)(l);let o;return n.addEventListener("resize",g),"undefined"!=typeof ResizeObserver&&(o=new ResizeObserver(e),o.observe(l)),()=>{g.clear(),cancelAnimationFrame(undefined),n.removeEventListener("resize",g),o&&o.disconnect()}}),[b]),(0,Xe.Z)((()=>{Z()})),g.useEffect((()=>{u.current=0}),[r]),(0,we.jsxs)(g.Fragment,{children:[(0,we.jsx)("textarea",(0,he.Z)({value:r,onChange:e=>{u.current=0,i||Z(),n&&n(e)},ref:s,rows:I,style:(0,he.Z)({height:A.outerHeightStyle,overflow:A.overflow?"hidden":void 0},C)},a)),(0,we.jsx)("textarea",{"aria-hidden":!0,className:e.className,readOnly:!0,ref:d,tabIndex:-1,style:(0,he.Z)({},Fe,C,{paddingTop:0,paddingBottom:0})})]})}));function xe(e){return"string"==typeof e}function Me({props:e,states:g,muiFormControl:l}){return g.reduce(((g,t)=>(g[t]=e[t],l&&void 0===e[t]&&(g[t]=l[t]),g)),{})}const ze=g.createContext(void 0);function Ee(){return g.useContext(ze)}var Le=n(8216),Ue=n(1705),Qe=n(8974),De=n(5260),Te=n(444),Pe=n(7278),je=n(6797),Oe=(n(6751),n(8679),(0,De.w)((function(e,l){var t=e.styles,n=(0,je.O)([t],void 0,g.useContext(De.T));if(!De.i){for(var o,I=n.name,C=n.styles,r=n.next;void 0!==r;)I+=" "+r.name,C+=r.styles,r=r.next;var a=!0===l.compat,i=l.insert("",{name:I,styles:C},l.sheet,a);return a?null:g.createElement("style",((o={})["data-emotion"]=l.key+"-global "+I,o.dangerouslySetInnerHTML={__html:i},o.nonce=l.sheet.nonce,o))}var c=g.useRef();return(0,Pe.j)((function(){var e=l.key+"-global",g=new l.sheet.constructor({key:e,nonce:l.sheet.nonce,container:l.sheet.container,speedy:l.sheet.isSpeedy}),t=!1,o=document.querySelector('style[data-emotion="'+e+" "+n.name+'"]');return l.sheet.tags.length&&(g.before=l.sheet.tags[0]),null!==o&&(t=!0,o.setAttribute("data-emotion",e),g.hydrate([o])),c.current=[g,t],function(){g.flush()}}),[l]),(0,Pe.j)((function(){var e=c.current,g=e[0];if(e[1])e[1]=!1;else{if(void 0!==n.next&&(0,Te.My)(l,n.next,!0),g.tags.length){var t=g.tags[g.tags.length-1].nextElementSibling;g.before=t,g.flush()}l.insert("",n,g,!1)}}),[l,n.name]),null})));function qe(){for(var e=arguments.length,g=new Array(e),l=0;l<e;l++)g[l]=arguments[l];return(0,je.O)(g)}var $e=function(){var e=qe.apply(void 0,arguments),g="animation-"+e.name;return{name:g,styles:"@keyframes "+g+"{"+e.styles+"}",anim:1,toString:function(){return"_EMO_"+this.name+"_"+this.styles+"_EMO_"}}};function _e(e){const{styles:g,defaultTheme:l={}}=e,t="function"==typeof g?e=>{return g(null==(t=e)||0===Object.keys(t).length?l:e);var t}:g;return(0,we.jsx)(Oe,{styles:t})}var eg=n(6682);const gg=function({styles:e,themeId:g,defaultTheme:l={}}){const t=(0,eg.Z)(l),n="function"==typeof e?e(g&&t[g]||t):e;return(0,we.jsx)(_e,{styles:n})};var lg=n(247),tg=n(606);const ng=function(e){return(0,we.jsx)(gg,(0,he.Z)({},e,{defaultTheme:lg.Z,themeId:tg.Z}))};function og(e){return null!=e&&!(Array.isArray(e)&&0===e.length)}function Ig(e,g=!1){return e&&(og(e.value)&&""!==e.value||g&&og(e.defaultValue)&&""!==e.defaultValue)}var Cg=n(1588),rg=n(4867);function ag(e){return(0,rg.Z)("MuiInputBase",e)}const ig=(0,Cg.Z)("MuiInputBase",["root","formControl","focused","disabled","adornedStart","adornedEnd","error","sizeSmall","multiline","colorSecondary","fullWidth","hiddenLabel","readOnly","input","inputSizeSmall","inputMultiline","inputTypeSearch","inputAdornedStart","inputAdornedEnd","inputHiddenLabel"]),cg=["aria-describedby","autoComplete","autoFocus","className","color","components","componentsProps","defaultValue","disabled","disableInjectingGlobalStyles","endAdornment","error","fullWidth","id","inputComponent","inputProps","inputRef","margin","maxRows","minRows","multiline","name","onBlur","onChange","onClick","onFocus","onKeyDown","onKeyUp","placeholder","readOnly","renderSuffix","rows","size","slotProps","slots","startAdornment","type","value"],sg=(e,g)=>{const{ownerState:l}=e;return[g.root,l.formControl&&g.formControl,l.startAdornment&&g.adornedStart,l.endAdornment&&g.adornedEnd,l.error&&g.error,"small"===l.size&&g.sizeSmall,l.multiline&&g.multiline,l.color&&g[`color${(0,Le.Z)(l.color)}`],l.fullWidth&&g.fullWidth,l.hiddenLabel&&g.hiddenLabel]},dg=(e,g)=>{const{ownerState:l}=e;return[g.input,"small"===l.size&&g.inputSizeSmall,l.multiline&&g.inputMultiline,"search"===l.type&&g.inputTypeSearch,l.startAdornment&&g.inputAdornedStart,l.endAdornment&&g.inputAdornedEnd,l.hiddenLabel&&g.inputHiddenLabel]},ug=(0,Ve.ZP)("div",{name:"MuiInputBase",slot:"Root",overridesResolver:sg})((({theme:e,ownerState:g})=>(0,he.Z)({},e.typography.body1,{color:(e.vars||e).palette.text.primary,lineHeight:"1.4375em",boxSizing:"border-box",position:"relative",cursor:"text",display:"inline-flex",alignItems:"center",[`&.${ig.disabled}`]:{color:(e.vars||e).palette.text.disabled,cursor:"default"}},g.multiline&&(0,he.Z)({padding:"4px 0 5px"},"small"===g.size&&{paddingTop:1}),g.fullWidth&&{width:"100%"}))),Ag=(0,Ve.ZP)("input",{name:"MuiInputBase",slot:"Input",overridesResolver:dg})((({theme:e,ownerState:g})=>{const l="light"===e.palette.mode,t=(0,he.Z)({color:"currentColor"},e.vars?{opacity:e.vars.opacity.inputPlaceholder}:{opacity:l?.42:.5},{transition:e.transitions.create("opacity",{duration:e.transitions.duration.shorter})}),n={opacity:"0 !important"},o=e.vars?{opacity:e.vars.opacity.inputPlaceholder}:{opacity:l?.42:.5};return(0,he.Z)({font:"inherit",letterSpacing:"inherit",color:"currentColor",padding:"4px 0 5px",border:0,boxSizing:"content-box",background:"none",height:"1.4375em",margin:0,WebkitTapHighlightColor:"transparent",display:"block",minWidth:0,width:"100%",animationName:"mui-auto-fill-cancel",animationDuration:"10ms","&::-webkit-input-placeholder":t,"&::-moz-placeholder":t,"&:-ms-input-placeholder":t,"&::-ms-input-placeholder":t,"&:focus":{outline:0},"&:invalid":{boxShadow:"none"},"&::-webkit-search-decoration":{WebkitAppearance:"none"},[`label[data-shrink=false] + .${ig.formControl} &`]:{"&::-webkit-input-placeholder":n,"&::-moz-placeholder":n,"&:-ms-input-placeholder":n,"&::-ms-input-placeholder":n,"&:focus::-webkit-input-placeholder":o,"&:focus::-moz-placeholder":o,"&:focus:-ms-input-placeholder":o,"&:focus::-ms-input-placeholder":o},[`&.${ig.disabled}`]:{opacity:1,WebkitTextFillColor:(e.vars||e).palette.text.disabled},"&:-webkit-autofill":{animationDuration:"5000s",animationName:"mui-auto-fill"}},"small"===g.size&&{paddingTop:1},g.multiline&&{height:"auto",resize:"none",padding:0,paddingTop:0},"search"===g.type&&{MozAppearance:"textfield"})})),mg=(0,we.jsx)(ng,{styles:{"@keyframes mui-auto-fill":{from:{display:"block"}},"@keyframes mui-auto-fill-cancel":{from:{display:"block"}}}}),bg=g.forwardRef((function(e,l){var t;const n=(0,We.Z)({props:e,name:"MuiInputBase"}),{"aria-describedby":o,autoComplete:I,autoFocus:C,className:r,components:a={},componentsProps:i={},defaultValue:c,disabled:s,disableInjectingGlobalStyles:d,endAdornment:u,fullWidth:A=!1,id:m,inputComponent:b="input",inputProps:p={},inputRef:Z,maxRows:h,minRows:G,multiline:y=!1,name:B,onBlur:S,onChange:V,onClick:W,onFocus:R,onKeyDown:f,onKeyUp:v,placeholder:k,readOnly:X,renderSuffix:J,rows:w,slotProps:Y={},slots:H={},startAdornment:F,type:N="text",value:K}=n,x=(0,Ge.Z)(n,cg),M=null!=p.value?p.value:K,{current:z}=g.useRef(null!=M),E=g.useRef(),L=g.useCallback((e=>{}),[]),U=(0,Ue.Z)(E,Z,p.ref,L),[Q,D]=g.useState(!1),T=Ee(),P=Me({props:n,muiFormControl:T,states:["color","disabled","error","hiddenLabel","size","required","filled"]});P.focused=T?T.focused:Q,g.useEffect((()=>{!T&&s&&Q&&(D(!1),S&&S())}),[T,s,Q,S]);const j=T&&T.onFilled,O=T&&T.onEmpty,q=g.useCallback((e=>{Ig(e)?j&&j():O&&O()}),[j,O]);(0,Qe.Z)((()=>{z&&q({value:M})}),[M,q,z]),g.useEffect((()=>{q(E.current)}),[]);let $=b,_=p;y&&"input"===$&&(_=w?(0,he.Z)({type:void 0,minRows:w,maxRows:w},_):(0,he.Z)({type:void 0,maxRows:h,minRows:G},_),$=Ke),g.useEffect((()=>{T&&T.setAdornedStart(Boolean(F))}),[T,F]);const ee=(0,he.Z)({},n,{color:P.color||"primary",disabled:P.disabled,endAdornment:u,error:P.error,focused:P.focused,formControl:T,fullWidth:A,hiddenLabel:P.hiddenLabel,multiline:y,size:P.size,startAdornment:F,type:N}),ge=(e=>{const{classes:g,color:l,disabled:t,error:n,endAdornment:o,focused:I,formControl:C,fullWidth:r,hiddenLabel:a,multiline:i,readOnly:c,size:s,startAdornment:d,type:u}=e,A={root:["root",`color${(0,Le.Z)(l)}`,t&&"disabled",n&&"error",r&&"fullWidth",I&&"focused",C&&"formControl",s&&"medium"!==s&&`size${(0,Le.Z)(s)}`,i&&"multiline",d&&"adornedStart",o&&"adornedEnd",a&&"hiddenLabel",c&&"readOnly"],input:["input",t&&"disabled","search"===u&&"inputTypeSearch",i&&"inputMultiline","small"===s&&"inputSizeSmall",a&&"inputHiddenLabel",d&&"inputAdornedStart",o&&"inputAdornedEnd",c&&"readOnly"]};return(0,Be.Z)(A,ag,g)})(ee),le=H.root||a.Root||ug,te=Y.root||i.root||{},ne=H.input||a.Input||Ag;return _=(0,he.Z)({},_,null!=(t=Y.input)?t:i.input),(0,we.jsxs)(g.Fragment,{children:[!d&&mg,(0,we.jsxs)(le,(0,he.Z)({},te,!xe(le)&&{ownerState:(0,he.Z)({},ee,te.ownerState)},{ref:l,onClick:e=>{E.current&&e.currentTarget===e.target&&E.current.focus(),W&&W(e)}},x,{className:(0,ye.Z)(ge.root,te.className,r,X&&"MuiInputBase-readOnly"),children:[F,(0,we.jsx)(ze.Provider,{value:null,children:(0,we.jsx)(ne,(0,he.Z)({ownerState:ee,"aria-invalid":P.error,"aria-describedby":o,autoComplete:I,autoFocus:C,defaultValue:c,disabled:P.disabled,id:m,onAnimationStart:e=>{q("mui-auto-fill-cancel"===e.animationName?E.current:{value:"x"})},name:B,placeholder:k,readOnly:X,required:P.required,rows:w,value:M,onKeyDown:f,onKeyUp:v,type:N},_,!xe(ne)&&{as:$,ownerState:(0,he.Z)({},ee,_.ownerState)},{ref:U,className:(0,ye.Z)(ge.input,_.className,X&&"MuiInputBase-readOnly"),onBlur:e=>{S&&S(e),p.onBlur&&p.onBlur(e),T&&T.onBlur?T.onBlur(e):D(!1)},onChange:(e,...g)=>{if(!z){const g=e.target||E.current;if(null==g)throw new Error((0,fe.Z)(1));q({value:g.value})}p.onChange&&p.onChange(e,...g),V&&V(e,...g)},onFocus:e=>{P.disabled?e.stopPropagation():(R&&R(e),p.onFocus&&p.onFocus(e),T&&T.onFocus?T.onFocus(e):D(!0))}}))}),u,J?J((0,he.Z)({},P,{startAdornment:F})):null]}))]})})),pg=bg;function Zg(e){return(0,rg.Z)("MuiInput",e)}const hg=(0,he.Z)({},ig,(0,Cg.Z)("MuiInput",["root","underline","input"])),Gg=["disableUnderline","components","componentsProps","fullWidth","inputComponent","multiline","slotProps","slots","type"],yg=(0,Ve.ZP)(ug,{shouldForwardProp:e=>(0,Ve.FO)(e)||"classes"===e,name:"MuiInput",slot:"Root",overridesResolver:(e,g)=>{const{ownerState:l}=e;return[...sg(e,g),!l.disableUnderline&&g.underline]}})((({theme:e,ownerState:g})=>{let l="light"===e.palette.mode?"rgba(0, 0, 0, 0.42)":"rgba(255, 255, 255, 0.7)";return e.vars&&(l=`rgba(${e.vars.palette.common.onBackgroundChannel} / ${e.vars.opacity.inputUnderline})`),(0,he.Z)({position:"relative"},g.formControl&&{"label + &":{marginTop:16}},!g.disableUnderline&&{"&::after":{borderBottom:`2px solid ${(e.vars||e).palette[g.color].main}`,left:0,bottom:0,content:'""',position:"absolute",right:0,transform:"scaleX(0)",transition:e.transitions.create("transform",{duration:e.transitions.duration.shorter,easing:e.transitions.easing.easeOut}),pointerEvents:"none"},[`&.${hg.focused}:after`]:{transform:"scaleX(1) translateX(0)"},[`&.${hg.error}`]:{"&::before, &::after":{borderBottomColor:(e.vars||e).palette.error.main}},"&::before":{borderBottom:`1px solid ${l}`,left:0,bottom:0,content:'"\\00a0"',position:"absolute",right:0,transition:e.transitions.create("border-bottom-color",{duration:e.transitions.duration.shorter}),pointerEvents:"none"},[`&:hover:not(.${hg.disabled}, .${hg.error}):before`]:{borderBottom:`2px solid ${(e.vars||e).palette.text.primary}`,"@media (hover: none)":{borderBottom:`1px solid ${l}`}},[`&.${hg.disabled}:before`]:{borderBottomStyle:"dotted"}})})),Bg=(0,Ve.ZP)(Ag,{name:"MuiInput",slot:"Input",overridesResolver:dg})({}),Sg=g.forwardRef((function(e,g){var l,t,n,o;const I=(0,We.Z)({props:e,name:"MuiInput"}),{disableUnderline:C,components:r={},componentsProps:a,fullWidth:i=!1,inputComponent:c="input",multiline:s=!1,slotProps:d,slots:u={},type:A="text"}=I,m=(0,Ge.Z)(I,Gg),b=(e=>{const{classes:g,disableUnderline:l}=e,t={root:["root",!l&&"underline"],input:["input"]},n=(0,Be.Z)(t,Zg,g);return(0,he.Z)({},g,n)})(I),p={root:{ownerState:{disableUnderline:C}}},Z=(null!=d?d:a)?(0,Re.Z)(null!=d?d:a,p):p,h=null!=(l=null!=(t=u.root)?t:r.Root)?l:yg,G=null!=(n=null!=(o=u.input)?o:r.Input)?n:Bg;return(0,we.jsx)(pg,(0,he.Z)({slots:{root:h,input:G},slotProps:Z,fullWidth:i,inputComponent:c,multiline:s,ref:g,type:A},m,{classes:b}))}));Sg.muiName="Input";const Vg=Sg;function Wg(e){return(0,rg.Z)("MuiFilledInput",e)}const Rg=(0,he.Z)({},ig,(0,Cg.Z)("MuiFilledInput",["root","underline","input"])),fg=["disableUnderline","components","componentsProps","fullWidth","hiddenLabel","inputComponent","multiline","slotProps","slots","type"],vg=(0,Ve.ZP)(ug,{shouldForwardProp:e=>(0,Ve.FO)(e)||"classes"===e,name:"MuiFilledInput",slot:"Root",overridesResolver:(e,g)=>{const{ownerState:l}=e;return[...sg(e,g),!l.disableUnderline&&g.underline]}})((({theme:e,ownerState:g})=>{var l;const t="light"===e.palette.mode,n=t?"rgba(0, 0, 0, 0.42)":"rgba(255, 255, 255, 0.7)",o=t?"rgba(0, 0, 0, 0.06)":"rgba(255, 255, 255, 0.09)",I=t?"rgba(0, 0, 0, 0.09)":"rgba(255, 255, 255, 0.13)",C=t?"rgba(0, 0, 0, 0.12)":"rgba(255, 255, 255, 0.12)";return(0,he.Z)({position:"relative",backgroundColor:e.vars?e.vars.palette.FilledInput.bg:o,borderTopLeftRadius:(e.vars||e).shape.borderRadius,borderTopRightRadius:(e.vars||e).shape.borderRadius,transition:e.transitions.create("background-color",{duration:e.transitions.duration.shorter,easing:e.transitions.easing.easeOut}),"&:hover":{backgroundColor:e.vars?e.vars.palette.FilledInput.hoverBg:I,"@media (hover: none)":{backgroundColor:e.vars?e.vars.palette.FilledInput.bg:o}},[`&.${Rg.focused}`]:{backgroundColor:e.vars?e.vars.palette.FilledInput.bg:o},[`&.${Rg.disabled}`]:{backgroundColor:e.vars?e.vars.palette.FilledInput.disabledBg:C}},!g.disableUnderline&&{"&::after":{borderBottom:`2px solid ${null==(l=(e.vars||e).palette[g.color||"primary"])?void 0:l.main}`,left:0,bottom:0,content:'""',position:"absolute",right:0,transform:"scaleX(0)",transition:e.transitions.create("transform",{duration:e.transitions.duration.shorter,easing:e.transitions.easing.easeOut}),pointerEvents:"none"},[`&.${Rg.focused}:after`]:{transform:"scaleX(1) translateX(0)"},[`&.${Rg.error}`]:{"&::before, &::after":{borderBottomColor:(e.vars||e).palette.error.main}},"&::before":{borderBottom:`1px solid ${e.vars?`rgba(${e.vars.palette.common.onBackgroundChannel} / ${e.vars.opacity.inputUnderline})`:n}`,left:0,bottom:0,content:'"\\00a0"',position:"absolute",right:0,transition:e.transitions.create("border-bottom-color",{duration:e.transitions.duration.shorter}),pointerEvents:"none"},[`&:hover:not(.${Rg.disabled}, .${Rg.error}):before`]:{borderBottom:`1px solid ${(e.vars||e).palette.text.primary}`},[`&.${Rg.disabled}:before`]:{borderBottomStyle:"dotted"}},g.startAdornment&&{paddingLeft:12},g.endAdornment&&{paddingRight:12},g.multiline&&(0,he.Z)({padding:"25px 12px 8px"},"small"===g.size&&{paddingTop:21,paddingBottom:4},g.hiddenLabel&&{paddingTop:16,paddingBottom:17},g.hiddenLabel&&"small"===g.size&&{paddingTop:8,paddingBottom:9}))})),kg=(0,Ve.ZP)(Ag,{name:"MuiFilledInput",slot:"Input",overridesResolver:dg})((({theme:e,ownerState:g})=>(0,he.Z)({paddingTop:25,paddingRight:12,paddingBottom:8,paddingLeft:12},!e.vars&&{"&:-webkit-autofill":{WebkitBoxShadow:"light"===e.palette.mode?null:"0 0 0 100px #266798 inset",WebkitTextFillColor:"light"===e.palette.mode?null:"#fff",caretColor:"light"===e.palette.mode?null:"#fff",borderTopLeftRadius:"inherit",borderTopRightRadius:"inherit"}},e.vars&&{"&:-webkit-autofill":{borderTopLeftRadius:"inherit",borderTopRightRadius:"inherit"},[e.getColorSchemeSelector("dark")]:{"&:-webkit-autofill":{WebkitBoxShadow:"0 0 0 100px #266798 inset",WebkitTextFillColor:"#fff",caretColor:"#fff"}}},"small"===g.size&&{paddingTop:21,paddingBottom:4},g.hiddenLabel&&{paddingTop:16,paddingBottom:17},g.startAdornment&&{paddingLeft:0},g.endAdornment&&{paddingRight:0},g.hiddenLabel&&"small"===g.size&&{paddingTop:8,paddingBottom:9},g.multiline&&{paddingTop:0,paddingBottom:0,paddingLeft:0,paddingRight:0}))),Xg=g.forwardRef((function(e,g){var l,t,n,o;const I=(0,We.Z)({props:e,name:"MuiFilledInput"}),{components:C={},componentsProps:r,fullWidth:a=!1,inputComponent:i="input",multiline:c=!1,slotProps:s,slots:d={},type:u="text"}=I,A=(0,Ge.Z)(I,fg),m=(0,he.Z)({},I,{fullWidth:a,inputComponent:i,multiline:c,type:u}),b=(e=>{const{classes:g,disableUnderline:l}=e,t={root:["root",!l&&"underline"],input:["input"]},n=(0,Be.Z)(t,Wg,g);return(0,he.Z)({},g,n)})(I),p={root:{ownerState:m},input:{ownerState:m}},Z=(null!=s?s:r)?(0,Re.Z)(p,null!=s?s:r):p,h=null!=(l=null!=(t=d.root)?t:C.Root)?l:vg,G=null!=(n=null!=(o=d.input)?o:C.Input)?n:kg;return(0,we.jsx)(pg,(0,he.Z)({slots:{root:h,input:G},componentsProps:Z,fullWidth:a,inputComponent:i,multiline:c,ref:g,type:u},A,{classes:b}))}));Xg.muiName="Input";const Jg=Xg;var wg;const Yg=["children","classes","className","label","notched"],Hg=(0,Ve.ZP)("fieldset",{shouldForwardProp:Ve.FO})({textAlign:"left",position:"absolute",bottom:0,right:0,top:-5,left:0,margin:0,padding:"0 8px",pointerEvents:"none",borderRadius:"inherit",borderStyle:"solid",borderWidth:1,overflow:"hidden",minWidth:"0%"}),Fg=(0,Ve.ZP)("legend",{shouldForwardProp:Ve.FO})((({ownerState:e,theme:g})=>(0,he.Z)({float:"unset",width:"auto",overflow:"hidden"},!e.withLabel&&{padding:0,lineHeight:"11px",transition:g.transitions.create("width",{duration:150,easing:g.transitions.easing.easeOut})},e.withLabel&&(0,he.Z)({display:"block",padding:0,height:11,fontSize:"0.75em",visibility:"hidden",maxWidth:.01,transition:g.transitions.create("max-width",{duration:50,easing:g.transitions.easing.easeOut}),whiteSpace:"nowrap","& > span":{paddingLeft:5,paddingRight:5,display:"inline-block",opacity:0,visibility:"visible"}},e.notched&&{maxWidth:"100%",transition:g.transitions.create("max-width",{duration:100,easing:g.transitions.easing.easeOut,delay:50})}))));function Ng(e){return(0,rg.Z)("MuiOutlinedInput",e)}const Kg=(0,he.Z)({},ig,(0,Cg.Z)("MuiOutlinedInput",["root","notchedOutline","input"])),xg=["components","fullWidth","inputComponent","label","multiline","notched","slots","type"],Mg=(0,Ve.ZP)(ug,{shouldForwardProp:e=>(0,Ve.FO)(e)||"classes"===e,name:"MuiOutlinedInput",slot:"Root",overridesResolver:sg})((({theme:e,ownerState:g})=>{const l="light"===e.palette.mode?"rgba(0, 0, 0, 0.23)":"rgba(255, 255, 255, 0.23)";return(0,he.Z)({position:"relative",borderRadius:(e.vars||e).shape.borderRadius,[`&:hover .${Kg.notchedOutline}`]:{borderColor:(e.vars||e).palette.text.primary},"@media (hover: none)":{[`&:hover .${Kg.notchedOutline}`]:{borderColor:e.vars?`rgba(${e.vars.palette.common.onBackgroundChannel} / 0.23)`:l}},[`&.${Kg.focused} .${Kg.notchedOutline}`]:{borderColor:(e.vars||e).palette[g.color].main,borderWidth:2},[`&.${Kg.error} .${Kg.notchedOutline}`]:{borderColor:(e.vars||e).palette.error.main},[`&.${Kg.disabled} .${Kg.notchedOutline}`]:{borderColor:(e.vars||e).palette.action.disabled}},g.startAdornment&&{paddingLeft:14},g.endAdornment&&{paddingRight:14},g.multiline&&(0,he.Z)({padding:"16.5px 14px"},"small"===g.size&&{padding:"8.5px 14px"}))})),zg=(0,Ve.ZP)((function(e){const{className:g,label:l,notched:t}=e,n=(0,Ge.Z)(e,Yg),o=null!=l&&""!==l,I=(0,he.Z)({},e,{notched:t,withLabel:o});return(0,we.jsx)(Hg,(0,he.Z)({"aria-hidden":!0,className:g,ownerState:I},n,{children:(0,we.jsx)(Fg,{ownerState:I,children:o?(0,we.jsx)("span",{children:l}):wg||(wg=(0,we.jsx)("span",{className:"notranslate",children:""}))})}))}),{name:"MuiOutlinedInput",slot:"NotchedOutline",overridesResolver:(e,g)=>g.notchedOutline})((({theme:e})=>{const g="light"===e.palette.mode?"rgba(0, 0, 0, 0.23)":"rgba(255, 255, 255, 0.23)";return{borderColor:e.vars?`rgba(${e.vars.palette.common.onBackgroundChannel} / 0.23)`:g}})),Eg=(0,Ve.ZP)(Ag,{name:"MuiOutlinedInput",slot:"Input",overridesResolver:dg})((({theme:e,ownerState:g})=>(0,he.Z)({padding:"16.5px 14px"},!e.vars&&{"&:-webkit-autofill":{WebkitBoxShadow:"light"===e.palette.mode?null:"0 0 0 100px #266798 inset",WebkitTextFillColor:"light"===e.palette.mode?null:"#fff",caretColor:"light"===e.palette.mode?null:"#fff",borderRadius:"inherit"}},e.vars&&{"&:-webkit-autofill":{borderRadius:"inherit"},[e.getColorSchemeSelector("dark")]:{"&:-webkit-autofill":{WebkitBoxShadow:"0 0 0 100px #266798 inset",WebkitTextFillColor:"#fff",caretColor:"#fff"}}},"small"===g.size&&{padding:"8.5px 14px"},g.multiline&&{padding:0},g.startAdornment&&{paddingLeft:0},g.endAdornment&&{paddingRight:0}))),Lg=g.forwardRef((function(e,l){var t,n,o,I,C;const r=(0,We.Z)({props:e,name:"MuiOutlinedInput"}),{components:a={},fullWidth:i=!1,inputComponent:c="input",label:s,multiline:d=!1,notched:u,slots:A={},type:m="text"}=r,b=(0,Ge.Z)(r,xg),p=(e=>{const{classes:g}=e,l=(0,Be.Z)({root:["root"],notchedOutline:["notchedOutline"],input:["input"]},Ng,g);return(0,he.Z)({},g,l)})(r),Z=Ee(),h=Me({props:r,muiFormControl:Z,states:["color","disabled","error","focused","hiddenLabel","size","required"]}),G=(0,he.Z)({},r,{color:h.color||"primary",disabled:h.disabled,error:h.error,focused:h.focused,formControl:Z,fullWidth:i,hiddenLabel:h.hiddenLabel,multiline:d,size:h.size,type:m}),y=null!=(t=null!=(n=A.root)?n:a.Root)?t:Mg,B=null!=(o=null!=(I=A.input)?I:a.Input)?o:Eg;return(0,we.jsx)(pg,(0,he.Z)({slots:{root:y,input:B},renderSuffix:e=>(0,we.jsx)(zg,{ownerState:G,className:p.notchedOutline,label:null!=s&&""!==s&&h.required?C||(C=(0,we.jsxs)(g.Fragment,{children:[s,"","*"]})):s,notched:void 0!==u?u:Boolean(e.startAdornment||e.filled||e.focused)}),fullWidth:i,inputComponent:c,multiline:d,ref:l,type:m},b,{classes:(0,he.Z)({},p,{notchedOutline:null})}))}));Lg.muiName="Input";const Ug=Lg;function Qg(e){return(0,rg.Z)("MuiFormLabel",e)}const Dg=(0,Cg.Z)("MuiFormLabel",["root","colorSecondary","focused","disabled","error","filled","required","asterisk"]),Tg=["children","className","color","component","disabled","error","filled","focused","required"],Pg=(0,Ve.ZP)("label",{name:"MuiFormLabel",slot:"Root",overridesResolver:({ownerState:e},g)=>(0,he.Z)({},g.root,"secondary"===e.color&&g.colorSecondary,e.filled&&g.filled)})((({theme:e,ownerState:g})=>(0,he.Z)({color:(e.vars||e).palette.text.secondary},e.typography.body1,{lineHeight:"1.4375em",padding:0,position:"relative",[`&.${Dg.focused}`]:{color:(e.vars||e).palette[g.color].main},[`&.${Dg.disabled}`]:{color:(e.vars||e).palette.text.disabled},[`&.${Dg.error}`]:{color:(e.vars||e).palette.error.main}}))),jg=(0,Ve.ZP)("span",{name:"MuiFormLabel",slot:"Asterisk",overridesResolver:(e,g)=>g.asterisk})((({theme:e})=>({[`&.${Dg.error}`]:{color:(e.vars||e).palette.error.main}}))),Og=g.forwardRef((function(e,g){const l=(0,We.Z)({props:e,name:"MuiFormLabel"}),{children:t,className:n,component:o="label"}=l,I=(0,Ge.Z)(l,Tg),C=Me({props:l,muiFormControl:Ee(),states:["color","required","focused","disabled","error","filled"]}),r=(0,he.Z)({},l,{color:C.color||"primary",component:o,disabled:C.disabled,error:C.error,filled:C.filled,focused:C.focused,required:C.required}),a=(e=>{const{classes:g,color:l,focused:t,disabled:n,error:o,filled:I,required:C}=e,r={root:["root",`color${(0,Le.Z)(l)}`,n&&"disabled",o&&"error",I&&"filled",t&&"focused",C&&"required"],asterisk:["asterisk",o&&"error"]};return(0,Be.Z)(r,Qg,g)})(r);return(0,we.jsxs)(Pg,(0,he.Z)({as:o,ownerState:r,className:(0,ye.Z)(a.root,n),ref:g},I,{children:[t,C.required&&(0,we.jsxs)(jg,{ownerState:r,"aria-hidden":!0,className:a.asterisk,children:["","*"]})]}))}));function qg(e){return(0,rg.Z)("MuiInputLabel",e)}(0,Cg.Z)("MuiInputLabel",["root","focused","disabled","error","required","asterisk","formControl","sizeSmall","shrink","animated","standard","filled","outlined"]);const $g=["disableAnimation","margin","shrink","variant","className"],_g=(0,Ve.ZP)(Og,{shouldForwardProp:e=>(0,Ve.FO)(e)||"classes"===e,name:"MuiInputLabel",slot:"Root",overridesResolver:(e,g)=>{const{ownerState:l}=e;return[{[`& .${Dg.asterisk}`]:g.asterisk},g.root,l.formControl&&g.formControl,"small"===l.size&&g.sizeSmall,l.shrink&&g.shrink,!l.disableAnimation&&g.animated,l.focused&&g.focused,g[l.variant]]}})((({theme:e,ownerState:g})=>(0,he.Z)({display:"block",transformOrigin:"top left",whiteSpace:"nowrap",overflow:"hidden",textOverflow:"ellipsis",maxWidth:"100%"},g.formControl&&{position:"absolute",left:0,top:0,transform:"translate(0, 20px) scale(1)"},"small"===g.size&&{transform:"translate(0, 17px) scale(1)"},g.shrink&&{transform:"translate(0, -1.5px) scale(0.75)",transformOrigin:"top left",maxWidth:"133%"},!g.disableAnimation&&{transition:e.transitions.create(["color","transform","max-width"],{duration:e.transitions.duration.shorter,easing:e.transitions.easing.easeOut})},"filled"===g.variant&&(0,he.Z)({zIndex:1,pointerEvents:"none",transform:"translate(12px, 16px) scale(1)",maxWidth:"calc(100% - 24px)"},"small"===g.size&&{transform:"translate(12px, 13px) scale(1)"},g.shrink&&(0,he.Z)({userSelect:"none",pointerEvents:"auto",transform:"translate(12px, 7px) scale(0.75)",maxWidth:"calc(133% - 24px)"},"small"===g.size&&{transform:"translate(12px, 4px) scale(0.75)"})),"outlined"===g.variant&&(0,he.Z)({zIndex:1,pointerEvents:"none",transform:"translate(14px, 16px) scale(1)",maxWidth:"calc(100% - 24px)"},"small"===g.size&&{transform:"translate(14px, 9px) scale(1)"},g.shrink&&{userSelect:"none",pointerEvents:"auto",maxWidth:"calc(133% - 32px)",transform:"translate(14px, -9px) scale(0.75)"})))),el=g.forwardRef((function(e,g){const l=(0,We.Z)({name:"MuiInputLabel",props:e}),{disableAnimation:t=!1,shrink:n,className:o}=l,I=(0,Ge.Z)(l,$g),C=Ee();let r=n;void 0===r&&C&&(r=C.filled||C.focused||C.adornedStart);const a=Me({props:l,muiFormControl:C,states:["size","variant","required","focused"]}),i=(0,he.Z)({},l,{disableAnimation:t,formControl:C,shrink:r,size:a.size,variant:a.variant,required:a.required,focused:a.focused}),c=(e=>{const{classes:g,formControl:l,size:t,shrink:n,disableAnimation:o,variant:I,required:C}=e,r={root:["root",l&&"formControl",!o&&"animated",n&&"shrink",t&&"normal"!==t&&`size${(0,Le.Z)(t)}`,I],asterisk:[C&&"asterisk"]},a=(0,Be.Z)(r,qg,g);return(0,he.Z)({},g,a)})(i);return(0,we.jsx)(_g,(0,he.Z)({"data-shrink":r,ownerState:i,ref:g,className:(0,ye.Z)(c.root,o)},I,{classes:c}))}));var gl=n(8502);function ll(e){return(0,rg.Z)("MuiFormControl",e)}(0,Cg.Z)("MuiFormControl",["root","marginNone","marginNormal","marginDense","fullWidth","disabled"]);const tl=["children","className","color","component","disabled","error","focused","fullWidth","hiddenLabel","margin","required","size","variant"],nl=(0,Ve.ZP)("div",{name:"MuiFormControl",slot:"Root",overridesResolver:({ownerState:e},g)=>(0,he.Z)({},g.root,g[`margin${(0,Le.Z)(e.margin)}`],e.fullWidth&&g.fullWidth)})((({ownerState:e})=>(0,he.Z)({display:"inline-flex",flexDirection:"column",position:"relative",minWidth:0,padding:0,margin:0,border:0,verticalAlign:"top"},"normal"===e.margin&&{marginTop:16,marginBottom:8},"dense"===e.margin&&{marginTop:8,marginBottom:4},e.fullWidth&&{width:"100%"}))),ol=g.forwardRef((function(e,l){const t=(0,We.Z)({props:e,name:"MuiFormControl"}),{children:n,className:o,color:I="primary",component:C="div",disabled:r=!1,error:a=!1,focused:i,fullWidth:c=!1,hiddenLabel:s=!1,margin:d="none",required:u=!1,size:A="medium",variant:m="outlined"}=t,b=(0,Ge.Z)(t,tl),p=(0,he.Z)({},t,{color:I,component:C,disabled:r,error:a,fullWidth:c,hiddenLabel:s,margin:d,required:u,size:A,variant:m}),Z=(e=>{const{classes:g,margin:l,fullWidth:t}=e,n={root:["root","none"!==l&&`margin${(0,Le.Z)(l)}`,t&&"fullWidth"]};return(0,Be.Z)(n,ll,g)})(p),[h,G]=g.useState((()=>{let e=!1;return n&&g.Children.forEach(n,(g=>{if(!(0,gl.Z)(g,["Input","Select"]))return;const l=(0,gl.Z)(g,["Select"])?g.props.input:g;l&&l.props.startAdornment&&(e=!0)})),e})),[y,B]=g.useState((()=>{let e=!1;return n&&g.Children.forEach(n,(g=>{(0,gl.Z)(g,["Input","Select"])&&(Ig(g.props,!0)||Ig(g.props.inputProps,!0))&&(e=!0)})),e})),[S,V]=g.useState(!1);r&&S&&V(!1);const W=void 0===i||r?S:i;let R;const f=g.useMemo((()=>({adornedStart:h,setAdornedStart:G,color:I,disabled:r,error:a,filled:y,focused:W,fullWidth:c,hiddenLabel:s,size:A,onBlur:()=>{V(!1)},onEmpty:()=>{B(!1)},onFilled:()=>{B(!0)},onFocus:()=>{V(!0)},registerEffect:R,required:u,variant:m})),[h,I,r,a,y,W,c,s,R,u,A,m]);return(0,we.jsx)(ze.Provider,{value:f,children:(0,we.jsx)(nl,(0,he.Z)({as:C,ownerState:p,className:(0,ye.Z)(Z.root,o),ref:l},b,{children:n}))})}));function Il(e){return(0,rg.Z)("MuiFormHelperText",e)}const Cl=(0,Cg.Z)("MuiFormHelperText",["root","error","disabled","sizeSmall","sizeMedium","contained","focused","filled","required"]);var rl;const al=["children","className","component","disabled","error","filled","focused","margin","required","variant"],il=(0,Ve.ZP)("p",{name:"MuiFormHelperText",slot:"Root",overridesResolver:(e,g)=>{const{ownerState:l}=e;return[g.root,l.size&&g[`size${(0,Le.Z)(l.size)}`],l.contained&&g.contained,l.filled&&g.filled]}})((({theme:e,ownerState:g})=>(0,he.Z)({color:(e.vars||e).palette.text.secondary},e.typography.caption,{textAlign:"left",marginTop:3,marginRight:0,marginBottom:0,marginLeft:0,[`&.${Cl.disabled}`]:{color:(e.vars||e).palette.text.disabled},[`&.${Cl.error}`]:{color:(e.vars||e).palette.error.main}},"small"===g.size&&{marginTop:4},g.contained&&{marginLeft:14,marginRight:14}))),cl=g.forwardRef((function(e,g){const l=(0,We.Z)({props:e,name:"MuiFormHelperText"}),{children:t,className:n,component:o="p"}=l,I=(0,Ge.Z)(l,al),C=Me({props:l,muiFormControl:Ee(),states:["variant","size","disabled","error","filled","focused","required"]}),r=(0,he.Z)({},l,{component:o,contained:"filled"===C.variant||"outlined"===C.variant,variant:C.variant,size:C.size,disabled:C.disabled,error:C.error,filled:C.filled,focused:C.focused,required:C.required}),a=(e=>{const{classes:g,contained:l,size:t,disabled:n,error:o,filled:I,focused:C,required:r}=e,a={root:["root",n&&"disabled",o&&"error",t&&`size${(0,Le.Z)(t)}`,l&&"contained",C&&"focused",I&&"filled",r&&"required"]};return(0,Be.Z)(a,Il,g)})(r);return(0,we.jsx)(il,(0,he.Z)({as:o,ownerState:r,className:(0,ye.Z)(a.root,n),ref:g},I,{children:" "===t?rl||(rl=(0,we.jsx)("span",{className:"notranslate",children:""})):t}))}));n(9864);var sl=n(8038);function dl(e,g,l){return void 0===e||xe(e)?g:(0,he.Z)({},g,{ownerState:(0,he.Z)({},g.ownerState,l)})}function ul(e,g=[]){if(void 0===e)return{};const l={};return Object.keys(e).filter((l=>l.match(/^on[A-Z]/)&&"function"==typeof e[l]&&!g.includes(l))).forEach((g=>{l[g]=e[g]})),l}function Al(e){if(void 0===e)return{};const g={};return Object.keys(e).filter((g=>!(g.match(/^on[A-Z]/)&&"function"==typeof e[g]))).forEach((l=>{g[l]=e[l]})),g}const ml=["elementType","externalSlotProps","ownerState","skipResolvingSlotProps"];function bl(e){var g;const{elementType:l,externalSlotProps:t,ownerState:n,skipResolvingSlotProps:o=!1}=e,I=(0,Ge.Z)(e,ml),C=o?{}:function(e,g,l){return"function"==typeof e?e(g,void 0):e}(t,n),{props:r,internalRef:a}=function(e){const{getSlotProps:g,additionalProps:l,externalSlotProps:t,externalForwardedProps:n,className:o}=e;if(!g){const e=(0,ye.Z)(null==l?void 0:l.className,o,null==n?void 0:n.className,null==t?void 0:t.className),g=(0,he.Z)({},null==l?void 0:l.style,null==n?void 0:n.style,null==t?void 0:t.style),I=(0,he.Z)({},l,n,t);return e.length>0&&(I.className=e),Object.keys(g).length>0&&(I.style=g),{props:I,internalRef:void 0}}const I=ul((0,he.Z)({},n,t)),C=Al(t),r=Al(n),a=g(I),i=(0,ye.Z)(null==a?void 0:a.className,null==l?void 0:l.className,o,null==n?void 0:n.className,null==t?void 0:t.className),c=(0,he.Z)({},null==a?void 0:a.style,null==l?void 0:l.style,null==n?void 0:n.style,null==t?void 0:t.style),s=(0,he.Z)({},a,l,r,C);return i.length>0&&(s.className=i),Object.keys(c).length>0&&(s.style=c),{props:s,internalRef:a.ref}}((0,he.Z)({},I,{externalSlotProps:C})),i=(0,ve.Z)(a,null==C?void 0:C.ref,null==(g=e.additionalProps)?void 0:g.ref);return dl(l,(0,he.Z)({},r,{ref:i}),n)}const pl=g.createContext({});function Zl(e){return(0,rg.Z)("MuiList",e)}(0,Cg.Z)("MuiList",["root","padding","dense","subheader"]);const hl=["children","className","component","dense","disablePadding","subheader"],Gl=(0,Ve.ZP)("ul",{name:"MuiList",slot:"Root",overridesResolver:(e,g)=>{const{ownerState:l}=e;return[g.root,!l.disablePadding&&g.padding,l.dense&&g.dense,l.subheader&&g.subheader]}})((({ownerState:e})=>(0,he.Z)({listStyle:"none",margin:0,padding:0,position:"relative"},!e.disablePadding&&{paddingTop:8,paddingBottom:8},e.subheader&&{paddingTop:0}))),yl=g.forwardRef((function(e,l){const t=(0,We.Z)({props:e,name:"MuiList"}),{children:n,className:o,component:I="ul",dense:C=!1,disablePadding:r=!1,subheader:a}=t,i=(0,Ge.Z)(t,hl),c=g.useMemo((()=>({dense:C})),[C]),s=(0,he.Z)({},t,{component:I,dense:C,disablePadding:r}),d=(e=>{const{classes:g,disablePadding:l,dense:t,subheader:n}=e,o={root:["root",!l&&"padding",t&&"dense",n&&"subheader"]};return(0,Be.Z)(o,Zl,g)})(s);return(0,we.jsx)(pl.Provider,{value:c,children:(0,we.jsxs)(Gl,(0,he.Z)({as:I,className:(0,ye.Z)(d.root,o),ref:l,ownerState:s},i,{children:[a,n]}))})}));function Bl(e){const g=e.documentElement.clientWidth;return Math.abs(window.innerWidth-g)}const Sl=Bl,Vl=["actions","autoFocus","autoFocusItem","children","className","disabledItemsFocusable","disableListWrap","onKeyDown","variant"];function Wl(e,g,l){return e===g?e.firstChild:g&&g.nextElementSibling?g.nextElementSibling:l?null:e.firstChild}function Rl(e,g,l){return e===g?l?e.firstChild:e.lastChild:g&&g.previousElementSibling?g.previousElementSibling:l?null:e.lastChild}function fl(e,g){if(void 0===g)return!0;let l=e.innerText;return void 0===l&&(l=e.textContent),l=l.trim().toLowerCase(),0!==l.length&&(g.repeating?l[0]===g.keys[0]:0===l.indexOf(g.keys.join("")))}function vl(e,g,l,t,n,o){let I=!1,C=n(e,g,!!g&&l);for(;C;){if(C===e.firstChild){if(I)return!1;I=!0}const g=!t&&(C.disabled||"true"===C.getAttribute("aria-disabled"));if(C.hasAttribute("tabindex")&&fl(C,o)&&!g)return C.focus(),!0;C=n(e,C,l)}return!1}const kl=g.forwardRef((function(e,l){const{actions:t,autoFocus:n=!1,autoFocusItem:o=!1,children:I,className:C,disabledItemsFocusable:r=!1,disableListWrap:a=!1,onKeyDown:i,variant:c="selectedMenu"}=e,s=(0,Ge.Z)(e,Vl),d=g.useRef(null),u=g.useRef({keys:[],repeating:!0,previousKeyMatched:!0,lastTime:null});(0,Qe.Z)((()=>{n&&d.current.focus()}),[n]),g.useImperativeHandle(t,(()=>({adjustStyleForScrollbar:(e,g)=>{const l=!d.current.style.width;if(e.clientHeight<d.current.clientHeight&&l){const l=`${Sl((0,sl.Z)(e))}px`;d.current.style["rtl"===g.direction?"paddingLeft":"paddingRight"]=l,d.current.style.width=`calc(100% + ${l})`}return d.current}})),[]);const A=(0,Ue.Z)(d,l);let m=-1;g.Children.forEach(I,((e,l)=>{g.isValidElement(e)?(e.props.disabled||("selectedMenu"===c&&e.props.selected||-1===m)&&(m=l),m===l&&(e.props.disabled||e.props.muiSkipListHighlight||e.type.muiSkipListHighlight)&&(m+=1,m>=I.length&&(m=-1))):m===l&&(m+=1,m>=I.length&&(m=-1))}));const b=g.Children.map(I,((e,l)=>{if(l===m){const l={};return o&&(l.autoFocus=!0),void 0===e.props.tabIndex&&"selectedMenu"===c&&(l.tabIndex=0),g.cloneElement(e,l)}return e}));return(0,we.jsx)(yl,(0,he.Z)({role:"menu",ref:A,className:C,onKeyDown:e=>{const g=d.current,l=e.key,t=(0,sl.Z)(g).activeElement;if("ArrowDown"===l)e.preventDefault(),vl(g,t,a,r,Wl);else if("ArrowUp"===l)e.preventDefault(),vl(g,t,a,r,Rl);else if("Home"===l)e.preventDefault(),vl(g,null,a,r,Wl);else if("End"===l)e.preventDefault(),vl(g,null,a,r,Rl);else if(1===l.length){const n=u.current,o=l.toLowerCase(),I=performance.now();n.keys.length>0&&(I-n.lastTime>500?(n.keys=[],n.repeating=!0,n.previousKeyMatched=!0):n.repeating&&o!==n.keys[0]&&(n.repeating=!1)),n.lastTime=I,n.keys.push(o);const C=t&&!n.repeating&&fl(t,n);n.previousKeyMatched&&(C||vl(g,t,!1,r,Wl,n))?e.preventDefault():n.previousKeyMatched=!1}i&&i(e)},tabIndex:n?0:-1},s,{children:b}))}));var Xl=n(7144),Jl=n(5340);function wl(e,g){return wl=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(e,g){return e.__proto__=g,e},wl(e,g)}function Yl(e,g){e.prototype=Object.create(g.prototype),e.prototype.constructor=e,wl(e,g)}const Hl=g.createContext(null);var Fl="unmounted",Nl="exited",Kl="entering",xl="entered",Ml="exiting",zl=function(e){function l(g,l){var t;t=e.call(this,g,l)||this;var n,o=l&&!l.isMounting?g.enter:g.appear;return t.appearStatus=null,g.in?o?(n=Nl,t.appearStatus=Kl):n=xl:n=g.unmountOnExit||g.mountOnEnter?Fl:Nl,t.state={status:n},t.nextCallback=null,t}Yl(l,e),l.getDerivedStateFromProps=function(e,g){return e.in&&g.status===Fl?{status:Nl}:null};var n=l.prototype;return n.componentDidMount=function(){this.updateStatus(!0,this.appearStatus)},n.componentDidUpdate=function(e){var g=null;if(e!==this.props){var l=this.state.status;this.props.in?l!==Kl&&l!==xl&&(g=Kl):l!==Kl&&l!==xl||(g=Ml)}this.updateStatus(!1,g)},n.componentWillUnmount=function(){this.cancelNextCallback()},n.getTimeouts=function(){var e,g,l,t=this.props.timeout;return e=g=l=t,null!=t&&"number"!=typeof t&&(e=t.exit,g=t.enter,l=void 0!==t.appear?t.appear:g),{exit:e,enter:g,appear:l}},n.updateStatus=function(e,g){if(void 0===e&&(e=!1),null!==g)if(this.cancelNextCallback(),g===Kl){if(this.props.unmountOnExit||this.props.mountOnEnter){var l=this.props.nodeRef?this.props.nodeRef.current:t.findDOMNode(this);l&&function(e){e.scrollTop}(l)}this.performEnter(e)}else this.performExit();else this.props.unmountOnExit&&this.state.status===Nl&&this.setState({status:Fl})},n.performEnter=function(e){var g=this,l=this.props.enter,n=this.context?this.context.isMounting:e,o=this.props.nodeRef?[n]:[t.findDOMNode(this),n],I=o[0],C=o[1],r=this.getTimeouts(),a=n?r.appear:r.enter;e||l?(this.props.onEnter(I,C),this.safeSetState({status:Kl},(function(){g.props.onEntering(I,C),g.onTransitionEnd(a,(function(){g.safeSetState({status:xl},(function(){g.props.onEntered(I,C)}))}))}))):this.safeSetState({status:xl},(function(){g.props.onEntered(I)}))},n.performExit=function(){var e=this,g=this.props.exit,l=this.getTimeouts(),n=this.props.nodeRef?void 0:t.findDOMNode(this);g?(this.props.onExit(n),this.safeSetState({status:Ml},(function(){e.props.onExiting(n),e.onTransitionEnd(l.exit,(function(){e.safeSetState({status:Nl},(function(){e.props.onExited(n)}))}))}))):this.safeSetState({status:Nl},(function(){e.props.onExited(n)}))},n.cancelNextCallback=function(){null!==this.nextCallback&&(this.nextCallback.cancel(),this.nextCallback=null)},n.safeSetState=function(e,g){g=this.setNextCallback(g),this.setState(e,g)},n.setNextCallback=function(e){var g=this,l=!0;return this.nextCallback=function(t){l&&(l=!1,g.nextCallback=null,e(t))},this.nextCallback.cancel=function(){l=!1},this.nextCallback},n.onTransitionEnd=function(e,g){this.setNextCallback(g);var l=this.props.nodeRef?this.props.nodeRef.current:t.findDOMNode(this),n=null==e&&!this.props.addEndListener;if(l&&!n){if(this.props.addEndListener){var o=this.props.nodeRef?[this.nextCallback]:[l,this.nextCallback],I=o[0],C=o[1];this.props.addEndListener(I,C)}null!=e&&setTimeout(this.nextCallback,e)}else setTimeout(this.nextCallback,0)},n.render=function(){var e=this.state.status;if(e===Fl)return null;var l=this.props,t=l.children,n=(l.in,l.mountOnEnter,l.unmountOnExit,l.appear,l.enter,l.exit,l.timeout,l.addEndListener,l.onEnter,l.onEntering,l.onEntered,l.onExit,l.onExiting,l.onExited,l.nodeRef,(0,Ge.Z)(l,["children","in","mountOnEnter","unmountOnExit","appear","enter","exit","timeout","addEndListener","onEnter","onEntering","onEntered","onExit","onExiting","onExited","nodeRef"]));return g.createElement(Hl.Provider,{value:null},"function"==typeof t?t(e,n):g.cloneElement(g.Children.only(t),n))},l}(g.Component);function El(){}zl.contextType=Hl,zl.propTypes={},zl.defaultProps={in:!1,mountOnEnter:!1,unmountOnExit:!1,appear:!1,enter:!0,exit:!0,onEnter:El,onEntering:El,onEntered:El,onExit:El,onExiting:El,onExited:El},zl.UNMOUNTED=Fl,zl.EXITED=Nl,zl.ENTERING=Kl,zl.ENTERED=xl,zl.EXITING=Ml;const Ll=zl;function Ul(){const e=(0,eg.Z)(lg.Z);return e[tg.Z]||e}const Ql=e=>e.scrollTop;function Dl(e,g){var l,t;const{timeout:n,easing:o,style:I={}}=e;return{duration:null!=(l=I.transitionDuration)?l:"number"==typeof n?n:n[g.mode]||0,easing:null!=(t=I.transitionTimingFunction)?t:"object"==typeof o?o[g.mode]:o,delay:I.transitionDelay}}const Tl=["addEndListener","appear","children","easing","in","onEnter","onEntered","onEntering","onExit","onExited","onExiting","style","timeout","TransitionComponent"];function Pl(e){return`scale(${e}, ${e**2})`}const jl={entering:{opacity:1,transform:Pl(1)},entered:{opacity:1,transform:"none"}},Ol="undefined"!=typeof navigator&&/^((?!chrome|android).)*(safari|mobile)/i.test(navigator.userAgent)&&/(os |version\/)15(.|_)4/i.test(navigator.userAgent),ql=g.forwardRef((function(e,l){const{addEndListener:t,appear:n=!0,children:o,easing:I,in:C,onEnter:r,onEntered:a,onEntering:i,onExit:c,onExited:s,onExiting:d,style:u,timeout:A="auto",TransitionComponent:m=Ll}=e,b=(0,Ge.Z)(e,Tl),p=g.useRef(),Z=g.useRef(),h=Ul(),G=g.useRef(null),y=(0,Ue.Z)(G,o.ref,l),B=e=>g=>{if(e){const l=G.current;void 0===g?e(l):e(l,g)}},S=B(i),V=B(((e,g)=>{Ql(e);const{duration:l,delay:t,easing:n}=Dl({style:u,timeout:A,easing:I},{mode:"enter"});let o;"auto"===A?(o=h.transitions.getAutoHeightDuration(e.clientHeight),Z.current=o):o=l,e.style.transition=[h.transitions.create("opacity",{duration:o,delay:t}),h.transitions.create("transform",{duration:Ol?o:.666*o,delay:t,easing:n})].join(","),r&&r(e,g)})),W=B(a),R=B(d),f=B((e=>{const{duration:g,delay:l,easing:t}=Dl({style:u,timeout:A,easing:I},{mode:"exit"});let n;"auto"===A?(n=h.transitions.getAutoHeightDuration(e.clientHeight),Z.current=n):n=g,e.style.transition=[h.transitions.create("opacity",{duration:n,delay:l}),h.transitions.create("transform",{duration:Ol?n:.666*n,delay:Ol?l:l||.333*n,easing:t})].join(","),e.style.opacity=0,e.style.transform=Pl(.75),c&&c(e)})),v=B(s);return g.useEffect((()=>()=>{clearTimeout(p.current)}),[]),(0,we.jsx)(m,(0,he.Z)({appear:n,in:C,nodeRef:G,onEnter:V,onEntered:W,onEntering:S,onExit:f,onExited:v,onExiting:R,addEndListener:e=>{"auto"===A&&(p.current=setTimeout(e,Z.current||0)),t&&t(G.current,e)},timeout:"auto"===A?null:A},b,{children:(e,l)=>g.cloneElement(o,(0,he.Z)({style:(0,he.Z)({opacity:0,transform:Pl(.75),visibility:"exited"!==e||C?void 0:"hidden"},jl[e],u,o.props.style),ref:y},l))}))}));ql.muiSupportAuto=!0;const $l=ql;var _l=n(2690),et=n(9948),gt=n(9064);function lt(e,g){g?e.setAttribute("aria-hidden","true"):e.removeAttribute("aria-hidden")}function tt(e){return parseInt((0,ke.Z)(e).getComputedStyle(e).paddingRight,10)||0}function nt(e,g,l,t,n){const o=[g,l,...t];[].forEach.call(e.children,(e=>{const g=-1===o.indexOf(e),l=!function(e){const g=-1!==["TEMPLATE","SCRIPT","STYLE","LINK","MAP","META","NOSCRIPT","PICTURE","COL","COLGROUP","PARAM","SLOT","SOURCE","TRACK"].indexOf(e.tagName),l="INPUT"===e.tagName&&"hidden"===e.getAttribute("type");return g||l}(e);g&&l&&lt(e,n)}))}function ot(e,g){let l=-1;return e.some(((e,t)=>!!g(e)&&(l=t,!0))),l}const It=new class{constructor(){this.containers=void 0,this.modals=void 0,this.modals=[],this.containers=[]}add(e,g){let l=this.modals.indexOf(e);if(-1!==l)return l;l=this.modals.length,this.modals.push(e),e.modalRef&&lt(e.modalRef,!1);const t=function(e){const g=[];return[].forEach.call(e.children,(e=>{"true"===e.getAttribute("aria-hidden")&&g.push(e)})),g}(g);nt(g,e.mount,e.modalRef,t,!0);const n=ot(this.containers,(e=>e.container===g));return-1!==n?(this.containers[n].modals.push(e),l):(this.containers.push({modals:[e],container:g,restore:null,hiddenSiblings:t}),l)}mount(e,g){const l=ot(this.containers,(g=>-1!==g.modals.indexOf(e))),t=this.containers[l];t.restore||(t.restore=function(e,g){const l=[],t=e.container;if(!g.disableScrollLock){if(function(e){const g=(0,_l.Z)(e);return g.body===e?(0,ke.Z)(e).innerWidth>g.documentElement.clientWidth:e.scrollHeight>e.clientHeight}(t)){const e=Bl((0,_l.Z)(t));l.push({value:t.style.paddingRight,property:"padding-right",el:t}),t.style.paddingRight=`${tt(t)+e}px`;const g=(0,_l.Z)(t).querySelectorAll(".mui-fixed");[].forEach.call(g,(g=>{l.push({value:g.style.paddingRight,property:"padding-right",el:g}),g.style.paddingRight=`${tt(g)+e}px`}))}let e;if(t.parentNode instanceof DocumentFragment)e=(0,_l.Z)(t).body;else{const g=t.parentElement,l=(0,ke.Z)(t);e="HTML"===(null==g?void 0:g.nodeName)&&"scroll"===l.getComputedStyle(g).overflowY?g:t}l.push({value:e.style.overflow,property:"overflow",el:e},{value:e.style.overflowX,property:"overflow-x",el:e},{value:e.style.overflowY,property:"overflow-y",el:e}),e.style.overflow="hidden"}return()=>{l.forEach((({value:e,el:g,property:l})=>{e?g.style.setProperty(l,e):g.style.removeProperty(l)}))}}(t,g))}remove(e,g=!0){const l=this.modals.indexOf(e);if(-1===l)return l;const t=ot(this.containers,(g=>-1!==g.modals.indexOf(e))),n=this.containers[t];if(n.modals.splice(n.modals.indexOf(e),1),this.modals.splice(l,1),0===n.modals.length)n.restore&&n.restore(),e.modalRef&&lt(e.modalRef,g),nt(n.container,e.mount,e.modalRef,n.hiddenSiblings,!1),this.containers.splice(t,1);else{const e=n.modals[n.modals.length-1];e.modalRef&&lt(e.modalRef,!1)}return l}isTopModal(e){return this.modals.length>0&&this.modals[this.modals.length-1]===e}};const Ct=["input","select","textarea","a[href]","button","[tabindex]","audio[controls]","video[controls]",'[contenteditable]:not([contenteditable="false"])'].join(",");function rt(e){const g=[],l=[];return Array.from(e.querySelectorAll(Ct)).forEach(((e,t)=>{const n=function(e){const g=parseInt(e.getAttribute("tabindex")||"",10);return Number.isNaN(g)?"true"===e.contentEditable||("AUDIO"===e.nodeName||"VIDEO"===e.nodeName||"DETAILS"===e.nodeName)&&null===e.getAttribute("tabindex")?0:e.tabIndex:g}(e);-1!==n&&function(e){return!(e.disabled||"INPUT"===e.tagName&&"hidden"===e.type||function(e){if("INPUT"!==e.tagName||"radio"!==e.type)return!1;if(!e.name)return!1;const g=g=>e.ownerDocument.querySelector(`input[type="radio"]${g}`);let l=g(`[name="${e.name}"]:checked`);return l||(l=g(`[name="${e.name}"]`)),l!==e}(e))}(e)&&(0===n?g.push(e):l.push({documentOrder:t,tabIndex:n,node:e}))})),l.sort(((e,g)=>e.tabIndex===g.tabIndex?e.documentOrder-g.documentOrder:e.tabIndex-g.tabIndex)).map((e=>e.node)).concat(g)}function at(){return!0}function it(e){const{children:l,disableAutoFocus:t=!1,disableEnforceFocus:n=!1,disableRestoreFocus:o=!1,getTabbable:I=rt,isEnabled:C=at,open:r}=e,a=g.useRef(!1),i=g.useRef(null),c=g.useRef(null),s=g.useRef(null),d=g.useRef(null),u=g.useRef(!1),A=g.useRef(null),m=(0,ve.Z)(l.ref,A),b=g.useRef(null);g.useEffect((()=>{r&&A.current&&(u.current=!t)}),[t,r]),g.useEffect((()=>{if(!r||!A.current)return;const e=(0,_l.Z)(A.current);return A.current.contains(e.activeElement)||(A.current.hasAttribute("tabIndex")||A.current.setAttribute("tabIndex","-1"),u.current&&A.current.focus()),()=>{o||(s.current&&s.current.focus&&(a.current=!0,s.current.focus()),s.current=null)}}),[r]),g.useEffect((()=>{if(!r||!A.current)return;const e=(0,_l.Z)(A.current),g=g=>{b.current=g,!n&&C()&&"Tab"===g.key&&e.activeElement===A.current&&g.shiftKey&&(a.current=!0,c.current&&c.current.focus())},l=()=>{const g=A.current;if(null===g)return;if(!e.hasFocus()||!C()||a.current)return void(a.current=!1);if(g.contains(e.activeElement))return;if(n&&e.activeElement!==i.current&&e.activeElement!==c.current)return;if(e.activeElement!==d.current)d.current=null;else if(null!==d.current)return;if(!u.current)return;let l=[];if(e.activeElement!==i.current&&e.activeElement!==c.current||(l=I(A.current)),l.length>0){var t,o;const e=Boolean((null==(t=b.current)?void 0:t.shiftKey)&&"Tab"===(null==(o=b.current)?void 0:o.key)),g=l[0],n=l[l.length-1];"string"!=typeof g&&"string"!=typeof n&&(e?n.focus():g.focus())}else g.focus()};e.addEventListener("focusin",l),e.addEventListener("keydown",g,!0);const t=setInterval((()=>{e.activeElement&&"BODY"===e.activeElement.tagName&&l()}),50);return()=>{clearInterval(t),e.removeEventListener("focusin",l),e.removeEventListener("keydown",g,!0)}}),[t,n,o,C,r,I]);const p=e=>{null===s.current&&(s.current=e.relatedTarget),u.current=!0};return(0,we.jsxs)(g.Fragment,{children:[(0,we.jsx)("div",{tabIndex:r?0:-1,onFocus:p,ref:i,"data-testid":"sentinelStart"}),g.cloneElement(l,{ref:m,onFocus:e=>{null===s.current&&(s.current=e.relatedTarget),u.current=!0,d.current=e.target;const g=l.props.onFocus;g&&g(e)}}),(0,we.jsx)("div",{tabIndex:r?0:-1,onFocus:p,ref:c,"data-testid":"sentinelEnd"})]})}var ct=n(7960);const st=g.forwardRef((function(e,l){const{children:n,container:o,disablePortal:I=!1}=e,[C,r]=g.useState(null),a=(0,ve.Z)(g.isValidElement(n)?n.ref:null,l);if((0,Xe.Z)((()=>{I||r(function(e){return"function"==typeof e?e():e}(o)||document.body)}),[o,I]),(0,Xe.Z)((()=>{if(C&&!I)return(0,ct.Z)(l,C),()=>{(0,ct.Z)(l,null)}}),[l,C,I]),I){if(g.isValidElement(n)){const e={ref:a};return g.cloneElement(n,e)}return(0,we.jsx)(g.Fragment,{children:n})}return(0,we.jsx)(g.Fragment,{children:C?t.createPortal(n,C):C})})),dt=["addEndListener","appear","children","easing","in","onEnter","onEntered","onEntering","onExit","onExited","onExiting","style","timeout","TransitionComponent"],ut={entering:{opacity:1},entered:{opacity:1}},At=g.forwardRef((function(e,l){const t=Ul(),n={enter:t.transitions.duration.enteringScreen,exit:t.transitions.duration.leavingScreen},{addEndListener:o,appear:I=!0,children:C,easing:r,in:a,onEnter:i,onEntered:c,onEntering:s,onExit:d,onExited:u,onExiting:A,style:m,timeout:b=n,TransitionComponent:p=Ll}=e,Z=(0,Ge.Z)(e,dt),h=g.useRef(null),G=(0,Ue.Z)(h,C.ref,l),y=e=>g=>{if(e){const l=h.current;void 0===g?e(l):e(l,g)}},B=y(s),S=y(((e,g)=>{Ql(e);const l=Dl({style:m,timeout:b,easing:r},{mode:"enter"});e.style.webkitTransition=t.transitions.create("opacity",l),e.style.transition=t.transitions.create("opacity",l),i&&i(e,g)})),V=y(c),W=y(A),R=y((e=>{const g=Dl({style:m,timeout:b,easing:r},{mode:"exit"});e.style.webkitTransition=t.transitions.create("opacity",g),e.style.transition=t.transitions.create("opacity",g),d&&d(e)})),f=y(u);return(0,we.jsx)(p,(0,he.Z)({appear:I,in:a,nodeRef:h,onEnter:S,onEntered:V,onEntering:B,onExit:R,onExited:f,onExiting:W,addEndListener:e=>{o&&o(h.current,e)},timeout:b},Z,{children:(e,l)=>g.cloneElement(C,(0,he.Z)({style:(0,he.Z)({opacity:0,visibility:"exited"!==e||a?void 0:"hidden"},ut[e],m,C.props.style),ref:G},l))}))})),mt=At;function bt(e){return(0,rg.Z)("MuiBackdrop",e)}(0,Cg.Z)("MuiBackdrop",["root","invisible"]);const pt=["children","className","component","components","componentsProps","invisible","open","slotProps","slots","TransitionComponent","transitionDuration"],Zt=(0,Ve.ZP)("div",{name:"MuiBackdrop",slot:"Root",overridesResolver:(e,g)=>{const{ownerState:l}=e;return[g.root,l.invisible&&g.invisible]}})((({ownerState:e})=>(0,he.Z)({position:"fixed",display:"flex",alignItems:"center",justifyContent:"center",right:0,bottom:0,top:0,left:0,backgroundColor:"rgba(0, 0, 0, 0.5)",WebkitTapHighlightColor:"transparent"},e.invisible&&{backgroundColor:"transparent"}))),ht=g.forwardRef((function(e,g){var l,t,n;const o=(0,We.Z)({props:e,name:"MuiBackdrop"}),{children:I,className:C,component:r="div",components:a={},componentsProps:i={},invisible:c=!1,open:s,slotProps:d={},slots:u={},TransitionComponent:A=mt,transitionDuration:m}=o,b=(0,Ge.Z)(o,pt),p=(0,he.Z)({},o,{component:r,invisible:c}),Z=(e=>{const{classes:g,invisible:l}=e,t={root:["root",l&&"invisible"]};return(0,Be.Z)(t,bt,g)})(p),h=null!=(l=d.root)?l:i.root;return(0,we.jsx)(A,(0,he.Z)({in:s,timeout:m},b,{children:(0,we.jsx)(Zt,(0,he.Z)({"aria-hidden":!0},h,{as:null!=(t=null!=(n=u.root)?n:a.Root)?t:r,className:(0,ye.Z)(Z.root,C,null==h?void 0:h.className),ownerState:(0,he.Z)({},p,null==h?void 0:h.ownerState),classes:Z,ref:g,children:I}))}))}));function Gt(e){return(0,rg.Z)("MuiModal",e)}(0,Cg.Z)("MuiModal",["root","hidden","backdrop"]);const yt=["BackdropComponent","BackdropProps","classes","className","closeAfterTransition","children","container","component","components","componentsProps","disableAutoFocus","disableEnforceFocus","disableEscapeKeyDown","disablePortal","disableRestoreFocus","disableScrollLock","hideBackdrop","keepMounted","onBackdropClick","onClose","onTransitionEnter","onTransitionExited","open","slotProps","slots","theme"],Bt=(0,Ve.ZP)("div",{name:"MuiModal",slot:"Root",overridesResolver:(e,g)=>{const{ownerState:l}=e;return[g.root,!l.open&&l.exited&&g.hidden]}})((({theme:e,ownerState:g})=>(0,he.Z)({position:"fixed",zIndex:(e.vars||e).zIndex.modal,right:0,bottom:0,top:0,left:0},!g.open&&g.exited&&{visibility:"hidden"}))),St=(0,Ve.ZP)(ht,{name:"MuiModal",slot:"Backdrop",overridesResolver:(e,g)=>g.backdrop})({zIndex:-1}),Vt=g.forwardRef((function(e,l){var t,n,o,I,C,r;const a=(0,We.Z)({name:"MuiModal",props:e}),{BackdropComponent:i=St,BackdropProps:c,className:s,closeAfterTransition:d=!1,children:u,container:A,component:m,components:b={},componentsProps:p={},disableAutoFocus:Z=!1,disableEnforceFocus:h=!1,disableEscapeKeyDown:G=!1,disablePortal:y=!1,disableRestoreFocus:B=!1,disableScrollLock:S=!1,hideBackdrop:V=!1,keepMounted:W=!1,onBackdropClick:R,open:f,slotProps:v,slots:k}=a,X=(0,Ge.Z)(a,yt),J=(0,he.Z)({},a,{closeAfterTransition:d,disableAutoFocus:Z,disableEnforceFocus:h,disableEscapeKeyDown:G,disablePortal:y,disableRestoreFocus:B,disableScrollLock:S,hideBackdrop:V,keepMounted:W}),{getRootProps:w,getBackdropProps:Y,getTransitionProps:H,portalRef:F,isTopModal:N,exited:K,hasTransition:x}=function(e){const{container:l,disableEscapeKeyDown:t=!1,disableScrollLock:n=!1,manager:o=It,closeAfterTransition:I=!1,onTransitionEnter:C,onTransitionExited:r,children:a,onClose:i,open:c,rootRef:s}=e,d=g.useRef({}),u=g.useRef(null),A=g.useRef(null),m=(0,ve.Z)(A,s),[b,p]=g.useState(!c),Z=function(e){return!!e&&e.props.hasOwnProperty("in")}(a);let h=!0;"false"!==e["aria-hidden"]&&!1!==e["aria-hidden"]||(h=!1);const G=()=>(d.current.modalRef=A.current,d.current.mount=u.current,d.current),y=()=>{o.mount(G(),{disableScrollLock:n}),A.current&&(A.current.scrollTop=0)},B=(0,et.Z)((()=>{const e=function(e){return"function"==typeof e?e():e}(l)||(0,_l.Z)(u.current).body;o.add(G(),e),A.current&&y()})),S=g.useCallback((()=>o.isTopModal(G())),[o]),V=(0,et.Z)((e=>{u.current=e,e&&(c&&S()?y():A.current&&lt(A.current,h))})),W=g.useCallback((()=>{o.remove(G(),h)}),[h,o]);g.useEffect((()=>()=>{W()}),[W]),g.useEffect((()=>{c?B():Z&&I||W()}),[c,W,Z,I,B]);const R=e=>g=>{var l;null==(l=e.onKeyDown)||l.call(e,g),"Escape"===g.key&&229!==g.which&&S()&&(t||(g.stopPropagation(),i&&i(g,"escapeKeyDown")))},f=e=>g=>{var l;null==(l=e.onClick)||l.call(e,g),g.target===g.currentTarget&&i&&i(g,"backdropClick")};return{getRootProps:(g={})=>{const l=ul(e);delete l.onTransitionEnter,delete l.onTransitionExited;const t=(0,he.Z)({},l,g);return(0,he.Z)({role:"presentation"},t,{onKeyDown:R(t),ref:m})},getBackdropProps:(e={})=>{const g=e;return(0,he.Z)({"aria-hidden":!0},g,{onClick:f(g),open:c})},getTransitionProps:()=>({onEnter:(0,gt.Z)((()=>{p(!1),C&&C()}),null==a?void 0:a.props.onEnter),onExited:(0,gt.Z)((()=>{p(!0),r&&r(),I&&W()}),null==a?void 0:a.props.onExited)}),rootRef:m,portalRef:V,isTopModal:S,exited:b,hasTransition:Z}}((0,he.Z)({},J,{rootRef:l})),M=(0,he.Z)({},J,{exited:K}),z=(e=>{const{open:g,exited:l,classes:t}=e,n={root:["root",!g&&l&&"hidden"],backdrop:["backdrop"]};return(0,Be.Z)(n,Gt,t)})(M),E={};if(void 0===u.props.tabIndex&&(E.tabIndex="-1"),x){const{onEnter:e,onExited:g}=H();E.onEnter=e,E.onExited=g}const L=null!=(t=null!=(n=null==k?void 0:k.root)?n:b.Root)?t:Bt,U=null!=(o=null!=(I=null==k?void 0:k.backdrop)?I:b.Backdrop)?o:i,Q=null!=(C=null==v?void 0:v.root)?C:p.root,D=null!=(r=null==v?void 0:v.backdrop)?r:p.backdrop,T=bl({elementType:L,externalSlotProps:Q,externalForwardedProps:X,getSlotProps:w,additionalProps:{ref:l,as:m},ownerState:M,className:(0,ye.Z)(s,null==Q?void 0:Q.className,null==z?void 0:z.root,!M.open&&M.exited&&(null==z?void 0:z.hidden))}),P=bl({elementType:U,externalSlotProps:D,additionalProps:c,getSlotProps:e=>Y((0,he.Z)({},e,{onClick:g=>{R&&R(g),null!=e&&e.onClick&&e.onClick(g)}})),className:(0,ye.Z)(null==D?void 0:D.className,null==c?void 0:c.className,null==z?void 0:z.backdrop),ownerState:M});return W||f||x&&!K?(0,we.jsx)(st,{ref:F,container:A,disablePortal:y,children:(0,we.jsxs)(L,(0,he.Z)({},T,{children:[!V&&i?(0,we.jsx)(U,(0,he.Z)({},P)):null,(0,we.jsx)(it,{disableEnforceFocus:h,disableAutoFocus:Z,disableRestoreFocus:B,isEnabled:N,open:f,children:g.cloneElement(u,E)})]}))}):null})),Wt=Vt;var Rt=n(1796);const ft=e=>{let g;return g=e<1?5.11916*e**2:4.5*Math.log(e+1)+2,(g/100).toFixed(2)};function vt(e){return(0,rg.Z)("MuiPaper",e)}(0,Cg.Z)("MuiPaper",["root","rounded","outlined","elevation","elevation0","elevation1","elevation2","elevation3","elevation4","elevation5","elevation6","elevation7","elevation8","elevation9","elevation10","elevation11","elevation12","elevation13","elevation14","elevation15","elevation16","elevation17","elevation18","elevation19","elevation20","elevation21","elevation22","elevation23","elevation24"]);const kt=["className","component","elevation","square","variant"],Xt=(0,Ve.ZP)("div",{name:"MuiPaper",slot:"Root",overridesResolver:(e,g)=>{const{ownerState:l}=e;return[g.root,g[l.variant],!l.square&&g.rounded,"elevation"===l.variant&&g[`elevation${l.elevation}`]]}})((({theme:e,ownerState:g})=>{var l;return(0,he.Z)({backgroundColor:(e.vars||e).palette.background.paper,color:(e.vars||e).palette.text.primary,transition:e.transitions.create("box-shadow")},!g.square&&{borderRadius:e.shape.borderRadius},"outlined"===g.variant&&{border:`1px solid ${(e.vars||e).palette.divider}`},"elevation"===g.variant&&(0,he.Z)({boxShadow:(e.vars||e).shadows[g.elevation]},!e.vars&&"dark"===e.palette.mode&&{backgroundImage:`linear-gradient(${(0,Rt.Fq)("#fff",ft(g.elevation))}, ${(0,Rt.Fq)("#fff",ft(g.elevation))})`},e.vars&&{backgroundImage:null==(l=e.vars.overlays)?void 0:l[g.elevation]}))})),Jt=g.forwardRef((function(e,g){const l=(0,We.Z)({props:e,name:"MuiPaper"}),{className:t,component:n="div",elevation:o=1,square:I=!1,variant:C="elevation"}=l,r=(0,Ge.Z)(l,kt),a=(0,he.Z)({},l,{component:n,elevation:o,square:I,variant:C}),i=(e=>{const{square:g,elevation:l,variant:t,classes:n}=e,o={root:["root",t,!g&&"rounded","elevation"===t&&`elevation${l}`]};return(0,Be.Z)(o,vt,n)})(a);return(0,we.jsx)(Xt,(0,he.Z)({as:n,ownerState:a,className:(0,ye.Z)(i.root,t),ref:g},r))}));function wt(e){return(0,rg.Z)("MuiPopover",e)}(0,Cg.Z)("MuiPopover",["root","paper"]);const Yt=["onEntering"],Ht=["action","anchorEl","anchorOrigin","anchorPosition","anchorReference","children","className","container","elevation","marginThreshold","open","PaperProps","slots","slotProps","transformOrigin","TransitionComponent","transitionDuration","TransitionProps","disableScrollLock"],Ft=["slotProps"];function Nt(e,g){let l=0;return"number"==typeof g?l=g:"center"===g?l=e.height/2:"bottom"===g&&(l=e.height),l}function Kt(e,g){let l=0;return"number"==typeof g?l=g:"center"===g?l=e.width/2:"right"===g&&(l=e.width),l}function xt(e){return[e.horizontal,e.vertical].map((e=>"number"==typeof e?`${e}px`:e)).join(" ")}function Mt(e){return"function"==typeof e?e():e}const zt=(0,Ve.ZP)(Wt,{name:"MuiPopover",slot:"Root",overridesResolver:(e,g)=>g.root})({}),Et=(0,Ve.ZP)(Jt,{name:"MuiPopover",slot:"Paper",overridesResolver:(e,g)=>g.paper})({position:"absolute",overflowY:"auto",overflowX:"hidden",minWidth:16,minHeight:16,maxWidth:"calc(100% - 32px)",maxHeight:"calc(100% - 32px)",outline:0}),Lt=g.forwardRef((function(e,l){var t,n,o;const I=(0,We.Z)({props:e,name:"MuiPopover"}),{action:C,anchorEl:r,anchorOrigin:a={vertical:"top",horizontal:"left"},anchorPosition:i,anchorReference:c="anchorEl",children:s,className:d,container:u,elevation:A=8,marginThreshold:m=16,open:b,PaperProps:p={},slots:Z,slotProps:h,transformOrigin:G={vertical:"top",horizontal:"left"},TransitionComponent:y=$l,transitionDuration:B="auto",TransitionProps:{onEntering:S}={},disableScrollLock:V=!1}=I,W=(0,Ge.Z)(I.TransitionProps,Yt),R=(0,Ge.Z)(I,Ht),f=null!=(t=null==h?void 0:h.paper)?t:p,v=g.useRef(),k=(0,Ue.Z)(v,f.ref),X=(0,he.Z)({},I,{anchorOrigin:a,anchorReference:c,elevation:A,marginThreshold:m,externalPaperSlotProps:f,transformOrigin:G,TransitionComponent:y,transitionDuration:B,TransitionProps:W}),J=(e=>{const{classes:g}=e;return(0,Be.Z)({root:["root"],paper:["paper"]},wt,g)})(X),w=g.useCallback((()=>{if("anchorPosition"===c)return i;const e=Mt(r),g=(e&&1===e.nodeType?e:(0,sl.Z)(v.current).body).getBoundingClientRect();return{top:g.top+Nt(g,a.vertical),left:g.left+Kt(g,a.horizontal)}}),[r,a.horizontal,a.vertical,i,c]),Y=g.useCallback((e=>({vertical:Nt(e,G.vertical),horizontal:Kt(e,G.horizontal)})),[G.horizontal,G.vertical]),H=g.useCallback((e=>{const g={width:e.offsetWidth,height:e.offsetHeight},l=Y(g);if("none"===c)return{top:null,left:null,transformOrigin:xt(l)};const t=w();let n=t.top-l.vertical,o=t.left-l.horizontal;const I=n+g.height,C=o+g.width,a=(0,Jl.Z)(Mt(r)),i=a.innerHeight-m,s=a.innerWidth-m;if(null!==m&&n<m){const e=n-m;n-=e,l.vertical+=e}else if(null!==m&&I>i){const e=I-i;n-=e,l.vertical+=e}if(null!==m&&o<m){const e=o-m;o-=e,l.horizontal+=e}else if(C>s){const e=C-s;o-=e,l.horizontal+=e}return{top:`${Math.round(n)}px`,left:`${Math.round(o)}px`,transformOrigin:xt(l)}}),[r,c,w,Y,m]),[F,N]=g.useState(b),K=g.useCallback((()=>{const e=v.current;if(!e)return;const g=H(e);null!==g.top&&(e.style.top=g.top),null!==g.left&&(e.style.left=g.left),e.style.transformOrigin=g.transformOrigin,N(!0)}),[H]);g.useEffect((()=>(V&&window.addEventListener("scroll",K),()=>window.removeEventListener("scroll",K))),[r,V,K]),g.useEffect((()=>{b&&K()})),g.useImperativeHandle(C,(()=>b?{updatePosition:()=>{K()}}:null),[b,K]),g.useEffect((()=>{if(!b)return;const e=(0,Xl.Z)((()=>{K()})),g=(0,Jl.Z)(r);return g.addEventListener("resize",e),()=>{e.clear(),g.removeEventListener("resize",e)}}),[r,b,K]);let x=B;"auto"!==B||y.muiSupportAuto||(x=void 0);const M=u||(r?(0,sl.Z)(Mt(r)).body:void 0),z=null!=(n=null==Z?void 0:Z.root)?n:zt,E=null!=(o=null==Z?void 0:Z.paper)?o:Et,L=bl({elementType:E,externalSlotProps:(0,he.Z)({},f,{style:F?f.style:(0,he.Z)({},f.style,{opacity:0})}),additionalProps:{elevation:A,ref:k},ownerState:X,className:(0,ye.Z)(J.paper,null==f?void 0:f.className)}),U=bl({elementType:z,externalSlotProps:(null==h?void 0:h.root)||{},externalForwardedProps:R,additionalProps:{ref:l,slotProps:{backdrop:{invisible:!0}},container:M,open:b},ownerState:X,className:(0,ye.Z)(J.root,d)}),{slotProps:Q}=U,D=(0,Ge.Z)(U,Ft);return(0,we.jsx)(z,(0,he.Z)({},D,!xe(z)&&{slotProps:Q,disableScrollLock:V},{children:(0,we.jsx)(y,(0,he.Z)({appear:!0,in:b,onEntering:(e,g)=>{S&&S(e,g),K()},onExited:()=>{N(!1)},timeout:x},W,{children:(0,we.jsx)(E,(0,he.Z)({},L,{children:s}))}))}))})),Ut=Lt;function Qt(e){return(0,rg.Z)("MuiMenu",e)}(0,Cg.Z)("MuiMenu",["root","paper","list"]);const Dt=["onEntering"],Tt=["autoFocus","children","className","disableAutoFocusItem","MenuListProps","onClose","open","PaperProps","PopoverClasses","transitionDuration","TransitionProps","variant","slots","slotProps"],Pt={vertical:"top",horizontal:"right"},jt={vertical:"top",horizontal:"left"},Ot=(0,Ve.ZP)(Ut,{shouldForwardProp:e=>(0,Ve.FO)(e)||"classes"===e,name:"MuiMenu",slot:"Root",overridesResolver:(e,g)=>g.root})({}),qt=(0,Ve.ZP)(Et,{name:"MuiMenu",slot:"Paper",overridesResolver:(e,g)=>g.paper})({maxHeight:"calc(100% - 96px)",WebkitOverflowScrolling:"touch"}),$t=(0,Ve.ZP)(kl,{name:"MuiMenu",slot:"List",overridesResolver:(e,g)=>g.list})({outline:0}),_t=g.forwardRef((function(e,l){var t,n;const o=(0,We.Z)({props:e,name:"MuiMenu"}),{autoFocus:I=!0,children:C,className:r,disableAutoFocusItem:a=!1,MenuListProps:i={},onClose:c,open:s,PaperProps:d={},PopoverClasses:u,transitionDuration:A="auto",TransitionProps:{onEntering:m}={},variant:b="selectedMenu",slots:p={},slotProps:Z={}}=o,h=(0,Ge.Z)(o.TransitionProps,Dt),G=(0,Ge.Z)(o,Tt),y=Ul(),B="rtl"===y.direction,S=(0,he.Z)({},o,{autoFocus:I,disableAutoFocusItem:a,MenuListProps:i,onEntering:m,PaperProps:d,transitionDuration:A,TransitionProps:h,variant:b}),V=(e=>{const{classes:g}=e;return(0,Be.Z)({root:["root"],paper:["paper"],list:["list"]},Qt,g)})(S),W=I&&!a&&s,R=g.useRef(null);let f=-1;g.Children.map(C,((e,l)=>{g.isValidElement(e)&&(e.props.disabled||("selectedMenu"===b&&e.props.selected||-1===f)&&(f=l))}));const v=null!=(t=p.paper)?t:qt,k=null!=(n=Z.paper)?n:d,X=bl({elementType:p.root,externalSlotProps:Z.root,ownerState:S,className:[V.root,r]}),J=bl({elementType:v,externalSlotProps:k,ownerState:S,className:V.paper});return(0,we.jsx)(Ot,(0,he.Z)({onClose:c,anchorOrigin:{vertical:"bottom",horizontal:B?"right":"left"},transformOrigin:B?Pt:jt,slots:{paper:v,root:p.root},slotProps:{root:X,paper:J},open:s,ref:l,transitionDuration:A,TransitionProps:(0,he.Z)({onEntering:(e,g)=>{R.current&&R.current.adjustStyleForScrollbar(e,y),m&&m(e,g)}},h),ownerState:S},G,{classes:u,children:(0,we.jsx)($t,(0,he.Z)({onKeyDown:e=>{"Tab"===e.key&&(e.preventDefault(),c&&c(e,"tabKeyDown"))},actions:R,autoFocus:I&&(-1===f||a),autoFocusItem:W,variant:b},i,{className:(0,ye.Z)(V.list,i.className),children:C}))}))}));function en(e){return(0,rg.Z)("MuiNativeSelect",e)}const gn=(0,Cg.Z)("MuiNativeSelect",["root","select","multiple","filled","outlined","standard","disabled","icon","iconOpen","iconFilled","iconOutlined","iconStandard","nativeInput","error"]),ln=["className","disabled","error","IconComponent","inputRef","variant"],tn=({ownerState:e,theme:g})=>(0,he.Z)({MozAppearance:"none",WebkitAppearance:"none",userSelect:"none",borderRadius:0,cursor:"pointer","&:focus":(0,he.Z)({},g.vars?{backgroundColor:`rgba(${g.vars.palette.common.onBackgroundChannel} / 0.05)`}:{backgroundColor:"light"===g.palette.mode?"rgba(0, 0, 0, 0.05)":"rgba(255, 255, 255, 0.05)"},{borderRadius:0}),"&::-ms-expand":{display:"none"},[`&.${gn.disabled}`]:{cursor:"default"},"&[multiple]":{height:"auto"},"&:not([multiple]) option, &:not([multiple]) optgroup":{backgroundColor:(g.vars||g).palette.background.paper},"&&&":{paddingRight:24,minWidth:16}},"filled"===e.variant&&{"&&&":{paddingRight:32}},"outlined"===e.variant&&{borderRadius:(g.vars||g).shape.borderRadius,"&:focus":{borderRadius:(g.vars||g).shape.borderRadius},"&&&":{paddingRight:32}}),nn=(0,Ve.ZP)("select",{name:"MuiNativeSelect",slot:"Select",shouldForwardProp:Ve.FO,overridesResolver:(e,g)=>{const{ownerState:l}=e;return[g.select,g[l.variant],l.error&&g.error,{[`&.${gn.multiple}`]:g.multiple}]}})(tn),on=({ownerState:e,theme:g})=>(0,he.Z)({position:"absolute",right:0,top:"calc(50% - .5em)",pointerEvents:"none",color:(g.vars||g).palette.action.active,[`&.${gn.disabled}`]:{color:(g.vars||g).palette.action.disabled}},e.open&&{transform:"rotate(180deg)"},"filled"===e.variant&&{right:7},"outlined"===e.variant&&{right:7}),In=(0,Ve.ZP)("svg",{name:"MuiNativeSelect",slot:"Icon",overridesResolver:(e,g)=>{const{ownerState:l}=e;return[g.icon,l.variant&&g[`icon${(0,Le.Z)(l.variant)}`],l.open&&g.iconOpen]}})(on),Cn=g.forwardRef((function(e,l){const{className:t,disabled:n,error:o,IconComponent:I,inputRef:C,variant:r="standard"}=e,a=(0,Ge.Z)(e,ln),i=(0,he.Z)({},e,{disabled:n,variant:r,error:o}),c=(e=>{const{classes:g,variant:l,disabled:t,multiple:n,open:o,error:I}=e,C={select:["select",l,t&&"disabled",n&&"multiple",I&&"error"],icon:["icon",`icon${(0,Le.Z)(l)}`,o&&"iconOpen",t&&"disabled"]};return(0,Be.Z)(C,en,g)})(i);return(0,we.jsxs)(g.Fragment,{children:[(0,we.jsx)(nn,(0,he.Z)({ownerState:i,className:(0,ye.Z)(c.select,t),disabled:n,ref:C||l},a)),e.multiple?null:(0,we.jsx)(In,{as:I,ownerState:i,className:c.icon})]})}));var rn=n(9299);function an(e){return(0,rg.Z)("MuiSelect",e)}const cn=(0,Cg.Z)("MuiSelect",["root","select","multiple","filled","outlined","standard","disabled","focused","icon","iconOpen","iconFilled","iconOutlined","iconStandard","nativeInput","error"]);var sn;const dn=["aria-describedby","aria-label","autoFocus","autoWidth","children","className","defaultOpen","defaultValue","disabled","displayEmpty","error","IconComponent","inputRef","labelId","MenuProps","multiple","name","onBlur","onChange","onClose","onFocus","onOpen","open","readOnly","renderValue","SelectDisplayProps","tabIndex","type","value","variant"],un=(0,Ve.ZP)("div",{name:"MuiSelect",slot:"Select",overridesResolver:(e,g)=>{const{ownerState:l}=e;return[{[`&.${cn.select}`]:g.select},{[`&.${cn.select}`]:g[l.variant]},{[`&.${cn.error}`]:g.error},{[`&.${cn.multiple}`]:g.multiple}]}})(tn,{[`&.${cn.select}`]:{height:"auto",minHeight:"1.4375em",textOverflow:"ellipsis",whiteSpace:"nowrap",overflow:"hidden"}}),An=(0,Ve.ZP)("svg",{name:"MuiSelect",slot:"Icon",overridesResolver:(e,g)=>{const{ownerState:l}=e;return[g.icon,l.variant&&g[`icon${(0,Le.Z)(l.variant)}`],l.open&&g.iconOpen]}})(on),mn=(0,Ve.ZP)("input",{shouldForwardProp:e=>(0,Ve.Dz)(e)&&"classes"!==e,name:"MuiSelect",slot:"NativeInput",overridesResolver:(e,g)=>g.nativeInput})({bottom:0,left:0,position:"absolute",opacity:0,pointerEvents:"none",width:"100%",boxSizing:"border-box"});function bn(e,g){return"object"==typeof g&&null!==g?e===g:String(e)===String(g)}function pn(e){return null==e||"string"==typeof e&&!e.trim()}const Zn=g.forwardRef((function(e,l){var t;const{"aria-describedby":n,"aria-label":o,autoFocus:I,autoWidth:C,children:r,className:a,defaultOpen:i,defaultValue:c,disabled:s,displayEmpty:d,error:u=!1,IconComponent:A,inputRef:m,labelId:b,MenuProps:p={},multiple:Z,name:h,onBlur:G,onChange:y,onClose:B,onFocus:S,onOpen:V,open:W,readOnly:R,renderValue:f,SelectDisplayProps:v={},tabIndex:k,value:X,variant:J="standard"}=e,w=(0,Ge.Z)(e,dn),[Y,H]=(0,rn.Z)({controlled:X,default:c,name:"Select"}),[F,N]=(0,rn.Z)({controlled:W,default:i,name:"Select"}),K=g.useRef(null),x=g.useRef(null),[M,z]=g.useState(null),{current:E}=g.useRef(null!=W),[L,U]=g.useState(),Q=(0,Ue.Z)(l,m),D=g.useCallback((e=>{x.current=e,e&&z(e)}),[]),T=null==M?void 0:M.parentNode;g.useImperativeHandle(Q,(()=>({focus:()=>{x.current.focus()},node:K.current,value:Y})),[Y]),g.useEffect((()=>{i&&F&&M&&!E&&(U(C?null:T.clientWidth),x.current.focus())}),[M,C]),g.useEffect((()=>{I&&x.current.focus()}),[I]),g.useEffect((()=>{if(!b)return;const e=(0,sl.Z)(x.current).getElementById(b);if(e){const g=()=>{getSelection().isCollapsed&&x.current.focus()};return e.addEventListener("click",g),()=>{e.removeEventListener("click",g)}}}),[b]);const P=(e,g)=>{e?V&&V(g):B&&B(g),E||(U(C?null:T.clientWidth),N(e))},j=g.Children.toArray(r),O=e=>g=>{let l;if(g.currentTarget.hasAttribute("tabindex")){if(Z){l=Array.isArray(Y)?Y.slice():[];const g=Y.indexOf(e.props.value);-1===g?l.push(e.props.value):l.splice(g,1)}else l=e.props.value;if(e.props.onClick&&e.props.onClick(g),Y!==l&&(H(l),y)){const t=g.nativeEvent||g,n=new t.constructor(t.type,t);Object.defineProperty(n,"target",{writable:!0,value:{value:l,name:h}}),y(n,e)}Z||P(!1,g)}},q=null!==M&&F;let $,_;delete w["aria-invalid"];const ee=[];let ge=!1,le=!1;(Ig({value:Y})||d)&&(f?$=f(Y):ge=!0);const te=j.map((e=>{if(!g.isValidElement(e))return null;let l;if(Z){if(!Array.isArray(Y))throw new Error((0,fe.Z)(2));l=Y.some((g=>bn(g,e.props.value))),l&&ge&&ee.push(e.props.children)}else l=bn(Y,e.props.value),l&&ge&&(_=e.props.children);return l&&(le=!0),g.cloneElement(e,{"aria-selected":l?"true":"false",onClick:O(e),onKeyUp:g=>{" "===g.key&&g.preventDefault(),e.props.onKeyUp&&e.props.onKeyUp(g)},role:"option",selected:l,value:void 0,"data-value":e.props.value})}));ge&&($=Z?0===ee.length?null:ee.reduce(((e,g,l)=>(e.push(g),l<ee.length-1&&e.push(", "),e)),[]):_);let ne,oe=L;!C&&E&&M&&(oe=T.clientWidth),ne=void 0!==k?k:s?null:0;const Ie=v.id||(h?`mui-component-select-${h}`:void 0),Ce=(0,he.Z)({},e,{variant:J,value:Y,open:q,error:u}),re=(e=>{const{classes:g,variant:l,disabled:t,multiple:n,open:o,error:I}=e,C={select:["select",l,t&&"disabled",n&&"multiple",I&&"error"],icon:["icon",`icon${(0,Le.Z)(l)}`,o&&"iconOpen",t&&"disabled"],nativeInput:["nativeInput"]};return(0,Be.Z)(C,an,g)})(Ce),ae=(0,he.Z)({},p.PaperProps,null==(t=p.slotProps)?void 0:t.paper),ie=(0,Se.Z)();return(0,we.jsxs)(g.Fragment,{children:[(0,we.jsx)(un,(0,he.Z)({ref:D,tabIndex:ne,role:"combobox","aria-controls":ie,"aria-disabled":s?"true":void 0,"aria-expanded":q?"true":"false","aria-haspopup":"listbox","aria-label":o,"aria-labelledby":[b,Ie].filter(Boolean).join(" ")||void 0,"aria-describedby":n,onKeyDown:e=>{R||-1!==[" ","ArrowUp","ArrowDown","Enter"].indexOf(e.key)&&(e.preventDefault(),P(!0,e))},onMouseDown:s||R?null:e=>{0===e.button&&(e.preventDefault(),x.current.focus(),P(!0,e))},onBlur:e=>{!q&&G&&(Object.defineProperty(e,"target",{writable:!0,value:{value:Y,name:h}}),G(e))},onFocus:S},v,{ownerState:Ce,className:(0,ye.Z)(v.className,re.select,a),id:Ie,children:pn($)?sn||(sn=(0,we.jsx)("span",{className:"notranslate",children:""})):$})),(0,we.jsx)(mn,(0,he.Z)({"aria-invalid":u,value:Array.isArray(Y)?Y.join(","):Y,name:h,ref:K,"aria-hidden":!0,onChange:e=>{const g=j.find((g=>g.props.value===e.target.value));void 0!==g&&(H(g.props.value),y&&y(e,g))},tabIndex:-1,disabled:s,className:re.nativeInput,autoFocus:I,ownerState:Ce},w)),(0,we.jsx)(An,{as:A,className:re.icon,ownerState:Ce}),(0,we.jsx)(_t,(0,he.Z)({id:`menu-${h||""}`,anchorEl:T,open:q,onClose:e=>{P(!1,e)},anchorOrigin:{vertical:"bottom",horizontal:"center"},transformOrigin:{vertical:"top",horizontal:"center"}},p,{MenuListProps:(0,he.Z)({"aria-labelledby":b,role:"listbox","aria-multiselectable":Z?"true":void 0,disableListWrap:!0,id:ie},p.MenuListProps),slotProps:(0,he.Z)({},p.slotProps,{paper:(0,he.Z)({},ae,{style:(0,he.Z)({minWidth:oe},null!=ae?ae.style:null)})}),children:te}))]})}));var hn=n(5949);const Gn=(0,hn.Z)((0,we.jsx)("path",{d:"M7 10l5 5 5-5z"}),"ArrowDropDown"),yn=["autoWidth","children","classes","className","defaultOpen","displayEmpty","IconComponent","id","input","inputProps","label","labelId","MenuProps","multiple","native","onClose","onOpen","open","renderValue","SelectDisplayProps","variant"],Bn=["root"],Sn={name:"MuiSelect",overridesResolver:(e,g)=>g.root,shouldForwardProp:e=>(0,Ve.FO)(e)&&"variant"!==e,slot:"Root"},Vn=(0,Ve.ZP)(Vg,Sn)(""),Wn=(0,Ve.ZP)(Ug,Sn)(""),Rn=(0,Ve.ZP)(Jg,Sn)(""),fn=g.forwardRef((function(e,l){const t=(0,We.Z)({name:"MuiSelect",props:e}),{autoWidth:n=!1,children:o,classes:I={},className:C,defaultOpen:r=!1,displayEmpty:a=!1,IconComponent:i=Gn,id:c,input:s,inputProps:d,label:u,labelId:A,MenuProps:m,multiple:b=!1,native:p=!1,onClose:Z,onOpen:h,open:G,renderValue:y,SelectDisplayProps:B,variant:S="outlined"}=t,V=(0,Ge.Z)(t,yn),W=p?Cn:Zn,R=Me({props:t,muiFormControl:Ee(),states:["variant","error"]}),f=R.variant||S,v=(0,he.Z)({},t,{variant:f,classes:I}),k=(e=>{const{classes:g}=e;return g})(v),X=(0,Ge.Z)(k,Bn),J=s||{standard:(0,we.jsx)(Vn,{ownerState:v}),outlined:(0,we.jsx)(Wn,{label:u,ownerState:v}),filled:(0,we.jsx)(Rn,{ownerState:v})}[f],w=(0,Ue.Z)(l,J.ref);return(0,we.jsx)(g.Fragment,{children:g.cloneElement(J,(0,he.Z)({inputComponent:W,inputProps:(0,he.Z)({children:o,error:R.error,IconComponent:i,variant:f,type:void 0,multiple:b},p?{id:c}:{autoWidth:n,defaultOpen:r,displayEmpty:a,labelId:A,MenuProps:m,onClose:Z,onOpen:h,open:G,renderValue:y,SelectDisplayProps:(0,he.Z)({id:c},B)},d,{classes:d?(0,Re.Z)(X,d.classes):X},s?s.props.inputProps:{})},b&&p&&"outlined"===f?{notched:!0}:{},{ref:w,className:(0,ye.Z)(J.props.className,C,k.root)},!s&&{variant:f},V))})}));fn.muiName="Select";const vn=fn;function kn(e){return(0,rg.Z)("MuiTextField",e)}(0,Cg.Z)("MuiTextField",["root"]);const Xn=["autoComplete","autoFocus","children","className","color","defaultValue","disabled","error","FormHelperTextProps","fullWidth","helperText","id","InputLabelProps","inputProps","InputProps","inputRef","label","maxRows","minRows","multiline","name","onBlur","onChange","onFocus","placeholder","required","rows","select","SelectProps","type","value","variant"],Jn={standard:Vg,filled:Jg,outlined:Ug},wn=(0,Ve.ZP)(ol,{name:"MuiTextField",slot:"Root",overridesResolver:(e,g)=>g.root})({}),Yn=g.forwardRef((function(e,g){const l=(0,We.Z)({props:e,name:"MuiTextField"}),{autoComplete:t,autoFocus:n=!1,children:o,className:I,color:C="primary",defaultValue:r,disabled:a=!1,error:i=!1,FormHelperTextProps:c,fullWidth:s=!1,helperText:d,id:u,InputLabelProps:A,inputProps:m,InputProps:b,inputRef:p,label:Z,maxRows:h,minRows:G,multiline:y=!1,name:B,onBlur:S,onChange:V,onFocus:W,placeholder:R,required:f=!1,rows:v,select:k=!1,SelectProps:X,type:J,value:w,variant:Y="outlined"}=l,H=(0,Ge.Z)(l,Xn),F=(0,he.Z)({},l,{autoFocus:n,color:C,disabled:a,error:i,fullWidth:s,multiline:y,required:f,select:k,variant:Y}),N=(e=>{const{classes:g}=e;return(0,Be.Z)({root:["root"]},kn,g)})(F),K={};"outlined"===Y&&(A&&void 0!==A.shrink&&(K.notched=A.shrink),K.label=Z),k&&(X&&X.native||(K.id=void 0),K["aria-describedby"]=void 0);const x=(0,Se.Z)(u),M=d&&x?`${x}-helper-text`:void 0,z=Z&&x?`${x}-label`:void 0,E=Jn[Y],L=(0,we.jsx)(E,(0,he.Z)({"aria-describedby":M,autoComplete:t,autoFocus:n,defaultValue:r,fullWidth:s,multiline:y,name:B,rows:v,maxRows:h,minRows:G,type:J,value:w,id:x,inputRef:p,onBlur:S,onChange:V,onFocus:W,placeholder:R,inputProps:m},K,b));return(0,we.jsxs)(wn,(0,he.Z)({className:(0,ye.Z)(N.root,I),disabled:a,error:i,fullWidth:s,ref:g,required:f,color:C,variant:Y,ownerState:F},H,{children:[null!=Z&&""!==Z&&(0,we.jsx)(el,(0,he.Z)({htmlFor:x,id:z},A,{children:Z})),k?(0,we.jsx)(vn,(0,he.Z)({"aria-describedby":M,id:x,labelId:z,value:w,input:L},X,{children:o})):L,d&&(0,we.jsx)(cl,(0,he.Z)({id:M},c,{children:d}))]}))}));var Hn=n(7925),Fn=n(2068),Nn=n(3511);function Kn(e,l){var t=Object.create(null);return e&&g.Children.map(e,(function(e){return e})).forEach((function(e){t[e.key]=function(e){return l&&(0,g.isValidElement)(e)?l(e):e}(e)})),t}function xn(e,g,l){return null!=l[g]?l[g]:e.props[g]}function Mn(e,l,t){var n=Kn(e.children),o=function(e,g){function l(l){return l in g?g[l]:e[l]}e=e||{},g=g||{};var t,n=Object.create(null),o=[];for(var I in e)I in g?o.length&&(n[I]=o,o=[]):o.push(I);var C={};for(var r in g){if(n[r])for(t=0;t<n[r].length;t++){var a=n[r][t];C[n[r][t]]=l(a)}C[r]=l(r)}for(t=0;t<o.length;t++)C[o[t]]=l(o[t]);return C}(l,n);return Object.keys(o).forEach((function(I){var C=o[I];if((0,g.isValidElement)(C)){var r=I in l,a=I in n,i=l[I],c=(0,g.isValidElement)(i)&&!i.props.in;!a||r&&!c?a||!r||c?a&&r&&(0,g.isValidElement)(i)&&(o[I]=(0,g.cloneElement)(C,{onExited:t.bind(null,C),in:i.props.in,exit:xn(C,"exit",e),enter:xn(C,"enter",e)})):o[I]=(0,g.cloneElement)(C,{in:!1}):o[I]=(0,g.cloneElement)(C,{onExited:t.bind(null,C),in:!0,exit:xn(C,"exit",e),enter:xn(C,"enter",e)})}})),o}var zn=Object.values||function(e){return Object.keys(e).map((function(g){return e[g]}))},En=function(e){function l(g,l){var t,n=(t=e.call(this,g,l)||this).handleExited.bind(function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(t));return t.state={contextValue:{isMounting:!0},handleExited:n,firstRender:!0},t}Yl(l,e);var t=l.prototype;return t.componentDidMount=function(){this.mounted=!0,this.setState({contextValue:{isMounting:!1}})},t.componentWillUnmount=function(){this.mounted=!1},l.getDerivedStateFromProps=function(e,l){var t,n,o=l.children,I=l.handleExited;return{children:l.firstRender?(t=e,n=I,Kn(t.children,(function(e){return(0,g.cloneElement)(e,{onExited:n.bind(null,e),in:!0,appear:xn(e,"appear",t),enter:xn(e,"enter",t),exit:xn(e,"exit",t)})}))):Mn(e,o,I),firstRender:!1}},t.handleExited=function(e,g){var l=Kn(this.props.children);e.key in l||(e.props.onExited&&e.props.onExited(g),this.mounted&&this.setState((function(g){var l=(0,he.Z)({},g.children);return delete l[e.key],{children:l}})))},t.render=function(){var e=this.props,l=e.component,t=e.childFactory,n=(0,Ge.Z)(e,["component","childFactory"]),o=this.state.contextValue,I=zn(this.state.children).map(t);return delete n.appear,delete n.enter,delete n.exit,null===l?g.createElement(Hl.Provider,{value:o},I):g.createElement(Hl.Provider,{value:o},g.createElement(l,n,I))},l}(g.Component);En.propTypes={},En.defaultProps={component:"div",childFactory:function(e){return e}};const Ln=En,Un=(0,Cg.Z)("MuiTouchRipple",["root","ripple","rippleVisible","ripplePulsate","child","childLeaving","childPulsate"]),Qn=["center","classes","className"];let Dn,Tn,Pn,jn,On=e=>e;const qn=$e(Dn||(Dn=On`
  0% {
    transform: scale(0);
    opacity: 0.1;
  }

  100% {
    transform: scale(1);
    opacity: 0.3;
  }
`)),$n=$e(Tn||(Tn=On`
  0% {
    opacity: 1;
  }

  100% {
    opacity: 0;
  }
`)),_n=$e(Pn||(Pn=On`
  0% {
    transform: scale(1);
  }

  50% {
    transform: scale(0.92);
  }

  100% {
    transform: scale(1);
  }
`)),eo=(0,Ve.ZP)("span",{name:"MuiTouchRipple",slot:"Root"})({overflow:"hidden",pointerEvents:"none",position:"absolute",zIndex:0,top:0,right:0,bottom:0,left:0,borderRadius:"inherit"}),go=(0,Ve.ZP)((function(e){const{className:l,classes:t,pulsate:n=!1,rippleX:o,rippleY:I,rippleSize:C,in:r,onExited:a,timeout:i}=e,[c,s]=g.useState(!1),d=(0,ye.Z)(l,t.ripple,t.rippleVisible,n&&t.ripplePulsate),u={width:C,height:C,top:-C/2+I,left:-C/2+o},A=(0,ye.Z)(t.child,c&&t.childLeaving,n&&t.childPulsate);return r||c||s(!0),g.useEffect((()=>{if(!r&&null!=a){const e=setTimeout(a,i);return()=>{clearTimeout(e)}}}),[a,r,i]),(0,we.jsx)("span",{className:d,style:u,children:(0,we.jsx)("span",{className:A})})}),{name:"MuiTouchRipple",slot:"Ripple"})(jn||(jn=On`
  opacity: 0;
  position: absolute;

  &.${0} {
    opacity: 0.3;
    transform: scale(1);
    animation-name: ${0};
    animation-duration: ${0}ms;
    animation-timing-function: ${0};
  }

  &.${0} {
    animation-duration: ${0}ms;
  }

  & .${0} {
    opacity: 1;
    display: block;
    width: 100%;
    height: 100%;
    border-radius: 50%;
    background-color: currentColor;
  }

  & .${0} {
    opacity: 0;
    animation-name: ${0};
    animation-duration: ${0}ms;
    animation-timing-function: ${0};
  }

  & .${0} {
    position: absolute;
    /* @noflip */
    left: 0px;
    top: 0;
    animation-name: ${0};
    animation-duration: 2500ms;
    animation-timing-function: ${0};
    animation-iteration-count: infinite;
    animation-delay: 200ms;
  }
`),Un.rippleVisible,qn,550,(({theme:e})=>e.transitions.easing.easeInOut),Un.ripplePulsate,(({theme:e})=>e.transitions.duration.shorter),Un.child,Un.childLeaving,$n,550,(({theme:e})=>e.transitions.easing.easeInOut),Un.childPulsate,_n,(({theme:e})=>e.transitions.easing.easeInOut)),lo=g.forwardRef((function(e,l){const t=(0,We.Z)({props:e,name:"MuiTouchRipple"}),{center:n=!1,classes:o={},className:I}=t,C=(0,Ge.Z)(t,Qn),[r,a]=g.useState([]),i=g.useRef(0),c=g.useRef(null);g.useEffect((()=>{c.current&&(c.current(),c.current=null)}),[r]);const s=g.useRef(!1),d=g.useRef(0),u=g.useRef(null),A=g.useRef(null);g.useEffect((()=>()=>{d.current&&clearTimeout(d.current)}),[]);const m=g.useCallback((e=>{const{pulsate:g,rippleX:l,rippleY:t,rippleSize:n,cb:I}=e;a((e=>[...e,(0,we.jsx)(go,{classes:{ripple:(0,ye.Z)(o.ripple,Un.ripple),rippleVisible:(0,ye.Z)(o.rippleVisible,Un.rippleVisible),ripplePulsate:(0,ye.Z)(o.ripplePulsate,Un.ripplePulsate),child:(0,ye.Z)(o.child,Un.child),childLeaving:(0,ye.Z)(o.childLeaving,Un.childLeaving),childPulsate:(0,ye.Z)(o.childPulsate,Un.childPulsate)},timeout:550,pulsate:g,rippleX:l,rippleY:t,rippleSize:n},i.current)])),i.current+=1,c.current=I}),[o]),b=g.useCallback(((e={},g={},l=(()=>{}))=>{const{pulsate:t=!1,center:o=n||g.pulsate,fakeElement:I=!1}=g;if("mousedown"===(null==e?void 0:e.type)&&s.current)return void(s.current=!1);"touchstart"===(null==e?void 0:e.type)&&(s.current=!0);const C=I?null:A.current,r=C?C.getBoundingClientRect():{width:0,height:0,left:0,top:0};let a,i,c;if(o||void 0===e||0===e.clientX&&0===e.clientY||!e.clientX&&!e.touches)a=Math.round(r.width/2),i=Math.round(r.height/2);else{const{clientX:g,clientY:l}=e.touches&&e.touches.length>0?e.touches[0]:e;a=Math.round(g-r.left),i=Math.round(l-r.top)}if(o)c=Math.sqrt((2*r.width**2+r.height**2)/3),c%2==0&&(c+=1);else{const e=2*Math.max(Math.abs((C?C.clientWidth:0)-a),a)+2,g=2*Math.max(Math.abs((C?C.clientHeight:0)-i),i)+2;c=Math.sqrt(e**2+g**2)}null!=e&&e.touches?null===u.current&&(u.current=()=>{m({pulsate:t,rippleX:a,rippleY:i,rippleSize:c,cb:l})},d.current=setTimeout((()=>{u.current&&(u.current(),u.current=null)}),80)):m({pulsate:t,rippleX:a,rippleY:i,rippleSize:c,cb:l})}),[n,m]),p=g.useCallback((()=>{b({},{pulsate:!0})}),[b]),Z=g.useCallback(((e,g)=>{if(clearTimeout(d.current),"touchend"===(null==e?void 0:e.type)&&u.current)return u.current(),u.current=null,void(d.current=setTimeout((()=>{Z(e,g)})));u.current=null,a((e=>e.length>0?e.slice(1):e)),c.current=g}),[]);return g.useImperativeHandle(l,(()=>({pulsate:p,start:b,stop:Z})),[p,b,Z]),(0,we.jsx)(eo,(0,he.Z)({className:(0,ye.Z)(Un.root,o.root,I),ref:A},C,{children:(0,we.jsx)(Ln,{component:null,exit:!0,children:r})}))})),to=lo;function no(e){return(0,rg.Z)("MuiButtonBase",e)}const oo=(0,Cg.Z)("MuiButtonBase",["root","disabled","focusVisible"]),Io=["action","centerRipple","children","className","component","disabled","disableRipple","disableTouchRipple","focusRipple","focusVisibleClassName","LinkComponent","onBlur","onClick","onContextMenu","onDragLeave","onFocus","onFocusVisible","onKeyDown","onKeyUp","onMouseDown","onMouseLeave","onMouseUp","onTouchEnd","onTouchMove","onTouchStart","tabIndex","TouchRippleProps","touchRippleRef","type"],Co=(0,Ve.ZP)("button",{name:"MuiButtonBase",slot:"Root",overridesResolver:(e,g)=>g.root})({display:"inline-flex",alignItems:"center",justifyContent:"center",position:"relative",boxSizing:"border-box",WebkitTapHighlightColor:"transparent",backgroundColor:"transparent",outline:0,border:0,margin:0,borderRadius:0,padding:0,cursor:"pointer",userSelect:"none",verticalAlign:"middle",MozAppearance:"none",WebkitAppearance:"none",textDecoration:"none",color:"inherit","&::-moz-focus-inner":{borderStyle:"none"},[`&.${oo.disabled}`]:{pointerEvents:"none",cursor:"default"},"@media print":{colorAdjust:"exact"}}),ro=g.forwardRef((function(e,l){const t=(0,We.Z)({props:e,name:"MuiButtonBase"}),{action:n,centerRipple:o=!1,children:I,className:C,component:r="button",disabled:a=!1,disableRipple:i=!1,disableTouchRipple:c=!1,focusRipple:s=!1,LinkComponent:d="a",onBlur:u,onClick:A,onContextMenu:m,onDragLeave:b,onFocus:p,onFocusVisible:Z,onKeyDown:h,onKeyUp:G,onMouseDown:y,onMouseLeave:B,onMouseUp:S,onTouchEnd:V,onTouchMove:W,onTouchStart:R,tabIndex:f=0,TouchRippleProps:v,touchRippleRef:k,type:X}=t,J=(0,Ge.Z)(t,Io),w=g.useRef(null),Y=g.useRef(null),H=(0,Ue.Z)(Y,k),{isFocusVisibleRef:F,onFocus:N,onBlur:K,ref:x}=(0,Nn.Z)(),[M,z]=g.useState(!1);a&&M&&z(!1),g.useImperativeHandle(n,(()=>({focusVisible:()=>{z(!0),w.current.focus()}})),[]);const[E,L]=g.useState(!1);g.useEffect((()=>{L(!0)}),[]);const U=E&&!i&&!a;function Q(e,g,l=c){return(0,Fn.Z)((t=>(g&&g(t),!l&&Y.current&&Y.current[e](t),!0)))}g.useEffect((()=>{M&&s&&!i&&E&&Y.current.pulsate()}),[i,s,M,E]);const D=Q("start",y),T=Q("stop",m),P=Q("stop",b),j=Q("stop",S),O=Q("stop",(e=>{M&&e.preventDefault(),B&&B(e)})),q=Q("start",R),$=Q("stop",V),_=Q("stop",W),ee=Q("stop",(e=>{K(e),!1===F.current&&z(!1),u&&u(e)}),!1),ge=(0,Fn.Z)((e=>{w.current||(w.current=e.currentTarget),N(e),!0===F.current&&(z(!0),Z&&Z(e)),p&&p(e)})),le=()=>{const e=w.current;return r&&"button"!==r&&!("A"===e.tagName&&e.href)},te=g.useRef(!1),ne=(0,Fn.Z)((e=>{s&&!te.current&&M&&Y.current&&" "===e.key&&(te.current=!0,Y.current.stop(e,(()=>{Y.current.start(e)}))),e.target===e.currentTarget&&le()&&" "===e.key&&e.preventDefault(),h&&h(e),e.target===e.currentTarget&&le()&&"Enter"===e.key&&!a&&(e.preventDefault(),A&&A(e))})),oe=(0,Fn.Z)((e=>{s&&" "===e.key&&Y.current&&M&&!e.defaultPrevented&&(te.current=!1,Y.current.stop(e,(()=>{Y.current.pulsate(e)}))),G&&G(e),A&&e.target===e.currentTarget&&le()&&" "===e.key&&!e.defaultPrevented&&A(e)}));let Ie=r;"button"===Ie&&(J.href||J.to)&&(Ie=d);const Ce={};"button"===Ie?(Ce.type=void 0===X?"button":X,Ce.disabled=a):(J.href||J.to||(Ce.role="button"),a&&(Ce["aria-disabled"]=a));const re=(0,Ue.Z)(l,x,w),ae=(0,he.Z)({},t,{centerRipple:o,component:r,disabled:a,disableRipple:i,disableTouchRipple:c,focusRipple:s,tabIndex:f,focusVisible:M}),ie=(e=>{const{disabled:g,focusVisible:l,focusVisibleClassName:t,classes:n}=e,o={root:["root",g&&"disabled",l&&"focusVisible"]},I=(0,Be.Z)(o,no,n);return l&&t&&(I.root+=` ${t}`),I})(ae);return(0,we.jsxs)(Co,(0,he.Z)({as:Ie,className:(0,ye.Z)(ie.root,C),ownerState:ae,onBlur:ee,onClick:A,onContextMenu:T,onFocus:ge,onKeyDown:ne,onKeyUp:oe,onMouseDown:D,onMouseLeave:O,onMouseUp:j,onDragLeave:P,onTouchEnd:$,onTouchMove:_,onTouchStart:q,ref:re,tabIndex:a?-1:f,type:X},Ce,J,{children:[I,U?(0,we.jsx)(to,(0,he.Z)({ref:H,center:o},v)):null]}))}));function ao(e){return(0,rg.Z)("MuiButton",e)}const io=(0,Cg.Z)("MuiButton",["root","text","textInherit","textPrimary","textSecondary","textSuccess","textError","textInfo","textWarning","outlined","outlinedInherit","outlinedPrimary","outlinedSecondary","outlinedSuccess","outlinedError","outlinedInfo","outlinedWarning","contained","containedInherit","containedPrimary","containedSecondary","containedSuccess","containedError","containedInfo","containedWarning","disableElevation","focusVisible","disabled","colorInherit","textSizeSmall","textSizeMedium","textSizeLarge","outlinedSizeSmall","outlinedSizeMedium","outlinedSizeLarge","containedSizeSmall","containedSizeMedium","containedSizeLarge","sizeMedium","sizeSmall","sizeLarge","fullWidth","startIcon","endIcon","iconSizeSmall","iconSizeMedium","iconSizeLarge"]),co=g.createContext({}),so=g.createContext(void 0),uo=["children","color","component","className","disabled","disableElevation","disableFocusRipple","endIcon","focusVisibleClassName","fullWidth","size","startIcon","type","variant"],Ao=e=>(0,he.Z)({},"small"===e.size&&{"& > *:nth-of-type(1)":{fontSize:18}},"medium"===e.size&&{"& > *:nth-of-type(1)":{fontSize:20}},"large"===e.size&&{"& > *:nth-of-type(1)":{fontSize:22}}),mo=(0,Ve.ZP)(ro,{shouldForwardProp:e=>(0,Ve.FO)(e)||"classes"===e,name:"MuiButton",slot:"Root",overridesResolver:(e,g)=>{const{ownerState:l}=e;return[g.root,g[l.variant],g[`${l.variant}${(0,Le.Z)(l.color)}`],g[`size${(0,Le.Z)(l.size)}`],g[`${l.variant}Size${(0,Le.Z)(l.size)}`],"inherit"===l.color&&g.colorInherit,l.disableElevation&&g.disableElevation,l.fullWidth&&g.fullWidth]}})((({theme:e,ownerState:g})=>{var l,t;const n="light"===e.palette.mode?e.palette.grey[300]:e.palette.grey[800],o="light"===e.palette.mode?e.palette.grey.A100:e.palette.grey[700];return(0,he.Z)({},e.typography.button,{minWidth:64,padding:"6px 16px",borderRadius:(e.vars||e).shape.borderRadius,transition:e.transitions.create(["background-color","box-shadow","border-color","color"],{duration:e.transitions.duration.short}),"&:hover":(0,he.Z)({textDecoration:"none",backgroundColor:e.vars?`rgba(${e.vars.palette.text.primaryChannel} / ${e.vars.palette.action.hoverOpacity})`:(0,Rt.Fq)(e.palette.text.primary,e.palette.action.hoverOpacity),"@media (hover: none)":{backgroundColor:"transparent"}},"text"===g.variant&&"inherit"!==g.color&&{backgroundColor:e.vars?`rgba(${e.vars.palette[g.color].mainChannel} / ${e.vars.palette.action.hoverOpacity})`:(0,Rt.Fq)(e.palette[g.color].main,e.palette.action.hoverOpacity),"@media (hover: none)":{backgroundColor:"transparent"}},"outlined"===g.variant&&"inherit"!==g.color&&{border:`1px solid ${(e.vars||e).palette[g.color].main}`,backgroundColor:e.vars?`rgba(${e.vars.palette[g.color].mainChannel} / ${e.vars.palette.action.hoverOpacity})`:(0,Rt.Fq)(e.palette[g.color].main,e.palette.action.hoverOpacity),"@media (hover: none)":{backgroundColor:"transparent"}},"contained"===g.variant&&{backgroundColor:e.vars?e.vars.palette.Button.inheritContainedHoverBg:o,boxShadow:(e.vars||e).shadows[4],"@media (hover: none)":{boxShadow:(e.vars||e).shadows[2],backgroundColor:(e.vars||e).palette.grey[300]}},"contained"===g.variant&&"inherit"!==g.color&&{backgroundColor:(e.vars||e).palette[g.color].dark,"@media (hover: none)":{backgroundColor:(e.vars||e).palette[g.color].main}}),"&:active":(0,he.Z)({},"contained"===g.variant&&{boxShadow:(e.vars||e).shadows[8]}),[`&.${io.focusVisible}`]:(0,he.Z)({},"contained"===g.variant&&{boxShadow:(e.vars||e).shadows[6]}),[`&.${io.disabled}`]:(0,he.Z)({color:(e.vars||e).palette.action.disabled},"outlined"===g.variant&&{border:`1px solid ${(e.vars||e).palette.action.disabledBackground}`},"contained"===g.variant&&{color:(e.vars||e).palette.action.disabled,boxShadow:(e.vars||e).shadows[0],backgroundColor:(e.vars||e).palette.action.disabledBackground})},"text"===g.variant&&{padding:"6px 8px"},"text"===g.variant&&"inherit"!==g.color&&{color:(e.vars||e).palette[g.color].main},"outlined"===g.variant&&{padding:"5px 15px",border:"1px solid currentColor"},"outlined"===g.variant&&"inherit"!==g.color&&{color:(e.vars||e).palette[g.color].main,border:e.vars?`1px solid rgba(${e.vars.palette[g.color].mainChannel} / 0.5)`:`1px solid ${(0,Rt.Fq)(e.palette[g.color].main,.5)}`},"contained"===g.variant&&{color:e.vars?e.vars.palette.text.primary:null==(l=(t=e.palette).getContrastText)?void 0:l.call(t,e.palette.grey[300]),backgroundColor:e.vars?e.vars.palette.Button.inheritContainedBg:n,boxShadow:(e.vars||e).shadows[2]},"contained"===g.variant&&"inherit"!==g.color&&{color:(e.vars||e).palette[g.color].contrastText,backgroundColor:(e.vars||e).palette[g.color].main},"inherit"===g.color&&{color:"inherit",borderColor:"currentColor"},"small"===g.size&&"text"===g.variant&&{padding:"4px 5px",fontSize:e.typography.pxToRem(13)},"large"===g.size&&"text"===g.variant&&{padding:"8px 11px",fontSize:e.typography.pxToRem(15)},"small"===g.size&&"outlined"===g.variant&&{padding:"3px 9px",fontSize:e.typography.pxToRem(13)},"large"===g.size&&"outlined"===g.variant&&{padding:"7px 21px",fontSize:e.typography.pxToRem(15)},"small"===g.size&&"contained"===g.variant&&{padding:"4px 10px",fontSize:e.typography.pxToRem(13)},"large"===g.size&&"contained"===g.variant&&{padding:"8px 22px",fontSize:e.typography.pxToRem(15)},g.fullWidth&&{width:"100%"})}),(({ownerState:e})=>e.disableElevation&&{boxShadow:"none","&:hover":{boxShadow:"none"},[`&.${io.focusVisible}`]:{boxShadow:"none"},"&:active":{boxShadow:"none"},[`&.${io.disabled}`]:{boxShadow:"none"}})),bo=(0,Ve.ZP)("span",{name:"MuiButton",slot:"StartIcon",overridesResolver:(e,g)=>{const{ownerState:l}=e;return[g.startIcon,g[`iconSize${(0,Le.Z)(l.size)}`]]}})((({ownerState:e})=>(0,he.Z)({display:"inherit",marginRight:8,marginLeft:-4},"small"===e.size&&{marginLeft:-2},Ao(e)))),po=(0,Ve.ZP)("span",{name:"MuiButton",slot:"EndIcon",overridesResolver:(e,g)=>{const{ownerState:l}=e;return[g.endIcon,g[`iconSize${(0,Le.Z)(l.size)}`]]}})((({ownerState:e})=>(0,he.Z)({display:"inherit",marginRight:-4,marginLeft:8},"small"===e.size&&{marginRight:-2},Ao(e)))),Zo=g.forwardRef((function(e,l){const t=g.useContext(co),n=g.useContext(so),o=(0,Hn.Z)(t,e),I=(0,We.Z)({props:o,name:"MuiButton"}),{children:C,color:r="primary",component:a="button",className:i,disabled:c=!1,disableElevation:s=!1,disableFocusRipple:d=!1,endIcon:u,focusVisibleClassName:A,fullWidth:m=!1,size:b="medium",startIcon:p,type:Z,variant:h="text"}=I,G=(0,Ge.Z)(I,uo),y=(0,he.Z)({},I,{color:r,component:a,disabled:c,disableElevation:s,disableFocusRipple:d,fullWidth:m,size:b,type:Z,variant:h}),B=(e=>{const{color:g,disableElevation:l,fullWidth:t,size:n,variant:o,classes:I}=e,C={root:["root",o,`${o}${(0,Le.Z)(g)}`,`size${(0,Le.Z)(n)}`,`${o}Size${(0,Le.Z)(n)}`,"inherit"===g&&"colorInherit",l&&"disableElevation",t&&"fullWidth"],label:["label"],startIcon:["startIcon",`iconSize${(0,Le.Z)(n)}`],endIcon:["endIcon",`iconSize${(0,Le.Z)(n)}`]},r=(0,Be.Z)(C,ao,I);return(0,he.Z)({},I,r)})(y),S=p&&(0,we.jsx)(bo,{className:B.startIcon,ownerState:y,children:p}),V=u&&(0,we.jsx)(po,{className:B.endIcon,ownerState:y,children:u}),W=n||"";return(0,we.jsxs)(mo,(0,he.Z)({ownerState:y,className:(0,ye.Z)(t.className,B.root,i,W),component:a,disabled:c,focusRipple:!d,focusVisibleClassName:(0,ye.Z)(B.focusVisible,A),ref:l,type:Z},G,{classes:B,children:[S,C,V]}))}));var ho=n(9617);const Go=g.createContext(null);function yo(){return g.useContext(Go)}const Bo="function"==typeof Symbol&&Symbol.for?Symbol.for("mui.nested"):"__THEME_NESTED__",So=function(e){const{children:l,theme:t}=e,n=yo(),o=g.useMemo((()=>{const e=null===n?t:function(e,g){return"function"==typeof g?g(e):(0,he.Z)({},e,g)}(n,t);return null!=e&&(e[Bo]=null!==n),e}),[t,n]);return(0,we.jsx)(Go.Provider,{value:o,children:l})};var Vo=n(4168);const Wo={};function Ro(e,l,t,n=!1){return g.useMemo((()=>{const g=e&&l[e]||l;if("function"==typeof t){const o=t(g),I=e?(0,he.Z)({},l,{[e]:o}):o;return n?()=>I:I}return e?(0,he.Z)({},l,{[e]:t}):(0,he.Z)({},l,t)}),[e,l,t,n])}const fo=function(e){const{children:g,theme:l,themeId:t}=e,n=(0,Vo.Z)(Wo),o=yo()||Wo,I=Ro(t,n,l),C=Ro(t,o,l,!0);return(0,we.jsx)(So,{theme:C,children:(0,we.jsx)(De.T.Provider,{value:I,children:g})})},vo=["theme"];function ko(e){let{theme:g}=e,l=(0,Ge.Z)(e,vo);const t=g[tg.Z];return(0,we.jsx)(fo,(0,he.Z)({},l,{themeId:t?tg.Z:void 0,theme:t||g}))}const Xo=function(){const[e,l]=(0,g.useState)({name:"",description:"",date:"",location:"",link:""}),t=e=>{const{name:g,value:t}=e.target;"name"===g&&t.length>500?alert("Event name cannot exceed 500 characters"):"description"===g&&t.length>500?alert("Description name cannot exceed 500 characters"):"location"===g&&t.length>500?alert("Location name cannot exceed 500 characters"):"link"===g&&t.length>500?alert("Link name cannot exceed 500 characters"):l((e=>({...e,[g]:t})))},n=(0,ho.Z)({typography:{fontFamily:"Corben, sans-serif"},palette:{primary:{main:"#5cba95",contrastText:"#fff"}}});return g.createElement(ko,{theme:n},g.createElement("div",{className:"h-screen w-full bg-background overflow-hidden relative px-4 lg:px-24 py-8 text-text"},g.createElement("div",{className:"pb-4"},g.createElement("h1",{className:"text-2xl lg:text-4xl font-heading font-bold"},g.createElement("span",{className:"text-transparent bg-clip-text bg-gradient-to-br from-primary to-accent"},"Create Your Event")),g.createElement("div",{className:"text-base font-body"},"Enter your event details to start the journey to a successful event!"))," ",g.createElement("form",{onSubmit:g=>{if(g.preventDefault(),!(e.name&&e.description&&e.date&&e.location&&e.link))return void alert("Please fill in all fields");console.log("Form submitted:",e);const l={method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(e)};fetch("/api/create-event/",l).then((e=>{if(!e.ok)throw new Error(`HTTP error! Status: ${e.status}`);return e.json()})).then((e=>{window.location.href=`/event/${e.code}`})).catch((e=>console.error("Error:",e.message)))}},g.createElement(Yn,{label:"Event Name",name:"name",value:e.name,onChange:t,fullWidth:!0,margin:"normal"}),g.createElement(Yn,{label:"Event Description",name:"description",value:e.description,onChange:t,fullWidth:!0,margin:"normal"}),g.createElement(Yn,{label:"Event Date",name:"date",type:"datetime-local",value:e.date,onChange:t,fullWidth:!0,margin:"normal",InputLabelProps:{shrink:!0}}),g.createElement(Yn,{label:"Event Location",name:"location",value:e.location,onChange:t,fullWidth:!0,margin:"normal"}),g.createElement(Yn,{label:"Event Link",name:"link",value:e.link,onChange:t,fullWidth:!0,margin:"normal"}),g.createElement(Zo,{type:"submit",variant:"contained",color:"primary"},"Create Event")),g.createElement("div",{className:"pointer-events-none"},g.createElement("div",{className:"absolute top-0 -left-4 w-[30vw] h-[30vw] bg-secondary rounded-full mix-blend-multiply filter blur-xl opacity-20 animate-blob "}),g.createElement("div",{className:"absolute top-0 -right-4 w-[30vw] h-[30vw] bg-primary rounded-full mix-blend-multiply filter blur-xl opacity-20 animate-blob animation-delay-2000"}),g.createElement("div",{className:"absolute -bottom-8 left-20 w-[30vw] h-[30vw] bg-accent rounded-full mix-blend-multiply filter blur-xl opacity-20 animate-blob animation-delay-4000"}))))},Jo=()=>{const[e,l]=(0,g.useState)(""),t=j(),n=(0,ho.Z)({typography:{fontFamily:"Corben, sans-serif"},palette:{primary:{main:"#5cba95",contrastText:"#fff"}}});return g.createElement(ko,{theme:n},g.createElement("div",{className:"h-screen w-full bg-background overflow-hidden relative px-4 lg:px-24 py-8 text-text"},g.createElement("div",{className:"pb-8"},g.createElement("h1",{className:"text-2xl lg:text-4xl font-heading font-bold"},g.createElement("span",{className:"text-transparent bg-clip-text bg-gradient-to-br from-primary to-accent"},"Join An Existing Event")),g.createElement("div",{className:"text-base font-body"},"Enter an 8-character code given to you by the event organizer to join an existing event. Collaborate with them to make your event a success!"))," ",g.createElement("form",{onSubmit:async g=>{if(g.preventDefault(),/^[A-Za-z0-9]{8}$/.test(e))try{await t(`/event/${e}`)}catch(e){alert("Invalid event code. Please enter a valid 8-character code.")}else alert("Invalid event code. Please enter a valid 8-character code.")}},g.createElement(Yn,{label:"Enter Event Code",variant:"outlined",value:e,onChange:e=>{l(e.target.value.toUpperCase())},fullWidth:!0,margin:"normal",InputLabelProps:{shrink:!0},inputProps:{maxLength:8,minLength:8,pattern:"^[A-Za-z0-9]{8}$",required:!0}}),g.createElement(Zo,{variant:"contained",color:"primary",type:"submit"},"Join Event")),g.createElement("div",{className:"pointer-events-none"},g.createElement("div",{className:"absolute top-0 -left-4 w-[30vw] h-[30vw] bg-secondary rounded-full mix-blend-multiply filter blur-xl opacity-20 animate-blob "}),g.createElement("div",{className:"absolute top-0 -right-4 w-[30vw] h-[30vw] bg-primary rounded-full mix-blend-multiply filter blur-xl opacity-20 animate-blob animation-delay-2000"}),g.createElement("div",{className:"absolute -bottom-8 left-20 w-[30vw] h-[30vw] bg-accent rounded-full mix-blend-multiply filter blur-xl opacity-20 animate-blob animation-delay-4000"}))))};function wo(e){return(0,rg.Z)("MuiFab",e)}const Yo=(0,Cg.Z)("MuiFab",["root","primary","secondary","extended","circular","focusVisible","disabled","colorInherit","sizeSmall","sizeMedium","sizeLarge","info","error","warning","success"]),Ho=["children","className","color","component","disabled","disableFocusRipple","focusVisibleClassName","size","variant"],Fo=(0,Ve.ZP)(ro,{name:"MuiFab",slot:"Root",shouldForwardProp:e=>(0,Ve.FO)(e)||"classes"===e,overridesResolver:(e,g)=>{const{ownerState:l}=e;return[g.root,g[l.variant],g[`size${(0,Le.Z)(l.size)}`],"inherit"===l.color&&g.colorInherit,g[(0,Le.Z)(l.size)],g[l.color]]}})((({theme:e,ownerState:g})=>{var l,t;return(0,he.Z)({},e.typography.button,{minHeight:36,transition:e.transitions.create(["background-color","box-shadow","border-color"],{duration:e.transitions.duration.short}),borderRadius:"50%",padding:0,minWidth:0,width:56,height:56,zIndex:(e.vars||e).zIndex.fab,boxShadow:(e.vars||e).shadows[6],"&:active":{boxShadow:(e.vars||e).shadows[12]},color:e.vars?e.vars.palette.text.primary:null==(l=(t=e.palette).getContrastText)?void 0:l.call(t,e.palette.grey[300]),backgroundColor:(e.vars||e).palette.grey[300],"&:hover":{backgroundColor:(e.vars||e).palette.grey.A100,"@media (hover: none)":{backgroundColor:(e.vars||e).palette.grey[300]},textDecoration:"none"},[`&.${Yo.focusVisible}`]:{boxShadow:(e.vars||e).shadows[6]}},"small"===g.size&&{width:40,height:40},"medium"===g.size&&{width:48,height:48},"extended"===g.variant&&{borderRadius:24,padding:"0 16px",width:"auto",minHeight:"auto",minWidth:48,height:48},"extended"===g.variant&&"small"===g.size&&{width:"auto",padding:"0 8px",borderRadius:17,minWidth:34,height:34},"extended"===g.variant&&"medium"===g.size&&{width:"auto",padding:"0 16px",borderRadius:20,minWidth:40,height:40},"inherit"===g.color&&{color:"inherit"})}),(({theme:e,ownerState:g})=>(0,he.Z)({},"inherit"!==g.color&&"default"!==g.color&&null!=(e.vars||e).palette[g.color]&&{color:(e.vars||e).palette[g.color].contrastText,backgroundColor:(e.vars||e).palette[g.color].main,"&:hover":{backgroundColor:(e.vars||e).palette[g.color].dark,"@media (hover: none)":{backgroundColor:(e.vars||e).palette[g.color].main}}})),(({theme:e})=>({[`&.${Yo.disabled}`]:{color:(e.vars||e).palette.action.disabled,boxShadow:(e.vars||e).shadows[0],backgroundColor:(e.vars||e).palette.action.disabledBackground}}))),No=g.forwardRef((function(e,g){const l=(0,We.Z)({props:e,name:"MuiFab"}),{children:t,className:n,color:o="default",component:I="button",disabled:C=!1,disableFocusRipple:r=!1,focusVisibleClassName:a,size:i="large",variant:c="circular"}=l,s=(0,Ge.Z)(l,Ho),d=(0,he.Z)({},l,{color:o,component:I,disabled:C,disableFocusRipple:r,size:i,variant:c}),u=(e=>{const{color:g,variant:l,classes:t,size:n}=e,o={root:["root",l,`size${(0,Le.Z)(n)}`,"inherit"===g?"colorInherit":g]},I=(0,Be.Z)(o,wo,t);return(0,he.Z)({},t,I)})(d);return(0,we.jsx)(Fo,(0,he.Z)({className:(0,ye.Z)(u.root,n),component:I,disabled:C,focusRipple:!r,focusVisibleClassName:(0,ye.Z)(u.focusVisible,a),ownerState:d,ref:g},s,{classes:u,children:t}))}));var Ko=n(7913),xo=n(5697),Mo=n.n(xo),zo=n(4142);function Eo(e){return(0,rg.Z)("MuiDataGrid",e)}const Lo=(0,Cg.Z)("MuiDataGrid",["actionsCell","aggregationColumnHeader","aggregationColumnHeader--alignLeft","aggregationColumnHeader--alignCenter","aggregationColumnHeader--alignRight","aggregationColumnHeaderLabel","autoHeight","autosizing","booleanCell","cell--editable","cell--editing","cell--textCenter","cell--textLeft","cell--textRight","cell--withRenderer","cell--rangeTop","cell--rangeBottom","cell--rangeLeft","cell--rangeRight","cell--selectionMode","cell","cellContent","cellCheckbox","cellSkeleton","checkboxInput","columnHeader--alignCenter","columnHeader--alignLeft","columnHeader--alignRight","columnHeader--dragging","columnHeader--moving","columnHeader--numeric","columnHeader--sortable","columnHeader--sorted","columnHeader--filtered","columnHeader","columnHeaderCheckbox","columnHeaderDraggableContainer","columnHeaderDropZone","columnHeaderTitle","columnHeaderTitleContainer","columnHeaderTitleContainerContent","columnGroupHeader","columnHeader--filledGroup","columnHeader--emptyGroup","columnHeader--showColumnBorder","columnHeaders","columnHeadersInner","columnHeadersInner--scrollable","columnSeparator--resizable","columnSeparator--resizing","columnSeparator--sideLeft","columnSeparator--sideRight","columnSeparator","columnsPanel","columnsPanelRow","detailPanel","detailPanels","detailPanelToggleCell","detailPanelToggleCell--expanded","footerCell","panel","panelHeader","panelWrapper","panelContent","panelFooter","paper","editBooleanCell","editInputCell","filterForm","filterFormDeleteIcon","filterFormLogicOperatorInput","filterFormColumnInput","filterFormOperatorInput","filterFormValueInput","filterIcon","footerContainer","headerFilterRow","iconButtonContainer","iconSeparator","main","menu","menuIcon","menuIconButton","menuOpen","menuList","overlay","overlayWrapper","overlayWrapperInner","root","root--densityStandard","root--densityComfortable","root--densityCompact","root--disableUserSelection","row","row--editable","row--editing","row--lastVisible","row--dragging","row--dynamicHeight","row--detailPanelExpanded","rowReorderCellPlaceholder","rowCount","rowReorderCellContainer","rowReorderCell","rowReorderCell--draggable","scrollArea--left","scrollArea--right","scrollArea","selectedRowCount","sortIcon","toolbarContainer","toolbarFilterList","virtualScroller","virtualScrollerContent","virtualScrollerContent--overflowed","virtualScrollerRenderZone","pinnedColumns","pinnedColumns--left","pinnedColumns--right","pinnedColumnHeaders","pinnedColumnHeaders--left","pinnedColumnHeaders--right","withBorderColor","cell--withRightBorder","columnHeader--withRightBorder","treeDataGroupingCell","treeDataGroupingCellToggle","groupingCriteriaCell","groupingCriteriaCellToggle","pinnedRows","pinnedRows--top","pinnedRows--bottom","pinnedRowsRenderZone"]),Uo={[`.${Lo.columnSeparator}, .${Lo["columnSeparator--resizing"]}`]:{visibility:"visible",width:"auto"}},Qo={[`& .${Lo.iconButtonContainer}`]:{visibility:"visible",width:"auto"},[`& .${Lo.menuIcon}`]:{width:"auto",visibility:"visible"}},Do=(0,Ve.ZP)("div",{name:"MuiDataGrid",slot:"Root",overridesResolver:(e,g)=>[{[`&.${Lo.autoHeight}`]:g.autoHeight},{[`&.${Lo.aggregationColumnHeader}`]:g.aggregationColumnHeader},{[`&.${Lo["aggregationColumnHeader--alignLeft"]}`]:g["aggregationColumnHeader--alignLeft"]},{[`&.${Lo["aggregationColumnHeader--alignCenter"]}`]:g["aggregationColumnHeader--alignCenter"]},{[`&.${Lo["aggregationColumnHeader--alignRight"]}`]:g["aggregationColumnHeader--alignRight"]},{[`&.${Lo.aggregationColumnHeaderLabel}`]:g.aggregationColumnHeaderLabel},{[`&.${Lo["root--disableUserSelection"]} .${Lo.cell}`]:g["root--disableUserSelection"]},{[`&.${Lo.autosizing}`]:g.autosizing},{[`& .${Lo.editBooleanCell}`]:g.editBooleanCell},{[`& .${Lo["cell--editing"]}`]:g["cell--editing"]},{[`& .${Lo["cell--textCenter"]}`]:g["cell--textCenter"]},{[`& .${Lo["cell--textLeft"]}`]:g["cell--textLeft"]},{[`& .${Lo["cell--textRight"]}`]:g["cell--textRight"]},{[`& .${Lo["cell--withRenderer"]}`]:g["cell--withRenderer"]},{[`& .${Lo.cell}`]:g.cell},{[`& .${Lo["cell--rangeTop"]}`]:g["cell--rangeTop"]},{[`& .${Lo["cell--rangeBottom"]}`]:g["cell--rangeBottom"]},{[`& .${Lo["cell--rangeLeft"]}`]:g["cell--rangeLeft"]},{[`& .${Lo["cell--rangeRight"]}`]:g["cell--rangeRight"]},{[`& .${Lo["cell--withRightBorder"]}`]:g["cell--withRightBorder"]},{[`& .${Lo.cellContent}`]:g.cellContent},{[`& .${Lo.cellCheckbox}`]:g.cellCheckbox},{[`& .${Lo.cellSkeleton}`]:g.cellSkeleton},{[`& .${Lo.checkboxInput}`]:g.checkboxInput},{[`& .${Lo["columnHeader--alignCenter"]}`]:g["columnHeader--alignCenter"]},{[`& .${Lo["columnHeader--alignLeft"]}`]:g["columnHeader--alignLeft"]},{[`& .${Lo["columnHeader--alignRight"]}`]:g["columnHeader--alignRight"]},{[`& .${Lo["columnHeader--dragging"]}`]:g["columnHeader--dragging"]},{[`& .${Lo["columnHeader--moving"]}`]:g["columnHeader--moving"]},{[`& .${Lo["columnHeader--numeric"]}`]:g["columnHeader--numeric"]},{[`& .${Lo["columnHeader--sortable"]}`]:g["columnHeader--sortable"]},{[`& .${Lo["columnHeader--sorted"]}`]:g["columnHeader--sorted"]},{[`& .${Lo["columnHeader--withRightBorder"]}`]:g["columnHeader--withRightBorder"]},{[`& .${Lo.columnHeader}`]:g.columnHeader},{[`& .${Lo.headerFilterRow}`]:g.headerFilterRow},{[`& .${Lo.columnHeaderCheckbox}`]:g.columnHeaderCheckbox},{[`& .${Lo.columnHeaderDraggableContainer}`]:g.columnHeaderDraggableContainer},{[`& .${Lo.columnHeaderTitleContainer}`]:g.columnHeaderTitleContainer},{[`& .${Lo["columnSeparator--resizable"]}`]:g["columnSeparator--resizable"]},{[`& .${Lo["columnSeparator--resizing"]}`]:g["columnSeparator--resizing"]},{[`& .${Lo.columnSeparator}`]:g.columnSeparator},{[`& .${Lo.filterIcon}`]:g.filterIcon},{[`& .${Lo.iconSeparator}`]:g.iconSeparator},{[`& .${Lo.menuIcon}`]:g.menuIcon},{[`& .${Lo.menuIconButton}`]:g.menuIconButton},{[`& .${Lo.menuOpen}`]:g.menuOpen},{[`& .${Lo.menuList}`]:g.menuList},{[`& .${Lo["row--editable"]}`]:g["row--editable"]},{[`& .${Lo["row--editing"]}`]:g["row--editing"]},{[`& .${Lo["row--dragging"]}`]:g["row--dragging"]},{[`& .${Lo.row}`]:g.row},{[`& .${Lo.rowReorderCellPlaceholder}`]:g.rowReorderCellPlaceholder},{[`& .${Lo.rowReorderCell}`]:g.rowReorderCell},{[`& .${Lo["rowReorderCell--draggable"]}`]:g["rowReorderCell--draggable"]},{[`& .${Lo.sortIcon}`]:g.sortIcon},{[`& .${Lo.withBorderColor}`]:g.withBorderColor},{[`& .${Lo.treeDataGroupingCell}`]:g.treeDataGroupingCell},{[`& .${Lo.treeDataGroupingCellToggle}`]:g.treeDataGroupingCellToggle},{[`& .${Lo.detailPanelToggleCell}`]:g.detailPanelToggleCell},{[`& .${Lo["detailPanelToggleCell--expanded"]}`]:g["detailPanelToggleCell--expanded"]},g.root]})((({theme:e})=>{const g=function(e){return e.vars?e.vars.palette.TableCell.border:"light"===e.palette.mode?(0,Rt.$n)((0,Rt.Fq)(e.palette.divider,1),.88):(0,Rt._j)((0,Rt.Fq)(e.palette.divider,1),.68)}(e),l=e.shape.borderRadius;return(0,he.Z)({"--unstable_DataGrid-radius":"number"==typeof l?`${l}px`:l,"--unstable_DataGrid-headWeight":e.typography.fontWeightMedium,"--unstable_DataGrid-overlayBackground":e.vars?`rgba(${e.vars.palette.background.defaultChannel} / ${e.vars.palette.action.disabledOpacity})`:(0,Rt.Fq)(e.palette.background.default,e.palette.action.disabledOpacity),"--DataGrid-cellOffsetMultiplier":2,flex:1,boxSizing:"border-box",position:"relative",borderWidth:"1px",borderStyle:"solid",borderColor:g,borderRadius:"var(--unstable_DataGrid-radius)",color:(e.vars||e).palette.text.primary},e.typography.body2,{outline:"none",height:"100%",display:"flex",minWidth:0,minHeight:0,flexDirection:"column",overflowAnchor:"none",[`&.${Lo.autoHeight}`]:{height:"auto",[`& .${Lo["row--lastVisible"]} .${Lo.cell}`]:{borderBottomColor:"transparent"}},[`&.${Lo.autosizing}`]:{[`& .${Lo.columnHeaderTitleContainerContent} > *`]:{overflow:"visible !important"},[`& .${Lo.cell} > *`]:{overflow:"visible !important",whiteSpace:"nowrap"}},[`& .${Lo["virtualScrollerContent--overflowed"]} .${Lo["row--lastVisible"]} .${Lo.cell}`]:{borderBottomColor:"transparent"},[`& .${Lo.columnHeader}, & .${Lo.cell}`]:{WebkitTapHighlightColor:"transparent",lineHeight:null,padding:"0 10px",boxSizing:"border-box"},[`& .${Lo.columnHeader}:focus-within, & .${Lo.cell}:focus-within`]:{outline:`solid ${e.vars?`rgba(${e.vars.palette.primary.mainChannel} / 0.5)`:(0,Rt.Fq)(e.palette.primary.main,.5)} 1px`,outlineWidth:1,outlineOffset:-1},[`& .${Lo.columnHeader}:focus, & .${Lo.cell}:focus`]:{outline:`solid ${e.palette.primary.main} 1px`},[`& .${Lo.columnHeaderCheckbox}, & .${Lo.cellCheckbox}`]:{padding:0,justifyContent:"center",alignItems:"center"},[`& .${Lo.columnHeader}`]:{position:"relative",display:"flex",alignItems:"center"},[`& .${Lo["columnHeader--sorted"]} .${Lo.iconButtonContainer}, & .${Lo["columnHeader--filtered"]} .${Lo.iconButtonContainer}`]:{visibility:"visible",width:"auto"},[`& .${Lo.columnHeader}:not(.${Lo["columnHeader--sorted"]}) .${Lo.sortIcon}`]:{opacity:0,transition:e.transitions.create(["opacity"],{duration:e.transitions.duration.shorter})},[`& .${Lo.columnHeaderTitleContainer}`]:{display:"flex",alignItems:"center",minWidth:0,flex:1,whiteSpace:"nowrap",overflow:"hidden",position:"relative"},[`& .${Lo.columnHeaderTitleContainerContent}`]:{overflow:"hidden",display:"flex",alignItems:"center"},[`& .${Lo["columnHeader--filledGroup"]} .${Lo.columnHeaderTitleContainer}`]:{borderBottomWidth:"1px",borderBottomStyle:"solid",boxSizing:"border-box"},[`& .${Lo["columnHeader--filledGroup"]}.${Lo["columnHeader--showColumnBorder"]} .${Lo.columnHeaderTitleContainer}`]:{borderBottom:"none"},[`& .${Lo["columnHeader--filledGroup"]}.${Lo["columnHeader--showColumnBorder"]}`]:{borderBottomWidth:"1px",borderBottomStyle:"solid",boxSizing:"border-box"},[`& .${Lo.headerFilterRow}`]:{borderTop:`1px solid ${g}`},[`& .${Lo.sortIcon}, & .${Lo.filterIcon}`]:{fontSize:"inherit"},[`& .${Lo["columnHeader--sortable"]}`]:{cursor:"pointer"},[`& .${Lo["columnHeader--alignCenter"]} .${Lo.columnHeaderTitleContainer}`]:{justifyContent:"center"},[`& .${Lo["columnHeader--alignRight"]} .${Lo.columnHeaderDraggableContainer}, & .${Lo["columnHeader--alignRight"]} .${Lo.columnHeaderTitleContainer}`]:{flexDirection:"row-reverse"},[`& .${Lo["columnHeader--alignCenter"]} .${Lo.menuIcon}, & .${Lo["columnHeader--alignRight"]} .${Lo.menuIcon}`]:{marginRight:"auto",marginLeft:-6},[`& .${Lo["columnHeader--alignRight"]} .${Lo.menuIcon}, & .${Lo["columnHeader--alignRight"]} .${Lo.menuIcon}`]:{marginRight:"auto",marginLeft:-10},[`& .${Lo["columnHeader--moving"]}`]:{backgroundColor:(e.vars||e).palette.action.hover},[`& .${Lo.columnSeparator}`]:{visibility:"hidden",position:"absolute",zIndex:100,display:"flex",flexDirection:"column",justifyContent:"center",color:g},"@media (hover: hover)":{[`& .${Lo.columnHeaders}:hover`]:Uo,[`& .${Lo.columnHeader}:hover`]:Qo,[`& .${Lo.columnHeader}:not(.${Lo["columnHeader--sorted"]}):hover .${Lo.sortIcon}`]:{opacity:.5}},"@media (hover: none)":{[`& .${Lo.columnHeaders}`]:Uo,[`& .${Lo.columnHeader}`]:Qo},[`& .${Lo["columnSeparator--sideLeft"]}`]:{left:-12},[`& .${Lo["columnSeparator--sideRight"]}`]:{right:-12},[`& .${Lo["columnSeparator--resizable"]}`]:{cursor:"col-resize",touchAction:"none","&:hover":{color:(e.vars||e).palette.text.primary,"@media (hover: none)":{color:g}},[`&.${Lo["columnSeparator--resizing"]}`]:{color:(e.vars||e).palette.text.primary},"& svg":{pointerEvents:"none"}},[`& .${Lo.iconSeparator}`]:{color:"inherit"},[`& .${Lo.menuIcon}`]:{width:0,visibility:"hidden",fontSize:20,marginRight:-10,display:"flex",alignItems:"center"},[`.${Lo.menuOpen}`]:{visibility:"visible",width:"auto"},[`& .${Lo.row}`]:{display:"flex",width:"fit-content",breakInside:"avoid","&:hover, &.Mui-hovered":{backgroundColor:(e.vars||e).palette.action.hover,"@media (hover: none)":{backgroundColor:"transparent"}},"&.Mui-selected":{backgroundColor:e.vars?`rgba(${e.vars.palette.primary.mainChannel} / ${e.vars.palette.action.selectedOpacity})`:(0,Rt.Fq)(e.palette.primary.main,e.palette.action.selectedOpacity),"&:hover, &.Mui-hovered":{backgroundColor:e.vars?`rgba(${e.vars.palette.primary.mainChannel} / calc(\n                ${e.vars.palette.action.selectedOpacity} + \n                ${e.vars.palette.action.hoverOpacity}\n              ))`:(0,Rt.Fq)(e.palette.primary.main,e.palette.action.selectedOpacity+e.palette.action.hoverOpacity),"@media (hover: none)":{backgroundColor:e.vars?`rgba(${e.vars.palette.primary.mainChannel} / ${e.vars.palette.action.selectedOpacity})`:(0,Rt.Fq)(e.palette.primary.main,e.palette.action.selectedOpacity)}}}},[`& .${Lo.cell}`]:{display:"flex",alignItems:"center",borderBottom:"1px solid","&.Mui-selected":{backgroundColor:e.vars?`rgba(${e.vars.palette.primary.mainChannel} / ${e.vars.palette.action.selectedOpacity})`:(0,Rt.Fq)(e.palette.primary.main,e.palette.action.selectedOpacity),"&:hover, &.Mui-hovered":{backgroundColor:e.vars?`rgba(${e.vars.palette.primary.mainChannel} / ${e.vars.palette.action.selectedOpacity+e.palette.action.hoverOpacity})`:(0,Rt.Fq)(e.palette.primary.main,e.palette.action.selectedOpacity+e.palette.action.hoverOpacity),"@media (hover: none)":{backgroundColor:e.vars?`rgba(${e.vars.palette.primary.mainChannel} / ${e.vars.palette.action.selectedOpacity})`:(0,Rt.Fq)(e.palette.primary.main,e.palette.action.selectedOpacity)}}}},[`&.${Lo["root--disableUserSelection"]} .${Lo.cell}`]:{userSelect:"none"},[`& .${Lo.row}:not(.${Lo["row--dynamicHeight"]}) > .${Lo.cell}`]:{overflow:"hidden",whiteSpace:"nowrap"},[`& .${Lo.cellContent}`]:{overflow:"hidden",textOverflow:"ellipsis"},[`& .${Lo.cell}.${Lo["cell--selectionMode"]}`]:{cursor:"default"},[`& .${Lo.cell}.${Lo["cell--editing"]}`]:{padding:1,display:"flex",boxShadow:e.shadows[2],backgroundColor:(e.vars||e).palette.background.paper,"&:focus-within":{outline:`solid ${(e.vars||e).palette.primary.main} 1px`,outlineOffset:"-1px"}},[`& .${Lo["row--editing"]}`]:{boxShadow:e.shadows[2]},[`& .${Lo["row--editing"]} .${Lo.cell}`]:{boxShadow:e.shadows[0],backgroundColor:(e.vars||e).palette.background.paper},[`& .${Lo.editBooleanCell}`]:{display:"flex",height:"100%",width:"100%",alignItems:"center",justifyContent:"center"},[`& .${Lo.booleanCell}[data-value="true"]`]:{color:(e.vars||e).palette.text.secondary},[`& .${Lo.booleanCell}[data-value="false"]`]:{color:(e.vars||e).palette.text.disabled},[`& .${Lo.actionsCell}`]:{display:"inline-flex",alignItems:"center",gridGap:e.spacing(1)},[`& .${Lo.rowReorderCell}`]:{display:"inline-flex",flex:1,alignItems:"center",justifyContent:"center",opacity:(e.vars||e).palette.action.disabledOpacity},[`& .${Lo["rowReorderCell--draggable"]}`]:{cursor:"move",opacity:1},[`& .${Lo.rowReorderCellContainer}`]:{padding:0,alignItems:"stretch"},[`.${Lo.withBorderColor}`]:{borderColor:g},[`& .${Lo["cell--withRightBorder"]}`]:{borderRightWidth:"1px",borderRightStyle:"solid"},[`& .${Lo["columnHeader--withRightBorder"]}`]:{borderRightWidth:"1px",borderRightStyle:"solid"},[`& .${Lo["cell--textLeft"]}`]:{justifyContent:"flex-start"},[`& .${Lo["cell--textRight"]}`]:{justifyContent:"flex-end"},[`& .${Lo["cell--textCenter"]}`]:{justifyContent:"center"},[`& .${Lo.columnHeaderDraggableContainer}`]:{display:"flex",width:"100%",height:"100%"},[`& .${Lo.rowReorderCellPlaceholder}`]:{display:"none"},[`& .${Lo["columnHeader--dragging"]}, & .${Lo["row--dragging"]}`]:{background:(e.vars||e).palette.background.paper,padding:"0 12px",borderRadius:"var(--unstable_DataGrid-radius)",opacity:(e.vars||e).palette.action.disabledOpacity},[`& .${Lo["row--dragging"]}`]:{background:(e.vars||e).palette.background.paper,padding:"0 12px",borderRadius:"var(--unstable_DataGrid-radius)",opacity:(e.vars||e).palette.action.disabledOpacity,[`& .${Lo.rowReorderCellPlaceholder}`]:{display:"flex"}},[`& .${Lo.treeDataGroupingCell}`]:{display:"flex",alignItems:"center",width:"100%"},[`& .${Lo.treeDataGroupingCellToggle}`]:{flex:"0 0 28px",alignSelf:"stretch",marginRight:e.spacing(2)},[`& .${Lo.groupingCriteriaCell}`]:{display:"flex",alignItems:"center",width:"100%"},[`& .${Lo.groupingCriteriaCellToggle}`]:{flex:"0 0 28px",alignSelf:"stretch",marginRight:e.spacing(2)}})})),To={};function Po(e,l){const t=g.useRef(To);return t.current===To&&(t.current=e(l)),t}const jo=[];function Oo(e){g.useEffect(e,jo)}const qo=(e,g="warning")=>{let l=!1;const t=Array.isArray(e)?e.join("\n"):e;return()=>{l||(l=!0,"error"===g?console.error(t):console.warn(t))}},$o=Object.is;function _o(e,g){if(e===g)return!0;if(!(e instanceof Object&&g instanceof Object))return!1;let l=0,t=0;for(const t in e){if(l+=1,!$o(e[t],g[t]))return!1;if(!(t in g))return!1}for(const e in g)t+=1;return l===t}function eI(e,g){return function(e){return e.acceptsApiRef}(g)?g(e):g(e.current.state)}qo(["MUI: `useGridSelector` has been called before the initialization of the state.","This hook can only be used inside the context of the grid."]);const gI=Object.is,lI=_o,tI=()=>({state:null,equals:null,selector:null}),nI=(e,l,t=gI)=>{const n=Po(tI),o=null!==n.current.selector,[I,C]=g.useState(o?null:eI(e,l));return n.current.state=I,n.current.equals=t,n.current.selector=l,Oo((()=>e.current.store.subscribe((()=>{const g=eI(e,n.current.selector);n.current.equals(n.current.state,g)||(n.current.state=g,C(g))})))),I},oI=g.createContext(void 0);function II(){const e=g.useContext(oI);if(void 0===e)throw new Error(["MUI: Could not find the data grid private context.","It looks like you rendered your component outside of a DataGrid, DataGridPro or DataGridPremium parent component.","This can also happen if you are bundling multiple versions of the data grid."].join("\n"));return e}const CI=g.createContext(void 0),rI=()=>{const e=g.useContext(CI);if(!e)throw new Error("MUI: useGridRootProps should only be used inside the DataGrid, DataGridPro or DataGridPremium component.");return e};var aI="NOT_FOUND",iI=function(e,g){return e===g};function cI(e,g){var l,t,n="object"==typeof g?g:{equalityCheck:g},o=n.equalityCheck,I=void 0===o?iI:o,C=n.maxSize,r=void 0===C?1:C,a=n.resultEqualityCheck,i=function(e){return function(g,l){if(null===g||null===l||g.length!==l.length)return!1;for(var t=g.length,n=0;n<t;n++)if(!e(g[n],l[n]))return!1;return!0}}(I),c=1===r?(l=i,{get:function(e){return t&&l(t.key,e)?t.value:aI},put:function(e,g){t={key:e,value:g}},getEntries:function(){return t?[t]:[]},clear:function(){t=void 0}}):function(e,g){var l=[];function t(e){var t=l.findIndex((function(l){return g(e,l.key)}));if(t>-1){var n=l[t];return t>0&&(l.splice(t,1),l.unshift(n)),n.value}return aI}return{get:t,put:function(g,n){t(g)===aI&&(l.unshift({key:g,value:n}),l.length>e&&l.pop())},getEntries:function(){return l},clear:function(){l=[]}}}(r,i);function s(){var g=c.get(arguments);if(g===aI){if(g=e.apply(null,arguments),a){var l=c.getEntries().find((function(e){return a(e.value,g)}));l&&(g=l.value)}c.put(arguments,g)}return g}return s.clearCache=function(){return c.clear()},s}function sI(e){for(var g=arguments.length,l=new Array(g>1?g-1:0),t=1;t<g;t++)l[t-1]=arguments[t];return function(){for(var g=arguments.length,t=new Array(g),n=0;n<g;n++)t[n]=arguments[n];var o,I=0,C={memoizeOptions:void 0},r=t.pop();if("object"==typeof r&&(C=r,r=t.pop()),"function"!=typeof r)throw new Error("createSelector expects an output function after the inputs, but received: ["+typeof r+"]");var a=C.memoizeOptions,i=void 0===a?l:a,c=Array.isArray(i)?i:[i],s=function(e){var g=Array.isArray(e[0])?e[0]:e;if(!g.every((function(e){return"function"==typeof e}))){var l=g.map((function(e){return"function"==typeof e?"function "+(e.name||"unnamed")+"()":typeof e})).join(", ");throw new Error("createSelector expects all input-selectors to be functions, but received the following types: ["+l+"]")}return g}(t),d=e.apply(void 0,[function(){return I++,r.apply(null,arguments)}].concat(c)),u=e((function(){for(var e=[],g=s.length,l=0;l<g;l++)e.push(s[l].apply(null,arguments));return o=d.apply(null,e)}));return Object.assign(u,{resultFunc:r,memoizedResultFunc:d,dependencies:s,lastResult:function(){return o},recomputations:function(){return I},resetRecomputations:function(){return I=0}}),u}}var dI=sI(cI);const uI={cache:new WeakMap};function AI(e){return"current"in e&&"instanceId"in e.current}qo(["MUI: A selector was called without passing the instance ID, which may impact the performance of the grid.","To fix, call it with `apiRef`, e.g. `mySelector(apiRef)`, or pass the instance ID explicitly, e.g. `mySelector(state, apiRef.current.instanceId)`."]);const mI={id:"default"},bI=(e,g,l,t,n,o,...I)=>{if(I.length>0)throw new Error("Unsupported number of selectors");let C;if(e&&g&&l&&t&&n&&o)C=(I,C)=>{const r=AI(I),a=null!=C?C:r?I.current.instanceId:mI,i=r?I.current.state:I,c=e(i,a),s=g(i,a),d=l(i,a),u=t(i,a),A=n(i,a);return o(c,s,d,u,A)};else if(e&&g&&l&&t&&n)C=(o,I)=>{const C=AI(o),r=null!=I?I:C?o.current.instanceId:mI,a=C?o.current.state:o,i=e(a,r),c=g(a,r),s=l(a,r),d=t(a,r);return n(i,c,s,d)};else if(e&&g&&l&&t)C=(n,o)=>{const I=AI(n),C=null!=o?o:I?n.current.instanceId:mI,r=I?n.current.state:n,a=e(r,C),i=g(r,C),c=l(r,C);return t(a,i,c)};else if(e&&g&&l)C=(t,n)=>{const o=AI(t),I=null!=n?n:o?t.current.instanceId:mI,C=o?t.current.state:t,r=e(C,I),a=g(C,I);return l(r,a)};else{if(!e||!g)throw new Error("Missing arguments");C=(l,t)=>{const n=AI(l),o=null!=t?t:n?l.current.instanceId:mI,I=n?l.current.state:l,C=e(I,o);return g(C)}}return C.acceptsApiRef=!0,C},pI=(...e)=>{const g=(...g)=>{var l,t;const[n,o]=g,I=AI(n),C=I?n.current.instanceId:null!=o?o:mI,r=I?n.current.state:n,{cache:a}=uI;var i;if(a.get(C)&&null!=(l=a.get(C))&&l.get(e))return null==(i=a.get(C))?void 0:i.get(e)(r,C);const c=dI(...e);return a.get(C)||a.set(C,new Map),null==(t=a.get(C))||t.set(e,c),c(r,C)};return g.acceptsApiRef=!0,g},ZI=e=>e.density,hI=bI(ZI,(e=>e.value)),GI=bI(ZI,(e=>e.factor)),yI=e=>e.columns,BI=bI(yI,(e=>e.orderedFields)),SI=bI(yI,(e=>e.lookup)),VI=pI(BI,SI,((e,g)=>e.map((e=>g[e])))),WI=bI(yI,(e=>e.columnVisibilityModel)),RI=pI(VI,WI,((e,g)=>e.filter((e=>!1!==g[e.field])))),fI=pI(RI,(e=>e.map((e=>e.field)))),vI=pI(RI,(e=>{const g=[];let l=0;for(let t=0;t<e.length;t+=1)g.push(l),l+=e[t].computedWidth;return g})),kI=bI(RI,vI,((e,g)=>{const l=e.length;return 0===l?0:g[l-1]+e[l-1].computedWidth})),XI=pI(VI,(e=>e.filter((e=>e.filterable)))),JI=pI(VI,(e=>e.reduce(((e,g)=>(g.filterable&&(e[g.field]=g),e)),{}))),wI=e=>e.columnGrouping,YI=pI(wI,(e=>{var g;return null!=(g=null==e?void 0:e.unwrappedGroupingModel)?g:{}})),HI=pI(wI,(e=>{var g;return null!=(g=null==e?void 0:e.lookup)?g:{}})),FI=pI(wI,(e=>{var g;return null!=(g=null==e?void 0:e.headerStructure)?g:[]})),NI=bI(wI,(e=>{var g;return null!=(g=null==e?void 0:e.maxDepth)?g:0})),KI=e=>e.rows,xI=bI(KI,(e=>e.totalRowCount)),MI=bI(KI,(e=>e.loading)),zI=bI(KI,(e=>e.totalTopLevelRowCount)),EI=bI(KI,(e=>e.dataRowIdToModelLookup)),LI=bI(KI,(e=>e.dataRowIdToIdLookup)),UI=bI(KI,(e=>e.tree)),QI=bI(KI,(e=>e.groupingName)),DI=bI(KI,(e=>e.treeDepths)),TI=pI(KI,(e=>{const g=Object.entries(e.treeDepths);return 0===g.length?1:g.filter((([,e])=>e>0)).map((([e])=>Number(e))).sort(((e,g)=>g-e))[0]+1})),PI=bI(KI,(e=>e.dataRowIds)),jI=pI(bI(KI,(e=>null==e?void 0:e.additionalRowGroups)),(e=>{var g,l;const t=null==e?void 0:e.pinnedRows;return{bottom:null==t||null==(g=t.bottom)?void 0:g.map((e=>{var g;return{id:e.id,model:null!=(g=e.model)?g:{}}})),top:null==t||null==(l=t.top)?void 0:l.map((e=>{var g;return{id:e.id,model:null!=(g=e.model)?g:{}}}))}})),OI=bI(jI,(e=>{var g,l;return((null==e||null==(g=e.top)?void 0:g.length)||0)+((null==e||null==(l=e.bottom)?void 0:l.length)||0)})),qI=()=>{var e;const g=II(),l=rI(),t=nI(g,RI),n=nI(g,xI),o=nI(g,NI),I=nI(g,OI);let C="grid";return null!=(e=l.experimentalFeatures)&&e.ariaV7&&l.treeData&&(C="treegrid"),{role:C,"aria-colcount":t.length,"aria-rowcount":o+1+I+n,"aria-multiselectable":!l.disableMultipleRowSelection}},$I=["children","className"],_I=g.forwardRef((function(e,l){var t;const n=rI(),{children:o,className:I}=e,C=(0,Ge.Z)(e,$I),r=II(),a=nI(r,hI),i=g.useRef(null),c=(0,ve.Z)(i,l),s=null!=(t=n.experimentalFeatures)&&t.ariaV7?null:qI,d="function"==typeof s?s():null,u=(0,he.Z)({},n,{density:a}),A=(e=>{const{autoHeight:g,density:l,classes:t}=e,n={root:["root",g&&"autoHeight",`root--density${(0,zo.Z)(l)}`,"withBorderColor"]};return(0,Be.Z)(n,Eo,t)})(u);r.current.register("public",{rootElementRef:i});const[m,b]=g.useState(!1);return(0,Xe.Z)((()=>{b(!0)}),[]),m?(0,we.jsx)(Do,(0,he.Z)({ref:c,className:(0,ye.Z)(I,A.root),ownerState:u},d,C,{children:o})):null}));function eC(){var e,l;const t=rI();return(0,we.jsxs)(g.Fragment,{children:[(0,we.jsx)(t.slots.preferencesPanel,(0,he.Z)({},null==(e=t.slotProps)?void 0:e.preferencesPanel)),t.slots.toolbar&&(0,we.jsx)(t.slots.toolbar,(0,he.Z)({},null==(l=t.slotProps)?void 0:l.toolbar))]})}const gC=(0,n(2360).ZP)(),lC=gC("div",{name:"MuiDataGrid",slot:"Main",overridesResolver:(e,g)=>g.main})((()=>({position:"relative",flexGrow:1,display:"flex",flexDirection:"column",overflow:"hidden"}))),tC=g.forwardRef(((e,g)=>{var l;const t=rI(),n=(e=>{const{classes:g}=e;return(0,Be.Z)({root:["main"]},Eo,g)})(t),o=null!=(l=t.experimentalFeatures)&&l.ariaV7?qI:null,I="function"==typeof o?o():null;return(0,we.jsx)(lC,(0,he.Z)({ref:g,className:n.root,ownerState:t},I,{children:e.children}))})),nC=e=>e.sorting,oC=bI(nC,(e=>e.sortedRows)),IC=pI(oC,EI,((e,g)=>e.map((e=>{var l;return{id:e,model:null!=(l=g[e])?l:{}}})))),CC=bI(nC,(e=>e.sortModel)),rC=pI(CC,(e=>e.reduce(((g,l,t)=>(g[l.field]={sortDirection:l.sort,sortIndex:e.length>1?t+1:void 0},g)),{}))),aC=e=>e.filter,iC=bI(aC,(e=>e.filterModel)),cC=(bI(iC,(e=>e.quickFilterValues)),bI(aC,(e=>e.filteredRowsLookup))),sC=(bI(aC,(e=>e.filteredDescendantCountLookup)),pI((e=>e.visibleRowsLookup),IC,((e,g)=>g.filter((g=>!1!==e[g.id]))))),dC=pI(sC,(e=>e.map((e=>e.id)))),uC=pI(cC,IC,((e,g)=>g.filter((g=>!1!==e[g.id])))),AC=pI(uC,(e=>e.map((e=>e.id)))),mC=pI(sC,UI,TI,((e,g,l)=>l<2?e:e.filter((e=>{var l;return 0===(null==(l=g[e.id])?void 0:l.depth)})))),bC=bI(sC,(e=>e.length)),pC=bI(mC,(e=>e.length)),ZC=pI(iC,SI,((e,g)=>{var l;return null==(l=e.items)?void 0:l.filter((e=>{var l,t;if(!e.field)return!1;const n=g[e.field];if(null==n||!n.filterOperators||0===(null==n||null==(l=n.filterOperators)?void 0:l.length))return!1;const o=n.filterOperators.find((g=>g.value===e.operator));return!!o&&(!o.InputComponent||null!=e.value&&""!==(null==(t=e.value)?void 0:t.toString()))}))})),hC=pI(ZC,(e=>e.reduce(((e,g)=>(e[g.field]?e[g.field].push(g):e[g.field]=[g],e)),{}))),GC=e=>e.focus,yC=bI(GC,(e=>e.cell)),BC=bI(GC,(e=>e.columnHeader)),SC=(bI(GC,(e=>e.columnHeaderFilter)),bI(GC,(e=>e.columnGroupHeader))),VC=e=>e.tabIndex,WC=bI(VC,(e=>e.cell)),RC=bI(VC,(e=>e.columnHeader)),fC=(bI(VC,(e=>e.columnHeaderFilter)),bI(VC,(e=>e.columnGroupHeader))),vC=e=>e.columnMenu;function kC(e){const{VirtualScrollerComponent:l,ColumnHeadersProps:t,children:n}=e,o=II(),I=rI(),C=g.useRef(null),r=nI(o,RI),a=nI(o,hC),i=nI(o,rC),c=nI(o,vI),s=nI(o,RC),d=nI(o,WC),u=nI(o,fC),A=nI(o,BC),m=nI(o,SC),b=nI(o,GI),p=nI(o,NI),Z=nI(o,vC),h=nI(o,WI),G=nI(o,FI),y=!(null===u&&null===s&&null===d);(0,Xe.Z)((()=>{o.current.computeSizeAndPublishResizeEvent();const e=C.current;if("undefined"==typeof ResizeObserver)return()=>{};let g;const l=new ResizeObserver((()=>{g=requestAnimationFrame((()=>{o.current.computeSizeAndPublishResizeEvent()}))}));return e&&l.observe(e),()=>{g&&window.cancelAnimationFrame(g),e&&l.unobserve(e)}}),[o]);const B=g.useRef(null),S=g.useRef(null),V=g.useRef(null);o.current.register("private",{columnHeadersContainerElementRef:S,columnHeadersElementRef:B,virtualScrollerRef:V,mainElementRef:C});const W=!!o.current.getRootDimensions();return(0,we.jsxs)(tC,{ref:C,children:[(0,we.jsx)(I.slots.columnHeaders,(0,he.Z)({ref:S,innerRef:B,visibleColumns:r,filterColumnLookup:a,sortColumnLookup:i,columnPositions:c,columnHeaderTabIndexState:s,columnGroupHeaderTabIndexState:u,columnHeaderFocus:A,columnGroupHeaderFocus:m,densityFactor:b,headerGroupingMaxDepth:p,columnMenuState:Z,columnVisibility:h,columnGroupsHeaderStructure:G,hasOtherElementInTabSequence:y},t)),W&&(0,we.jsx)(l,{ref:V}),n]})}function XC(){var e;const g=rI();return g.hideFooter?null:(0,we.jsx)(g.slots.footer,(0,he.Z)({},null==(e=g.slotProps)?void 0:e.footer))}const JC=g.createContext(void 0);function wC({privateApiRef:e,props:l,children:t}){const n=g.useRef(e.current.getPublicApi());return(0,we.jsx)(CI.Provider,{value:l,children:(0,we.jsx)(oI.Provider,{value:e,children:(0,we.jsx)(JC.Provider,{value:n,children:t})})})}function YC(e){return"function"==typeof e}function HC(e){return"object"==typeof e&&null!==e}function FC(e){return e.replace(/[-[\]{}()*+?.,\\^$|#\s]/g,"\\$&")}const NC=(e,g,l)=>Math.max(g,Math.min(l,e));function KC(e,g){if(e===g)return!0;if(e&&g&&"object"==typeof e&&"object"==typeof g){if(e.constructor!==g.constructor)return!1;if(Array.isArray(e)){const l=e.length;if(l!==g.length)return!1;for(let t=0;t<l;t+=1)if(!KC(e[t],g[t]))return!1;return!0}if(e instanceof Map&&g instanceof Map){if(e.size!==g.size)return!1;const l=Array.from(e.entries());for(let e=0;e<l.length;e+=1)if(!g.has(l[e][0]))return!1;for(let e=0;e<l.length;e+=1){const t=l[e];if(!KC(t[1],g.get(t[0])))return!1}return!0}if(e instanceof Set&&g instanceof Set){if(e.size!==g.size)return!1;const l=Array.from(e.entries());for(let e=0;e<l.length;e+=1)if(!g.has(l[e][0]))return!1;return!0}if(ArrayBuffer.isView(e)&&ArrayBuffer.isView(g)){const l=e.length;if(l!==g.length)return!1;for(let t=0;t<l;t+=1)if(e[t]!==g[t])return!1;return!0}if(e.constructor===RegExp)return e.source===g.source&&e.flags===g.flags;if(e.valueOf!==Object.prototype.valueOf)return e.valueOf()===g.valueOf();if(e.toString!==Object.prototype.toString)return e.toString()===g.toString();const l=Object.keys(e),t=l.length;if(t!==Object.keys(g).length)return!1;for(let e=0;e<t;e+=1)if(!Object.prototype.hasOwnProperty.call(g,l[e]))return!1;for(let n=0;n<t;n+=1){const t=l[n];if(!KC(e[t],g[t]))return!1}return!0}return e!=e&&g!=g}function xC(e){return"function"==typeof structuredClone?structuredClone(e):JSON.parse(JSON.stringify(e))}function MC(e,l,t){const n=g.useRef(!0);g.useEffect((()=>{n.current=!1,e.current.register(t,l)}),[e,t,l]),n.current&&e.current.register(t,l)}const zC=function(){try{const e="__some_random_key_you_are_not_going_to_use__";return window.localStorage.setItem(e,e),window.localStorage.removeItem(e),!0}catch(e){return!1}}()&&null!=window.localStorage.getItem("DEBUG"),EC=()=>{},LC={debug:EC,info:EC,warn:EC,error:EC},UC=["debug","info","warn","error"];function QC(e,g,l=console){const t=UC.indexOf(g);if(-1===t)throw new Error(`MUI: Log level ${g} not recognized.`);return UC.reduce(((g,n,o)=>(g[n]=o>=t?(...g)=>{const[t,...o]=g;l[n](`MUI: ${e} - ${t}`,...o)}:EC,g)),{})}class DC{static create(e){return new DC(e)}constructor(e){this.value=void 0,this.listeners=void 0,this.subscribe=e=>(this.listeners.add(e),()=>{this.listeners.delete(e)}),this.getSnapshot=()=>this.value,this.update=e=>{this.value=e,this.listeners.forEach((g=>g(e)))},this.value=e,this.listeners=new Set}}class TC{constructor(e=1e3){this.timeouts=new Map,this.cleanupTimeout=1e3,this.cleanupTimeout=e}register(e,g,l){this.timeouts||(this.timeouts=new Map);const t=setTimeout((()=>{"function"==typeof g&&g(),this.timeouts.delete(l.cleanupToken)}),this.cleanupTimeout);this.timeouts.set(l.cleanupToken,t)}unregister(e){const g=this.timeouts.get(e.cleanupToken);g&&(this.timeouts.delete(e.cleanupToken),clearTimeout(g))}reset(){this.timeouts&&(this.timeouts.forEach(((e,g)=>{this.unregister({cleanupToken:g})})),this.timeouts=void 0)}}class PC{constructor(){this.registry=new FinalizationRegistry((e=>{"function"==typeof e&&e()}))}register(e,g,l){this.registry.register(e,g,l)}unregister(e){this.registry.unregister(e)}reset(){}}var jC=function(e){return e.DataGrid="DataGrid",e.DataGridPro="DataGridPro",e}(jC||{});class OC{}const qC=function(e){let l=0;return function(t,n,o,I){null===e.registry&&(e.registry="undefined"!=typeof FinalizationRegistry?new PC:new TC);const[C]=g.useState(new OC),r=g.useRef(null),a=g.useRef();a.current=o;const i=g.useRef(null);if(!r.current&&a.current){const g=(e,g,l)=>{var t;g.defaultMuiPrevented||null==(t=a.current)||t.call(a,e,g,l)};r.current=t.current.subscribeEvent(n,g,I),l+=1,i.current={cleanupToken:l},e.registry.register(C,(()=>{var e;null==(e=r.current)||e.call(r),r.current=null,i.current=null}),i.current)}else!a.current&&r.current&&(r.current(),r.current=null,i.current&&(e.registry.unregister(i.current),i.current=null));g.useEffect((()=>{if(!r.current&&a.current){const e=(e,g,l)=>{var t;g.defaultMuiPrevented||null==(t=a.current)||t.call(a,e,g,l)};r.current=t.current.subscribeEvent(n,e,I)}return i.current&&e.registry&&(e.registry.unregister(i.current),i.current=null),()=>{var e;null==(e=r.current)||e.call(r),r.current=null}}),[t,n,I])}}({registry:null}),$C={isFirst:!0};function _C(e,g,l){qC(e,g,l,$C)}class er{constructor(){this.maxListeners=20,this.warnOnce=!1,this.events={}}on(e,g,l={}){let t=this.events[e];t||(t={highPriority:new Map,regular:new Map},this.events[e]=t),l.isFirst?t.highPriority.set(g,!0):t.regular.set(g,!0)}removeListener(e,g){this.events[e]&&(this.events[e].regular.delete(g),this.events[e].highPriority.delete(g))}removeAllListeners(){this.events={}}emit(e,...g){const l=this.events[e];if(!l)return;const t=Array.from(l.highPriority.keys()),n=Array.from(l.regular.keys());for(let e=t.length-1;e>=0;e-=1){const n=t[e];l.highPriority.has(n)&&n.apply(this,g)}for(let e=0;e<n.length;e+=1){const t=n[e];l.regular.has(t)&&t.apply(this,g)}}once(e,g){const l=this;this.on(e,(function t(...n){l.removeListener(e,t),g.apply(l,n)}))}}const gr=Symbol("mui.api_private");let lr=0;function tr(e){return tr="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},tr(e)}function nr(e){var g=function(e,g){if("object"!=tr(e)||!e)return e;var l=e[Symbol.toPrimitive];if(void 0!==l){var t=l.call(e,"string");if("object"!=tr(t))return t;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(e)}(e);return"symbol"==tr(g)?g:String(g)}const or="none",Ir={rowTreeCreation:"rowTree",filtering:"rowTree",sorting:"rowTree",visibleRowsLookupCreation:"rowTree"},Cr=(e,l)=>{const t=function(e,l){const t=g.useRef(),n=g.useRef();n.current||(n.current=function(e){var g;const l=null==(g=e.current)?void 0:g[gr];if(l)return l;const t={},n={state:t,store:DC.create(t),instanceId:{id:lr}};return lr+=1,n.getPublicApi=()=>e.current,n.register=(g,l)=>{Object.keys(l).forEach((t=>{const o=l[t],I=n[t];if(!0===(null==I?void 0:I.spying)?I.target=o:n[t]=o,"public"===g){const g=e.current,l=g[t];!0===(null==l?void 0:l.spying)?l.target=o:g[t]=o}}))},n.register("private",{caches:{},eventManager:new er}),n}(t)),t.current||(t.current=function(e){return{get state(){return e.current.state},get store(){return e.current.store},get instanceId(){return e.current.instanceId},[gr]:e.current}}(n));const o=g.useCallback(((...e)=>{const[g,t,o={}]=e;if(o.defaultMuiPrevented=!1,(e=>void 0!==e.isPropagationStopped)(o)&&o.isPropagationStopped())return;const I=l.signature===jC.DataGridPro?{api:n.current.getPublicApi()}:{};n.current.eventManager.emit(g,t,o,I)}),[n,l.signature]),I=g.useCallback(((e,g,l)=>{n.current.eventManager.on(e,g,l);const t=n.current;return()=>{t.eventManager.removeListener(e,g)}}),[n]);return MC(n,{subscribeEvent:I,publishEvent:o},"public"),g.useImperativeHandle(e,(()=>t.current),[t]),g.useEffect((()=>{const e=n.current;return()=>{e.publishEvent("unmount")}}),[n]),n}(e,l);return((e,l)=>{MC(e,{getLogger:g.useCallback((e=>zC?QC(e,"debug",l.logger):l.logLevel?QC(e,l.logLevel.toString(),l.logger):LC),[l.logLevel,l.logger])},"private")})(t,l),((e,l)=>{const t=g.useRef({}),[,n]=g.useState(),o=g.useCallback((e=>{t.current[e.stateId]=e}),[]),I=g.useCallback(((g,n)=>{let o;if(o=YC(g)?g(e.current.state):g,e.current.state===o)return!1;let I=!1;const C=[];if(Object.keys(t.current).forEach((g=>{const l=t.current[g],n=l.stateSelector(e.current.state,e.current.instanceId),r=l.stateSelector(o,e.current.instanceId);r!==n&&(C.push({stateId:l.stateId,hasPropChanged:r!==l.propModel}),void 0!==l.propModel&&r!==l.propModel&&(I=!0))})),C.length>1)throw new Error(`You're not allowed to update several sub-state in one transaction. You already updated ${C[0].stateId}, therefore, you're not allowed to update ${C.map((e=>e.stateId)).join(", ")} in the same transaction.`);if(I||(e.current.state=o,e.current.publishEvent&&e.current.publishEvent("stateChange",o),e.current.store.update(o)),1===C.length){const{stateId:g,hasPropChanged:r}=C[0],a=t.current[g],i=a.stateSelector(o,e.current.instanceId);if(a.propOnChange&&r){const g=l.signature===jC.DataGridPro?{api:e.current,reason:n}:{reason:n};a.propOnChange(i,g)}I||e.current.publishEvent(a.changeEvent,i,{reason:n})}return!I}),[e,l.signature]),C=g.useCallback(((g,l,t)=>e.current.setState((e=>(0,he.Z)({},e,{[g]:l(e[g])})),t)),[e]),r=g.useCallback((()=>n((()=>e.current.state))),[e]),a={updateControlState:C,registerControlState:o};MC(e,{setState:I,forceUpdate:r},"public"),MC(e,a,"private")})(t,l),(e=>{const l=g.useRef({}),t=g.useRef(!1),n=g.useCallback((e=>{!t.current&&e&&(t.current=!0,Object.values(e.appliers).forEach((e=>{e()})),t.current=!1)}),[]),o=g.useCallback(((e,g,t)=>{l.current[e]||(l.current[e]={processors:new Map,appliers:{}});const o=l.current[e];return o.processors.get(g)!==t&&(o.processors.set(g,t),n(o)),()=>{l.current[e].processors.set(g,null)}}),[n]),I=g.useCallback(((e,g,t)=>(l.current[e]||(l.current[e]={processors:new Map,appliers:{}}),l.current[e].appliers[g]=t,()=>{const t=l.current[e].appliers,n=(0,Ge.Z)(t,[g].map(nr));l.current[e].appliers=n})),[]),C=g.useCallback((e=>{const g=l.current[e];n(g)}),[n]),r={unstable_applyPipeProcessors:g.useCallback(((...e)=>{const[g,t,n]=e;return l.current[g]?Array.from(l.current[g].processors.values()).reduce(((e,g)=>g?g(e,n):e),t):t}),[])};MC(e,{registerPipeProcessor:o,registerPipeApplier:I,requestPipeProcessorsApplication:C},"private"),MC(e,r,"public")})(t),(e=>{const l=g.useRef(new Map),t=g.useRef({}),n=g.useCallback(((g,l,n)=>{const o=()=>{const e=t.current[l],n=(0,Ge.Z)(e,[g].map(nr));t.current[l]=n};t.current[l]||(t.current[l]={});const I=t.current[l],C=I[g];return I[g]=n,C&&C!==n?(g===e.current.getActiveStrategy(Ir[l])&&e.current.publishEvent("activeStrategyProcessorChange",l),o):o}),[e]),o=g.useCallback(((g,l)=>{const n=e.current.getActiveStrategy(Ir[g]);if(null==n)throw new Error("Can't apply a strategy processor before defining an active strategy");const o=t.current[g];if(!o||!o[n])throw new Error(`No processor found for processor "${g}" on strategy "${n}"`);return(0,o[n])(l)}),[e]),I=g.useCallback((e=>{var g;const t=Array.from(l.current.entries()).find((([,g])=>g.group===e&&g.isAvailable()));return null!=(g=null==t?void 0:t[0])?g:or}),[]),C=g.useCallback(((g,t,n)=>{l.current.set(t,{group:g,isAvailable:n}),e.current.publishEvent("strategyAvailabilityChange")}),[e]);MC(e,{registerStrategyProcessor:n,applyStrategyProcessor:o,getActiveStrategy:I,setStrategyAvailability:C},"private")})(t),((e,l)=>{const t=g.useCallback((e=>{if(null==l.localeText[e])throw new Error(`Missing translation for key ${e}.`);return l.localeText[e]}),[l.localeText]);e.current.register("public",{getLocaleText:t})})(t,l),t.current.register("private",{rootProps:l}),t},rr=(e,l,t)=>{const n=g.useRef(!1);n.current||(l.current.state=e(l.current.state,t,l),n.current=!0)};function ar(e,l){const t=g.useRef(null);if(t.current)return t.current;const n=e.current.getLogger(l);return t.current=n,n}const ir=e=>"Escape"===e,cr=e=>"Tab"===e,sr=e=>" "===e;function dr(e){return 1===e.key.length&&!e.ctrlKey&&!e.metaKey}const ur=e=>(e=>"Home"===e||"End"===e)(e)||(e=>0===e.indexOf("Arrow"))(e)||(e=>0===e.indexOf("Page"))(e)||sr(e);function Ar(){const e=g.useContext(JC);if(void 0===e)throw new Error(["MUI: Could not find the data grid context.","It looks like you rendered your component outside of a DataGrid, DataGridPro or DataGridPremium parent component.","This can also happen if you are bundling multiple versions of the data grid."].join("\n"));return e}const mr=["field","id","value","formattedValue","row","rowNode","colDef","isEditable","cellMode","hasFocus","tabIndex","api"],br=g.forwardRef((function(e,l){var t;const{field:n,id:o,value:I,rowNode:C,hasFocus:r,tabIndex:a}=e,i=(0,Ge.Z)(e,mr),c=Ar(),s=rI(),d=(e=>{const{classes:g}=e;return(0,Be.Z)({root:["checkboxInput"]},Eo,g)})({classes:s.classes}),u=g.useRef(null),A=g.useRef(null),m=(0,ve.Z)(u,l),b=c.current.getCellElement(o,n);g.useLayoutEffect((()=>{0===a&&b&&(b.tabIndex=-1)}),[b,a]),g.useEffect((()=>{if(r){var e;const g=null==(e=u.current)?void 0:e.querySelector("input");null==g||g.focus({preventScroll:!0})}else A.current&&A.current.stop({})}),[r]);const p=g.useCallback((e=>{sr(e.key)&&e.stopPropagation()}),[]);if("footer"===C.type||"pinnedRow"===C.type)return null;const Z=c.current.isRowSelectable(o),h=c.current.getLocaleText(I?"checkboxSelectionUnselectRow":"checkboxSelectionSelectRow");return(0,we.jsx)(s.slots.baseCheckbox,(0,he.Z)({ref:m,tabIndex:a,checked:I,onChange:e=>{const g={value:e.target.checked,id:o};c.current.publishEvent("rowSelectionCheckboxChange",g,e)},className:d.root,inputProps:{"aria-label":h},onKeyDown:p,disabled:!Z,touchRippleRef:A},null==(t=s.slotProps)?void 0:t.baseCheckbox,i))})),pr=e=>e.rowSelection,Zr=bI(pr,(e=>e.length)),hr=pI(pr,EI,((e,g)=>new Map(e.map((e=>[e,g[e]]))))),Gr=pI(pr,(e=>e.reduce(((e,g)=>(e[g]=g,e)),{}))),yr=(e,g)=>g>0&&e>0?Math.ceil(e/g):0,Br=(qo(["MUI: the 'rowCount' prop is undefined while using paginationMode='server'","For more detail, see http://mui.com/components/data-grid/pagination/#basic-implementation"],"error"),e=>({page:0,pageSize:e?0:100})),Sr=(e,g)=>{if(g===jC.DataGrid&&e>100)throw new Error(["MUI: `pageSize` cannot exceed 100 in the MIT version of the DataGrid.","You need to upgrade to DataGridPro or DataGridPremium component to unlock this feature."].join("\n"))},Vr=e=>e.pagination,Wr=bI(Vr,(e=>e.paginationModel)),Rr=bI(Wr,(e=>e.page)),fr=bI(Wr,(e=>e.pageSize)),vr=(bI(Wr,pC,((e,g)=>yr(g,e.pageSize))),pI(Wr,UI,TI,sC,mC,((e,g,l,t,n)=>{const o=n.length,I=Math.min(e.pageSize*e.page,o-1),C=Math.min(I+e.pageSize-1,o-1);if(-1===I||-1===C)return null;if(l<2)return{firstRowIndex:I,lastRowIndex:C};const r=n[I],a=C-I+1,i=t.findIndex((e=>e.id===r.id));let c=i,s=0;for(;c<t.length&&s<=a;){var d;const e=null==(d=g[t[c].id])?void 0:d.depth;void 0===e?c+=1:((s<a||e>0)&&(c+=1),0===e&&(s+=1))}return{firstRowIndex:i,lastRowIndex:c-1}}))),kr=pI(sC,vr,((e,g)=>g?e.slice(g.firstRowIndex,g.lastRowIndex+1):[])),Xr=pI(dC,vr,((e,g)=>g?e.slice(g.firstRowIndex,g.lastRowIndex+1):[])),Jr=["field","colDef"],wr=g.forwardRef((function(e,l){var t;const n=(0,Ge.Z)(e,Jr),[,o]=g.useState(!1),I=Ar(),C=rI(),r=(e=>{const{classes:g}=e;return(0,Be.Z)({root:["checkboxInput"]},Eo,g)})({classes:C.classes}),a=nI(I,RC),i=nI(I,pr),c=nI(I,dC),s=nI(I,Xr),d=g.useMemo((()=>"function"!=typeof C.isRowSelectable?i:i.filter((e=>!!I.current.getRow(e)&&C.isRowSelectable(I.current.getRowParams(e))))),[I,C.isRowSelectable,i]),u=g.useMemo((()=>(C.pagination&&C.checkboxSelectionVisibleOnly?s:c).reduce(((e,g)=>(e[g]=!0,e)),{})),[C.pagination,C.checkboxSelectionVisibleOnly,s,c]),A=g.useMemo((()=>d.filter((e=>u[e])).length),[d,u]),m=A>0&&A<Object.keys(u).length,b=A>0,p=null!==a&&a.field===e.field?0:-1;g.useLayoutEffect((()=>{const g=I.current.getColumnHeaderElement(e.field);0===p&&g&&(g.tabIndex=-1)}),[p,I,e.field]);const Z=g.useCallback((e=>{" "===e.key&&I.current.publishEvent("headerSelectionCheckboxChange",{value:!b})}),[I,b]),h=g.useCallback((()=>{o((e=>!e))}),[]);g.useEffect((()=>I.current.subscribeEvent("rowSelectionChange",h)),[I,h]);const G=I.current.getLocaleText(b?"checkboxSelectionUnselectAllRows":"checkboxSelectionSelectAllRows");return(0,we.jsx)(C.slots.baseCheckbox,(0,he.Z)({ref:l,indeterminate:m,checked:b,onChange:e=>{const g={value:e.target.checked};I.current.publishEvent("headerSelectionCheckboxChange",g)},className:r.root,inputProps:{"aria-label":G},tabIndex:p,onKeyDown:Z},null==(t=C.slotProps)?void 0:t.baseCheckbox,n))})),Yr=["id","value","formattedValue","api","field","row","rowNode","colDef","cellMode","isEditable","tabIndex","hasFocus","isValidating","debounceMs","isProcessingProps","onValueChange"],Hr=(0,Ve.ZP)(pg,{name:"MuiDataGrid",slot:"EditInputCell",overridesResolver:(e,g)=>g.editInputCell})((({theme:e})=>(0,he.Z)({},e.typography.body2,{padding:"1px 0","& input":{padding:"0 16px",height:"100%"}}))),Fr=g.forwardRef(((e,l)=>{const t=rI(),{id:n,value:o,field:I,colDef:C,hasFocus:r,debounceMs:a=200,isProcessingProps:i,onValueChange:c}=e,s=(0,Ge.Z)(e,Yr),d=Ar(),u=g.useRef(),[A,m]=g.useState(o),b=(e=>{const{classes:g}=e;return(0,Be.Z)({root:["editInputCell"]},Eo,g)})(t),p=g.useCallback((async e=>{const g=e.target.value;c&&await c(e,g);const l=d.current.getColumn(I);let t=g;l.valueParser&&(t=l.valueParser(g,d.current.getCellParams(n,I))),m(t),d.current.setEditCellValue({id:n,field:I,value:t,debounceMs:a,unstable_skipValueParser:!0},e)}),[d,a,I,n,c]),Z=d.current.unstable_getEditCellMeta(n,I);return g.useEffect((()=>{"debouncedSetEditCellValue"!==(null==Z?void 0:Z.changeReason)&&m(o)}),[Z,o]),(0,Xe.Z)((()=>{r&&u.current.focus()}),[r]),(0,we.jsx)(Hr,(0,he.Z)({ref:l,inputRef:u,className:b.root,ownerState:t,fullWidth:!0,type:"number"===C.type?C.type:"text",value:null!=A?A:"",onChange:p,endAdornment:i?(0,we.jsx)(t.slots.loadIcon,{fontSize:"small",color:"action"}):void 0},s))})),Nr=qo(["MUI: The `sortModel` can only contain a single item when the `disableMultipleColumnsSorting` prop is set to `true`.","If you are using the community version of the `DataGrid`, this prop is always `true`."],"error"),Kr=(e,g)=>g&&e.length>1?(Nr(),[e[0]]):e,xr=(e,g)=>l=>(0,he.Z)({},l,{sorting:(0,he.Z)({},l.sorting,{sortModel:Kr(e,g)})}),Mr=(e,g)=>{const l=e.indexOf(g);return g&&-1!==l&&l+1!==e.length?e[l+1]:e[0]},zr=(e,g)=>null==e&&null!=g?-1:null==g&&null!=e?1:null==e&&null==g?0:null,Er=new Intl.Collator,Lr=(e,g)=>{const l=zr(e,g);return null!==l?l:Number(e)-Number(g)},Ur=(e,g)=>{const l=zr(e,g);return null!==l?l:e>g?1:e<g?-1:0};class Qr{constructor(){this.currentId=0,this.clear=()=>{0!==this.currentId&&(clearTimeout(this.currentId),this.currentId=0)},this.disposeEffect=()=>this.clear}static create(){return new Qr}start(e,g){this.clear(),this.currentId=setTimeout(g,e)}}function Dr(){const e=Po(Qr.create).current;return Oo(e.disposeEffect),e}const Tr=["item","applyValue","type","apiRef","focusElementRef","tabIndex","disabled","isFilterActive","clearButton","InputProps"];function Pr(e){var l,t;const{item:n,applyValue:o,type:I,apiRef:C,focusElementRef:r,tabIndex:a,disabled:i,clearButton:c,InputProps:s}=e,d=(0,Ge.Z)(e,Tr),u=Dr(),[A,m]=g.useState(null!=(l=n.value)?l:""),[b,p]=g.useState(!1),Z=(0,Se.Z)(),h=rI(),G=g.useCallback((e=>{const{value:g}=e.target;m(String(g)),p(!0),u.start(h.filterDebounceMs,(()=>{const e=(0,he.Z)({},n,{value:g,fromInput:Z});o(e),p(!1)}))}),[Z,o,n,h.filterDebounceMs,u]);return g.useEffect((()=>{var e;n.fromInput===Z&&void 0!==n.value||m(String(null!=(e=n.value)?e:""))}),[Z,n]),(0,we.jsx)(h.slots.baseTextField,(0,he.Z)({id:Z,label:C.current.getLocaleText("filterPanelInputLabel"),placeholder:C.current.getLocaleText("filterPanelInputPlaceholder"),value:A,onChange:G,variant:"standard",type:I||"text",InputProps:(0,he.Z)({},b||c?{endAdornment:b?(0,we.jsx)(h.slots.loadIcon,{fontSize:"small",color:"action"}):c}:{},{disabled:i},s,{inputProps:(0,he.Z)({tabIndex:a},null==s?void 0:s.inputProps)}),InputLabelProps:{shrink:!0},inputRef:r},d,null==(t=h.slotProps)?void 0:t.baseTextField))}var jr=n(9032);const Or=e=>{const l=g.useRef({});return g.useEffect((()=>{l.current=e})),l.current};function qr(e){return void 0!==e.normalize?e.normalize("NFD").replace(/[\u0300-\u036f]/g,""):e}function $r(e={}){const{ignoreAccents:g=!0,ignoreCase:l=!0,limit:t,matchFrom:n="any",stringify:o,trim:I=!1}=e;return(e,{inputValue:C,getOptionLabel:r})=>{let a=I?C.trim():C;l&&(a=a.toLowerCase()),g&&(a=qr(a));const i=a?e.filter((e=>{let t=(o||r)(e);return l&&(t=t.toLowerCase()),g&&(t=qr(t)),"start"===n?0===t.indexOf(a):t.indexOf(a)>-1})):e;return"number"==typeof t?i.slice(0,t):i}}function _r(e,g){for(let l=0;l<e.length;l+=1)if(g(e[l]))return l;return-1}const ea=$r(),ga=e=>{var g;return null!==e.current&&(null==(g=e.current.parentElement)?void 0:g.contains(document.activeElement))};function la(e){if(null==e)return window;if("[object Window]"!==e.toString()){var g=e.ownerDocument;return g&&g.defaultView||window}return e}function ta(e){return e instanceof la(e).Element||e instanceof Element}function na(e){return e instanceof la(e).HTMLElement||e instanceof HTMLElement}function oa(e){return"undefined"!=typeof ShadowRoot&&(e instanceof la(e).ShadowRoot||e instanceof ShadowRoot)}var Ia=Math.max,Ca=Math.min,ra=Math.round;function aa(){var e=navigator.userAgentData;return null!=e&&e.brands&&Array.isArray(e.brands)?e.brands.map((function(e){return e.brand+"/"+e.version})).join(" "):navigator.userAgent}function ia(){return!/^((?!chrome|android).)*safari/i.test(aa())}function ca(e,g,l){void 0===g&&(g=!1),void 0===l&&(l=!1);var t=e.getBoundingClientRect(),n=1,o=1;g&&na(e)&&(n=e.offsetWidth>0&&ra(t.width)/e.offsetWidth||1,o=e.offsetHeight>0&&ra(t.height)/e.offsetHeight||1);var I=(ta(e)?la(e):window).visualViewport,C=!ia()&&l,r=(t.left+(C&&I?I.offsetLeft:0))/n,a=(t.top+(C&&I?I.offsetTop:0))/o,i=t.width/n,c=t.height/o;return{width:i,height:c,top:a,right:r+i,bottom:a+c,left:r,x:r,y:a}}function sa(e){var g=la(e);return{scrollLeft:g.pageXOffset,scrollTop:g.pageYOffset}}function da(e){return e?(e.nodeName||"").toLowerCase():null}function ua(e){return((ta(e)?e.ownerDocument:e.document)||window.document).documentElement}function Aa(e){return ca(ua(e)).left+sa(e).scrollLeft}function ma(e){return la(e).getComputedStyle(e)}function ba(e){var g=ma(e),l=g.overflow,t=g.overflowX,n=g.overflowY;return/auto|scroll|overlay|hidden/.test(l+n+t)}function pa(e,g,l){void 0===l&&(l=!1);var t,n,o=na(g),I=na(g)&&function(e){var g=e.getBoundingClientRect(),l=ra(g.width)/e.offsetWidth||1,t=ra(g.height)/e.offsetHeight||1;return 1!==l||1!==t}(g),C=ua(g),r=ca(e,I,l),a={scrollLeft:0,scrollTop:0},i={x:0,y:0};return(o||!o&&!l)&&(("body"!==da(g)||ba(C))&&(a=(t=g)!==la(t)&&na(t)?{scrollLeft:(n=t).scrollLeft,scrollTop:n.scrollTop}:sa(t)),na(g)?((i=ca(g,!0)).x+=g.clientLeft,i.y+=g.clientTop):C&&(i.x=Aa(C))),{x:r.left+a.scrollLeft-i.x,y:r.top+a.scrollTop-i.y,width:r.width,height:r.height}}function Za(e){var g=ca(e),l=e.offsetWidth,t=e.offsetHeight;return Math.abs(g.width-l)<=1&&(l=g.width),Math.abs(g.height-t)<=1&&(t=g.height),{x:e.offsetLeft,y:e.offsetTop,width:l,height:t}}function ha(e){return"html"===da(e)?e:e.assignedSlot||e.parentNode||(oa(e)?e.host:null)||ua(e)}function Ga(e){return["html","body","#document"].indexOf(da(e))>=0?e.ownerDocument.body:na(e)&&ba(e)?e:Ga(ha(e))}function ya(e,g){var l;void 0===g&&(g=[]);var t=Ga(e),n=t===(null==(l=e.ownerDocument)?void 0:l.body),o=la(t),I=n?[o].concat(o.visualViewport||[],ba(t)?t:[]):t,C=g.concat(I);return n?C:C.concat(ya(ha(I)))}function Ba(e){return["table","td","th"].indexOf(da(e))>=0}function Sa(e){return na(e)&&"fixed"!==ma(e).position?e.offsetParent:null}function Va(e){for(var g=la(e),l=Sa(e);l&&Ba(l)&&"static"===ma(l).position;)l=Sa(l);return l&&("html"===da(l)||"body"===da(l)&&"static"===ma(l).position)?g:l||function(e){var g=/firefox/i.test(aa());if(/Trident/i.test(aa())&&na(e)&&"fixed"===ma(e).position)return null;var l=ha(e);for(oa(l)&&(l=l.host);na(l)&&["html","body"].indexOf(da(l))<0;){var t=ma(l);if("none"!==t.transform||"none"!==t.perspective||"paint"===t.contain||-1!==["transform","perspective"].indexOf(t.willChange)||g&&"filter"===t.willChange||g&&t.filter&&"none"!==t.filter)return l;l=l.parentNode}return null}(e)||g}var Wa="top",Ra="bottom",fa="right",va="left",ka="auto",Xa=[Wa,Ra,fa,va],Ja="start",wa="end",Ya="viewport",Ha="popper",Fa=Xa.reduce((function(e,g){return e.concat([g+"-"+Ja,g+"-"+wa])}),[]),Na=[].concat(Xa,[ka]).reduce((function(e,g){return e.concat([g,g+"-"+Ja,g+"-"+wa])}),[]),Ka=["beforeRead","read","afterRead","beforeMain","main","afterMain","beforeWrite","write","afterWrite"];function xa(e){var g=new Map,l=new Set,t=[];function n(e){l.add(e.name),[].concat(e.requires||[],e.requiresIfExists||[]).forEach((function(e){if(!l.has(e)){var t=g.get(e);t&&n(t)}})),t.push(e)}return e.forEach((function(e){g.set(e.name,e)})),e.forEach((function(e){l.has(e.name)||n(e)})),t}var Ma={placement:"bottom",modifiers:[],strategy:"absolute"};function za(){for(var e=arguments.length,g=new Array(e),l=0;l<e;l++)g[l]=arguments[l];return!g.some((function(e){return!(e&&"function"==typeof e.getBoundingClientRect)}))}function Ea(e){void 0===e&&(e={});var g=e,l=g.defaultModifiers,t=void 0===l?[]:l,n=g.defaultOptions,o=void 0===n?Ma:n;return function(e,g,l){void 0===l&&(l=o);var n,I,C={placement:"bottom",orderedModifiers:[],options:Object.assign({},Ma,o),modifiersData:{},elements:{reference:e,popper:g},attributes:{},styles:{}},r=[],a=!1,i={state:C,setOptions:function(l){var n="function"==typeof l?l(C.options):l;c(),C.options=Object.assign({},o,C.options,n),C.scrollParents={reference:ta(e)?ya(e):e.contextElement?ya(e.contextElement):[],popper:ya(g)};var I,a,s=function(e){var g=xa(e);return Ka.reduce((function(e,l){return e.concat(g.filter((function(e){return e.phase===l})))}),[])}((I=[].concat(t,C.options.modifiers),a=I.reduce((function(e,g){var l=e[g.name];return e[g.name]=l?Object.assign({},l,g,{options:Object.assign({},l.options,g.options),data:Object.assign({},l.data,g.data)}):g,e}),{}),Object.keys(a).map((function(e){return a[e]}))));return C.orderedModifiers=s.filter((function(e){return e.enabled})),C.orderedModifiers.forEach((function(e){var g=e.name,l=e.options,t=void 0===l?{}:l,n=e.effect;if("function"==typeof n){var o=n({state:C,name:g,instance:i,options:t});r.push(o||function(){})}})),i.update()},forceUpdate:function(){if(!a){var e=C.elements,g=e.reference,l=e.popper;if(za(g,l)){C.rects={reference:pa(g,Va(l),"fixed"===C.options.strategy),popper:Za(l)},C.reset=!1,C.placement=C.options.placement,C.orderedModifiers.forEach((function(e){return C.modifiersData[e.name]=Object.assign({},e.data)}));for(var t=0;t<C.orderedModifiers.length;t++)if(!0!==C.reset){var n=C.orderedModifiers[t],o=n.fn,I=n.options,r=void 0===I?{}:I,c=n.name;"function"==typeof o&&(C=o({state:C,options:r,name:c,instance:i})||C)}else C.reset=!1,t=-1}}},update:(n=function(){return new Promise((function(e){i.forceUpdate(),e(C)}))},function(){return I||(I=new Promise((function(e){Promise.resolve().then((function(){I=void 0,e(n())}))}))),I}),destroy:function(){c(),a=!0}};if(!za(e,g))return i;function c(){r.forEach((function(e){return e()})),r=[]}return i.setOptions(l).then((function(e){!a&&l.onFirstUpdate&&l.onFirstUpdate(e)})),i}}var La={passive:!0};function Ua(e){return e.split("-")[0]}function Qa(e){return e.split("-")[1]}function Da(e){return["top","bottom"].indexOf(e)>=0?"x":"y"}function Ta(e){var g,l=e.reference,t=e.element,n=e.placement,o=n?Ua(n):null,I=n?Qa(n):null,C=l.x+l.width/2-t.width/2,r=l.y+l.height/2-t.height/2;switch(o){case Wa:g={x:C,y:l.y-t.height};break;case Ra:g={x:C,y:l.y+l.height};break;case fa:g={x:l.x+l.width,y:r};break;case va:g={x:l.x-t.width,y:r};break;default:g={x:l.x,y:l.y}}var a=o?Da(o):null;if(null!=a){var i="y"===a?"height":"width";switch(I){case Ja:g[a]=g[a]-(l[i]/2-t[i]/2);break;case wa:g[a]=g[a]+(l[i]/2-t[i]/2)}}return g}var Pa={top:"auto",right:"auto",bottom:"auto",left:"auto"};function ja(e){var g,l=e.popper,t=e.popperRect,n=e.placement,o=e.variation,I=e.offsets,C=e.position,r=e.gpuAcceleration,a=e.adaptive,i=e.roundOffsets,c=e.isFixed,s=I.x,d=void 0===s?0:s,u=I.y,A=void 0===u?0:u,m="function"==typeof i?i({x:d,y:A}):{x:d,y:A};d=m.x,A=m.y;var b=I.hasOwnProperty("x"),p=I.hasOwnProperty("y"),Z=va,h=Wa,G=window;if(a){var y=Va(l),B="clientHeight",S="clientWidth";y===la(l)&&"static"!==ma(y=ua(l)).position&&"absolute"===C&&(B="scrollHeight",S="scrollWidth"),(n===Wa||(n===va||n===fa)&&o===wa)&&(h=Ra,A-=(c&&y===G&&G.visualViewport?G.visualViewport.height:y[B])-t.height,A*=r?1:-1),n!==va&&(n!==Wa&&n!==Ra||o!==wa)||(Z=fa,d-=(c&&y===G&&G.visualViewport?G.visualViewport.width:y[S])-t.width,d*=r?1:-1)}var V,W=Object.assign({position:C},a&&Pa),R=!0===i?function(e,g){var l=e.x,t=e.y,n=g.devicePixelRatio||1;return{x:ra(l*n)/n||0,y:ra(t*n)/n||0}}({x:d,y:A},la(l)):{x:d,y:A};return d=R.x,A=R.y,r?Object.assign({},W,((V={})[h]=p?"0":"",V[Z]=b?"0":"",V.transform=(G.devicePixelRatio||1)<=1?"translate("+d+"px, "+A+"px)":"translate3d("+d+"px, "+A+"px, 0)",V)):Object.assign({},W,((g={})[h]=p?A+"px":"",g[Z]=b?d+"px":"",g.transform="",g))}const Oa={name:"applyStyles",enabled:!0,phase:"write",fn:function(e){var g=e.state;Object.keys(g.elements).forEach((function(e){var l=g.styles[e]||{},t=g.attributes[e]||{},n=g.elements[e];na(n)&&da(n)&&(Object.assign(n.style,l),Object.keys(t).forEach((function(e){var g=t[e];!1===g?n.removeAttribute(e):n.setAttribute(e,!0===g?"":g)})))}))},effect:function(e){var g=e.state,l={popper:{position:g.options.strategy,left:"0",top:"0",margin:"0"},arrow:{position:"absolute"},reference:{}};return Object.assign(g.elements.popper.style,l.popper),g.styles=l,g.elements.arrow&&Object.assign(g.elements.arrow.style,l.arrow),function(){Object.keys(g.elements).forEach((function(e){var t=g.elements[e],n=g.attributes[e]||{},o=Object.keys(g.styles.hasOwnProperty(e)?g.styles[e]:l[e]).reduce((function(e,g){return e[g]="",e}),{});na(t)&&da(t)&&(Object.assign(t.style,o),Object.keys(n).forEach((function(e){t.removeAttribute(e)})))}))}},requires:["computeStyles"]};var qa={left:"right",right:"left",bottom:"top",top:"bottom"};function $a(e){return e.replace(/left|right|bottom|top/g,(function(e){return qa[e]}))}var _a={start:"end",end:"start"};function ei(e){return e.replace(/start|end/g,(function(e){return _a[e]}))}function gi(e,g){var l=g.getRootNode&&g.getRootNode();if(e.contains(g))return!0;if(l&&oa(l)){var t=g;do{if(t&&e.isSameNode(t))return!0;t=t.parentNode||t.host}while(t)}return!1}function li(e){return Object.assign({},e,{left:e.x,top:e.y,right:e.x+e.width,bottom:e.y+e.height})}function ti(e,g,l){return g===Ya?li(function(e,g){var l=la(e),t=ua(e),n=l.visualViewport,o=t.clientWidth,I=t.clientHeight,C=0,r=0;if(n){o=n.width,I=n.height;var a=ia();(a||!a&&"fixed"===g)&&(C=n.offsetLeft,r=n.offsetTop)}return{width:o,height:I,x:C+Aa(e),y:r}}(e,l)):ta(g)?function(e,g){var l=ca(e,!1,"fixed"===g);return l.top=l.top+e.clientTop,l.left=l.left+e.clientLeft,l.bottom=l.top+e.clientHeight,l.right=l.left+e.clientWidth,l.width=e.clientWidth,l.height=e.clientHeight,l.x=l.left,l.y=l.top,l}(g,l):li(function(e){var g,l=ua(e),t=sa(e),n=null==(g=e.ownerDocument)?void 0:g.body,o=Ia(l.scrollWidth,l.clientWidth,n?n.scrollWidth:0,n?n.clientWidth:0),I=Ia(l.scrollHeight,l.clientHeight,n?n.scrollHeight:0,n?n.clientHeight:0),C=-t.scrollLeft+Aa(e),r=-t.scrollTop;return"rtl"===ma(n||l).direction&&(C+=Ia(l.clientWidth,n?n.clientWidth:0)-o),{width:o,height:I,x:C,y:r}}(ua(e)))}function ni(e){return Object.assign({},{top:0,right:0,bottom:0,left:0},e)}function oi(e,g){return g.reduce((function(g,l){return g[l]=e,g}),{})}function Ii(e,g){void 0===g&&(g={});var l=g,t=l.placement,n=void 0===t?e.placement:t,o=l.strategy,I=void 0===o?e.strategy:o,C=l.boundary,r=void 0===C?"clippingParents":C,a=l.rootBoundary,i=void 0===a?Ya:a,c=l.elementContext,s=void 0===c?Ha:c,d=l.altBoundary,u=void 0!==d&&d,A=l.padding,m=void 0===A?0:A,b=ni("number"!=typeof m?m:oi(m,Xa)),p=s===Ha?"reference":Ha,Z=e.rects.popper,h=e.elements[u?p:s],G=function(e,g,l,t){var n="clippingParents"===g?function(e){var g=ya(ha(e)),l=["absolute","fixed"].indexOf(ma(e).position)>=0&&na(e)?Va(e):e;return ta(l)?g.filter((function(e){return ta(e)&&gi(e,l)&&"body"!==da(e)})):[]}(e):[].concat(g),o=[].concat(n,[l]),I=o[0],C=o.reduce((function(g,l){var n=ti(e,l,t);return g.top=Ia(n.top,g.top),g.right=Ca(n.right,g.right),g.bottom=Ca(n.bottom,g.bottom),g.left=Ia(n.left,g.left),g}),ti(e,I,t));return C.width=C.right-C.left,C.height=C.bottom-C.top,C.x=C.left,C.y=C.top,C}(ta(h)?h:h.contextElement||ua(e.elements.popper),r,i,I),y=ca(e.elements.reference),B=Ta({reference:y,element:Z,strategy:"absolute",placement:n}),S=li(Object.assign({},Z,B)),V=s===Ha?S:y,W={top:G.top-V.top+b.top,bottom:V.bottom-G.bottom+b.bottom,left:G.left-V.left+b.left,right:V.right-G.right+b.right},R=e.modifiersData.offset;if(s===Ha&&R){var f=R[n];Object.keys(W).forEach((function(e){var g=[fa,Ra].indexOf(e)>=0?1:-1,l=[Wa,Ra].indexOf(e)>=0?"y":"x";W[e]+=f[l]*g}))}return W}function Ci(e,g,l){return Ia(e,Ca(g,l))}function ri(e,g,l){return void 0===l&&(l={x:0,y:0}),{top:e.top-g.height-l.y,right:e.right-g.width+l.x,bottom:e.bottom-g.height+l.y,left:e.left-g.width-l.x}}function ai(e){return[Wa,fa,Ra,va].some((function(g){return e[g]>=0}))}var ii=Ea({defaultModifiers:[{name:"eventListeners",enabled:!0,phase:"write",fn:function(){},effect:function(e){var g=e.state,l=e.instance,t=e.options,n=t.scroll,o=void 0===n||n,I=t.resize,C=void 0===I||I,r=la(g.elements.popper),a=[].concat(g.scrollParents.reference,g.scrollParents.popper);return o&&a.forEach((function(e){e.addEventListener("scroll",l.update,La)})),C&&r.addEventListener("resize",l.update,La),function(){o&&a.forEach((function(e){e.removeEventListener("scroll",l.update,La)})),C&&r.removeEventListener("resize",l.update,La)}},data:{}},{name:"popperOffsets",enabled:!0,phase:"read",fn:function(e){var g=e.state,l=e.name;g.modifiersData[l]=Ta({reference:g.rects.reference,element:g.rects.popper,strategy:"absolute",placement:g.placement})},data:{}},{name:"computeStyles",enabled:!0,phase:"beforeWrite",fn:function(e){var g=e.state,l=e.options,t=l.gpuAcceleration,n=void 0===t||t,o=l.adaptive,I=void 0===o||o,C=l.roundOffsets,r=void 0===C||C,a={placement:Ua(g.placement),variation:Qa(g.placement),popper:g.elements.popper,popperRect:g.rects.popper,gpuAcceleration:n,isFixed:"fixed"===g.options.strategy};null!=g.modifiersData.popperOffsets&&(g.styles.popper=Object.assign({},g.styles.popper,ja(Object.assign({},a,{offsets:g.modifiersData.popperOffsets,position:g.options.strategy,adaptive:I,roundOffsets:r})))),null!=g.modifiersData.arrow&&(g.styles.arrow=Object.assign({},g.styles.arrow,ja(Object.assign({},a,{offsets:g.modifiersData.arrow,position:"absolute",adaptive:!1,roundOffsets:r})))),g.attributes.popper=Object.assign({},g.attributes.popper,{"data-popper-placement":g.placement})},data:{}},Oa,{name:"offset",enabled:!0,phase:"main",requires:["popperOffsets"],fn:function(e){var g=e.state,l=e.options,t=e.name,n=l.offset,o=void 0===n?[0,0]:n,I=Na.reduce((function(e,l){return e[l]=function(e,g,l){var t=Ua(e),n=[va,Wa].indexOf(t)>=0?-1:1,o="function"==typeof l?l(Object.assign({},g,{placement:e})):l,I=o[0],C=o[1];return I=I||0,C=(C||0)*n,[va,fa].indexOf(t)>=0?{x:C,y:I}:{x:I,y:C}}(l,g.rects,o),e}),{}),C=I[g.placement],r=C.x,a=C.y;null!=g.modifiersData.popperOffsets&&(g.modifiersData.popperOffsets.x+=r,g.modifiersData.popperOffsets.y+=a),g.modifiersData[t]=I}},{name:"flip",enabled:!0,phase:"main",fn:function(e){var g=e.state,l=e.options,t=e.name;if(!g.modifiersData[t]._skip){for(var n=l.mainAxis,o=void 0===n||n,I=l.altAxis,C=void 0===I||I,r=l.fallbackPlacements,a=l.padding,i=l.boundary,c=l.rootBoundary,s=l.altBoundary,d=l.flipVariations,u=void 0===d||d,A=l.allowedAutoPlacements,m=g.options.placement,b=Ua(m),p=r||(b!==m&&u?function(e){if(Ua(e)===ka)return[];var g=$a(e);return[ei(e),g,ei(g)]}(m):[$a(m)]),Z=[m].concat(p).reduce((function(e,l){return e.concat(Ua(l)===ka?function(e,g){void 0===g&&(g={});var l=g,t=l.placement,n=l.boundary,o=l.rootBoundary,I=l.padding,C=l.flipVariations,r=l.allowedAutoPlacements,a=void 0===r?Na:r,i=Qa(t),c=i?C?Fa:Fa.filter((function(e){return Qa(e)===i})):Xa,s=c.filter((function(e){return a.indexOf(e)>=0}));0===s.length&&(s=c);var d=s.reduce((function(g,l){return g[l]=Ii(e,{placement:l,boundary:n,rootBoundary:o,padding:I})[Ua(l)],g}),{});return Object.keys(d).sort((function(e,g){return d[e]-d[g]}))}(g,{placement:l,boundary:i,rootBoundary:c,padding:a,flipVariations:u,allowedAutoPlacements:A}):l)}),[]),h=g.rects.reference,G=g.rects.popper,y=new Map,B=!0,S=Z[0],V=0;V<Z.length;V++){var W=Z[V],R=Ua(W),f=Qa(W)===Ja,v=[Wa,Ra].indexOf(R)>=0,k=v?"width":"height",X=Ii(g,{placement:W,boundary:i,rootBoundary:c,altBoundary:s,padding:a}),J=v?f?fa:va:f?Ra:Wa;h[k]>G[k]&&(J=$a(J));var w=$a(J),Y=[];if(o&&Y.push(X[R]<=0),C&&Y.push(X[J]<=0,X[w]<=0),Y.every((function(e){return e}))){S=W,B=!1;break}y.set(W,Y)}if(B)for(var H=function(e){var g=Z.find((function(g){var l=y.get(g);if(l)return l.slice(0,e).every((function(e){return e}))}));if(g)return S=g,"break"},F=u?3:1;F>0&&"break"!==H(F);F--);g.placement!==S&&(g.modifiersData[t]._skip=!0,g.placement=S,g.reset=!0)}},requiresIfExists:["offset"],data:{_skip:!1}},{name:"preventOverflow",enabled:!0,phase:"main",fn:function(e){var g=e.state,l=e.options,t=e.name,n=l.mainAxis,o=void 0===n||n,I=l.altAxis,C=void 0!==I&&I,r=l.boundary,a=l.rootBoundary,i=l.altBoundary,c=l.padding,s=l.tether,d=void 0===s||s,u=l.tetherOffset,A=void 0===u?0:u,m=Ii(g,{boundary:r,rootBoundary:a,padding:c,altBoundary:i}),b=Ua(g.placement),p=Qa(g.placement),Z=!p,h=Da(b),G="x"===h?"y":"x",y=g.modifiersData.popperOffsets,B=g.rects.reference,S=g.rects.popper,V="function"==typeof A?A(Object.assign({},g.rects,{placement:g.placement})):A,W="number"==typeof V?{mainAxis:V,altAxis:V}:Object.assign({mainAxis:0,altAxis:0},V),R=g.modifiersData.offset?g.modifiersData.offset[g.placement]:null,f={x:0,y:0};if(y){if(o){var v,k="y"===h?Wa:va,X="y"===h?Ra:fa,J="y"===h?"height":"width",w=y[h],Y=w+m[k],H=w-m[X],F=d?-S[J]/2:0,N=p===Ja?B[J]:S[J],K=p===Ja?-S[J]:-B[J],x=g.elements.arrow,M=d&&x?Za(x):{width:0,height:0},z=g.modifiersData["arrow#persistent"]?g.modifiersData["arrow#persistent"].padding:{top:0,right:0,bottom:0,left:0},E=z[k],L=z[X],U=Ci(0,B[J],M[J]),Q=Z?B[J]/2-F-U-E-W.mainAxis:N-U-E-W.mainAxis,D=Z?-B[J]/2+F+U+L+W.mainAxis:K+U+L+W.mainAxis,T=g.elements.arrow&&Va(g.elements.arrow),P=T?"y"===h?T.clientTop||0:T.clientLeft||0:0,j=null!=(v=null==R?void 0:R[h])?v:0,O=w+D-j,q=Ci(d?Ca(Y,w+Q-j-P):Y,w,d?Ia(H,O):H);y[h]=q,f[h]=q-w}if(C){var $,_="x"===h?Wa:va,ee="x"===h?Ra:fa,ge=y[G],le="y"===G?"height":"width",te=ge+m[_],ne=ge-m[ee],oe=-1!==[Wa,va].indexOf(b),Ie=null!=($=null==R?void 0:R[G])?$:0,Ce=oe?te:ge-B[le]-S[le]-Ie+W.altAxis,re=oe?ge+B[le]+S[le]-Ie-W.altAxis:ne,ae=d&&oe?function(e,g,l){var t=Ci(e,g,l);return t>l?l:t}(Ce,ge,re):Ci(d?Ce:te,ge,d?re:ne);y[G]=ae,f[G]=ae-ge}g.modifiersData[t]=f}},requiresIfExists:["offset"]},{name:"arrow",enabled:!0,phase:"main",fn:function(e){var g,l=e.state,t=e.name,n=e.options,o=l.elements.arrow,I=l.modifiersData.popperOffsets,C=Ua(l.placement),r=Da(C),a=[va,fa].indexOf(C)>=0?"height":"width";if(o&&I){var i=function(e,g){return ni("number"!=typeof(e="function"==typeof e?e(Object.assign({},g.rects,{placement:g.placement})):e)?e:oi(e,Xa))}(n.padding,l),c=Za(o),s="y"===r?Wa:va,d="y"===r?Ra:fa,u=l.rects.reference[a]+l.rects.reference[r]-I[r]-l.rects.popper[a],A=I[r]-l.rects.reference[r],m=Va(o),b=m?"y"===r?m.clientHeight||0:m.clientWidth||0:0,p=u/2-A/2,Z=i[s],h=b-c[a]-i[d],G=b/2-c[a]/2+p,y=Ci(Z,G,h),B=r;l.modifiersData[t]=((g={})[B]=y,g.centerOffset=y-G,g)}},effect:function(e){var g=e.state,l=e.options.element,t=void 0===l?"[data-popper-arrow]":l;null!=t&&("string"!=typeof t||(t=g.elements.popper.querySelector(t)))&&gi(g.elements.popper,t)&&(g.elements.arrow=t)},requires:["popperOffsets"],requiresIfExists:["preventOverflow"]},{name:"hide",enabled:!0,phase:"main",requiresIfExists:["preventOverflow"],fn:function(e){var g=e.state,l=e.name,t=g.rects.reference,n=g.rects.popper,o=g.modifiersData.preventOverflow,I=Ii(g,{elementContext:"reference"}),C=Ii(g,{altBoundary:!0}),r=ri(I,t),a=ri(C,n,o),i=ai(r),c=ai(a);g.modifiersData[l]={referenceClippingOffsets:r,popperEscapeOffsets:a,isReferenceHidden:i,hasPopperEscaped:c},g.attributes.popper=Object.assign({},g.attributes.popper,{"data-popper-reference-hidden":i,"data-popper-escaped":c})}}]});function ci(e){return(0,rg.Z)("MuiPopper",e)}(0,Cg.Z)("MuiPopper",["root"]);const si={disableDefaultClasses:!1},di=g.createContext(si),ui=["anchorEl","children","direction","disablePortal","modifiers","open","placement","popperOptions","popperRef","slotProps","slots","TransitionProps","ownerState"],Ai=["anchorEl","children","container","direction","disablePortal","keepMounted","modifiers","open","placement","popperOptions","popperRef","style","transition","slotProps","slots"];function mi(e){return"function"==typeof e?e():e}const bi={},pi=g.forwardRef((function(e,l){var t;const{anchorEl:n,children:o,direction:I,disablePortal:C,modifiers:r,open:a,placement:i,popperOptions:c,popperRef:s,slotProps:d={},slots:u={},TransitionProps:A}=e,m=(0,Ge.Z)(e,ui),b=g.useRef(null),p=(0,ve.Z)(b,l),Z=g.useRef(null),h=(0,ve.Z)(Z,s),G=g.useRef(h);(0,Xe.Z)((()=>{G.current=h}),[h]),g.useImperativeHandle(s,(()=>Z.current),[]);const y=function(e,g){if("ltr"===g)return e;switch(e){case"bottom-end":return"bottom-start";case"bottom-start":return"bottom-end";case"top-end":return"top-start";case"top-start":return"top-end";default:return e}}(i,I),[B,S]=g.useState(y),[V,W]=g.useState(mi(n));g.useEffect((()=>{Z.current&&Z.current.forceUpdate()})),g.useEffect((()=>{n&&W(mi(n))}),[n]),(0,Xe.Z)((()=>{if(!V||!a)return;let e=[{name:"preventOverflow",options:{altBoundary:C}},{name:"flip",options:{altBoundary:C}},{name:"onUpdate",enabled:!0,phase:"afterWrite",fn:({state:e})=>{S(e.placement)}}];null!=r&&(e=e.concat(r)),c&&null!=c.modifiers&&(e=e.concat(c.modifiers));const g=ii(V,b.current,(0,he.Z)({placement:y},c,{modifiers:e}));return G.current(g),()=>{g.destroy(),G.current(null)}}),[V,C,r,a,c,y]);const R={placement:B};null!==A&&(R.TransitionProps=A);const f=(0,Be.Z)({root:["root"]},function(e){const{disableDefaultClasses:l}=g.useContext(di);return g=>l?"":e(g)}(ci)),v=null!=(t=u.root)?t:"div",k=bl({elementType:v,externalSlotProps:d.root,externalForwardedProps:m,additionalProps:{role:"tooltip",ref:p},ownerState:e,className:f.root});return(0,we.jsx)(v,(0,he.Z)({},k,{children:"function"==typeof o?o(R):o}))})),Zi=g.forwardRef((function(e,l){const{anchorEl:t,children:n,container:o,direction:I="ltr",disablePortal:C=!1,keepMounted:r=!1,modifiers:a,open:i,placement:c="bottom",popperOptions:s=bi,popperRef:d,style:u,transition:A=!1,slotProps:m={},slots:b={}}=e,p=(0,Ge.Z)(e,Ai),[Z,h]=g.useState(!0);if(!r&&!i&&(!A||Z))return null;let G;if(o)G=o;else if(t){const e=mi(t);G=e&&void 0!==e.nodeType?(0,_l.Z)(e).body:(0,_l.Z)(null).body}const y=i||!r||A&&!Z?void 0:"none",B=A?{in:i,onEnter:()=>{h(!1)},onExited:()=>{h(!0)}}:void 0;return(0,we.jsx)(st,{disablePortal:C,container:G,children:(0,we.jsx)(pi,(0,he.Z)({anchorEl:t,direction:I,disablePortal:C,modifiers:a,ref:l,open:A?!Z:i,placement:c,popperOptions:s,popperRef:d,slotProps:m,slots:b},p,{style:(0,he.Z)({position:"fixed",top:0,left:0,display:y},u),TransitionProps:B,children:n}))})})),hi=["anchorEl","component","components","componentsProps","container","disablePortal","keepMounted","modifiers","open","placement","popperOptions","popperRef","transition","slots","slotProps"],Gi=(0,Ve.ZP)(Zi,{name:"MuiPopper",slot:"Root",overridesResolver:(e,g)=>g.root})({}),yi=g.forwardRef((function(e,g){var l;const t=(0,Vo.Z)(),n=(0,We.Z)({props:e,name:"MuiPopper"}),{anchorEl:o,component:I,components:C,componentsProps:r,container:a,disablePortal:i,keepMounted:c,modifiers:s,open:d,placement:u,popperOptions:A,popperRef:m,transition:b,slots:p,slotProps:Z}=n,h=(0,Ge.Z)(n,hi),G=null!=(l=null==p?void 0:p.root)?l:null==C?void 0:C.Root,y=(0,he.Z)({anchorEl:o,container:a,disablePortal:i,keepMounted:c,modifiers:s,open:d,placement:u,popperOptions:A,popperRef:m,transition:b},h);return(0,we.jsx)(Gi,(0,he.Z)({as:I,direction:null==t?void 0:t.direction,slots:{root:G},slotProps:null!=Z?Z:r},y,{ref:g}))}));function Bi(e){return(0,rg.Z)("MuiListSubheader",e)}(0,Cg.Z)("MuiListSubheader",["root","colorPrimary","colorInherit","gutters","inset","sticky"]);const Si=["className","color","component","disableGutters","disableSticky","inset"],Vi=(0,Ve.ZP)("li",{name:"MuiListSubheader",slot:"Root",overridesResolver:(e,g)=>{const{ownerState:l}=e;return[g.root,"default"!==l.color&&g[`color${(0,Le.Z)(l.color)}`],!l.disableGutters&&g.gutters,l.inset&&g.inset,!l.disableSticky&&g.sticky]}})((({theme:e,ownerState:g})=>(0,he.Z)({boxSizing:"border-box",lineHeight:"48px",listStyle:"none",color:(e.vars||e).palette.text.secondary,fontFamily:e.typography.fontFamily,fontWeight:e.typography.fontWeightMedium,fontSize:e.typography.pxToRem(14)},"primary"===g.color&&{color:(e.vars||e).palette.primary.main},"inherit"===g.color&&{color:"inherit"},!g.disableGutters&&{paddingLeft:16,paddingRight:16},g.inset&&{paddingLeft:72},!g.disableSticky&&{position:"sticky",top:0,zIndex:1,backgroundColor:(e.vars||e).palette.background.paper}))),Wi=g.forwardRef((function(e,g){const l=(0,We.Z)({props:e,name:"MuiListSubheader"}),{className:t,color:n="default",component:o="li",disableGutters:I=!1,disableSticky:C=!1,inset:r=!1}=l,a=(0,Ge.Z)(l,Si),i=(0,he.Z)({},l,{color:n,component:o,disableGutters:I,disableSticky:C,inset:r}),c=(e=>{const{classes:g,color:l,disableGutters:t,inset:n,disableSticky:o}=e,I={root:["root","default"!==l&&`color${(0,Le.Z)(l)}`,!t&&"gutters",n&&"inset",!o&&"sticky"]};return(0,Be.Z)(I,Bi,g)})(i);return(0,we.jsx)(Vi,(0,he.Z)({as:o,className:(0,ye.Z)(c.root,t),ref:g,ownerState:i},a))}));Wi.muiSkipListHighlight=!0;const Ri=Wi;function fi(e){return(0,rg.Z)("MuiIconButton",e)}const vi=(0,Cg.Z)("MuiIconButton",["root","disabled","colorInherit","colorPrimary","colorSecondary","colorError","colorInfo","colorSuccess","colorWarning","edgeStart","edgeEnd","sizeSmall","sizeMedium","sizeLarge"]),ki=["edge","children","className","color","disabled","disableFocusRipple","size"],Xi=(0,Ve.ZP)(ro,{name:"MuiIconButton",slot:"Root",overridesResolver:(e,g)=>{const{ownerState:l}=e;return[g.root,"default"!==l.color&&g[`color${(0,Le.Z)(l.color)}`],l.edge&&g[`edge${(0,Le.Z)(l.edge)}`],g[`size${(0,Le.Z)(l.size)}`]]}})((({theme:e,ownerState:g})=>(0,he.Z)({textAlign:"center",flex:"0 0 auto",fontSize:e.typography.pxToRem(24),padding:8,borderRadius:"50%",overflow:"visible",color:(e.vars||e).palette.action.active,transition:e.transitions.create("background-color",{duration:e.transitions.duration.shortest})},!g.disableRipple&&{"&:hover":{backgroundColor:e.vars?`rgba(${e.vars.palette.action.activeChannel} / ${e.vars.palette.action.hoverOpacity})`:(0,Rt.Fq)(e.palette.action.active,e.palette.action.hoverOpacity),"@media (hover: none)":{backgroundColor:"transparent"}}},"start"===g.edge&&{marginLeft:"small"===g.size?-3:-12},"end"===g.edge&&{marginRight:"small"===g.size?-3:-12})),(({theme:e,ownerState:g})=>{var l;const t=null==(l=(e.vars||e).palette)?void 0:l[g.color];return(0,he.Z)({},"inherit"===g.color&&{color:"inherit"},"inherit"!==g.color&&"default"!==g.color&&(0,he.Z)({color:null==t?void 0:t.main},!g.disableRipple&&{"&:hover":(0,he.Z)({},t&&{backgroundColor:e.vars?`rgba(${t.mainChannel} / ${e.vars.palette.action.hoverOpacity})`:(0,Rt.Fq)(t.main,e.palette.action.hoverOpacity)},{"@media (hover: none)":{backgroundColor:"transparent"}})}),"small"===g.size&&{padding:5,fontSize:e.typography.pxToRem(18)},"large"===g.size&&{padding:12,fontSize:e.typography.pxToRem(28)},{[`&.${vi.disabled}`]:{backgroundColor:"transparent",color:(e.vars||e).palette.action.disabled}})})),Ji=g.forwardRef((function(e,g){const l=(0,We.Z)({props:e,name:"MuiIconButton"}),{edge:t=!1,children:n,className:o,color:I="default",disabled:C=!1,disableFocusRipple:r=!1,size:a="medium"}=l,i=(0,Ge.Z)(l,ki),c=(0,he.Z)({},l,{edge:t,color:I,disabled:C,disableFocusRipple:r,size:a}),s=(e=>{const{classes:g,disabled:l,color:t,edge:n,size:o}=e,I={root:["root",l&&"disabled","default"!==t&&`color${(0,Le.Z)(t)}`,n&&`edge${(0,Le.Z)(n)}`,`size${(0,Le.Z)(o)}`]};return(0,Be.Z)(I,fi,g)})(c);return(0,we.jsx)(Xi,(0,he.Z)({className:(0,ye.Z)(s.root,o),centerRipple:!0,focusRipple:!r,disabled:C,ref:g,ownerState:c},i,{children:n}))})),wi=(0,hn.Z)((0,we.jsx)("path",{d:"M12 2C6.47 2 2 6.47 2 12s4.47 10 10 10 10-4.47 10-10S17.53 2 12 2zm5 13.59L15.59 17 12 13.41 8.41 17 7 15.59 10.59 12 7 8.41 8.41 7 12 10.59 15.59 7 17 8.41 13.41 12 17 15.59z"}),"Cancel");function Yi(e){return(0,rg.Z)("MuiChip",e)}const Hi=(0,Cg.Z)("MuiChip",["root","sizeSmall","sizeMedium","colorError","colorInfo","colorPrimary","colorSecondary","colorSuccess","colorWarning","disabled","clickable","clickableColorPrimary","clickableColorSecondary","deletable","deletableColorPrimary","deletableColorSecondary","outlined","filled","outlinedPrimary","outlinedSecondary","filledPrimary","filledSecondary","avatar","avatarSmall","avatarMedium","avatarColorPrimary","avatarColorSecondary","icon","iconSmall","iconMedium","iconColorPrimary","iconColorSecondary","label","labelSmall","labelMedium","deleteIcon","deleteIconSmall","deleteIconMedium","deleteIconColorPrimary","deleteIconColorSecondary","deleteIconOutlinedColorPrimary","deleteIconOutlinedColorSecondary","deleteIconFilledColorPrimary","deleteIconFilledColorSecondary","focusVisible"]),Fi=["avatar","className","clickable","color","component","deleteIcon","disabled","icon","label","onClick","onDelete","onKeyDown","onKeyUp","size","variant","tabIndex","skipFocusWhenDisabled"],Ni=(0,Ve.ZP)("div",{name:"MuiChip",slot:"Root",overridesResolver:(e,g)=>{const{ownerState:l}=e,{color:t,iconColor:n,clickable:o,onDelete:I,size:C,variant:r}=l;return[{[`& .${Hi.avatar}`]:g.avatar},{[`& .${Hi.avatar}`]:g[`avatar${(0,Le.Z)(C)}`]},{[`& .${Hi.avatar}`]:g[`avatarColor${(0,Le.Z)(t)}`]},{[`& .${Hi.icon}`]:g.icon},{[`& .${Hi.icon}`]:g[`icon${(0,Le.Z)(C)}`]},{[`& .${Hi.icon}`]:g[`iconColor${(0,Le.Z)(n)}`]},{[`& .${Hi.deleteIcon}`]:g.deleteIcon},{[`& .${Hi.deleteIcon}`]:g[`deleteIcon${(0,Le.Z)(C)}`]},{[`& .${Hi.deleteIcon}`]:g[`deleteIconColor${(0,Le.Z)(t)}`]},{[`& .${Hi.deleteIcon}`]:g[`deleteIcon${(0,Le.Z)(r)}Color${(0,Le.Z)(t)}`]},g.root,g[`size${(0,Le.Z)(C)}`],g[`color${(0,Le.Z)(t)}`],o&&g.clickable,o&&"default"!==t&&g[`clickableColor${(0,Le.Z)(t)})`],I&&g.deletable,I&&"default"!==t&&g[`deletableColor${(0,Le.Z)(t)}`],g[r],g[`${r}${(0,Le.Z)(t)}`]]}})((({theme:e,ownerState:g})=>{const l="light"===e.palette.mode?e.palette.grey[700]:e.palette.grey[300];return(0,he.Z)({maxWidth:"100%",fontFamily:e.typography.fontFamily,fontSize:e.typography.pxToRem(13),display:"inline-flex",alignItems:"center",justifyContent:"center",height:32,color:(e.vars||e).palette.text.primary,backgroundColor:(e.vars||e).palette.action.selected,borderRadius:16,whiteSpace:"nowrap",transition:e.transitions.create(["background-color","box-shadow"]),cursor:"unset",outline:0,textDecoration:"none",border:0,padding:0,verticalAlign:"middle",boxSizing:"border-box",[`&.${Hi.disabled}`]:{opacity:(e.vars||e).palette.action.disabledOpacity,pointerEvents:"none"},[`& .${Hi.avatar}`]:{marginLeft:5,marginRight:-6,width:24,height:24,color:e.vars?e.vars.palette.Chip.defaultAvatarColor:l,fontSize:e.typography.pxToRem(12)},[`& .${Hi.avatarColorPrimary}`]:{color:(e.vars||e).palette.primary.contrastText,backgroundColor:(e.vars||e).palette.primary.dark},[`& .${Hi.avatarColorSecondary}`]:{color:(e.vars||e).palette.secondary.contrastText,backgroundColor:(e.vars||e).palette.secondary.dark},[`& .${Hi.avatarSmall}`]:{marginLeft:4,marginRight:-4,width:18,height:18,fontSize:e.typography.pxToRem(10)},[`& .${Hi.icon}`]:(0,he.Z)({marginLeft:5,marginRight:-6},"small"===g.size&&{fontSize:18,marginLeft:4,marginRight:-4},g.iconColor===g.color&&(0,he.Z)({color:e.vars?e.vars.palette.Chip.defaultIconColor:l},"default"!==g.color&&{color:"inherit"})),[`& .${Hi.deleteIcon}`]:(0,he.Z)({WebkitTapHighlightColor:"transparent",color:e.vars?`rgba(${e.vars.palette.text.primaryChannel} / 0.26)`:(0,Rt.Fq)(e.palette.text.primary,.26),fontSize:22,cursor:"pointer",margin:"0 5px 0 -6px","&:hover":{color:e.vars?`rgba(${e.vars.palette.text.primaryChannel} / 0.4)`:(0,Rt.Fq)(e.palette.text.primary,.4)}},"small"===g.size&&{fontSize:16,marginRight:4,marginLeft:-4},"default"!==g.color&&{color:e.vars?`rgba(${e.vars.palette[g.color].contrastTextChannel} / 0.7)`:(0,Rt.Fq)(e.palette[g.color].contrastText,.7),"&:hover, &:active":{color:(e.vars||e).palette[g.color].contrastText}})},"small"===g.size&&{height:24},"default"!==g.color&&{backgroundColor:(e.vars||e).palette[g.color].main,color:(e.vars||e).palette[g.color].contrastText},g.onDelete&&{[`&.${Hi.focusVisible}`]:{backgroundColor:e.vars?`rgba(${e.vars.palette.action.selectedChannel} / calc(${e.vars.palette.action.selectedOpacity} + ${e.vars.palette.action.focusOpacity}))`:(0,Rt.Fq)(e.palette.action.selected,e.palette.action.selectedOpacity+e.palette.action.focusOpacity)}},g.onDelete&&"default"!==g.color&&{[`&.${Hi.focusVisible}`]:{backgroundColor:(e.vars||e).palette[g.color].dark}})}),(({theme:e,ownerState:g})=>(0,he.Z)({},g.clickable&&{userSelect:"none",WebkitTapHighlightColor:"transparent",cursor:"pointer","&:hover":{backgroundColor:e.vars?`rgba(${e.vars.palette.action.selectedChannel} / calc(${e.vars.palette.action.selectedOpacity} + ${e.vars.palette.action.hoverOpacity}))`:(0,Rt.Fq)(e.palette.action.selected,e.palette.action.selectedOpacity+e.palette.action.hoverOpacity)},[`&.${Hi.focusVisible}`]:{backgroundColor:e.vars?`rgba(${e.vars.palette.action.selectedChannel} / calc(${e.vars.palette.action.selectedOpacity} + ${e.vars.palette.action.focusOpacity}))`:(0,Rt.Fq)(e.palette.action.selected,e.palette.action.selectedOpacity+e.palette.action.focusOpacity)},"&:active":{boxShadow:(e.vars||e).shadows[1]}},g.clickable&&"default"!==g.color&&{[`&:hover, &.${Hi.focusVisible}`]:{backgroundColor:(e.vars||e).palette[g.color].dark}})),(({theme:e,ownerState:g})=>(0,he.Z)({},"outlined"===g.variant&&{backgroundColor:"transparent",border:e.vars?`1px solid ${e.vars.palette.Chip.defaultBorder}`:`1px solid ${"light"===e.palette.mode?e.palette.grey[400]:e.palette.grey[700]}`,[`&.${Hi.clickable}:hover`]:{backgroundColor:(e.vars||e).palette.action.hover},[`&.${Hi.focusVisible}`]:{backgroundColor:(e.vars||e).palette.action.focus},[`& .${Hi.avatar}`]:{marginLeft:4},[`& .${Hi.avatarSmall}`]:{marginLeft:2},[`& .${Hi.icon}`]:{marginLeft:4},[`& .${Hi.iconSmall}`]:{marginLeft:2},[`& .${Hi.deleteIcon}`]:{marginRight:5},[`& .${Hi.deleteIconSmall}`]:{marginRight:3}},"outlined"===g.variant&&"default"!==g.color&&{color:(e.vars||e).palette[g.color].main,border:`1px solid ${e.vars?`rgba(${e.vars.palette[g.color].mainChannel} / 0.7)`:(0,Rt.Fq)(e.palette[g.color].main,.7)}`,[`&.${Hi.clickable}:hover`]:{backgroundColor:e.vars?`rgba(${e.vars.palette[g.color].mainChannel} / ${e.vars.palette.action.hoverOpacity})`:(0,Rt.Fq)(e.palette[g.color].main,e.palette.action.hoverOpacity)},[`&.${Hi.focusVisible}`]:{backgroundColor:e.vars?`rgba(${e.vars.palette[g.color].mainChannel} / ${e.vars.palette.action.focusOpacity})`:(0,Rt.Fq)(e.palette[g.color].main,e.palette.action.focusOpacity)},[`& .${Hi.deleteIcon}`]:{color:e.vars?`rgba(${e.vars.palette[g.color].mainChannel} / 0.7)`:(0,Rt.Fq)(e.palette[g.color].main,.7),"&:hover, &:active":{color:(e.vars||e).palette[g.color].main}}}))),Ki=(0,Ve.ZP)("span",{name:"MuiChip",slot:"Label",overridesResolver:(e,g)=>{const{ownerState:l}=e,{size:t}=l;return[g.label,g[`label${(0,Le.Z)(t)}`]]}})((({ownerState:e})=>(0,he.Z)({overflow:"hidden",textOverflow:"ellipsis",paddingLeft:12,paddingRight:12,whiteSpace:"nowrap"},"outlined"===e.variant&&{paddingLeft:11,paddingRight:11},"small"===e.size&&{paddingLeft:8,paddingRight:8},"small"===e.size&&"outlined"===e.variant&&{paddingLeft:7,paddingRight:7})));function xi(e){return"Backspace"===e.key||"Delete"===e.key}const Mi=g.forwardRef((function(e,l){const t=(0,We.Z)({props:e,name:"MuiChip"}),{avatar:n,className:o,clickable:I,color:C="default",component:r,deleteIcon:a,disabled:i=!1,icon:c,label:s,onClick:d,onDelete:u,onKeyDown:A,onKeyUp:m,size:b="medium",variant:p="filled",tabIndex:Z,skipFocusWhenDisabled:h=!1}=t,G=(0,Ge.Z)(t,Fi),y=g.useRef(null),B=(0,Ue.Z)(y,l),S=e=>{e.stopPropagation(),u&&u(e)},V=!(!1===I||!d)||I,W=V||u?ro:r||"div",R=(0,he.Z)({},t,{component:W,disabled:i,size:b,color:C,iconColor:g.isValidElement(c)&&c.props.color||C,onDelete:!!u,clickable:V,variant:p}),f=(e=>{const{classes:g,disabled:l,size:t,color:n,iconColor:o,onDelete:I,clickable:C,variant:r}=e,a={root:["root",r,l&&"disabled",`size${(0,Le.Z)(t)}`,`color${(0,Le.Z)(n)}`,C&&"clickable",C&&`clickableColor${(0,Le.Z)(n)}`,I&&"deletable",I&&`deletableColor${(0,Le.Z)(n)}`,`${r}${(0,Le.Z)(n)}`],label:["label",`label${(0,Le.Z)(t)}`],avatar:["avatar",`avatar${(0,Le.Z)(t)}`,`avatarColor${(0,Le.Z)(n)}`],icon:["icon",`icon${(0,Le.Z)(t)}`,`iconColor${(0,Le.Z)(o)}`],deleteIcon:["deleteIcon",`deleteIcon${(0,Le.Z)(t)}`,`deleteIconColor${(0,Le.Z)(n)}`,`deleteIcon${(0,Le.Z)(r)}Color${(0,Le.Z)(n)}`]};return(0,Be.Z)(a,Yi,g)})(R),v=W===ro?(0,he.Z)({component:r||"div",focusVisibleClassName:f.focusVisible},u&&{disableRipple:!0}):{};let k=null;u&&(k=a&&g.isValidElement(a)?g.cloneElement(a,{className:(0,ye.Z)(a.props.className,f.deleteIcon),onClick:S}):(0,we.jsx)(wi,{className:(0,ye.Z)(f.deleteIcon),onClick:S}));let X=null;n&&g.isValidElement(n)&&(X=g.cloneElement(n,{className:(0,ye.Z)(f.avatar,n.props.className)}));let J=null;return c&&g.isValidElement(c)&&(J=g.cloneElement(c,{className:(0,ye.Z)(f.icon,c.props.className)})),(0,we.jsxs)(Ni,(0,he.Z)({as:W,className:(0,ye.Z)(f.root,o),disabled:!(!V||!i)||void 0,onClick:d,onKeyDown:e=>{e.currentTarget===e.target&&xi(e)&&e.preventDefault(),A&&A(e)},onKeyUp:e=>{e.currentTarget===e.target&&(u&&xi(e)?u(e):"Escape"===e.key&&y.current&&y.current.blur()),m&&m(e)},ref:B,tabIndex:h&&i?-1:Z,ownerState:R},v,G,{children:[X||J,(0,we.jsx)(Ki,{className:(0,ye.Z)(f.label),ownerState:R,children:s}),k]}))})),zi=(0,hn.Z)((0,we.jsx)("path",{d:"M19 6.41L17.59 5 12 10.59 6.41 5 5 6.41 10.59 12 5 17.59 6.41 19 12 13.41 17.59 19 19 17.59 13.41 12z"}),"Close");function Ei(e){return(0,rg.Z)("MuiAutocomplete",e)}const Li=(0,Cg.Z)("MuiAutocomplete",["root","expanded","fullWidth","focused","focusVisible","tag","tagSizeSmall","tagSizeMedium","hasPopupIcon","hasClearIcon","inputRoot","input","inputFocused","endAdornment","clearIndicator","popupIndicator","popupIndicatorOpen","popper","popperDisablePortal","paper","listbox","loading","noOptions","option","groupLabel","groupUl"]);var Ui,Qi;const Di=["autoComplete","autoHighlight","autoSelect","blurOnSelect","ChipProps","className","clearIcon","clearOnBlur","clearOnEscape","clearText","closeText","componentsProps","defaultValue","disableClearable","disableCloseOnSelect","disabled","disabledItemsFocusable","disableListWrap","disablePortal","filterOptions","filterSelectedOptions","forcePopupIcon","freeSolo","fullWidth","getLimitTagsText","getOptionDisabled","getOptionKey","getOptionLabel","isOptionEqualToValue","groupBy","handleHomeEndKeys","id","includeInputInList","inputValue","limitTags","ListboxComponent","ListboxProps","loading","loadingText","multiple","noOptionsText","onChange","onClose","onHighlightChange","onInputChange","onOpen","open","openOnFocus","openText","options","PaperComponent","PopperComponent","popupIcon","readOnly","renderGroup","renderInput","renderOption","renderTags","selectOnFocus","size","slotProps","value"],Ti=["ref"],Pi=["key"],ji=(0,Ve.ZP)("div",{name:"MuiAutocomplete",slot:"Root",overridesResolver:(e,g)=>{const{ownerState:l}=e,{fullWidth:t,hasClearIcon:n,hasPopupIcon:o,inputFocused:I,size:C}=l;return[{[`& .${Li.tag}`]:g.tag},{[`& .${Li.tag}`]:g[`tagSize${(0,Le.Z)(C)}`]},{[`& .${Li.inputRoot}`]:g.inputRoot},{[`& .${Li.input}`]:g.input},{[`& .${Li.input}`]:I&&g.inputFocused},g.root,t&&g.fullWidth,o&&g.hasPopupIcon,n&&g.hasClearIcon]}})((({ownerState:e})=>(0,he.Z)({[`&.${Li.focused} .${Li.clearIndicator}`]:{visibility:"visible"},"@media (pointer: fine)":{[`&:hover .${Li.clearIndicator}`]:{visibility:"visible"}}},e.fullWidth&&{width:"100%"},{[`& .${Li.tag}`]:(0,he.Z)({margin:3,maxWidth:"calc(100% - 6px)"},"small"===e.size&&{margin:2,maxWidth:"calc(100% - 4px)"}),[`& .${Li.inputRoot}`]:{flexWrap:"wrap",[`.${Li.hasPopupIcon}&, .${Li.hasClearIcon}&`]:{paddingRight:30},[`.${Li.hasPopupIcon}.${Li.hasClearIcon}&`]:{paddingRight:56},[`& .${Li.input}`]:{width:0,minWidth:30}},[`& .${hg.root}`]:{paddingBottom:1,"& .MuiInput-input":{padding:"4px 4px 4px 0px"}},[`& .${hg.root}.${ig.sizeSmall}`]:{[`& .${hg.input}`]:{padding:"2px 4px 3px 0"}},[`& .${Kg.root}`]:{padding:9,[`.${Li.hasPopupIcon}&, .${Li.hasClearIcon}&`]:{paddingRight:39},[`.${Li.hasPopupIcon}.${Li.hasClearIcon}&`]:{paddingRight:65},[`& .${Li.input}`]:{padding:"7.5px 4px 7.5px 5px"},[`& .${Li.endAdornment}`]:{right:9}},[`& .${Kg.root}.${ig.sizeSmall}`]:{paddingTop:6,paddingBottom:6,paddingLeft:6,[`& .${Li.input}`]:{padding:"2.5px 4px 2.5px 8px"}},[`& .${Rg.root}`]:{paddingTop:19,paddingLeft:8,[`.${Li.hasPopupIcon}&, .${Li.hasClearIcon}&`]:{paddingRight:39},[`.${Li.hasPopupIcon}.${Li.hasClearIcon}&`]:{paddingRight:65},[`& .${Rg.input}`]:{padding:"7px 4px"},[`& .${Li.endAdornment}`]:{right:9}},[`& .${Rg.root}.${ig.sizeSmall}`]:{paddingBottom:1,[`& .${Rg.input}`]:{padding:"2.5px 4px"}},[`& .${ig.hiddenLabel}`]:{paddingTop:8},[`& .${Rg.root}.${ig.hiddenLabel}`]:{paddingTop:0,paddingBottom:0,[`& .${Li.input}`]:{paddingTop:16,paddingBottom:17}},[`& .${Rg.root}.${ig.hiddenLabel}.${ig.sizeSmall}`]:{[`& .${Li.input}`]:{paddingTop:8,paddingBottom:9}},[`& .${Li.input}`]:(0,he.Z)({flexGrow:1,textOverflow:"ellipsis",opacity:0},e.inputFocused&&{opacity:1})}))),Oi=(0,Ve.ZP)("div",{name:"MuiAutocomplete",slot:"EndAdornment",overridesResolver:(e,g)=>g.endAdornment})({position:"absolute",right:0,top:"calc(50% - 14px)"}),qi=(0,Ve.ZP)(Ji,{name:"MuiAutocomplete",slot:"ClearIndicator",overridesResolver:(e,g)=>g.clearIndicator})({marginRight:-2,padding:4,visibility:"hidden"}),$i=(0,Ve.ZP)(Ji,{name:"MuiAutocomplete",slot:"PopupIndicator",overridesResolver:({ownerState:e},g)=>(0,he.Z)({},g.popupIndicator,e.popupOpen&&g.popupIndicatorOpen)})((({ownerState:e})=>(0,he.Z)({padding:2,marginRight:-2},e.popupOpen&&{transform:"rotate(180deg)"}))),_i=(0,Ve.ZP)(yi,{name:"MuiAutocomplete",slot:"Popper",overridesResolver:(e,g)=>{const{ownerState:l}=e;return[{[`& .${Li.option}`]:g.option},g.popper,l.disablePortal&&g.popperDisablePortal]}})((({theme:e,ownerState:g})=>(0,he.Z)({zIndex:(e.vars||e).zIndex.modal},g.disablePortal&&{position:"absolute"}))),ec=(0,Ve.ZP)(Jt,{name:"MuiAutocomplete",slot:"Paper",overridesResolver:(e,g)=>g.paper})((({theme:e})=>(0,he.Z)({},e.typography.body1,{overflow:"auto"}))),gc=(0,Ve.ZP)("div",{name:"MuiAutocomplete",slot:"Loading",overridesResolver:(e,g)=>g.loading})((({theme:e})=>({color:(e.vars||e).palette.text.secondary,padding:"14px 16px"}))),lc=(0,Ve.ZP)("div",{name:"MuiAutocomplete",slot:"NoOptions",overridesResolver:(e,g)=>g.noOptions})((({theme:e})=>({color:(e.vars||e).palette.text.secondary,padding:"14px 16px"}))),tc=(0,Ve.ZP)("div",{name:"MuiAutocomplete",slot:"Listbox",overridesResolver:(e,g)=>g.listbox})((({theme:e})=>({listStyle:"none",margin:0,padding:"8px 0",maxHeight:"40vh",overflow:"auto",position:"relative",[`& .${Li.option}`]:{minHeight:48,display:"flex",overflow:"hidden",justifyContent:"flex-start",alignItems:"center",cursor:"pointer",paddingTop:6,boxSizing:"border-box",outline:"0",WebkitTapHighlightColor:"transparent",paddingBottom:6,paddingLeft:16,paddingRight:16,[e.breakpoints.up("sm")]:{minHeight:"auto"},[`&.${Li.focused}`]:{backgroundColor:(e.vars||e).palette.action.hover,"@media (hover: none)":{backgroundColor:"transparent"}},'&[aria-disabled="true"]':{opacity:(e.vars||e).palette.action.disabledOpacity,pointerEvents:"none"},[`&.${Li.focusVisible}`]:{backgroundColor:(e.vars||e).palette.action.focus},'&[aria-selected="true"]':{backgroundColor:e.vars?`rgba(${e.vars.palette.primary.mainChannel} / ${e.vars.palette.action.selectedOpacity})`:(0,Rt.Fq)(e.palette.primary.main,e.palette.action.selectedOpacity),[`&.${Li.focused}`]:{backgroundColor:e.vars?`rgba(${e.vars.palette.primary.mainChannel} / calc(${e.vars.palette.action.selectedOpacity} + ${e.vars.palette.action.hoverOpacity}))`:(0,Rt.Fq)(e.palette.primary.main,e.palette.action.selectedOpacity+e.palette.action.hoverOpacity),"@media (hover: none)":{backgroundColor:(e.vars||e).palette.action.selected}},[`&.${Li.focusVisible}`]:{backgroundColor:e.vars?`rgba(${e.vars.palette.primary.mainChannel} / calc(${e.vars.palette.action.selectedOpacity} + ${e.vars.palette.action.focusOpacity}))`:(0,Rt.Fq)(e.palette.primary.main,e.palette.action.selectedOpacity+e.palette.action.focusOpacity)}}}}))),nc=(0,Ve.ZP)(Ri,{name:"MuiAutocomplete",slot:"GroupLabel",overridesResolver:(e,g)=>g.groupLabel})((({theme:e})=>({backgroundColor:(e.vars||e).palette.background.paper,top:-8}))),oc=(0,Ve.ZP)("ul",{name:"MuiAutocomplete",slot:"GroupUl",overridesResolver:(e,g)=>g.groupUl})({padding:0,[`& .${Li.option}`]:{paddingLeft:24}}),Ic=g.forwardRef((function(e,l){var t,n,o,I;const C=(0,We.Z)({props:e,name:"MuiAutocomplete"}),{autoComplete:r=!1,autoHighlight:a=!1,autoSelect:i=!1,blurOnSelect:c=!1,ChipProps:s,className:d,clearIcon:u=Ui||(Ui=(0,we.jsx)(zi,{fontSize:"small"})),clearOnBlur:A=!C.freeSolo,clearOnEscape:m=!1,clearText:b="Clear",closeText:p="Close",componentsProps:Z={},defaultValue:h=(C.multiple?[]:null),disableClearable:G=!1,disableCloseOnSelect:y=!1,disabled:B=!1,disabledItemsFocusable:S=!1,disableListWrap:V=!1,disablePortal:W=!1,filterSelectedOptions:R=!1,forcePopupIcon:f="auto",freeSolo:v=!1,fullWidth:k=!1,getLimitTagsText:X=(e=>`+${e}`),getOptionLabel:J,groupBy:w,handleHomeEndKeys:Y=!C.freeSolo,includeInputInList:H=!1,limitTags:F=-1,ListboxComponent:N="ul",ListboxProps:K,loading:x=!1,loadingText:M="Loading",multiple:z=!1,noOptionsText:E="No options",openOnFocus:L=!1,openText:U="Open",PaperComponent:Q=Jt,PopperComponent:D=yi,popupIcon:T=Qi||(Qi=(0,we.jsx)(Gn,{})),readOnly:P=!1,renderGroup:j,renderInput:O,renderOption:q,renderTags:$,selectOnFocus:_=!C.freeSolo,size:ee="medium",slotProps:ge={}}=C,le=(0,Ge.Z)(C,Di),{getRootProps:te,getInputProps:ne,getInputLabelProps:oe,getPopupIndicatorProps:Ie,getClearProps:Ce,getTagProps:re,getListboxProps:ae,getOptionProps:ie,value:ce,dirty:se,expanded:de,id:ue,popupOpen:Ae,focused:me,focusedTag:be,anchorEl:pe,setAnchorEl:Ze,inputValue:Ve,groupedOptions:Re}=function(e){const{unstable_isActiveElementInListbox:l=ga,unstable_classNamePrefix:t="Mui",autoComplete:n=!1,autoHighlight:o=!1,autoSelect:I=!1,blurOnSelect:C=!1,clearOnBlur:r=!e.freeSolo,clearOnEscape:a=!1,componentName:i="useAutocomplete",defaultValue:c=(e.multiple?[]:null),disableClearable:s=!1,disableCloseOnSelect:d=!1,disabled:u,disabledItemsFocusable:A=!1,disableListWrap:m=!1,filterOptions:b=ea,filterSelectedOptions:p=!1,freeSolo:Z=!1,getOptionDisabled:h,getOptionKey:G,getOptionLabel:y=(e=>{var g;return null!=(g=e.label)?g:e}),groupBy:B,handleHomeEndKeys:S=!e.freeSolo,id:V,includeInputInList:W=!1,inputValue:R,isOptionEqualToValue:f=((e,g)=>e===g),multiple:v=!1,onChange:k,onClose:X,onHighlightChange:J,onInputChange:w,onOpen:Y,open:H,openOnFocus:F=!1,options:N,readOnly:K=!1,selectOnFocus:x=!e.freeSolo,value:M}=e,z=(0,Se.Z)(V);let E=y;E=e=>{const g=y(e);return"string"!=typeof g?String(g):g};const L=g.useRef(!1),U=g.useRef(!0),Q=g.useRef(null),D=g.useRef(null),[T,P]=g.useState(null),[j,O]=g.useState(-1),q=o?0:-1,$=g.useRef(q),[_,ee]=(0,jr.Z)({controlled:M,default:c,name:i}),[ge,le]=(0,jr.Z)({controlled:R,default:"",name:i,state:"inputValue"}),[te,ne]=g.useState(!1),oe=g.useCallback(((e,g)=>{if(!(v?_.length<g.length:null!==g)&&!r)return;let l;if(v)l="";else if(null==g)l="";else{const e=E(g);l="string"==typeof e?e:""}ge!==l&&(le(l),w&&w(e,l,"reset"))}),[E,ge,v,w,le,r,_]),[Ie,Ce]=(0,jr.Z)({controlled:H,default:!1,name:i,state:"open"}),[re,ae]=g.useState(!0),ie=!v&&null!=_&&ge===E(_),ce=Ie&&!K,se=ce?b(N.filter((e=>!p||!(v?_:[_]).some((g=>null!==g&&f(e,g))))),{inputValue:ie&&re?"":ge,getOptionLabel:E}):[],de=Or({filteredOptions:se,value:_,inputValue:ge});g.useEffect((()=>{const e=_!==de.value;te&&!e||Z&&!e||oe(null,_)}),[_,oe,te,de.value,Z]);const ue=Ie&&se.length>0&&!K,Ae=(0,et.Z)((e=>{-1===e?Q.current.focus():T.querySelector(`[data-tag-index="${e}"]`).focus()}));g.useEffect((()=>{v&&j>_.length-1&&(O(-1),Ae(-1))}),[_,v,j,Ae]);const me=(0,et.Z)((({event:e,index:g,reason:l="auto"})=>{if($.current=g,-1===g?Q.current.removeAttribute("aria-activedescendant"):Q.current.setAttribute("aria-activedescendant",`${z}-option-${g}`),J&&J(e,-1===g?null:se[g],l),!D.current)return;const n=D.current.querySelector(`[role="option"].${t}-focused`);n&&(n.classList.remove(`${t}-focused`),n.classList.remove(`${t}-focusVisible`));let o=D.current;if("listbox"!==D.current.getAttribute("role")&&(o=D.current.parentElement.querySelector('[role="listbox"]')),!o)return;if(-1===g)return void(o.scrollTop=0);const I=D.current.querySelector(`[data-option-index="${g}"]`);if(I&&(I.classList.add(`${t}-focused`),"keyboard"===l&&I.classList.add(`${t}-focusVisible`),o.scrollHeight>o.clientHeight&&"mouse"!==l&&"touch"!==l)){const e=I,g=o.clientHeight+o.scrollTop,l=e.offsetTop+e.offsetHeight;l>g?o.scrollTop=l-o.clientHeight:e.offsetTop-e.offsetHeight*(B?1.3:0)<o.scrollTop&&(o.scrollTop=e.offsetTop-e.offsetHeight*(B?1.3:0))}})),be=(0,et.Z)((({event:e,diff:g,direction:l="next",reason:t="auto"})=>{if(!ce)return;const o=function(e,g){if(!D.current||e<0||e>=se.length)return-1;let l=e;for(;;){const t=D.current.querySelector(`[data-option-index="${l}"]`),n=!A&&(!t||t.disabled||"true"===t.getAttribute("aria-disabled"));if(t&&t.hasAttribute("tabindex")&&!n)return l;if(l="next"===g?(l+1)%se.length:(l-1+se.length)%se.length,l===e)return-1}}((()=>{const e=se.length-1;if("reset"===g)return q;if("start"===g)return 0;if("end"===g)return e;const l=$.current+g;return l<0?-1===l&&W?-1:m&&-1!==$.current||Math.abs(g)>1?0:e:l>e?l===e+1&&W?-1:m||Math.abs(g)>1?e:0:l})(),l);if(me({index:o,reason:t,event:e}),n&&"reset"!==g)if(-1===o)Q.current.value=ge;else{const e=E(se[o]);Q.current.value=e,0===e.toLowerCase().indexOf(ge.toLowerCase())&&ge.length>0&&Q.current.setSelectionRange(ge.length,e.length)}})),pe=g.useCallback((()=>{if(!ce)return;if((()=>{if(-1!==$.current&&de.filteredOptions&&de.filteredOptions.length!==se.length&&de.inputValue===ge&&(v?_.length===de.value.length&&de.value.every(((e,g)=>E(_[g])===E(e))):(e=de.value,g=_,(e?E(e):"")===(g?E(g):"")))){const e=de.filteredOptions[$.current];if(e&&se.some((g=>E(g)===E(e))))return!0}var e,g;return!1})())return;const e=v?_[0]:_;if(0!==se.length&&null!=e){if(D.current)if(null==e)$.current>=se.length-1?me({index:se.length-1}):me({index:$.current});else{const g=se[$.current];if(v&&g&&-1!==_r(_,(e=>f(g,e))))return;const l=_r(se,(g=>f(g,e)));-1===l?be({diff:"reset"}):me({index:l})}}else be({diff:"reset"})}),[se.length,!v&&_,p,be,me,ce,ge,v]),Ze=(0,et.Z)((e=>{(0,ct.Z)(D,e),e&&pe()}));g.useEffect((()=>{pe()}),[pe]);const Ge=e=>{Ie||(Ce(!0),ae(!0),Y&&Y(e))},ye=(e,g)=>{Ie&&(Ce(!1),X&&X(e,g))},Be=(e,g,l,t)=>{if(v){if(_.length===g.length&&_.every(((e,l)=>e===g[l])))return}else if(_===g)return;k&&k(e,g,l,t),ee(g)},Ve=g.useRef(!1),We=(e,g,l="selectOption",t="options")=>{let n=l,o=g;if(v){o=Array.isArray(_)?_.slice():[];const e=_r(o,(e=>f(g,e)));-1===e?o.push(g):"freeSolo"!==t&&(o.splice(e,1),n="removeOption")}oe(e,o),Be(e,o,n,{option:g}),d||e&&(e.ctrlKey||e.metaKey)||ye(e,n),(!0===C||"touch"===C&&Ve.current||"mouse"===C&&!Ve.current)&&Q.current.blur()},Re=(e,g)=>{if(!v)return;""===ge&&ye(e,"toggleInput");let l=j;-1===j?""===ge&&"previous"===g&&(l=_.length-1):(l+="next"===g?1:-1,l<0&&(l=0),l===_.length&&(l=-1)),l=function(e,g){if(-1===e)return-1;let l=e;for(;;){if("next"===g&&l===_.length||"previous"===g&&-1===l)return-1;const e=T.querySelector(`[data-tag-index="${l}"]`);if(e&&e.hasAttribute("tabindex")&&!e.disabled&&"true"!==e.getAttribute("aria-disabled"))return l;l+="next"===g?1:-1}}(l,g),O(l),Ae(l)},fe=e=>{L.current=!0,le(""),w&&w(e,"","clear"),Be(e,v?[]:null,"clear")},ve=e=>g=>{if(e.onKeyDown&&e.onKeyDown(g),!g.defaultMuiPrevented&&(-1!==j&&-1===["ArrowLeft","ArrowRight"].indexOf(g.key)&&(O(-1),Ae(-1)),229!==g.which))switch(g.key){case"Home":ce&&S&&(g.preventDefault(),be({diff:"start",direction:"next",reason:"keyboard",event:g}));break;case"End":ce&&S&&(g.preventDefault(),be({diff:"end",direction:"previous",reason:"keyboard",event:g}));break;case"PageUp":g.preventDefault(),be({diff:-5,direction:"previous",reason:"keyboard",event:g}),Ge(g);break;case"PageDown":g.preventDefault(),be({diff:5,direction:"next",reason:"keyboard",event:g}),Ge(g);break;case"ArrowDown":g.preventDefault(),be({diff:1,direction:"next",reason:"keyboard",event:g}),Ge(g);break;case"ArrowUp":g.preventDefault(),be({diff:-1,direction:"previous",reason:"keyboard",event:g}),Ge(g);break;case"ArrowLeft":Re(g,"previous");break;case"ArrowRight":Re(g,"next");break;case"Enter":if(-1!==$.current&&ce){const e=se[$.current],l=!!h&&h(e);if(g.preventDefault(),l)return;We(g,e,"selectOption"),n&&Q.current.setSelectionRange(Q.current.value.length,Q.current.value.length)}else Z&&""!==ge&&!1===ie&&(v&&g.preventDefault(),We(g,ge,"createOption","freeSolo"));break;case"Escape":ce?(g.preventDefault(),g.stopPropagation(),ye(g,"escape")):a&&(""!==ge||v&&_.length>0)&&(g.preventDefault(),g.stopPropagation(),fe(g));break;case"Backspace":if(v&&!K&&""===ge&&_.length>0){const e=-1===j?_.length-1:j,l=_.slice();l.splice(e,1),Be(g,l,"removeOption",{option:_[e]})}break;case"Delete":if(v&&!K&&""===ge&&_.length>0&&-1!==j){const e=j,l=_.slice();l.splice(e,1),Be(g,l,"removeOption",{option:_[e]})}}},ke=e=>{ne(!0),F&&!L.current&&Ge(e)},Xe=e=>{l(D)?Q.current.focus():(ne(!1),U.current=!0,L.current=!1,I&&-1!==$.current&&ce?We(e,se[$.current],"blur"):I&&Z&&""!==ge?We(e,ge,"blur","freeSolo"):r&&oe(e,_),ye(e,"blur"))},Je=e=>{const g=e.target.value;ge!==g&&(le(g),ae(!1),w&&w(e,g,"input")),""===g?s||v||Be(e,null,"clear"):Ge(e)},we=e=>{const g=Number(e.currentTarget.getAttribute("data-option-index"));$.current!==g&&me({event:e,index:g,reason:"mouse"})},Ye=e=>{me({event:e,index:Number(e.currentTarget.getAttribute("data-option-index")),reason:"touch"}),Ve.current=!0},He=e=>{const g=Number(e.currentTarget.getAttribute("data-option-index"));We(e,se[g],"selectOption"),Ve.current=!1},Fe=e=>g=>{const l=_.slice();l.splice(e,1),Be(g,l,"removeOption",{option:_[e]})},Ne=e=>{Ie?ye(e,"toggleInput"):Ge(e)},Ke=e=>{e.currentTarget.contains(e.target)&&e.target.getAttribute("id")!==z&&e.preventDefault()},xe=e=>{e.currentTarget.contains(e.target)&&(Q.current.focus(),x&&U.current&&Q.current.selectionEnd-Q.current.selectionStart==0&&Q.current.select(),U.current=!1)},Me=e=>{u||""!==ge&&Ie||Ne(e)};let ze=Z&&ge.length>0;ze=ze||(v?_.length>0:null!==_);let Ee=se;return B&&(new Map,Ee=se.reduce(((e,g,l)=>{const t=B(g);return e.length>0&&e[e.length-1].group===t?e[e.length-1].options.push(g):e.push({key:l,index:l,group:t,options:[g]}),e}),[])),u&&te&&Xe(),{getRootProps:(e={})=>(0,he.Z)({"aria-owns":ue?`${z}-listbox`:null},e,{onKeyDown:ve(e),onMouseDown:Ke,onClick:xe}),getInputLabelProps:()=>({id:`${z}-label`,htmlFor:z}),getInputProps:()=>({id:z,value:ge,onBlur:Xe,onFocus:ke,onChange:Je,onMouseDown:Me,"aria-activedescendant":ce?"":null,"aria-autocomplete":n?"both":"list","aria-controls":ue?`${z}-listbox`:void 0,"aria-expanded":ue,autoComplete:"off",ref:Q,autoCapitalize:"none",spellCheck:"false",role:"combobox",disabled:u}),getClearProps:()=>({tabIndex:-1,type:"button",onClick:fe}),getPopupIndicatorProps:()=>({tabIndex:-1,type:"button",onClick:Ne}),getTagProps:({index:e})=>(0,he.Z)({key:e,"data-tag-index":e,tabIndex:-1},!K&&{onDelete:Fe(e)}),getListboxProps:()=>({role:"listbox",id:`${z}-listbox`,"aria-labelledby":`${z}-label`,ref:Ze,onMouseDown:e=>{e.preventDefault()}}),getOptionProps:({index:e,option:g})=>{var l;const t=(v?_:[_]).some((e=>null!=e&&f(g,e))),n=!!h&&h(g);return{key:null!=(l=null==G?void 0:G(g))?l:E(g),tabIndex:-1,role:"option",id:`${z}-option-${e}`,onMouseMove:we,onClick:He,onTouchStart:Ye,"data-option-index":e,"aria-disabled":n,"aria-selected":t}},id:z,inputValue:ge,value:_,dirty:ze,expanded:ce&&T,popupOpen:ce,focused:te||-1!==j,anchorEl:T,setAnchorEl:P,focusedTag:j,groupedOptions:Ee}}((0,he.Z)({},C,{componentName:"Autocomplete"})),fe=!G&&!B&&se&&!P,ve=(!v||!0===f)&&!1!==f,{onMouseDown:ke}=ne(),{ref:Xe}=null!=K?K:{},Je=ae(),{ref:Ye}=Je,He=(0,Ge.Z)(Je,Ti),Fe=(0,Ue.Z)(Ye,Xe),Ne=J||(e=>{var g;return null!=(g=e.label)?g:e}),Ke=(0,he.Z)({},C,{disablePortal:W,expanded:de,focused:me,fullWidth:k,getOptionLabel:Ne,hasClearIcon:fe,hasPopupIcon:ve,inputFocused:-1===be,popupOpen:Ae,size:ee}),xe=(e=>{const{classes:g,disablePortal:l,expanded:t,focused:n,fullWidth:o,hasClearIcon:I,hasPopupIcon:C,inputFocused:r,popupOpen:a,size:i}=e,c={root:["root",t&&"expanded",n&&"focused",o&&"fullWidth",I&&"hasClearIcon",C&&"hasPopupIcon"],inputRoot:["inputRoot"],input:["input",r&&"inputFocused"],tag:["tag",`tagSize${(0,Le.Z)(i)}`],endAdornment:["endAdornment"],clearIndicator:["clearIndicator"],popupIndicator:["popupIndicator",a&&"popupIndicatorOpen"],popper:["popper",l&&"popperDisablePortal"],paper:["paper"],listbox:["listbox"],loading:["loading"],noOptions:["noOptions"],option:["option"],groupLabel:["groupLabel"],groupUl:["groupUl"]};return(0,Be.Z)(c,Ei,g)})(Ke);let Me;if(z&&ce.length>0){const e=e=>(0,he.Z)({className:xe.tag,disabled:B},re(e));Me=$?$(ce,e,Ke):ce.map(((g,l)=>(0,we.jsx)(Mi,(0,he.Z)({label:Ne(g),size:ee},e({index:l}),s))))}if(F>-1&&Array.isArray(Me)){const e=Me.length-F;!me&&e>0&&(Me=Me.splice(0,F),Me.push((0,we.jsx)("span",{className:xe.tag,children:X(e)},Me.length)))}const ze=j||(e=>(0,we.jsxs)("li",{children:[(0,we.jsx)(nc,{className:xe.groupLabel,ownerState:Ke,component:"div",children:e.group}),(0,we.jsx)(oc,{className:xe.groupUl,ownerState:Ke,children:e.children})]},e.key)),Ee=q||((e,g)=>{const{key:l}=e,t=(0,Ge.Z)(e,Pi);return(0,we.jsx)("li",(0,he.Z)({},t,{children:Ne(g)}),l)}),Qe=(e,g)=>{const l=ie({option:e,index:g});return Ee((0,he.Z)({},l,{className:xe.option}),e,{selected:l["aria-selected"],index:g,inputValue:Ve},Ke)},De=null!=(t=ge.clearIndicator)?t:Z.clearIndicator,Te=null!=(n=ge.paper)?n:Z.paper,Pe=null!=(o=ge.popper)?o:Z.popper,je=null!=(I=ge.popupIndicator)?I:Z.popupIndicator;return(0,we.jsxs)(g.Fragment,{children:[(0,we.jsx)(ji,(0,he.Z)({ref:l,className:(0,ye.Z)(xe.root,d),ownerState:Ke},te(le),{children:O({id:ue,disabled:B,fullWidth:!0,size:"small"===ee?"small":void 0,InputLabelProps:oe(),InputProps:(0,he.Z)({ref:Ze,className:xe.inputRoot,startAdornment:Me,onClick:e=>{e.target===e.currentTarget&&ke(e)}},(fe||ve)&&{endAdornment:(0,we.jsxs)(Oi,{className:xe.endAdornment,ownerState:Ke,children:[fe?(0,we.jsx)(qi,(0,he.Z)({},Ce(),{"aria-label":b,title:b,ownerState:Ke},De,{className:(0,ye.Z)(xe.clearIndicator,null==De?void 0:De.className),children:u})):null,ve?(0,we.jsx)($i,(0,he.Z)({},Ie(),{disabled:B,"aria-label":Ae?p:U,title:Ae?p:U,ownerState:Ke},je,{className:(0,ye.Z)(xe.popupIndicator,null==je?void 0:je.className),children:T})):null]})}),inputProps:(0,he.Z)({className:xe.input,disabled:B,readOnly:P},ne())})})),pe?(0,we.jsx)(_i,(0,he.Z)({as:D,disablePortal:W,style:{width:pe?pe.clientWidth:null},ownerState:Ke,role:"presentation",anchorEl:pe,open:Ae},Pe,{className:(0,ye.Z)(xe.popper,null==Pe?void 0:Pe.className),children:(0,we.jsxs)(ec,(0,he.Z)({ownerState:Ke,as:Q},Te,{className:(0,ye.Z)(xe.paper,null==Te?void 0:Te.className),children:[x&&0===Re.length?(0,we.jsx)(gc,{className:xe.loading,ownerState:Ke,children:M}):null,0!==Re.length||v||x?null:(0,we.jsx)(lc,{className:xe.noOptions,ownerState:Ke,role:"presentation",onMouseDown:e=>{e.preventDefault()},children:E}),Re.length>0?(0,we.jsx)(tc,(0,he.Z)({as:N,className:xe.listbox,ownerState:Ke},He,K,{ref:Fe,children:Re.map(((e,g)=>w?ze({key:e.key,group:e.group,children:e.options.map(((g,l)=>Qe(g,e.index+l)))}):Qe(e,g)))})):null]}))})):null]})})),Cc=["item","applyValue","type","apiRef","focusElementRef","color","error","helperText","size","variant"];function rc(e){const{item:l,applyValue:t,type:n,apiRef:o,focusElementRef:I,color:C,error:r,helperText:a,size:i,variant:c}=e,s=(0,Ge.Z)(e,Cc),d={color:C,error:r,helperText:a,size:i,variant:c},[u,A]=g.useState(l.value||[]),m=(0,Se.Z)(),b=rI();g.useEffect((()=>{var e;const g=null!=(e=l.value)?e:[];A(g.map(String))}),[l.value]);const p=g.useCallback(((e,g)=>{A(g.map(String)),t((0,he.Z)({},l,{value:[...g]}))}),[t,l]);return(0,we.jsx)(Ic,(0,he.Z)({multiple:!0,freeSolo:!0,options:[],filterOptions:(e,g)=>{const{inputValue:l}=g;return null==l||""===l?[]:[l]},id:m,value:u,onChange:p,renderTags:(e,g)=>e.map(((e,l)=>(0,we.jsx)(b.slots.baseChip,(0,he.Z)({variant:"outlined",size:"small",label:e},g({index:l}))))),renderInput:e=>{var g;return(0,we.jsx)(b.slots.baseTextField,(0,he.Z)({},e,{label:o.current.getLocaleText("filterPanelInputLabel"),placeholder:o.current.getLocaleText("filterPanelInputPlaceholder"),InputLabelProps:(0,he.Z)({},e.InputLabelProps,{shrink:!0}),inputRef:I,type:n||"text"},d,null==(g=b.slotProps)?void 0:g.baseTextField))}},s))}const ac={current:null};function ic(e){return e.isInternal=!0,e}function cc(e){return void 0!==e&&!0===e.isInternal}function sc(e){return e.map((e=>{return(0,he.Z)({},e,{getApplyFilterFn:(g=e.getApplyFilterFnV7,ic(((e,l)=>{const t=g(e,l);return t?e=>t(e.value,e.row,l,ac.current):t}))),getApplyFilterFnV7:ic(e.getApplyFilterFnV7)});var g}))}function dc(e){return ic(((g,l,t)=>{const n=e(g,l,t);return n?e=>n(e.value,e.row,l,t):n}))}var uc=function(e){return e.And="and",e.Or="or",e}(uc||{});const Ac=()=>({items:[],logicOperator:uc.And,quickFilterValues:[],quickFilterLogicOperator:uc.And});function mc(e){return{current:e.current.getPublicApi()}}const bc=("undefined"==typeof window?globalThis:window)[atob("ZXZhbA==")];let pc;try{pc=bc("true")}catch(On){pc=!1}const Zc=(e,g)=>{const l=(0,he.Z)({},e);if(null==l.id&&(l.id=Math.round(1e5*Math.random())),null==l.operator){const e=SI(g)[l.field];l.operator=e&&e.filterOperators[0].value}return l},hc=qo(["MUI: The `filterModel` can only contain a single item when the `disableMultipleColumnsFiltering` prop is set to `true`.","If you are using the community version of the `DataGrid`, this prop is always `true`."],"error"),Gc=qo("MUI: The `id` field is required on `filterModel.items` when you use multiple filters.","error"),yc=qo("MUI: The `operator` field is required on `filterModel.items`, one or more of your filtering item has no `operator` provided.","error"),Bc=(e,g,l)=>{const t=e.items.length>1;let n;t&&g?(hc(),n=[e.items[0]]):n=e.items;const o=t&&n.some((e=>null==e.id)),I=n.some((e=>null==e.operator));return o&&Gc(),I&&yc(),I||o?(0,he.Z)({},e,{items:n.map((e=>Zc(e,l)))}):e.items!==n?(0,he.Z)({},e,{items:n}):e},Sc=(e,g,l)=>t=>(0,he.Z)({},t,{filterModel:Bc(e,g,l)}),Vc=e=>"string"==typeof e?e.normalize("NFD").replace(/[\u0300-\u036f]/g,""):e,Wc=(e,g)=>{if(!e.field||!e.operator)return null;const l=g.current.getColumn(e.field);if(!l)return null;let t;if(l.valueParser){var n;const g=l.valueParser;t=Array.isArray(e.value)?null==(n=e.value)?void 0:n.map((e=>g(e))):g(e.value)}else t=e.value;const{ignoreDiacritics:o}=g.current.rootProps;o&&(t=Vc(t));const I=(0,he.Z)({},e,{value:t}),C=l.filterOperators;if(null==C||!C.length)throw new Error(`MUI: No filter operators found for column '${l.field}'.`);const r=C.find((e=>e.value===I.operator));if(!r)throw new Error(`MUI: No filter operator found for column '${l.field}' and operator value '${I.operator}'.`);const a=!cc(r.getApplyFilterFn),i=!cc(r.getApplyFilterFnV7),c=mc(g);if(r.getApplyFilterFnV7&&(!a||i)){const e=r.getApplyFilterFnV7(I,l);return"function"!=typeof e?null:{v7:!0,item:I,fn:t=>{let n=g.current.getRowValue(t,l);return o&&(n=Vc(n)),e(n,t,l,c)}}}const s=r.getApplyFilterFn(I,l);return"function"!=typeof s?null:{v7:!1,item:I,fn:e=>{const l=g.current.getCellParams(e,I.field);ac.current=c,o&&(l.value=Vc(l.value));const t=s(l);return ac.current=null,t}}};let Rc=1;const fc=e=>null!=e,vc=(e,g,l,t,n)=>{const o=((e,g,l)=>(e.cleanedFilterItems||(e.cleanedFilterItems=l.filter((e=>null!==Wc(e,g)))),e.cleanedFilterItems))(n,t,l.items),I=e.filter(fc),C=g.filter(fc);if(I.length>0){var r;const e=e=>I.some((g=>g[e.id]));if((null!=(r=l.logicOperator)?r:Ac().logicOperator)===uc.And){if(!o.every(e))return!1}else if(!o.some(e))return!1}if(C.length>0&&null!=l.quickFilterValues){var a;const e=e=>C.some((g=>g[e]));if((null!=(a=l.quickFilterLogicOperator)?a:Ac().quickFilterLogicOperator)===uc.And){if(!l.quickFilterValues.every(e))return!1}else if(!l.quickFilterValues.some(e))return!1}return!0},kc=ic((e=>{if(!e)return null;const g=new RegExp(FC(e),"i");return(e,l,t,n)=>{let o=n.current.getRowFormattedValue(l,t);return n.current.ignoreDiacritics&&(o=Vc(o)),null!=o&&g.test(o.toString())}})),Xc={width:100,minWidth:50,maxWidth:1/0,hideable:!0,sortable:!0,resizable:!0,filterable:!0,groupable:!0,pinnable:!0,aggregable:!0,editable:!1,sortComparator:(e,g)=>{const l=zr(e,g);return null!==l?l:"string"==typeof e?Er.compare(e.toString(),g.toString()):e-g},type:"string",align:"left",filterOperators:((e=!1)=>sc([{value:"contains",getApplyFilterFnV7:g=>{if(!g.value)return null;const l=e?g.value:g.value.trim(),t=new RegExp(FC(l),"i");return e=>null!=e&&t.test(String(e))},InputComponent:Pr},{value:"equals",getApplyFilterFnV7:g=>{if(!g.value)return null;const l=e?g.value:g.value.trim(),t=new Intl.Collator(void 0,{sensitivity:"base",usage:"search"});return e=>null!=e&&0===t.compare(l,e.toString())},InputComponent:Pr},{value:"startsWith",getApplyFilterFnV7:g=>{if(!g.value)return null;const l=e?g.value:g.value.trim(),t=new RegExp(`^${FC(l)}.*$`,"i");return e=>null!=e&&t.test(e.toString())},InputComponent:Pr},{value:"endsWith",getApplyFilterFnV7:g=>{if(!g.value)return null;const l=e?g.value:g.value.trim(),t=new RegExp(`.*${FC(l)}$`,"i");return e=>null!=e&&t.test(e.toString())},InputComponent:Pr},{value:"isEmpty",getApplyFilterFnV7:()=>e=>""===e||null==e,requiresFilterValue:!1},{value:"isNotEmpty",getApplyFilterFnV7:()=>e=>""!==e&&null!=e,requiresFilterValue:!1},{value:"isAnyOf",getApplyFilterFnV7:g=>{if(!Array.isArray(g.value)||0===g.value.length)return null;const l=e?g.value:g.value.map((e=>e.trim())),t=new Intl.Collator(void 0,{sensitivity:"base",usage:"search"});return e=>null!=e&&l.some((g=>0===t.compare(g,e.toString()||"")))},InputComponent:rc}]))(),renderEditCell:e=>(0,we.jsx)(Fr,(0,he.Z)({},e)),getApplyQuickFilterFn:dc(kc),getApplyQuickFilterFnV7:kc},Jc="auto-generated-group-node-root",wc=Symbol("mui.id_autogenerated"),Yc=(e,g,l)=>{const t=g?g(e):e.id;return function(e,g,l="A row was provided without id in the rows prop:"){if(null==e)throw new Error(["MUI: The data grid component requires all rows to have a unique `id` property.","Alternatively, you can use the `getRowId` prop to specify a custom id for each row.",l,JSON.stringify(g)].join("\n"))}(t,e,l),t},Hc=({rows:e,getRowId:g,loading:l,rowCount:t})=>{const n={type:"full",rows:[]},o={},I={};for(let l=0;l<e.length;l+=1){const t=e[l],C=Yc(t,g);o[C]=t,I[C]=C,n.rows.push(C)}return{rowsBeforePartialUpdates:e,loadingPropBeforePartialUpdates:l,rowCountPropBeforePartialUpdates:t,updates:n,dataRowIdToIdLookup:I,dataRowIdToModelLookup:o}},Fc=({tree:e,rowCountProp:g=0})=>{const l=e[Jc];return Math.max(g,l.children.length+(null==l.footerId?0:1))},Nc=({apiRef:e,rowCountProp:g=0,loadingProp:l,previousTree:t,previousTreeDepths:n})=>{const o=e.current.caches.rows,{tree:I,treeDepths:C,dataRowIds:r,groupingName:a}=e.current.applyStrategyProcessor("rowTreeCreation",{previousTree:t,previousTreeDepths:n,updates:o.updates,dataRowIdToIdLookup:o.dataRowIdToIdLookup,dataRowIdToModelLookup:o.dataRowIdToModelLookup}),i=e.current.unstable_applyPipeProcessors("hydrateRows",{tree:I,treeDepths:C,dataRowIdToIdLookup:o.dataRowIdToIdLookup,dataRowIds:r,dataRowIdToModelLookup:o.dataRowIdToModelLookup});return e.current.caches.rows.updates={type:"partial",actions:{insert:[],modify:[],remove:[]},idToActionLookup:{}},(0,he.Z)({},i,{totalRowCount:Math.max(g,i.dataRowIds.length),totalTopLevelRowCount:Fc({tree:i.tree,rowCountProp:g}),groupingName:a,loading:l})},Kc=e=>"skeletonRow"===e.type||"footer"===e.type||"group"===e.type&&e.isAutoGenerated||"pinnedRow"===e.type&&e.isAutoGenerated,xc=(e,g,l)=>{const t=e[g];if("group"!==t.type)return[];const n=[];for(let g=0;g<t.children.length;g+=1){const o=t.children[g];l&&Kc(e[o])||n.push(o),n.push(...xc(e,o,l))}return l||null==t.footerId||n.push(t.footerId),n};function Mc(e){var g,l;const t=jI(e);return{top:(null==t||null==(g=t.top)?void 0:g.reduce(((g,l)=>g+e.current.unstable_getRowHeight(l.id)),0))||0,bottom:(null==t||null==(l=t.bottom)?void 0:l.reduce(((g,l)=>g+e.current.unstable_getRowHeight(l.id)),0))||0}}function zc(e,g){const l=GI(e);return`var(--DataGrid-overlayHeight, ${2*Math.floor(g*l)}px)`}const Ec=["id","value","formattedValue","api","field","row","rowNode","colDef","cellMode","isEditable","hasFocus","tabIndex"];function Lc(e){const{value:l}=e,t=(0,Ge.Z)(e,Ec),n=Ar(),o=rI(),I=(e=>{const{classes:g}=e;return(0,Be.Z)({root:["booleanCell"]},Eo,g)})({classes:o.classes}),C=g.useMemo((()=>l?o.slots.booleanCellTrueIcon:o.slots.booleanCellFalseIcon),[o.slots.booleanCellFalseIcon,o.slots.booleanCellTrueIcon,l]);return(0,we.jsx)(C,(0,he.Z)({fontSize:"small",className:I.root,titleAccess:n.current.getLocaleText(l?"booleanCellTrueLabel":"booleanCellFalseLabel"),"data-value":Boolean(l)},t))}const Uc=g.memo(Lc),Qc=["id","value","formattedValue","api","field","row","rowNode","colDef","cellMode","isEditable","tabIndex","className","hasFocus","isValidating","isProcessingProps","error","onValueChange"];function Dc(e){var l;const{id:t,value:n,field:o,className:I,hasFocus:C,onValueChange:r}=e,a=(0,Ge.Z)(e,Qc),i=Ar(),c=g.useRef(null),s=(0,Se.Z)(),[d,u]=g.useState(n),A=rI(),m=(e=>{const{classes:g}=e;return(0,Be.Z)({root:["editBooleanCell"]},Eo,g)})({classes:A.classes}),b=g.useCallback((async e=>{const g=e.target.checked;r&&await r(e,g),u(g),await i.current.setEditCellValue({id:t,field:o,value:g},e)}),[i,o,t,r]);return g.useEffect((()=>{u(n)}),[n]),(0,Xe.Z)((()=>{C&&c.current.focus()}),[C]),(0,we.jsx)("label",(0,he.Z)({htmlFor:s,className:(0,ye.Z)(m.root,I)},a,{children:(0,we.jsx)(A.slots.baseCheckbox,(0,he.Z)({id:s,inputRef:c,checked:Boolean(d),onChange:b,size:"small"},null==(l=A.slotProps)?void 0:l.baseCheckbox))}))}const Tc=["item","applyValue","apiRef","focusElementRef","isFilterActive","clearButton","tabIndex","label","InputLabelProps"],Pc=(0,Ve.ZP)("div")({display:"flex",alignItems:"center",width:"100%","& button":{margin:"auto 0px 5px 5px"}});const jc=(0,he.Z)({},Xc,{type:"boolean",align:"center",headerAlign:"center",renderCell:e=>Kc(e.rowNode)?"":(0,we.jsx)(Uc,(0,he.Z)({},e)),renderEditCell:e=>(0,we.jsx)(Dc,(0,he.Z)({},e)),sortComparator:Lr,valueFormatter:function({value:e,api:g}){return e?g.getLocaleText("booleanCellTrueLabel"):g.getLocaleText("booleanCellFalseLabel")},filterOperators:sc([{value:"is",getApplyFilterFnV7:e=>{if(!e.value)return null;const g="true"===e.value;return e=>Boolean(e)===g},InputComponent:function(e){var l,t,n,o;const{item:I,applyValue:C,apiRef:r,focusElementRef:a,clearButton:i,tabIndex:c,label:s}=e,d=(0,Ge.Z)(e,Tc),[u,A]=g.useState(I.value||""),m=rI(),b=(0,Se.Z)(),p=(0,Se.Z)(),Z=(null==(l=m.slotProps)?void 0:l.baseSelect)||{},h=null==(t=Z.native)||t,G=(null==(n=m.slotProps)?void 0:n.baseSelectOption)||{},y=g.useCallback((e=>{const g=e.target.value;A(g),C((0,he.Z)({},I,{value:g}))}),[C,I]);g.useEffect((()=>{A(I.value||"")}),[I.value]);const B=null!=s?s:r.current.getLocaleText("filterPanelInputLabel");return(0,we.jsxs)(Pc,{children:[(0,we.jsxs)(m.slots.baseFormControl,{fullWidth:!0,children:[(0,we.jsx)(m.slots.baseInputLabel,(0,he.Z)({},null==(o=m.slotProps)?void 0:o.baseInputLabel,{id:b,shrink:!0,variant:"standard",children:B})),(0,we.jsxs)(m.slots.baseSelect,(0,he.Z)({labelId:b,id:p,label:B,value:u,onChange:y,variant:"standard",native:h,displayEmpty:!0,inputProps:{ref:a,tabIndex:c}},d,Z,{children:[(0,we.jsx)(m.slots.baseSelectOption,(0,he.Z)({},G,{native:h,value:"",children:r.current.getLocaleText("filterValueAny")})),(0,we.jsx)(m.slots.baseSelectOption,(0,he.Z)({},G,{native:h,value:"true",children:r.current.getLocaleText("filterValueTrue")})),(0,we.jsx)(m.slots.baseSelectOption,(0,he.Z)({},G,{native:h,value:"false",children:r.current.getLocaleText("filterValueFalse")}))]}))]}),i]})}}]),getApplyQuickFilterFn:void 0,getApplyQuickFilterFnV7:void 0,aggregable:!1,pastedValueParser:e=>(e=>{switch(e.toLowerCase().trim()){case"true":case"yes":case"1":return!0;case"false":case"no":case"0":case"null":case"undefined":return!1;default:return}})(e)}),Oc="__check__",qc=(0,he.Z)({},jc,{field:Oc,type:"checkboxSelection",width:50,resizable:!1,sortable:!1,filterable:!1,aggregable:!1,disableColumnMenu:!0,disableReorder:!0,disableExport:!0,getApplyQuickFilterFn:void 0,getApplyQuickFilterFnV7:void 0,valueGetter:e=>void 0!==Gr(e.api.state,e.api.instanceId)[e.id],renderHeader:e=>(0,we.jsx)(wr,(0,he.Z)({},e)),renderCell:e=>(0,we.jsx)(br,(0,he.Z)({},e))});function $c(e,g){return"string"==typeof e&&[g,"\n","\r",'"'].some((g=>e.includes(g)))?`"${e.replace(/"/g,'""')}"`:e}const _c=(e,g)=>{const{delimiterCharacter:l,ignoreValueFormatter:t}=g;let n;if(t){var o;const g=e.colDef.type;if("number"===g)n=String(e.value);else if("date"===g||"dateTime"===g){var I;n=null==(I=e.value)?void 0:I.toISOString()}else n="function"==typeof(null==(o=e.value)?void 0:o.toString)?e.value.toString():e.value}else n=e.formattedValue;return $c(n,l)};qo(["MUI: When the value of a field is an object or a `renderCell` is provided, the CSV export might not display the value correctly.","You can provide a `valueFormatter` with a string representation to be used."]);class es{constructor(e){this.options=void 0,this.rowString="",this.isEmpty=!0,this.options=e}addValue(e){this.isEmpty||(this.rowString+=this.options.delimiterCharacter),null==e?this.rowString+="":"function"==typeof this.options.sanitizeCellValue?this.rowString+=this.options.sanitizeCellValue(e,this.options.delimiterCharacter):this.rowString+=e,this.isEmpty=!1}getRowString(){return this.rowString}}function gs(e){const g=document.createElement("span");g.style.whiteSpace="pre",g.style.userSelect="all",g.style.opacity="0px",g.textContent=e,document.body.appendChild(g);const l=document.createRange();l.selectNode(g);const t=window.getSelection();t.removeAllRanges(),t.addRange(l);try{document.execCommand("copy")}finally{document.body.removeChild(g)}}const ls=e=>(0,he.Z)({},e,{columnMenu:{open:!1}}),ts=e=>{const l=g.useRef(!0);l.current&&(l.current=!1,e())},ns=(e,l,t)=>{const n=g.useRef(),o=g.useRef(`mui-${Math.round(1e9*Math.random())}`),I=g.useCallback((()=>{n.current=e.current.registerPipeProcessor(l,o.current,t)}),[e,t,l]);ts((()=>{I()}));const C=g.useRef(!0);g.useEffect((()=>(C.current?C.current=!1:I(),()=>{n.current&&(n.current(),n.current=null)})),[I])},os=(e,l,t)=>{const n=g.useRef(),o=g.useRef(`mui-${Math.round(1e9*Math.random())}`),I=g.useCallback((()=>{n.current=e.current.registerPipeApplier(l,o.current,t)}),[e,t,l]);ts((()=>{I()}));const C=g.useRef(!0);g.useEffect((()=>(C.current?C.current=!1:I(),()=>{n.current&&(n.current(),n.current=null)})),[I])},Is=e=>null==e?null:Number(e),Cs=ic((e=>null==e||Number.isNaN(e)||""===e?null:g=>Is(g)===Is(e))),rs=(0,he.Z)({},Xc,{type:"number",align:"right",headerAlign:"right",sortComparator:Lr,valueParser:e=>""===e?null:Number(e),valueFormatter:({value:e})=>function(e){return"number"==typeof e&&!Number.isNaN(e)}(e)?e.toLocaleString():e||"",filterOperators:sc([{value:"=",getApplyFilterFnV7:e=>null==e.value||Number.isNaN(e.value)?null:g=>Is(g)===e.value,InputComponent:Pr,InputComponentProps:{type:"number"}},{value:"!=",getApplyFilterFnV7:e=>null==e.value||Number.isNaN(e.value)?null:g=>Is(g)!==e.value,InputComponent:Pr,InputComponentProps:{type:"number"}},{value:">",getApplyFilterFnV7:e=>null==e.value||Number.isNaN(e.value)?null:g=>null!=g&&Is(g)>e.value,InputComponent:Pr,InputComponentProps:{type:"number"}},{value:">=",getApplyFilterFnV7:e=>null==e.value||Number.isNaN(e.value)?null:g=>null!=g&&Is(g)>=e.value,InputComponent:Pr,InputComponentProps:{type:"number"}},{value:"<",getApplyFilterFnV7:e=>null==e.value||Number.isNaN(e.value)?null:g=>null!=g&&Is(g)<e.value,InputComponent:Pr,InputComponentProps:{type:"number"}},{value:"<=",getApplyFilterFnV7:e=>null==e.value||Number.isNaN(e.value)?null:g=>null!=g&&Is(g)<=e.value,InputComponent:Pr,InputComponentProps:{type:"number"}},{value:"isEmpty",getApplyFilterFnV7:()=>e=>null==e,requiresFilterValue:!1},{value:"isNotEmpty",getApplyFilterFnV7:()=>e=>null!=e,requiresFilterValue:!1},{value:"isAnyOf",getApplyFilterFnV7:e=>Array.isArray(e.value)&&0!==e.value.length?g=>null!=g&&e.value.includes(Number(g)):null,InputComponent:rc,InputComponentProps:{type:"number"}}]),getApplyQuickFilterFn:dc(Cs),getApplyQuickFilterFnV7:Cs}),as=["item","applyValue","type","apiRef","focusElementRef","InputProps","isFilterActive","clearButton","tabIndex","disabled"];function is(e){var l,t;const{item:n,applyValue:o,type:I,apiRef:C,focusElementRef:r,InputProps:a,clearButton:i,tabIndex:c,disabled:s}=e,d=(0,Ge.Z)(e,as),u=Dr(),[A,m]=g.useState(null!=(l=n.value)?l:""),[b,p]=g.useState(!1),Z=(0,Se.Z)(),h=rI(),G=g.useCallback((e=>{const g=e.target.value;m(String(g)),p(!0),u.start(h.filterDebounceMs,(()=>{o((0,he.Z)({},n,{value:g})),p(!1)}))}),[o,n,h.filterDebounceMs,u]);return g.useEffect((()=>{var e;const g=null!=(e=n.value)?e:"";m(String(g))}),[n.value]),(0,we.jsx)(h.slots.baseTextField,(0,he.Z)({fullWidth:!0,id:Z,label:C.current.getLocaleText("filterPanelInputLabel"),placeholder:C.current.getLocaleText("filterPanelInputPlaceholder"),value:A,onChange:G,variant:"standard",type:I||"text",InputLabelProps:{shrink:!0},inputRef:r,InputProps:(0,he.Z)({},b||i?{endAdornment:b?(0,we.jsx)(h.slots.loadIcon,{fontSize:"small",color:"action"}):i}:{},{disabled:s},a,{inputProps:(0,he.Z)({max:"datetime-local"===I?"9999-12-31T23:59":"9999-12-31",tabIndex:c},null==a?void 0:a.inputProps)})},d,null==(t=h.slotProps)?void 0:t.baseTextField))}const cs=/(\d+)-(\d+)-(\d+)/,ss=/(\d+)-(\d+)-(\d+)T(\d+):(\d+)/;function ds(e,g,l,t){if(!e.value)return null;const[n,o,I,C,r]=e.value.match(l?ss:cs).slice(1).map(Number),a=new Date(n,o-1,I,C||0,r||0).getTime();return e=>{if(!e)return!1;if(t)return g(e.getTime(),a);const n=new Date(e).setHours(l?e.getHours():0,l?e.getMinutes():0,0,0);return g(n,a)}}const us=e=>sc([{value:"is",getApplyFilterFnV7:g=>ds(g,((e,g)=>e===g),e),InputComponent:is,InputComponentProps:{type:e?"datetime-local":"date"}},{value:"not",getApplyFilterFnV7:g=>ds(g,((e,g)=>e!==g),e),InputComponent:is,InputComponentProps:{type:e?"datetime-local":"date"}},{value:"after",getApplyFilterFnV7:g=>ds(g,((e,g)=>e>g),e),InputComponent:is,InputComponentProps:{type:e?"datetime-local":"date"}},{value:"onOrAfter",getApplyFilterFnV7:g=>ds(g,((e,g)=>e>=g),e),InputComponent:is,InputComponentProps:{type:e?"datetime-local":"date"}},{value:"before",getApplyFilterFnV7:g=>ds(g,((e,g)=>e<g),e,!e),InputComponent:is,InputComponentProps:{type:e?"datetime-local":"date"}},{value:"onOrBefore",getApplyFilterFnV7:g=>ds(g,((e,g)=>e<=g),e),InputComponent:is,InputComponentProps:{type:e?"datetime-local":"date"}},{value:"isEmpty",getApplyFilterFnV7:()=>e=>null==e,requiresFilterValue:!1},{value:"isNotEmpty",getApplyFilterFnV7:()=>e=>null!=e,requiresFilterValue:!1}]),As=["id","value","formattedValue","api","field","row","rowNode","colDef","cellMode","isEditable","tabIndex","hasFocus","inputProps","isValidating","isProcessingProps","onValueChange"],ms=(0,Ve.ZP)(pg)({fontSize:"inherit"});function bs(e){const{id:l,value:t,field:n,colDef:o,hasFocus:I,inputProps:C,onValueChange:r}=e,a=(0,Ge.Z)(e,As),i="dateTime"===o.type,c=Ar(),s=g.useRef(),d=g.useMemo((()=>{let e,g;return e=null==t?null:t instanceof Date?t:new Date((null!=t?t:"").toString()),g=null==e||Number.isNaN(e.getTime())?"":new Date(e.getTime()-60*e.getTimezoneOffset()*1e3).toISOString().substr(0,i?16:10),{parsed:e,formatted:g}}),[t,i]),[u,A]=g.useState(d),m=(e=>{const{classes:g}=e;return(0,Be.Z)({root:["editInputCell"]},Eo,g)})({classes:rI().classes}),b=g.useCallback((e=>{if(""===e)return null;const[g,l]=e.split("T"),[t,n,o]=g.split("-"),I=new Date;if(I.setFullYear(Number(t),Number(n)-1,Number(o)),I.setHours(0,0,0,0),l){const[e,g]=l.split(":");I.setHours(Number(e),Number(g),0,0)}return I}),[]),p=g.useCallback((async e=>{const g=e.target.value,t=b(g);r&&await r(e,t),A({parsed:t,formatted:g}),c.current.setEditCellValue({id:l,field:n,value:t},e)}),[c,n,l,r,b]);return g.useEffect((()=>{A((e=>{var g,l;return d.parsed!==e.parsed&&(null==(g=d.parsed)?void 0:g.getTime())!==(null==(l=e.parsed)?void 0:l.getTime())?d:e}))}),[d]),(0,Xe.Z)((()=>{I&&s.current.focus()}),[I]),(0,we.jsx)(ms,(0,he.Z)({inputRef:s,fullWidth:!0,className:m.root,type:i?"datetime-local":"date",inputProps:(0,he.Z)({max:i?"9999-12-31T23:59":"9999-12-31"},C),value:u.formatted,onChange:p},a))}const ps=e=>(0,we.jsx)(bs,(0,he.Z)({},e));function Zs({value:e,columnType:g,rowId:l,field:t}){if(!(e instanceof Date))throw new Error([`MUI: \`${g}\` column type only accepts \`Date\` objects as values.`,"Use `valueGetter` to transform the value into a `Date` object.",`Row ID: ${l}, field: "${t}".`].join("\n"))}const hs=(0,he.Z)({},Xc,{type:"date",sortComparator:Ur,valueFormatter:function({value:e,field:g,id:l}){return e?(Zs({value:e,columnType:"date",rowId:l,field:g}),e.toLocaleDateString()):""},filterOperators:us(),renderEditCell:ps,pastedValueParser:e=>new Date(e)}),Gs=(0,he.Z)({},Xc,{type:"dateTime",sortComparator:Ur,valueFormatter:function({value:e,field:g,id:l}){return e?(Zs({value:e,columnType:"dateTime",rowId:l,field:g}),e.toLocaleString()):""},filterOperators:us(!0),renderEditCell:ps,pastedValueParser:e=>new Date(e)});var ys=function(e){return e.enterKeyDown="enterKeyDown",e.cellDoubleClick="cellDoubleClick",e.printableKeyDown="printableKeyDown",e.deleteKeyDown="deleteKeyDown",e.pasteKeyDown="pasteKeyDown",e}(ys||{}),Bs=function(e){return e.cellFocusOut="cellFocusOut",e.escapeKeyDown="escapeKeyDown",e.enterKeyDown="enterKeyDown",e.tabKeyDown="tabKeyDown",e.shiftTabKeyDown="shiftTabKeyDown",e}(Bs||{}),Ss=function(e){return e.Cell="cell",e.Row="row",e}(Ss||{}),Vs=function(e){return e.Edit="edit",e.View="view",e}(Vs||{}),Ws=function(e){return e.Edit="edit",e.View="view",e}(Ws||{});function Rs(e){return"singleSelect"===(null==e?void 0:e.type)}function fs(e,g,l){if(void 0===g)return;const t=g.find((g=>{const t=l(g);return String(t)===String(e)}));return l(t)}const vs=["id","value","formattedValue","api","field","row","rowNode","colDef","cellMode","isEditable","tabIndex","className","hasFocus","isValidating","isProcessingProps","error","onValueChange","initialOpen","getOptionLabel","getOptionValue"],ks=["MenuProps"];function Xs(e){var l,t,n;const o=rI(),{id:I,value:C,field:r,row:a,colDef:i,hasFocus:c,error:s,onValueChange:d,initialOpen:u=o.editMode===Ss.Cell,getOptionLabel:A,getOptionValue:m}=e,b=(0,Ge.Z)(e,vs),p=Ar(),Z=g.useRef(),h=g.useRef(),[G,y]=g.useState(u),B=null!=(t=((null==(l=o.slotProps)?void 0:l.baseSelect)||{}).native)&&t,S=(null==(n=o.slotProps)?void 0:n.baseSelect)||{},{MenuProps:V}=S,W=(0,Ge.Z)(S,ks);if((0,Xe.Z)((()=>{var e;c&&(null==(e=h.current)||e.focus())}),[c]),!Rs(i))return null;let R;if(R="function"==typeof(null==i?void 0:i.valueOptions)?null==i?void 0:i.valueOptions({id:I,row:a,field:r}):null==i?void 0:i.valueOptions,!R)return null;const f=m||i.getOptionValue,v=A||i.getOptionLabel;return R&&i?(0,we.jsx)(o.slots.baseSelect,(0,he.Z)({ref:Z,inputRef:h,value:C,onChange:async e=>{if(!Rs(i)||!R)return;y(!1);const g=fs(e.target.value,R,f);d&&await d(e,g),await p.current.setEditCellValue({id:I,field:r,value:g},e)},open:G,onOpen:e=>{(function(e){return!!e.key})(e)&&"Enter"===e.key||y(!0)},MenuProps:(0,he.Z)({onClose:(e,g)=>{if(o.editMode!==Ss.Row){if("backdropClick"===g||ir(e.key)){const g=p.current.getCellParams(I,r);p.current.publishEvent("cellEditStop",(0,he.Z)({},g,{reason:ir(e.key)?Bs.escapeKeyDown:Bs.cellFocusOut}))}}else y(!1)}},V),error:s,native:B,fullWidth:!0},b,W,{children:R.map((e=>{var l;const t=f(e);return(0,g.createElement)(o.slots.baseSelectOption,(0,he.Z)({},(null==(l=o.slotProps)?void 0:l.baseSelectOption)||{},{native:B,key:t,value:t}),v(e))}))})):null}const Js=["item","applyValue","type","apiRef","focusElementRef","getOptionLabel","getOptionValue","placeholder","tabIndex","label","isFilterActive","clearButton","InputLabelProps"],ws=({column:{valueOptions:e,field:l},OptionComponent:t,getOptionLabel:n,getOptionValue:o,isSelectNative:I,baseSelectOptionProps:C})=>("function"==typeof e?["",...e({field:l})]:["",...e||[]]).map((e=>{const l=o(e),r=n(e);return(0,g.createElement)(t,(0,he.Z)({},C,{native:I,key:l,value:l}),r)})),Ys=(0,Ve.ZP)("div")({display:"flex",alignItems:"flex-end",width:"100%","& button":{margin:"auto 0px 5px 5px"}});function Hs(e){var l,t,n,o,I,C,r,a;const{item:i,applyValue:c,type:s,apiRef:d,focusElementRef:u,getOptionLabel:A,getOptionValue:m,placeholder:b,tabIndex:p,label:Z,clearButton:h}=e,G=(0,Ge.Z)(e,Js),[y,B]=g.useState(null!=(l=i.value)?l:""),S=(0,Se.Z)(),V=(0,Se.Z)(),W=rI(),R=null==(t=null==(n=W.slotProps)||null==(n=n.baseSelect)?void 0:n.native)||t;let f=null;if(i.field){const e=d.current.getColumn(i.field);Rs(e)&&(f=e)}const v=m||(null==(o=f)?void 0:o.getOptionValue),k=A||(null==(I=f)?void 0:I.getOptionLabel),X=g.useMemo((()=>{if(f)return"function"==typeof f.valueOptions?f.valueOptions({field:f.field}):f.valueOptions}),[f]),J=g.useCallback((e=>{let g=e.target.value;g=fs(g,X,v),B(String(g)),c((0,he.Z)({},i,{value:g}))}),[X,v,c,i]);if(g.useEffect((()=>{var e;let g;if(void 0!==X){if(g=fs(i.value,X,v),g!==i.value)return void c((0,he.Z)({},i,{value:g}))}else g=i.value;g=null!=(e=g)?e:"",B(String(g))}),[i,X,c,v]),!Rs(f))return null;if(!Rs(f))return null;const w=null!=Z?Z:d.current.getLocaleText("filterPanelInputLabel");return(0,we.jsxs)(Ys,{children:[(0,we.jsxs)(W.slots.baseFormControl,{children:[(0,we.jsx)(W.slots.baseInputLabel,(0,he.Z)({},null==(C=W.slotProps)?void 0:C.baseInputLabel,{id:V,htmlFor:S,shrink:!0,variant:"standard",children:w})),(0,we.jsx)(W.slots.baseSelect,(0,he.Z)({id:S,label:w,labelId:V,value:y,onChange:J,variant:"standard",type:s||"text",inputProps:{tabIndex:p,ref:u,placeholder:null!=b?b:d.current.getLocaleText("filterPanelInputPlaceholder")},native:R},G,null==(r=W.slotProps)?void 0:r.baseSelect,{children:ws({column:f,OptionComponent:W.slots.baseSelectOption,getOptionLabel:k,getOptionValue:v,isSelectNative:R,baseSelectOptionProps:null==(a=W.slotProps)?void 0:a.baseSelectOption})}))]}),h]})}const Fs=["item","applyValue","type","apiRef","focusElementRef","color","error","helperText","size","variant","getOptionLabel","getOptionValue"],Ns=$r();const Ks=e=>null!=e&&HC(e)?e.value:e,xs=(0,he.Z)({},Xc,{type:"singleSelect",getOptionLabel:e=>HC(e)?e.label:String(e),getOptionValue:e=>HC(e)?e.value:e,valueFormatter(e){const{id:g,field:l,value:t,api:n}=e,o=e.api.getColumn(l);if(!Rs(o))return"";let I;if(I="function"==typeof o.valueOptions?o.valueOptions({id:g,row:g?n.getRow(g):null,field:l}):o.valueOptions,null==t)return"";if(!I)return t;if("object"!=typeof I[0])return o.getOptionLabel(t);const C=I.find((e=>o.getOptionValue(e)===t));return C?o.getOptionLabel(C):""},renderEditCell:e=>(0,we.jsx)(Xs,(0,he.Z)({},e)),filterOperators:sc([{value:"is",getApplyFilterFnV7:e=>null==e.value||""===e.value?null:g=>Ks(g)===Ks(e.value),InputComponent:Hs},{value:"not",getApplyFilterFnV7:e=>null==e.value||""===e.value?null:g=>Ks(g)!==Ks(e.value),InputComponent:Hs},{value:"isAnyOf",getApplyFilterFnV7:e=>{if(!Array.isArray(e.value)||0===e.value.length)return null;const g=e.value.map(Ks);return e=>g.includes(Ks(e))},InputComponent:function(e){var l,t;const{item:n,applyValue:o,apiRef:I,focusElementRef:C,color:r,error:a,helperText:i,size:c,variant:s="standard",getOptionLabel:d,getOptionValue:u}=e,A=(0,Ge.Z)(e,Fs),m={color:r,error:a,helperText:i,size:c,variant:s},b=(0,Se.Z)(),p=rI();let Z=null;if(n.field){const e=I.current.getColumn(n.field);Rs(e)&&(Z=e)}const h=u||(null==(l=Z)?void 0:l.getOptionValue),G=d||(null==(t=Z)?void 0:t.getOptionLabel),y=g.useCallback(((e,g)=>h(e)===h(g)),[h]),B=g.useMemo((()=>{var e;return null!=(e=Z)&&e.valueOptions?"function"==typeof Z.valueOptions?Z.valueOptions({field:Z.field}):Z.valueOptions:[]}),[Z]),S=g.useMemo((()=>null==B?void 0:B.map(h)),[B,h]),V=g.useMemo((()=>Array.isArray(n.value)?void 0!==B?n.value.map((e=>null==S?void 0:S.findIndex((g=>g===e)))).filter((e=>e>=0)).map((e=>B[e])):n.value:[]),[n.value,B,S]);g.useEffect((()=>{Array.isArray(n.value)&&V.length===n.value.length||o((0,he.Z)({},n,{value:V.map(h)}))}),[n,V,o,h]);const W=g.useCallback(((e,g)=>{o((0,he.Z)({},n,{value:g.map(h)}))}),[o,n,h]);return(0,we.jsx)(Ic,(0,he.Z)({multiple:!0,options:B,isOptionEqualToValue:y,filterOptions:Ns,id:b,value:V,onChange:W,getOptionLabel:G,renderTags:(e,g)=>e.map(((e,l)=>(0,we.jsx)(p.slots.baseChip,(0,he.Z)({variant:"outlined",size:"small",label:G(e)},g({index:l}))))),renderInput:e=>{var g;return(0,we.jsx)(p.slots.baseTextField,(0,he.Z)({},e,{label:I.current.getLocaleText("filterPanelInputLabel"),placeholder:I.current.getLocaleText("filterPanelInputPlaceholder"),InputLabelProps:(0,he.Z)({},e.InputLabelProps,{shrink:!0}),inputRef:C,type:"singleSelect"},m,null==(g=p.slotProps)?void 0:g.baseTextField))}},A))}}]),pastedValueParser:(e,g)=>{const l=g.colDef,t=l.valueOptions,n="function"==typeof t?t({field:l.field}):t||[],o=l.getOptionValue;if(n.find((g=>o(g)===e)))return e}});function Ms(e){return e.substring(2).toLowerCase()}function zs(e){const{children:l,disableReactTree:t=!1,mouseEvent:n="onClick",onClickAway:o,touchEvent:I="onTouchEnd"}=e,C=g.useRef(!1),r=g.useRef(null),a=g.useRef(!1),i=g.useRef(!1);g.useEffect((()=>(setTimeout((()=>{a.current=!0}),0),()=>{a.current=!1})),[]);const c=(0,ve.Z)(l.ref,r),s=(0,et.Z)((e=>{const g=i.current;i.current=!1;const l=(0,_l.Z)(r.current);if(!a.current||!r.current||"clientX"in e&&function(e,g){return g.documentElement.clientWidth<e.clientX||g.documentElement.clientHeight<e.clientY}(e,l))return;if(C.current)return void(C.current=!1);let n;n=e.composedPath?e.composedPath().indexOf(r.current)>-1:!l.documentElement.contains(e.target)||r.current.contains(e.target),n||!t&&g||o(e)})),d=e=>g=>{i.current=!0;const t=l.props[e];t&&t(g)},u={ref:c};return!1!==I&&(u[I]=d(I)),g.useEffect((()=>{if(!1!==I){const e=Ms(I),g=(0,_l.Z)(r.current),l=()=>{C.current=!0};return g.addEventListener(e,s),g.addEventListener("touchmove",l),()=>{g.removeEventListener(e,s),g.removeEventListener("touchmove",l)}}}),[s,I]),!1!==n&&(u[n]=d(n)),g.useEffect((()=>{if(!1!==n){const e=Ms(n),g=(0,_l.Z)(r.current);return g.addEventListener(e,s),()=>{g.removeEventListener(e,s)}}}),[s,n]),(0,we.jsx)(g.Fragment,{children:g.cloneElement(l,u)})}const Es=["open","target","onClose","children","position","className","onExited"],Ls=e=>{const{classes:g}=e;return(0,Be.Z)({root:["menu"]},Eo,g)},Us=(0,Ve.ZP)(yi,{name:"MuiDataGrid",slot:"Menu",overridesResolver:(e,g)=>g.menu})((({theme:e})=>({zIndex:e.zIndex.modal,[`& .${Lo.menuList}`]:{outline:0}}))),Qs={"bottom-start":"top left","bottom-end":"top right"};function Ds(e){var l;const{open:t,target:n,onClose:o,children:I,position:C,className:r,onExited:a}=e,i=(0,Ge.Z)(e,Es),c=Ar(),s=rI(),d=Ls(s),u=g.useRef(null);(0,Xe.Z)((()=>{var e,g;t?u.current=document.activeElement instanceof HTMLElement?document.activeElement:null:(null==(e=u.current)||null==(g=e.focus)||g.call(e),u.current=null)}),[t]),g.useEffect((()=>{const e=t?"menuOpen":"menuClose";c.current.publishEvent(e,{target:n})}),[c,t,n]);const A=e=>{e.target&&(n===e.target||null!=n&&n.contains(e.target))||o(e)};return(0,we.jsx)(Us,(0,he.Z)({as:s.slots.basePopper,className:(0,ye.Z)(r,d.root),ownerState:s,open:t,anchorEl:n,transition:!0,placement:C},i,null==(l=s.slotProps)?void 0:l.basePopper,{children:({TransitionProps:e,placement:g})=>{return(0,we.jsx)(zs,{onClickAway:A,mouseEvent:"onMouseDown",children:(0,we.jsx)($l,(0,he.Z)({},e,{style:{transformOrigin:Qs[g]},onExited:(l=null==e?void 0:e.onExited,e=>{l&&l(),a&&a(e)}),children:(0,we.jsx)(Jt,{children:I})}))});var l}}))}const Ts=["api","colDef","id","hasFocus","isEditable","field","value","formattedValue","row","rowNode","cellMode","tabIndex","position","focusElementRef"];function Ps(e){var l;const{colDef:t,id:n,hasFocus:o,tabIndex:I,position:C="bottom-end",focusElementRef:r}=e,a=(0,Ge.Z)(e,Ts),[i,c]=g.useState(-1),[s,d]=g.useState(!1),u=Ar(),A=g.useRef(null),m=g.useRef(null),b=g.useRef(!1),p=g.useRef({}),Z=Ul(),h=(0,Se.Z)(),G=(0,Se.Z)(),y=rI();if(!(e=>"function"==typeof e.getActions)(t))throw new Error("MUI: Missing the `getActions` property in the `GridColDef`.");const B=t.getActions(u.current.getRowParams(n)),S=B.filter((e=>!e.props.showInMenu)),V=B.filter((e=>e.props.showInMenu)),W=S.length+(V.length?1:0);g.useLayoutEffect((()=>{o||Object.entries(p.current).forEach((([e,g])=>{null==g||g.stop({},(()=>{delete p.current[e]}))}))}),[o]),g.useEffect((()=>{i<0||!A.current||i>=A.current.children.length||A.current.children[i].focus({preventScroll:!0})}),[i]),g.useEffect((()=>{o||(c(-1),b.current=!1)}),[o]),g.useImperativeHandle(r,(()=>({focus(){if(!b.current){const e=B.findIndex((e=>!e.props.disabled));c(e)}}})),[B]),g.useEffect((()=>{i>=W&&c(W-1)}),[i,W]);const R=()=>{d(!1)},f=e=>g=>{p.current[e]=g},v=(e,g)=>l=>{c(e),b.current=!0,g&&g(l)};return(0,we.jsxs)("div",(0,he.Z)({role:"menu",ref:A,tabIndex:-1,className:Lo.actionsCell,onKeyDown:e=>{if(W<=1)return;const g=(e,l)=>{var t;if(e<0||e>B.length)return e;const n=("left"===l?-1:1)*("rtl"===Z.direction?-1:1);return null!=(t=B[e+n])&&t.props.disabled?g(e+n,l):e+n};let l=i;"ArrowRight"===e.key?l=g(i,"right"):"ArrowLeft"===e.key&&(l=g(i,"left")),l<0||l>=W||l!==i&&(e.preventDefault(),e.stopPropagation(),c(l))}},a,{children:[S.map(((e,l)=>g.cloneElement(e,{key:l,touchRippleRef:f(l),onClick:v(l,e.props.onClick),tabIndex:i===l?I:-1}))),V.length>0&&G&&(0,we.jsx)(y.slots.baseIconButton,(0,he.Z)({ref:m,id:G,"aria-label":u.current.getLocaleText("actionsCellMore"),"aria-haspopup":"menu","aria-expanded":s,"aria-controls":s?h:void 0,role:"menuitem",size:"small",onClick:()=>{d(!0),c(W-1),b.current=!0},touchRippleRef:f(G),tabIndex:i===S.length?I:-1},null==(l=y.slotProps)?void 0:l.baseIconButton,{children:(0,we.jsx)(y.slots.moreActionsIcon,{fontSize:"small"})})),V.length>0&&(0,we.jsx)(Ds,{open:s,target:m.current,position:C,onClose:R,onClick:R,children:(0,we.jsx)(kl,{id:h,className:Lo.menuList,onKeyDown:e=>{"Tab"===e.key&&e.preventDefault(),["Tab","Enter","Escape"].includes(e.key)&&R()},"aria-labelledby":G,variant:"menu",autoFocusItem:!0,children:V.map(((e,l)=>g.cloneElement(e,{key:l})))})})]}))}const js="actions",Os=(0,he.Z)({},Xc,{sortable:!1,filterable:!1,aggregable:!1,width:100,align:"center",headerAlign:"center",headerName:"",disableColumnMenu:!0,disableExport:!0,renderCell:e=>(0,we.jsx)(Ps,(0,he.Z)({},e)),getApplyQuickFilterFn:void 0,getApplyQuickFilterFnV7:void 0}),qs="__default__",$s=["maxWidth","minWidth","width","flex"],_s=(e,g)=>{const l={};let t=0,n=0;const o=[];e.orderedFields.forEach((g=>{const I=(0,he.Z)({},e.lookup[g]);if(!1===e.columnVisibilityModel[g])I.computedWidth=0;else{let e;I.flex&&I.flex>0?(t+=I.flex,e=0,o.push(I)):e=NC(I.width||Xc.width,I.minWidth||Xc.minWidth,I.maxWidth||Xc.maxWidth),n+=e,I.computedWidth=e}l[g]=I}));const I=Math.max(g-n,0);if(t>0&&g>0){const e=function({initialFreeSpace:e,totalFlexUnits:g,flexColumns:l}){const t=new Set(l.map((e=>e.field))),n={all:{},frozenFields:[],freeze:e=>{const g=n.all[e];g&&!0!==g.frozen&&(n.all[e].frozen=!0,n.frozenFields.push(e))}};return function o(){if(n.frozenFields.length===t.size)return;const I={min:{},max:{}};let C=e,r=g,a=0;n.frozenFields.forEach((e=>{C-=n.all[e].computedWidth,r-=n.all[e].flex}));for(let e=0;e<l.length;e+=1){const g=l[e];if(n.all[g.field]&&!0===n.all[g.field].frozen)continue;let t=C/r*g.flex;t<g.minWidth?(a+=g.minWidth-t,t=g.minWidth,I.min[g.field]=!0):t>g.maxWidth&&(a+=g.maxWidth-t,t=g.maxWidth,I.max[g.field]=!0),n.all[g.field]={frozen:!1,computedWidth:t,flex:g.flex}}a<0?Object.keys(I.max).forEach((e=>{n.freeze(e)})):a>0?Object.keys(I.min).forEach((e=>{n.freeze(e)})):l.forEach((({field:e})=>{n.freeze(e)})),o()}(),n.all}({initialFreeSpace:I,totalFlexUnits:t,flexColumns:o});Object.keys(e).forEach((g=>{l[g].computedWidth=e[g].computedWidth}))}return(0,he.Z)({},e,{lookup:l})};function ed(e,g){let l=e[qs];return g&&e[g]&&(l=e[g]),l}const gd=({apiRef:e,columnsToUpsert:g,initialState:l,columnTypes:t,columnVisibilityModel:n=WI(e),keepOnlyColumnsToUpsert:o=!1})=>{var I,C,r;const a=!e.current.state.columns;let i;if(a)i={orderedFields:[],lookup:{},columnVisibilityModel:n};else{const g=yI(e.current.state);i={orderedFields:o?[]:[...g.orderedFields],lookup:(0,he.Z)({},g.lookup),columnVisibilityModel:n}}let c={};o&&!a&&(c=Object.keys(i.lookup).reduce(((e,g)=>(0,he.Z)({},e,{[g]:!1})),{}));const s={};g.forEach((e=>{const{field:g}=e;s[g]=!0,c[g]=!0;let l=i.lookup[g];null==l?(l=(0,he.Z)({},ed(t,e.type),{field:g,hasBeenResized:!1}),i.orderedFields.push(g)):o&&i.orderedFields.push(g),l&&l.type!==e.type&&(l=(0,he.Z)({},ed(t,e.type),{field:g}));let n=l.hasBeenResized;$s.forEach((g=>{void 0!==e[g]&&(n=!0,-1===e[g]&&(e[g]=1/0))})),i.lookup[g]=(0,he.Z)({},l,e,{hasBeenResized:n})})),o&&!a&&Object.keys(i.lookup).forEach((e=>{c[e]||delete i.lookup[e]}));const d=((e,g)=>{if(!g)return e;const{orderedFields:l=[],dimensions:t={}}=g,n=Object.keys(t);if(0===n.length&&0===l.length)return e;const o={},I=[];for(let g=0;g<l.length;g+=1){const t=l[g];e.lookup[t]&&(o[t]=!0,I.push(t))}const C=0===I.length?e.orderedFields:[...I,...e.orderedFields.filter((e=>!o[e]))],r=(0,he.Z)({},e.lookup);for(let e=0;e<n.length;e+=1){const g=n[e],l=(0,he.Z)({},r[g],{hasBeenResized:!0});Object.entries(t[g]).forEach((([e,g])=>{l[e]=-1===g?1/0:g})),r[g]=l}return(0,he.Z)({},e,{orderedFields:C,lookup:r})})(e.current.unstable_applyPipeProcessors("hydrateColumns",i),l);return _s(d,null!=(I=null==(C=(r=e.current).getRootDimensions)||null==(C=C.call(r))?void 0:C.viewportInnerSize.width)?I:0)},ld=e=>g=>(0,he.Z)({},g,{columns:e});function td({firstColumnToRender:e,apiRef:g,firstRowToRender:l,lastRowToRender:t,visibleRows:n}){let o=e;for(let I=l;I<t;I+=1)if(n[I]){const l=n[I].id,t=g.current.unstable_getCellColSpanInfo(l,e);t&&t.spannedByColSpan&&(o=t.leftVisibleCellIndex)}return o}function nd({firstColumnIndex:e,minColumnIndex:g,columnBuffer:l,firstRowToRender:t,lastRowToRender:n,apiRef:o,visibleRows:I}){return td({firstColumnToRender:Math.max(e-l,g),apiRef:o,firstRowToRender:t,lastRowToRender:n,visibleRows:I})}function od(e,g){const l=GI(e),t=NI(e);return Math.floor(g*l)*((null!=t?t:0)+1)}var Id=function(e){return e.filters="filters",e.columns="columns",e}(Id||{});const Cd={string:Xc,number:rs,date:hs,dateTime:Gs,boolean:jc,singleSelect:xs,[js]:Os,[qs]:Xc},rd=(e,g,l)=>{var t,n,o,I;const C=gd({apiRef:l,columnTypes:Cd,columnsToUpsert:g.columns,initialState:null==(t=g.initialState)?void 0:t.columns,columnVisibilityModel:null!=(n=null!=(o=g.columnVisibilityModel)?o:null==(I=g.initialState)||null==(I=I.columns)?void 0:I.columnVisibilityModel)?n:{},keepOnlyColumnsToUpsert:!0});return(0,he.Z)({},e,{columns:C})},ad={compact:.7,comfortable:1.3,standard:1},id=(e,g)=>(0,he.Z)({},e,{density:{value:g.density,factor:ad[g.density]}}),cd=({apiRef:e,options:g})=>{const l=VI(e);return g.fields?g.fields.reduce(((e,g)=>{const t=l.find((e=>e.field===g));return t&&e.push(t),e}),[]):(g.allColumns?l:RI(e)).filter((e=>!e.disableExport))},sd=({apiRef:e})=>{var g,l;const t=AC(e),n=UI(e),o=e.current.getSelectedRows(),I=t.filter((e=>"footer"!==n[e].type)),C=jI(e),r=(null==C||null==(g=C.top)?void 0:g.map((e=>e.id)))||[],a=(null==C||null==(l=C.bottom)?void 0:l.map((e=>e.id)))||[];return I.unshift(...r),I.push(...a),o.size>0?I.filter((e=>o.has(e))):I};function dd(e){return(0,rg.Z)("MuiDivider",e)}const ud=(0,Cg.Z)("MuiDivider",["root","absolute","fullWidth","inset","middle","flexItem","light","vertical","withChildren","withChildrenVertical","textAlignRight","textAlignLeft","wrapper","wrapperVertical"]);function Ad(e){return(0,rg.Z)("MuiListItemIcon",e)}const md=(0,Cg.Z)("MuiListItemIcon",["root","alignItemsFlexStart"]);function bd(e){return(0,rg.Z)("MuiListItemText",e)}const pd=(0,Cg.Z)("MuiListItemText",["root","multiline","dense","inset","primary","secondary"]);function Zd(e){return(0,rg.Z)("MuiMenuItem",e)}const hd=(0,Cg.Z)("MuiMenuItem",["root","focusVisible","dense","disabled","divider","gutters","selected"]),Gd=["autoFocus","component","dense","divider","disableGutters","focusVisibleClassName","role","tabIndex","className"],yd=(0,Ve.ZP)(ro,{shouldForwardProp:e=>(0,Ve.FO)(e)||"classes"===e,name:"MuiMenuItem",slot:"Root",overridesResolver:(e,g)=>{const{ownerState:l}=e;return[g.root,l.dense&&g.dense,l.divider&&g.divider,!l.disableGutters&&g.gutters]}})((({theme:e,ownerState:g})=>(0,he.Z)({},e.typography.body1,{display:"flex",justifyContent:"flex-start",alignItems:"center",position:"relative",textDecoration:"none",minHeight:48,paddingTop:6,paddingBottom:6,boxSizing:"border-box",whiteSpace:"nowrap"},!g.disableGutters&&{paddingLeft:16,paddingRight:16},g.divider&&{borderBottom:`1px solid ${(e.vars||e).palette.divider}`,backgroundClip:"padding-box"},{"&:hover":{textDecoration:"none",backgroundColor:(e.vars||e).palette.action.hover,"@media (hover: none)":{backgroundColor:"transparent"}},[`&.${hd.selected}`]:{backgroundColor:e.vars?`rgba(${e.vars.palette.primary.mainChannel} / ${e.vars.palette.action.selectedOpacity})`:(0,Rt.Fq)(e.palette.primary.main,e.palette.action.selectedOpacity),[`&.${hd.focusVisible}`]:{backgroundColor:e.vars?`rgba(${e.vars.palette.primary.mainChannel} / calc(${e.vars.palette.action.selectedOpacity} + ${e.vars.palette.action.focusOpacity}))`:(0,Rt.Fq)(e.palette.primary.main,e.palette.action.selectedOpacity+e.palette.action.focusOpacity)}},[`&.${hd.selected}:hover`]:{backgroundColor:e.vars?`rgba(${e.vars.palette.primary.mainChannel} / calc(${e.vars.palette.action.selectedOpacity} + ${e.vars.palette.action.hoverOpacity}))`:(0,Rt.Fq)(e.palette.primary.main,e.palette.action.selectedOpacity+e.palette.action.hoverOpacity),"@media (hover: none)":{backgroundColor:e.vars?`rgba(${e.vars.palette.primary.mainChannel} / ${e.vars.palette.action.selectedOpacity})`:(0,Rt.Fq)(e.palette.primary.main,e.palette.action.selectedOpacity)}},[`&.${hd.focusVisible}`]:{backgroundColor:(e.vars||e).palette.action.focus},[`&.${hd.disabled}`]:{opacity:(e.vars||e).palette.action.disabledOpacity},[`& + .${ud.root}`]:{marginTop:e.spacing(1),marginBottom:e.spacing(1)},[`& + .${ud.inset}`]:{marginLeft:52},[`& .${pd.root}`]:{marginTop:0,marginBottom:0},[`& .${pd.inset}`]:{paddingLeft:36},[`& .${md.root}`]:{minWidth:36}},!g.dense&&{[e.breakpoints.up("sm")]:{minHeight:"auto"}},g.dense&&(0,he.Z)({minHeight:32,paddingTop:4,paddingBottom:4},e.typography.body2,{[`& .${md.root} svg`]:{fontSize:"1.25rem"}})))),Bd=g.forwardRef((function(e,l){const t=(0,We.Z)({props:e,name:"MuiMenuItem"}),{autoFocus:n=!1,component:o="li",dense:I=!1,divider:C=!1,disableGutters:r=!1,focusVisibleClassName:a,role:i="menuitem",tabIndex:c,className:s}=t,d=(0,Ge.Z)(t,Gd),u=g.useContext(pl),A=g.useMemo((()=>({dense:I||u.dense||!1,disableGutters:r})),[u.dense,I,r]),m=g.useRef(null);(0,Qe.Z)((()=>{n&&m.current&&m.current.focus()}),[n]);const b=(0,he.Z)({},t,{dense:A.dense,divider:C,disableGutters:r}),p=(e=>{const{disabled:g,dense:l,divider:t,disableGutters:n,selected:o,classes:I}=e,C={root:["root",l&&"dense",g&&"disabled",!n&&"gutters",t&&"divider",o&&"selected"]},r=(0,Be.Z)(C,Zd,I);return(0,he.Z)({},I,r)})(t),Z=(0,Ue.Z)(m,l);let h;return t.disabled||(h=void 0!==c?c:-1),(0,we.jsx)(pl.Provider,{value:A,children:(0,we.jsx)(yd,(0,he.Z)({ref:Z,role:i,tabIndex:h,component:o,focusVisibleClassName:(0,ye.Z)(p.focusVisible,a),className:(0,ye.Z)(p.root,s)},d,{ownerState:b,classes:p}))})})),Sd=["hideMenu","options"],Vd=["hideMenu","options"];function Wd(e){const g=Ar(),{hideMenu:l,options:t}=e,n=(0,Ge.Z)(e,Sd);return(0,we.jsx)(Bd,(0,he.Z)({onClick:()=>{g.current.exportDataAsCsv(t),null==l||l()}},n,{children:g.current.getLocaleText("toolbarExportCSV")}))}function Rd(e){const g=Ar(),{hideMenu:l,options:t}=e,n=(0,Ge.Z)(e,Vd);return(0,we.jsx)(Bd,(0,he.Z)({onClick:()=>{g.current.exportDataAsPrint(t),null==l||l()}},n,{children:g.current.getLocaleText("toolbarExportPrint")}))}const fd=(e,l)=>{const t=ar(e,"useGridCsvExport"),n=l.unstable_ignoreValueFormatterDuringExport,o=("object"==typeof n?null==n?void 0:n.csvExport:n)||!1,I=g.useCallback(((g={})=>{var l,n,I;return t.debug("Get data as CSV"),function(e){const{columns:g,rowIds:l,delimiterCharacter:t,includeHeaders:n,includeColumnGroupsHeaders:o,ignoreValueFormatter:I,apiRef:C}=e,r=l.reduce(((e,l)=>`${e}${(({id:e,columns:g,getCellParams:l,delimiterCharacter:t,ignoreValueFormatter:n})=>{const o=new es({delimiterCharacter:t});return g.forEach((g=>{const I=l(e,g.field);o.addValue(_c(I,{delimiterCharacter:t,ignoreValueFormatter:n}))})),o.getRowString()})({id:l,columns:g,getCellParams:C.current.getCellParams,delimiterCharacter:t,ignoreValueFormatter:I})}\r\n`),"").trim();if(!n)return r;const a=g.filter((e=>e.field!==qc.field)),i=[];if(o){const e=C.current.unstable_getAllGroupDetails();let g=0;const l=a.reduce(((e,l)=>{const t=C.current.unstable_getColumnGroupPath(l.field);return e[l.field]=t,g=Math.max(g,t.length),e}),{});for(let n=0;n<g;n+=1){const g=new es({delimiterCharacter:t,sanitizeCellValue:$c});i.push(g),a.forEach((t=>{const o=(l[t.field]||[])[n],I=e[o];g.addValue(I?I.headerName||I.groupId:"")}))}}const c=new es({delimiterCharacter:t,sanitizeCellValue:$c});return a.forEach((e=>{c.addValue(e.headerName||e.field)})),i.push(c),`${i.map((e=>e.getRowString())).join("\r\n")}\r\n${r}`.trim()}({columns:cd({apiRef:e,options:g}),rowIds:(null!=(l=g.getRowsToExport)?l:sd)({apiRef:e}),delimiterCharacter:g.delimiter||",",includeHeaders:null==(n=g.includeHeaders)||n,includeColumnGroupsHeaders:null==(I=g.includeColumnGroupsHeaders)||I,ignoreValueFormatter:o,apiRef:e})}),[t,e,o]),C=g.useCallback((e=>{t.debug("Export data as CSV");const g=I(e);!function(e,g="csv",l=document.title||"untitled"){const t=`${l}.${g}`;if("download"in HTMLAnchorElement.prototype){const g=URL.createObjectURL(e),l=document.createElement("a");return l.href=g,l.download=t,l.click(),void setTimeout((()=>{URL.revokeObjectURL(g)}))}throw new Error("MUI: exportAs not supported")}(new Blob([null!=e&&e.utf8WithBom?new Uint8Array([239,187,191]):"",g],{type:"text/csv"}),"csv",null==e?void 0:e.fileName)}),[t,I]);MC(e,{getDataAsCsv:I,exportDataAsCsv:C},"public");const r=g.useCallback(((e,g)=>{var l;return null!=(l=g.csvOptions)&&l.disableToolbarButton?e:[...e,{component:(0,we.jsx)(Wd,{options:g.csvOptions}),componentName:"csvExport"}]}),[]);ns(e,"exportMenu",r)},vd=e=>e.rowsMeta,kd=(e,g)=>{var l,t;const n=(0,he.Z)({},Br(g.autoPageSize),null!=(l=g.paginationModel)?l:null==(t=g.initialState)||null==(t=t.pagination)?void 0:t.paginationModel);return Sr(n.pageSize,g.signature),(0,he.Z)({},e,{pagination:{paginationModel:n}})},Xd=(e,g,l)=>t=>{var n;let o=t.paginationModel;const I=null!=(n=null==l?void 0:l.pageSize)?n:o.pageSize,C=yr(e,I);!l||(null==l?void 0:l.page)===o.page&&(null==l?void 0:l.pageSize)===o.pageSize||(o=l);const r=((e,g=0)=>0===g?e:Math.max(Math.min(e,g-1),0))(o.page,C);return r!==o.page&&(o=(0,he.Z)({},o,{page:r})),Sr(o.pageSize,g),{paginationModel:o}},Jd=(e,l,t,n)=>{const o=g.useCallback((()=>{e.current.registerStrategyProcessor(l,t,n)}),[e,n,t,l]);ts((()=>{o()}));const I=g.useRef(!0);g.useEffect((()=>{I.current?I.current=!1:o()}),[o])},wd=(e,g,l)=>{var t,n,o;const I=null!=(t=null!=(n=g.filterModel)?n:null==(o=g.initialState)||null==(o=o.filter)?void 0:o.filterModel)?t:Ac();return(0,he.Z)({},e,{filter:{filterModel:Bc(I,g.disableMultipleColumnsFiltering,l),filteredRowsLookup:{},filteredDescendantCountLookup:{}},visibleRowsLookup:{}})},Yd=e=>e.filteredRowsLookup;function Hd(e,g){return e.current.applyStrategyProcessor("visibleRowsLookupCreation",{tree:g.rows.tree,filteredRowsLookup:g.filter.filteredRowsLookup})}function Fd(){return cI(Object.values)}const Nd=(e,g)=>{let l,t;return g.pagination&&"client"===g.paginationMode?(t=vr(e),l=kr(e)):(l=sC(e),t=0===l.length?null:{firstRowIndex:0,lastRowIndex:l.length-1}),{rows:l,range:t}},Kd=(e,l)=>{const t=Nd(e,l);return g.useMemo((()=>({rows:t.rows,range:t.range})),[t.rows,t.range])},xd=e=>(0,he.Z)({},e,{focus:{cell:null,columnHeader:null,columnHeaderFilter:null,columnGroupHeader:null},tabIndex:{cell:null,columnHeader:null,columnHeaderFilter:null,columnGroupHeader:null}}),Md="__detail_panel_toggle__",zd=e=>e.headerFiltering,Ed=bI(zd,(e=>e.editing)),Ld=bI(zd,(e=>e.menuOpen));function Ud(e){return e.replace(/["\\]/g,"\\$&")}function Qd(e){return`.${Lo.row}[data-id="${Ud(String(e))}"]`}function Dd(e){return 1===e.target.nodeType&&!e.currentTarget.contains(e.target)}const Td=({currentColIndex:e,firstColIndex:g,lastColIndex:l,direction:t})=>{if("rtl"===t){if(e<l)return e+1}else if("ltr"===t&&e>g)return e-1;return null},Pd=({currentColIndex:e,firstColIndex:g,lastColIndex:l,direction:t})=>{if("rtl"===t){if(e>g)return e-1}else if("ltr"===t&&e<l)return e+1;return null},jd=e=>e.preferencePanel,Od=(e,g)=>{var l,t;return(0,he.Z)({},e,{preferencePanel:null!=(l=null==(t=g.initialState)?void 0:t.preferencePanel)?l:{open:!1}})},qd=e=>e.editRows,$d=["id","field"],_d=["id","field"],eu=qo(["MUI: A call to `processRowUpdate` threw an error which was not handled because `onProcessRowUpdateError` is missing.","To handle the error pass a callback to the `onProcessRowUpdateError` prop, e.g. `<DataGrid onProcessRowUpdateError={(error) => ...} />`.","For more detail, see http://mui.com/components/data-grid/editing/#server-side-persistence."],"error");var gu=function(e){return e.enterKeyDown="enterKeyDown",e.cellDoubleClick="cellDoubleClick",e.printableKeyDown="printableKeyDown",e.deleteKeyDown="deleteKeyDown",e}(gu||{}),lu=function(e){return e.rowFocusOut="rowFocusOut",e.escapeKeyDown="escapeKeyDown",e.enterKeyDown="enterKeyDown",e.tabKeyDown="tabKeyDown",e.shiftTabKeyDown="shiftTabKeyDown",e}(lu||{});const tu=["id"],nu=["id"],ou=qo(["MUI: A call to `processRowUpdate` threw an error which was not handled because `onProcessRowUpdateError` is missing.","To handle the error pass a callback to the `onProcessRowUpdateError` prop, e.g. `<DataGrid onProcessRowUpdateError={(error) => ...} />`.","For more detail, see http://mui.com/components/data-grid/editing/#server-side-persistence."],"error"),Iu=e=>(0,he.Z)({},e,{editRows:{}}),Cu=(e,g,l)=>(l.current.caches.rows=Hc({rows:g.rows,getRowId:g.getRowId,loading:g.loading,rowCount:g.rowCount}),(0,he.Z)({},e,{rows:Nc({apiRef:l,rowCountProp:g.rowCount,loadingProp:g.loading,previousTree:null,previousTreeDepths:null})})),ru=e=>"full"===e.updates.type?(e=>{const g={[Jc]:(0,he.Z)({},{type:"group",id:Jc,depth:-1,groupingField:null,groupingKey:null,isAutoGenerated:!0,children:[],childrenFromPath:{},childrenExpanded:!0,parent:null},{children:e})};for(let l=0;l<e.length;l+=1){const t=e[l];g[t]={id:t,depth:0,parent:Jc,type:"leaf",groupingKey:null}}return{groupingName:or,tree:g,treeDepths:{0:e.length},dataRowIds:e}})(e.updates.rows):(({previousTree:e,actions:g})=>{const l=(0,he.Z)({},e),t={};for(let e=0;e<g.remove.length;e+=1){const n=g.remove[e];t[n]=!0,delete l[n]}for(let e=0;e<g.insert.length;e+=1){const t=g.insert[e];l[t]={id:t,depth:0,parent:Jc,type:"leaf",groupingKey:null}}const n=l[Jc];let o=[...n.children,...g.insert];return Object.values(t).length&&(o=o.filter((e=>!t[e]))),l[Jc]=(0,he.Z)({},n,{children:o}),{groupingName:or,tree:l,treeDepths:{0:o.length},dataRowIds:o}})({previousTree:e.previousTree,actions:e.updates.actions});class au extends Error{}const iu=(e,g)=>null==e||Array.isArray(e)?e:g&&g[0]===e?g:[e],cu=(e,g)=>{var l;return(0,he.Z)({},e,{rowSelection:g.rowSelection&&null!=(l=iu(g.rowSelectionModel))?l:[]})},su=(e,g)=>{var l,t,n;const o=null!=(l=null!=(t=g.sortModel)?t:null==(n=g.initialState)||null==(n=n.sorting)?void 0:n.sortModel)?l:[];return(0,he.Z)({},e,{sorting:{sortModel:Kr(o,g.disableMultipleColumnsSorting),sortedRows:[]}})};function du(e){const{clientHeight:g,scrollTop:l,offsetHeight:t,offsetTop:n}=e,o=n+t;return t>g?n:o-g>l?o-g:n<l?n:void 0}const uu={noRowsLabel:"No rows",noResultsOverlayLabel:"No results found.",toolbarDensity:"Density",toolbarDensityLabel:"Density",toolbarDensityCompact:"Compact",toolbarDensityStandard:"Standard",toolbarDensityComfortable:"Comfortable",toolbarColumns:"Columns",toolbarColumnsLabel:"Select columns",toolbarFilters:"Filters",toolbarFiltersLabel:"Show filters",toolbarFiltersTooltipHide:"Hide filters",toolbarFiltersTooltipShow:"Show filters",toolbarFiltersTooltipActive:e=>1!==e?`${e} active filters`:`${e} active filter`,toolbarQuickFilterPlaceholder:"Search",toolbarQuickFilterLabel:"Search",toolbarQuickFilterDeleteIconLabel:"Clear",toolbarExport:"Export",toolbarExportLabel:"Export",toolbarExportCSV:"Download as CSV",toolbarExportPrint:"Print",toolbarExportExcel:"Download as Excel",columnsPanelTextFieldLabel:"Find column",columnsPanelTextFieldPlaceholder:"Column title",columnsPanelDragIconLabel:"Reorder column",columnsPanelShowAllButton:"Show all",columnsPanelHideAllButton:"Hide all",filterPanelAddFilter:"Add filter",filterPanelRemoveAll:"Remove all",filterPanelDeleteIconLabel:"Delete",filterPanelLogicOperator:"Logic operator",filterPanelOperator:"Operator",filterPanelOperatorAnd:"And",filterPanelOperatorOr:"Or",filterPanelColumns:"Columns",filterPanelInputLabel:"Value",filterPanelInputPlaceholder:"Filter value",filterOperatorContains:"contains",filterOperatorEquals:"equals",filterOperatorStartsWith:"starts with",filterOperatorEndsWith:"ends with",filterOperatorIs:"is",filterOperatorNot:"is not",filterOperatorAfter:"is after",filterOperatorOnOrAfter:"is on or after",filterOperatorBefore:"is before",filterOperatorOnOrBefore:"is on or before",filterOperatorIsEmpty:"is empty",filterOperatorIsNotEmpty:"is not empty",filterOperatorIsAnyOf:"is any of","filterOperator=":"=","filterOperator!=":"!=","filterOperator>":">","filterOperator>=":">=","filterOperator<":"<","filterOperator<=":"<=",headerFilterOperatorContains:"Contains",headerFilterOperatorEquals:"Equals",headerFilterOperatorStartsWith:"Starts with",headerFilterOperatorEndsWith:"Ends with",headerFilterOperatorIs:"Is",headerFilterOperatorNot:"Is not",headerFilterOperatorAfter:"Is after",headerFilterOperatorOnOrAfter:"Is on or after",headerFilterOperatorBefore:"Is before",headerFilterOperatorOnOrBefore:"Is on or before",headerFilterOperatorIsEmpty:"Is empty",headerFilterOperatorIsNotEmpty:"Is not empty",headerFilterOperatorIsAnyOf:"Is any of","headerFilterOperator=":"Equals","headerFilterOperator!=":"Not equals","headerFilterOperator>":"Greater than","headerFilterOperator>=":"Greater than or equal to","headerFilterOperator<":"Less than","headerFilterOperator<=":"Less than or equal to",filterValueAny:"any",filterValueTrue:"true",filterValueFalse:"false",columnMenuLabel:"Menu",columnMenuShowColumns:"Show columns",columnMenuManageColumns:"Manage columns",columnMenuFilter:"Filter",columnMenuHideColumn:"Hide column",columnMenuUnsort:"Unsort",columnMenuSortAsc:"Sort by ASC",columnMenuSortDesc:"Sort by DESC",columnHeaderFiltersTooltipActive:e=>1!==e?`${e} active filters`:`${e} active filter`,columnHeaderFiltersLabel:"Show filters",columnHeaderSortIconLabel:"Sort",footerRowSelected:e=>1!==e?`${e.toLocaleString()} rows selected`:`${e.toLocaleString()} row selected`,footerTotalRows:"Total Rows:",footerTotalVisibleRows:(e,g)=>`${e.toLocaleString()} of ${g.toLocaleString()}`,checkboxSelectionHeaderName:"Checkbox selection",checkboxSelectionSelectAllRows:"Select all rows",checkboxSelectionUnselectAllRows:"Unselect all rows",checkboxSelectionSelectRow:"Select row",checkboxSelectionUnselectRow:"Unselect row",booleanCellTrueLabel:"yes",booleanCellFalseLabel:"no",actionsCellMore:"more",pinToLeft:"Pin to left",pinToRight:"Pin to right",unpin:"Unpin",treeDataGroupingHeaderName:"Group",treeDataExpand:"see children",treeDataCollapse:"hide children",groupingColumnHeaderName:"Group",groupColumn:e=>`Group by ${e}`,unGroupColumn:e=>`Stop grouping by ${e}`,detailPanelToggle:"Detail panel toggle",expandDetailPanel:"Expand",collapseDetailPanel:"Collapse",MuiTablePagination:{},rowReorderingHeaderName:"Row reordering",aggregationMenuItemHeader:"Aggregation",aggregationFunctionLabelSum:"sum",aggregationFunctionLabelAvg:"avg",aggregationFunctionLabelMin:"min",aggregationFunctionLabelMax:"max",aggregationFunctionLabelSize:"size"};function Au(e){return(0,rg.Z)("MuiSkeleton",e)}(0,Cg.Z)("MuiSkeleton",["root","text","rectangular","rounded","circular","pulse","wave","withChildren","fitContent","heightAuto"]);const mu=["animation","className","component","height","style","variant","width"];let bu,pu,Zu,hu,Gu=e=>e;const yu=$e(bu||(bu=Gu`
  0% {
    opacity: 1;
  }

  50% {
    opacity: 0.4;
  }

  100% {
    opacity: 1;
  }
`)),Bu=$e(pu||(pu=Gu`
  0% {
    transform: translateX(-100%);
  }

  50% {
    /* +0.5s of delay between each loop */
    transform: translateX(100%);
  }

  100% {
    transform: translateX(100%);
  }
`)),Su=(0,Ve.ZP)("span",{name:"MuiSkeleton",slot:"Root",overridesResolver:(e,g)=>{const{ownerState:l}=e;return[g.root,g[l.variant],!1!==l.animation&&g[l.animation],l.hasChildren&&g.withChildren,l.hasChildren&&!l.width&&g.fitContent,l.hasChildren&&!l.height&&g.heightAuto]}})((({theme:e,ownerState:g})=>{const l=(o=e.shape.borderRadius,String(o).match(/[\d.\-+]*\s*(.*)/)[1]||""||"px"),t=(n=e.shape.borderRadius,parseFloat(n));var n,o;return(0,he.Z)({display:"block",backgroundColor:e.vars?e.vars.palette.Skeleton.bg:(0,Rt.Fq)(e.palette.text.primary,"light"===e.palette.mode?.11:.13),height:"1.2em"},"text"===g.variant&&{marginTop:0,marginBottom:0,height:"auto",transformOrigin:"0 55%",transform:"scale(1, 0.60)",borderRadius:`${t}${l}/${Math.round(t/.6*10)/10}${l}`,"&:empty:before":{content:'"\\00a0"'}},"circular"===g.variant&&{borderRadius:"50%"},"rounded"===g.variant&&{borderRadius:(e.vars||e).shape.borderRadius},g.hasChildren&&{"& > *":{visibility:"hidden"}},g.hasChildren&&!g.width&&{maxWidth:"fit-content"},g.hasChildren&&!g.height&&{height:"auto"})}),(({ownerState:e})=>"pulse"===e.animation&&qe(Zu||(Zu=Gu`
      animation: ${0} 2s ease-in-out 0.5s infinite;
    `),yu)),(({ownerState:e,theme:g})=>"wave"===e.animation&&qe(hu||(hu=Gu`
      position: relative;
      overflow: hidden;

      /* Fix bug in Safari https://bugs.webkit.org/show_bug.cgi?id=68196 */
      -webkit-mask-image: -webkit-radial-gradient(white, black);

      &::after {
        animation: ${0} 2s linear 0.5s infinite;
        background: linear-gradient(
          90deg,
          transparent,
          ${0},
          transparent
        );
        content: '';
        position: absolute;
        transform: translateX(-100%); /* Avoid flash during server-side hydration */
        bottom: 0;
        left: 0;
        right: 0;
        top: 0;
      }
    `),Bu,(g.vars||g).palette.action.hover))),Vu=g.forwardRef((function(e,g){const l=(0,We.Z)({props:e,name:"MuiSkeleton"}),{animation:t="pulse",className:n,component:o="span",height:I,style:C,variant:r="text",width:a}=l,i=(0,Ge.Z)(l,mu),c=(0,he.Z)({},l,{animation:t,component:o,variant:r,hasChildren:Boolean(i.children)}),s=(e=>{const{classes:g,variant:l,animation:t,hasChildren:n,width:o,height:I}=e,C={root:["root",l,t,n&&"withChildren",n&&!o&&"fitContent",n&&!I&&"heightAuto"]};return(0,Be.Z)(C,Au,g)})(c);return(0,we.jsx)(Su,(0,he.Z)({as:o,ref:g,className:(0,ye.Z)(s.root,n),ownerState:c},i,{style:(0,he.Z)({width:a,height:I},C)}))})),Wu=Vu,Ru=["field","align","width","contentWidth"];function fu(e){return(0,rg.Z)("MuiBadge",e)}const vu=(0,Cg.Z)("MuiBadge",["root","badge","dot","standard","anchorOriginTopRight","anchorOriginBottomRight","anchorOriginTopLeft","anchorOriginBottomLeft","invisible","colorError","colorInfo","colorPrimary","colorSecondary","colorSuccess","colorWarning","overlapRectangular","overlapCircular","anchorOriginTopLeftCircular","anchorOriginTopLeftRectangular","anchorOriginTopRightCircular","anchorOriginTopRightRectangular","anchorOriginBottomLeftCircular","anchorOriginBottomLeftRectangular","anchorOriginBottomRightCircular","anchorOriginBottomRightRectangular"]),ku=["anchorOrigin","className","classes","component","components","componentsProps","children","overlap","color","invisible","max","badgeContent","slots","slotProps","showZero","variant"],Xu=(0,Ve.ZP)("span",{name:"MuiBadge",slot:"Root",overridesResolver:(e,g)=>g.root})({position:"relative",display:"inline-flex",verticalAlign:"middle",flexShrink:0}),Ju=(0,Ve.ZP)("span",{name:"MuiBadge",slot:"Badge",overridesResolver:(e,g)=>{const{ownerState:l}=e;return[g.badge,g[l.variant],g[`anchorOrigin${(0,Le.Z)(l.anchorOrigin.vertical)}${(0,Le.Z)(l.anchorOrigin.horizontal)}${(0,Le.Z)(l.overlap)}`],"default"!==l.color&&g[`color${(0,Le.Z)(l.color)}`],l.invisible&&g.invisible]}})((({theme:e})=>{var g;return{display:"flex",flexDirection:"row",flexWrap:"wrap",justifyContent:"center",alignContent:"center",alignItems:"center",position:"absolute",boxSizing:"border-box",fontFamily:e.typography.fontFamily,fontWeight:e.typography.fontWeightMedium,fontSize:e.typography.pxToRem(12),minWidth:20,lineHeight:1,padding:"0 6px",height:20,borderRadius:10,zIndex:1,transition:e.transitions.create("transform",{easing:e.transitions.easing.easeInOut,duration:e.transitions.duration.enteringScreen}),variants:[...Object.keys((null!=(g=e.vars)?g:e).palette).filter((g=>{var l,t;return(null!=(l=e.vars)?l:e).palette[g].main&&(null!=(t=e.vars)?t:e).palette[g].contrastText})).map((g=>({props:{color:g},style:{backgroundColor:(e.vars||e).palette[g].main,color:(e.vars||e).palette[g].contrastText}}))),{props:{variant:"dot"},style:{borderRadius:4,height:8,minWidth:8,padding:0}},{props:({ownerState:e})=>"top"===e.anchorOrigin.vertical&&"right"===e.anchorOrigin.horizontal&&"rectangular"===e.overlap,style:{top:0,right:0,transform:"scale(1) translate(50%, -50%)",transformOrigin:"100% 0%",[`&.${vu.invisible}`]:{transform:"scale(0) translate(50%, -50%)"}}},{props:({ownerState:e})=>"bottom"===e.anchorOrigin.vertical&&"right"===e.anchorOrigin.horizontal&&"rectangular"===e.overlap,style:{bottom:0,right:0,transform:"scale(1) translate(50%, 50%)",transformOrigin:"100% 100%",[`&.${vu.invisible}`]:{transform:"scale(0) translate(50%, 50%)"}}},{props:({ownerState:e})=>"top"===e.anchorOrigin.vertical&&"left"===e.anchorOrigin.horizontal&&"rectangular"===e.overlap,style:{top:0,left:0,transform:"scale(1) translate(-50%, -50%)",transformOrigin:"0% 0%",[`&.${vu.invisible}`]:{transform:"scale(0) translate(-50%, -50%)"}}},{props:({ownerState:e})=>"bottom"===e.anchorOrigin.vertical&&"left"===e.anchorOrigin.horizontal&&"rectangular"===e.overlap,style:{bottom:0,left:0,transform:"scale(1) translate(-50%, 50%)",transformOrigin:"0% 100%",[`&.${vu.invisible}`]:{transform:"scale(0) translate(-50%, 50%)"}}},{props:({ownerState:e})=>"top"===e.anchorOrigin.vertical&&"right"===e.anchorOrigin.horizontal&&"circular"===e.overlap,style:{top:"14%",right:"14%",transform:"scale(1) translate(50%, -50%)",transformOrigin:"100% 0%",[`&.${vu.invisible}`]:{transform:"scale(0) translate(50%, -50%)"}}},{props:({ownerState:e})=>"bottom"===e.anchorOrigin.vertical&&"right"===e.anchorOrigin.horizontal&&"circular"===e.overlap,style:{bottom:"14%",right:"14%",transform:"scale(1) translate(50%, 50%)",transformOrigin:"100% 100%",[`&.${vu.invisible}`]:{transform:"scale(0) translate(50%, 50%)"}}},{props:({ownerState:e})=>"top"===e.anchorOrigin.vertical&&"left"===e.anchorOrigin.horizontal&&"circular"===e.overlap,style:{top:"14%",left:"14%",transform:"scale(1) translate(-50%, -50%)",transformOrigin:"0% 0%",[`&.${vu.invisible}`]:{transform:"scale(0) translate(-50%, -50%)"}}},{props:({ownerState:e})=>"bottom"===e.anchorOrigin.vertical&&"left"===e.anchorOrigin.horizontal&&"circular"===e.overlap,style:{bottom:"14%",left:"14%",transform:"scale(1) translate(-50%, 50%)",transformOrigin:"0% 100%",[`&.${vu.invisible}`]:{transform:"scale(0) translate(-50%, 50%)"}}},{props:{invisible:!0},style:{transition:e.transitions.create("transform",{easing:e.transitions.easing.easeInOut,duration:e.transitions.duration.leavingScreen})}}]}})),wu=g.forwardRef((function(e,g){var l,t,n,o,I,C;const r=(0,We.Z)({props:e,name:"MuiBadge"}),{anchorOrigin:a={vertical:"top",horizontal:"right"},className:i,component:c,components:s={},componentsProps:d={},children:u,overlap:A="rectangular",color:m="default",invisible:b=!1,max:p=99,badgeContent:Z,slots:h,slotProps:G,showZero:y=!1,variant:B="standard"}=r,S=(0,Ge.Z)(r,ku),{badgeContent:V,invisible:W,max:R,displayValue:f}=function(e){const{badgeContent:g,invisible:l=!1,max:t=99,showZero:n=!1}=e,o=Or({badgeContent:g,max:t});let I=l;!1!==l||0!==g||n||(I=!0);const{badgeContent:C,max:r=t}=I?o:e;return{badgeContent:C,invisible:I,max:r,displayValue:C&&Number(C)>r?`${r}+`:C}}({max:p,invisible:b,badgeContent:Z,showZero:y}),v=Or({anchorOrigin:a,color:m,overlap:A,variant:B,badgeContent:Z}),k=W||null==V&&"dot"!==B,{color:X=m,overlap:J=A,anchorOrigin:w=a,variant:Y=B}=k?v:r,H="dot"!==Y?f:void 0,F=(0,he.Z)({},r,{badgeContent:V,invisible:k,max:R,displayValue:H,showZero:y,anchorOrigin:w,color:X,overlap:J,variant:Y}),N=(e=>{const{color:g,anchorOrigin:l,invisible:t,overlap:n,variant:o,classes:I={}}=e,C={root:["root"],badge:["badge",o,t&&"invisible",`anchorOrigin${(0,Le.Z)(l.vertical)}${(0,Le.Z)(l.horizontal)}`,`anchorOrigin${(0,Le.Z)(l.vertical)}${(0,Le.Z)(l.horizontal)}${(0,Le.Z)(n)}`,`overlap${(0,Le.Z)(n)}`,"default"!==g&&`color${(0,Le.Z)(g)}`]};return(0,Be.Z)(C,fu,I)})(F),K=null!=(l=null!=(t=null==h?void 0:h.root)?t:s.Root)?l:Xu,x=null!=(n=null!=(o=null==h?void 0:h.badge)?o:s.Badge)?n:Ju,M=null!=(I=null==G?void 0:G.root)?I:d.root,z=null!=(C=null==G?void 0:G.badge)?C:d.badge,E=bl({elementType:K,externalSlotProps:M,externalForwardedProps:S,additionalProps:{ref:g,as:c},ownerState:F,className:(0,ye.Z)(null==M?void 0:M.className,N.root,i)}),L=bl({elementType:x,externalSlotProps:z,ownerState:F,className:(0,ye.Z)(N.badge,null==z?void 0:z.className)});return(0,we.jsxs)(K,(0,he.Z)({},E,{children:[u,(0,we.jsx)(x,(0,he.Z)({},L,{children:H}))]}))})),Yu=["className"],Hu=gC("div",{name:"MuiDataGrid",slot:"IconButtonContainer",overridesResolver:(e,g)=>g.iconButtonContainer})((()=>({display:"flex",visibility:"hidden",width:0}))),Fu=g.forwardRef((function(e,g){const{className:l}=e,t=(0,Ge.Z)(e,Yu),n=rI(),o=(e=>{const{classes:g}=e;return(0,Be.Z)({root:["iconButtonContainer"]},Eo,g)})(n);return(0,we.jsx)(Hu,(0,he.Z)({ref:g,className:(0,ye.Z)(o.root,l),ownerState:n},t))})),Nu=["className","selectedRowCount"],Ku=gC("div",{name:"MuiDataGrid",slot:"SelectedRowCount",overridesResolver:(e,g)=>g.selectedRowCount})((({theme:e})=>({alignItems:"center",display:"flex",margin:e.spacing(0,2),visibility:"hidden",width:0,height:0,[e.breakpoints.up("sm")]:{visibility:"visible",width:"auto",height:"auto"}}))),xu=g.forwardRef((function(e,g){const{className:l,selectedRowCount:t}=e,n=(0,Ge.Z)(e,Nu),o=Ar(),I=rI(),C=(e=>{const{classes:g}=e;return(0,Be.Z)({root:["selectedRowCount"]},Eo,g)})(I),r=o.current.getLocaleText("footerRowSelected")(t);return(0,we.jsx)(Ku,(0,he.Z)({ref:g,className:(0,ye.Z)(C.root,l),ownerState:I},n,{children:r}))})),Mu=["className"],zu=gC("div",{name:"MuiDataGrid",slot:"FooterContainer",overridesResolver:(e,g)=>g.footerContainer})({display:"flex",justifyContent:"space-between",alignItems:"center",minHeight:52,borderTop:"1px solid"}),Eu=g.forwardRef((function(e,g){const{className:l}=e,t=(0,Ge.Z)(e,Mu),n=rI(),o=(e=>{const{classes:g}=e;return(0,Be.Z)({root:["footerContainer","withBorderColor"]},Eo,g)})(n);return(0,we.jsx)(zu,(0,he.Z)({ref:g,className:(0,ye.Z)(o.root,l),ownerState:n},t))})),Lu=g.forwardRef((function(e,g){var l,t;const n=Ar(),o=rI(),I=nI(n,zI),C=nI(n,Zr),r=nI(n,pC),a=!o.hideFooterSelectedRowCount&&C>0?(0,we.jsx)(xu,{selectedRowCount:C}):(0,we.jsx)("div",{}),i=o.hideFooterRowCount||o.pagination?null:(0,we.jsx)(o.slots.footerRowCount,(0,he.Z)({},null==(l=o.slotProps)?void 0:l.footerRowCount,{rowCount:I,visibleRowCount:r})),c=o.pagination&&!o.hideFooterPagination&&o.slots.pagination&&(0,we.jsx)(o.slots.pagination,(0,he.Z)({},null==(t=o.slotProps)?void 0:t.pagination));return(0,we.jsxs)(Eu,(0,he.Z)({ref:g},e,{children:[a,i,c]}))})),Uu=["className","rowCount","visibleRowCount"],Qu=gC("div",{name:"MuiDataGrid",slot:"RowCount",overridesResolver:(e,g)=>g.rowCount})((({theme:e})=>({alignItems:"center",display:"flex",margin:e.spacing(0,2)}))),Du=g.forwardRef((function(e,g){const{className:l,rowCount:t,visibleRowCount:n}=e,o=(0,Ge.Z)(e,Uu),I=Ar(),C=rI(),r=(e=>{const{classes:g}=e;return(0,Be.Z)({root:["rowCount"]},Eo,g)})(C);if(0===t)return null;const a=n<t?I.current.getLocaleText("footerTotalVisibleRows")(n,t):t.toLocaleString();return(0,we.jsxs)(Qu,(0,he.Z)({ref:g,className:(0,ye.Z)(r.root,l),ownerState:C},o,{children:[I.current.getLocaleText("footerTotalRows")," ",a]}))})),Tu=g.forwardRef((function(e,g){var l,t,n;const o=Ar(),I=nI(o,VI),C=rI(),r=nI(o,jd),a=o.current.unstable_applyPipeProcessors("preferencePanel",null,null!=(l=r.openedPanelValue)?l:Id.filters);return(0,we.jsx)(C.slots.panel,(0,he.Z)({ref:g,as:C.slots.basePopper,open:I.length>0&&r.open,id:r.panelId,"aria-labelledby":r.labelId},null==(t=C.slotProps)?void 0:t.panel,e,null==(n=C.slotProps)?void 0:n.basePopper,{children:a}))}));function Pu(e){return(0,rg.Z)("MuiCircularProgress",e)}(0,Cg.Z)("MuiCircularProgress",["root","determinate","indeterminate","colorPrimary","colorSecondary","svg","circle","circleDeterminate","circleIndeterminate","circleDisableShrink"]);const ju=["className","color","disableShrink","size","style","thickness","value","variant"];let Ou,qu,$u,_u,eA=e=>e;const gA=$e(Ou||(Ou=eA`
  0% {
    transform: rotate(0deg);
  }

  100% {
    transform: rotate(360deg);
  }
`)),lA=$e(qu||(qu=eA`
  0% {
    stroke-dasharray: 1px, 200px;
    stroke-dashoffset: 0;
  }

  50% {
    stroke-dasharray: 100px, 200px;
    stroke-dashoffset: -15px;
  }

  100% {
    stroke-dasharray: 100px, 200px;
    stroke-dashoffset: -125px;
  }
`)),tA=(0,Ve.ZP)("span",{name:"MuiCircularProgress",slot:"Root",overridesResolver:(e,g)=>{const{ownerState:l}=e;return[g.root,g[l.variant],g[`color${(0,Le.Z)(l.color)}`]]}})((({ownerState:e,theme:g})=>(0,he.Z)({display:"inline-block"},"determinate"===e.variant&&{transition:g.transitions.create("transform")},"inherit"!==e.color&&{color:(g.vars||g).palette[e.color].main})),(({ownerState:e})=>"indeterminate"===e.variant&&qe($u||($u=eA`
      animation: ${0} 1.4s linear infinite;
    `),gA))),nA=(0,Ve.ZP)("svg",{name:"MuiCircularProgress",slot:"Svg",overridesResolver:(e,g)=>g.svg})({display:"block"}),oA=(0,Ve.ZP)("circle",{name:"MuiCircularProgress",slot:"Circle",overridesResolver:(e,g)=>{const{ownerState:l}=e;return[g.circle,g[`circle${(0,Le.Z)(l.variant)}`],l.disableShrink&&g.circleDisableShrink]}})((({ownerState:e,theme:g})=>(0,he.Z)({stroke:"currentColor"},"determinate"===e.variant&&{transition:g.transitions.create("stroke-dashoffset")},"indeterminate"===e.variant&&{strokeDasharray:"80px, 200px",strokeDashoffset:0})),(({ownerState:e})=>"indeterminate"===e.variant&&!e.disableShrink&&qe(_u||(_u=eA`
      animation: ${0} 1.4s ease-in-out infinite;
    `),lA))),IA=g.forwardRef((function(e,g){const l=(0,We.Z)({props:e,name:"MuiCircularProgress"}),{className:t,color:n="primary",disableShrink:o=!1,size:I=40,style:C,thickness:r=3.6,value:a=0,variant:i="indeterminate"}=l,c=(0,Ge.Z)(l,ju),s=(0,he.Z)({},l,{color:n,disableShrink:o,size:I,thickness:r,value:a,variant:i}),d=(e=>{const{classes:g,variant:l,color:t,disableShrink:n}=e,o={root:["root",l,`color${(0,Le.Z)(t)}`],svg:["svg"],circle:["circle",`circle${(0,Le.Z)(l)}`,n&&"circleDisableShrink"]};return(0,Be.Z)(o,Pu,g)})(s),u={},A={},m={};if("determinate"===i){const e=2*Math.PI*((44-r)/2);u.strokeDasharray=e.toFixed(3),m["aria-valuenow"]=Math.round(a),u.strokeDashoffset=`${((100-a)/100*e).toFixed(3)}px`,A.transform="rotate(-90deg)"}return(0,we.jsx)(tA,(0,he.Z)({className:(0,ye.Z)(d.root,t),style:(0,he.Z)({width:I,height:I},A,C),ownerState:s,ref:g,role:"progressbar"},m,c,{children:(0,we.jsx)(nA,{className:d.svg,ownerState:s,viewBox:"22 22 44 44",children:(0,we.jsx)(oA,{className:d.circle,style:u,ownerState:s,cx:44,cy:44,r:(44-r)/2,fill:"none",strokeWidth:r})})}))})),CA=IA,rA=["className"],aA=gC("div",{name:"MuiDataGrid",slot:"Overlay",overridesResolver:(e,g)=>g.overlay})({width:"100%",height:"100%",display:"flex",alignSelf:"center",alignItems:"center",justifyContent:"center",backgroundColor:"var(--unstable_DataGrid-overlayBackground)"}),iA=g.forwardRef((function(e,g){const{className:l}=e,t=(0,Ge.Z)(e,rA),n=rI(),o=(e=>{const{classes:g}=e;return(0,Be.Z)({root:["overlay"]},Eo,g)})(n);return(0,we.jsx)(aA,(0,he.Z)({ref:g,className:(0,ye.Z)(o.root,l),ownerState:n},t))})),cA=g.forwardRef((function(e,g){return(0,we.jsx)(iA,(0,he.Z)({ref:g},e,{children:(0,we.jsx)(CA,{})}))})),sA=g.forwardRef((function(e,g){const l=Ar().current.getLocaleText("noRowsLabel");return(0,we.jsx)(iA,(0,he.Z)({ref:g},e,{children:l}))})),dA=g.createContext(),uA=g.createContext();function AA(e){return(0,rg.Z)("MuiTableCell",e)}const mA=(0,Cg.Z)("MuiTableCell",["root","head","body","footer","sizeSmall","sizeMedium","paddingCheckbox","paddingNone","alignLeft","alignCenter","alignRight","alignJustify","stickyHeader"]),bA=["align","className","component","padding","scope","size","sortDirection","variant"],pA=(0,Ve.ZP)("td",{name:"MuiTableCell",slot:"Root",overridesResolver:(e,g)=>{const{ownerState:l}=e;return[g.root,g[l.variant],g[`size${(0,Le.Z)(l.size)}`],"normal"!==l.padding&&g[`padding${(0,Le.Z)(l.padding)}`],"inherit"!==l.align&&g[`align${(0,Le.Z)(l.align)}`],l.stickyHeader&&g.stickyHeader]}})((({theme:e,ownerState:g})=>(0,he.Z)({},e.typography.body2,{display:"table-cell",verticalAlign:"inherit",borderBottom:e.vars?`1px solid ${e.vars.palette.TableCell.border}`:`1px solid\n    ${"light"===e.palette.mode?(0,Rt.$n)((0,Rt.Fq)(e.palette.divider,1),.88):(0,Rt._j)((0,Rt.Fq)(e.palette.divider,1),.68)}`,textAlign:"left",padding:16},"head"===g.variant&&{color:(e.vars||e).palette.text.primary,lineHeight:e.typography.pxToRem(24),fontWeight:e.typography.fontWeightMedium},"body"===g.variant&&{color:(e.vars||e).palette.text.primary},"footer"===g.variant&&{color:(e.vars||e).palette.text.secondary,lineHeight:e.typography.pxToRem(21),fontSize:e.typography.pxToRem(12)},"small"===g.size&&{padding:"6px 16px",[`&.${mA.paddingCheckbox}`]:{width:24,padding:"0 12px 0 16px","& > *":{padding:0}}},"checkbox"===g.padding&&{width:48,padding:"0 0 0 4px"},"none"===g.padding&&{padding:0},"left"===g.align&&{textAlign:"left"},"center"===g.align&&{textAlign:"center"},"right"===g.align&&{textAlign:"right",flexDirection:"row-reverse"},"justify"===g.align&&{textAlign:"justify"},g.stickyHeader&&{position:"sticky",top:0,zIndex:2,backgroundColor:(e.vars||e).palette.background.default}))),ZA=g.forwardRef((function(e,l){const t=(0,We.Z)({props:e,name:"MuiTableCell"}),{align:n="inherit",className:o,component:I,padding:C,scope:r,size:a,sortDirection:i,variant:c}=t,s=(0,Ge.Z)(t,bA),d=g.useContext(dA),u=g.useContext(uA),A=u&&"head"===u.variant;let m;m=I||(A?"th":"td");let b=r;"td"===m?b=void 0:!b&&A&&(b="col");const p=c||u&&u.variant,Z=(0,he.Z)({},t,{align:n,component:m,padding:C||(d&&d.padding?d.padding:"normal"),size:a||(d&&d.size?d.size:"medium"),sortDirection:i,stickyHeader:"head"===p&&d&&d.stickyHeader,variant:p}),h=(e=>{const{classes:g,variant:l,align:t,padding:n,size:o,stickyHeader:I}=e,C={root:["root",l,I&&"stickyHeader","inherit"!==t&&`align${(0,Le.Z)(t)}`,"normal"!==n&&`padding${(0,Le.Z)(n)}`,`size${(0,Le.Z)(o)}`]};return(0,Be.Z)(C,AA,g)})(Z);let G=null;return i&&(G="asc"===i?"ascending":"descending"),(0,we.jsx)(pA,(0,he.Z)({as:m,ref:l,className:(0,ye.Z)(h.root,o),"aria-sort":G,scope:b,ownerState:Z},s))}));function hA(e){return(0,rg.Z)("MuiToolbar",e)}(0,Cg.Z)("MuiToolbar",["root","gutters","regular","dense"]);const GA=["className","component","disableGutters","variant"],yA=(0,Ve.ZP)("div",{name:"MuiToolbar",slot:"Root",overridesResolver:(e,g)=>{const{ownerState:l}=e;return[g.root,!l.disableGutters&&g.gutters,g[l.variant]]}})((({theme:e,ownerState:g})=>(0,he.Z)({position:"relative",display:"flex",alignItems:"center"},!g.disableGutters&&{paddingLeft:e.spacing(2),paddingRight:e.spacing(2),[e.breakpoints.up("sm")]:{paddingLeft:e.spacing(3),paddingRight:e.spacing(3)}},"dense"===g.variant&&{minHeight:48})),(({theme:e,ownerState:g})=>"regular"===g.variant&&e.mixins.toolbar)),BA=g.forwardRef((function(e,g){const l=(0,We.Z)({props:e,name:"MuiToolbar"}),{className:t,component:n="div",disableGutters:o=!1,variant:I="regular"}=l,C=(0,Ge.Z)(l,GA),r=(0,he.Z)({},l,{component:n,disableGutters:o,variant:I}),a=(e=>{const{classes:g,disableGutters:l,variant:t}=e,n={root:["root",!l&&"gutters",t]};return(0,Be.Z)(n,hA,g)})(r);return(0,we.jsx)(yA,(0,he.Z)({as:n,className:(0,ye.Z)(a.root,t),ref:g,ownerState:r},C))})),SA=(0,hn.Z)((0,we.jsx)("path",{d:"M15.41 16.09l-4.58-4.59 4.58-4.59L14 5.5l-6 6 6 6z"}),"KeyboardArrowLeft"),VA=(0,hn.Z)((0,we.jsx)("path",{d:"M8.59 16.34l4.58-4.59-4.58-4.59L10 5.75l6 6-6 6z"}),"KeyboardArrowRight"),WA=(0,hn.Z)((0,we.jsx)("path",{d:"M5.59 7.41L10.18 12l-4.59 4.59L7 18l6-6-6-6zM16 6h2v12h-2z"}),"LastPage"),RA=(0,hn.Z)((0,we.jsx)("path",{d:"M18.41 16.59L13.82 12l4.59-4.59L17 6l-6 6 6 6zM6 6h2v12H6z"}),"FirstPage"),fA=["backIconButtonProps","count","disabled","getItemAriaLabel","nextIconButtonProps","onPageChange","page","rowsPerPage","showFirstButton","showLastButton","slots","slotProps"],vA=g.forwardRef((function(e,g){var l,t,n,o,I,C,r,a;const{backIconButtonProps:i,count:c,disabled:s=!1,getItemAriaLabel:d,nextIconButtonProps:u,onPageChange:A,page:m,rowsPerPage:b,showFirstButton:p,showLastButton:Z,slots:h={},slotProps:G={}}=e,y=(0,Ge.Z)(e,fA),B=Ul(),S=null!=(l=h.firstButton)?l:Ji,V=null!=(t=h.lastButton)?t:Ji,W=null!=(n=h.nextButton)?n:Ji,R=null!=(o=h.previousButton)?o:Ji,f=null!=(I=h.firstButtonIcon)?I:RA,v=null!=(C=h.lastButtonIcon)?C:WA,k=null!=(r=h.nextButtonIcon)?r:VA,X=null!=(a=h.previousButtonIcon)?a:SA,J="rtl"===B.direction?V:S,w="rtl"===B.direction?W:R,Y="rtl"===B.direction?R:W,H="rtl"===B.direction?S:V,F="rtl"===B.direction?G.lastButton:G.firstButton,N="rtl"===B.direction?G.nextButton:G.previousButton,K="rtl"===B.direction?G.previousButton:G.nextButton,x="rtl"===B.direction?G.firstButton:G.lastButton;return(0,we.jsxs)("div",(0,he.Z)({ref:g},y,{children:[p&&(0,we.jsx)(J,(0,he.Z)({onClick:e=>{A(e,0)},disabled:s||0===m,"aria-label":d("first",m),title:d("first",m)},F,{children:"rtl"===B.direction?(0,we.jsx)(v,(0,he.Z)({},G.lastButtonIcon)):(0,we.jsx)(f,(0,he.Z)({},G.firstButtonIcon))})),(0,we.jsx)(w,(0,he.Z)({onClick:e=>{A(e,m-1)},disabled:s||0===m,color:"inherit","aria-label":d("previous",m),title:d("previous",m)},null!=N?N:i,{children:"rtl"===B.direction?(0,we.jsx)(k,(0,he.Z)({},G.nextButtonIcon)):(0,we.jsx)(X,(0,he.Z)({},G.previousButtonIcon))})),(0,we.jsx)(Y,(0,he.Z)({onClick:e=>{A(e,m+1)},disabled:s||-1!==c&&m>=Math.ceil(c/b)-1,color:"inherit","aria-label":d("next",m),title:d("next",m)},null!=K?K:u,{children:"rtl"===B.direction?(0,we.jsx)(X,(0,he.Z)({},G.previousButtonIcon)):(0,we.jsx)(k,(0,he.Z)({},G.nextButtonIcon))})),Z&&(0,we.jsx)(H,(0,he.Z)({onClick:e=>{A(e,Math.max(0,Math.ceil(c/b)-1))},disabled:s||m>=Math.ceil(c/b)-1,"aria-label":d("last",m),title:d("last",m)},x,{children:"rtl"===B.direction?(0,we.jsx)(f,(0,he.Z)({},G.firstButtonIcon)):(0,we.jsx)(v,(0,he.Z)({},G.lastButtonIcon))}))]}))}));var kA=n(7909);function XA(e){return(0,rg.Z)("MuiTablePagination",e)}const JA=(0,Cg.Z)("MuiTablePagination",["root","toolbar","spacer","selectLabel","selectRoot","select","selectIcon","input","menuItem","displayedRows","actions"]);var wA;const YA=["ActionsComponent","backIconButtonProps","className","colSpan","component","count","disabled","getItemAriaLabel","labelDisplayedRows","labelRowsPerPage","nextIconButtonProps","onPageChange","onRowsPerPageChange","page","rowsPerPage","rowsPerPageOptions","SelectProps","showFirstButton","showLastButton","slotProps","slots"],HA=(0,Ve.ZP)(ZA,{name:"MuiTablePagination",slot:"Root",overridesResolver:(e,g)=>g.root})((({theme:e})=>({overflow:"auto",color:(e.vars||e).palette.text.primary,fontSize:e.typography.pxToRem(14),"&:last-child":{padding:0}}))),FA=(0,Ve.ZP)(BA,{name:"MuiTablePagination",slot:"Toolbar",overridesResolver:(e,g)=>(0,he.Z)({[`& .${JA.actions}`]:g.actions},g.toolbar)})((({theme:e})=>({minHeight:52,paddingRight:2,[`${e.breakpoints.up("xs")} and (orientation: landscape)`]:{minHeight:52},[e.breakpoints.up("sm")]:{minHeight:52,paddingRight:2},[`& .${JA.actions}`]:{flexShrink:0,marginLeft:20}}))),NA=(0,Ve.ZP)("div",{name:"MuiTablePagination",slot:"Spacer",overridesResolver:(e,g)=>g.spacer})({flex:"1 1 100%"}),KA=(0,Ve.ZP)("p",{name:"MuiTablePagination",slot:"SelectLabel",overridesResolver:(e,g)=>g.selectLabel})((({theme:e})=>(0,he.Z)({},e.typography.body2,{flexShrink:0}))),xA=(0,Ve.ZP)(vn,{name:"MuiTablePagination",slot:"Select",overridesResolver:(e,g)=>(0,he.Z)({[`& .${JA.selectIcon}`]:g.selectIcon,[`& .${JA.select}`]:g.select},g.input,g.selectRoot)})({color:"inherit",fontSize:"inherit",flexShrink:0,marginRight:32,marginLeft:8,[`& .${JA.select}`]:{paddingLeft:8,paddingRight:24,textAlign:"right",textAlignLast:"right"}}),MA=(0,Ve.ZP)(Bd,{name:"MuiTablePagination",slot:"MenuItem",overridesResolver:(e,g)=>g.menuItem})({}),zA=(0,Ve.ZP)("p",{name:"MuiTablePagination",slot:"DisplayedRows",overridesResolver:(e,g)=>g.displayedRows})((({theme:e})=>(0,he.Z)({},e.typography.body2,{flexShrink:0})));function EA({from:e,to:g,count:l}){return`${e}${g} of ${-1!==l?l:`more than ${g}`}`}function LA(e){return`Go to ${e} page`}const UA=g.forwardRef((function(e,l){var t;const n=(0,We.Z)({props:e,name:"MuiTablePagination"}),{ActionsComponent:o=vA,backIconButtonProps:I,className:C,colSpan:r,component:a=ZA,count:i,disabled:c=!1,getItemAriaLabel:s=LA,labelDisplayedRows:d=EA,labelRowsPerPage:u="Rows per page:",nextIconButtonProps:A,onPageChange:m,onRowsPerPageChange:b,page:p,rowsPerPage:Z,rowsPerPageOptions:h=[10,25,50,100],SelectProps:G={},showFirstButton:y=!1,showLastButton:B=!1,slotProps:S={},slots:V={}}=n,W=(0,Ge.Z)(n,YA),R=n,f=(e=>{const{classes:g}=e;return(0,Be.Z)({root:["root"],toolbar:["toolbar"],spacer:["spacer"],selectLabel:["selectLabel"],select:["select"],input:["input"],selectIcon:["selectIcon"],menuItem:["menuItem"],displayedRows:["displayedRows"],actions:["actions"]},XA,g)})(R),v=null!=(t=null==S?void 0:S.select)?t:G,k=v.native?"option":MA;let X;a!==ZA&&"td"!==a||(X=r||1e3);const J=(0,kA.Z)(v.id),w=(0,kA.Z)(v.labelId);return(0,we.jsx)(HA,(0,he.Z)({colSpan:X,ref:l,as:a,ownerState:R,className:(0,ye.Z)(f.root,C)},W,{children:(0,we.jsxs)(FA,{className:f.toolbar,children:[(0,we.jsx)(NA,{className:f.spacer}),h.length>1&&(0,we.jsx)(KA,{className:f.selectLabel,id:w,children:u}),h.length>1&&(0,we.jsx)(xA,(0,he.Z)({variant:"standard"},!v.variant&&{input:wA||(wA=(0,we.jsx)(pg,{}))},{value:Z,onChange:b,id:J,labelId:w},v,{classes:(0,he.Z)({},v.classes,{root:(0,ye.Z)(f.input,f.selectRoot,(v.classes||{}).root),select:(0,ye.Z)(f.select,(v.classes||{}).select),icon:(0,ye.Z)(f.selectIcon,(v.classes||{}).icon)}),disabled:c,children:h.map((e=>(0,g.createElement)(k,(0,he.Z)({},!xe(k)&&{ownerState:R},{className:f.menuItem,key:e.label?e.label:e,value:e.value?e.value:e}),e.label?e.label:e)))})),(0,we.jsx)(zA,{className:f.displayedRows,children:d({from:0===i?0:p*Z+1,to:-1===i?(p+1)*Z:-1===Z?i:Math.min(i,(p+1)*Z),count:-1===i?-1:i,page:p})}),(0,we.jsx)(o,{className:f.actions,backIconButtonProps:I,count:i,nextIconButtonProps:A,onPageChange:m,page:p,rowsPerPage:Z,showFirstButton:y,showLastButton:B,slotProps:S.actions,slots:V.actions,getItemAriaLabel:s,disabled:c})]})}))})),QA=(0,Ve.ZP)(UA)((({theme:e})=>({[`& .${JA.selectLabel}`]:{display:"none",[e.breakpoints.up("sm")]:{display:"block"}},[`& .${JA.input}`]:{display:"none",[e.breakpoints.up("sm")]:{display:"inline-flex"}}}))),DA=g.forwardRef((function(e,l){const t=Ar(),n=rI(),o=nI(t,Wr),I=nI(t,pC),C=g.useMemo((()=>{var e,g;return null!=(e=null!=(g=n.rowCount)?g:I)?e:0}),[n.rowCount,I]),r=g.useMemo((()=>Math.floor(C/(o.pageSize||1))),[C,o.pageSize]),a=g.useCallback((e=>{const g=Number(e.target.value);t.current.setPageSize(g)}),[t]),i=g.useCallback(((e,g)=>{t.current.setPage(g)}),[t]),c=(e=>{for(let g=0;g<n.pageSizeOptions.length;g+=1){const l=n.pageSizeOptions[g];if("number"==typeof l){if(l===e)return!0}else if(l.value===e)return!0}return!1})(o.pageSize)?n.pageSizeOptions:[];return(0,we.jsx)(QA,(0,he.Z)({ref:l,component:"div",count:C,page:o.page<=r?o.page:r,rowsPerPageOptions:c,rowsPerPage:o.pageSize,onPageChange:i,onRowsPerPageChange:a},t.current.getLocaleText("MuiTablePagination"),e))})),TA=["className"],PA=gC("div",{name:"MuiDataGrid",slot:"PanelContent",overridesResolver:(e,g)=>g.panelContent})({display:"flex",flexDirection:"column",overflow:"auto",flex:"1 1",maxHeight:400});function jA(e){const{className:g}=e,l=(0,Ge.Z)(e,TA),t=rI(),n=(e=>{const{classes:g}=e;return(0,Be.Z)({root:["panelContent"]},Eo,g)})(t);return(0,we.jsx)(PA,(0,he.Z)({className:(0,ye.Z)(g,n.root),ownerState:t},l))}const OA=["className"],qA=gC("div",{name:"MuiDataGrid",slot:"PanelFooter",overridesResolver:(e,g)=>g.panelFooter})((({theme:e})=>({padding:e.spacing(.5),display:"flex",justifyContent:"space-between"})));function $A(e){const{className:g}=e,l=(0,Ge.Z)(e,OA),t=rI(),n=(e=>{const{classes:g}=e;return(0,Be.Z)({root:["panelFooter"]},Eo,g)})(t);return(0,we.jsx)(qA,(0,he.Z)({className:(0,ye.Z)(g,n.root),ownerState:t},l))}const _A=["className","slotProps"],em=(0,Ve.ZP)("div",{name:"MuiDataGrid",slot:"PanelWrapper",overridesResolver:(e,g)=>g.panelWrapper})({display:"flex",flexDirection:"column",flex:1,"&:focus":{outline:0}}),gm=()=>!0,lm=g.forwardRef((function(e,g){const{className:l,slotProps:t={}}=e,n=(0,Ge.Z)(e,_A),o=rI(),I=(e=>{const{classes:g}=e;return(0,Be.Z)({root:["panelWrapper"]},Eo,g)})(o);return(0,we.jsx)(it,(0,he.Z)({open:!0,disableEnforceFocus:!0,isEnabled:gm},t.TrapFocus,{children:(0,we.jsx)(em,(0,he.Z)({ref:g,tabIndex:-1,className:(0,ye.Z)(l,I.root),ownerState:o},n))}))})),tm=["item","hasMultipleFilters","deleteFilter","applyFilterChanges","multiFilterOperator","showMultiFilterOperators","disableMultiFilterOperator","applyMultiFilterOperatorChanges","focusElementRef","logicOperators","columnsSort","filterColumns","deleteIconProps","logicOperatorInputProps","operatorInputProps","columnInputProps","valueInputProps","children"],nm=["InputComponentProps"],om=(0,Ve.ZP)("div",{name:"MuiDataGrid",slot:"FilterForm",overridesResolver:(e,g)=>g.filterForm})((({theme:e})=>({display:"flex",padding:e.spacing(1)}))),Im=(0,Ve.ZP)("div",{name:"MuiDataGrid",slot:"FilterFormDeleteIcon",overridesResolver:(e,g)=>g.filterFormDeleteIcon})((({theme:e})=>({flexShrink:0,justifyContent:"flex-end",marginRight:e.spacing(.5),marginBottom:e.spacing(.2)}))),Cm=(0,Ve.ZP)("div",{name:"MuiDataGrid",slot:"FilterFormLogicOperatorInput",overridesResolver:(e,g)=>g.filterFormLogicOperatorInput})({minWidth:55,marginRight:5,justifyContent:"end"}),rm=(0,Ve.ZP)("div",{name:"MuiDataGrid",slot:"FilterFormColumnInput",overridesResolver:(e,g)=>g.filterFormColumnInput})({width:150}),am=(0,Ve.ZP)("div",{name:"MuiDataGrid",slot:"FilterFormOperatorInput",overridesResolver:(e,g)=>g.filterFormOperatorInput})({width:120}),im=(0,Ve.ZP)("div",{name:"MuiDataGrid",slot:"FilterFormValueInput",overridesResolver:(e,g)=>g.filterFormValueInput})({width:190}),cm=e=>e.headerName||e.field,sm=new Intl.Collator,dm=g.forwardRef((function(e,l){var t,n,o,I,C,r,a,i,c,s;const{item:d,hasMultipleFilters:u,deleteFilter:A,applyFilterChanges:m,multiFilterOperator:b,showMultiFilterOperators:p,disableMultiFilterOperator:Z,applyMultiFilterOperatorChanges:h,focusElementRef:G,logicOperators:y=[uc.And,uc.Or],columnsSort:B,filterColumns:S,deleteIconProps:V={},logicOperatorInputProps:W={},operatorInputProps:R={},columnInputProps:f={},valueInputProps:v={}}=e,k=(0,Ge.Z)(e,tm),X=Ar(),J=nI(X,XI),w=nI(X,iC),Y=(0,Se.Z)(),H=(0,Se.Z)(),F=(0,Se.Z)(),N=(0,Se.Z)(),K=rI(),x=(e=>{const{classes:g}=e;return(0,Be.Z)({root:["filterForm"],deleteIcon:["filterFormDeleteIcon"],logicOperatorInput:["filterFormLogicOperatorInput"],columnInput:["filterFormColumnInput"],operatorInput:["filterFormOperatorInput"],valueInput:["filterFormValueInput"]},Eo,g)})(K),M=g.useRef(null),z=g.useRef(null),E=u&&y.length>0,L=(null==(t=K.slotProps)?void 0:t.baseFormControl)||{},U=null==(o=((null==(n=K.slotProps)?void 0:n.baseSelect)||{}).native)||o,Q=(null==(I=K.slotProps)?void 0:I.baseInputLabel)||{},D=(null==(C=K.slotProps)?void 0:C.baseSelectOption)||{},{InputComponentProps:T}=v,P=(0,Ge.Z)(v,nm),j=g.useMemo((()=>{if(void 0===S||"function"!=typeof S)return J;const e=S({field:d.field,columns:J,currentFilters:(null==w?void 0:w.items)||[]});return J.filter((g=>e.includes(g.field)))}),[S,null==w?void 0:w.items,J,d.field]),O=g.useMemo((()=>{switch(B){case"asc":return j.sort(((e,g)=>sm.compare(cm(e),cm(g))));case"desc":return j.sort(((e,g)=>-sm.compare(cm(e),cm(g))));default:return j}}),[j,B]),q=d.field?X.current.getColumn(d.field):null,$=g.useMemo((()=>{var e;return d.operator&&q?null==(e=q.filterOperators)?void 0:e.find((e=>e.value===d.operator)):null}),[d,q]),_=g.useCallback((e=>{const g=e.target.value,l=X.current.getColumn(g);if(l.field===q.field)return;const t=l.filterOperators.find((e=>e.value===d.operator))||l.filterOperators[0],n=!t.InputComponent||t.InputComponent!==(null==$?void 0:$.InputComponent)||l.type!==q.type;m((0,he.Z)({},d,{field:g,operator:t.value,value:n?void 0:d.value}))}),[X,m,d,q,$]),ee=g.useCallback((e=>{const g=e.target.value,l=null==q?void 0:q.filterOperators.find((e=>e.value===g)),t=!(null!=l&&l.InputComponent)||(null==l?void 0:l.InputComponent)!==(null==$?void 0:$.InputComponent);m((0,he.Z)({},d,{operator:g,value:t?void 0:d.value}))}),[m,d,q,$]),ge=g.useCallback((e=>{const g=e.target.value===uc.And.toString()?uc.And:uc.Or;h(g)}),[h]);return g.useImperativeHandle(G,(()=>({focus:()=>{var e;null!=$&&$.InputComponent?null==M||null==(e=M.current)||e.focus():z.current.focus()}})),[$]),(0,we.jsxs)(om,(0,he.Z)({ref:l,className:x.root,"data-id":d.id,ownerState:K},k,{children:[(0,we.jsx)(Im,(0,he.Z)({variant:"standard",as:K.slots.baseFormControl},L,V,{className:(0,ye.Z)(x.deleteIcon,L.className,V.className),ownerState:K,children:(0,we.jsx)(K.slots.baseIconButton,(0,he.Z)({"aria-label":X.current.getLocaleText("filterPanelDeleteIconLabel"),title:X.current.getLocaleText("filterPanelDeleteIconLabel"),onClick:()=>{K.disableMultipleColumnsFiltering?void 0===d.value?A(d):m((0,he.Z)({},d,{value:void 0})):A(d)},size:"small"},null==(r=K.slotProps)?void 0:r.baseIconButton,{children:(0,we.jsx)(K.slots.filterPanelDeleteIcon,{fontSize:"small"})}))})),(0,we.jsx)(Cm,(0,he.Z)({variant:"standard",as:K.slots.baseFormControl},L,W,{sx:(0,he.Z)({display:E?"flex":"none",visibility:p?"visible":"hidden"},L.sx||{},W.sx||{}),className:(0,ye.Z)(x.logicOperatorInput,L.className,W.className),ownerState:K,children:(0,we.jsx)(K.slots.baseSelect,(0,he.Z)({inputProps:{"aria-label":X.current.getLocaleText("filterPanelLogicOperator")},value:b,onChange:ge,disabled:!!Z||1===y.length,native:U},null==(a=K.slotProps)?void 0:a.baseSelect,{children:y.map((e=>(0,g.createElement)(K.slots.baseSelectOption,(0,he.Z)({},D,{native:U,key:e.toString(),value:e.toString()}),X.current.getLocaleText((e=>{switch(e){case uc.And:return"filterPanelOperatorAnd";case uc.Or:return"filterPanelOperatorOr";default:throw new Error("MUI: Invalid `logicOperator` property in the `GridFilterPanel`.")}})(e)))))}))})),(0,we.jsxs)(rm,(0,he.Z)({variant:"standard",as:K.slots.baseFormControl},L,f,{className:(0,ye.Z)(x.columnInput,L.className,f.className),ownerState:K,children:[(0,we.jsx)(K.slots.baseInputLabel,(0,he.Z)({},Q,{htmlFor:Y,id:H,children:X.current.getLocaleText("filterPanelColumns")})),(0,we.jsx)(K.slots.baseSelect,(0,he.Z)({labelId:H,id:Y,label:X.current.getLocaleText("filterPanelColumns"),value:d.field||"",onChange:_,native:U},null==(i=K.slotProps)?void 0:i.baseSelect,{children:O.map((e=>(0,g.createElement)(K.slots.baseSelectOption,(0,he.Z)({},D,{native:U,key:e.field,value:e.field}),cm(e))))}))]})),(0,we.jsxs)(am,(0,he.Z)({variant:"standard",as:K.slots.baseFormControl},L,R,{className:(0,ye.Z)(x.operatorInput,L.className,R.className),ownerState:K,children:[(0,we.jsx)(K.slots.baseInputLabel,(0,he.Z)({},Q,{htmlFor:F,id:N,children:X.current.getLocaleText("filterPanelOperator")})),(0,we.jsx)(K.slots.baseSelect,(0,he.Z)({labelId:N,label:X.current.getLocaleText("filterPanelOperator"),id:F,value:d.operator,onChange:ee,native:U,inputRef:z},null==(c=K.slotProps)?void 0:c.baseSelect,{children:null==q||null==(s=q.filterOperators)?void 0:s.map((e=>(0,g.createElement)(K.slots.baseSelectOption,(0,he.Z)({},D,{native:U,key:e.value,value:e.value}),e.label||X.current.getLocaleText(`filterOperator${(0,zo.Z)(e.value)}`))))}))]})),(0,we.jsx)(im,(0,he.Z)({variant:"standard",as:K.slots.baseFormControl},L,P,{className:(0,ye.Z)(x.valueInput,L.className,P.className),ownerState:K,children:null!=$&&$.InputComponent?(0,we.jsx)($.InputComponent,(0,he.Z)({apiRef:X,item:d,applyValue:m,focusElementRef:M},$.InputComponentProps,T)):null}))]}))})),um=["logicOperators","columnsSort","filterFormProps","getColumnForNewFilter","children","disableAddFilterButton","disableRemoveAllButton"],Am=e=>({field:e.field,operator:e.filterOperators[0].value,id:Math.round(1e5*Math.random())}),mm=g.forwardRef((function(e,l){var t,n;const o=Ar(),I=rI(),C=nI(o,iC),r=nI(o,XI),a=g.useRef(null),i=g.useRef(null),{logicOperators:c=[uc.And,uc.Or],columnsSort:s,filterFormProps:d,getColumnForNewFilter:u,disableAddFilterButton:A=!1,disableRemoveAllButton:m=!1}=e,b=(0,Ge.Z)(e,um),p=o.current.upsertFilterItem,Z=g.useCallback((e=>{o.current.setFilterLogicOperator(e)}),[o]),h=g.useCallback((()=>{let e;if(u&&"function"==typeof u){const g=u({currentFilters:(null==C?void 0:C.items)||[],columns:r});if(null===g)return null;e=r.find((({field:e})=>e===g))}else e=r.find((e=>{var g;return null==(g=e.filterOperators)?void 0:g.length}));return e?Am(e):null}),[null==C?void 0:C.items,r,u]),G=g.useCallback((()=>{if(void 0===u||"function"!=typeof u)return h();const e=C.items.length?C.items:[h()].filter(Boolean),g=u({currentFilters:e,columns:r});if(null===g)return null;const l=r.find((({field:e})=>e===g));return l?Am(l):null}),[C.items,r,u,h]),y=g.useMemo((()=>C.items.length?C.items:(i.current||(i.current=h()),i.current?[i.current]:[])),[C.items,h]),B=y.length>1,S=g.useCallback((e=>{const g=1===y.length;o.current.deleteFilterItem(e),g&&o.current.hideFilterPanel()}),[o,y.length]);return g.useEffect((()=>{c.length>0&&C.logicOperator&&!c.includes(C.logicOperator)&&Z(c[0])}),[c,Z,C.logicOperator]),g.useEffect((()=>{y.length>0&&a.current.focus()}),[y.length]),(0,we.jsxs)(lm,(0,he.Z)({ref:l},b,{children:[(0,we.jsx)(jA,{children:y.map(((e,g)=>(0,we.jsx)(dm,(0,he.Z)({item:e,applyFilterChanges:p,deleteFilter:S,hasMultipleFilters:B,showMultiFilterOperators:g>0,multiFilterOperator:C.logicOperator,disableMultiFilterOperator:1!==g,applyMultiFilterOperatorChanges:Z,focusElementRef:g===y.length-1?a:null,logicOperators:c,columnsSort:s},d),null==e.id?g:e.id)))}),I.disableMultipleColumnsFiltering||A&&m?null:(0,we.jsxs)($A,{children:[A?(0,we.jsx)("span",{}):(0,we.jsx)(I.slots.baseButton,(0,he.Z)({onClick:()=>{const e=G();e&&o.current.upsertFilterItems([...y,e])},startIcon:(0,we.jsx)(I.slots.filterPanelAddIcon,{})},null==(t=I.slotProps)?void 0:t.baseButton,{children:o.current.getLocaleText("filterPanelAddFilter")})),m?null:(0,we.jsx)(I.slots.baseButton,(0,he.Z)({onClick:()=>{1===y.length&&void 0===y[0].value&&(o.current.deleteFilterItem(y[0]),o.current.hideFilterPanel()),o.current.setFilterModel((0,he.Z)({},C,{items:[]}))},startIcon:(0,we.jsx)(I.slots.filterPanelRemoveAllIcon,{})},null==(n=I.slotProps)?void 0:n.baseButton,{children:o.current.getLocaleText("filterPanelRemoveAll")}))]})]}))}));function bm(e){return(0,rg.Z)("MuiSwitch",e)}const pm=(0,Cg.Z)("MuiSwitch",["root","edgeStart","edgeEnd","switchBase","colorPrimary","colorSecondary","sizeSmall","sizeMedium","checked","disabled","input","thumb","track"]);var Zm=n(7333),hm=n(8010);const Gm=["sx"];function ym(e){const{sx:g}=e,l=(0,Ge.Z)(e,Gm),{systemProps:t,otherProps:n}=(e=>{var g,l;const t={systemProps:{},otherProps:{}},n=null!=(g=null==e||null==(l=e.theme)?void 0:l.unstable_sxConfig)?g:hm.Z;return Object.keys(e).forEach((g=>{n[g]?t.systemProps[g]=e[g]:t.otherProps[g]=e[g]})),t})(l);let o;return o=Array.isArray(g)?[t,...g]:"function"==typeof g?(...e)=>{const l=g(...e);return(0,Re.P)(l)?(0,he.Z)({},t,l):t}:(0,he.Z)({},t,g),(0,he.Z)({},n,{sx:o})}var Bm=n(6268),Sm=n(5408),Vm=n(2605);const Wm=["component","direction","spacing","divider","children","className","useFlexGap"],Rm=(0,Bm.Z)(),fm=gC("div",{name:"MuiStack",slot:"Root",overridesResolver:(e,g)=>g.root});function vm(e){return(0,Zm.Z)({props:e,name:"MuiStack",defaultTheme:Rm})}function km(e,l){const t=g.Children.toArray(e).filter(Boolean);return t.reduce(((e,n,o)=>(e.push(n),o<t.length-1&&e.push(g.cloneElement(l,{key:`separator-${o}`})),e)),[])}const Xm=({ownerState:e,theme:g})=>{let l=(0,he.Z)({display:"flex",flexDirection:"column"},(0,Sm.k9)({theme:g},(0,Sm.P$)({values:e.direction,breakpoints:g.breakpoints.values}),(e=>({flexDirection:e}))));if(e.spacing){const t=(0,Vm.hB)(g),n=Object.keys(g.breakpoints.values).reduce(((g,l)=>(("object"==typeof e.spacing&&null!=e.spacing[l]||"object"==typeof e.direction&&null!=e.direction[l])&&(g[l]=!0),g)),{}),o=(0,Sm.P$)({values:e.direction,base:n}),I=(0,Sm.P$)({values:e.spacing,base:n});"object"==typeof o&&Object.keys(o).forEach(((e,g,l)=>{if(!o[e]){const t=g>0?o[l[g-1]]:"column";o[e]=t}}));const C=(g,l)=>{return e.useFlexGap?{gap:(0,Vm.NA)(t,g)}:{"& > :not(style):not(style)":{margin:0},"& > :not(style) ~ :not(style)":{[`margin${n=l?o[l]:e.direction,{row:"Left","row-reverse":"Right",column:"Top","column-reverse":"Bottom"}[n]}`]:(0,Vm.NA)(t,g)}};var n};l=(0,Re.Z)(l,(0,Sm.k9)({theme:g},I,C))}return l=(0,Sm.dt)(g.breakpoints,l),l},Jm=function(e={}){const{createStyledComponent:l=fm,useThemeProps:t=vm,componentName:n="MuiStack"}=e,o=l(Xm),I=g.forwardRef((function(e,g){const l=ym(t(e)),{component:I="div",direction:C="column",spacing:r=0,divider:a,children:i,className:c,useFlexGap:s=!1}=l,d=(0,Ge.Z)(l,Wm),u={direction:C,spacing:r,useFlexGap:s},A=(0,Be.Z)({root:["root"]},(e=>(0,rg.Z)(n,e)),{});return(0,we.jsx)(o,(0,he.Z)({as:I,ownerState:u,ref:g,className:(0,ye.Z)(A.root,c)},d,{children:a?km(i,a):i}))}));return I}({createStyledComponent:(0,Ve.ZP)("div",{name:"MuiStack",slot:"Root",overridesResolver:(e,g)=>g.root}),useThemeProps:e=>(0,We.Z)({props:e,name:"MuiStack"})}),wm=Jm;function Ym(e){return(0,rg.Z)("MuiTypography",e)}(0,Cg.Z)("MuiTypography",["root","h1","h2","h3","h4","h5","h6","subtitle1","subtitle2","body1","body2","inherit","button","caption","overline","alignLeft","alignRight","alignCenter","alignJustify","noWrap","gutterBottom","paragraph"]);const Hm=["align","className","component","gutterBottom","noWrap","paragraph","variant","variantMapping"],Fm=(0,Ve.ZP)("span",{name:"MuiTypography",slot:"Root",overridesResolver:(e,g)=>{const{ownerState:l}=e;return[g.root,l.variant&&g[l.variant],"inherit"!==l.align&&g[`align${(0,Le.Z)(l.align)}`],l.noWrap&&g.noWrap,l.gutterBottom&&g.gutterBottom,l.paragraph&&g.paragraph]}})((({theme:e,ownerState:g})=>(0,he.Z)({margin:0},"inherit"===g.variant&&{font:"inherit"},"inherit"!==g.variant&&e.typography[g.variant],"inherit"!==g.align&&{textAlign:g.align},g.noWrap&&{overflow:"hidden",textOverflow:"ellipsis",whiteSpace:"nowrap"},g.gutterBottom&&{marginBottom:"0.35em"},g.paragraph&&{marginBottom:16}))),Nm={h1:"h1",h2:"h2",h3:"h3",h4:"h4",h5:"h5",h6:"h6",subtitle1:"h6",subtitle2:"h6",body1:"p",body2:"p",inherit:"p"},Km={primary:"primary.main",textPrimary:"text.primary",secondary:"secondary.main",textSecondary:"text.secondary",error:"error.main"},xm=g.forwardRef((function(e,g){const l=(0,We.Z)({props:e,name:"MuiTypography"}),t=(e=>Km[e]||e)(l.color),n=ym((0,he.Z)({},l,{color:t})),{align:o="inherit",className:I,component:C,gutterBottom:r=!1,noWrap:a=!1,paragraph:i=!1,variant:c="body1",variantMapping:s=Nm}=n,d=(0,Ge.Z)(n,Hm),u=(0,he.Z)({},n,{align:o,color:t,className:I,component:C,gutterBottom:r,noWrap:a,paragraph:i,variant:c,variantMapping:s}),A=C||(i?"p":s[c]||Nm[c])||"span",m=(e=>{const{align:g,gutterBottom:l,noWrap:t,paragraph:n,variant:o,classes:I}=e,C={root:["root",o,"inherit"!==e.align&&`align${(0,Le.Z)(g)}`,l&&"gutterBottom",t&&"noWrap",n&&"paragraph"]};return(0,Be.Z)(C,Ym,I)})(u);return(0,we.jsx)(Fm,(0,he.Z)({as:A,ref:g,ownerState:u,className:(0,ye.Z)(m.root,I)},d))}));function Mm(e){return(0,rg.Z)("MuiFormControlLabel",e)}const zm=(0,Cg.Z)("MuiFormControlLabel",["root","labelPlacementStart","labelPlacementTop","labelPlacementBottom","disabled","label","error","required","asterisk"]),Em=["checked","className","componentsProps","control","disabled","disableTypography","inputRef","label","labelPlacement","name","onChange","required","slotProps","value"],Lm=(0,Ve.ZP)("label",{name:"MuiFormControlLabel",slot:"Root",overridesResolver:(e,g)=>{const{ownerState:l}=e;return[{[`& .${zm.label}`]:g.label},g.root,g[`labelPlacement${(0,Le.Z)(l.labelPlacement)}`]]}})((({theme:e,ownerState:g})=>(0,he.Z)({display:"inline-flex",alignItems:"center",cursor:"pointer",verticalAlign:"middle",WebkitTapHighlightColor:"transparent",marginLeft:-11,marginRight:16,[`&.${zm.disabled}`]:{cursor:"default"}},"start"===g.labelPlacement&&{flexDirection:"row-reverse",marginLeft:16,marginRight:-11},"top"===g.labelPlacement&&{flexDirection:"column-reverse",marginLeft:16},"bottom"===g.labelPlacement&&{flexDirection:"column",marginLeft:16},{[`& .${zm.label}`]:{[`&.${zm.disabled}`]:{color:(e.vars||e).palette.text.disabled}}}))),Um=(0,Ve.ZP)("span",{name:"MuiFormControlLabel",slot:"Asterisk",overridesResolver:(e,g)=>g.asterisk})((({theme:e})=>({[`&.${zm.error}`]:{color:(e.vars||e).palette.error.main}}))),Qm=g.forwardRef((function(e,l){var t,n;const o=(0,We.Z)({props:e,name:"MuiFormControlLabel"}),{className:I,componentsProps:C={},control:r,disabled:a,disableTypography:i,label:c,labelPlacement:s="end",required:d,slotProps:u={}}=o,A=(0,Ge.Z)(o,Em),m=Ee(),b=null!=(t=null!=a?a:r.props.disabled)?t:null==m?void 0:m.disabled,p=null!=d?d:r.props.required,Z={disabled:b,required:p};["checked","name","onChange","value","inputRef"].forEach((e=>{void 0===r.props[e]&&void 0!==o[e]&&(Z[e]=o[e])}));const h=Me({props:o,muiFormControl:m,states:["error"]}),G=(0,he.Z)({},o,{disabled:b,labelPlacement:s,required:p,error:h.error}),y=(e=>{const{classes:g,disabled:l,labelPlacement:t,error:n,required:o}=e,I={root:["root",l&&"disabled",`labelPlacement${(0,Le.Z)(t)}`,n&&"error",o&&"required"],label:["label",l&&"disabled"],asterisk:["asterisk",n&&"error"]};return(0,Be.Z)(I,Mm,g)})(G),B=null!=(n=u.typography)?n:C.typography;let S=c;return null==S||S.type===xm||i||(S=(0,we.jsx)(xm,(0,he.Z)({component:"span"},B,{className:(0,ye.Z)(y.label,null==B?void 0:B.className),children:S}))),(0,we.jsxs)(Lm,(0,he.Z)({className:(0,ye.Z)(y.root,I),ownerState:G,ref:l},A,{children:[g.cloneElement(r,Z),p?(0,we.jsxs)(wm,{display:"block",children:[S,(0,we.jsxs)(Um,{ownerState:G,"aria-hidden":!0,className:y.asterisk,children:["","*"]})]}):S]}))})),Dm=["className"],Tm=gC("div",{name:"MuiDataGrid",slot:"PanelHeader",overridesResolver:(e,g)=>g.panelHeader})((({theme:e})=>({padding:e.spacing(1)})));function Pm(e){const{className:g}=e,l=(0,Ge.Z)(e,Dm),t=rI(),n=(e=>{const{classes:g}=e;return(0,Be.Z)({root:["panelHeader"]},Eo,g)})(t);return(0,we.jsx)(Tm,(0,he.Z)({className:(0,ye.Z)(g,n.root),ownerState:t},l))}const jm=["sort","searchPredicate","autoFocusSearchField","disableHideAllButton","disableShowAllButton","getTogglableColumns"],Om=(0,Ve.ZP)("div",{name:"MuiDataGrid",slot:"ColumnsPanel",overridesResolver:(e,g)=>g.columnsPanel})({padding:"8px 0px 8px 8px"}),qm=(0,Ve.ZP)("div",{name:"MuiDataGrid",slot:"ColumnsPanelRow",overridesResolver:(e,g)=>g.columnsPanelRow})((({theme:e})=>({display:"flex",justifyContent:"space-between",padding:"1px 8px 1px 7px",[`& .${pm.root}`]:{marginRight:e.spacing(.5)}}))),$m=((0,Ve.ZP)(Ji)({justifyContent:"flex-end"}),new Intl.Collator),_m=(e,g)=>(e.headerName||e.field).toLowerCase().indexOf(g)>-1,eb=["children","className","classes"],gb=(0,Cg.Z)("MuiDataGrid",["panel","paper"]),lb=(0,Ve.ZP)(yi,{name:"MuiDataGrid",slot:"Panel",overridesResolver:(e,g)=>g.panel})((({theme:e})=>({zIndex:e.zIndex.modal}))),tb=(0,Ve.ZP)(Jt,{name:"MuiDataGrid",slot:"Paper",overridesResolver:(e,g)=>g.paper})((({theme:e})=>({backgroundColor:(e.vars||e).palette.background.paper,minWidth:300,maxHeight:450,display:"flex"}))),nb=g.forwardRef(((e,l)=>{const{children:t,className:n}=e,o=(0,Ge.Z)(e,eb),I=Ar(),C=rI(),r=gb,[a,i]=g.useState(!1),c=g.useCallback((()=>{I.current.hidePreferences()}),[I]),s=g.useCallback((e=>{ir(e.key)&&I.current.hidePreferences()}),[I]),d=g.useMemo((()=>[{name:"flip",enabled:!1},{name:"isPlaced",enabled:!0,phase:"main",fn:()=>{i(!0)},effect:()=>()=>{i(!1)}}]),[]),[u,A]=g.useState(null);return g.useEffect((()=>{var e;const g=null==(e=I.current.rootElementRef)||null==(e=e.current)?void 0:e.querySelector(`.${Lo.columnHeaders}`);g&&A(g)}),[I]),u?(0,we.jsx)(lb,(0,he.Z)({ref:l,placement:"bottom-start",className:(0,ye.Z)(n,r.panel),ownerState:C,anchorEl:u,modifiers:d},o,{children:(0,we.jsx)(zs,{mouseEvent:"onMouseUp",onClickAway:c,children:(0,we.jsx)(tb,{className:r.paper,ownerState:C,elevation:8,onKeyDown:s,children:a&&t})})})):null}));function ob(e){return g.memo(e,_o)}let Ib;const Cb=["changeReason","unstable_updateValueOnRender"],rb=["column","rowId","editCellState","align","children","colIndex","height","width","className","showRightBorder","extendRowFullWidth","row","colSpan","disableDragEvents","isNotVisible","onClick","onDoubleClick","onMouseDown","onMouseUp","onMouseOver","onKeyDown","onKeyUp","onDragEnter","onDragOver","style"],ab=["changeReason","unstable_updateValueOnRender"],ib={id:-1,field:"__unset__",row:{},rowNode:{id:-1,depth:0,type:"leaf",parent:-1,groupingKey:null},colDef:{type:"string",field:"__unset__",computedWidth:0},cellMode:Vs.View,hasFocus:!1,tabIndex:-1,value:null,formattedValue:"__unset__",isEditable:!1,api:{}},cb=ob(g.forwardRef(((e,l)=>{const{column:t,rowId:n,editCellState:o}=e,I=Ar(),C=rI(),r=t.field,a=nI(I,(()=>{try{const e=I.current.getCellParams(n,r);return e.api=I.current,e}catch(e){if(e instanceof au)return ib;throw e}}),lI),i=nI(I,(()=>I.current.unstable_applyPipeProcessors("isCellSelected",!1,{id:n,field:r})));if(a===ib)return null;const{cellMode:c,hasFocus:s,isEditable:d,value:u,formattedValue:A}=a,m="actions"===t.type,b="view"!==c&&d||m?-1:a.tabIndex,{classes:p,getCellClassName:Z}=C,h=I.current.unstable_applyPipeProcessors("cellClassName",[],{id:n,field:r});let G;if(t.cellClassName&&h.push("function"==typeof t.cellClassName?t.cellClassName(a):t.cellClassName),Z&&h.push(Z(a)),null==o&&t.renderCell&&(G=t.renderCell(a),h.push(Lo["cell--withRenderer"]),h.push(null==p?void 0:p["cell--withRenderer"])),null!=o&&t.renderEditCell){const e=I.current.getRowWithUpdatedValues(n,t.field),g=(0,Ge.Z)(o,Cb),l=(0,he.Z)({},a,{row:e},g);G=t.renderEditCell(l),h.push(Lo["cell--editing"]),h.push(null==p?void 0:p["cell--editing"])}const{slots:y}=C,B=y.cell,S=(0,he.Z)({},e,{ref:l,field:r,formattedValue:A,hasFocus:s,isEditable:d,isSelected:i,value:u,cellMode:c,children:G,tabIndex:b,className:(0,ye.Z)(h)});return g.createElement(B,S)}))),sb=g.forwardRef(((e,l)=>{var t,n,o,I;const{column:C,rowId:r,editCellState:a,align:i,colIndex:c,height:s,width:d,className:u,showRightBorder:A,colSpan:m,disableDragEvents:b,isNotVisible:p,onClick:Z,onDoubleClick:h,onMouseDown:G,onMouseUp:y,onMouseOver:B,onKeyDown:S,onKeyUp:V,onDragEnter:W,onDragOver:R,style:f}=e,v=(0,Ge.Z)(e,rb),k=Ar(),X=rI(),J=C.field,w=nI(k,(()=>{try{const e=k.current.getCellParams(r,J);return e.api=k.current,e}catch(e){if(e instanceof au)return ib;throw e}}),lI),Y=nI(k,(()=>k.current.unstable_applyPipeProcessors("isCellSelected",!1,{id:r,field:J}))),{cellMode:H,hasFocus:F,isEditable:N,value:K,formattedValue:x}=w,M="actions"===C.type&&(null==(t=(n=C).getActions)?void 0:t.call(n,k.current.getRowParams(r)).some((e=>!e.props.disabled))),z="view"!==H&&N||M?-1:w.tabIndex,{classes:E,getCellClassName:L}=X,U=k.current.unstable_applyPipeProcessors("cellClassName",[],{id:r,field:J});C.cellClassName&&U.push("function"==typeof C.cellClassName?C.cellClassName(w):C.cellClassName),L&&U.push(L(w));const Q=null==x?K:x,D=g.useRef(null),T=(0,ve.Z)(l,D),P=g.useRef(null),j=null!=(o=X.unstable_cellSelection)&&o,O=(e=>{const{align:g,showRightBorder:l,isEditable:t,isSelected:n,isSelectionMode:o,classes:I}=e,C={root:["cell",`cell--text${(0,zo.Z)(g)}`,t&&"cell--editable",n&&"selected",l&&"cell--withRightBorder",o&&!t&&"cell--selectionMode","withBorderColor"],content:["cellContent"]};return(0,Be.Z)(C,Eo,I)})({align:i,showRightBorder:A,isEditable:N,classes:X.classes,isSelected:Y,isSelectionMode:j}),q=g.useCallback((e=>g=>{const l=k.current.getCellParams(r,J||"");k.current.publishEvent(e,l,g),y&&y(g)}),[k,J,y,r]),$=g.useCallback((e=>g=>{const l=k.current.getCellParams(r,J||"");k.current.publishEvent(e,l,g),G&&G(g)}),[k,J,G,r]),_=g.useCallback(((e,g)=>l=>{if(!k.current.getRow(r))return;const t=k.current.getCellParams(r,J||"");k.current.publishEvent(e,t,l),g&&g(l)}),[k,J,r]),ee=g.useMemo((()=>p?(0,he.Z)({padding:0,opacity:0,width:0,border:0},f):(0,he.Z)({minWidth:d,maxWidth:d,minHeight:s,maxHeight:"auto"===s?"none":s},f)),[d,s,p,f]);if(g.useEffect((()=>{if(!F||H===Vs.Edit)return;const e=(0,_l.Z)(k.current.rootElementRef.current);if(D.current&&!D.current.contains(e.activeElement)){const e=D.current.querySelector('[tabindex="0"]'),g=P.current||e||D.current;if(void 0===Ib&&document.createElement("div").focus({get preventScroll(){return Ib=!0,!1}}),Ib)g.focus({preventScroll:!0});else{const e=k.current.getScrollPosition();g.focus(),k.current.scroll(e)}}}),[F,H,k]),w===ib)return null;let ge,le=v.onFocus;if(null==a&&C.renderCell&&(ge=C.renderCell(w),U.push(Lo["cell--withRenderer"]),U.push(null==E?void 0:E["cell--withRenderer"])),null!=a&&C.renderEditCell){const e=k.current.getRowWithUpdatedValues(r,C.field),g=(0,Ge.Z)(a,ab),l=(0,he.Z)({},w,{row:e},g);ge=C.renderEditCell(l),U.push(Lo["cell--editing"]),U.push(null==E?void 0:E["cell--editing"])}if(void 0===ge){const e=null==Q?void 0:Q.toString();ge=(0,we.jsx)("div",{className:O.content,title:e,role:"presentation",children:e})}g.isValidElement(ge)&&M&&(ge=g.cloneElement(ge,{focusElementRef:P}));const te=b?null:{onDragEnter:_("cellDragEnter",W),onDragOver:_("cellDragOver",R)},ne=null==(I=X.experimentalFeatures)?void 0:I.ariaV7;return(0,we.jsx)("div",(0,he.Z)({ref:T,className:(0,ye.Z)(u,U,O.root),role:ne?"gridcell":"cell","data-field":J,"data-colindex":c,"aria-colindex":c+1,"aria-colspan":m,style:ee,tabIndex:z,onClick:_("cellClick",Z),onDoubleClick:_("cellDoubleClick",h),onMouseOver:_("cellMouseOver",B),onMouseDown:$("cellMouseDown"),onMouseUp:q("cellMouseUp"),onKeyDown:_("cellKeyDown",S),onKeyUp:_("cellKeyUp",V)},te,v,{onFocus:le,children:ge}))})),db=ob(sb),ub=["selected","hovered","rowId","row","index","style","position","rowHeight","className","visibleColumns","renderedColumns","containerWidth","firstColumnToRender","lastColumnToRender","isLastVisible","focusedCellColumnIndexNotInRange","isNotVisible","focusedCell","tabbableCell","onClick","onDoubleClick","onMouseEnter","onMouseLeave","onMouseOut","onMouseOver"];function Ab({width:e}){if(!e)return null;const g={width:e};return(0,we.jsx)("div",{className:`${Lo.cell} ${Lo.withBorderColor}`,style:g})}const mb=g.forwardRef((function(e,l){const{selected:t,hovered:n,rowId:o,row:I,index:C,style:r,position:a,rowHeight:i,className:c,visibleColumns:s,renderedColumns:d,containerWidth:u,firstColumnToRender:A,isLastVisible:m=!1,focusedCellColumnIndexNotInRange:b,isNotVisible:p,focusedCell:Z,onClick:h,onDoubleClick:G,onMouseEnter:y,onMouseLeave:B,onMouseOut:S,onMouseOver:V}=e,W=(0,Ge.Z)(e,ub),R=Ar(),f=g.useRef(null),v=rI(),k=Kd(R,v),X=nI(R,kI),J=nI(R,CC),w=nI(R,TI),Y=nI(R,NI),H=nI(R,qd),F=(0,ve.Z)(f,l),N=C+Y+2,K=(e=>{const{editable:g,editing:l,selected:t,isLastVisible:n,rowHeight:o,classes:I}=e,C={root:["row",t&&"selected",g&&"row--editable",l&&"row--editing",n&&"row--lastVisible","auto"===o&&"row--dynamicHeight"]};return(0,Be.Z)(C,Eo,I)})({selected:t,hovered:n,isLastVisible:m,classes:v.classes,editing:R.current.getRowMode(o)===Ws.Edit,editable:v.editMode===Ss.Row,rowHeight:i});g.useLayoutEffect((()=>{"auto"===i&&f.current&&"undefined"==typeof ResizeObserver&&R.current.unstable_storeRowHeightMeasurement(o,f.current.clientHeight,a)}),[R,i,o,a]),g.useLayoutEffect((()=>{if(k.range){const e=R.current.getRowIndexRelativeToVisibleRows(o);null!=e&&R.current.unstable_setLastMeasuredRowIndex(e)}const e=f.current;if(!e||"auto"!==i||"undefined"==typeof ResizeObserver)return;const g=new ResizeObserver((e=>{const[g]=e,l=g.borderBoxSize&&g.borderBoxSize.length>0?g.borderBoxSize[0].blockSize:g.contentRect.height;R.current.unstable_storeRowHeightMeasurement(o,l,a)}));return g.observe(e),()=>g.disconnect()}),[R,k.range,C,i,o,a]);const x=g.useCallback(((e,g)=>l=>{Dd(l)||R.current.getRow(o)&&(R.current.publishEvent(e,R.current.getRowParams(o),l),g&&g(l))}),[R,o]),M=g.useCallback((e=>{const g=function(e,g){return e.closest(`.${g}`)}(e.target,Lo.cell),l=null==g?void 0:g.getAttribute("data-field");if(l){if(l===qc.field)return;if(l===Md)return;if("__reorder__"===l)return;if(R.current.getCellMode(o,l)===Vs.Edit)return;const e=R.current.getColumn(l);if((null==e?void 0:e.type)===js)return}x("rowClick",h)(e)}),[R,h,x,o]),{slots:z,slotProps:E,disableColumnReorder:L}=v,U=z.cell===db?db:cb,Q=v.rowReordering,D=(e,g)=>{var l,t;const n=L&&e.disableReorder||!Q&&!!J.length&&w>1&&Object.keys(H).length>0,I=null!=(l=null==(t=H[o])?void 0:t[e.field])?l:null;let C=!1;return void 0!==b&&s[b].field===e.field&&(C=!0),(0,we.jsx)(U,(0,he.Z)({column:e,width:g.width,rowId:o,height:i,showRightBorder:g.showRightBorder,align:e.align||"left",colIndex:g.indexRelativeToAllColumns,colSpan:g.colSpan,disableDragEvents:n,editCellState:I,isNotVisible:C},null==E?void 0:E.cell),e.field)},T=nI(R,(()=>(0,he.Z)({},R.current.unstable_getRowInternalSizes(o))),lI);let P=i;if("auto"===P&&T){let e=0;const g=Object.entries(T).reduce(((g,[l,t])=>/^base[A-Z]/.test(l)?(e+=1,t>g?t:g):g),0);g>0&&e>1&&(P=g)}const j=g.useMemo((()=>{if(p)return{opacity:0,width:0,height:0};const e=(0,he.Z)({},r,{maxHeight:"auto"===i?"none":i,minHeight:P});if(null!=T&&T.spacingTop&&(e["border"===v.rowSpacingType?"borderTopWidth":"marginTop"]=T.spacingTop),null!=T&&T.spacingBottom){const g="border"===v.rowSpacingType?"borderBottomWidth":"marginBottom";let l=e[g];"number"!=typeof l&&(l=parseInt(l||"0",10)),l+=T.spacingBottom,e[g]=l}return e}),[p,i,r,P,T,v.rowSpacingType]),O=R.current.unstable_applyPipeProcessors("rowClassName",[],o);if("function"==typeof v.getRowClassName){var q;const e=C-((null==(q=k.range)?void 0:q.firstRowIndex)||0),g=(0,he.Z)({},R.current.getRowParams(o),{isFirstVisible:0===e,isLastVisible:e===k.rows.length-1,indexRelativeToCurrentPage:e});O.push(v.getRowClassName(g))}const $=function(e,g,l){const t=(n=e,()=>{let e=n+=1831565813;return e=Math.imul(e^e>>>15,1|e),e^=e+Math.imul(e^e>>>7,61|e),((e^e>>>14)>>>0)/4294967296});var n;return()=>g+(l-g)*t()}(1e4,20,80),_=R.current.getRowNode(o);if(!_)return null;const ee=_.type,ge=[];for(let e=0;e<d.length;e+=1){const g=d[e];let l=A+e;void 0!==b&&Z&&(s[b].field===g.field?l=b:l-=1);const t=R.current.unstable_getCellColSpanInfo(o,l);if(t&&!t.spannedByColSpan)if("skeletonRow"!==ee){const{colSpan:e,width:n}=t.cellProps,o={width:n,colSpan:e,showRightBorder:v.showCellVerticalBorder,indexRelativeToAllColumns:l};ge.push(D(g,o))}else{const{width:e}=t.cellProps,l=Math.round($());ge.push((0,we.jsx)(z.skeletonCell,{width:e,contentWidth:l,field:g.field,align:g.align},g.field))}}const le=u-X,te=I?{onClick:M,onDoubleClick:x("rowDoubleClick",G),onMouseEnter:x("rowMouseEnter",y),onMouseLeave:x("rowMouseLeave",B),onMouseOut:x("rowMouseOut",S),onMouseOver:x("rowMouseOver",V)}:null;return(0,we.jsxs)("div",(0,he.Z)({ref:F,"data-id":o,"data-rowindex":C,role:"row",className:(0,ye.Z)(...O,K.root,c,n&&"Mui-hovered"),"aria-rowindex":N,"aria-selected":t,style:j},te,W,{children:[ge,le>0&&(0,we.jsx)(Ab,{width:le})]}))})),bb=ob(mb);function pb(e){var g;const{direction:l,index:t,sortingOrder:n}=e,o=Ar(),I=rI(),C=(e=>{const{classes:g}=e;return(0,Be.Z)({icon:["sortIcon"]},Eo,g)})((0,he.Z)({},e,{classes:I.classes})),r=function(e,g,l,t){let n;const o={};return"asc"===g?n=e.columnSortedAscendingIcon:"desc"===g?n=e.columnSortedDescendingIcon:(n=e.columnUnsortedIcon,o.sortingOrder=t),n?(0,we.jsx)(n,(0,he.Z)({fontSize:"small",className:l},o)):null}(I.slots,l,C.icon,n);if(!r)return null;const a=(0,we.jsx)(I.slots.baseIconButton,(0,he.Z)({tabIndex:-1,"aria-label":o.current.getLocaleText("columnHeaderSortIconLabel"),title:o.current.getLocaleText("columnHeaderSortIconLabel"),size:"small"},null==(g=I.slotProps)?void 0:g.baseIconButton,{children:r}));return(0,we.jsxs)(Fu,{children:[null!=t&&(0,we.jsx)(wu,{badgeContent:t,color:"default",children:a}),null==t&&a]})}const Zb=g.memo(pb),hb=g.memo((e=>{var l,t;const{colDef:n,open:o,columnMenuId:I,columnMenuButtonId:C,iconButtonRef:r}=e,a=Ar(),i=rI(),c=(e=>{const{classes:g,open:l}=e,t={root:["menuIcon",l&&"menuOpen"],button:["menuIconButton"]};return(0,Be.Z)(t,Eo,g)})((0,he.Z)({},e,{classes:i.classes})),s=g.useCallback((e=>{e.preventDefault(),e.stopPropagation(),a.current.toggleColumnMenu(n.field)}),[a,n.field]);return(0,we.jsx)("div",{className:c.root,children:(0,we.jsx)(i.slots.baseTooltip,(0,he.Z)({title:a.current.getLocaleText("columnMenuLabel"),enterDelay:1e3},null==(l=i.slotProps)?void 0:l.baseTooltip,{children:(0,we.jsx)(i.slots.baseIconButton,(0,he.Z)({ref:r,tabIndex:-1,className:c.button,"aria-label":a.current.getLocaleText("columnMenuLabel"),size:"small",onClick:s,"aria-haspopup":"menu","aria-expanded":o,"aria-controls":o?I:void 0,id:C},null==(t=i.slotProps)?void 0:t.baseIconButton,{children:(0,we.jsx)(i.slots.columnMenuIcon,{fontSize:"small"})}))}))})}));function Gb({columnMenuId:e,columnMenuButtonId:g,ContentComponent:l,contentComponentProps:t,field:n,open:o,target:I,onExited:C}){const r=Ar(),a=r.current.getColumn(n),i=(0,et.Z)((e=>{e&&(e.stopPropagation(),null!=I&&I.contains(e.target))||r.current.hideColumnMenu()}));return I&&a?(0,we.jsx)(Ds,{placement:"bottom-"+("right"===a.align?"start":"end"),open:o,target:I,onClose:i,onExited:C,children:(0,we.jsx)(l,(0,he.Z)({colDef:a,hideMenu:i,open:o,id:e,labelledby:g},t))}):null}const yb=["className"],Bb=gC("div",{name:"MuiDataGrid",slot:"ColumnHeaderTitle",overridesResolver:(e,g)=>g.columnHeaderTitle})({textOverflow:"ellipsis",overflow:"hidden",whiteSpace:"nowrap",fontWeight:"var(--unstable_DataGrid-headWeight)"}),Sb=g.forwardRef((function(e,g){const{className:l}=e,t=(0,Ge.Z)(e,yb),n=rI(),o=(e=>{const{classes:g}=e;return(0,Be.Z)({root:["columnHeaderTitle"]},Eo,g)})(n);return(0,we.jsx)(Bb,(0,he.Z)({ref:g,className:(0,ye.Z)(o.root,l),ownerState:n},t))}));function Vb(e){var l;const{label:t,description:n}=e,o=rI(),I=g.useRef(null),[C,r]=g.useState(""),a=g.useCallback((()=>{if(!n&&null!=I&&I.current){const g=(e=I.current).scrollHeight>e.clientHeight||e.scrollWidth>e.clientWidth;r(g?t:"")}var e}),[n,t]);return(0,we.jsx)(o.slots.baseTooltip,(0,he.Z)({title:n||C},null==(l=o.slotProps)?void 0:l.baseTooltip,{children:(0,we.jsx)(Sb,{onMouseOver:a,ref:I,children:t})}))}const Wb=["resizable","resizing","height","side"];var Rb=function(e){return e.Left="left",e.Right="right",e}(Rb||{});function fb(e){const{height:l,side:t=Rb.Right}=e,n=(0,Ge.Z)(e,Wb),o=rI(),I=(e=>{const{resizable:g,resizing:l,classes:t,side:n}=e,o={root:["columnSeparator",g&&"columnSeparator--resizable",l&&"columnSeparator--resizing",n&&`columnSeparator--side${(0,zo.Z)(n)}`],icon:["iconSeparator"]};return(0,Be.Z)(o,Eo,t)})((0,he.Z)({},e,{side:t,classes:o.classes})),C=g.useCallback((e=>{e.preventDefault(),e.stopPropagation()}),[]);return(0,we.jsx)("div",(0,he.Z)({className:I.root,style:{minHeight:l,opacity:o.showColumnVerticalBorder?0:1}},n,{onClick:C,children:(0,we.jsx)(o.slots.columnResizeIcon,{className:I.icon})}))}const vb=g.memo(fb),kb=["classes","columnMenuOpen","colIndex","height","isResizing","sortDirection","hasFocus","tabIndex","separatorSide","isDraggable","headerComponent","description","elementId","width","columnMenuIconButton","columnMenu","columnTitleIconButtons","headerClassName","label","resizable","draggableContainerProps","columnHeaderSeparatorProps"],Xb=g.forwardRef((function(e,l){const{classes:t,columnMenuOpen:n,colIndex:o,height:I,isResizing:C,sortDirection:r,hasFocus:a,tabIndex:i,separatorSide:c,isDraggable:s,headerComponent:d,description:u,width:A,columnMenuIconButton:m=null,columnMenu:b=null,columnTitleIconButtons:p=null,headerClassName:Z,label:h,resizable:G,draggableContainerProps:y,columnHeaderSeparatorProps:B}=e,S=(0,Ge.Z)(e,kb),V=II(),W=rI(),R=g.useRef(null),[f,v]=g.useState(n),k=(0,ve.Z)(R,l);let X="none";return null!=r&&(X="asc"===r?"ascending":"descending"),g.useEffect((()=>{f||v(n)}),[f,n]),g.useLayoutEffect((()=>{const e=V.current.state.columnMenu;if(a&&!e.open){const e=R.current.querySelector('[tabindex="0"]')||R.current;null==e||e.focus(),V.current.columnHeadersContainerElementRef.current.scrollLeft=0}}),[V,a]),(0,we.jsxs)("div",(0,he.Z)({ref:k,className:(0,ye.Z)(t.root,Z),style:{height:I,width:A,minWidth:A,maxWidth:A},role:"columnheader",tabIndex:i,"aria-colindex":o+1,"aria-sort":X,"aria-label":null==d?h:void 0},S,{children:[(0,we.jsxs)("div",(0,he.Z)({className:t.draggableContainer,draggable:s,role:"presentation"},y,{children:[(0,we.jsxs)("div",{className:t.titleContainer,role:"presentation",children:[(0,we.jsx)("div",{className:t.titleContainerContent,children:void 0!==d?d:(0,we.jsx)(Vb,{label:h,description:u,columnWidth:A})}),p]}),m]})),(0,we.jsx)(vb,(0,he.Z)({resizable:!W.disableColumnResize&&!!G,resizing:C,height:I,side:c},B)),b]}))}));function Jb(e){var l,t,n,o;const{colDef:I,columnMenuOpen:C,colIndex:r,headerHeight:a,isResizing:i,sortDirection:c,sortIndex:s,filterItemsCounter:d,hasFocus:u,tabIndex:A,disableReorder:m,separatorSide:b}=e,p=II(),Z=rI(),h=g.useRef(null),G=(0,Se.Z)(),y=(0,Se.Z)(),B=g.useRef(null),[S,V]=g.useState(C),W=g.useMemo((()=>!Z.disableColumnReorder&&!m&&!I.disableReorder),[Z.disableColumnReorder,m,I.disableReorder]);let R;I.renderHeader&&(R=I.renderHeader(p.current.getColumnHeaderParams(I.field)));const f=(e=>{const{colDef:g,classes:l,isDragging:t,sortDirection:n,showRightBorder:o,filterItemsCounter:I}=e,C=null!=n,r=null!=I&&I>0,a="number"===g.type,i={root:["columnHeader","left"===g.headerAlign&&"columnHeader--alignLeft","center"===g.headerAlign&&"columnHeader--alignCenter","right"===g.headerAlign&&"columnHeader--alignRight",g.sortable&&"columnHeader--sortable",t&&"columnHeader--moving",C&&"columnHeader--sorted",r&&"columnHeader--filtered",a&&"columnHeader--numeric","withBorderColor",o&&"columnHeader--withRightBorder"],draggableContainer:["columnHeaderDraggableContainer"],titleContainer:["columnHeaderTitleContainer"],titleContainerContent:["columnHeaderTitleContainerContent"]};return(0,Be.Z)(i,Eo,l)})((0,he.Z)({},e,{classes:Z.classes,showRightBorder:Z.showColumnVerticalBorder})),v=g.useCallback((e=>g=>{Dd(g)||p.current.publishEvent(e,p.current.getColumnHeaderParams(I.field),g)}),[p,I.field]),k=g.useMemo((()=>({onClick:v("columnHeaderClick"),onDoubleClick:v("columnHeaderDoubleClick"),onMouseOver:v("columnHeaderOver"),onMouseOut:v("columnHeaderOut"),onMouseEnter:v("columnHeaderEnter"),onMouseLeave:v("columnHeaderLeave"),onKeyDown:v("columnHeaderKeyDown"),onFocus:v("columnHeaderFocus"),onBlur:v("columnHeaderBlur")})),[v]),X=g.useMemo((()=>W?{onDragStart:v("columnHeaderDragStart"),onDragEnter:v("columnHeaderDragEnter"),onDragOver:v("columnHeaderDragOver"),onDragEnd:v("columnHeaderDragEnd")}:{}),[W,v]),J=g.useMemo((()=>({onMouseDown:v("columnSeparatorMouseDown"),onDoubleClick:v("columnSeparatorDoubleClick")})),[v]);g.useEffect((()=>{S||V(C)}),[S,C]);const w=g.useCallback((()=>{V(!1)}),[]),Y=!Z.disableColumnMenu&&!I.disableColumnMenu&&(0,we.jsx)(hb,{colDef:I,columnMenuId:G,columnMenuButtonId:y,open:S,iconButtonRef:B}),H=(0,we.jsx)(Gb,{columnMenuId:G,columnMenuButtonId:y,field:I.field,open:C,target:B.current,ContentComponent:Z.slots.columnMenu,contentComponentProps:null==(l=Z.slotProps)?void 0:l.columnMenu,onExited:w}),F=null!=(t=I.sortingOrder)?t:Z.sortingOrder,N=(0,we.jsxs)(g.Fragment,{children:[!Z.disableColumnFilter&&(0,we.jsx)(Z.slots.columnHeaderFilterIconButton,(0,he.Z)({field:I.field,counter:d},null==(n=Z.slotProps)?void 0:n.columnHeaderFilterIconButton)),I.sortable&&!I.hideSortIcons&&(0,we.jsx)(Zb,{direction:c,index:s,sortingOrder:F})]});g.useLayoutEffect((()=>{const e=p.current.state.columnMenu;if(u&&!e.open){const e=h.current.querySelector('[tabindex="0"]')||h.current;null==e||e.focus(),p.current.columnHeadersContainerElementRef.current.scrollLeft=0}}),[p,u]);const K="function"==typeof I.headerClassName?I.headerClassName({field:I.field,colDef:I}):I.headerClassName,x=null!=(o=I.headerName)?o:I.field;return(0,we.jsx)(Xb,(0,he.Z)({ref:h,classes:f,columnMenuOpen:C,colIndex:r,height:a,isResizing:i,sortDirection:c,hasFocus:u,tabIndex:A,separatorSide:b,isDraggable:W,headerComponent:R,description:I.description,elementId:I.field,width:I.computedWidth,columnMenuIconButton:Y,columnTitleIconButtons:N,headerClassName:K,label:x,resizable:!Z.disableColumnResize&&!!I.resizable,"data-field":I.field,columnMenu:H,draggableContainerProps:X,columnHeaderSeparatorProps:J},k))}const wb=e=>e.virtualization,Yb=bI(wb,(e=>e.enabled)),Hb=bI(wb,(e=>e.enabledForColumns)),Fb=["style"],Nb=["style"];function Kb(e,g,l=0,t=g.length){if(g.length<=0)return-1;if(l>=t)return l;const n=l+Math.floor((t-l)/2);return e<=g[n]?Kb(e,g,l,n):Kb(e,g,n+1,t)}const xb=({firstIndex:e,lastIndex:g,buffer:l,minFirstIndex:t,maxLastIndex:n})=>[NC(e-l,t,n),NC(g+l,t,n)],Mb=(e,g)=>e===g||e.firstRowIndex===g.firstRowIndex&&e.lastRowIndex===g.lastRowIndex&&e.firstColumnIndex===g.firstColumnIndex&&e.lastColumnIndex===g.lastColumnIndex,zb={maxSize:3};function Eb(e){var l;const{groupId:t,width:n,depth:o,maxDepth:I,fields:C,height:r,colIndex:a,hasFocus:i,tabIndex:c,isLastColumn:s}=e,d=rI(),u=g.useRef(null),A=Ar(),m=nI(A,HI),b=t?m[t]:{},{headerName:p=(null!=t?t:""),description:Z="",headerAlign:h}=b;let G;const y=t&&(null==(l=m[t])?void 0:l.renderHeaderGroup),B=g.useMemo((()=>({groupId:t,headerName:p,description:Z,depth:o,maxDepth:I,fields:C,colIndex:a,isLastColumn:s})),[t,p,Z,o,I,C,a,s]);t&&y&&(G=y(B));const S=d.showColumnVerticalBorder,V=(0,he.Z)({},e,{classes:d.classes,showColumnBorder:S,headerAlign:h,depth:o,isDragging:!1}),W=null!=p?p:t,R=(0,Se.Z)(),f=null===t?`empty-group-cell-${R}`:t,v=(e=>{const{classes:g,headerAlign:l,isDragging:t,showColumnBorder:n,groupId:o}=e,I={root:["columnHeader","left"===l&&"columnHeader--alignLeft","center"===l&&"columnHeader--alignCenter","right"===l&&"columnHeader--alignRight",t&&"columnHeader--moving",n&&"columnHeader--showColumnBorder",n&&"columnHeader--withRightBorder","withBorderColor",null===o?"columnHeader--emptyGroup":"columnHeader--filledGroup"],draggableContainer:["columnHeaderDraggableContainer"],titleContainer:["columnHeaderTitleContainer","withBorderColor"],titleContainerContent:["columnHeaderTitleContainerContent"]};return(0,Be.Z)(I,Eo,g)})(V);g.useLayoutEffect((()=>{if(i){const e=u.current.querySelector('[tabindex="0"]')||u.current;null==e||e.focus()}}),[A,i]);const k=g.useCallback((e=>g=>{Dd(g)||A.current.publishEvent(e,B,g)}),[A,B]),X=g.useMemo((()=>({onKeyDown:k("columnGroupHeaderKeyDown"),onFocus:k("columnGroupHeaderFocus"),onBlur:k("columnGroupHeaderBlur")})),[k]),J="function"==typeof b.headerClassName?b.headerClassName(B):b.headerClassName;return(0,we.jsx)(Xb,(0,he.Z)({ref:u,classes:v,columnMenuOpen:!1,colIndex:a,height:r,isResizing:!1,sortDirection:null,hasFocus:!1,tabIndex:c,isDraggable:!1,headerComponent:G,headerClassName:J,description:Z,elementId:f,width:n,columnMenuIconButton:null,columnTitleIconButtons:null,resizable:!1,label:W,"aria-colspan":C.length,"data-fields":`|-${C.join("-|-")}-|`},X))}const Lb=(0,Ve.ZP)("div",{name:"MuiDataGrid",slot:"ColumnHeaderRow",overridesResolver:(e,g)=>g.columnHeaderRow})((()=>({display:"flex"}))),Ub=["className"],Qb=gC("div",{name:"MuiDataGrid",slot:"ColumnHeaders",overridesResolver:(e,g)=>g.columnHeaders})({position:"relative",overflow:"hidden",display:"flex",alignItems:"center",boxSizing:"border-box",borderBottom:"1px solid",borderTopLeftRadius:"var(--unstable_DataGrid-radius)",borderTopRightRadius:"var(--unstable_DataGrid-radius)"}),Db=g.forwardRef((function(e,g){const{className:l}=e,t=(0,Ge.Z)(e,Ub),n=rI(),o=(e=>{const{classes:g}=e;return(0,Be.Z)({root:["columnHeaders","withBorderColor"]},Eo,g)})(n);return(0,we.jsx)(Qb,(0,he.Z)({ref:g,className:(0,ye.Z)(l,o.root),ownerState:n},t,{role:"presentation"}))})),Tb=["isDragging","className"],Pb=gC("div",{name:"MuiDataGrid",slot:"columnHeadersInner",overridesResolver:(e,g)=>[{[`&.${Lo.columnHeaderDropZone}`]:g.columnHeaderDropZone},g.columnHeadersInner]})((()=>({display:"flex",alignItems:"flex-start",flexDirection:"column",[`&.${Lo.columnHeaderDropZone} .${Lo.columnHeaderDraggableContainer}`]:{cursor:"move"},[`&.${Lo["columnHeadersInner--scrollable"]} .${Lo.columnHeader}:last-child`]:{borderRight:"none"}}))),jb=g.forwardRef((function(e,g){var l,t;const{isDragging:n,className:o}=e,I=(0,Ge.Z)(e,Tb),C=Ar(),r=rI(),a=(0,he.Z)({},r,{isDragging:n,hasScrollX:null!=(l=null==(t=C.current.getRootDimensions())?void 0:t.hasScrollX)&&l}),i=(e=>{const{isDragging:g,hasScrollX:l,classes:t}=e,n={root:["columnHeadersInner",g&&"columnHeaderDropZone",l&&"columnHeadersInner--scrollable"]};return(0,Be.Z)(n,Eo,t)})(a);return(0,we.jsx)(Pb,(0,he.Z)({ref:g,className:(0,ye.Z)(o,i.root),ownerState:a},I))})),Ob=["innerRef","className","visibleColumns","sortColumnLookup","filterColumnLookup","columnPositions","columnHeaderTabIndexState","columnGroupHeaderTabIndexState","columnHeaderFocus","columnGroupHeaderFocus","densityFactor","headerGroupingMaxDepth","columnMenuState","columnVisibility","columnGroupsHeaderStructure","hasOtherElementInTabSequence"],qb=g.forwardRef((function(e,l){const{innerRef:n,visibleColumns:o,sortColumnLookup:I,filterColumnLookup:C,columnPositions:r,columnHeaderTabIndexState:a,columnGroupHeaderTabIndexState:i,columnHeaderFocus:c,columnGroupHeaderFocus:s,densityFactor:d,headerGroupingMaxDepth:u,columnMenuState:A,columnVisibility:m,columnGroupsHeaderStructure:b,hasOtherElementInTabSequence:p}=e,Z=(0,Ge.Z)(e,Ob),{isDragging:h,getRootProps:G,getInnerProps:y,getColumnHeaders:B,getColumnGroupHeaders:S}=(e=>{const{innerRef:l,minColumnIndex:n=0,visibleColumns:o,sortColumnLookup:I,filterColumnLookup:C,columnPositions:r,columnHeaderTabIndexState:a,columnGroupHeaderTabIndexState:i,columnHeaderFocus:c,columnGroupHeaderFocus:s,densityFactor:d,headerGroupingMaxDepth:u,columnMenuState:A,columnVisibility:m,columnGroupsHeaderStructure:b,hasOtherElementInTabSequence:p}=e,Z=Ul(),[h,G]=g.useState(""),[y,B]=g.useState(""),S=II(),V=nI(S,Hb),W=rI(),R=g.useRef(null),f=(0,ve.Z)(l,R),[v,k]=g.useState(null),X=g.useRef(v),J=g.useRef(0),w=Kd(S,W),Y=od(S,W.columnHeaderHeight),H=Math.floor(W.columnHeaderHeight*d),F=g.useCallback((e=>{v&&e&&Mb(v,e)||k(e)}),[v]);g.useEffect((()=>{S.current.columnHeadersContainerElementRef.current.scrollLeft=0}),[S]);const N=g.useRef(cI(nd,{equalityCheck:(e,g)=>["firstColumnIndex","minColumnIndex","columnBuffer"].every((l=>e[l]===g[l]))})),K=g.useCallback((e=>{const[g,l]=xb({firstIndex:e.firstRowIndex,lastIndex:e.lastRowIndex,minFirstIndex:0,maxLastIndex:w.rows.length,buffer:W.rowBuffer}),t=N.current({firstColumnIndex:e.firstColumnIndex,minColumnIndex:n,columnBuffer:W.columnBuffer,firstRowToRender:g,lastRowToRender:l,apiRef:S,visibleRows:w.rows}),o="ltr"===Z.direction?1:-1,I=t>0?J.current-o*r[t]:J.current;R.current.style.transform=`translate3d(${-I}px, 0px, 0px)`}),[r,n,W.columnBuffer,S,w.rows,W.rowBuffer,Z.direction]);g.useLayoutEffect((()=>{v&&K(v)}),[v,K]);const x=g.useCallback((({left:e,renderContext:g=null},l)=>{var n,o;if(!R.current)return;if(J.current===e&&(null==(n=X.current)?void 0:n.firstColumnIndex)===(null==g?void 0:g.firstColumnIndex)&&(null==(o=X.current)?void 0:o.lastColumnIndex)===(null==g?void 0:g.lastColumnIndex))return;J.current=e;let I=!1;g===X.current&&X.current?I=!0:(function(e){return!!e.target}(l)?(t.flushSync((()=>{F(g)})),I=!0):F(g),X.current=g),g&&I&&K(g)}),[K,F]),M=g.useCallback((e=>B(e.field)),[]),z=g.useCallback((()=>B("")),[]),E=g.useCallback((e=>G(e.field)),[]),L=g.useCallback((()=>G("")),[]);qC(S,"columnResizeStart",M),qC(S,"columnResizeStop",z),qC(S,"columnHeaderDragStart",E),qC(S,"columnHeaderDragEnd",L),qC(S,"scrollPositionChange",x);const U=e=>{const{renderContext:g=v,minFirstColumn:l=n,maxLastColumn:t=o.length}=e||{};if(!g)return null;const[I,C]=xb({firstIndex:g.firstRowIndex,lastIndex:g.lastRowIndex,minFirstIndex:0,maxLastIndex:w.rows.length,buffer:W.rowBuffer}),r=V?N.current({firstColumnIndex:g.firstColumnIndex,minColumnIndex:l,columnBuffer:W.columnBuffer,apiRef:S,firstRowToRender:I,lastRowToRender:C,visibleRows:w.rows}):0,a=V?Math.min(g.lastColumnIndex+W.columnBuffer,t):t;return{renderedColumns:o.slice(r,a),firstColumnToRender:r,lastColumnToRender:a,minFirstColumn:l,maxLastColumn:t}},Q={minHeight:Y,maxHeight:Y,lineHeight:`${H}px`};return{renderContext:v,getColumnHeaders:(e,g={})=>{const l=U(e);if(null==l)return null;const{renderedColumns:t,firstColumnToRender:n}=l,o=[];for(let e=0;e<t.length;e+=1){const l=t[e],r=n+e,i=0===r,s=null!==a&&a.field===l.field||i&&!p?0:-1,d=null!==c&&c.field===l.field,u=A.open&&A.field===l.field;o.push((0,we.jsx)(Jb,(0,he.Z)({},I[l.field],{columnMenuOpen:u,filterItemsCounter:C[l.field]&&C[l.field].length,headerHeight:H,isDragging:l.field===h,colDef:l,colIndex:r,isResizing:y===l.field,hasFocus:d,tabIndex:s},g),l.field))}return(0,we.jsx)(Lb,{role:"row","aria-rowindex":u+1,ownerState:W,children:o})},getColumnsToRender:U,getColumnGroupHeaders:e=>{if(0===u)return null;const g=U(e);if(null==g||0===g.renderedColumns.length)return null;const{firstColumnToRender:l,lastColumnToRender:t}=g,n=[],I=[];for(let e=0;e<u;e+=1){var C,r;const g=b[e],n=o[l].field,a=null!=(C=S.current.unstable_getColumnGroupPath(n)[e])?C:null,c=g.findIndex((({groupId:e,columnFields:g})=>e===a&&g.includes(n))),d=o[t-1].field,u=null!=(r=S.current.unstable_getColumnGroupPath(d)[e])?r:null,A=g.findIndex((({groupId:e,columnFields:g})=>e===u&&g.includes(d))),p=g.slice(c,A+1).map((e=>(0,he.Z)({},e,{columnFields:e.columnFields.filter((e=>!1!==m[e]))}))).filter((e=>e.columnFields.length>0)),Z=p[0].columnFields.indexOf(n),h=p[0].columnFields.slice(0,Z).reduce(((e,g)=>{var l;return e+(null!=(l=S.current.getColumn(g).computedWidth)?l:0)}),0);let G=l;const y=p.map((({groupId:g,columnFields:l})=>{const t=null!==s&&s.depth===e&&l.includes(s.field),n=null!==i&&i.depth===e&&l.includes(i.field)?0:-1,o={groupId:g,width:l.reduce(((e,g)=>e+S.current.getColumn(g).computedWidth),0),fields:l,colIndex:G,hasFocus:t,tabIndex:n};return G+=l.length,o}));I.push({leftOverflow:h,elements:y})}return I.forEach(((e,g)=>{n.push((0,we.jsx)(Lb,{style:{height:`${H}px`,transform:`translateX(-${e.leftOverflow}px)`},role:"row","aria-rowindex":g+1,ownerState:W,children:e.elements.map((({groupId:e,width:l,fields:t,colIndex:n,hasFocus:C,tabIndex:r},a)=>(0,we.jsx)(Eb,{groupId:e,width:l,fields:t,colIndex:n,depth:g,isLastColumn:n===o.length-t.length,maxDepth:I.length,height:H,hasFocus:C,tabIndex:r},a)))},g))})),n},isDragging:!!h,getRootProps:(e={})=>(0,he.Z)({style:Q},e),getInnerProps:()=>({ref:f,role:"rowgroup"}),headerHeight:H}})({innerRef:n,visibleColumns:o,sortColumnLookup:I,filterColumnLookup:C,columnPositions:r,columnHeaderTabIndexState:a,columnGroupHeaderTabIndexState:i,columnHeaderFocus:c,columnGroupHeaderFocus:s,densityFactor:d,headerGroupingMaxDepth:u,columnMenuState:A,columnVisibility:m,columnGroupsHeaderStructure:b,hasOtherElementInTabSequence:p});return(0,we.jsx)(Db,(0,he.Z)({ref:l},G(Z),{children:(0,we.jsxs)(jb,(0,he.Z)({isDragging:h},y(),{children:[S(),B()]}))}))})),$b=ob(qb),_b=["absolute","children","className","component","flexItem","light","orientation","role","textAlign","variant"],ep=(0,Ve.ZP)("div",{name:"MuiDivider",slot:"Root",overridesResolver:(e,g)=>{const{ownerState:l}=e;return[g.root,l.absolute&&g.absolute,g[l.variant],l.light&&g.light,"vertical"===l.orientation&&g.vertical,l.flexItem&&g.flexItem,l.children&&g.withChildren,l.children&&"vertical"===l.orientation&&g.withChildrenVertical,"right"===l.textAlign&&"vertical"!==l.orientation&&g.textAlignRight,"left"===l.textAlign&&"vertical"!==l.orientation&&g.textAlignLeft]}})((({theme:e,ownerState:g})=>(0,he.Z)({margin:0,flexShrink:0,borderWidth:0,borderStyle:"solid",borderColor:(e.vars||e).palette.divider,borderBottomWidth:"thin"},g.absolute&&{position:"absolute",bottom:0,left:0,width:"100%"},g.light&&{borderColor:e.vars?`rgba(${e.vars.palette.dividerChannel} / 0.08)`:(0,Rt.Fq)(e.palette.divider,.08)},"inset"===g.variant&&{marginLeft:72},"middle"===g.variant&&"horizontal"===g.orientation&&{marginLeft:e.spacing(2),marginRight:e.spacing(2)},"middle"===g.variant&&"vertical"===g.orientation&&{marginTop:e.spacing(1),marginBottom:e.spacing(1)},"vertical"===g.orientation&&{height:"100%",borderBottomWidth:0,borderRightWidth:"thin"},g.flexItem&&{alignSelf:"stretch",height:"auto"})),(({ownerState:e})=>(0,he.Z)({},e.children&&{display:"flex",whiteSpace:"nowrap",textAlign:"center",border:0,"&::before, &::after":{content:'""',alignSelf:"center"}})),(({theme:e,ownerState:g})=>(0,he.Z)({},g.children&&"vertical"!==g.orientation&&{"&::before, &::after":{width:"100%",borderTop:`thin solid ${(e.vars||e).palette.divider}`}})),(({theme:e,ownerState:g})=>(0,he.Z)({},g.children&&"vertical"===g.orientation&&{flexDirection:"column","&::before, &::after":{height:"100%",borderLeft:`thin solid ${(e.vars||e).palette.divider}`}})),(({ownerState:e})=>(0,he.Z)({},"right"===e.textAlign&&"vertical"!==e.orientation&&{"&::before":{width:"90%"},"&::after":{width:"10%"}},"left"===e.textAlign&&"vertical"!==e.orientation&&{"&::before":{width:"10%"},"&::after":{width:"90%"}}))),gp=(0,Ve.ZP)("span",{name:"MuiDivider",slot:"Wrapper",overridesResolver:(e,g)=>{const{ownerState:l}=e;return[g.wrapper,"vertical"===l.orientation&&g.wrapperVertical]}})((({theme:e,ownerState:g})=>(0,he.Z)({display:"inline-block",paddingLeft:`calc(${e.spacing(1)} * 1.2)`,paddingRight:`calc(${e.spacing(1)} * 1.2)`},"vertical"===g.orientation&&{paddingTop:`calc(${e.spacing(1)} * 1.2)`,paddingBottom:`calc(${e.spacing(1)} * 1.2)`}))),lp=g.forwardRef((function(e,g){const l=(0,We.Z)({props:e,name:"MuiDivider"}),{absolute:t=!1,children:n,className:o,component:I=(n?"div":"hr"),flexItem:C=!1,light:r=!1,orientation:a="horizontal",role:i=("hr"!==I?"separator":void 0),textAlign:c="center",variant:s="fullWidth"}=l,d=(0,Ge.Z)(l,_b),u=(0,he.Z)({},l,{absolute:t,component:I,flexItem:C,light:r,orientation:a,role:i,textAlign:c,variant:s}),A=(e=>{const{absolute:g,children:l,classes:t,flexItem:n,light:o,orientation:I,textAlign:C,variant:r}=e,a={root:["root",g&&"absolute",r,o&&"light","vertical"===I&&"vertical",n&&"flexItem",l&&"withChildren",l&&"vertical"===I&&"withChildrenVertical","right"===C&&"vertical"!==I&&"textAlignRight","left"===C&&"vertical"!==I&&"textAlignLeft"],wrapper:["wrapper","vertical"===I&&"wrapperVertical"]};return(0,Be.Z)(a,dd,t)})(u);return(0,we.jsx)(ep,(0,he.Z)({as:I,className:(0,ye.Z)(A.root,o),role:i,ref:g,ownerState:u},d,{children:n?(0,we.jsx)(gp,{className:A.wrapper,ownerState:u,children:n}):null}))}));lp.muiSkipListHighlight=!0;const tp=lp,np=["displayOrder"],op=["hideMenu","colDef","id","labelledby","className","children","open"],Ip=(0,Ve.ZP)(kl)((()=>({minWidth:248}))),Cp=g.forwardRef((function(e,l){const{hideMenu:t,id:n,labelledby:o,className:I,children:C,open:r}=e,a=(0,Ge.Z)(e,op),i=g.useCallback((e=>{var g;cr(e.key)&&e.preventDefault(),g=e.key,(cr(g)||ir(g))&&t(e)}),[t]);return(0,we.jsx)(Ip,(0,he.Z)({id:n,ref:l,className:(0,ye.Z)(Lo.menuList,I),"aria-labelledby":o,onKeyDown:i,autoFocus:r},a,{children:C}))})),rp=["className"],ap=(0,Ve.ZP)("div",{name:"MuiListItemIcon",slot:"Root",overridesResolver:(e,g)=>{const{ownerState:l}=e;return[g.root,"flex-start"===l.alignItems&&g.alignItemsFlexStart]}})((({theme:e,ownerState:g})=>(0,he.Z)({minWidth:56,color:(e.vars||e).palette.action.active,flexShrink:0,display:"inline-flex"},"flex-start"===g.alignItems&&{marginTop:8}))),ip=g.forwardRef((function(e,l){const t=(0,We.Z)({props:e,name:"MuiListItemIcon"}),{className:n}=t,o=(0,Ge.Z)(t,rp),I=g.useContext(pl),C=(0,he.Z)({},t,{alignItems:I.alignItems}),r=(e=>{const{alignItems:g,classes:l}=e,t={root:["root","flex-start"===g&&"alignItemsFlexStart"]};return(0,Be.Z)(t,Ad,l)})(C);return(0,we.jsx)(ap,(0,he.Z)({className:(0,ye.Z)(r.root,n),ownerState:C,ref:l},o))})),cp=["children","className","disableTypography","inset","primary","primaryTypographyProps","secondary","secondaryTypographyProps"],sp=(0,Ve.ZP)("div",{name:"MuiListItemText",slot:"Root",overridesResolver:(e,g)=>{const{ownerState:l}=e;return[{[`& .${pd.primary}`]:g.primary},{[`& .${pd.secondary}`]:g.secondary},g.root,l.inset&&g.inset,l.primary&&l.secondary&&g.multiline,l.dense&&g.dense]}})((({ownerState:e})=>(0,he.Z)({flex:"1 1 auto",minWidth:0,marginTop:4,marginBottom:4},e.primary&&e.secondary&&{marginTop:6,marginBottom:6},e.inset&&{paddingLeft:56}))),dp=g.forwardRef((function(e,l){const t=(0,We.Z)({props:e,name:"MuiListItemText"}),{children:n,className:o,disableTypography:I=!1,inset:C=!1,primary:r,primaryTypographyProps:a,secondary:i,secondaryTypographyProps:c}=t,s=(0,Ge.Z)(t,cp),{dense:d}=g.useContext(pl);let u=null!=r?r:n,A=i;const m=(0,he.Z)({},t,{disableTypography:I,inset:C,primary:!!u,secondary:!!A,dense:d}),b=(e=>{const{classes:g,inset:l,primary:t,secondary:n,dense:o}=e,I={root:["root",l&&"inset",o&&"dense",t&&n&&"multiline"],primary:["primary"],secondary:["secondary"]};return(0,Be.Z)(I,bd,g)})(m);return null==u||u.type===xm||I||(u=(0,we.jsx)(xm,(0,he.Z)({variant:d?"body2":"body1",className:b.primary,component:null!=a&&a.variant?void 0:"span",display:"block"},a,{children:u}))),null==A||A.type===xm||I||(A=(0,we.jsx)(xm,(0,he.Z)({variant:"body2",className:b.secondary,color:"text.secondary",display:"block"},c,{children:A}))),(0,we.jsxs)(sp,(0,he.Z)({className:(0,ye.Z)(b.root,o),ownerState:m,ref:l},s,{children:[u,A]}))}));function up(e){const{colDef:l,onClick:t}=e,n=Ar(),o=rI(),I=1===RI(n).filter((e=>!0!==e.disableColumnMenu)).length,C=g.useCallback((e=>{I||(n.current.setColumnVisibility(l.field,!1),t(e))}),[n,l.field,t,I]);return o.disableColumnSelector||!1===l.hideable?null:(0,we.jsxs)(Bd,{onClick:C,disabled:I,children:[(0,we.jsx)(ip,{children:(0,we.jsx)(o.slots.columnMenuHideIcon,{fontSize:"small"})}),(0,we.jsx)(dp,{children:n.current.getLocaleText("columnMenuHideColumn")})]})}function Ap(e){const{onClick:l}=e,t=Ar(),n=rI(),o=g.useCallback((e=>{l(e),t.current.showPreferences(Id.columns)}),[t,l]);return n.disableColumnSelector?null:(0,we.jsxs)(Bd,{onClick:o,children:[(0,we.jsx)(ip,{children:(0,we.jsx)(n.slots.columnMenuManageColumnsIcon,{fontSize:"small"})}),(0,we.jsx)(dp,{children:t.current.getLocaleText("columnMenuManageColumns")})]})}const mp=["defaultSlots","defaultSlotProps","slots","slotProps"],bp={columnMenuSortItem:function(e){var l;const{colDef:t,onClick:n}=e,o=Ar(),I=nI(o,CC),C=rI(),r=g.useMemo((()=>{if(!t)return null;const e=I.find((e=>e.field===t.field));return null==e?void 0:e.sort}),[t,I]),a=null!=(l=t.sortingOrder)?l:C.sortingOrder,i=g.useCallback((e=>{n(e);const g=e.currentTarget.getAttribute("data-value")||null;o.current.sortColumn(t,g===r?null:g)}),[o,t,n,r]);if(!t||!t.sortable||!a.some((e=>!!e)))return null;const c=e=>{const g=o.current.getLocaleText(e);return"function"==typeof g?g(t):g};return(0,we.jsxs)(g.Fragment,{children:[a.includes("asc")&&"asc"!==r?(0,we.jsxs)(Bd,{onClick:i,"data-value":"asc",children:[(0,we.jsx)(ip,{children:(0,we.jsx)(C.slots.columnMenuSortAscendingIcon,{fontSize:"small"})}),(0,we.jsx)(dp,{children:c("columnMenuSortAsc")})]}):null,a.includes("desc")&&"desc"!==r?(0,we.jsxs)(Bd,{onClick:i,"data-value":"desc",children:[(0,we.jsx)(ip,{children:(0,we.jsx)(C.slots.columnMenuSortDescendingIcon,{fontSize:"small"})}),(0,we.jsx)(dp,{children:c("columnMenuSortDesc")})]}):null,a.includes(null)&&null!=r?(0,we.jsxs)(Bd,{onClick:i,children:[(0,we.jsx)(ip,{}),(0,we.jsx)(dp,{children:o.current.getLocaleText("columnMenuUnsort")})]}):null]})},columnMenuFilterItem:function(e){const{colDef:l,onClick:t}=e,n=Ar(),o=rI(),I=g.useCallback((e=>{t(e),n.current.showFilterPanel(l.field)}),[n,l.field,t]);return o.disableColumnFilter||!l.filterable?null:(0,we.jsxs)(Bd,{onClick:I,children:[(0,we.jsx)(ip,{children:(0,we.jsx)(o.slots.columnMenuFilterIcon,{fontSize:"small"})}),(0,we.jsx)(dp,{children:n.current.getLocaleText("columnMenuFilter")})]})},columnMenuColumnsItem:function(e){return(0,we.jsxs)(g.Fragment,{children:[(0,we.jsx)(up,(0,he.Z)({},e)),(0,we.jsx)(Ap,(0,he.Z)({},e))]})}},pp={columnMenuSortItem:{displayOrder:10},columnMenuFilterItem:{displayOrder:20},columnMenuColumnsItem:{displayOrder:30}},Zp=g.forwardRef((function(e,l){const{defaultSlots:t,defaultSlotProps:n,slots:o,slotProps:I}=e,C=(0,Ge.Z)(e,mp),r=(e=>{const l=II(),{defaultSlots:t,defaultSlotProps:n,slots:o={},slotProps:I={},hideMenu:C,colDef:r,addDividers:a=!0}=e,i=g.useMemo((()=>(0,he.Z)({},t,o)),[t,o]),c=g.useMemo((()=>{if(!I||0===Object.keys(I).length)return n;const e=(0,he.Z)({},I);return Object.entries(n).forEach((([g,l])=>{e[g]=(0,he.Z)({},l,I[g]||{})})),e}),[n,I]),s=l.current.unstable_applyPipeProcessors("columnMenu",[],e.colDef),d=g.useMemo((()=>{const e=Object.keys(t);return Object.keys(o).filter((g=>!e.includes(g)))}),[o,t]);return g.useMemo((()=>{const e=Array.from(new Set([...s,...d])).filter((e=>null!=i[e])).sort(((e,g)=>{const l=c[e],t=c[g];return(Number.isFinite(null==l?void 0:l.displayOrder)?l.displayOrder:100)-(Number.isFinite(null==t?void 0:t.displayOrder)?t.displayOrder:100)}));return e.reduce(((g,l,t)=>{let n={colDef:r,onClick:C};const o=c[l];if(o){const e=(0,Ge.Z)(o,np);n=(0,he.Z)({},n,e)}return a&&t!==e.length-1?[...g,[i[l],n],[tp,{}]]:[...g,[i[l],n]]}),[])}),[a,r,s,C,i,c,d])})((0,he.Z)({},C,{defaultSlots:t,defaultSlotProps:n,slots:o,slotProps:I}));return(0,we.jsx)(Cp,(0,he.Z)({ref:l},C,{children:r.map((([e,g],l)=>(0,we.jsx)(e,(0,he.Z)({},g),l)))}))})),hp=g.forwardRef((function(e,g){return(0,we.jsx)(Zp,(0,he.Z)({},e,{ref:g,defaultSlots:bp,defaultSlotProps:pp}))})),Gp=g.forwardRef((function(e,g){const l=Ar().current.getLocaleText("noResultsOverlayLabel");return(0,we.jsx)(iA,(0,he.Z)({ref:g},e,{children:l}))}));function yp(e){return(0,rg.Z)("PrivateSwitchBase",e)}(0,Cg.Z)("PrivateSwitchBase",["root","checked","disabled","input","edgeStart","edgeEnd"]);const Bp=["autoFocus","checked","checkedIcon","className","defaultChecked","disabled","disableFocusRipple","edge","icon","id","inputProps","inputRef","name","onBlur","onChange","onFocus","readOnly","required","tabIndex","type","value"],Sp=(0,Ve.ZP)(ro)((({ownerState:e})=>(0,he.Z)({padding:9,borderRadius:"50%"},"start"===e.edge&&{marginLeft:"small"===e.size?-3:-12},"end"===e.edge&&{marginRight:"small"===e.size?-3:-12}))),Vp=(0,Ve.ZP)("input",{shouldForwardProp:Ve.FO})({cursor:"inherit",position:"absolute",opacity:0,width:"100%",height:"100%",top:0,left:0,margin:0,padding:0,zIndex:1}),Wp=g.forwardRef((function(e,g){const{autoFocus:l,checked:t,checkedIcon:n,className:o,defaultChecked:I,disabled:C,disableFocusRipple:r=!1,edge:a=!1,icon:i,id:c,inputProps:s,inputRef:d,name:u,onBlur:A,onChange:m,onFocus:b,readOnly:p,required:Z=!1,tabIndex:h,type:G,value:y}=e,B=(0,Ge.Z)(e,Bp),[S,V]=(0,rn.Z)({controlled:t,default:Boolean(I),name:"SwitchBase",state:"checked"}),W=Ee();let R=C;W&&void 0===R&&(R=W.disabled);const f="checkbox"===G||"radio"===G,v=(0,he.Z)({},e,{checked:S,disabled:R,disableFocusRipple:r,edge:a}),k=(e=>{const{classes:g,checked:l,disabled:t,edge:n}=e,o={root:["root",l&&"checked",t&&"disabled",n&&`edge${(0,Le.Z)(n)}`],input:["input"]};return(0,Be.Z)(o,yp,g)})(v);return(0,we.jsxs)(Sp,(0,he.Z)({component:"span",className:(0,ye.Z)(k.root,o),centerRipple:!0,focusRipple:!r,disabled:R,tabIndex:null,role:void 0,onFocus:e=>{b&&b(e),W&&W.onFocus&&W.onFocus(e)},onBlur:e=>{A&&A(e),W&&W.onBlur&&W.onBlur(e)},ownerState:v,ref:g},B,{children:[(0,we.jsx)(Vp,(0,he.Z)({autoFocus:l,checked:t,defaultChecked:I,className:k.input,disabled:R,id:f?c:void 0,name:u,onChange:e=>{if(e.nativeEvent.defaultPrevented)return;const g=e.target.checked;V(g),m&&m(e,g)},readOnly:p,ref:d,required:Z,ownerState:v,tabIndex:h,type:G},"checkbox"===G&&void 0===y?{}:{value:y},s)),S?n:i]}))})),Rp=(0,hn.Z)((0,we.jsx)("path",{d:"M19 5v14H5V5h14m0-2H5c-1.1 0-2 .9-2 2v14c0 1.1.9 2 2 2h14c1.1 0 2-.9 2-2V5c0-1.1-.9-2-2-2z"}),"CheckBoxOutlineBlank"),fp=(0,hn.Z)((0,we.jsx)("path",{d:"M19 3H5c-1.11 0-2 .9-2 2v14c0 1.1.89 2 2 2h14c1.11 0 2-.9 2-2V5c0-1.1-.89-2-2-2zm-9 14l-5-5 1.41-1.41L10 14.17l7.59-7.59L19 8l-9 9z"}),"CheckBox"),vp=(0,hn.Z)((0,we.jsx)("path",{d:"M19 3H5c-1.1 0-2 .9-2 2v14c0 1.1.9 2 2 2h14c1.1 0 2-.9 2-2V5c0-1.1-.9-2-2-2zm-2 10H7v-2h10v2z"}),"IndeterminateCheckBox");function kp(e){return(0,rg.Z)("MuiCheckbox",e)}const Xp=(0,Cg.Z)("MuiCheckbox",["root","checked","disabled","indeterminate","colorPrimary","colorSecondary","sizeSmall","sizeMedium"]),Jp=["checkedIcon","color","icon","indeterminate","indeterminateIcon","inputProps","size","className"],wp=(0,Ve.ZP)(Wp,{shouldForwardProp:e=>(0,Ve.FO)(e)||"classes"===e,name:"MuiCheckbox",slot:"Root",overridesResolver:(e,g)=>{const{ownerState:l}=e;return[g.root,l.indeterminate&&g.indeterminate,g[`size${(0,Le.Z)(l.size)}`],"default"!==l.color&&g[`color${(0,Le.Z)(l.color)}`]]}})((({theme:e,ownerState:g})=>(0,he.Z)({color:(e.vars||e).palette.text.secondary},!g.disableRipple&&{"&:hover":{backgroundColor:e.vars?`rgba(${"default"===g.color?e.vars.palette.action.activeChannel:e.vars.palette[g.color].mainChannel} / ${e.vars.palette.action.hoverOpacity})`:(0,Rt.Fq)("default"===g.color?e.palette.action.active:e.palette[g.color].main,e.palette.action.hoverOpacity),"@media (hover: none)":{backgroundColor:"transparent"}}},"default"!==g.color&&{[`&.${Xp.checked}, &.${Xp.indeterminate}`]:{color:(e.vars||e).palette[g.color].main},[`&.${Xp.disabled}`]:{color:(e.vars||e).palette.action.disabled}}))),Yp=(0,we.jsx)(fp,{}),Hp=(0,we.jsx)(Rp,{}),Fp=(0,we.jsx)(vp,{}),Np=g.forwardRef((function(e,l){var t,n;const o=(0,We.Z)({props:e,name:"MuiCheckbox"}),{checkedIcon:I=Yp,color:C="primary",icon:r=Hp,indeterminate:a=!1,indeterminateIcon:i=Fp,inputProps:c,size:s="medium",className:d}=o,u=(0,Ge.Z)(o,Jp),A=a?i:r,m=a?i:I,b=(0,he.Z)({},o,{color:C,indeterminate:a,size:s}),p=(e=>{const{classes:g,indeterminate:l,color:t,size:n}=e,o={root:["root",l&&"indeterminate",`color${(0,Le.Z)(t)}`,`size${(0,Le.Z)(n)}`]},I=(0,Be.Z)(o,kp,g);return(0,he.Z)({},g,I)})(b);return(0,we.jsx)(wp,(0,he.Z)({type:"checkbox",inputProps:(0,he.Z)({"data-indeterminate":a},c),icon:g.cloneElement(A,{fontSize:null!=(t=A.props.fontSize)?t:s}),checkedIcon:g.cloneElement(m,{fontSize:null!=(n=m.props.fontSize)?n:s}),ownerState:b,ref:l,className:(0,ye.Z)(p.root,d)},u,{classes:p}))})),Kp=["className","color","edge","size","sx"],xp=(0,Ve.ZP)("span",{name:"MuiSwitch",slot:"Root",overridesResolver:(e,g)=>{const{ownerState:l}=e;return[g.root,l.edge&&g[`edge${(0,Le.Z)(l.edge)}`],g[`size${(0,Le.Z)(l.size)}`]]}})((({ownerState:e})=>(0,he.Z)({display:"inline-flex",width:58,height:38,overflow:"hidden",padding:12,boxSizing:"border-box",position:"relative",flexShrink:0,zIndex:0,verticalAlign:"middle","@media print":{colorAdjust:"exact"}},"start"===e.edge&&{marginLeft:-8},"end"===e.edge&&{marginRight:-8},"small"===e.size&&{width:40,height:24,padding:7,[`& .${pm.thumb}`]:{width:16,height:16},[`& .${pm.switchBase}`]:{padding:4,[`&.${pm.checked}`]:{transform:"translateX(16px)"}}}))),Mp=(0,Ve.ZP)(Wp,{name:"MuiSwitch",slot:"SwitchBase",overridesResolver:(e,g)=>{const{ownerState:l}=e;return[g.switchBase,{[`& .${pm.input}`]:g.input},"default"!==l.color&&g[`color${(0,Le.Z)(l.color)}`]]}})((({theme:e})=>({position:"absolute",top:0,left:0,zIndex:1,color:e.vars?e.vars.palette.Switch.defaultColor:`${"light"===e.palette.mode?e.palette.common.white:e.palette.grey[300]}`,transition:e.transitions.create(["left","transform"],{duration:e.transitions.duration.shortest}),[`&.${pm.checked}`]:{transform:"translateX(20px)"},[`&.${pm.disabled}`]:{color:e.vars?e.vars.palette.Switch.defaultDisabledColor:`${"light"===e.palette.mode?e.palette.grey[100]:e.palette.grey[600]}`},[`&.${pm.checked} + .${pm.track}`]:{opacity:.5},[`&.${pm.disabled} + .${pm.track}`]:{opacity:e.vars?e.vars.opacity.switchTrackDisabled:""+("light"===e.palette.mode?.12:.2)},[`& .${pm.input}`]:{left:"-100%",width:"300%"}})),(({theme:e,ownerState:g})=>(0,he.Z)({"&:hover":{backgroundColor:e.vars?`rgba(${e.vars.palette.action.activeChannel} / ${e.vars.palette.action.hoverOpacity})`:(0,Rt.Fq)(e.palette.action.active,e.palette.action.hoverOpacity),"@media (hover: none)":{backgroundColor:"transparent"}}},"default"!==g.color&&{[`&.${pm.checked}`]:{color:(e.vars||e).palette[g.color].main,"&:hover":{backgroundColor:e.vars?`rgba(${e.vars.palette[g.color].mainChannel} / ${e.vars.palette.action.hoverOpacity})`:(0,Rt.Fq)(e.palette[g.color].main,e.palette.action.hoverOpacity),"@media (hover: none)":{backgroundColor:"transparent"}},[`&.${pm.disabled}`]:{color:e.vars?e.vars.palette.Switch[`${g.color}DisabledColor`]:`${"light"===e.palette.mode?(0,Rt.$n)(e.palette[g.color].main,.62):(0,Rt._j)(e.palette[g.color].main,.55)}`}},[`&.${pm.checked} + .${pm.track}`]:{backgroundColor:(e.vars||e).palette[g.color].main}}))),zp=(0,Ve.ZP)("span",{name:"MuiSwitch",slot:"Track",overridesResolver:(e,g)=>g.track})((({theme:e})=>({height:"100%",width:"100%",borderRadius:7,zIndex:-1,transition:e.transitions.create(["opacity","background-color"],{duration:e.transitions.duration.shortest}),backgroundColor:e.vars?e.vars.palette.common.onBackground:`${"light"===e.palette.mode?e.palette.common.black:e.palette.common.white}`,opacity:e.vars?e.vars.opacity.switchTrack:""+("light"===e.palette.mode?.38:.3)}))),Ep=(0,Ve.ZP)("span",{name:"MuiSwitch",slot:"Thumb",overridesResolver:(e,g)=>g.thumb})((({theme:e})=>({boxShadow:(e.vars||e).shadows[1],backgroundColor:"currentColor",width:20,height:20,borderRadius:"50%"}))),Lp=g.forwardRef((function(e,g){const l=(0,We.Z)({props:e,name:"MuiSwitch"}),{className:t,color:n="primary",edge:o=!1,size:I="medium",sx:C}=l,r=(0,Ge.Z)(l,Kp),a=(0,he.Z)({},l,{color:n,edge:o,size:I}),i=(e=>{const{classes:g,edge:l,size:t,color:n,checked:o,disabled:I}=e,C={root:["root",l&&`edge${(0,Le.Z)(l)}`,`size${(0,Le.Z)(t)}`],switchBase:["switchBase",`color${(0,Le.Z)(n)}`,o&&"checked",I&&"disabled"],thumb:["thumb"],track:["track"],input:["input"]},r=(0,Be.Z)(C,bm,g);return(0,he.Z)({},g,r)})(a),c=(0,we.jsx)(Ep,{className:i.thumb,ownerState:a});return(0,we.jsxs)(xp,{className:(0,ye.Z)(i.root,t),sx:C,ownerState:a,children:[(0,we.jsx)(Mp,(0,he.Z)({type:"checkbox",icon:c,checkedIcon:c,ref:g,ownerState:a},r,{classes:(0,he.Z)({},i,{root:i.switchBase})})),(0,we.jsx)(zp,{className:i.track,ownerState:a})]})}));function Up(e){return(0,rg.Z)("MuiInputAdornment",e)}const Qp=(0,Cg.Z)("MuiInputAdornment",["root","filled","standard","outlined","positionStart","positionEnd","disablePointerEvents","hiddenLabel","sizeSmall"]);var Dp;const Tp=["children","className","component","disablePointerEvents","disableTypography","position","variant"],Pp=(0,Ve.ZP)("div",{name:"MuiInputAdornment",slot:"Root",overridesResolver:(e,g)=>{const{ownerState:l}=e;return[g.root,g[`position${(0,Le.Z)(l.position)}`],!0===l.disablePointerEvents&&g.disablePointerEvents,g[l.variant]]}})((({theme:e,ownerState:g})=>(0,he.Z)({display:"flex",height:"0.01em",maxHeight:"2em",alignItems:"center",whiteSpace:"nowrap",color:(e.vars||e).palette.action.active},"filled"===g.variant&&{[`&.${Qp.positionStart}&:not(.${Qp.hiddenLabel})`]:{marginTop:16}},"start"===g.position&&{marginRight:8},"end"===g.position&&{marginLeft:8},!0===g.disablePointerEvents&&{pointerEvents:"none"}))),jp=g.forwardRef((function(e,l){const t=(0,We.Z)({props:e,name:"MuiInputAdornment"}),{children:n,className:o,component:I="div",disablePointerEvents:C=!1,disableTypography:r=!1,position:a,variant:i}=t,c=(0,Ge.Z)(t,Tp),s=Ee()||{};let d=i;i&&s.variant,s&&!d&&(d=s.variant);const u=(0,he.Z)({},t,{hiddenLabel:s.hiddenLabel,size:s.size,disablePointerEvents:C,position:a,variant:d}),A=(e=>{const{classes:g,disablePointerEvents:l,hiddenLabel:t,position:n,size:o,variant:I}=e,C={root:["root",l&&"disablePointerEvents",n&&`position${(0,Le.Z)(n)}`,I,t&&"hiddenLabel",o&&`size${(0,Le.Z)(o)}`]};return(0,Be.Z)(C,Up,g)})(u);return(0,we.jsx)(ze.Provider,{value:null,children:(0,we.jsx)(Pp,(0,he.Z)({as:I,ownerState:u,className:(0,ye.Z)(A.root,o),ref:l},c,{children:"string"!=typeof n||r?(0,we.jsxs)(g.Fragment,{children:["start"===a?Dp||(Dp=(0,we.jsx)("span",{className:"notranslate",children:""})):null,n]}):(0,we.jsx)(xm,{color:"text.secondary",children:n})}))})}));function Op(e){return(0,rg.Z)("MuiTooltip",e)}const qp=(0,Cg.Z)("MuiTooltip",["popper","popperInteractive","popperArrow","popperClose","tooltip","tooltipArrow","touch","tooltipPlacementLeft","tooltipPlacementRight","tooltipPlacementTop","tooltipPlacementBottom","arrow"]),$p=["arrow","children","classes","components","componentsProps","describeChild","disableFocusListener","disableHoverListener","disableInteractive","disableTouchListener","enterDelay","enterNextDelay","enterTouchDelay","followCursor","id","leaveDelay","leaveTouchDelay","onClose","onOpen","open","placement","PopperComponent","PopperProps","slotProps","slots","title","TransitionComponent","TransitionProps"],_p=(0,Ve.ZP)(yi,{name:"MuiTooltip",slot:"Popper",overridesResolver:(e,g)=>{const{ownerState:l}=e;return[g.popper,!l.disableInteractive&&g.popperInteractive,l.arrow&&g.popperArrow,!l.open&&g.popperClose]}})((({theme:e,ownerState:g,open:l})=>(0,he.Z)({zIndex:(e.vars||e).zIndex.tooltip,pointerEvents:"none"},!g.disableInteractive&&{pointerEvents:"auto"},!l&&{pointerEvents:"none"},g.arrow&&{[`&[data-popper-placement*="bottom"] .${qp.arrow}`]:{top:0,marginTop:"-0.71em","&::before":{transformOrigin:"0 100%"}},[`&[data-popper-placement*="top"] .${qp.arrow}`]:{bottom:0,marginBottom:"-0.71em","&::before":{transformOrigin:"100% 0"}},[`&[data-popper-placement*="right"] .${qp.arrow}`]:(0,he.Z)({},g.isRtl?{right:0,marginRight:"-0.71em"}:{left:0,marginLeft:"-0.71em"},{height:"1em",width:"0.71em","&::before":{transformOrigin:"100% 100%"}}),[`&[data-popper-placement*="left"] .${qp.arrow}`]:(0,he.Z)({},g.isRtl?{left:0,marginLeft:"-0.71em"}:{right:0,marginRight:"-0.71em"},{height:"1em",width:"0.71em","&::before":{transformOrigin:"0 0"}})}))),eZ=(0,Ve.ZP)("div",{name:"MuiTooltip",slot:"Tooltip",overridesResolver:(e,g)=>{const{ownerState:l}=e;return[g.tooltip,l.touch&&g.touch,l.arrow&&g.tooltipArrow,g[`tooltipPlacement${(0,Le.Z)(l.placement.split("-")[0])}`]]}})((({theme:e,ownerState:g})=>(0,he.Z)({backgroundColor:e.vars?e.vars.palette.Tooltip.bg:(0,Rt.Fq)(e.palette.grey[700],.92),borderRadius:(e.vars||e).shape.borderRadius,color:(e.vars||e).palette.common.white,fontFamily:e.typography.fontFamily,padding:"4px 8px",fontSize:e.typography.pxToRem(11),maxWidth:300,margin:2,wordWrap:"break-word",fontWeight:e.typography.fontWeightMedium},g.arrow&&{position:"relative",margin:0},g.touch&&{padding:"8px 16px",fontSize:e.typography.pxToRem(14),lineHeight:(16/14,Math.round(114285.71428571428)/1e5+"em"),fontWeight:e.typography.fontWeightRegular},{[`.${qp.popper}[data-popper-placement*="left"] &`]:(0,he.Z)({transformOrigin:"right center"},g.isRtl?(0,he.Z)({marginLeft:"14px"},g.touch&&{marginLeft:"24px"}):(0,he.Z)({marginRight:"14px"},g.touch&&{marginRight:"24px"})),[`.${qp.popper}[data-popper-placement*="right"] &`]:(0,he.Z)({transformOrigin:"left center"},g.isRtl?(0,he.Z)({marginRight:"14px"},g.touch&&{marginRight:"24px"}):(0,he.Z)({marginLeft:"14px"},g.touch&&{marginLeft:"24px"})),[`.${qp.popper}[data-popper-placement*="top"] &`]:(0,he.Z)({transformOrigin:"center bottom",marginBottom:"14px"},g.touch&&{marginBottom:"24px"}),[`.${qp.popper}[data-popper-placement*="bottom"] &`]:(0,he.Z)({transformOrigin:"center top",marginTop:"14px"},g.touch&&{marginTop:"24px"})}))),gZ=(0,Ve.ZP)("span",{name:"MuiTooltip",slot:"Arrow",overridesResolver:(e,g)=>g.arrow})((({theme:e})=>({overflow:"hidden",position:"absolute",width:"1em",height:"0.71em",boxSizing:"border-box",color:e.vars?e.vars.palette.Tooltip.bg:(0,Rt.Fq)(e.palette.grey[700],.9),"&::before":{content:'""',margin:"auto",display:"block",width:"100%",height:"100%",backgroundColor:"currentColor",transform:"rotate(45deg)"}})));let lZ=!1,tZ=null,nZ={x:0,y:0};function oZ(e,g){return l=>{g&&g(l),e(l)}}const IZ=g.forwardRef((function(e,l){var t,n,o,I,C,r,a,i,c,s,d,u,A,m,b,p,Z,h,G;const y=(0,We.Z)({props:e,name:"MuiTooltip"}),{arrow:B=!1,children:S,components:V={},componentsProps:W={},describeChild:R=!1,disableFocusListener:f=!1,disableHoverListener:v=!1,disableInteractive:k=!1,disableTouchListener:X=!1,enterDelay:J=100,enterNextDelay:w=0,enterTouchDelay:Y=700,followCursor:H=!1,id:F,leaveDelay:N=0,leaveTouchDelay:K=1500,onClose:x,onOpen:M,open:z,placement:E="bottom",PopperComponent:L,PopperProps:U={},slotProps:Q={},slots:D={},title:T,TransitionComponent:P=$l,TransitionProps:j}=y,O=(0,Ge.Z)(y,$p),q=g.isValidElement(S)?S:(0,we.jsx)("span",{children:S}),$=Ul(),_="rtl"===$.direction,[ee,ge]=g.useState(),[le,te]=g.useState(null),ne=g.useRef(!1),oe=k||H,Ie=g.useRef(),Ce=g.useRef(),re=g.useRef(),ae=g.useRef(),[ie,ce]=(0,rn.Z)({controlled:z,default:!1,name:"Tooltip",state:"open"});let se=ie;const de=(0,kA.Z)(F),ue=g.useRef(),Ae=g.useCallback((()=>{void 0!==ue.current&&(document.body.style.WebkitUserSelect=ue.current,ue.current=void 0),clearTimeout(ae.current)}),[]);g.useEffect((()=>()=>{clearTimeout(Ie.current),clearTimeout(Ce.current),clearTimeout(re.current),Ae()}),[Ae]);const me=e=>{clearTimeout(tZ),lZ=!0,ce(!0),M&&!se&&M(e)},be=(0,Fn.Z)((e=>{clearTimeout(tZ),tZ=setTimeout((()=>{lZ=!1}),800+N),ce(!1),x&&se&&x(e),clearTimeout(Ie.current),Ie.current=setTimeout((()=>{ne.current=!1}),$.transitions.duration.shortest)})),pe=e=>{ne.current&&"touchstart"!==e.type||(ee&&ee.removeAttribute("title"),clearTimeout(Ce.current),clearTimeout(re.current),J||lZ&&w?Ce.current=setTimeout((()=>{me(e)}),lZ?w:J):me(e))},Ze=e=>{clearTimeout(Ce.current),clearTimeout(re.current),re.current=setTimeout((()=>{be(e)}),N)},{isFocusVisibleRef:Se,onBlur:Ve,onFocus:Re,ref:fe}=(0,Nn.Z)(),[,ve]=g.useState(!1),ke=e=>{Ve(e),!1===Se.current&&(ve(!1),Ze(e))},Xe=e=>{ee||ge(e.currentTarget),Re(e),!0===Se.current&&(ve(!0),pe(e))},Je=e=>{ne.current=!0;const g=q.props;g.onTouchStart&&g.onTouchStart(e)},Ye=pe,He=Ze;g.useEffect((()=>{if(se)return document.addEventListener("keydown",e),()=>{document.removeEventListener("keydown",e)};function e(e){"Escape"!==e.key&&"Esc"!==e.key||be(e)}}),[be,se]);const Fe=(0,Ue.Z)(q.ref,fe,ge,l);T||0===T||(se=!1);const Ne=g.useRef(),Ke={},xe="string"==typeof T;R?(Ke.title=se||!xe||v?null:T,Ke["aria-describedby"]=se?de:null):(Ke["aria-label"]=xe?T:null,Ke["aria-labelledby"]=se&&!xe?de:null);const Me=(0,he.Z)({},Ke,O,q.props,{className:(0,ye.Z)(O.className,q.props.className),onTouchStart:Je,ref:Fe},H?{onMouseMove:e=>{const g=q.props;g.onMouseMove&&g.onMouseMove(e),nZ={x:e.clientX,y:e.clientY},Ne.current&&Ne.current.update()}}:{}),ze={};X||(Me.onTouchStart=e=>{Je(e),clearTimeout(re.current),clearTimeout(Ie.current),Ae(),ue.current=document.body.style.WebkitUserSelect,document.body.style.WebkitUserSelect="none",ae.current=setTimeout((()=>{document.body.style.WebkitUserSelect=ue.current,pe(e)}),Y)},Me.onTouchEnd=e=>{q.props.onTouchEnd&&q.props.onTouchEnd(e),Ae(),clearTimeout(re.current),re.current=setTimeout((()=>{be(e)}),K)}),v||(Me.onMouseOver=oZ(Ye,Me.onMouseOver),Me.onMouseLeave=oZ(He,Me.onMouseLeave),oe||(ze.onMouseOver=Ye,ze.onMouseLeave=He)),f||(Me.onFocus=oZ(Xe,Me.onFocus),Me.onBlur=oZ(ke,Me.onBlur),oe||(ze.onFocus=Xe,ze.onBlur=ke));const Ee=g.useMemo((()=>{var e;let g=[{name:"arrow",enabled:Boolean(le),options:{element:le,padding:4}}];return null!=(e=U.popperOptions)&&e.modifiers&&(g=g.concat(U.popperOptions.modifiers)),(0,he.Z)({},U.popperOptions,{modifiers:g})}),[le,U]),Qe=(0,he.Z)({},y,{isRtl:_,arrow:B,disableInteractive:oe,placement:E,PopperComponentProp:L,touch:ne.current}),De=(e=>{const{classes:g,disableInteractive:l,arrow:t,touch:n,placement:o}=e,I={popper:["popper",!l&&"popperInteractive",t&&"popperArrow"],tooltip:["tooltip",t&&"tooltipArrow",n&&"touch",`tooltipPlacement${(0,Le.Z)(o.split("-")[0])}`],arrow:["arrow"]};return(0,Be.Z)(I,Op,g)})(Qe),Te=null!=(t=null!=(n=D.popper)?n:V.Popper)?t:_p,Pe=null!=(o=null!=(I=null!=(C=D.transition)?C:V.Transition)?I:P)?o:$l,je=null!=(r=null!=(a=D.tooltip)?a:V.Tooltip)?r:eZ,Oe=null!=(i=null!=(c=D.arrow)?c:V.Arrow)?i:gZ,qe=dl(Te,(0,he.Z)({},U,null!=(s=Q.popper)?s:W.popper,{className:(0,ye.Z)(De.popper,null==U?void 0:U.className,null==(d=null!=(u=Q.popper)?u:W.popper)?void 0:d.className)}),Qe),$e=dl(Pe,(0,he.Z)({},j,null!=(A=Q.transition)?A:W.transition),Qe),_e=dl(je,(0,he.Z)({},null!=(m=Q.tooltip)?m:W.tooltip,{className:(0,ye.Z)(De.tooltip,null==(b=null!=(p=Q.tooltip)?p:W.tooltip)?void 0:b.className)}),Qe),eg=dl(Oe,(0,he.Z)({},null!=(Z=Q.arrow)?Z:W.arrow,{className:(0,ye.Z)(De.arrow,null==(h=null!=(G=Q.arrow)?G:W.arrow)?void 0:h.className)}),Qe);return(0,we.jsxs)(g.Fragment,{children:[g.cloneElement(q,Me),(0,we.jsx)(Te,(0,he.Z)({as:null!=L?L:yi,placement:E,anchorEl:H?{getBoundingClientRect:()=>({top:nZ.y,left:nZ.x,right:nZ.x,bottom:nZ.y,width:0,height:0})}:ee,popperRef:Ne,open:!!ee&&se,id:de,transition:!0},ze,qe,{popperOptions:Ee,children:({TransitionProps:e})=>(0,we.jsx)(Pe,(0,he.Z)({timeout:$.transitions.duration.shorter},e,$e,{children:(0,we.jsxs)(je,(0,he.Z)({},_e,{children:[T,B?(0,we.jsx)(Oe,(0,he.Z)({},eg,{ref:te})):null]}))}))}))]})})),CZ=["sortingOrder"],rZ=g.memo((function(e){const{sortingOrder:g}=e,l=(0,Ge.Z)(e,CZ),t=rI(),[n]=g,o="asc"===n?t.slots.columnSortedAscendingIcon:t.slots.columnSortedDescendingIcon;return o?(0,we.jsx)(o,(0,he.Z)({},l)):null})),aZ=(0,hn.Z)((0,we.jsx)("path",{d:"M4 12l1.41 1.41L11 7.83V20h2V7.83l5.58 5.59L20 12l-8-8-8 8z"}),"ArrowUpward"),iZ=(0,hn.Z)((0,we.jsx)("path",{d:"M20 12l-1.41-1.41L13 16.17V4h-2v12.17l-5.58-5.59L4 12l8 8 8-8z"}),"ArrowDownward"),cZ=(0,hn.Z)((0,we.jsx)("path",{d:"M8.59 16.59 13.17 12 8.59 7.41 10 6l6 6-6 6-1.41-1.41z"}),"KeyboardArrowRight"),sZ=(0,hn.Z)((0,we.jsx)("path",{d:"M16.59 8.59 12 13.17 7.41 8.59 6 10l6 6 6-6z"}),"ExpandMore"),dZ=(0,hn.Z)((0,we.jsx)("path",{d:"M10 18h4v-2h-4v2zM3 6v2h18V6H3zm3 7h12v-2H6v2z"}),"FilterList"),uZ=(0,hn.Z)((0,we.jsx)("path",{d:"M4.25 5.61C6.27 8.2 10 13 10 13v6c0 .55.45 1 1 1h2c.55 0 1-.45 1-1v-6s3.72-4.8 5.74-7.39c.51-.66.04-1.61-.79-1.61H5.04c-.83 0-1.3.95-.79 1.61z"}),"FilterAlt"),AZ=(0,hn.Z)((0,we.jsx)("path",{d:"M15.5 14h-.79l-.28-.27C15.41 12.59 16 11.11 16 9.5 16 5.91 13.09 3 9.5 3S3 5.91 3 9.5 5.91 16 9.5 16c1.61 0 3.09-.59 4.23-1.57l.27.28v.79l5 4.99L20.49 19l-4.99-5zm-6 0C7.01 14 5 11.99 5 9.5S7.01 5 9.5 5 14 7.01 14 9.5 11.99 14 9.5 14z"}),"Search"),mZ=((0,hn.Z)((0,we.jsx)("path",{d:"M3 18h18v-2H3v2zm0-5h18v-2H3v2zm0-7v2h18V6H3z"}),"Menu"),(0,hn.Z)((0,we.jsx)("path",{d:"M12 2C6.48 2 2 6.48 2 12s4.48 10 10 10 10-4.48 10-10S17.52 2 12 2zm-2 15l-5-5 1.41-1.41L10 14.17l7.59-7.59L19 8l-9 9z"}),"CheckCircle"),(0,hn.Z)((0,we.jsx)("path",{d:"M6 5H3c-.55 0-1 .45-1 1v12c0 .55.45 1 1 1h3c.55 0 1-.45 1-1V6c0-.55-.45-1-1-1zm14 0h-3c-.55 0-1 .45-1 1v12c0 .55.45 1 1 1h3c.55 0 1-.45 1-1V6c0-.55-.45-1-1-1zm-7 0h-3c-.55 0-1 .45-1 1v12c0 .55.45 1 1 1h3c.55 0 1-.45 1-1V6c0-.55-.45-1-1-1z"}),"ColumnIcon")),bZ=(0,hn.Z)((0,we.jsx)("path",{d:"M11 19V5h2v14z"}),"Separator"),pZ=(0,hn.Z)((0,we.jsx)("path",{d:"M4 15h16v-2H4v2zm0 4h16v-2H4v2zm0-8h16V9H4v2zm0-6v2h16V5H4z"}),"ViewHeadline"),ZZ=(0,hn.Z)((0,we.jsx)("path",{d:"M21,8H3V4h18V8z M21,10H3v4h18V10z M21,16H3v4h18V16z"}),"TableRows"),hZ=(0,hn.Z)((0,we.jsx)("path",{d:"M4 18h17v-6H4v6zM4 5v6h17V5H4z"}),"ViewStream"),GZ=(0,hn.Z)((0,we.jsx)("path",{d:"M12 8c1.1 0 2-.9 2-2s-.9-2-2-2-2 .9-2 2 .9 2 2 2zm0 2c-1.1 0-2 .9-2 2s.9 2 2 2 2-.9 2-2-.9-2-2-2zm0 6c-1.1 0-2 .9-2 2s.9 2 2 2 2-.9 2-2-.9-2-2-2z"}),"TripleDotsVertical"),yZ=(0,hn.Z)((0,we.jsx)("path",{d:"M19 6.41L17.59 5 12 10.59 6.41 5 5 6.41 10.59 12 5 17.59 6.41 19 12 13.41 17.59 19 19 17.59 13.41 12z"}),"Close"),BZ=(0,hn.Z)((0,we.jsx)("path",{d:"M19 13h-6v6h-2v-6H5v-2h6V5h2v6h6v2z"}),"Add"),SZ=(0,hn.Z)((0,we.jsx)("path",{d:"M19 13H5v-2h14v2z"}),"Remove"),VZ=(0,hn.Z)((0,we.jsx)("path",{d:"M12 4V1L8 5l4 4V6c3.31 0 6 2.69 6 6 0 1.01-.25 1.97-.7 2.8l1.46 1.46C19.54 15.03 20 13.57 20 12c0-4.42-3.58-8-8-8zm0 14c-3.31 0-6-2.69-6-6 0-1.01.25-1.97.7-2.8L5.24 7.74C4.46 8.97 4 10.43 4 12c0 4.42 3.58 8 8 8v3l4-4-4-4v3z"}),"Load"),WZ=(0,hn.Z)((0,we.jsx)("path",{d:"M11 18c0 1.1-.9 2-2 2s-2-.9-2-2 .9-2 2-2 2 .9 2 2zm-2-8c-1.1 0-2 .9-2 2s.9 2 2 2 2-.9 2-2-.9-2-2-2zm0-6c-1.1 0-2 .9-2 2s.9 2 2 2 2-.9 2-2-.9-2-2-2zm6 4c1.1 0 2-.9 2-2s-.9-2-2-2-2 .9-2 2 .9 2 2 2zm0 2c-1.1 0-2 .9-2 2s.9 2 2 2 2-.9 2-2-.9-2-2-2zm0 6c-1.1 0-2 .9-2 2s.9 2 2 2 2-.9 2-2-.9-2-2-2z"}),"Drag"),RZ=(0,hn.Z)((0,we.jsx)("path",{d:"M19 12v7H5v-7H3v7c0 1.1.9 2 2 2h14c1.1 0 2-.9 2-2v-7h-2zm-6 .67l2.59-2.58L17 11.5l-5 5-5-5 1.41-1.41L11 12.67V3h2z"}),"SaveAlt"),fZ=(0,hn.Z)((0,we.jsx)("path",{d:"M9 16.17L4.83 12l-1.42 1.41L9 19 21 7l-1.41-1.41z"}),"Check"),vZ=(0,hn.Z)((0,we.jsx)("path",{d:"M12 8c1.1 0 2-.9 2-2s-.9-2-2-2-2 .9-2 2 .9 2 2 2zm0 2c-1.1 0-2 .9-2 2s.9 2 2 2 2-.9 2-2-.9-2-2-2zm0 6c-1.1 0-2 .9-2 2s.9 2 2 2 2-.9 2-2-.9-2-2-2z"}),"MoreVert"),kZ=(0,hn.Z)((0,we.jsx)("path",{d:"M12 7c2.76 0 5 2.24 5 5 0 .65-.13 1.26-.36 1.83l2.92 2.92c1.51-1.26 2.7-2.89 3.43-4.75-1.73-4.39-6-7.5-11-7.5-1.4 0-2.74.25-3.98.7l2.16 2.16C10.74 7.13 11.35 7 12 7zM2 4.27l2.28 2.28.46.46C3.08 8.3 1.78 10.02 1 12c1.73 4.39 6 7.5 11 7.5 1.55 0 3.03-.3 4.38-.84l.42.42L19.73 22 21 20.73 3.27 3 2 4.27zM7.53 9.8l1.55 1.55c-.05.21-.08.43-.08.65 0 1.66 1.34 3 3 3 .22 0 .44-.03.65-.08l1.55 1.55c-.67.33-1.41.53-2.2.53-2.76 0-5-2.24-5-5 0-.79.2-1.53.53-2.2zm4.31-.78l3.15 3.15.02-.16c0-1.66-1.34-3-3-3l-.17.01z"}),"VisibilityOff"),XZ=(0,hn.Z)((0,we.jsx)("g",{children:(0,we.jsx)("path",{d:"M14.67,5v14H9.33V5H14.67z M15.67,19H21V5h-5.33V19z M8.33,19V5H3v14H8.33z"})}),"ViewColumn"),JZ=(0,hn.Z)((0,we.jsx)("path",{d:"M19 6.41L17.59 5 12 10.59 6.41 5 5 6.41 10.59 12 5 17.59 6.41 19 12 13.41 17.59 19 19 17.59 13.41 12z"}),"Clear"),wZ=((0,hn.Z)((0,we.jsx)("path",{d:"M6 19c0 1.1.9 2 2 2h8c1.1 0 2-.9 2-2V7H6v12zM19 4h-3.5l-1-1h-5l-1 1H5v2h14V4z"}),"Delete"),(0,hn.Z)((0,we.jsx)("path",{d:"M6 19c0 1.1.9 2 2 2h8c1.1 0 2-.9 2-2V7H6v12zm2.46-7.12l1.41-1.41L12 12.59l2.12-2.12 1.41 1.41L13.41 14l2.12 2.12-1.41 1.41L12 15.41l-2.12 2.12-1.41-1.41L10.59 14l-2.13-2.12zM15.5 4l-1-1h-5l-1 1H5v2h14V4z"}),"Delete")),YZ=["native"],HZ={BooleanCellTrueIcon:fZ,BooleanCellFalseIcon:yZ,ColumnMenuIcon:GZ,OpenFilterButtonIcon:dZ,FilterPanelDeleteIcon:yZ,ColumnFilteredIcon:uZ,ColumnSelectorIcon:mZ,ColumnUnsortedIcon:rZ,ColumnSortedAscendingIcon:aZ,ColumnSortedDescendingIcon:iZ,ColumnResizeIcon:bZ,DensityCompactIcon:pZ,DensityStandardIcon:ZZ,DensityComfortableIcon:hZ,ExportIcon:RZ,MoreActionsIcon:vZ,TreeDataCollapseIcon:sZ,TreeDataExpandIcon:cZ,GroupingCriteriaCollapseIcon:sZ,GroupingCriteriaExpandIcon:cZ,DetailPanelExpandIcon:BZ,DetailPanelCollapseIcon:SZ,RowReorderIcon:WZ,QuickFilterIcon:AZ,QuickFilterClearIcon:yZ,ColumnMenuHideIcon:kZ,ColumnMenuSortAscendingIcon:aZ,ColumnMenuSortDescendingIcon:iZ,ColumnMenuFilterIcon:uZ,ColumnMenuManageColumnsIcon:XZ,ColumnMenuClearIcon:JZ,LoadIcon:VZ,FilterPanelAddIcon:BZ,FilterPanelRemoveAllIcon:wZ,ColumnReorderIcon:WZ},FZ=(0,he.Z)({},HZ,{BaseCheckbox:Np,BaseTextField:Yn,BaseFormControl:ol,BaseSelect:vn,BaseSwitch:Lp,BaseButton:Zo,BaseIconButton:Ji,BaseInputAdornment:jp,BaseTooltip:IZ,BasePopper:yi,BaseInputLabel:el,BaseSelectOption:function(e){let{native:g}=e,l=(0,Ge.Z)(e,YZ);return g?(0,we.jsx)("option",(0,he.Z)({},l)):(0,we.jsx)(Bd,(0,he.Z)({},l))},BaseChip:Mi}),NZ=(0,he.Z)({},FZ,{Cell:db,SkeletonCell:function(e){const{align:g,width:l,contentWidth:t}=e,n=(0,Ge.Z)(e,Ru),o=(e=>{const{align:g,classes:l}=e,t={root:["cell","cellSkeleton",`cell--text${(0,zo.Z)(g)}`,"withBorderColor"]};return(0,Be.Z)(t,Eo,l)})({classes:rI().classes,align:g});return(0,we.jsx)("div",(0,he.Z)({className:o.root,style:{width:l}},n,{children:(0,we.jsx)(Wu,{width:`${t}%`})}))},ColumnHeaderFilterIconButton:function(e){var l,t;const{counter:n,field:o,onClick:I}=e,C=Ar(),r=rI(),a=(e=>{const{classes:g}=e;return(0,Be.Z)({icon:["filterIcon"]},Eo,g)})((0,he.Z)({},e,{classes:r.classes})),i=nI(C,jd),c=(0,Se.Z)(),s=(0,Se.Z)(),d=g.useCallback((e=>{e.preventDefault(),e.stopPropagation();const{open:g,openedPanelValue:l}=jd(C.current.state);g&&l===Id.filters?C.current.hideFilterPanel():C.current.showFilterPanel(void 0,s,c),I&&I(C.current.getColumnHeaderParams(o),e)}),[C,o,I,s,c]);if(!n)return null;const u=i.open&&i.labelId===c,A=(0,we.jsx)(r.slots.baseIconButton,(0,he.Z)({id:c,onClick:d,color:"default","aria-label":C.current.getLocaleText("columnHeaderFiltersLabel"),size:"small",tabIndex:-1,"aria-haspopup":"menu","aria-expanded":u,"aria-controls":u?s:void 0},null==(l=r.slotProps)?void 0:l.baseIconButton,{children:(0,we.jsx)(r.slots.columnFilteredIcon,{className:a.icon,fontSize:"small"})}));return(0,we.jsx)(r.slots.baseTooltip,(0,he.Z)({title:C.current.getLocaleText("columnHeaderFiltersTooltipActive")(n),enterDelay:1e3},null==(t=r.slotProps)?void 0:t.baseTooltip,{children:(0,we.jsxs)(Fu,{children:[n>1&&(0,we.jsx)(wu,{badgeContent:n,color:"default",children:A}),1===n&&A]})}))},ColumnMenu:hp,ColumnHeaders:$b,Footer:Lu,FooterRowCount:Du,Toolbar:null,PreferencesPanel:Tu,LoadingOverlay:cA,NoResultsOverlay:Gp,NoRowsOverlay:sA,Pagination:DA,FilterPanel:mm,ColumnsPanel:function(e){var l,t,n;const o=Ar(),I=g.useRef(null),C=nI(o,VI),r=nI(o,WI),a=rI(),[i,c]=g.useState(""),s=(e=>{const{classes:g}=e;return(0,Be.Z)({root:["columnsPanel"],columnsPanelRow:["columnsPanelRow"]},Eo,g)})(a),{sort:d,searchPredicate:u=_m,autoFocusSearchField:A=!0,disableHideAllButton:m=!1,disableShowAllButton:b=!1,getTogglableColumns:p}=e,Z=(0,Ge.Z)(e,jm),h=g.useMemo((()=>{switch(d){case"asc":return[...C].sort(((e,g)=>$m.compare(e.headerName||e.field,g.headerName||g.field)));case"desc":return[...C].sort(((e,g)=>-$m.compare(e.headerName||e.field,g.headerName||g.field)));default:return C}}),[C,d]),G=e=>{const{name:g}=e.target;o.current.setColumnVisibility(g,!1===r[g])},y=g.useCallback((e=>{const g=WI(o),l=(0,he.Z)({},g),t=p?p(C):null;return C.forEach((g=>{g.hideable&&(null==t||t.includes(g.field))&&(e?delete l[g.field]:l[g.field]=!1)})),o.current.setColumnVisibilityModel(l)}),[o,C,p]),B=g.useCallback((e=>{c(e.target.value)}),[]),S=g.useMemo((()=>{const e=p?p(h):null,g=e?h.filter((({field:g})=>e.includes(g))):h;return i?g.filter((e=>u(e,i.toLowerCase()))):g}),[h,i,u,p]),V=g.useRef(null);g.useEffect((()=>{A?I.current.focus():V.current&&"function"==typeof V.current.focus&&V.current.focus()}),[A]);let W=!1;const R=e=>!1===W&&!1!==e.hideable&&(W=!0,!0);return(0,we.jsxs)(lm,(0,he.Z)({},Z,{children:[(0,we.jsx)(Pm,{children:(0,we.jsx)(a.slots.baseTextField,(0,he.Z)({label:o.current.getLocaleText("columnsPanelTextFieldLabel"),placeholder:o.current.getLocaleText("columnsPanelTextFieldPlaceholder"),inputRef:I,value:i,onChange:B,variant:"standard",fullWidth:!0},null==(l=a.slotProps)?void 0:l.baseTextField))}),(0,we.jsx)(jA,{children:(0,we.jsx)(Om,{className:s.root,ownerState:a,children:S.map((e=>{var g;return(0,we.jsxs)(qm,{className:s.columnsPanelRow,ownerState:a,children:[(0,we.jsx)(Qm,{control:(0,we.jsx)(a.slots.baseSwitch,(0,he.Z)({disabled:!1===e.hideable,checked:!1!==r[e.field],onClick:G,name:e.field,size:"small",inputRef:R(e)?V:void 0},null==(g=a.slotProps)?void 0:g.baseSwitch)),label:e.headerName||e.field}),!a.disableColumnReorder&&!1]},e.field)}))})}),b&&m?null:(0,we.jsxs)($A,{children:[m?(0,we.jsx)("span",{}):(0,we.jsx)(a.slots.baseButton,(0,he.Z)({onClick:()=>y(!1)},null==(t=a.slotProps)?void 0:t.baseButton,{disabled:m,children:o.current.getLocaleText("columnsPanelHideAllButton")})),b?null:(0,we.jsx)(a.slots.baseButton,(0,he.Z)({onClick:()=>y(!0)},null==(n=a.slotProps)?void 0:n.baseButton,{disabled:b,children:o.current.getLocaleText("columnsPanelShowAllButton")}))]})]}))},Panel:nb,Row:bb}),KZ=e=>{if(void 0!==e)return Object.keys(e).reduce(((g,l)=>(0,he.Z)({},g,{[`${l.charAt(0).toLowerCase()}${l.slice(1)}`]:e[l]})),{})},xZ=["components","componentsProps"];function MZ(e){var g;const l=Object.keys(e);if(!l.some((e=>e.startsWith("aria-")||e.startsWith("data-"))))return e;const t={},n=null!=(g=e.forwardedProps)?g:{};for(let g=0;g<l.length;g+=1){const o=l[g];o.startsWith("aria-")||o.startsWith("data-")?n[o]=e[o]:t[o]=e[o]}return t.forwardedProps=n,t}const zZ={disableMultipleColumnsFiltering:!0,disableMultipleColumnsSorting:!0,disableMultipleRowSelection:!0,throttleRowsMs:void 0,hideFooterRowCount:!1,pagination:!0,checkboxSelectionVisibleOnly:!1,disableColumnReorder:!0,disableColumnResize:!0,keepColumnPositionIfDraggedOutside:!1,signature:"DataGrid"},EZ={autoHeight:!1,autoPageSize:!1,checkboxSelection:!1,checkboxSelectionVisibleOnly:!1,columnBuffer:3,rowBuffer:3,columnThreshold:3,rowThreshold:3,rowSelection:!0,density:"standard",disableColumnFilter:!1,disableColumnMenu:!1,disableColumnSelector:!1,disableDensitySelector:!1,disableEval:!1,disableMultipleColumnsFiltering:!1,disableMultipleRowSelection:!1,disableMultipleColumnsSorting:!1,disableRowSelectionOnClick:!1,disableVirtualization:!1,editMode:Ss.Cell,filterMode:"client",filterDebounceMs:150,columnHeaderHeight:56,hideFooter:!1,hideFooterPagination:!1,hideFooterRowCount:!1,hideFooterSelectedRowCount:!1,ignoreDiacritics:!1,logger:console,logLevel:"error",pagination:!1,paginationMode:"client",rowHeight:52,pageSizeOptions:[25,50,100],rowSpacingType:"margin",showCellVerticalBorder:!1,showColumnVerticalBorder:!1,sortingOrder:["asc","desc",null],sortingMode:"client",throttleRowsMs:0,disableColumnReorder:!1,disableColumnResize:!1,keepNonExistentRowsSelected:!1,keepColumnPositionIfDraggedOutside:!1,unstable_ignoreValueFormatterDuringExport:!1,clipboardCopyCellDelimiter:"\t",rowPositionsDebounceMs:166},LZ=KZ(NZ),UZ=e=>(0,he.Z)({},e,{rowsMeta:{currentPageTotalHeight:0,positions:[]}}),QZ=(e,g,l)=>"number"==typeof e&&e>0?e:g;function DZ(e){return void 0!==e.field}["MUI: The `rowHeight` prop should be a number greater than 0.","The default value will be used instead."].join("\n"),["MUI: The `getRowHeight` prop should return a number greater than 0 or 'auto'.","The default value will be used instead."].join("\n");const TZ=(e,g,l)=>{if(DZ(e)){if(void 0!==l[e.field])throw new Error(["MUI: columnGroupingModel contains duplicated field",`column field ${e.field} occurs two times in the grouping model:`,`- ${l[e.field].join(" > ")}`,`- ${g.join(" > ")}`].join("\n"));return void(l[e.field]=g)}const{groupId:t,children:n}=e;n.forEach((e=>{TZ(e,[...g,t],l)}))},PZ=e=>{if(!e)return{};const g={};return e.forEach((e=>{TZ(e,[],g)})),g},jZ=(e,g,l)=>{const t=e=>{var l;return null!=(l=g[e])?l:[]},n=[],o=Math.max(...e.map((e=>t(e).length))),I=(e,g,l)=>KC(t(e).slice(0,l+1),t(g).slice(0,l+1));for(let g=0;g<o;g+=1){const o=e.reduce(((e,n)=>{var o;const C=null!=(o=t(n)[g])?o:null;if(0===e.length)return[{columnFields:[n],groupId:C}];const r=e[e.length-1],a=r.columnFields[r.columnFields.length-1];return r.groupId!==C||!I(a,n,g)||(i=a,c=n,null!=l&&l.left&&l.left.includes(i)&&!l.left.includes(c)||null!=l&&l.right&&!l.right.includes(i)&&l.right.includes(c))?[...e,{columnFields:[n],groupId:C}]:[...e.slice(0,e.length-1),{columnFields:[...r.columnFields,n],groupId:C}];var i,c}),[]);n.push(o)}return n},OZ=["groupId","children"],qZ=e=>{let g={};return e.forEach((e=>{if(DZ(e))return;const{groupId:l,children:t}=e,n=(0,Ge.Z)(e,OZ);if(!l)throw new Error("MUI: An element of the columnGroupingModel does not have either `field` or `groupId`.");t||console.warn(`MUI: group groupId=${l} has no children.`);const o=(0,he.Z)({},n,{groupId:l}),I=qZ(t);if(void 0!==I[l]||void 0!==g[l])throw new Error(`MUI: The groupId ${l} is used multiple times in the columnGroupingModel.`);g=(0,he.Z)({},g,I,{[l]:o})})),(0,he.Z)({},g)},$Z=(e,g,l)=>{var t,n,o,I;if(null==(t=g.experimentalFeatures)||!t.columnGrouping)return e;const C=BI(l),r=fI(l),a=qZ(null!=(n=g.columnGroupingModel)?n:[]),i=PZ(null!=(o=g.columnGroupingModel)?o:[]),c=jZ(C,i,null!=(I=l.current.state.pinnedColumns)?I:{}),s=0===r.length?0:Math.max(...r.map((e=>{var g,l;return null!=(g=null==(l=i[e])?void 0:l.length)?g:0})));return(0,he.Z)({},e,{columnGrouping:{lookup:a,unwrappedGroupingModel:i,headerStructure:c,maxDepth:s}})},_Z=(e,g)=>{const l={enabled:!g.disableVirtualization,enabledForColumns:!0};return(0,he.Z)({},e,{virtualization:l})},eh=(e,l)=>{const t=Cr(e,l);return((e,l)=>{const t=(e=>{const{classes:l}=e;return g.useMemo((()=>(0,Be.Z)({cellCheckbox:["cellCheckbox"],columnHeaderCheckbox:["columnHeaderCheckbox"]},Eo,l)),[l])})({classes:l.classes}),n=g.useCallback((g=>{const n=(0,he.Z)({},qc,{cellClassName:t.cellCheckbox,headerClassName:t.columnHeaderCheckbox,headerName:e.current.getLocaleText("checkboxSelectionHeaderName")}),o=l.checkboxSelection,I=null!=g.lookup[Oc];return o&&!I?(g.lookup[Oc]=n,g.orderedFields=[Oc,...g.orderedFields]):!o&&I?(delete g.lookup[Oc],g.orderedFields=g.orderedFields.filter((e=>e!==Oc))):o&&I&&(g.lookup[Oc]=(0,he.Z)({},n,g.lookup[Oc])),g}),[e,t,l.checkboxSelection]);ns(e,"hydrateColumns",n)})(t,l),(e=>{Jd(e,or,"rowTreeCreation",ru)})(t),rr(cu,t,l),rr(rd,t,l),rr(Cu,t,l),rr(Iu,t,l),rr(xd,t,l),rr(su,t,l),rr(Od,t,l),rr(wd,t,l),rr(id,t,l),rr(kd,t,l),rr(UZ,t,l),rr(ls,t,l),rr($Z,t,l),rr(_Z,t,l),((e,l)=>{const t=ar(e,"useGridKeyboardNavigation"),n=Kd(e,l).rows,o=Ul(),I=g.useMemo((()=>function(e,g){const l=jI(e)||{};return[...l.top||[],...g,...l.bottom||[]]}(e,n)),[e,n]),C="DataGrid"!==l.signature&&l.unstable_headerFilters,r=g.useCallback(((g,l,n="left")=>{const o=sC(e),I=e.current.unstable_getCellColSpanInfo(l,g);I&&I.spannedByColSpan&&("left"===n?g=I.leftVisibleCellIndex:"right"===n&&(g=I.rightVisibleCellIndex));const C=o.findIndex((e=>e.id===l));t.debug(`Navigating to cell row ${C}, col ${g}`),e.current.scrollToIndexes({colIndex:g,rowIndex:C});const r=e.current.getVisibleColumns()[g].field;e.current.setCellFocus(l,r)}),[e,t]),a=g.useCallback(((g,l)=>{t.debug(`Navigating to header col ${g}`),e.current.scrollToIndexes({colIndex:g});const n=e.current.getVisibleColumns()[g].field;e.current.setColumnHeaderFocus(n,l)}),[e,t]),i=g.useCallback(((g,l)=>{t.debug(`Navigating to header filter col ${g}`),e.current.scrollToIndexes({colIndex:g});const n=e.current.getVisibleColumns()[g].field;e.current.setColumnHeaderFilterFocus(n,l)}),[e,t]),c=g.useCallback(((g,l,n)=>{t.debug(`Navigating to header col ${g}`),e.current.scrollToIndexes({colIndex:g});const{field:o}=e.current.getVisibleColumns()[g];e.current.setColumnGroupHeaderFocus(o,l,n)}),[e,t]),s=g.useCallback((e=>{var g;return null==(g=I[e])?void 0:g.id}),[I]),d=g.useCallback(((g,l)=>{const t=l.currentTarget.querySelector(`.${Lo.columnHeaderTitleContainerContent}`);if(t&&t.contains(l.target)&&g.field!==qc.field)return;if(!e.current.getRootDimensions())return;const n=e.current.getViewportPageSize(),d=g.field?e.current.getColumnIndex(g.field):0,u=I.length>0?0:null,A=I.length-1,m=RI(e).length-1,b=NI(e);let p=!0;switch(l.key){case"ArrowDown":null!==u&&(C?i(d,l):r(d,s(u)));break;case"ArrowRight":{const e=Pd({currentColIndex:d,firstColIndex:0,lastColIndex:m,direction:o.direction});null!==e&&a(e,l);break}case"ArrowLeft":{const e=Td({currentColIndex:d,firstColIndex:0,lastColIndex:m,direction:o.direction});null!==e&&a(e,l);break}case"ArrowUp":b>0&&c(d,b-1,l);break;case"PageDown":null!==u&&null!==A&&r(d,s(Math.min(u+n,A)));break;case"Home":a(0,l);break;case"End":a(m,l);break;case"Enter":(l.ctrlKey||l.metaKey)&&e.current.toggleColumnMenu(g.field);break;case" ":break;default:p=!1}p&&l.preventDefault()}),[e,I.length,C,i,r,s,o.direction,a,c]),u=g.useCallback(((g,l)=>{if(!e.current.getRootDimensions())return;const t=Ed(e)===g.field,n=Ld(e)===g.field;if(t||n||!ur(l.key))return;const C=e.current.getViewportPageSize(),c=g.field?e.current.getColumnIndex(g.field):0,d=I.length-1,u=RI(e).length-1;let A=!0;switch(l.key){case"ArrowDown":{const e=s(0);null!=e&&r(c,e);break}case"ArrowRight":{const e=Pd({currentColIndex:c,firstColIndex:0,lastColIndex:u,direction:o.direction});null!==e&&i(e,l);break}case"ArrowLeft":{const t=Td({currentColIndex:c,firstColIndex:0,lastColIndex:u,direction:o.direction});null!==t?i(t,l):e.current.setColumnHeaderFilterFocus(g.field,l);break}case"ArrowUp":a(c,l);break;case"PageDown":null!==d&&r(c,s(Math.min(0+C,d)));break;case"Home":i(0,l);break;case"End":i(u,l);break;case" ":break;default:A=!1}A&&l.preventDefault()}),[e,I.length,i,o.direction,a,r,s]),A=g.useCallback(((g,l)=>{if(!e.current.getRootDimensions())return;const t=SC(e);if(null===t)return;const{field:n,depth:o}=t,{fields:C,depth:i,maxDepth:d}=g,u=e.current.getViewportPageSize(),A=e.current.getColumnIndex(n),m=n?e.current.getColumnIndex(n):0,b=I.length-1,p=RI(e).length-1;let Z=!0;switch(l.key){case"ArrowDown":i===d-1?a(A,l):c(A,o+1,l);break;case"ArrowUp":i>0&&c(A,o-1,l);break;case"ArrowRight":{const e=C.length-C.indexOf(n)-1;A+e+1<=p&&c(A+e+1,o,l);break}case"ArrowLeft":{const e=C.indexOf(n);A-e-1>=0&&c(A-e-1,o,l);break}case"PageDown":null!==b&&r(m,s(Math.min(0+u,b)));break;case"Home":c(0,o,l);break;case"End":c(p,o,l);break;case" ":break;default:Z=!1}Z&&l.preventDefault()}),[e,I.length,a,c,r,s]),m=g.useCallback(((g,l)=>{if(Dd(l))return;const t=e.current.getCellParams(g.id,g.field);if(t.cellMode===Vs.Edit||!ur(l.key))return;if(!e.current.unstable_applyPipeProcessors("canUpdateFocus",!0,{event:l,cell:t}))return;const n=e.current.getRootDimensions();if(0===I.length||!n)return;const c=o.direction,d=e.current.getViewportPageSize(),u=g.field?e.current.getColumnIndex(g.field):0,A=I.findIndex((e=>e.id===g.id)),m=I.length-1,b=RI(e).length-1;let p=!0;switch(l.key){case"ArrowDown":A<m&&r(u,s(A+1));break;case"ArrowUp":A>0?r(u,s(A-1)):C?i(u,l):a(u,l);break;case"ArrowRight":{const e=Pd({currentColIndex:u,firstColIndex:0,lastColIndex:b,direction:c});null!==e&&r(e,s(A),"rtl"===c?"left":"right");break}case"ArrowLeft":{const e=Td({currentColIndex:u,firstColIndex:0,lastColIndex:b,direction:c});null!==e&&r(e,s(A),"rtl"===c?"right":"left");break}case"Tab":l.shiftKey&&u>0?r(u-1,s(A),"left"):!l.shiftKey&&u<b&&r(u+1,s(A),"right");break;case" ":{if(g.field===Md)break;const e=g.colDef;if(e&&"treeDataGroup"===e.type)break;!l.shiftKey&&A<m&&r(u,s(Math.min(A+d,m)));break}case"PageDown":A<m&&r(u,s(Math.min(A+d,m)));break;case"PageUp":{const e=Math.max(A-d,0);e!==A&&e>=0?r(u,s(e)):a(u,l);break}case"Home":l.ctrlKey||l.metaKey||l.shiftKey?r(0,s(0)):r(0,s(A));break;case"End":l.ctrlKey||l.metaKey||l.shiftKey?r(b,s(m)):r(b,s(A));break;default:p=!1}p&&l.preventDefault()}),[e,I,o.direction,r,s,C,i,a]),b=g.useCallback(((e,{event:g})=>" "!==g.key&&e),[]);ns(e,"canStartEditing",b),qC(e,"columnHeaderKeyDown",d),qC(e,"headerFilterKeyDown",u),qC(e,"columnGroupHeaderKeyDown",A),qC(e,"cellKeyDown",m)})(t,l),((e,l)=>{const t=ar(e,"useGridSelection"),n=e=>(...g)=>{l.rowSelection&&e(...g)},o=g.useMemo((()=>iu(l.rowSelectionModel,pr(e.current.state))),[e,l.rowSelectionModel]),I=g.useRef(null);e.current.registerControlState({stateId:"rowSelection",propModel:o,propOnChange:l.onRowSelectionModelChange,stateSelector:pr,changeEvent:"rowSelectionChange"});const{checkboxSelection:C,disableMultipleRowSelection:r,disableRowSelectionOnClick:a,isRowSelectable:i}=l,c=!r||C,s=Kd(e,l),d=g.useCallback((g=>{var l;let t=g;const n=null!=(l=I.current)?l:g,o=e.current.isRowSelected(g);if(o){const g=dC(e),l=g.findIndex((e=>e===n)),o=g.findIndex((e=>e===t));if(l===o)return;t=l>o?g[o+1]:g[o-1]}I.current=g,e.current.selectRowRange({startId:n,endId:t},!o)}),[e]),u=g.useCallback((g=>{if(l.signature===jC.DataGrid&&!l.checkboxSelection&&Array.isArray(g)&&g.length>1)throw new Error(["MUI: `rowSelectionModel` can only contain 1 item in DataGrid.","You need to upgrade to DataGridPro or DataGridPremium component to unlock multiple selection."].join("\n"));pr(e.current.state)!==g&&(t.debug("Setting selection model"),e.current.setState((e=>(0,he.Z)({},e,{rowSelection:l.rowSelection?g:[]}))),e.current.forceUpdate())}),[e,t,l.rowSelection,l.signature,l.checkboxSelection]),A=g.useCallback((g=>pr(e.current.state).includes(g)),[e]),m=g.useCallback((g=>{if(i&&!i(e.current.getRowParams(g)))return!1;const l=e.current.getRowNode(g);return"footer"!==(null==l?void 0:l.type)&&"pinnedRow"!==(null==l?void 0:l.type)}),[e,i]),b=g.useCallback((()=>hr(e)),[e]),p=g.useCallback(((g,l=!0,n=!1)=>{if(e.current.isRowSelectable(g))if(I.current=g,n)t.debug(`Setting selection for row ${g}`),e.current.setRowSelectionModel(l?[g]:[]);else{t.debug(`Toggling selection for row ${g}`);const n=pr(e.current.state).filter((e=>e!==g));l&&n.push(g),(n.length<2||c)&&e.current.setRowSelectionModel(n)}}),[e,t,c]),Z=g.useCallback(((g,l=!0,n=!1)=>{t.debug("Setting selection for several rows");const o=g.filter((g=>e.current.isRowSelectable(g)));let I;if(n)I=l?o:[];else{const g=(0,he.Z)({},Gr(e));o.forEach((e=>{l?g[e]=e:delete g[e]})),I=Object.values(g)}(I.length<2||c)&&e.current.setRowSelectionModel(I)}),[e,t,c]),h=g.useCallback((({startId:g,endId:l},n=!0,o=!1)=>{if(!e.current.getRow(g)||!e.current.getRow(l))return;t.debug(`Expanding selection from row ${g} to row ${l}`);const I=dC(e),C=I.indexOf(g),r=I.indexOf(l),[a,i]=C>r?[r,C]:[C,r],c=I.slice(a,i+1);e.current.selectRows(c,n,o)}),[e,t]),G={selectRows:Z,selectRowRange:h};MC(e,{selectRow:p,setRowSelectionModel:u,getSelectedRows:b,isRowSelected:A,isRowSelectable:m},"public"),MC(e,G,l.signature===jC.DataGrid?"private":"public");const y=g.useCallback((()=>{if(l.keepNonExistentRowsSelected)return;const g=pr(e.current.state),t=EI(e),n=(0,he.Z)({},Gr(e));let o=!1;g.forEach((e=>{t[e]||(delete n[e],o=!0)})),o&&e.current.setRowSelectionModel(Object.values(n))}),[e,l.keepNonExistentRowsSelected]),B=g.useCallback(((g,l)=>{const t=l.metaKey||l.ctrlKey,n=!C&&!t&&!(e=>!!e.key)(l),o=!c||n,I=e.current.isRowSelected(g);o?e.current.selectRow(g,!!n||!I,!0):e.current.selectRow(g,!I,!1)}),[e,c,C]),S=g.useCallback(((g,l)=>{var t;if(a)return;const n=null==(t=l.target.closest(`.${Lo.cell}`))?void 0:t.getAttribute("data-field");if(n!==qc.field&&n!==Md){if(n){const g=e.current.getColumn(n);if((null==g?void 0:g.type)===js)return}"pinnedRow"!==e.current.getRowNode(g.id).type&&(l.shiftKey&&(c||C)?d(g.id):B(g.id,l))}}),[a,c,C,e,d,B]),V=g.useCallback(((e,g)=>{var l;c&&g.shiftKey&&(null==(l=window.getSelection())||l.removeAllRanges())}),[c]),W=g.useCallback(((g,l)=>{l.nativeEvent.shiftKey?d(g.id):e.current.selectRow(g.id,g.value)}),[e,d]),R=g.useCallback((g=>{const t=l.checkboxSelectionVisibleOnly&&l.pagination?Xr(e):dC(e);e.current.selectRows(t,g.value)}),[e,l.checkboxSelectionVisibleOnly,l.pagination]),f=g.useCallback(((g,l)=>{if(e.current.getCellMode(g.id,g.field)!==Vs.Edit&&!Dd(l)){if(ur(l.key)&&l.shiftKey){const t=yC(e);if(t&&t.id!==g.id){l.preventDefault();const n=e.current.isRowSelected(t.id);if(!c)return void e.current.selectRow(t.id,!n,!0);const o=e.current.getRowIndexRelativeToVisibleRows(t.id),I=e.current.getRowIndexRelativeToVisibleRows(g.id);let C,r;o>I?n?(C=I,r=o-1):(C=I,r=o):n?(C=o+1,r=I):(C=o,r=I);const a=s.rows.slice(C,r+1).map((e=>e.id));return void e.current.selectRows(a,!n)}}if(" "===l.key&&l.shiftKey)return l.preventDefault(),void B(g.id,l);"a"===l.key&&(l.ctrlKey||l.metaKey)&&(l.preventDefault(),Z(e.current.getAllRowIds(),!0))}}),[e,B,Z,s.rows,c]);qC(e,"sortedRowsSet",n(y)),qC(e,"rowClick",n(S)),qC(e,"rowSelectionCheckboxChange",n(W)),qC(e,"headerSelectionCheckboxChange",R),qC(e,"cellMouseDown",n(V)),qC(e,"cellKeyDown",n(f)),g.useEffect((()=>{void 0!==o&&e.current.setRowSelectionModel(o)}),[e,o,l.rowSelection]),g.useEffect((()=>{l.rowSelection||e.current.setRowSelectionModel([])}),[e,l.rowSelection]);const v=null!=o;g.useEffect((()=>{if(v||!l.rowSelection)return;const g=pr(e.current.state);if(m){const l=g.filter((e=>m(e)));l.length<g.length&&e.current.setRowSelectionModel(l)}}),[e,m,v,l.rowSelection]),g.useEffect((()=>{if(!l.rowSelection||v)return;const g=pr(e.current.state);!c&&g.length>1&&e.current.setRowSelectionModel([])}),[e,c,C,v,l.rowSelection])})(t,l),function(e,l){var t,n;const o=ar(e,"useGridColumns"),I=Cd,C=g.useRef(l.columns),r=g.useRef(I);e.current.registerControlState({stateId:"visibleColumns",propModel:l.columnVisibilityModel,propOnChange:l.onColumnVisibilityModelChange,stateSelector:WI,changeEvent:"columnVisibilityModelChange"});const a=g.useCallback((g=>{o.debug("Updating columns state."),e.current.setState(ld(g)),e.current.forceUpdate(),e.current.publishEvent("columnsChange",g.orderedFields)}),[o,e]),i=g.useCallback((g=>SI(e)[g]),[e]),c=g.useCallback((()=>VI(e)),[e]),s=g.useCallback((()=>RI(e)),[e]),d=g.useCallback(((g,l=!0)=>(l?RI(e):VI(e)).findIndex((e=>e.field===g))),[e]),u=g.useCallback((g=>{const l=d(g);return vI(e)[l]}),[e,d]),A=g.useCallback((g=>{WI(e)!==g&&(e.current.setState((l=>(0,he.Z)({},l,{columns:gd({apiRef:e,columnTypes:I,columnsToUpsert:[],initialState:void 0,columnVisibilityModel:g,keepOnlyColumnsToUpsert:!1})}))),e.current.forceUpdate())}),[e,I]),m=g.useCallback((g=>{const l=gd({apiRef:e,columnTypes:I,columnsToUpsert:g,initialState:void 0,keepOnlyColumnsToUpsert:!1});a(l)}),[e,a,I]),b=g.useCallback(((g,l)=>{var t;const n=WI(e);if(l!==(null==(t=n[g])||t)){const t=(0,he.Z)({},n,{[g]:l});e.current.setColumnVisibilityModel(t)}}),[e]),p=g.useCallback((g=>BI(e).findIndex((e=>e===g))),[e]),Z=g.useCallback(((g,l)=>{const t=BI(e),n=p(g);if(n===l)return;o.debug(`Moving column ${g} to index ${l}`);const I=[...t],C=I.splice(n,1)[0];I.splice(l,0,C),a((0,he.Z)({},yI(e.current.state),{orderedFields:I}));const r={column:e.current.getColumn(g),targetIndex:e.current.getColumnIndexRelativeToVisibleColumns(g),oldIndex:n};e.current.publishEvent("columnIndexChange",r)}),[e,o,a,p]),h=g.useCallback(((g,l)=>{var t,n;o.debug(`Updating column ${g} width to ${l}`);const I=yI(e.current.state),C=I.lookup[g],r=(0,he.Z)({},C,{width:l,hasBeenResized:!0});a(_s((0,he.Z)({},I,{lookup:(0,he.Z)({},I.lookup,{[g]:r})}),null!=(t=null==(n=e.current.getRootDimensions())?void 0:n.viewportInnerSize.width)?t:0)),e.current.publishEvent("columnWidthChange",{element:e.current.getColumnHeaderElement(g),colDef:r,width:l})}),[e,o,a]),G={setColumnIndex:Z};MC(e,{getColumn:i,getAllColumns:c,getColumnIndex:d,getColumnPosition:u,getVisibleColumns:s,getColumnIndexRelativeToVisibleColumns:p,updateColumns:m,setColumnVisibilityModel:A,setColumnVisibility:b,setColumnWidth:h},"public"),MC(e,G,l.signature===jC.DataGrid?"private":"public");const y=g.useCallback(((g,t)=>{var n,o;const I={},C=WI(e);(!t.exportOnlyDirtyModels||null!=l.columnVisibilityModel||Object.keys(null!=(n=null==(o=l.initialState)||null==(o=o.columns)?void 0:o.columnVisibilityModel)?n:{}).length>0||Object.keys(C).length>0)&&(I.columnVisibilityModel=C),I.orderedFields=BI(e);const r=VI(e),a={};return r.forEach((e=>{if(e.hasBeenResized){const g={};$s.forEach((l=>{let t=e[l];t===1/0&&(t=-1),g[l]=t})),a[e.field]=g}})),Object.keys(a).length>0&&(I.dimensions=a),(0,he.Z)({},g,{columns:I})}),[e,l.columnVisibilityModel,null==(t=l.initialState)?void 0:t.columns]),B=g.useCallback(((g,l)=>{var t;const n=null==(t=l.stateToRestore.columns)?void 0:t.columnVisibilityModel,o=l.stateToRestore.columns;if(null==n&&null==o)return g;const C=gd({apiRef:e,columnTypes:I,columnsToUpsert:[],initialState:o,columnVisibilityModel:n,keepOnlyColumnsToUpsert:!1});return e.current.setState(ld(C)),null!=o&&e.current.publishEvent("columnsChange",C.orderedFields),g}),[e,I]),S=g.useCallback(((e,g)=>{if(g===Id.columns){var t;const e=l.slots.columnsPanel;return(0,we.jsx)(e,(0,he.Z)({},null==(t=l.slotProps)?void 0:t.columnsPanel))}return e}),[l.slots.columnsPanel,null==(n=l.slotProps)?void 0:n.columnsPanel]),V=g.useCallback((e=>l.disableColumnSelector?e:[...e,"columnMenuColumnsItem"]),[l.disableColumnSelector]);ns(e,"columnMenu",V),ns(e,"exportState",y),ns(e,"restoreState",B),ns(e,"preferencePanel",S);const W=g.useRef(null);qC(e,"viewportInnerSizeChange",(g=>{W.current!==g.width&&(W.current=g.width,a(_s(yI(e.current.state),g.width)))}));const R=g.useCallback((()=>{o.info("Columns pipe processing have changed, regenerating the columns");const g=gd({apiRef:e,columnTypes:I,columnsToUpsert:[],initialState:void 0,keepOnlyColumnsToUpsert:!1});a(g)}),[e,o,a,I]);os(e,"hydrateColumns",R);const f=g.useRef(!0);g.useEffect((()=>{if(f.current)return void(f.current=!1);if(o.info(`GridColumns have changed, new length ${l.columns.length}`),C.current===l.columns&&r.current===I)return;const g=gd({apiRef:e,columnTypes:I,initialState:void 0,columnsToUpsert:l.columns,keepOnlyColumnsToUpsert:!0});C.current=l.columns,r.current=I,a(g)}),[o,e,a,l.columns,I]),g.useEffect((()=>{void 0!==l.columnVisibilityModel&&e.current.setColumnVisibilityModel(l.columnVisibilityModel)}),[e,o,l.columnVisibilityModel])}(t,l),((e,l)=>{const t=ar(e,"useGridRows"),n=Kd(e,l),o=g.useRef(Date.now()),I=Dr(),C=g.useCallback((g=>{const l=EI(e)[g];if(l)return l;const t=e.current.getRowNode(g);return t&&Kc(t)?{[wc]:g}:null}),[e]),r=l.getRowId,a=g.useCallback((e=>wc in e?e[wc]:r?r(e):e.id),[r]),i=g.useMemo((()=>n.rows.reduce(((e,{id:g},l)=>(e[g]=l,e)),{})),[n.rows]),c=g.useCallback((({cache:g,throttle:t})=>{const n=()=>{o.current=Date.now(),e.current.setState((g=>(0,he.Z)({},g,{rows:Nc({apiRef:e,rowCountProp:l.rowCount,loadingProp:l.loading,previousTree:UI(e),previousTreeDepths:DI(e)})}))),e.current.publishEvent("rowsSet"),e.current.forceUpdate()};if(I.clear(),e.current.caches.rows=g,!t)return void n();const C=l.throttleRowsMs-(Date.now()-o.current);C>0?I.start(C,n):n()}),[l.throttleRowsMs,l.rowCount,l.loading,e,I]),s=g.useCallback((g=>{t.debug(`Updating all rows, new length ${g.length}`);const n=Hc({rows:g,getRowId:l.getRowId,loading:l.loading,rowCount:l.rowCount}),o=e.current.caches.rows;n.rowsBeforePartialUpdates=o.rowsBeforePartialUpdates,c({cache:n,throttle:!0})}),[t,l.getRowId,l.loading,l.rowCount,c,e]),d=g.useCallback((g=>{if(l.signature===jC.DataGrid&&g.length>1)throw new Error(["MUI: You can't update several rows at once in `apiRef.current.updateRows` on the DataGrid.","You need to upgrade to DataGridPro or DataGridPremium component to unlock this feature."].join("\n"));const t=[];g.forEach((g=>{const n=Yc(g,l.getRowId,"A row was provided without id when calling updateRows():"),o=e.current.getRowNode(n);if("pinnedRow"===(null==o?void 0:o.type)){const l=e.current.caches.pinnedRows,t=l.idLookup[n];t&&(l.idLookup[n]=(0,he.Z)({},t,g))}else t.push(g)}));const n=(({previousCache:e,getRowId:g,updates:l})=>{var t,n,o;if("full"===e.updates.type)throw new Error("MUI: Unable to prepare a partial update if a full update is not applied yet");const I=new Map;l.forEach((e=>{const l=Yc(e,g,"A row was provided without id when calling updateRows():");I.has(l)?I.set(l,(0,he.Z)({},I.get(l),e)):I.set(l,e)}));const C={type:"partial",actions:{insert:[...null!=(t=e.updates.actions.insert)?t:[]],modify:[...null!=(n=e.updates.actions.modify)?n:[]],remove:[...null!=(o=e.updates.actions.remove)?o:[]]},idToActionLookup:(0,he.Z)({},e.updates.idToActionLookup)},r=(0,he.Z)({},e.dataRowIdToModelLookup),a=(0,he.Z)({},e.dataRowIdToIdLookup),i={insert:{},modify:{},remove:{}};I.forEach(((e,g)=>{const l=C.idToActionLookup[g];if("delete"===e._action){if("remove"===l||!r[g])return;return null!=l&&(i[l][g]=!0),C.actions.remove.push(g),delete r[g],void delete a[g]}const t=r[g];if(t)return"remove"===l?(i.remove[g]=!0,C.actions.modify.push(g)):null==l&&C.actions.modify.push(g),void(r[g]=(0,he.Z)({},t,e));"remove"===l?(i.remove[g]=!0,C.actions.insert.push(g)):null==l&&C.actions.insert.push(g),r[g]=e,a[g]=g}));const c=Object.keys(i);for(let e=0;e<c.length;e+=1){const g=c[e],l=i[g];Object.keys(l).length>0&&(C.actions[g]=C.actions[g].filter((e=>!l[e])))}return{dataRowIdToModelLookup:r,dataRowIdToIdLookup:a,updates:C,rowsBeforePartialUpdates:e.rowsBeforePartialUpdates,loadingPropBeforePartialUpdates:e.loadingPropBeforePartialUpdates,rowCountPropBeforePartialUpdates:e.rowCountPropBeforePartialUpdates}})({updates:t,getRowId:l.getRowId,previousCache:e.current.caches.rows});c({cache:n,throttle:!0})}),[l.signature,l.getRowId,c,e]),u=g.useCallback((()=>{const g=PI(e),l=EI(e);return new Map(g.map((e=>{var g;return[e,null!=(g=l[e])?g:{}]})))}),[e]),A=g.useCallback((()=>xI(e)),[e]),m=g.useCallback((()=>PI(e)),[e]),b=g.useCallback((e=>i[e]),[i]),p=g.useCallback(((g,l)=>{const t=e.current.getRowNode(g);if(!t)throw new Error(`MUI: No row with id #${g} found`);if("group"!==t.type)throw new Error("MUI: Only group nodes can be expanded or collapsed");const n=(0,he.Z)({},t,{childrenExpanded:l});e.current.setState((e=>(0,he.Z)({},e,{rows:(0,he.Z)({},e.rows,{tree:(0,he.Z)({},e.rows.tree,{[g]:n})})}))),e.current.forceUpdate(),e.current.publishEvent("rowExpansionChange",n)}),[e]),Z=g.useCallback((g=>{var l;return null!=(l=UI(e)[g])?l:null}),[e]),h=g.useCallback((({skipAutoGeneratedRows:g=!0,groupId:l,applySorting:t,applyFiltering:n})=>{const o=UI(e);let I;if(t){const t=o[l];if(!t)return[];const n=oC(e);I=[];for(let e=n.findIndex((e=>e===l))+1;e<n.length&&o[n[e]].depth>t.depth;e+=1){const l=n[e];g&&Kc(o[l])||I.push(l)}}else I=xc(o,l,g);if(n){const g=cC(e);I=I.filter((e=>!1!==g[e]))}return I}),[e]),G=g.useCallback(((g,l)=>{const n=e.current.getRowNode(g);if(!n)throw new Error(`MUI: No row with id #${g} found`);if(n.parent!==Jc)throw new Error("MUI: The row reordering do not support reordering of grouped rows yet");if("leaf"!==n.type)throw new Error("MUI: The row reordering do not support reordering of footer or grouping rows");e.current.setState((n=>{const o=UI(n,e.current.instanceId)[Jc],I=o.children,C=I.findIndex((e=>e===g));if(-1===C||C===l)return n;t.debug(`Moving row ${g} to index ${l}`);const r=[...I];return r.splice(l,0,r.splice(C,1)[0]),(0,he.Z)({},n,{rows:(0,he.Z)({},n.rows,{tree:(0,he.Z)({},n.rows.tree,{[Jc]:(0,he.Z)({},o,{children:r})})})})})),e.current.publishEvent("rowsSet")}),[e,t]),y={getRow:C,getRowId:a,getRowModels:u,getRowsCount:A,getAllRowIds:m,setRows:s,updateRows:d,getRowNode:Z,getRowIndexRelativeToVisibleRows:b,unstable_replaceRows:g.useCallback(((g,t)=>{if(l.signature===jC.DataGrid&&t.length>1)throw new Error(["MUI: You can't replace rows using `apiRef.current.unstable_replaceRows` on the DataGrid.","You need to upgrade to DataGridPro or DataGridPremium component to unlock this feature."].join("\n"));if(0===t.length)return;if(TI(e)>1)throw new Error("`apiRef.current.unstable_replaceRows` is not compatible with tree data and row grouping");const n=(0,he.Z)({},UI(e)),o=(0,he.Z)({},EI(e)),I=(0,he.Z)({},LI(e)),C=n[Jc],r=[...C.children];for(let e=0;e<t.length;e+=1){const C=t[e],a=Yc(C,l.getRowId,"A row was provided without id when calling replaceRows()."),[i]=r.splice(g+e,1,a);delete o[i],delete I[i],delete n[i];const c={id:a,depth:0,parent:Jc,type:"leaf",groupingKey:null};o[a]=C,I[a]=a,n[a]=c}n[Jc]=(0,he.Z)({},C,{children:r});const a=r.filter((e=>"leaf"===n[e].type));e.current.caches.rows.dataRowIdToModelLookup=o,e.current.caches.rows.dataRowIdToIdLookup=I,e.current.setState((e=>(0,he.Z)({},e,{rows:(0,he.Z)({},e.rows,{dataRowIdToModelLookup:o,dataRowIdToIdLookup:I,dataRowIds:a,tree:n})}))),e.current.publishEvent("rowsSet")}),[e,l.signature,l.getRowId])},B={setRowIndex:G,setRowChildrenExpansion:p,getRowGroupChildren:h},S=g.useCallback((()=>{let g;t.info("Row grouping pre-processing have changed, regenerating the row tree"),g=e.current.caches.rows.rowsBeforePartialUpdates===l.rows?(0,he.Z)({},e.current.caches.rows,{updates:{type:"full",rows:PI(e)}}):Hc({rows:l.rows,getRowId:l.getRowId,loading:l.loading,rowCount:l.rowCount}),c({cache:g,throttle:!1})}),[t,e,l.rows,l.getRowId,l.loading,l.rowCount,c]),V=g.useCallback((e=>{"rowTreeCreation"===e&&S()}),[S]),W=g.useCallback((()=>{e.current.getActiveStrategy("rowTree")!==QI(e)&&S()}),[e,S]);qC(e,"activeStrategyProcessorChange",V),qC(e,"strategyAvailabilityChange",W);const R=g.useCallback((()=>{e.current.setState((g=>{const t=e.current.unstable_applyPipeProcessors("hydrateRows",{tree:UI(g,e.current.instanceId),treeDepths:DI(g,e.current.instanceId),dataRowIds:PI(g,e.current.instanceId),dataRowIdToModelLookup:EI(g,e.current.instanceId),dataRowIdToIdLookup:LI(g,e.current.instanceId)});return(0,he.Z)({},g,{rows:(0,he.Z)({},g.rows,t,{totalTopLevelRowCount:Fc({tree:t.tree,rowCountProp:l.rowCount})})})})),e.current.publishEvent("rowsSet"),e.current.forceUpdate()}),[e,l.rowCount]);os(e,"hydrateRows",R),MC(e,y,"public"),MC(e,B,l.signature===jC.DataGrid?"private":"public");const f=g.useRef(!0);g.useEffect((()=>{if(f.current)return void(f.current=!1);const g=e.current.caches.rows.rowsBeforePartialUpdates===l.rows,n=e.current.caches.rows.loadingPropBeforePartialUpdates===l.loading,o=e.current.caches.rows.rowCountPropBeforePartialUpdates===l.rowCount;if(g)return n||(e.current.setState((e=>(0,he.Z)({},e,{rows:(0,he.Z)({},e.rows,{loading:l.loading})}))),e.current.caches.rows.loadingPropBeforePartialUpdates=l.loading,e.current.forceUpdate()),void(o||(e.current.setState((e=>(0,he.Z)({},e,{rows:(0,he.Z)({},e.rows,{totalRowCount:Math.max(l.rowCount||0,e.rows.totalRowCount),totalTopLevelRowCount:Math.max(l.rowCount||0,e.rows.totalTopLevelRowCount)})}))),e.current.caches.rows.rowCountPropBeforePartialUpdates=l.rowCount,e.current.forceUpdate()));t.debug(`Updating all rows, new length ${l.rows.length}`),c({cache:Hc({rows:l.rows,getRowId:l.getRowId,loading:l.loading,rowCount:l.rowCount}),throttle:!1})}),[l.rows,l.rowCount,l.getRowId,l.loading,t,c,e])})(t,l),function(e,l){const{getRowId:t}=l,n=g.useCallback((g=>({field:g,colDef:e.current.getColumn(g)})),[e]),o=g.useCallback((g=>{const l=e.current.getRow(g);if(!l)throw new au(`No row with id #${g} found`);return{id:g,columns:e.current.getAllColumns(),row:l}}),[e]),I=g.useCallback(((g,l)=>{const t=e.current.getRow(g),n=e.current.getRowNode(g);if(!t||!n)throw new au(`No row with id #${g} found`);const o=yC(e),I=WC(e);return{id:g,field:l,row:t,rowNode:n,value:t[l],colDef:e.current.getColumn(l),cellMode:e.current.getCellMode(g,l),api:e.current,hasFocus:null!==o&&o.field===l&&o.id===g,tabIndex:I&&I.field===l&&I.id===g?0:-1}}),[e]),C=g.useCallback(((g,l)=>{const t=e.current.getColumn(l),n=e.current.getCellValue(g,l),o=e.current.getRow(g),I=e.current.getRowNode(g);if(!o||!I)throw new au(`No row with id #${g} found`);const C=yC(e),r=WC(e),a={id:g,field:l,row:o,rowNode:I,colDef:t,cellMode:e.current.getCellMode(g,l),hasFocus:null!==C&&C.field===l&&C.id===g,tabIndex:r&&r.field===l&&r.id===g?0:-1,value:n,formattedValue:n,isEditable:!1};return t&&t.valueFormatter&&(a.formattedValue=t.valueFormatter({id:g,field:a.field,value:a.value,api:e.current})),a.isEditable=t&&e.current.isCellEditable(a),a}),[e]),r=g.useCallback(((g,l)=>{const t=e.current.getColumn(l);if(!t||!t.valueGetter){const t=e.current.getRow(g);if(!t)throw new au(`No row with id #${g} found`);return t[l]}return t.valueGetter(I(g,l))}),[e,I]),a=g.useCallback(((e,g)=>{var l;const n=wc in e?e[wc]:null!=(l=null==t?void 0:t(e))?l:e.id,o=g.field;return g&&g.valueGetter?g.valueGetter(I(n,o)):e[o]}),[I,t]),i=g.useCallback(((g,l)=>{var n;const o=a(g,l);if(!l||!l.valueFormatter)return o;const I=null!=(n=t?t(g):g.id)?n:g[wc],C=l.field;return l.valueFormatter({id:I,field:C,value:o,api:e.current})}),[e,t,a]),c=g.useCallback((g=>e.current.rootElementRef.current?function(e,g){return e.querySelector(`[role="columnheader"][data-field="${Ud(g)}"]`)}(e.current.rootElementRef.current,g):null),[e]),s=g.useCallback((g=>e.current.rootElementRef.current?function(e,g){return e.querySelector(Qd(g))}(e.current.rootElementRef.current,g):null),[e]),d=g.useCallback(((g,l)=>e.current.rootElementRef.current?function(e,{id:g,field:l}){const t=`${Qd(g)} .${Lo.cell}[data-field="${Ud(l)}"]`;return e.querySelector(t)}(e.current.rootElementRef.current,{id:g,field:l}):null),[e]);MC(e,{getCellValue:r,getCellParams:C,getCellElement:d,getRowValue:a,getRowFormattedValue:i,getRowParams:o,getRowElement:s,getColumnHeaderParams:n,getColumnHeaderElement:c},"public")}(t,l),(e=>{const l=g.useRef({}),t=g.useCallback(((e,g,t)=>{const n=l.current;n[e]||(n[e]={}),n[e][g]=t}),[]),n=g.useCallback(((e,g)=>{var t;return null==(t=l.current[e])?void 0:t[g]}),[]),o=g.useCallback((g=>{const{columnIndex:l,rowId:n,minFirstColumnIndex:o,maxLastColumnIndex:I,columns:C}=g,r=C.length,a=C[l],i="function"==typeof a.colSpan?a.colSpan(e.current.getCellParams(n,a.field)):a.colSpan;if(!i||1===i)return t(n,l,{spannedByColSpan:!1,cellProps:{colSpan:1,width:a.computedWidth}}),{colSpan:1};let c=a.computedWidth;for(let e=1;e<i;e+=1){const g=l+e;g>=o&&g<I&&(c+=C[g].computedWidth,t(n,l+e,{spannedByColSpan:!0,rightVisibleCellIndex:Math.min(l+i,r-1),leftVisibleCellIndex:l})),t(n,l,{spannedByColSpan:!1,cellProps:{colSpan:i,width:c}})}return{colSpan:i}}),[e,t]),I={calculateColSpan:g.useCallback((({rowId:e,minFirstColumn:g,maxLastColumn:l,columns:t})=>{for(let n=g;n<l;n+=1){const I=o({columnIndex:n,rowId:e,minFirstColumnIndex:g,maxLastColumnIndex:l,columns:t});I.colSpan>1&&(n+=I.colSpan-1)}}),[o])};MC(e,{unstable_getCellColSpanInfo:n},"public"),MC(e,I,"private");const C=g.useCallback((()=>{l.current={}}),[]);qC(e,"columnOrderChange",C)})(t),((e,l)=>{var t;const n=g.useCallback((g=>{var l;return null!=(l=YI(e)[g])?l:[]}),[e]),o=g.useCallback((()=>HI(e)),[e]);MC(e,{unstable_getColumnGroupPath:n,unstable_getAllGroupDetails:o},"public");const I=g.useCallback((()=>{var g;const t=PZ(null!=(g=l.columnGroupingModel)?g:[]);e.current.setState((e=>{var g,l,n;const o=null!=(g=null==(l=e.columns)?void 0:l.orderedFields)?g:[],I=null!=(n=e.pinnedColumns)?n:{},C=jZ(o,t,I);return(0,he.Z)({},e,{columnGrouping:(0,he.Z)({},e.columnGrouping,{headerStructure:C})})}))}),[e,l.columnGroupingModel]),C=g.useCallback((g=>{var t,n,o,I;if(null==(t=l.experimentalFeatures)||!t.columnGrouping)return;const C=null!=(n=null==(o=(I=e.current).getPinnedColumns)?void 0:o.call(I))?n:{},r=BI(e),a=fI(e),i=qZ(null!=g?g:[]),c=PZ(null!=g?g:[]),s=jZ(r,c,C),d=0===a.length?0:Math.max(...a.map((e=>{var g,l;return null!=(g=null==(l=c[e])?void 0:l.length)?g:0})));e.current.setState((e=>(0,he.Z)({},e,{columnGrouping:{lookup:i,unwrappedGroupingModel:c,headerStructure:s,maxDepth:d}})))}),[e,null==(t=l.experimentalFeatures)?void 0:t.columnGrouping]);qC(e,"columnIndexChange",I),qC(e,"columnsChange",(()=>{C(l.columnGroupingModel)})),qC(e,"columnVisibilityModelChange",(()=>{C(l.columnGroupingModel)})),g.useEffect((()=>{C(l.columnGroupingModel)}),[C,l.columnGroupingModel])})(t,l),((e,l)=>{((e,l)=>{const[t,n]=g.useState({}),o=g.useRef(t),I=g.useRef({}),{processRowUpdate:C,onProcessRowUpdateError:r,cellModesModel:a,onCellModesModelChange:i}=l,c=e=>(...g)=>{l.editMode===Ss.Cell&&e(...g)},s=g.useCallback(((g,l)=>{const t=e.current.getCellParams(g,l);if(!e.current.isCellEditable(t))throw new Error(`MUI: The cell with id=${g} and field=${l} is not editable.`)}),[e]),d=g.useCallback(((g,l,t)=>{if(e.current.getCellMode(g,l)!==t)throw new Error(`MUI: The cell with id=${g} and field=${l} is not in ${t} mode.`)}),[e]),u=g.useCallback(((g,l)=>{if(!g.isEditable)return;if(g.cellMode===Vs.Edit)return;const t=(0,he.Z)({},g,{reason:ys.cellDoubleClick});e.current.publishEvent("cellEditStart",t,l)}),[e]),A=g.useCallback(((g,l)=>{if(g.cellMode===Vs.View)return;if(e.current.getCellMode(g.id,g.field)===Vs.View)return;const t=(0,he.Z)({},g,{reason:Bs.cellFocusOut});e.current.publishEvent("cellEditStop",t,l)}),[e]),m=g.useCallback(((g,l)=>{if(g.cellMode===Vs.Edit){if(229===l.which)return;let t;if("Escape"===l.key?t=Bs.escapeKeyDown:"Enter"===l.key?t=Bs.enterKeyDown:"Tab"===l.key&&(t=l.shiftKey?Bs.shiftTabKeyDown:Bs.tabKeyDown,l.preventDefault()),t){const n=(0,he.Z)({},g,{reason:t});e.current.publishEvent("cellEditStop",n,l)}}else if(g.isEditable){let t;if(!e.current.unstable_applyPipeProcessors("canStartEditing",!0,{event:l,cellParams:g,editMode:"cell"}))return;if(dr(l)?t=ys.printableKeyDown:(l.ctrlKey||l.metaKey)&&"v"===l.key?t=ys.pasteKeyDown:"Enter"===l.key?t=ys.enterKeyDown:"Delete"!==l.key&&"Backspace"!==l.key||(t=ys.deleteKeyDown),t){const n=(0,he.Z)({},g,{reason:t,key:l.key});e.current.publishEvent("cellEditStart",n,l)}}}),[e]),b=g.useCallback((g=>{const{id:l,field:t,reason:n}=g,o={id:l,field:t};n!==ys.printableKeyDown&&n!==ys.deleteKeyDown&&n!==ys.pasteKeyDown||(o.deleteValue=!0),e.current.startCellEditMode(o)}),[e]),p=g.useCallback((g=>{const{id:l,field:t,reason:n}=g;let o;e.current.runPendingEditCellValueMutation(l,t),n===Bs.enterKeyDown?o="below":n===Bs.tabKeyDown?o="right":n===Bs.shiftTabKeyDown&&(o="left");const I="escapeKeyDown"===n;e.current.stopCellEditMode({id:l,field:t,ignoreModifications:I,cellToFocusAfter:o})}),[e]);qC(e,"cellDoubleClick",c(u)),qC(e,"cellFocusOut",c(A)),qC(e,"cellKeyDown",c(m)),qC(e,"cellEditStart",c(b)),qC(e,"cellEditStop",c(p)),_C(e,"cellEditStart",l.onCellEditStart),_C(e,"cellEditStop",l.onCellEditStop);const Z=g.useCallback(((g,l)=>{const t=qd(e.current.state);return t[g]&&t[g][l]?Vs.Edit:Vs.View}),[e]),h=(0,et.Z)((g=>{const t=g!==l.cellModesModel;i&&t&&i(g,{}),l.cellModesModel&&t||(n(g),o.current=g,e.current.publishEvent("cellModesModelChange",g))})),G=g.useCallback(((e,g,l)=>{const t=(0,he.Z)({},o.current);if(null!==l)t[e]=(0,he.Z)({},t[e],{[g]:(0,he.Z)({},l)});else{const l=t[e],n=(0,Ge.Z)(l,[g].map(nr));t[e]=n,0===Object.keys(t[e]).length&&delete t[e]}h(t)}),[h]),y=g.useCallback(((g,l,t)=>{e.current.setState((e=>{const n=(0,he.Z)({},e.editRows);return null!==t?n[g]=(0,he.Z)({},n[g],{[l]:(0,he.Z)({},t)}):(delete n[g][l],0===Object.keys(n[g]).length&&delete n[g]),(0,he.Z)({},e,{editRows:n})})),e.current.forceUpdate()}),[e]),B=g.useCallback((e=>{const{id:g,field:l}=e,t=(0,Ge.Z)(e,$d);s(g,l),d(g,l,Vs.View),G(g,l,(0,he.Z)({mode:Vs.Edit},t))}),[s,d,G]),S=(0,et.Z)((g=>{const{id:l,field:t,deleteValue:n,initialValue:o}=g;let I=e.current.getCellValue(l,t);(n||o)&&(I=n?"":o),y(l,t,{value:I,error:!1,isProcessingProps:!1}),e.current.setCellFocus(l,t)})),V=g.useCallback((e=>{const{id:g,field:l}=e,t=(0,Ge.Z)(e,_d);d(g,l,Vs.Edit),G(g,l,(0,he.Z)({mode:Vs.View},t))}),[d,G]),W=(0,et.Z)((async g=>{const{id:l,field:t,ignoreModifications:n,cellToFocusAfter:o="none"}=g;d(l,t,Vs.Edit),e.current.runPendingEditCellValueMutation(l,t);const a=()=>{y(l,t,null),G(l,t,null),"none"!==o&&e.current.moveFocusToRelativeCell(l,t,o)};if(n)return void a();const i=qd(e.current.state),{error:c,isProcessingProps:s}=i[l][t];if(c||s)return I.current[l][t].mode=Vs.Edit,void G(l,t,{mode:Vs.Edit});const u=e.current.getRowWithUpdatedValuesFromCellEditing(l,t);if(C){const g=e=>{I.current[l][t].mode=Vs.Edit,G(l,t,{mode:Vs.Edit}),r?r(e):eu()};try{const t=e.current.getRow(l);Promise.resolve(C(u,t)).then((g=>{e.current.updateRows([g]),a()})).catch(g)}catch(e){g(e)}}else e.current.updateRows([u]),a()})),R={setCellEditingEditCellValue:g.useCallback((async g=>{var l;const{id:t,field:n,value:o,debounceMs:I,unstable_skipValueParser:C}=g;s(t,n),d(t,n,Vs.Edit);const r=e.current.getColumn(n),a=e.current.getRow(t);let i=o;r.valueParser&&!C&&(i=r.valueParser(o,e.current.getCellParams(t,n)));let c=qd(e.current.state),u=(0,he.Z)({},c[t][n],{value:i,changeReason:I?"debouncedSetEditCellValue":"setEditCellValue"});if(r.preProcessEditCellProps){const e=o!==c[t][n].value;u=(0,he.Z)({},u,{isProcessingProps:!0}),y(t,n,u),u=await Promise.resolve(r.preProcessEditCellProps({id:t,row:a,props:u,hasChanged:e}))}return e.current.getCellMode(t,n)!==Vs.View&&(c=qd(e.current.state),u=(0,he.Z)({},u,{isProcessingProps:!1}),u.value=r.preProcessEditCellProps?c[t][n].value:i,y(t,n,u),c=qd(e.current.state),!(null!=(l=c[t])&&null!=(l=l[n])&&l.error))}),[e,s,d,y]),getRowWithUpdatedValuesFromCellEditing:g.useCallback(((g,l)=>{const t=e.current.getColumn(l),n=qd(e.current.state),o=e.current.getRow(g);if(!n[g]||!n[g][l])return e.current.getRow(g);const{value:I}=n[g][l];return t.valueSetter?t.valueSetter({value:I,row:o}):(0,he.Z)({},o,{[l]:I})}),[e])};MC(e,{getCellMode:Z,startCellEditMode:B,stopCellEditMode:V},"public"),MC(e,R,"private"),g.useEffect((()=>{a&&h(a)}),[a,h]),(0,Xe.Z)((()=>{const g=LI(e),l=I.current;I.current=xC(t),Object.entries(t).forEach((([e,t])=>{Object.entries(t).forEach((([t,n])=>{var o,I;const C=(null==(o=l[e])||null==(o=o[t])?void 0:o.mode)||Vs.View,r=null!=(I=g[e])?I:e;n.mode===Vs.Edit&&C===Vs.View?S((0,he.Z)({id:r,field:t},n)):n.mode===Vs.View&&C===Vs.Edit&&W((0,he.Z)({id:r,field:t},n))}))}))}),[e,t,S,W])})(e,l),((e,l)=>{const[t,n]=g.useState({}),o=g.useRef(t),I=g.useRef({}),C=g.useRef(null),r=g.useRef(null),{processRowUpdate:a,onProcessRowUpdateError:i,rowModesModel:c,onRowModesModelChange:s}=l,d=e=>(...g)=>{l.editMode===Ss.Row&&e(...g)},u=g.useCallback(((g,l)=>{const t=e.current.getCellParams(g,l);if(!e.current.isCellEditable(t))throw new Error(`MUI: The cell with id=${g} and field=${l} is not editable.`)}),[e]),A=g.useCallback(((g,l)=>{if(e.current.getRowMode(g)!==l)throw new Error(`MUI: The row with id=${g} is not in ${l} mode.`)}),[e]),m=g.useCallback(((g,l)=>{if(!g.isEditable)return;if(e.current.getRowMode(g.id)===Ws.Edit)return;const t=e.current.getRowParams(g.id),n=(0,he.Z)({},t,{field:g.field,reason:gu.cellDoubleClick});e.current.publishEvent("rowEditStart",n,l)}),[e]),b=g.useCallback((e=>{r.current=e}),[]),p=g.useCallback(((g,l)=>{g.isEditable&&e.current.getRowMode(g.id)!==Ws.View&&(r.current=null,C.current=setTimeout((()=>{var t;if(C.current=null,(null==(t=r.current)?void 0:t.id)!==g.id){if(!e.current.getRow(g.id))return;if(e.current.getRowMode(g.id)===Ws.View)return;const t=e.current.getRowParams(g.id),n=(0,he.Z)({},t,{field:g.field,reason:lu.rowFocusOut});e.current.publishEvent("rowEditStop",n,l)}})))}),[e]);g.useEffect((()=>()=>{clearTimeout(C.current)}),[]);const Z=g.useCallback(((g,l)=>{if(g.cellMode===Ws.Edit){if(229===l.which)return;let t;if("Escape"===l.key)t=lu.escapeKeyDown;else if("Enter"===l.key)t=lu.enterKeyDown;else if("Tab"===l.key){const n=fI(e).filter((l=>e.current.getColumn(l).type===js||e.current.isCellEditable(e.current.getCellParams(g.id,l))));if(l.shiftKey?g.field===n[0]&&(t=lu.shiftTabKeyDown):g.field===n[n.length-1]&&(t=lu.tabKeyDown),l.preventDefault(),!t){const t=n.findIndex((e=>e===g.field)),o=n[l.shiftKey?t-1:t+1];e.current.setCellFocus(g.id,o)}}if(t){const n=(0,he.Z)({},e.current.getRowParams(g.id),{reason:t,field:g.field});e.current.publishEvent("rowEditStop",n,l)}}else if(g.isEditable){let t;if(!e.current.unstable_applyPipeProcessors("canStartEditing",!0,{event:l,cellParams:g,editMode:"row"}))return;if(dr(l)||(l.ctrlKey||l.metaKey)&&"v"===l.key?t=gu.printableKeyDown:"Enter"===l.key?t=gu.enterKeyDown:"Delete"!==l.key&&"Backspace"!==l.key||(t=gu.deleteKeyDown),t){const n=e.current.getRowParams(g.id),o=(0,he.Z)({},n,{field:g.field,reason:t});e.current.publishEvent("rowEditStart",o,l)}}}),[e]),h=g.useCallback((g=>{const{id:l,field:t,reason:n}=g,o={id:l,fieldToFocus:t};n!==gu.printableKeyDown&&n!==gu.deleteKeyDown||(o.deleteValue=!!t),e.current.startRowEditMode(o)}),[e]),G=g.useCallback((g=>{const{id:l,reason:t,field:n}=g;let o;e.current.runPendingEditCellValueMutation(l),t===lu.enterKeyDown?o="below":t===lu.tabKeyDown?o="right":t===lu.shiftTabKeyDown&&(o="left");const I="escapeKeyDown"===t;e.current.stopRowEditMode({id:l,ignoreModifications:I,field:n,cellToFocusAfter:o})}),[e]);qC(e,"cellDoubleClick",d(m)),qC(e,"cellFocusIn",d(b)),qC(e,"cellFocusOut",d(p)),qC(e,"cellKeyDown",d(Z)),qC(e,"rowEditStart",d(h)),qC(e,"rowEditStop",d(G)),_C(e,"rowEditStart",l.onRowEditStart),_C(e,"rowEditStop",l.onRowEditStop);const y=g.useCallback((g=>{if(l.editMode===Ss.Cell)return Ws.View;const t=qd(e.current.state);return t[g]&&Object.keys(t[g]).length>0?Ws.Edit:Ws.View}),[e,l.editMode]),B=(0,et.Z)((g=>{const t=g!==l.rowModesModel;s&&t&&s(g,{}),l.rowModesModel&&t||(n(g),o.current=g,e.current.publishEvent("rowModesModelChange",g))})),S=g.useCallback(((e,g)=>{const l=(0,he.Z)({},o.current);null!==g?l[e]=(0,he.Z)({},g):delete l[e],B(l)}),[B]),V=g.useCallback(((g,l)=>{e.current.setState((e=>{const t=(0,he.Z)({},e.editRows);return null!==l?t[g]=l:delete t[g],(0,he.Z)({},e,{editRows:t})})),e.current.forceUpdate()}),[e]),W=g.useCallback(((g,l,t)=>{e.current.setState((e=>{const n=(0,he.Z)({},e.editRows);return null!==t?n[g]=(0,he.Z)({},n[g],{[l]:(0,he.Z)({},t)}):(delete n[g][l],0===Object.keys(n[g]).length&&delete n[g]),(0,he.Z)({},e,{editRows:n})})),e.current.forceUpdate()}),[e]),R=g.useCallback((e=>{const{id:g}=e,l=(0,Ge.Z)(e,tu);A(g,Ws.View),S(g,(0,he.Z)({mode:Ws.Edit},l))}),[A,S]),f=(0,et.Z)((g=>{const{id:l,fieldToFocus:t,deleteValue:n,initialValue:o}=g,I=BI(e).reduce(((g,I)=>{if(!e.current.getCellParams(l,I).isEditable)return g;let C=e.current.getCellValue(l,I);return t===I&&(n||o)&&(C=n?"":o),g[I]={value:C,error:!1,isProcessingProps:!1},g}),{});V(l,I),t&&e.current.setCellFocus(l,t)})),v=g.useCallback((e=>{const{id:g}=e,l=(0,Ge.Z)(e,nu);A(g,Ws.Edit),S(g,(0,he.Z)({mode:Ws.View},l))}),[A,S]),k=(0,et.Z)((g=>{const{id:l,ignoreModifications:t,field:n,cellToFocusAfter:o="none"}=g;e.current.runPendingEditCellValueMutation(l);const C=()=>{"none"!==o&&n&&e.current.moveFocusToRelativeCell(l,n,o),V(l,null),S(l,null)};if(t)return void C();const r=qd(e.current.state),c=e.current.getRow(l);if(Object.values(r[l]).some((e=>e.isProcessingProps)))return void(I.current[l].mode=Ws.Edit);if(Object.values(r[l]).some((e=>e.error)))return I.current[l].mode=Ws.Edit,void S(l,{mode:Ws.Edit});const s=e.current.getRowWithUpdatedValuesFromRowEditing(l);if(a){const g=e=>{I.current[l].mode=Ws.Edit,S(l,{mode:Ws.Edit}),i?i(e):ou()};try{Promise.resolve(a(s,c)).then((g=>{e.current.updateRows([g]),C()})).catch(g)}catch(e){g(e)}}else e.current.updateRows([s]),C()})),X={setRowEditingEditCellValue:g.useCallback((g=>{const{id:l,field:t,value:n,debounceMs:o,unstable_skipValueParser:I}=g;u(l,t);const C=e.current.getColumn(t),r=e.current.getRow(l);let a=n;C.valueParser&&!I&&(a=C.valueParser(n,e.current.getCellParams(l,t)));let i=qd(e.current.state),c=(0,he.Z)({},i[l][t],{value:a,changeReason:o?"debouncedSetEditCellValue":"setEditCellValue"});return C.preProcessEditCellProps||W(l,t,c),new Promise((g=>{const n=[];if(C.preProcessEditCellProps){const o=c.value!==i[l][t].value;c=(0,he.Z)({},c,{isProcessingProps:!0}),W(l,t,c);const I=i[l],s=(0,Ge.Z)(I,[t].map(nr)),d=Promise.resolve(C.preProcessEditCellProps({id:l,row:r,props:c,hasChanged:o,otherFieldsProps:s})).then((n=>{e.current.getRowMode(l)!==Ws.View?(i=qd(e.current.state),(n=(0,he.Z)({},n,{isProcessingProps:!1})).value=C.preProcessEditCellProps?i[l][t].value:a,W(l,t,n)):g(!1)}));n.push(d)}Object.entries(i[l]).forEach((([o,I])=>{if(o===t)return;const C=e.current.getColumn(o);if(!C.preProcessEditCellProps)return;I=(0,he.Z)({},I,{isProcessingProps:!0}),W(l,o,I),i=qd(e.current.state);const a=i[l],c=(0,Ge.Z)(a,[o].map(nr)),s=Promise.resolve(C.preProcessEditCellProps({id:l,row:r,props:I,hasChanged:!1,otherFieldsProps:c})).then((t=>{e.current.getRowMode(l)!==Ws.View?(t=(0,he.Z)({},t,{isProcessingProps:!1}),W(l,o,t)):g(!1)}));n.push(s)})),Promise.all(n).then((()=>{e.current.getRowMode(l)===Ws.Edit?(i=qd(e.current.state),g(!i[l][t].error)):g(!1)}))}))}),[e,u,W]),getRowWithUpdatedValuesFromRowEditing:g.useCallback((g=>{const l=qd(e.current.state),t=e.current.getRow(g);if(!l[g])return e.current.getRow(g);let n=(0,he.Z)({},t);return Object.entries(l[g]).forEach((([g,l])=>{const t=e.current.getColumn(g);t.valueSetter?n=t.valueSetter({value:l.value,row:n}):n[g]=l.value})),n}),[e])};MC(e,{getRowMode:y,startRowEditMode:R,stopRowEditMode:v},"public"),MC(e,X,"private"),g.useEffect((()=>{c&&B(c)}),[c,B]),(0,Xe.Z)((()=>{const g=LI(e),l=I.current;I.current=xC(t),Object.entries(t).forEach((([e,t])=>{var n,o;const I=(null==(n=l[e])?void 0:n.mode)||Ws.View,C=null!=(o=g[e])?o:e;t.mode===Ws.Edit&&I===Ws.View?f((0,he.Z)({id:C},t)):t.mode===Ws.View&&I===Ws.Edit&&k((0,he.Z)({id:C},t))}))}),[e,t,f,k])})(e,l);const t=g.useRef({}),{isCellEditable:n}=l,o=g.useCallback((e=>!Kc(e.rowNode)&&!!e.colDef.editable&&!!e.colDef.renderEditCell&&(!n||n(e))),[n]);g.useEffect((()=>{const e=t.current;return()=>{Object.entries(e).forEach((([g,l])=>{Object.keys(l).forEach((l=>{const[t]=e[g][l];clearTimeout(t),delete e[g][l]}))}))}}),[]);const I=g.useCallback(((e,g)=>{if(t.current[e])if(g){if(t.current[e][g]){const[,l]=t.current[e][g];l()}}else Object.keys(t.current[e]).forEach((g=>{const[,l]=t.current[e][g];l()}))}),[]),C=g.useCallback((g=>{const{id:n,field:o,debounceMs:I}=g;return new Promise((C=>{((e,g,l,n)=>{if(!l)return void n();if(t.current[e]||(t.current[e]={}),t.current[e][g]){const[l]=t.current[e][g];clearTimeout(l)}const o=setTimeout((()=>{n(),delete t.current[e][g]}),l);t.current[e][g]=[o,()=>{const[l]=t.current[e][g];clearTimeout(l),n(),delete t.current[e][g]}]})(n,o,I,(async()=>{const t=l.editMode===Ss.Row?e.current.setRowEditingEditCellValue:e.current.setCellEditingEditCellValue;if(e.current.getCellMode(n,o)===Vs.Edit){const e=await t(g);C(e)}}))}))}),[e,l.editMode]),r=g.useCallback(((g,t)=>l.editMode===Ss.Cell?e.current.getRowWithUpdatedValuesFromCellEditing(g,t):e.current.getRowWithUpdatedValuesFromRowEditing(g)),[e,l.editMode]),a=g.useCallback(((g,l)=>{var t,n;return null!=(t=null==(n=qd(e.current.state)[g])?void 0:n[l])?t:null}),[e]),i={runPendingEditCellValueMutation:I};MC(e,{isCellEditable:o,setEditCellValue:C,getRowWithUpdatedValues:r,unstable_getEditCellMeta:a},"public"),MC(e,i,"private")})(t,l),((e,l)=>{const t=ar(e,"useGridFocus"),n=g.useRef(null),o=g.useCallback(((g,l)=>{g&&e.current.getRow(g.id)&&e.current.publishEvent("cellFocusOut",e.current.getCellParams(g.id,g.field),l)}),[e]),I=g.useCallback(((g,l)=>{const n=yC(e);(null==n?void 0:n.id)===g&&(null==n?void 0:n.field)===l||(e.current.setState((e=>(t.debug(`Focusing on cell with id=${g} and field=${l}`),(0,he.Z)({},e,{tabIndex:{cell:{id:g,field:l},columnHeader:null,columnHeaderFilter:null,columnGroupHeader:null},focus:{cell:{id:g,field:l},columnHeader:null,columnHeaderFilter:null,columnGroupHeader:null}})))),e.current.forceUpdate(),e.current.getRow(g)&&(n&&o(n,{}),e.current.publishEvent("cellFocusIn",e.current.getCellParams(g,l))))}),[e,t,o]),C=g.useCallback(((g,l={})=>{const n=yC(e);o(n,l),e.current.setState((e=>(t.debug(`Focusing on column header with colIndex=${g}`),(0,he.Z)({},e,{tabIndex:{columnHeader:{field:g},columnHeaderFilter:null,cell:null,columnGroupHeader:null},focus:{columnHeader:{field:g},columnHeaderFilter:null,cell:null,columnGroupHeader:null}})))),e.current.forceUpdate()}),[e,t,o]),r=g.useCallback(((g,l={})=>{const n=yC(e);o(n,l),e.current.setState((e=>(t.debug(`Focusing on column header filter with colIndex=${g}`),(0,he.Z)({},e,{tabIndex:{columnHeader:null,columnHeaderFilter:{field:g},cell:null,columnGroupHeader:null},focus:{columnHeader:null,columnHeaderFilter:{field:g},cell:null,columnGroupHeader:null}})))),e.current.forceUpdate()}),[e,t,o]),a=g.useCallback(((g,l,t={})=>{const n=yC(e);n&&e.current.publishEvent("cellFocusOut",e.current.getCellParams(n.id,n.field),t),e.current.setState((e=>(0,he.Z)({},e,{tabIndex:{columnGroupHeader:{field:g,depth:l},columnHeader:null,columnHeaderFilter:null,cell:null},focus:{columnGroupHeader:{field:g,depth:l},columnHeader:null,columnHeaderFilter:null,cell:null}}))),e.current.forceUpdate()}),[e]),i=g.useCallback((()=>SC(e)),[e]),c=g.useCallback(((g,t,n)=>{let o=e.current.getColumnIndex(t);const I=RI(e),C=Nd(e,{pagination:l.pagination,paginationMode:l.paginationMode}),r=jI(e),a=[].concat(r.top||[],C.rows,r.bottom||[]);let i=a.findIndex((e=>e.id===g));"right"===n?o+=1:"left"===n?o-=1:i+=1,o>=I.length?(i+=1,i<a.length&&(o=0)):o<0&&(i-=1,i>=0&&(o=I.length-1)),i=NC(i,0,a.length-1);const c=a[i];if(!c)return;const s=e.current.unstable_getCellColSpanInfo(c.id,o);s&&s.spannedByColSpan&&("left"===n||"below"===n?o=s.leftVisibleCellIndex:"right"===n&&(o=s.rightVisibleCellIndex)),o=NC(o,0,I.length-1);const d=I[o];e.current.setCellFocus(c.id,d.field)}),[e,l.pagination,l.paginationMode]),s=g.useCallback((({id:g,field:l})=>{e.current.setCellFocus(g,l)}),[e]),d=g.useCallback(((g,l)=>{"Enter"===l.key||"Tab"===l.key||"Shift"===l.key||ur(l.key)||e.current.setCellFocus(g.id,g.field)}),[e]),u=g.useCallback((({field:g},l)=>{l.target===l.currentTarget&&e.current.setColumnHeaderFocus(g,l)}),[e]),A=g.useCallback((({fields:g,depth:l},t)=>{if(t.target!==t.currentTarget)return;const n=SC(e);null!==n&&n.depth===l&&g.includes(n.field)||e.current.setColumnGroupHeaderFocus(g[0],l,t)}),[e]),m=g.useCallback(((g,l)=>{var n;null!=(n=l.relatedTarget)&&n.className.includes(Lo.columnHeader)||(t.debug("Clearing focus"),e.current.setState((e=>(0,he.Z)({},e,{focus:{cell:null,columnHeader:null,columnHeaderFilter:null,columnGroupHeader:null}}))))}),[t,e]),b=g.useCallback((e=>{n.current=e}),[]),p=g.useCallback((g=>{const l=n.current;n.current=null;const t=yC(e);if(!e.current.unstable_applyPipeProcessors("canUpdateFocus",!0,{event:g,cell:l}))return;if(!t)return void(l&&e.current.setCellFocus(l.id,l.field));if((null==l?void 0:l.id)===t.id&&(null==l?void 0:l.field)===t.field)return;const I=e.current.getCellElement(t.id,t.field);null!=I&&I.contains(g.target)||(l?e.current.setCellFocus(l.id,l.field):(e.current.setState((e=>(0,he.Z)({},e,{focus:{cell:null,columnHeader:null,columnHeaderFilter:null,columnGroupHeader:null}}))),e.current.forceUpdate(),o(t,g)))}),[e,o]),Z=g.useCallback((g=>{if("view"===g.cellMode)return;const l=yC(e);(null==l?void 0:l.id)===g.id&&(null==l?void 0:l.field)===g.field||e.current.setCellFocus(g.id,g.field)}),[e]),h=g.useCallback((()=>{const g=yC(e);g&&!e.current.getRow(g.id)&&e.current.setState((e=>(0,he.Z)({},e,{focus:{cell:null,columnHeader:null,columnHeaderFilter:null,columnGroupHeader:null}})))}),[e]),G=(0,et.Z)((()=>{const g=yC(e);if(!g)return;const t=Nd(e,{pagination:l.pagination,paginationMode:l.paginationMode});if(t.rows.find((e=>e.id===g.id)))return;const n=RI(e);e.current.setState((e=>(0,he.Z)({},e,{tabIndex:{cell:{id:t.rows[0].id,field:n[0].field},columnGroupHeader:null,columnHeader:null,columnHeaderFilter:null}})))})),y={moveFocusToRelativeCell:c,setColumnGroupHeaderFocus:a,getColumnGroupHeaderFocus:i};MC(e,{setCellFocus:I,setColumnHeaderFocus:C,setColumnHeaderFilterFocus:r},"public"),MC(e,y,"private"),g.useEffect((()=>{const g=(0,_l.Z)(e.current.rootElementRef.current);return g.addEventListener("mouseup",p),()=>{g.removeEventListener("mouseup",p)}}),[e,p]),qC(e,"columnHeaderBlur",m),qC(e,"cellDoubleClick",s),qC(e,"cellMouseDown",b),qC(e,"cellKeyDown",d),qC(e,"cellModeChange",Z),qC(e,"columnHeaderFocus",u),qC(e,"columnGroupHeaderFocus",A),qC(e,"rowsSet",h),qC(e,"paginationModelChange",G)})(t,l),((e,l)=>{var t;const n=ar(e,"useGridPreferencesPanel"),o=g.useRef(),I=g.useRef(),C=g.useCallback((()=>{n.debug("Hiding Preferences Panel");const g=jd(e.current.state);g.openedPanelValue&&e.current.publishEvent("preferencePanelClose",{openedPanelValue:g.openedPanelValue}),e.current.setState((e=>(0,he.Z)({},e,{preferencePanel:{open:!1}}))),e.current.forceUpdate()}),[e,n]),r=g.useCallback((()=>{I.current=setTimeout((()=>clearTimeout(o.current)),0)}),[]),a=g.useCallback((()=>{o.current=setTimeout(C,100)}),[C]),i=g.useCallback(((g,l,t)=>{n.debug("Opening Preferences Panel"),r(),e.current.setState((e=>(0,he.Z)({},e,{preferencePanel:(0,he.Z)({},e.preferencePanel,{open:!0,openedPanelValue:g,panelId:l,labelId:t})}))),e.current.publishEvent("preferencePanelOpen",{openedPanelValue:g}),e.current.forceUpdate()}),[n,r,e]);MC(e,{showPreferences:i,hidePreferences:a},"public");const c=g.useCallback(((g,t)=>{var n;const o=jd(e.current.state);return!t.exportOnlyDirtyModels||null!=(null==(n=l.initialState)?void 0:n.preferencePanel)||o.open?(0,he.Z)({},g,{preferencePanel:o}):g}),[e,null==(t=l.initialState)?void 0:t.preferencePanel]),s=g.useCallback(((g,l)=>{const t=l.stateToRestore.preferencePanel;return null!=t&&e.current.setState((e=>(0,he.Z)({},e,{preferencePanel:t}))),g}),[e]);ns(e,"exportState",c),ns(e,"restoreState",s),g.useEffect((()=>()=>{clearTimeout(o.current),clearTimeout(I.current)}),[])})(t,l),((e,l)=>{var t,n;const o=ar(e,"useGridFilter");e.current.registerControlState({stateId:"filter",propModel:l.filterModel,propOnChange:l.onFilterModelChange,stateSelector:iC,changeEvent:"filterModelChange"});const I=g.useCallback((()=>{e.current.setState((g=>{const t=iC(g,e.current.instanceId),n="client"===l.filterMode?((e,g,l)=>{const t=((e,g,l)=>{const{items:t}=e,n=t.map((e=>Wc(e,g))).filter((e=>!!e));if(0===n.length)return null;if(!pc||l)return(e,l)=>{const t={};for(let o=0;o<n.length;o+=1){const I=n[o];l&&!l(I.item.field)||(t[I.item.id]=I.v7?I.fn(e):I.fn(g.current.getRowId(e)))}return t};const o=`(function filterItem$$(getRowId, appliers, row, shouldApplyFilter) {\n      ${n.map(((e,g)=>`const shouldApply${g} = !shouldApplyFilter || shouldApplyFilter(${JSON.stringify(e.item.field)});`)).join("\n")}\n\n      const result$$ = {\n      ${n.map(((e,g)=>`${JSON.stringify(String(e.item.id))}:\n          !shouldApply${g} ?\n            false :\n            ${e.v7?`appliers[${g}].fn(row)`:`appliers[${g}].fn(getRowId(row))`},\n      `)).join("\n")}};\n\n      return result$$;\n    })`,I=bc(o.replaceAll("$$",String(Rc)));return Rc+=1,(e,l)=>I(g.current.getRowId,n,e,l)})(e,g,l),n=((e,g)=>{var l,t,n;const o=null!=(l=null==(t=e.quickFilterValues)?void 0:t.filter(Boolean))?l:[];if(0===o.length)return null;const I=null!=(n=e.quickFilterExcludeHiddenColumns)&&n?fI(g):BI(g),C=[],{ignoreDiacritics:r}=g.current.rootProps,a=mc(g);return I.forEach((e=>{const l=g.current.getColumn(e),t=null==l?void 0:l.getApplyQuickFilterFn,n=null==l?void 0:l.getApplyQuickFilterFnV7,I=!cc(t),i=!cc(n);!n||I&&!i?t&&C.push({column:l,appliers:o.map((e=>{const g=r?Vc(e):e;return{v7:!1,fn:t(g,l,a)}}))}):C.push({column:l,appliers:o.map((e=>{const g=r?Vc(e):e;return{v7:!0,fn:n(g,l,a)}}))})})),function(e,l){const t={},n={};e:for(let i=0;i<o.length;i+=1){const c=o[i];for(let o=0;o<C.length;o+=1){const{column:s,appliers:d}=C[o],{field:u}=s;if(l&&!l(u))continue;const A=d[i];let m=g.current.getRowValue(e,s);if(null!==A.fn)if(A.v7){if(r&&(m=Vc(m)),A.fn(m,e,s,a)){t[c]=!0;continue e}}else{var I;const l=null!=(I=n[u])?I:g.current.getCellParams(g.current.getRowId(e),u);if(r&&(l.value=Vc(l.value)),n[u]=l,A.fn(l)){t[c]=!0;continue e}}}t[c]=!1}return t}})(e,g);return function(e,g,l){var o,I;l.passingFilterItems=null!=(o=null==t?void 0:t(e,g))?o:null,l.passingQuickFilterValues=null!=(I=null==n?void 0:n(e,g))?I:null}})(t,e,l.disableEval):null,o=e.current.applyStrategyProcessor("filtering",{isRowMatchingFilters:n,filterModel:null!=t?t:Ac()}),I=(0,he.Z)({},g,{filter:(0,he.Z)({},g.filter,o)}),C=Hd(e,I);return(0,he.Z)({},I,{visibleRowsLookup:C})})),e.current.publishEvent("filteredRowsSet")}),[e,l.filterMode,l.disableEval]),C=g.useCallback(((e,g)=>null==g||!1===g.filterable||l.disableColumnFilter?e:[...e,"columnMenuFilterItem"]),[l.disableColumnFilter]),r=g.useCallback((()=>{I(),e.current.forceUpdate()}),[e,I]),a=g.useCallback((g=>{const l=iC(e),t=[...l.items],n=t.findIndex((e=>e.id===g.id));-1===n?t.push(g):t[n]=g,e.current.setFilterModel((0,he.Z)({},l,{items:t}),"upsertFilterItem")}),[e]),i=g.useCallback((g=>{const l=iC(e),t=[...l.items];g.forEach((e=>{const l=g.findIndex((g=>g.id===e.id));-1===l?t.push(e):t[l]=e})),e.current.setFilterModel((0,he.Z)({},l,{items:g}),"upsertFilterItems")}),[e]),c=g.useCallback((g=>{const l=iC(e),t=l.items.filter((e=>e.id!==g.id));t.length!==l.items.length&&e.current.setFilterModel((0,he.Z)({},l,{items:t}),"deleteFilterItem")}),[e]),s=g.useCallback(((g,t,n)=>{if(o.debug("Displaying filter panel"),g){const t=iC(e),n=t.items.filter((g=>{var l;if(void 0!==g.value)return!Array.isArray(g.value)||0!==g.value.length;const t=null==(l=e.current.getColumn(g.field).filterOperators)?void 0:l.find((e=>e.value===g.operator));return!(void 0===(null==t?void 0:t.requiresFilterValue)||(null==t?void 0:t.requiresFilterValue))}));let o;const I=n.find((e=>e.field===g)),C=e.current.getColumn(g);o=I?n:l.disableMultipleColumnsFiltering?[Zc({field:g,operator:C.filterOperators[0].value},e)]:[...n,Zc({field:g,operator:C.filterOperators[0].value},e)],e.current.setFilterModel((0,he.Z)({},t,{items:o}))}e.current.showPreferences(Id.filters,t,n)}),[e,o,l.disableMultipleColumnsFiltering]),d=g.useCallback((()=>{o.debug("Hiding filter panel"),e.current.hidePreferences()}),[e,o]),u=g.useCallback((g=>{const l=iC(e);l.logicOperator!==g&&e.current.setFilterModel((0,he.Z)({},l,{logicOperator:g}),"changeLogicOperator")}),[e]),A=g.useCallback((g=>{const l=iC(e);KC(l.quickFilterValues,g)||e.current.setFilterModel((0,he.Z)({},l,{quickFilterValues:[...g]}))}),[e]),m={setFilterLogicOperator:u,unstable_applyFilters:r,deleteFilterItem:c,upsertFilterItem:a,upsertFilterItems:i,setFilterModel:g.useCallback(((g,t)=>{iC(e)!==g&&(o.debug("Setting filter model"),e.current.updateControlState("filter",Sc(g,l.disableMultipleColumnsFiltering,e),t),e.current.unstable_applyFilters())}),[e,o,l.disableMultipleColumnsFiltering]),showFilterPanel:s,hideFilterPanel:d,setQuickFilterValues:A,ignoreDiacritics:l.ignoreDiacritics};MC(e,m,"public");const b=g.useCallback(((g,t)=>{var n;const o=iC(e);return t.exportOnlyDirtyModels&&null==l.filterModel&&null==(null==(n=l.initialState)||null==(n=n.filter)?void 0:n.filterModel)&&KC(o,Ac())?g:(0,he.Z)({},g,{filter:{filterModel:o}})}),[e,l.filterModel,null==(t=l.initialState)||null==(t=t.filter)?void 0:t.filterModel]),p=g.useCallback(((g,t)=>{var n;const o=null==(n=t.stateToRestore.filter)?void 0:n.filterModel;return null==o?g:(e.current.updateControlState("filter",Sc(o,l.disableMultipleColumnsFiltering,e),"restoreState"),(0,he.Z)({},g,{callbacks:[...g.callbacks,e.current.unstable_applyFilters]}))}),[e,l.disableMultipleColumnsFiltering]),Z=g.useCallback(((e,g)=>{if(g===Id.filters){var t;const e=l.slots.filterPanel;return(0,we.jsx)(e,(0,he.Z)({},null==(t=l.slotProps)?void 0:t.filterPanel))}return e}),[l.slots.filterPanel,null==(n=l.slotProps)?void 0:n.filterPanel]),{getRowId:h}=l,G=Po(Fd),y=g.useCallback((g=>{if("client"!==l.filterMode||!g.isRowMatchingFilters)return{filteredRowsLookup:{},filteredDescendantCountLookup:{}};const t=EI(e),n={},{isRowMatchingFilters:o}=g,I={},C={passingFilterItems:null,passingQuickFilterValues:null},r=G.current(e.current.state.rows.dataRowIdToModelLookup);for(let l=0;l<r.length;l+=1){const t=r[l],a=h?h(t):t.id;o(t,void 0,C);const i=vc([C.passingFilterItems],[C.passingQuickFilterValues],g.filterModel,e,I);n[a]=i}const a="auto-generated-group-footer-root";return t[a]&&(n[a]=!0),{filteredRowsLookup:n,filteredDescendantCountLookup:{}}}),[e,l.filterMode,h,G]);ns(e,"columnMenu",C),ns(e,"exportState",b),ns(e,"restoreState",p),ns(e,"preferencePanel",Z),Jd(e,or,"filtering",y),Jd(e,or,"visibleRowsLookupCreation",Yd);const B=g.useCallback((()=>{o.debug("onColUpdated - GridColumns changed, applying filters");const g=iC(e),l=JI(e),t=g.items.filter((e=>e.field&&l[e.field]));t.length<g.items.length&&e.current.setFilterModel((0,he.Z)({},g,{items:t}))}),[e,o]),S=g.useCallback((g=>{"filtering"===g&&e.current.unstable_applyFilters()}),[e]),V=g.useCallback((()=>{e.current.setState((g=>(0,he.Z)({},g,{visibleRowsLookup:Hd(e,g)}))),e.current.forceUpdate()}),[e]);qC(e,"rowsSet",I),qC(e,"columnsChange",B),qC(e,"activeStrategyProcessorChange",S),qC(e,"rowExpansionChange",V),qC(e,"columnVisibilityModelChange",(()=>{const g=iC(e);g.quickFilterValues&&g.quickFilterExcludeHiddenColumns&&e.current.unstable_applyFilters()})),ts((()=>{e.current.unstable_applyFilters()})),(0,Xe.Z)((()=>{void 0!==l.filterModel&&e.current.setFilterModel(l.filterModel)}),[e,o,l.filterModel])})(t,l),((e,l)=>{var t;const n=ar(e,"useGridSorting");e.current.registerControlState({stateId:"sortModel",propModel:l.sortModel,propOnChange:l.onSortModelChange,stateSelector:CC,changeEvent:"sortModelChange"});const o=g.useCallback(((g,l)=>{const t=CC(e),n=t.findIndex((e=>e.field===g));let o=[...t];return n>-1?l?o.splice(n,1,l):o.splice(n,1):o=[...t,l],o}),[e]),I=g.useCallback(((g,t)=>{var n;const o=CC(e).find((e=>e.field===g.field));if(o){var I;const e=void 0===t?Mr(null!=(I=g.sortingOrder)?I:l.sortingOrder,o.sort):t;return null==e?void 0:(0,he.Z)({},o,{sort:e})}return{field:g.field,sort:void 0===t?Mr(null!=(n=g.sortingOrder)?n:l.sortingOrder):t}}),[e,l.sortingOrder]),C=g.useCallback(((e,g)=>null==g||!1===g.sortable?e:(g.sortingOrder||l.sortingOrder).some((e=>!!e))?[...e,"columnMenuSortItem"]:e),[l.sortingOrder]),r=g.useCallback((()=>{e.current.setState((g=>{if("server"===l.sortingMode)return n.debug("Skipping sorting rows as sortingMode = server"),(0,he.Z)({},g,{sorting:(0,he.Z)({},g.sorting,{sortedRows:xc(UI(e),Jc,!1)})});const t=((e,g)=>{const l=e.map((e=>((e,g)=>{const l=g.current.getColumn(e.field);return l?{getSortCellParams:e=>({id:e,field:l.field,rowNode:g.current.getRowNode(e),value:g.current.getCellValue(e,l.field),api:g.current}),comparator:"desc"===e.sort?(...e)=>-1*l.sortComparator(...e):l.sortComparator}:null})(e,g))).filter((e=>!!e));return 0===l.length?null:e=>e.map((e=>({node:e,params:l.map((g=>g.getSortCellParams(e.id)))}))).sort(((e,g)=>{return t=e,n=g,l.reduce(((e,g,l)=>{if(0!==e)return e;const o=t.params[l],I=n.params[l];return g.comparator(o.value,I.value,o,I)}),0);var t,n})).map((e=>e.node.id))})(CC(g,e.current.instanceId),e),o=e.current.applyStrategyProcessor("sorting",{sortRowList:t});return(0,he.Z)({},g,{sorting:(0,he.Z)({},g.sorting,{sortedRows:o})})})),e.current.publishEvent("sortedRowsSet"),e.current.forceUpdate()}),[e,n,l.sortingMode]),a=g.useCallback((g=>{CC(e)!==g&&(n.debug("Setting sort model"),e.current.setState(xr(g,l.disableMultipleColumnsSorting)),e.current.forceUpdate(),e.current.applySorting())}),[e,n,l.disableMultipleColumnsSorting]),i=g.useCallback(((g,t,n)=>{if(!g.sortable)return;const C=I(g,t);let r;r=!n||l.disableMultipleColumnsSorting?C?[C]:[]:o(g.field,C),e.current.setSortModel(r)}),[e,o,I,l.disableMultipleColumnsSorting]),c=g.useCallback((()=>CC(e)),[e]),s=g.useCallback((()=>IC(e).map((e=>e.model))),[e]),d=g.useCallback((()=>oC(e)),[e]),u=g.useCallback((g=>e.current.getSortedRowIds()[g]),[e]);MC(e,{getSortModel:c,getSortedRows:s,getSortedRowIds:d,getRowIdFromRowIndex:u,setSortModel:a,sortColumn:i,applySorting:r},"public");const A=g.useCallback(((g,t)=>{var n;const o=CC(e);return!t.exportOnlyDirtyModels||null!=l.sortModel||null!=(null==(n=l.initialState)||null==(n=n.sorting)?void 0:n.sortModel)||o.length>0?(0,he.Z)({},g,{sorting:{sortModel:o}}):g}),[e,l.sortModel,null==(t=l.initialState)||null==(t=t.sorting)?void 0:t.sortModel]),m=g.useCallback(((g,t)=>{var n;const o=null==(n=t.stateToRestore.sorting)?void 0:n.sortModel;return null==o?g:(e.current.setState(xr(o,l.disableMultipleColumnsSorting)),(0,he.Z)({},g,{callbacks:[...g.callbacks,e.current.applySorting]}))}),[e,l.disableMultipleColumnsSorting]),b=g.useCallback((g=>{const l=UI(e),t=l[Jc],n=g.sortRowList?g.sortRowList(t.children.map((e=>l[e]))):[...t.children];return null!=t.footerId&&n.push(t.footerId),n}),[e]);ns(e,"exportState",A),ns(e,"restoreState",m),Jd(e,or,"sorting",b);const p=g.useCallback((({colDef:e},g)=>{const l=g.shiftKey||g.metaKey||g.ctrlKey;i(e,void 0,l)}),[i]),Z=g.useCallback((({colDef:e},g)=>{"Enter"!==g.key||g.ctrlKey||g.metaKey||i(e,void 0,g.shiftKey)}),[i]),h=g.useCallback((()=>{const g=CC(e),l=SI(e);if(g.length>0){const t=g.filter((e=>l[e.field]));t.length<g.length&&e.current.setSortModel(t)}}),[e]),G=g.useCallback((g=>{"sorting"===g&&e.current.applySorting()}),[e]);ns(e,"columnMenu",C),qC(e,"columnHeaderClick",p),qC(e,"columnHeaderKeyDown",Z),qC(e,"rowsSet",e.current.applySorting),qC(e,"columnsChange",h),qC(e,"activeStrategyProcessorChange",G),ts((()=>{e.current.applySorting()})),(0,Xe.Z)((()=>{void 0!==l.sortModel&&e.current.setSortModel(l.sortModel)}),[e,l.sortModel])})(t,l),((e,l)=>{const t=ar(e,"useDensity"),n=g.useCallback((g=>{t.debug(`Set grid density to ${g}`),e.current.setState((e=>{const l=ZI(e),t={value:g,factor:ad[g]};return KC(l,t)?e:(0,he.Z)({},e,{density:t})})),e.current.forceUpdate()}),[t,e]);g.useEffect((()=>{e.current.setDensity(l.density)}),[e,l.density]),MC(e,{setDensity:n},"public")})(t,l),((e,l)=>{var t;const n=ar(e,"useGridPagination"),o=nI(e,pC),I=nI(e,GI),C=Math.floor(l.rowHeight*I);e.current.registerControlState({stateId:"pagination",propModel:l.paginationModel,propOnChange:l.onPaginationModelChange,stateSelector:Wr,changeEvent:"paginationModelChange"});const r=g.useCallback((g=>{const l=Wr(e);g!==l.page&&(n.debug(`Setting page to ${g}`),e.current.setPaginationModel({page:g,pageSize:l.pageSize}))}),[e,n]),a=g.useCallback((g=>{const l=Wr(e);g!==l.pageSize&&(n.debug(`Setting page size to ${g}`),e.current.setPaginationModel({pageSize:g,page:l.page}))}),[e,n]),i=g.useCallback((g=>{var t;g!==Wr(e)&&(n.debug("Setting 'paginationModel' to",g),e.current.updateControlState("pagination",Xd(null!=(t=l.rowCount)?t:o,l.signature,g),"setPaginationModel"),e.current.forceUpdate())}),[e,n,l.rowCount,l.signature,o]);MC(e,{setPage:r,setPageSize:a,setPaginationModel:i},"public");const c=g.useCallback(((g,t)=>{var n;const o=Wr(e);return!t.exportOnlyDirtyModels||null!=l.paginationModel||null!=(null==(n=l.initialState)||null==(n=n.pagination)?void 0:n.paginationModel)||0!==o.page&&o.pageSize!==(l.autoPageSize?0:100)?(0,he.Z)({},g,{pagination:(0,he.Z)({},g.pagination,{paginationModel:o})}):g}),[e,l.paginationModel,null==(t=l.initialState)||null==(t=t.pagination)?void 0:t.paginationModel,l.autoPageSize]),s=g.useCallback(((g,t)=>{var n,I,C;const r=null!=(n=t.stateToRestore.pagination)&&n.paginationModel?(0,he.Z)({},Br(l.autoPageSize),null==(I=t.stateToRestore.pagination)?void 0:I.paginationModel):Wr(e);return e.current.updateControlState("pagination",Xd(null!=(C=l.rowCount)?C:o,l.signature,r),"stateRestorePreProcessing"),g}),[e,l.autoPageSize,l.rowCount,l.signature,o]);ns(e,"exportState",c),ns(e,"restoreState",s);const d=g.useCallback((()=>{const g=e.current.getRootDimensions();if(!l.autoPageSize||!g)return;const t=Mc(e),n=Math.floor((g.viewportInnerSize.height-t.top-t.bottom)/C);e.current.setPageSize(n)}),[e,l.autoPageSize,C]);qC(e,"viewportInnerSizeChange",d),qC(e,"paginationModelChange",(()=>{var g;const l=Wr(e);null!=(g=e.current.virtualScrollerRef)&&g.current&&e.current.scrollToIndexes({rowIndex:l.page*l.pageSize}),e.current.forceUpdate()})),g.useEffect((()=>{}),[l.rowCount,l.paginationMode]),g.useEffect((()=>{var g;e.current.updateControlState("pagination",Xd(null!=(g=l.rowCount)?g:o,l.signature,l.paginationModel))}),[e,l.paginationModel,l.rowCount,l.paginationMode,o,l.signature]),g.useEffect((()=>{d()}),[d])})(t,l),((e,l)=>{const{getRowHeight:t,getRowSpacing:n,getEstimatedRowHeight:o}=l,I=g.useRef(Object.create(null)),C=g.useRef(-1),r=g.useRef(!1),a=nI(e,GI),i=nI(e,iC),c=nI(e,Vr),s=nI(e,CC),d=Kd(e,l),u=nI(e,jI),A=QZ(l.rowHeight,EZ.rowHeight),m=Math.floor(A*a),b=g.useCallback((()=>{var g,l;r.current=!1;const i=g=>{I.current[g.id]||(I.current[g.id]={sizes:{baseCenter:m},isResized:!1,autoHeight:!1,needsFirstMeasurement:!0});const{isResized:l,needsFirstMeasurement:C,sizes:i}=I.current[g.id];let c="number"==typeof m&&m>0?m:52;const s=i.baseCenter;if(l)c=s;else if(t){const e=t((0,he.Z)({},g,{densityFactor:a}));if("auto"===e){if(C){const e=o?o((0,he.Z)({},g,{densityFactor:a})):m;c=null!=e?e:m}else c=s;r.current=!0,I.current[g.id].autoHeight=!0}else c=QZ(e,m),I.current[g.id].needsFirstMeasurement=!1,I.current[g.id].autoHeight=!1}else I.current[g.id].needsFirstMeasurement=!1;const u={};for(const e in i)/^base[A-Z]/.test(e)&&(u[e]=i[e]);if(u.baseCenter=c,n){var A,b;const l=e.current.getRowIndexRelativeToVisibleRows(g.id),t=n((0,he.Z)({},g,{isFirstVisible:0===l,isLastVisible:l===d.rows.length-1,indexRelativeToCurrentPage:l}));u.spacingTop=null!=(A=t.top)?A:0,u.spacingBottom=null!=(b=t.bottom)?b:0}const p=e.current.unstable_applyPipeProcessors("rowHeight",u,g);return I.current[g.id].sizes=p,p},c=[],s=d.rows.reduce(((e,g)=>{c.push(e);let l=0,t=0;const n=i(g);for(const e in n){const g=n[e];/^base[A-Z]/.test(e)?l=g>l?g:l:t+=g}return e+l+t}),0);null==u||null==(g=u.top)||g.forEach((e=>{i(e)})),null==u||null==(l=u.bottom)||l.forEach((e=>{i(e)})),e.current.setState((e=>(0,he.Z)({},e,{rowsMeta:{currentPageTotalHeight:s,positions:c}}))),r.current||(C.current=1/0),e.current.forceUpdate()}),[e,d.rows,m,t,n,o,u,a]),p=g.useCallback((e=>{const g=I.current[e];return g?g.sizes.baseCenter:m}),[m]),Z=g.useCallback(((e,g)=>{I.current[e].sizes.baseCenter=g,I.current[e].isResized=!0,I.current[e].needsFirstMeasurement=!1,b()}),[b]),h=g.useMemo((()=>(0,Je.Z)(b,l.rowPositionsDebounceMs)),[b,l.rowPositionsDebounceMs]),G=g.useCallback(((e,g,l)=>{if(!I.current[e]||!I.current[e].autoHeight)return;const t=I.current[e].sizes[`base${(0,zo.Z)(l)}`]!==g;I.current[e].needsFirstMeasurement=!1,I.current[e].sizes[`base${(0,zo.Z)(l)}`]=g,t&&h()}),[h]),y=g.useCallback((e=>{var g;return(null==(g=I.current[e])?void 0:g.autoHeight)||!1}),[]),B=g.useCallback((()=>C.current),[]),S=g.useCallback((e=>{r.current&&e>C.current&&(C.current=e)}),[]),V=g.useCallback((()=>{I.current={},b()}),[b]);g.useEffect((()=>{b()}),[m,i,c,s,b]),os(e,"rowHeight",b);const W={getLastMeasuredRowIndex:B,rowHasAutoHeight:y};MC(e,{unstable_setLastMeasuredRowIndex:S,unstable_getRowHeight:p,unstable_getRowInternalSizes:e=>{var g;return null==(g=I.current[e])?void 0:g.sizes},unstable_setRowHeight:Z,unstable_storeRowHeightMeasurement:G,resetRowHeights:V},"public"),MC(e,W,"private")})(t,l),((e,l)=>{const t=Ul(),n=ar(e,"useGridScroll"),o=e.current.columnHeadersElementRef,I=e.current.virtualScrollerRef,C=nI(e,sC),r=g.useCallback((g=>{const t=xI(e),o=RI(e);if(null!=g.rowIndex&&0===t||0===o.length)return!1;n.debug(`Scrolling to cell at row ${g.rowIndex}, col: ${g.colIndex} `);let r={};if(null!=g.colIndex){const l=vI(e);let t;if(void 0!==g.rowIndex){var a;const l=null==(a=C[g.rowIndex])?void 0:a.id,n=e.current.unstable_getCellColSpanInfo(l,g.colIndex);n&&!n.spannedByColSpan&&(t=n.cellProps.width)}void 0===t&&(t=o[g.colIndex].computedWidth),r.left=du({clientHeight:I.current.clientWidth,scrollTop:Math.abs(I.current.scrollLeft),offsetHeight:t,offsetTop:l[g.colIndex]})}if(null!=g.rowIndex){var i,c;const t=vd(e.current.state),n=Rr(e),o=fr(e),C=l.pagination?g.rowIndex-n*o:g.rowIndex,a=t.positions[C+1]?t.positions[C+1]-t.positions[C]:t.currentPageTotalHeight-t.positions[C],s=(null==(i=I.current.querySelector(`.${Lo["pinnedRows--top"]}`))?void 0:i.clientHeight)||0,d=(null==(c=I.current.querySelector(`.${Lo["pinnedRows--bottom"]}`))?void 0:c.clientHeight)||0;r.top=du({clientHeight:I.current.clientHeight-s-d,scrollTop:I.current.scrollTop,offsetHeight:a,offsetTop:t.positions[C]})}return r=e.current.unstable_applyPipeProcessors("scrollToIndexes",r,g),(void 0!==typeof r.left||void 0!==typeof r.top)&&(e.current.scroll(r),!0)}),[n,e,I,l.pagination,C]),a=g.useCallback((e=>{if(I.current&&null!=e.left&&o.current){const g="rtl"===t.direction?-1:1;o.current.scrollLeft=e.left,I.current.scrollLeft=g*e.left,n.debug(`Scrolling left: ${e.left}`)}I.current&&null!=e.top&&(I.current.scrollTop=e.top,n.debug(`Scrolling top: ${e.top}`)),n.debug("Scrolling, updating container, and viewport")}),[I,t.direction,o,n]),i=g.useCallback((()=>null!=I&&I.current?{top:I.current.scrollTop,left:I.current.scrollLeft}:{top:0,left:0}),[I]);MC(e,{scroll:a,scrollToIndexes:r,getScrollPosition:i},"public")})(t,l),(e=>{const l=ar(e,"useGridColumnMenu"),t=g.useCallback((g=>{e.current.setState((e=>e.columnMenu.open&&e.columnMenu.field===g?e:(l.debug("Opening Column Menu"),(0,he.Z)({},e,{columnMenu:{open:!0,field:g}}))))&&(e.current.hidePreferences(),e.current.forceUpdate())}),[e,l]),n=g.useCallback((()=>{const g=vC(e.current.state);if(g.field){const l=SI(e),t=WI(e),n=BI(e);let o=g.field;if(l[o]||(o=n[0]),!1===t[o]){const e=n.filter((e=>e===o||!1!==t[e])),g=e.indexOf(o);o=e[g+1]||e[g-1]}e.current.setColumnHeaderFocus(o)}e.current.setState((e=>e.columnMenu.open||void 0!==e.columnMenu.field?(l.debug("Hiding Column Menu"),(0,he.Z)({},e,{columnMenu:(0,he.Z)({},e.columnMenu,{open:!1,field:void 0})})):e))&&e.current.forceUpdate()}),[e,l]),o=g.useCallback((g=>{l.debug("Toggle Column Menu");const o=vC(e.current.state);o.open&&o.field===g?n():t(g)}),[e,l,t,n]);MC(e,{showColumnMenu:t,hideColumnMenu:n,toggleColumnMenu:o},"public"),qC(e,"columnResizeStart",n),qC(e,"virtualScrollerWheel",e.current.hideColumnMenu),qC(e,"virtualScrollerTouchMove",e.current.hideColumnMenu)})(t),fd(t,l),((e,l)=>{const t=ar(e,"useGridPrintExport"),n=g.useRef(null),o=g.useRef(null),I=g.useRef({}),C=g.useRef([]);g.useEffect((()=>{n.current=(0,_l.Z)(e.current.rootElementRef.current)}),[e]);const r=g.useCallback(((g,l,t)=>new Promise((n=>{const o=cd({apiRef:e,options:{fields:g,allColumns:l}}).map((e=>e.field)),I=VI(e),C={};I.forEach((e=>{C[e.field]=o.includes(e.field)})),t&&(C[qc.field]=!0),e.current.setColumnVisibilityModel(C),n()}))),[e]),a=g.useCallback((g=>{const l=g({apiRef:e}).map((g=>e.current.getRow(g)));e.current.setRows(l)}),[e]),i=g.useCallback(((g,t)=>{var o,I;const C=(0,he.Z)({copyStyles:!0,hideToolbar:!1,hideFooter:!1,includeCheckboxes:!1},t),r=g.contentDocument;if(!r)return;const a=vd(e.current.state),i=e.current.rootElementRef.current,c=i.cloneNode(!0);c.querySelector(`.${Lo.main}`).style.overflow="visible",c.style.contain="size",c.querySelector(`.${Lo.columnHeaders}`).querySelector(`.${Lo.columnHeadersInner}`).style.width="100%";let s=(null==(o=i.querySelector(`.${Lo.toolbarContainer}`))?void 0:o.offsetHeight)||0,d=(null==(I=i.querySelector(`.${Lo.footerContainer}`))?void 0:I.offsetHeight)||0;var u,A;C.hideToolbar&&(null==(u=c.querySelector(`.${Lo.toolbarContainer}`))||u.remove(),s=0),C.hideFooter&&(null==(A=c.querySelector(`.${Lo.footerContainer}`))||A.remove(),d=0);const m=a.currentPageTotalHeight+od(e,l.columnHeaderHeight)+s+d;if(c.style.height=`${m}px`,c.style.boxSizing="content-box",null!=t&&t.getRowsToExport){const e=c.querySelector(`.${Lo.footerContainer}`);e.style.position="absolute",e.style.width="100%",e.style.top=m-d+"px"}const b=document.createElement("div");b.appendChild(c),r.body.innerHTML=b.innerHTML;const p="function"==typeof C.pageStyle?C.pageStyle():C.pageStyle;if("string"==typeof p){const e=r.createElement("style");e.appendChild(r.createTextNode(p)),r.head.appendChild(e)}C.bodyClassName&&r.body.classList.add(...C.bodyClassName.split(" "));const Z=[];if(C.copyStyles){const e=i.getRootNode(),g=("ShadowRoot"===e.constructor.name?e:n.current).querySelectorAll("style, link[rel='stylesheet']");for(let e=0;e<g.length;e+=1){const l=g[e];if("STYLE"===l.tagName){const e=r.createElement(l.tagName),g=l.sheet;if(g){let l="";for(let e=0;e<g.cssRules.length;e+=1)"string"==typeof g.cssRules[e].cssText&&(l+=`${g.cssRules[e].cssText}\r\n`);e.appendChild(r.createTextNode(l)),r.head.appendChild(e)}}else if(l.getAttribute("href")){const e=r.createElement(l.tagName);for(let g=0;g<l.attributes.length;g+=1){const t=l.attributes[g];t&&e.setAttribute(t.nodeName,t.nodeValue||"")}Z.push(new Promise((g=>{e.addEventListener("load",(()=>g()))}))),r.head.appendChild(e)}}}Promise.all(Z).then((()=>{g.contentWindow.print()}))}),[e,n,l.columnHeaderHeight]),c=g.useCallback((g=>{var l;n.current.body.removeChild(g),e.current.restoreState(o.current||{}),null!=(l=o.current)&&null!=(l=l.columns)&&l.columnVisibilityModel||e.current.setColumnVisibilityModel(I.current),e.current.unstable_setVirtualization(!0),e.current.setRows(C.current),o.current=null,I.current={},C.current=[]}),[e]),s=g.useCallback((async g=>{if(t.debug("Export data as Print"),!e.current.rootElementRef.current)throw new Error("MUI: No grid root element available.");if(o.current=e.current.exportState(),I.current=WI(e),C.current=e.current.getSortedRows(),l.pagination){const g=bC(e),l={page:0,pageSize:g};e.current.updateControlState("pagination",Xd(g,"DataGridPro",l)),e.current.forceUpdate()}await r(null==g?void 0:g.fields,null==g?void 0:g.allColumns,null==g?void 0:g.includeCheckboxes),null!=g&&g.getRowsToExport&&a(g.getRowsToExport),e.current.unstable_setVirtualization(!1),await new Promise((e=>{requestAnimationFrame((()=>{e()}))}));const s=function(e){const g=document.createElement("iframe");return g.style.position="absolute",g.style.width="0px",g.style.height="0px",g.title=e||document.title,g}(null==g?void 0:g.fileName);s.onload=()=>{i(s,g),s.contentWindow.matchMedia("print").addEventListener("change",(e=>{!1===e.matches&&c(s)}))},n.current.body.appendChild(s)}),[l,t,e,i,c,r,a]);MC(e,{exportDataAsPrint:s},"public");const d=g.useCallback(((e,g)=>{var l;return null!=(l=g.printOptions)&&l.disableToolbarButton?e:[...e,{component:(0,we.jsx)(Rd,{options:g.printOptions}),componentName:"printExport"}]}),[]);ns(e,"exportMenu",d)})(t,l),((e,l)=>{const t=l.unstable_ignoreValueFormatterDuringExport,n=("object"==typeof t?null==t?void 0:t.clipboardExport:t)||!1,o=l.clipboardCopyCellDelimiter,I=g.useCallback((g=>{if(!g.ctrlKey&&!g.metaKey||"c"!==g.key)return;if(l=g.target,null!=(t=window.getSelection())&&t.toString()||l&&(l.selectionEnd||0)-(l.selectionStart||0)>0)return;var l,t;let I="";if(e.current.getSelectedRows().size>0)I=e.current.getDataAsCsv({includeHeaders:!1,delimiter:o});else{const g=yC(e);if(g){const l=e.current.getCellParams(g.id,g.field);I=_c(l,{delimiterCharacter:o,ignoreValueFormatter:n})}}var C;I=e.current.unstable_applyPipeProcessors("clipboardCopy",I),I&&(C=I,navigator.clipboard?navigator.clipboard.writeText(C).catch((()=>{gs(C)})):gs(C),e.current.publishEvent("clipboardCopy",I))}),[e,n,o]);((e,l,t,n,o)=>{const I=ar(e,"useNativeEventListener"),[C,r]=g.useState(!1),a=g.useRef(n),i=g.useCallback((e=>a.current&&a.current(e)),[]);g.useEffect((()=>{a.current=n}),[n]),g.useEffect((()=>{let g;if(g=YC(l)?l():l&&l.current?l.current:null,g&&t&&!C){I.debug(`Binding native ${t} event`),g.addEventListener(t,i,o);const l=g;r(!0);const n=()=>{I.debug(`Clearing native ${t} event`),l.removeEventListener(t,i,o)};e.current.subscribeEvent("unmount",n)}}),[l,i,t,C,I,o,e])})(e,e.current.rootElementRef,"keydown",I),_C(e,"clipboardCopy",l.onClipboardCopy)})(t,l),function(e,l){const t=ar(e,"useResizeContainer"),n=g.useRef(!1),o=g.useRef(null),I=g.useRef(null),C=nI(e,vd),r=nI(e,GI),a=Math.floor(l.rowHeight*r),i=od(e,l.columnHeaderHeight),c=g.useCallback((()=>{var g;const t=null==(g=e.current.rootElementRef)?void 0:g.current,n=kI(e),r=Mc(e);if(!o.current)return;let a,c,s,d;if(null!=l.scrollbarSize)a=l.scrollbarSize;else if(n&&t){const e=(0,_l.Z)(t).createElement("div");e.style.width="99px",e.style.height="99px",e.style.position="absolute",e.style.overflow="scroll",e.className="scrollDiv",t.appendChild(e),a=e.offsetWidth-e.clientWidth,t.removeChild(e)}else a=0;if(l.autoHeight)d=!1,s=Math.round(n)>Math.round(o.current.width),c={width:o.current.width,height:C.currentPageTotalHeight+(s?a:0)};else{c={width:o.current.width,height:Math.max(o.current.height-i,0)};const e=(({content:e,container:g,scrollBarSize:l})=>{const t=e.width>g.width,n=e.height>g.height;let o=!1,I=!1;return(t||n)&&(o=t,I=e.height+(o?l:0)>g.height,I&&(o=e.width+l>g.width)),{hasScrollX:o,hasScrollY:I}})({content:{width:Math.round(n),height:C.currentPageTotalHeight},container:{width:Math.round(c.width),height:c.height-r.top-r.bottom},scrollBarSize:a});d=e.hasScrollY,s=e.hasScrollX}const u={viewportOuterSize:c,viewportInnerSize:{width:c.width-(d?a:0),height:c.height-(s?a:0)},hasScrollX:s,hasScrollY:d,scrollBarSize:a},A=I.current;I.current=u,u.viewportInnerSize.width===(null==A?void 0:A.viewportInnerSize.width)&&u.viewportInnerSize.height===(null==A?void 0:A.viewportInnerSize.height)||e.current.publishEvent("viewportInnerSizeChange",u.viewportInnerSize)}),[e,l.scrollbarSize,l.autoHeight,C.currentPageTotalHeight,i]),[s,d]=g.useState(),u=g.useMemo((()=>(0,Je.Z)(d,60)),[]),A=g.useRef();(0,Xe.Z)((()=>{s&&(c(),e.current.publishEvent("debouncedResize",o.current))}),[e,s,c]);const m=g.useCallback((()=>{e.current.computeSizeAndPublishResizeEvent()}),[e]),b=g.useCallback((()=>I.current),[]),p=g.useCallback((()=>{const g=e.current.getRootDimensions();if(!g)return 0;const t=Nd(e,{pagination:l.pagination,paginationMode:l.paginationMode});if(l.getRowHeight){const g=e.current.getRenderContext(),l=g.lastRowIndex-g.firstRowIndex;return Math.min(l-1,t.rows.length)}const n=Math.floor(g.viewportInnerSize.height/a);return Math.min(n,t.rows.length)}),[e,l.pagination,l.paginationMode,l.getRowHeight,a]),Z=g.useCallback((()=>{var g,l,t;const n=null==(g=e.current.mainElementRef)?void 0:g.current;if(!n)return;const o=(0,ke.Z)(n).getComputedStyle(n),I=parseFloat(o.height)||0,C=parseFloat(o.width)||0,r=I!==(null==(l=A.current)?void 0:l.height),a=C!==(null==(t=A.current)?void 0:t.width);if(!A.current||r||a){const g={width:C,height:I};e.current.publishEvent("resize",g),A.current=g}}),[e]),h={getViewportPageSize:p,updateGridDimensionsRef:c,computeSizeAndPublishResizeEvent:Z};MC(e,{resize:m,getRootDimensions:b},"public"),MC(e,h,"private");const G=g.useRef(!0),y=g.useCallback((e=>{o.current=e;const g=/jsdom/.test(window.navigator.userAgent);if(0!==e.height||n.current||l.autoHeight||g||(t.error(["The parent DOM element of the data grid has an empty height.","Please make sure that this element has an intrinsic height.","The grid displays with a height of 0px.","","More details: https://mui.com/r/x-data-grid-no-dimensions."].join("\n")),n.current=!0),0!==e.width||n.current||g||(t.error(["The parent DOM element of the data grid has an empty width.","Please make sure that this element has an intrinsic width.","The grid displays with a width of 0px.","","More details: https://mui.com/r/x-data-grid-no-dimensions."].join("\n")),n.current=!0),G.current)return d(e),void(G.current=!1);u(e)}),[l.autoHeight,u,t]);(0,Xe.Z)((()=>c()),[c]),_C(e,"sortedRowsSet",c),_C(e,"paginationModelChange",c),_C(e,"columnsChange",c),qC(e,"resize",y),_C(e,"debouncedResize",l.onResize)}(t,l),function(e,g){_C(e,"columnHeaderClick",g.onColumnHeaderClick),_C(e,"columnHeaderDoubleClick",g.onColumnHeaderDoubleClick),_C(e,"columnHeaderOver",g.onColumnHeaderOver),_C(e,"columnHeaderOut",g.onColumnHeaderOut),_C(e,"columnHeaderEnter",g.onColumnHeaderEnter),_C(e,"columnHeaderLeave",g.onColumnHeaderLeave),_C(e,"cellClick",g.onCellClick),_C(e,"cellDoubleClick",g.onCellDoubleClick),_C(e,"cellKeyDown",g.onCellKeyDown),_C(e,"preferencePanelClose",g.onPreferencePanelClose),_C(e,"preferencePanelOpen",g.onPreferencePanelOpen),_C(e,"menuOpen",g.onMenuOpen),_C(e,"menuClose",g.onMenuClose),_C(e,"rowDoubleClick",g.onRowDoubleClick),_C(e,"rowClick",g.onRowClick),_C(e,"stateChange",g.onStateChange)}(t,l),(e=>{const l=g.useCallback(((g={})=>e.current.unstable_applyPipeProcessors("exportState",{},g)),[e]),t=g.useCallback((g=>{e.current.unstable_applyPipeProcessors("restoreState",{callbacks:[]},{stateToRestore:g}).callbacks.forEach((e=>{e()})),e.current.forceUpdate()}),[e]);MC(e,{exportState:l,restoreState:t},"public")})(t),function(e,l){const t=g=>{e.current.setState((e=>(0,he.Z)({},e,{virtualization:(0,he.Z)({},e.virtualization,{enabled:g})})))},n={unstable_setVirtualization:t,unstable_setColumnVirtualization:g=>{e.current.setState((e=>(0,he.Z)({},e,{virtualization:(0,he.Z)({},e.virtualization,{enabledForColumns:g})})))}};MC(e,n,"public"),g.useEffect((()=>{t(!l.disableVirtualization)}),[l.disableVirtualization])}(t,l),t},gh=gC("div",{name:"MuiDataGrid",slot:"VirtualScroller",overridesResolver:(e,g)=>g.virtualScroller})({overflow:"auto",height:"100%",position:"relative","@media print":{overflow:"hidden"},zIndex:0}),lh=g.forwardRef((function(e,g){const l=rI(),t=(e=>{const{classes:g}=e;return(0,Be.Z)({root:["virtualScroller"]},Eo,g)})(l);return(0,we.jsx)(gh,(0,he.Z)({ref:g},e,{className:(0,ye.Z)(t.root,e.className),ownerState:l}))})),th=gC("div",{name:"MuiDataGrid",slot:"VirtualScrollerContent",overridesResolver:(e,g)=>g.virtualScrollerContent})({}),nh=g.forwardRef((function(e,g){var l;const t=rI(),n=((e,g)=>{const{classes:l}=e,t={root:["virtualScrollerContent",g&&"virtualScrollerContent--overflowed"]};return(0,Be.Z)(t,Eo,l)})(t,!t.autoHeight&&"auto"===(null==(l=e.style)?void 0:l.minHeight));return(0,we.jsx)(th,(0,he.Z)({ref:g},e,{ownerState:t,className:(0,ye.Z)(n.root,e.className)}))})),oh=["className"],Ih=gC("div",{name:"MuiDataGrid",slot:"VirtualScrollerRenderZone",overridesResolver:(e,g)=>g.virtualScrollerRenderZone})({position:"absolute",display:"flex",flexDirection:"column"}),Ch=g.forwardRef((function(e,g){const{className:l}=e,t=(0,Ge.Z)(e,oh),n=rI(),o=(e=>{const{classes:g}=e;return(0,Be.Z)({root:["virtualScrollerRenderZone"]},Eo,g)})(n);return(0,we.jsx)(Ih,(0,he.Z)({ref:g,className:(0,ye.Z)(o.root,l),ownerState:n},t))})),rh=gC("div",{name:"MuiDataGrid",slot:"OverlayWrapper",shouldForwardProp:e=>"overlayType"!==e,overridesResolver:(e,g)=>g.overlayWrapper})((({overlayType:e})=>({position:"sticky",top:0,left:0,width:0,height:0,zIndex:"loadingOverlay"===e?5:4}))),ah=gC("div",{name:"MuiDataGrid",slot:"OverlayWrapperInner",shouldForwardProp:e=>"overlayType"!==e,overridesResolver:(e,g)=>g.overlayWrapperInner})({}),ih=e=>{const{classes:g}=e;return(0,Be.Z)({root:["overlayWrapper"],inner:["overlayWrapperInner"]},Eo,g)};function ch(e){var l,t;const n=Ar(),o=rI(),[I,C]=g.useState((()=>{var e,g;return null!=(e=null==(g=n.current.getRootDimensions())?void 0:g.viewportInnerSize)?e:null})),r=g.useCallback((()=>{var e,g;C(null!=(e=null==(g=n.current.getRootDimensions())?void 0:g.viewportInnerSize)?e:null)}),[n]);(0,Xe.Z)((()=>n.current.subscribeEvent("viewportInnerSizeChange",r)),[n,r]);let a=null!=(l=null==I?void 0:I.height)?l:0;o.autoHeight&&0===a&&(a=zc(n,o.rowHeight));const i=ih((0,he.Z)({},e,{classes:o.classes}));return I?(0,we.jsx)(rh,{className:(0,ye.Z)(i.root),overlayType:e.overlayType,children:(0,we.jsx)(ah,(0,he.Z)({className:(0,ye.Z)(i.inner),style:{height:a,width:null!=(t=null==I?void 0:I.width)?t:0}},e))}):null}function sh(){const e=Ar(),g=rI(),l=nI(e,xI),t=nI(e,bC),n=nI(e,MI),o=!n&&l>0&&0===t;let I=null,C="";var r,a,i;return n||0!==l||(I=(0,we.jsx)(g.slots.noRowsOverlay,(0,he.Z)({},null==(r=g.slotProps)?void 0:r.noRowsOverlay)),C="noRowsOverlay"),o&&(I=(0,we.jsx)(g.slots.noResultsOverlay,(0,he.Z)({},null==(a=g.slotProps)?void 0:a.noResultsOverlay)),C="noResultsOverlay"),n&&(I=(0,we.jsx)(g.slots.loadingOverlay,(0,he.Z)({},null==(i=g.slotProps)?void 0:i.loadingOverlay)),C="loadingOverlay"),null===I?null:(0,we.jsx)(ch,{overlayType:C,children:I})}const dh=["className"],uh=g.forwardRef((function(e,l){const{className:n}=e,o=(0,Ge.Z)(e,dh),{getRootProps:I,getContentProps:C,getRenderZoneProps:r,getRows:a}=(e=>{var l,n;const o=II(),I=rI(),C=nI(o,RI),r=nI(o,Yb),a=nI(o,Hb),{ref:i,onRenderZonePositioning:c,renderZoneMinColumnIndex:s=0,renderZoneMaxColumnIndex:d=C.length,getRowProps:u}=e,A=Ul(),m=nI(o,vI),b=nI(o,kI),p=nI(o,yC),Z=nI(o,WC),h=nI(o,vd),G=nI(o,Gr),y=Kd(o,I),B=g.useRef(null),S=g.useRef(null),V=(0,ve.Z)(i,S),[W,R]=g.useState(null),f=g.useRef(W),v=g.useRef({top:0,left:0}),[k,X]=g.useState({width:null,height:null}),J=g.useRef(b),[w,Y]=g.useState(null),H=g.useRef(Object.create(null)),F=g.useRef(),N=g.useRef(),K=g.useRef(cI(((e,g,l,t,n,o)=>{let I;return o>-1&&(g>o&&o>=t||l<o&&o<n)&&(I=o),{focusedCellColumnIndexNotInRange:I,renderedColumns:e.slice(g,l)}}),zb)),x=g.useMemo((()=>null!==p?C.findIndex((e=>e.field===p.field)):-1),[p,C]),M=g.useCallback((e=>{var g,l;const t=o.current.getLastMeasuredRowIndex();let n=t===1/0;null!=(g=y.range)&&g.lastRowIndex&&!n&&(n=t>=y.range.lastRowIndex);const I=NC(t-((null==(l=y.range)?void 0:l.firstRowIndex)||0),0,h.positions.length);return n||h.positions[I]>=e?Kb(e,h.positions):function(e,g,l){let t=1;for(;l<g.length&&Math.abs(g[l])<e;)l+=t,t*=2;return Kb(e,g,Math.floor(l/2),Math.min(l,g.length))}(e,h.positions,I)}),[o,null==(l=y.range)?void 0:l.firstRowIndex,null==(n=y.range)?void 0:n.lastRowIndex,h.positions]),z=g.useCallback((()=>{if(!r)return{firstRowIndex:0,lastRowIndex:y.rows.length,firstColumnIndex:0,lastColumnIndex:C.length};const{top:e,left:g}=v.current,l=Math.min(M(e),h.positions.length-1),t=I.autoHeight?l+y.rows.length:M(e+k.height);let n=0,i=m.length;if(a){let e=!1;const[C,r]=xb({firstIndex:l,lastIndex:t,minFirstIndex:0,maxLastIndex:y.rows.length,buffer:I.rowBuffer});for(let g=C;g<r&&!e;g+=1){const l=y.rows[g];e=o.current.rowHasAutoHeight(l.id)}e||(n=Kb(Math.abs(g),m),i=Kb(Math.abs(g)+k.width,m))}return{firstRowIndex:l,lastRowIndex:t,firstColumnIndex:n,lastColumnIndex:i}}),[r,a,M,h.positions.length,I.autoHeight,I.rowBuffer,y.rows,m,C.length,o,k]);(0,Xe.Z)((()=>{r?(S.current.scrollLeft=0,S.current.scrollTop=0):B.current.style.transform="translate3d(0px, 0px, 0px)"}),[r]),(0,Xe.Z)((()=>{X({width:S.current.clientWidth,height:S.current.clientHeight})}),[h.currentPageTotalHeight]);const E=g.useCallback((()=>{S.current&&X({width:S.current.clientWidth,height:S.current.clientHeight})}),[]);qC(o,"debouncedResize",E);const L=g.useCallback((e=>{const[g,l]=xb({firstIndex:e.firstRowIndex,lastIndex:e.lastRowIndex,minFirstIndex:0,maxLastIndex:y.rows.length,buffer:I.rowBuffer}),[t]=xb({firstIndex:e.firstColumnIndex,lastIndex:e.lastColumnIndex,minFirstIndex:s,maxLastIndex:d,buffer:I.columnBuffer}),n=td({firstColumnToRender:t,apiRef:o,firstRowToRender:g,lastRowToRender:l,visibleRows:y.rows}),C="ltr"===A.direction?1:-1,r=vd(o.current.state).positions[g],a=C*vI(o)[n];B.current.style.transform=`translate3d(${a}px, ${r}px, 0px)`,"function"==typeof c&&c({top:r,left:a})}),[o,y.rows,c,s,d,I.columnBuffer,I.rowBuffer,A.direction]),U=g.useCallback((()=>f.current),[]),Q=g.useCallback((e=>{if(f.current&&Mb(e,f.current))return void L(e);R(e),L(e);const[g,l]=xb({firstIndex:e.firstRowIndex,lastIndex:e.lastRowIndex,minFirstIndex:0,maxLastIndex:y.rows.length,buffer:I.rowBuffer});o.current.publishEvent("renderedRowsIntervalChange",{firstRowToRender:g,lastRowToRender:l}),f.current=e}),[o,R,f,y.rows.length,I.rowBuffer,L]);(0,Xe.Z)((()=>{if(null==k.width)return;const e=z();Q(e);const{top:g,left:l}=v.current,t={top:g,left:l,renderContext:e};o.current.publishEvent("scrollPositionChange",t)}),[o,z,k.width,Q]);const D=(0,et.Z)((e=>{const{scrollTop:g,scrollLeft:l}=e.currentTarget;if(v.current.top=g,v.current.left=l,!f.current||g<0)return;if("ltr"===A.direction&&l<0)return;if("rtl"===A.direction&&l>0)return;const n=r?z():f.current,C=Math.abs(n.firstRowIndex-f.current.firstRowIndex),a=Math.abs(n.lastRowIndex-f.current.lastRowIndex),i=Math.abs(n.firstColumnIndex-f.current.firstColumnIndex),c=Math.abs(n.lastColumnIndex-f.current.lastColumnIndex),s=C>=I.rowThreshold||a>=I.rowThreshold||i>=I.columnThreshold||c>=I.columnThreshold||J.current!==b;o.current.publishEvent("scrollPositionChange",{top:g,left:l,renderContext:s?n:f.current},e),s&&(t.flushSync((()=>{Q(n)})),J.current=b)})),T=(0,et.Z)((e=>{o.current.publishEvent("virtualScrollerWheel",{},e)})),P=(0,et.Z)((e=>{o.current.publishEvent("virtualScrollerTouchMove",{},e)})),j=g.useMemo((()=>null!==p?y.rows.findIndex((e=>e.id===p.id)):-1),[p,y.rows]);qC(o,"rowMouseOver",((e,g)=>{var l;g.currentTarget.contains(g.relatedTarget)||Y(null!=(l=e.id)?l:null)})),qC(o,"rowMouseOut",((e,g)=>{g.currentTarget.contains(g.relatedTarget)||Y(null)}));const O=k.width&&b>=k.width,q=g.useMemo((()=>{const e=Math.max(h.currentPageTotalHeight,1);let g=!1;null!=S&&S.current&&e<=(null==S?void 0:S.current.clientHeight)&&(g=!0);const l={width:O?b:"auto",height:e,minHeight:g?"100%":"auto"};return I.autoHeight&&0===y.rows.length&&(l.height=zc(o,I.rowHeight)),l}),[o,S,b,h.currentPageTotalHeight,O,I.autoHeight,I.rowHeight,y.rows.length]);g.useEffect((()=>{o.current.publishEvent("virtualScrollerContentSizeChange")}),[o,q]);const $=g.useMemo((()=>{const e={};return O||(e.overflowX="hidden"),I.autoHeight&&(e.overflowY="hidden"),e}),[O,I.autoHeight]);return o.current.register("private",{getRenderContext:U}),{renderContext:W,updateRenderZonePosition:L,getRows:(e={renderContext:W})=>{var g;const{onRowRender:l,renderContext:t,minFirstColumn:n=s,maxLastColumn:a=d,availableSpace:i=k.width,rowIndexOffset:c=0,position:A="center"}=e;if(!t||null==i)return null;const m=r?I.rowBuffer:0,b=r?I.columnBuffer:0,[h,B]=xb({firstIndex:t.firstRowIndex,lastIndex:t.lastRowIndex,minFirstIndex:0,maxLastIndex:y.rows.length,buffer:m}),S=[];if(e.rows)e.rows.forEach((e=>{S.push(e),o.current.calculateColSpan({rowId:e.id,minFirstColumn:n,maxLastColumn:a,columns:C})}));else{if(!y.range)return null;for(let e=h;e<B;e+=1){const g=y.rows[e];S.push(g),o.current.calculateColSpan({rowId:g.id,minFirstColumn:n,maxLastColumn:a,columns:C})}}let V=!1;if(j>-1){const e=y.rows[j];(h>j||B<j)&&(V=!0,j>h?S.push(e):S.unshift(e),o.current.calculateColSpan({rowId:e.id,minFirstColumn:n,maxLastColumn:a,columns:C}))}const[R,f]=xb({firstIndex:t.firstColumnIndex,lastIndex:t.lastColumnIndex,minFirstIndex:n,maxLastIndex:a,buffer:b}),v=td({firstColumnToRender:R,apiRef:o,firstRowToRender:h,lastRowToRender:B,visibleRows:y.rows});let X=!1;(v>x||f<x)&&(X=!0);const{focusedCellColumnIndexNotInRange:J,renderedColumns:Y}=K.current(C,v,f,n,a,X?x:-1),M=(null==(g=I.slotProps)?void 0:g.row)||{},{style:z}=M,E=(0,Ge.Z)(M,Fb);(F.current!==u||N.current!==z)&&(H.current=Object.create(null));const L=[];let U=!1;for(let e=0;e<S.length;e+=1){var Q;const{id:g,model:t}=S[e],n=V&&p.id===g,r=V?h+e===y.rows.length:h+e===y.rows.length-1,a=o.current.rowHasAutoHeight(g)?"auto":o.current.unstable_getRowHeight(g);let s;s=null!=G[g]&&o.current.isRowSelectable(g),l&&l(g);const d=null!==p&&p.id===g?p.field:null,m=void 0!==J&&C[J],b=m&&d?[m,...Y]:Y;let B=null;null!==Z&&Z.id===g&&(B="view"===o.current.getCellParams(g,Z.field).cellMode?Z.field:null);const W="function"==typeof u&&u(g,t)||{},{style:R}=W,k=(0,Ge.Z)(W,Nb);if(!H.current[g]){const e=(0,he.Z)({},R,z);H.current[g]=e}let X=c+((null==y||null==(Q=y.range)?void 0:Q.firstRowIndex)||0)+h+e;V&&(null==p?void 0:p.id)===g?(X=j,U=!0):U&&(X-=1),L.push((0,we.jsx)(I.slots.row,(0,he.Z)({row:t,rowId:g,focusedCellColumnIndexNotInRange:J,isNotVisible:n,rowHeight:a,focusedCell:d,tabbableCell:B,renderedColumns:b,visibleColumns:C,firstColumnToRender:v,lastColumnToRender:f,selected:s,index:X,containerWidth:i,isLastVisible:r,position:A},k,E,{hovered:w===g,style:H.current[g]}),g))}return F.current=u,N.current=z,L},getRootProps:(e={})=>(0,he.Z)({ref:V,onScroll:D,onWheel:T,onTouchMove:P},e,{style:e.style?(0,he.Z)({},e.style,$):$,role:"presentation"}),getContentProps:({style:e}={})=>({style:e?(0,he.Z)({},e,q):q,role:"presentation"}),getRenderZoneProps:()=>({ref:B,role:"rowgroup"})}})({ref:l});return(0,we.jsxs)(lh,(0,he.Z)({className:n},I(o),{children:[(0,we.jsx)(sh,{}),(0,we.jsx)(nh,(0,he.Z)({},C(),{children:(0,we.jsx)(Ch,(0,he.Z)({},r(),{children:a()}))}))]}))})),Ah=g.forwardRef((function(e,l){const t=(e=>{const[l,t,n]=(o=(0,We.Z)({props:e,name:"MuiDataGrid"}),g.useMemo((()=>{const{components:e,componentsProps:g}=o;return[e,g,MZ((0,Ge.Z)(o,xZ))]}),[o]));var o;const I=g.useMemo((()=>(0,he.Z)({},uu,n.localeText)),[n.localeText]),C=g.useMemo((()=>function({defaultSlots:e,slots:g,components:l}){const t=null!=g?g:l?KZ(l):null;if(!t||0===Object.keys(t).length)return e;const n=(0,he.Z)({},e);return Object.keys(t).forEach((e=>{const g=e;void 0!==t[g]&&(n[g]=t[g])})),n}({defaultSlots:LZ,slots:n.slots,components:l})),[l,n.slots]);return g.useMemo((()=>{var e;return(0,he.Z)({},EZ,n,{localeText:I,slots:C,slotProps:null!=(e=n.slotProps)?e:t},zZ)}),[n,I,C,t])})(e),n=eh(t.apiRef,t);return(0,we.jsx)(wC,{privateApiRef:n,props:t,children:(0,we.jsxs)(_I,(0,he.Z)({className:t.className,style:t.style,sx:t.sx,ref:l},t.forwardedProps,{children:[(0,we.jsx)(eC,{}),(0,we.jsx)(kC,{VirtualScrollerComponent:uh}),(0,we.jsx)(XC,{})]}))})})),mh=g.memo(Ah);Ah.propTypes={apiRef:Mo().shape({current:Mo().object.isRequired}),"aria-label":Mo().string,"aria-labelledby":Mo().string,autoHeight:Mo().bool,autoPageSize:Mo().bool,cellModesModel:Mo().object,checkboxSelection:Mo().bool,classes:Mo().object,clipboardCopyCellDelimiter:Mo().string,columnBuffer:Mo().number,columnGroupingModel:Mo().arrayOf(Mo().object),columnHeaderHeight:Mo().number,columns:(Mo().array.isRequired,()=>null),columnThreshold:Mo().number,columnVisibilityModel:Mo().object,components:Mo().object,componentsProps:Mo().object,density:Mo().oneOf(["comfortable","compact","standard"]),disableColumnFilter:Mo().bool,disableColumnMenu:Mo().bool,disableColumnSelector:Mo().bool,disableDensitySelector:Mo().bool,disableEval:Mo().bool,disableRowSelectionOnClick:Mo().bool,disableVirtualization:Mo().bool,editMode:Mo().oneOf(["cell","row"]),experimentalFeatures:Mo().shape({ariaV7:Mo().bool,columnGrouping:Mo().bool,warnIfFocusStateIsNotSynced:Mo().bool}),filterDebounceMs:Mo().number,filterMode:Mo().oneOf(["client","server"]),filterModel:Mo().shape({items:Mo().arrayOf(Mo().shape({field:Mo().string.isRequired,id:Mo().oneOfType([Mo().number,Mo().string]),operator:Mo().string.isRequired,value:Mo().any})).isRequired,logicOperator:Mo().oneOf(["and","or"]),quickFilterExcludeHiddenColumns:Mo().bool,quickFilterLogicOperator:Mo().oneOf(["and","or"]),quickFilterValues:Mo().array}),forwardedProps:Mo().object,getCellClassName:Mo().func,getDetailPanelContent:Mo().func,getEstimatedRowHeight:Mo().func,getRowClassName:Mo().func,getRowHeight:Mo().func,getRowId:Mo().func,getRowSpacing:Mo().func,hideFooter:Mo().bool,hideFooterPagination:Mo().bool,hideFooterSelectedRowCount:Mo().bool,ignoreDiacritics:Mo().bool,initialState:Mo().object,isCellEditable:Mo().func,isRowSelectable:Mo().func,keepNonExistentRowsSelected:Mo().bool,loading:Mo().bool,localeText:Mo().object,logger:Mo().shape({debug:Mo().func.isRequired,error:Mo().func.isRequired,info:Mo().func.isRequired,warn:Mo().func.isRequired}),logLevel:Mo().oneOf(["debug","error","info","warn",!1]),nonce:Mo().string,onCellClick:Mo().func,onCellDoubleClick:Mo().func,onCellEditStart:Mo().func,onCellEditStop:Mo().func,onCellKeyDown:Mo().func,onCellModesModelChange:Mo().func,onClipboardCopy:Mo().func,onColumnHeaderClick:Mo().func,onColumnHeaderDoubleClick:Mo().func,onColumnHeaderEnter:Mo().func,onColumnHeaderLeave:Mo().func,onColumnHeaderOut:Mo().func,onColumnHeaderOver:Mo().func,onColumnOrderChange:Mo().func,onColumnVisibilityModelChange:Mo().func,onFilterModelChange:Mo().func,onMenuClose:Mo().func,onMenuOpen:Mo().func,onPaginationModelChange:Mo().func,onPreferencePanelClose:Mo().func,onPreferencePanelOpen:Mo().func,onProcessRowUpdateError:Mo().func,onResize:Mo().func,onRowClick:Mo().func,onRowDoubleClick:Mo().func,onRowEditCommit:Mo().func,onRowEditStart:Mo().func,onRowEditStop:Mo().func,onRowModesModelChange:Mo().func,onRowSelectionModelChange:Mo().func,onSortModelChange:Mo().func,onStateChange:Mo().func,pageSizeOptions:Mo().arrayOf(Mo().oneOfType([Mo().number,Mo().shape({label:Mo().string.isRequired,value:Mo().number.isRequired})]).isRequired),pagination:e=>!1===e.pagination?new Error(["MUI: `<DataGrid pagination={false} />` is not a valid prop.","Infinite scrolling is not available in the MIT version.","","You need to upgrade to DataGridPro or DataGridPremium component to disable the pagination."].join("\n")):null,paginationMode:Mo().oneOf(["client","server"]),paginationModel:Mo().shape({page:Mo().number.isRequired,pageSize:Mo().number.isRequired}),processRowUpdate:Mo().func,rowBuffer:Mo().number,rowCount:Mo().number,rowHeight:Mo().number,rowModesModel:Mo().object,rowPositionsDebounceMs:Mo().number,rows:Mo().arrayOf(Mo().object).isRequired,rowSelection:Mo().bool,rowSelectionModel:Mo().oneOfType([Mo().arrayOf(Mo().oneOfType([Mo().number,Mo().string]).isRequired),Mo().number,Mo().string]),rowSpacingType:Mo().oneOf(["border","margin"]),rowThreshold:Mo().number,scrollbarSize:Mo().number,showCellVerticalBorder:Mo().bool,showColumnVerticalBorder:Mo().bool,slotProps:Mo().object,slots:Mo().object,sortingMode:Mo().oneOf(["client","server"]),sortingOrder:Mo().arrayOf(Mo().oneOf(["asc","desc"])),sortModel:Mo().arrayOf(Mo().shape({field:Mo().string.isRequired,sort:Mo().oneOf(["asc","desc"])})),sx:Mo().oneOfType([Mo().arrayOf(Mo().oneOfType([Mo().func,Mo().object,Mo().bool])),Mo().func,Mo().object]),unstable_ignoreValueFormatterDuringExport:Mo().oneOfType([Mo().shape({clipboardExport:Mo().bool,csvExport:Mo().bool}),Mo().bool])};var bh=n(4900),ph=n(7460),Zh=n.n(ph);const hh=()=>{const{eventCode:e}=O(),[l,t]=(0,g.useState)(null),[n,o]=(0,g.useState)(!1),[I,C]=(0,g.useState)([]);(0,g.useEffect)((()=>{(async()=>{try{const g=await fetch(`/api/get-event/?code=${e}`);if(g.ok){const e=await g.json();t(e)}else console.error(`HTTP error! Status: ${g.status}`)}catch(e){console.error("Error:",e.message)}})()}),[e]),(0,g.useEffect)((()=>{l&&(async()=>{try{const g=await fetch(`/api/get-guest-list/?eventCode=${e}`);if(g.ok){const e=(await g.json()).map((e=>({id:e.id+1,col1:e.name,col2:e.email,col3:e.ticketChecked})));console.log("Guest List:",e),C(e)}else console.error(`HTTP error! Status: ${g.status}`)}catch(e){console.error("Error:",e.message)}})()}),[e,l]);const r=async e=>{const g=e.target.files[0];if(g)try{const e=await a(g),l=await i(e);c(l)}catch(e){console.error("Error reading or parsing CSV file:",e.message)}},a=e=>new Promise(((g,l)=>{const t=new FileReader;t.onload=e=>g(e.target.result),t.onerror=e=>l(e),t.readAsText(e)})),i=e=>new Promise(((g,l)=>{Zh().parse(e,{header:!0,complete:e=>{if(e.errors.length>0)l(new Error("Error parsing CSV file"));else{const l=e.data.map(((e,g)=>({id:g+1,col1:e.name||"",col2:e.email||"",col3:"true"===e.ticketChecked||!1})));g(l)}},error:e=>{l(e)}})})),c=async g=>{console.log("CSV Data:",g);for(const l of g){const{col1:g,col2:t,col3:n}=l;await d(g,t,n,e)}C(g),alert("CSV file imported successfully!")},s=(0,ho.Z)({typography:{fontFamily:"Corben, sans-serif"},palette:{primary:{main:"#5cba95",contrastText:"#fff"},secondary:{main:"#8ce1c0",contrastText:"#121413"}}}),d=async(e,g,l,t)=>{try{const n=await fetch("/api/create-guest/",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({name:e,email:g,ticketChecked:l,eventCode:t})});if(n.ok){const e=await n.json();console.log("Guest added successfully:",e)}else console.error(`HTTP error! Status: ${n.status}`)}catch(e){console.error("Error:",e.message)}};if(!l)return g.createElement(ko,{theme:s},g.createElement("div",{className:"h-screen w-full bg-background overflow-hidden relative px-4 lg:px-24 py-8 text-text"},g.createElement("div",{className:"pb-8"},g.createElement("h1",{className:"text-2xl lg:text-4xl font-heading font-bold"},g.createElement("span",{className:"text-transparent bg-clip-text bg-gradient-to-br from-primary to-accent"},"404 Not Found")),g.createElement("div",{className:"text-base font-body"},"Sorry, the event you are looking for does not exist. Please try again.")),g.createElement("div",{className:"pointer-events-none"},g.createElement("div",{className:"absolute top-0 -left-4 w-[30vw] h-[30vw] bg-secondary rounded-full mix-blend-multiply filter blur-xl opacity-20 animate-blob "}),g.createElement("div",{className:"absolute top-0 -right-4 w-[30vw] h-[30vw] bg-primary rounded-full mix-blend-multiply filter blur-xl opacity-20 animate-blob animation-delay-2000"}),g.createElement("div",{className:"absolute -bottom-8 left-20 w-[30vw] h-[30vw] bg-accent rounded-full mix-blend-multiply filter blur-xl opacity-20 animate-blob animation-delay-4000"}))));const u=l.date?new Date(l.date).toLocaleDateString([],{weekday:"short",day:"numeric",month:"short",year:"numeric"}):"",A=l.date?new Date(l.date).toLocaleTimeString([],{hour:"2-digit",minute:"2-digit"}):"";return g.createElement(ko,{theme:s},g.createElement("div",{className:"min-h-screen w-full bg-background overflow-x-hidden relative px-4 lg:px-24 py-8 text-text no-scrollbar"},g.createElement("div",{className:"pb-8"},g.createElement("h1",{className:"text-xl lg:text-3xl font-heading font-bold"},g.createElement("span",{className:"text-transparent bg-clip-text bg-gradient-to-br from-primary to-accent"},l.name)),g.createElement("div",{className:"text-base font-body"},l.description)),g.createElement("div",null,g.createElement("h2",{className:"text-xl font-body font-bold decoration-4 decoration-accent underline pb-4"},"Event's Information"),g.createElement("div",{className:"text-sm md:text-base font-body p-4 bg-secondary bg-opacity-50 rounded-xl drop-shadow-xl"},g.createElement("div",null,g.createElement("span",{class:"font-semibold"},"Date and time:")," ",u," , ",A),g.createElement("div",null,g.createElement("span",{class:"font-semibold"},"Location:")," ",l.location),g.createElement("div",null,g.createElement("span",{class:"font-semibold"},"Event's link:")," ",l.link),g.createElement("div",null,g.createElement("span",{class:"font-semibold"},"Number of guests:")," ",I.length))),g.createElement("div",{class:"pt-4"},g.createElement("h2",{className:"text-xl font-body font-bold decoration-4 decoration-accent underline pb-4"},"Guest's List"),g.createElement("div",{className:"mb-4"},g.createElement(Yn,{label:"Upload CSV File",type:"file",accept:".csv",onChange:r,InputProps:{startAdornment:g.createElement(Ji,{component:"label"},g.createElement(bh.Z,null),g.createElement("input",{type:"file",hidden:!0,onChange:r}))}})),g.createElement("div",{style:{height:300,width:"100%"}},g.createElement(mh,{editMode:"row",rows:I,columns:[{field:"col1",headerName:"Name",flex:1},{field:"col2",headerName:"Email",flex:1},{field:"col3",headerName:"Ticket Checked",width:150,type:"boolean",editable:!0}],pageSize:10,onRowEditStop:(e,g)=>{const{id:l,field:t,value:n}=e,o=I.map((e=>e.id===l?{...e,[t]:"col3"===t?!e[t]:e[t]}:e));C(o)}})),g.createElement("div",{className:"mt-4 flex gap-4"},g.createElement(Zo,{variant:"contained",color:"primary",onClick:()=>{const g={eventCode:e,guests:I.map((e=>({name:e.col1,email:e.col2,ticketChecked:e.col3})))};fetch("/api/update-guest-list/",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(g)}).then((e=>{if(e.ok)return e.json();console.error(`HTTP error! Status: ${e.status}`)})).then((e=>{alert("Guests updated successfully!"),console.log("Guests updated successfully:",e)})).catch((e=>{console.error("Error:",e.message)}))}},"Save Changes"),g.createElement(Zo,{variant:"contained",color:"secondary",onClick:()=>{o(!0),fetch("/api/send-emails/",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({eventCode:e})}).then((e=>{if(!e.ok)throw new Error(`HTTP error! Status: ${e.status}`);return e.json()})).then((e=>{alert("Emails Sent!"),console.log("Response:",e),o(!1)})).catch((e=>{console.error("Error:",e)}))},disabled:n},"Send Tickets through Email"))),g.createElement("div",{className:"fixed top-8 right-8"},g.createElement("div",{className:"md:hidden"},g.createElement("a",{href:`/scan/${e}`},g.createElement(No,{color:"primary","aria-label":"qr"},g.createElement(Ko.Z,null)))),g.createElement("div",{className:"hidden md:block"},g.createElement("a",{href:`/scan/${e}`},g.createElement(No,{variant:"extended",color:"primary","aria-label":"qr"},g.createElement(Ko.Z,{sx:{mr:1}}),"Scan QR Code")))),g.createElement("div",{className:"pointer-events-none"})))},Gh=()=>g.createElement("div",{className:"bg-background w-full h-screen overflow-hidden relative px-8 lg:px-24 sm:py-8 py-16 text-text"},g.createElement("div",{className:"flex flex-col h-full w-full justify-between gap-y-4"},g.createElement("div",null,g.createElement("h1",{className:"text-2xl sm:text-3xl lg:text-4xl font-heading font-bold"},"Welcome to ",g.createElement("span",{className:"text-transparent bg-clip-text bg-gradient-to-br from-primary to-accent"},"EventFlow!")),g.createElement("div",{className:"text-sm md:text-base font-body"},"EventFlow is your all-in-one solution for seamless event management for ",g.createElement("span",{className:"font-bold"},"completely FREE"),". Whether you're organizing conferences, weddings, or social gatherings, EventFlow simplifies the entire process, ensuring every detail is flawlessly executed.")),"  ",g.createElement("div",null,g.createElement("h2",{className:"text-xl font-body font-bold decoration-4 decoration-accent underline"},"How To Use"),g.createElement("div",{className:"text-sm md:text-base font-body"},g.createElement("div",null,"1. Get started by creating a new event or joining an existing one."),g.createElement("div",null,"2. Fill in the event details and import your guest list effortlessly."),g.createElement("div",null,"3. Send out invitations using automatically generated QR code tickets while efficiently tracking RSVPs."),g.createElement("div",null,"4. Simplify event check-in by using the QR code scanner at the entrance.")))," ",g.createElement("div",{className:"flex gap-8 w-full justify-center"},g.createElement(be,{to:"/create",style:{textDecoration:"none"},className:"hover:scale-105 ease-in-out delay-100 duration-300 hover:-translate-y-2"},g.createElement("button",{className:"px-8 py-3 md:py-4 text-sm md:text-base bg-primary font-body rounded-lg drop-shadow-xl border-2 border-gray-200"},"Create Event")),g.createElement(be,{to:"/join",style:{textDecoration:"none"},className:"hover:scale-105 ease-in-out delay-100 duration-300 hover:-translate-y-2"},g.createElement("button",{className:"px-8 py-3 md:py-4 text-sm md:text-base bg-secondary font-body rounded-lg drop-shadow-xl border-2 border-gray-200"},"Join Event")))," ",g.createElement("div",null,g.createElement("h2",{className:"text-xl font-body font-bold decoration-4 decoration-accent underline"},"Contribution & Feedback"),g.createElement("div",{className:"text-sm md:text-base font-body"},g.createElement("div",null,"This is only a solo personal project, so I truly appreciate any feedback you have."),g.createElement("div",null,"If you have feature requests or suggestions, please feel free to reach out to me through GitHub or LinkedIn."),g.createElement("div",null,"Contact me on ",g.createElement("a",{href:"https://github.com/Theskrtnerd",className:"text-blue-500",target:"_blank",rel:"noopener noreferrer"},"GitHub")," or ",g.createElement("a",{href:"https://www.linkedin.com/in/xineohperif/",className:"text-blue-500",target:"_blank",rel:"noopener noreferrer"},"LinkedIn"),".")))," "),g.createElement("div",{className:"pointer-events-none"},g.createElement("div",{className:"absolute top-0 -left-4 w-[30vw] h-[30vw] bg-secondary rounded-full mix-blend-multiply filter blur-xl opacity-20 animate-blob "}),g.createElement("div",{className:"absolute top-0 -right-4 w-[30vw] h-[30vw] bg-primary rounded-full mix-blend-multiply filter blur-xl opacity-20 animate-blob animation-delay-2000"}),g.createElement("div",{className:"absolute -bottom-8 left-20 w-[30vw] h-[30vw] bg-accent rounded-full mix-blend-multiply filter blur-xl opacity-20 animate-blob animation-delay-4000"})));var yh=n(2090),Bh=n.n(yh);const Sh=()=>{const{eventCode:e}=O(),[l]=(0,g.useState)(100),[t,n]=(0,g.useState)(!0),o=(0,ho.Z)({typography:{fontFamily:"Corben, sans-serif"},palette:{primary:{main:"#5cba95",contrastText:"#fff"}}});return(0,g.useEffect)((()=>{console.log("Event Code:",e)}),[e]),g.createElement(ko,{theme:o},g.createElement("div",{className:"h-screen w-full bg-background overflow-hidden relative px-4 lg:px-24 py-8 text-text"},g.createElement("div",{className:"w-full h-full flex flex-col justify-center items-center"},g.createElement("h1",{className:"text-2xl lg:text-4xl font-heading font-bold"},g.createElement("span",{className:"text-transparent bg-clip-text bg-gradient-to-br from-primary to-accent"},"QR Code Scanner")),g.createElement(Bh(),{delay:l,style:{height:320,width:320},onError:e=>{console.error(e)},onScan:e=>{null!==e&&t&&(n(!1),fetch("/api/check-guest/",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({qrCodeData:e.text})}).then((e=>{if(!e.ok)throw new Error(`HTTP error! Status: ${e.status}`);return e.json()})).then((e=>{alert(e.message)})).catch((e=>{console.error("Error:",e)})).finally((()=>{n(!0)})))},disabled:!t})),g.createElement("div",{className:"pointer-events-none"},g.createElement("div",{className:"absolute top-0 -left-4 w-[30vw] h-[30vw] bg-secondary rounded-full mix-blend-multiply filter blur-xl opacity-20 animate-blob "}),g.createElement("div",{className:"absolute top-0 -right-4 w-[30vw] h-[30vw] bg-primary rounded-full mix-blend-multiply filter blur-xl opacity-20 animate-blob animation-delay-2000"}),g.createElement("div",{className:"absolute -bottom-8 left-20 w-[30vw] h-[30vw] bg-accent rounded-full mix-blend-multiply filter blur-xl opacity-20 animate-blob animation-delay-4000"}))))},Vh=()=>{const e=(0,ho.Z)({typography:{fontFamily:"Corben, sans-serif"},palette:{primary:{main:"#5cba95",contrastText:"#fff"}}});return g.createElement(ko,{theme:e},g.createElement("div",{className:"h-screen w-full bg-background overflow-hidden relative px-4 lg:px-24 py-8 text-text"},g.createElement("div",{className:"pb-8"},g.createElement("h1",{className:"text-2xl lg:text-4xl font-heading font-bold"},g.createElement("span",{className:"text-transparent bg-clip-text bg-gradient-to-br from-primary to-accent"},"404 Not Found")),g.createElement("div",{className:"text-base font-body"},"Sorry, the page you are looking for does not exist. Please try again.")),g.createElement("div",{className:"pointer-events-none"},g.createElement("div",{className:"absolute top-0 -left-4 w-[30vw] h-[30vw] bg-secondary rounded-full mix-blend-multiply filter blur-xl opacity-20 animate-blob "}),g.createElement("div",{className:"absolute top-0 -right-4 w-[30vw] h-[30vw] bg-primary rounded-full mix-blend-multiply filter blur-xl opacity-20 animate-blob animation-delay-2000"}),g.createElement("div",{className:"absolute -bottom-8 left-20 w-[30vw] h-[30vw] bg-accent rounded-full mix-blend-multiply filter blur-xl opacity-20 animate-blob animation-delay-4000"}))))},Wh=()=>g.createElement(ue,null,g.createElement(ae,null,g.createElement(Ce,{path:"/create",element:g.createElement(Xo,null)}),g.createElement(Ce,{path:"/join",element:g.createElement(Jo,null)}),g.createElement(Ce,{path:"/",element:g.createElement(Gh,null)}),g.createElement(Ce,{path:"/event/:eventCode",element:g.createElement(hh,null)}),g.createElement(Ce,{path:"/scan/:eventCode",element:g.createElement(Sh,null)}),g.createElement(Ce,{path:"*",element:g.createElement(Vh,null)})));t.render(g.createElement(Wh,null),document.getElementById("app"))})()})();
//# sourceMappingURL=main.js.e42153f576c0.map